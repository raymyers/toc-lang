var Kl=Object.defineProperty;var Xl=(j,$,_e)=>$ in j?Kl(j,$,{enumerable:!0,configurable:!0,writable:!0,value:_e}):j[$]=_e;var Ql=(j,$)=>()=>($||j(($={exports:{}}).exports,$),$.exports);var pn=(j,$,_e)=>(Xl(j,typeof $!="symbol"?$+"":$,_e),_e);var Zl=Ql((exports,module)=>{function _mergeNamespaces(j,$){for(var _e=0;_e<$.length;_e++){const et=$[_e];if(typeof et!="string"&&!Array.isArray(et)){for(const tt in et)if(tt!=="default"&&!(tt in j)){const nt=Object.getOwnPropertyDescriptor(et,tt);nt&&Object.defineProperty(j,tt,nt.get?nt:{enumerable:!0,get:()=>et[tt]})}}}return Object.freeze(Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}))}(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))et(tt);new MutationObserver(tt=>{for(const nt of tt)if(nt.type==="childList")for(const rt of nt.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&et(rt)}).observe(document,{childList:!0,subtree:!0});function _e(tt){const nt={};return tt.integrity&&(nt.integrity=tt.integrity),tt.referrerPolicy&&(nt.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?nt.credentials="include":tt.crossOrigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function et(tt){if(tt.ep)return;tt.ep=!0;const nt=_e(tt);fetch(tt.href,nt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$4=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(j){return j===null||typeof j!="object"?null:(j=z$2&&j[z$2]||j["@@iterator"],typeof j=="function"?j:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$2={};function E$3(j,$,_e){this.props=j,this.context=$,this.refs=D$2,this.updater=_e||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(j,$){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,$,"setState")};E$3.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function F$1(){}F$1.prototype=E$3.prototype;function G$2(j,$,_e){this.props=j,this.context=$,this.refs=D$2,this.updater=_e||B$2}var H$1=G$2.prototype=new F$1;H$1.constructor=G$2;C$3(H$1,E$3.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$2={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(j,$,_e){var et,tt={},nt=null,rt=null;if($!=null)for(et in $.ref!==void 0&&(rt=$.ref),$.key!==void 0&&(nt=""+$.key),$)J.call($,et)&&!L$3.hasOwnProperty(et)&&(tt[et]=$[et]);var it=arguments.length-2;if(it===1)tt.children=_e;else if(1<it){for(var st=Array(it),ot=0;ot<it;ot++)st[ot]=arguments[ot+2];tt.children=st}if(j&&j.defaultProps)for(et in it=j.defaultProps,it)tt[et]===void 0&&(tt[et]=it[et]);return{$$typeof:l$3,type:j,key:nt,ref:rt,props:tt,_owner:K$2.current}}function N$3(j,$){return{$$typeof:l$3,type:j.type,key:$,ref:j.ref,props:j.props,_owner:j._owner}}function O$3(j){return typeof j=="object"&&j!==null&&j.$$typeof===l$3}function escape(j){var $={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(_e){return $[_e]})}var P$2=/\/+/g;function Q$1(j,$){return typeof j=="object"&&j!==null&&j.key!=null?escape(""+j.key):$.toString(36)}function R$2(j,$,_e,et,tt){var nt=typeof j;(nt==="undefined"||nt==="boolean")&&(j=null);var rt=!1;if(j===null)rt=!0;else switch(nt){case"string":case"number":rt=!0;break;case"object":switch(j.$$typeof){case l$3:case n$3:rt=!0}}if(rt)return rt=j,tt=tt(rt),j=et===""?"."+Q$1(rt,0):et,I$2(tt)?(_e="",j!=null&&(_e=j.replace(P$2,"$&/")+"/"),R$2(tt,$,_e,"",function(ot){return ot})):tt!=null&&(O$3(tt)&&(tt=N$3(tt,_e+(!tt.key||rt&&rt.key===tt.key?"":(""+tt.key).replace(P$2,"$&/")+"/")+j)),$.push(tt)),1;if(rt=0,et=et===""?".":et+":",I$2(j))for(var it=0;it<j.length;it++){nt=j[it];var st=et+Q$1(nt,it);rt+=R$2(nt,$,_e,st,tt)}else if(st=A$3(j),typeof st=="function")for(j=st.call(j),it=0;!(nt=j.next()).done;)nt=nt.value,st=et+Q$1(nt,it++),rt+=R$2(nt,$,_e,st,tt);else if(nt==="object")throw $=String(j),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return rt}function S$2(j,$,_e){if(j==null)return j;var et=[],tt=0;return R$2(j,et,"","",function(nt){return $.call(_e,nt,tt++)}),et}function T$4(j){if(j._status===-1){var $=j._result;$=$(),$.then(function(_e){(j._status===0||j._status===-1)&&(j._status=1,j._result=_e)},function(_e){(j._status===0||j._status===-1)&&(j._status=2,j._result=_e)}),j._status===-1&&(j._status=0,j._result=$)}if(j._status===1)return j._result.default;throw j._result}var U$1={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(j,$,_e){S$2(j,function(){$.apply(this,arguments)},_e)},count:function(j){var $=0;return S$2(j,function(){$++}),$},toArray:function(j){return S$2(j,function($){return $})||[]},only:function(j){if(!O$3(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};react_production_min.Component=E$3;react_production_min.Fragment=p$6;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(j,$,_e){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var et=C$3({},j.props),tt=j.key,nt=j.ref,rt=j._owner;if($!=null){if($.ref!==void 0&&(nt=$.ref,rt=K$2.current),$.key!==void 0&&(tt=""+$.key),j.type&&j.type.defaultProps)var it=j.type.defaultProps;for(st in $)J.call($,st)&&!L$3.hasOwnProperty(st)&&(et[st]=$[st]===void 0&&it!==void 0?it[st]:$[st])}var st=arguments.length-2;if(st===1)et.children=_e;else if(1<st){it=Array(st);for(var ot=0;ot<st;ot++)it[ot]=arguments[ot+2];et.children=it}return{$$typeof:l$3,type:j.type,key:tt,ref:nt,props:et,_owner:rt}};react_production_min.createContext=function(j){return j={$$typeof:u$3,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:t$3,_context:j},j.Consumer=j};react_production_min.createElement=M$3;react_production_min.createFactory=function(j){var $=M$3.bind(null,j);return $.type=j,$};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(j){return{$$typeof:v$5,render:j}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(j){return{$$typeof:y$4,_payload:{_status:-1,_result:j},_init:T$4}};react_production_min.memo=function(j,$){return{$$typeof:x$2,type:j,compare:$===void 0?null:$}};react_production_min.startTransition=function(j){var $=V$2.transition;V$2.transition={};try{j()}finally{V$2.transition=$}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(j,$){return U$1.current.useCallback(j,$)};react_production_min.useContext=function(j){return U$1.current.useContext(j)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(j){return U$1.current.useDeferredValue(j)};react_production_min.useEffect=function(j,$){return U$1.current.useEffect(j,$)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(j,$,_e){return U$1.current.useImperativeHandle(j,$,_e)};react_production_min.useInsertionEffect=function(j,$){return U$1.current.useInsertionEffect(j,$)};react_production_min.useLayoutEffect=function(j,$){return U$1.current.useLayoutEffect(j,$)};react_production_min.useMemo=function(j,$){return U$1.current.useMemo(j,$)};react_production_min.useReducer=function(j,$,_e){return U$1.current.useReducer(j,$,_e)};react_production_min.useRef=function(j){return U$1.current.useRef(j)};react_production_min.useState=function(j){return U$1.current.useState(j)};react_production_min.useSyncExternalStore=function(j,$,_e){return U$1.current.useSyncExternalStore(j,$,_e)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q(j,$,_e){var et,tt={},nt=null,rt=null;_e!==void 0&&(nt=""+_e),$.key!==void 0&&(nt=""+$.key),$.ref!==void 0&&(rt=$.ref);for(et in $)m$4.call($,et)&&!p$5.hasOwnProperty(et)&&(tt[et]=$[et]);if(j&&j.defaultProps)for(et in $=j.defaultProps,$)tt[et]===void 0&&(tt[et]=$[et]);return{$$typeof:k$2,type:j,key:nt,ref:rt,props:tt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(j){function $(It,Vt){var jt=It.length;It.push(Vt);e:for(;0<jt;){var Yt=jt-1>>>1,Xt=It[Yt];if(0<tt(Xt,Vt))It[Yt]=Vt,It[jt]=Xt,jt=Yt;else break e}}function _e(It){return It.length===0?null:It[0]}function et(It){if(It.length===0)return null;var Vt=It[0],jt=It.pop();if(jt!==Vt){It[0]=jt;e:for(var Yt=0,Xt=It.length,sn=Xt>>>1;Yt<sn;){var on=2*(Yt+1)-1,hn=It[on],cn=on+1,An=It[cn];if(0>tt(hn,jt))cn<Xt&&0>tt(An,hn)?(It[Yt]=An,It[cn]=jt,Yt=cn):(It[Yt]=hn,It[on]=jt,Yt=on);else if(cn<Xt&&0>tt(An,jt))It[Yt]=An,It[cn]=jt,Yt=cn;else break e}}return Vt}function tt(It,Vt){var jt=It.sortIndex-Vt.sortIndex;return jt!==0?jt:It.id-Vt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;j.unstable_now=function(){return nt.now()}}else{var rt=Date,it=rt.now();j.unstable_now=function(){return rt.now()-it}}var st=[],ot=[],at=1,lt=null,ut=3,ct=!1,ft=!1,dt=!1,mt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function vt(It){for(var Vt=_e(ot);Vt!==null;){if(Vt.callback===null)et(ot);else if(Vt.startTime<=It)et(ot),Vt.sortIndex=Vt.expirationTime,$(st,Vt);else break;Vt=_e(ot)}}function Ct(It){if(dt=!1,vt(It),!ft)if(_e(st)!==null)ft=!0,Kt(At);else{var Vt=_e(ot);Vt!==null&&Ut(Ct,Vt.startTime-It)}}function At(It,Vt){ft=!1,dt&&(dt=!1,pt(Bt),Bt=-1),ct=!0;var jt=ut;try{for(vt(Vt),lt=_e(st);lt!==null&&(!(lt.expirationTime>Vt)||It&&!kt());){var Yt=lt.callback;if(typeof Yt=="function"){lt.callback=null,ut=lt.priorityLevel;var Xt=Yt(lt.expirationTime<=Vt);Vt=j.unstable_now(),typeof Xt=="function"?lt.callback=Xt:lt===_e(st)&&et(st),vt(Vt)}else et(st);lt=_e(st)}if(lt!==null)var sn=!0;else{var on=_e(ot);on!==null&&Ut(Ct,on.startTime-Vt),sn=!1}return sn}finally{lt=null,ut=jt,ct=!1}}var $t=!1,bt=null,Bt=-1,Rt=5,St=-1;function kt(){return!(j.unstable_now()-St<Rt)}function Pt(){if(bt!==null){var It=j.unstable_now();St=It;var Vt=!0;try{Vt=bt(!0,It)}finally{Vt?Mt():($t=!1,bt=null)}}else $t=!1}var Mt;if(typeof yt=="function")Mt=function(){yt(Pt)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,zt=Lt.port2;Lt.port1.onmessage=Pt,Mt=function(){zt.postMessage(null)}}else Mt=function(){mt(Pt,0)};function Kt(It){bt=It,$t||($t=!0,Mt())}function Ut(It,Vt){Bt=mt(function(){It(j.unstable_now())},Vt)}j.unstable_IdlePriority=5,j.unstable_ImmediatePriority=1,j.unstable_LowPriority=4,j.unstable_NormalPriority=3,j.unstable_Profiling=null,j.unstable_UserBlockingPriority=2,j.unstable_cancelCallback=function(It){It.callback=null},j.unstable_continueExecution=function(){ft||ct||(ft=!0,Kt(At))},j.unstable_forceFrameRate=function(It){0>It||125<It?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<It?Math.floor(1e3/It):5},j.unstable_getCurrentPriorityLevel=function(){return ut},j.unstable_getFirstCallbackNode=function(){return _e(st)},j.unstable_next=function(It){switch(ut){case 1:case 2:case 3:var Vt=3;break;default:Vt=ut}var jt=ut;ut=Vt;try{return It()}finally{ut=jt}},j.unstable_pauseExecution=function(){},j.unstable_requestPaint=function(){},j.unstable_runWithPriority=function(It,Vt){switch(It){case 1:case 2:case 3:case 4:case 5:break;default:It=3}var jt=ut;ut=It;try{return Vt()}finally{ut=jt}},j.unstable_scheduleCallback=function(It,Vt,jt){var Yt=j.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?Yt+jt:Yt):jt=Yt,It){case 1:var Xt=-1;break;case 2:Xt=250;break;case 5:Xt=1073741823;break;case 4:Xt=1e4;break;default:Xt=5e3}return Xt=jt+Xt,It={id:at++,callback:Vt,priorityLevel:It,startTime:jt,expirationTime:Xt,sortIndex:-1},jt>Yt?(It.sortIndex=jt,$(ot,It),_e(st)===null&&It===_e(ot)&&(dt?(pt(Bt),Bt=-1):dt=!0,Ut(Ct,jt-Yt))):(It.sortIndex=Xt,$(st,It),ft||ct||(ft=!0,Kt(At))),It},j.unstable_shouldYield=kt,j.unstable_wrapCallback=function(It){var Vt=ut;return function(){var jt=ut;ut=Vt;try{return It.apply(this,arguments)}finally{ut=jt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$4(j){for(var $="https://reactjs.org/docs/error-decoder.html?invariant="+j,_e=1;_e<arguments.length;_e++)$+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+j+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(j,$){ha(j,$),ha(j+"Capture",$)}function ha(j,$){for(ea[j]=$,j=0;j<$.length;j++)da.add($[j])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(j){return ja.call(ma,j)?!0:ja.call(la,j)?!1:ka.test(j)?ma[j]=!0:(la[j]=!0,!1)}function pa(j,$,_e,et){if(_e!==null&&_e.type===0)return!1;switch(typeof $){case"function":case"symbol":return!0;case"boolean":return et?!1:_e!==null?!_e.acceptsBooleans:(j=j.toLowerCase().slice(0,5),j!=="data-"&&j!=="aria-");default:return!1}}function qa(j,$,_e,et){if($===null||typeof $>"u"||pa(j,$,_e,et))return!0;if(et)return!1;if(_e!==null)switch(_e.type){case 3:return!$;case 4:return $===!1;case 5:return isNaN($);case 6:return isNaN($)||1>$}return!1}function v$4(j,$,_e,et,tt,nt,rt){this.acceptsBooleans=$===2||$===3||$===4,this.attributeName=et,this.attributeNamespace=tt,this.mustUseProperty=_e,this.propertyName=j,this.type=$,this.sanitizeURL=nt,this.removeEmptyString=rt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(j){z$1[j]=new v$4(j,0,!1,j,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(j){var $=j[0];z$1[$]=new v$4($,1,!1,j[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(j){z$1[j]=new v$4(j,2,!1,j.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(j){z$1[j]=new v$4(j,2,!1,j,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(j){z$1[j]=new v$4(j,3,!1,j.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(j){z$1[j]=new v$4(j,3,!0,j,null,!1,!1)});["capture","download"].forEach(function(j){z$1[j]=new v$4(j,4,!1,j,null,!1,!1)});["cols","rows","size","span"].forEach(function(j){z$1[j]=new v$4(j,6,!1,j,null,!1,!1)});["rowSpan","start"].forEach(function(j){z$1[j]=new v$4(j,5,!1,j.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(j){return j[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(j){var $=j.replace(ra,sa);z$1[$]=new v$4($,1,!1,j,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(j){var $=j.replace(ra,sa);z$1[$]=new v$4($,1,!1,j,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(j){var $=j.replace(ra,sa);z$1[$]=new v$4($,1,!1,j,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(j){z$1[j]=new v$4(j,1,!1,j.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(j){z$1[j]=new v$4(j,1,!1,j.toLowerCase(),null,!0,!0)});function ta(j,$,_e,et){var tt=z$1.hasOwnProperty($)?z$1[$]:null;(tt!==null?tt.type!==0:et||!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&(qa($,_e,tt,et)&&(_e=null),et||tt===null?oa($)&&(_e===null?j.removeAttribute($):j.setAttribute($,""+_e)):tt.mustUseProperty?j[tt.propertyName]=_e===null?tt.type===3?!1:"":_e:($=tt.attributeName,et=tt.attributeNamespace,_e===null?j.removeAttribute($):(tt=tt.type,_e=tt===3||tt===4&&_e===!0?"":""+_e,et?j.setAttributeNS(et,$,_e):j.setAttribute($,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(j){return j===null||typeof j!="object"?null:(j=Ja&&j[Ja]||j["@@iterator"],typeof j=="function"?j:null)}var A$2=Object.assign,La;function Ma(j){if(La===void 0)try{throw Error()}catch(_e){var $=_e.stack.trim().match(/\n( *(at )?)/);La=$&&$[1]||""}return`
`+La+j}var Na=!1;function Oa(j,$){if(!j||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if($)if($=function(){throw Error()},Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(ot){var et=ot}Reflect.construct(j,[],$)}else{try{$.call()}catch(ot){et=ot}j.call($.prototype)}else{try{throw Error()}catch(ot){et=ot}j()}}catch(ot){if(ot&&et&&typeof ot.stack=="string"){for(var tt=ot.stack.split(`
`),nt=et.stack.split(`
`),rt=tt.length-1,it=nt.length-1;1<=rt&&0<=it&&tt[rt]!==nt[it];)it--;for(;1<=rt&&0<=it;rt--,it--)if(tt[rt]!==nt[it]){if(rt!==1||it!==1)do if(rt--,it--,0>it||tt[rt]!==nt[it]){var st=`
`+tt[rt].replace(" at new "," at ");return j.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",j.displayName)),st}while(1<=rt&&0<=it);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(j=j?j.displayName||j.name:"")?Ma(j):""}function Pa(j){switch(j.tag){case 5:return Ma(j.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return j=Oa(j.type,!1),j;case 11:return j=Oa(j.type.render,!1),j;case 1:return j=Oa(j.type,!0),j;default:return""}}function Qa(j){if(j==null)return null;if(typeof j=="function")return j.displayName||j.name||null;if(typeof j=="string")return j;switch(j){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof j=="object")switch(j.$$typeof){case Ca:return(j.displayName||"Context")+".Consumer";case Ba:return(j._context.displayName||"Context")+".Provider";case Da:var $=j.render;return j=j.displayName,j||(j=$.displayName||$.name||"",j=j!==""?"ForwardRef("+j+")":"ForwardRef"),j;case Ga:return $=j.displayName||null,$!==null?$:Qa(j.type)||"Memo";case Ha:$=j._payload,j=j._init;try{return Qa(j($))}catch{}}return null}function Ra(j){var $=j.type;switch(j.tag){case 24:return"Cache";case 9:return($.displayName||"Context")+".Consumer";case 10:return($._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return j=$.render,j=j.displayName||j.name||"",$.displayName||(j!==""?"ForwardRef("+j+")":"ForwardRef");case 7:return"Fragment";case 5:return $;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa($);case 8:return $===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $}return null}function Sa(j){switch(typeof j){case"boolean":case"number":case"string":case"undefined":return j;case"object":return j;default:return""}}function Ta(j){var $=j.type;return(j=j.nodeName)&&j.toLowerCase()==="input"&&($==="checkbox"||$==="radio")}function Ua(j){var $=Ta(j)?"checked":"value",_e=Object.getOwnPropertyDescriptor(j.constructor.prototype,$),et=""+j[$];if(!j.hasOwnProperty($)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var tt=_e.get,nt=_e.set;return Object.defineProperty(j,$,{configurable:!0,get:function(){return tt.call(this)},set:function(rt){et=""+rt,nt.call(this,rt)}}),Object.defineProperty(j,$,{enumerable:_e.enumerable}),{getValue:function(){return et},setValue:function(rt){et=""+rt},stopTracking:function(){j._valueTracker=null,delete j[$]}}}}function Va(j){j._valueTracker||(j._valueTracker=Ua(j))}function Wa(j){if(!j)return!1;var $=j._valueTracker;if(!$)return!0;var _e=$.getValue(),et="";return j&&(et=Ta(j)?j.checked?"true":"false":j.value),j=et,j!==_e?($.setValue(j),!0):!1}function Xa(j){if(j=j||(typeof document<"u"?document:void 0),typeof j>"u")return null;try{return j.activeElement||j.body}catch{return j.body}}function Ya(j,$){var _e=$.checked;return A$2({},$,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??j._wrapperState.initialChecked})}function Za(j,$){var _e=$.defaultValue==null?"":$.defaultValue,et=$.checked!=null?$.checked:$.defaultChecked;_e=Sa($.value!=null?$.value:_e),j._wrapperState={initialChecked:et,initialValue:_e,controlled:$.type==="checkbox"||$.type==="radio"?$.checked!=null:$.value!=null}}function ab(j,$){$=$.checked,$!=null&&ta(j,"checked",$,!1)}function bb(j,$){ab(j,$);var _e=Sa($.value),et=$.type;if(_e!=null)et==="number"?(_e===0&&j.value===""||j.value!=_e)&&(j.value=""+_e):j.value!==""+_e&&(j.value=""+_e);else if(et==="submit"||et==="reset"){j.removeAttribute("value");return}$.hasOwnProperty("value")?cb(j,$.type,_e):$.hasOwnProperty("defaultValue")&&cb(j,$.type,Sa($.defaultValue)),$.checked==null&&$.defaultChecked!=null&&(j.defaultChecked=!!$.defaultChecked)}function db(j,$,_e){if($.hasOwnProperty("value")||$.hasOwnProperty("defaultValue")){var et=$.type;if(!(et!=="submit"&&et!=="reset"||$.value!==void 0&&$.value!==null))return;$=""+j._wrapperState.initialValue,_e||$===j.value||(j.value=$),j.defaultValue=$}_e=j.name,_e!==""&&(j.name=""),j.defaultChecked=!!j._wrapperState.initialChecked,_e!==""&&(j.name=_e)}function cb(j,$,_e){($!=="number"||Xa(j.ownerDocument)!==j)&&(_e==null?j.defaultValue=""+j._wrapperState.initialValue:j.defaultValue!==""+_e&&(j.defaultValue=""+_e))}var eb=Array.isArray;function fb(j,$,_e,et){if(j=j.options,$){$={};for(var tt=0;tt<_e.length;tt++)$["$"+_e[tt]]=!0;for(_e=0;_e<j.length;_e++)tt=$.hasOwnProperty("$"+j[_e].value),j[_e].selected!==tt&&(j[_e].selected=tt),tt&&et&&(j[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),$=null,tt=0;tt<j.length;tt++){if(j[tt].value===_e){j[tt].selected=!0,et&&(j[tt].defaultSelected=!0);return}$!==null||j[tt].disabled||($=j[tt])}$!==null&&($.selected=!0)}}function gb(j,$){if($.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$2({},$,{value:void 0,defaultValue:void 0,children:""+j._wrapperState.initialValue})}function hb(j,$){var _e=$.value;if(_e==null){if(_e=$.children,$=$.defaultValue,_e!=null){if($!=null)throw Error(p$4(92));if(eb(_e)){if(1<_e.length)throw Error(p$4(93));_e=_e[0]}$=_e}$==null&&($=""),_e=$}j._wrapperState={initialValue:Sa(_e)}}function ib(j,$){var _e=Sa($.value),et=Sa($.defaultValue);_e!=null&&(_e=""+_e,_e!==j.value&&(j.value=_e),$.defaultValue==null&&j.defaultValue!==_e&&(j.defaultValue=_e)),et!=null&&(j.defaultValue=""+et)}function jb(j){var $=j.textContent;$===j._wrapperState.initialValue&&$!==""&&$!==null&&(j.value=$)}function kb(j){switch(j){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(j,$){return j==null||j==="http://www.w3.org/1999/xhtml"?kb($):j==="http://www.w3.org/2000/svg"&&$==="foreignObject"?"http://www.w3.org/1999/xhtml":j}var mb,nb=function(j){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function($,_e,et,tt){MSApp.execUnsafeLocalFunction(function(){return j($,_e,et,tt)})}:j}(function(j,$){if(j.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in j)j.innerHTML=$;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+$.valueOf().toString()+"</svg>",$=mb.firstChild;j.firstChild;)j.removeChild(j.firstChild);for(;$.firstChild;)j.appendChild($.firstChild)}});function ob(j,$){if($){var _e=j.firstChild;if(_e&&_e===j.lastChild&&_e.nodeType===3){_e.nodeValue=$;return}}j.textContent=$}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(j){qb.forEach(function($){$=$+j.charAt(0).toUpperCase()+j.substring(1),pb[$]=pb[j]})});function rb(j,$,_e){return $==null||typeof $=="boolean"||$===""?"":_e||typeof $!="number"||$===0||pb.hasOwnProperty(j)&&pb[j]?(""+$).trim():$+"px"}function sb(j,$){j=j.style;for(var _e in $)if($.hasOwnProperty(_e)){var et=_e.indexOf("--")===0,tt=rb(_e,$[_e],et);_e==="float"&&(_e="cssFloat"),et?j.setProperty(_e,tt):j[_e]=tt}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(j,$){if($){if(tb[j]&&($.children!=null||$.dangerouslySetInnerHTML!=null))throw Error(p$4(137,j));if($.dangerouslySetInnerHTML!=null){if($.children!=null)throw Error(p$4(60));if(typeof $.dangerouslySetInnerHTML!="object"||!("__html"in $.dangerouslySetInnerHTML))throw Error(p$4(61))}if($.style!=null&&typeof $.style!="object")throw Error(p$4(62))}}function vb(j,$){if(j.indexOf("-")===-1)return typeof $.is=="string";switch(j){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(j){return j=j.target||j.srcElement||window,j.correspondingUseElement&&(j=j.correspondingUseElement),j.nodeType===3?j.parentNode:j}var yb=null,zb=null,Ab=null;function Bb(j){if(j=Cb(j)){if(typeof yb!="function")throw Error(p$4(280));var $=j.stateNode;$&&($=Db($),yb(j.stateNode,j.type,$))}}function Eb(j){zb?Ab?Ab.push(j):Ab=[j]:zb=j}function Fb(){if(zb){var j=zb,$=Ab;if(Ab=zb=null,Bb(j),$)for(j=0;j<$.length;j++)Bb($[j])}}function Gb(j,$){return j($)}function Hb(){}var Ib=!1;function Jb(j,$,_e){if(Ib)return j($,_e);Ib=!0;try{return Gb(j,$,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(j,$){var _e=j.stateNode;if(_e===null)return null;var et=Db(_e);if(et===null)return null;_e=et[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(et=!et.disabled)||(j=j.type,et=!(j==="button"||j==="input"||j==="select"||j==="textarea")),j=!et;break e;default:j=!1}if(j)return null;if(_e&&typeof _e!="function")throw Error(p$4(231,$,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(j,$,_e,et,tt,nt,rt,it,st){var ot=Array.prototype.slice.call(arguments,3);try{$.apply(_e,ot)}catch(at){this.onError(at)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(j){Ob=!0,Pb=j}};function Tb(j,$,_e,et,tt,nt,rt,it,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(j,$,_e,et,tt,nt,rt,it,st){if(Tb.apply(this,arguments),Ob){if(Ob){var ot=Pb;Ob=!1,Pb=null}else throw Error(p$4(198));Qb||(Qb=!0,Rb=ot)}}function Vb(j){var $=j,_e=j;if(j.alternate)for(;$.return;)$=$.return;else{j=$;do $=j,$.flags&4098&&(_e=$.return),j=$.return;while(j)}return $.tag===3?_e:null}function Wb(j){if(j.tag===13){var $=j.memoizedState;if($===null&&(j=j.alternate,j!==null&&($=j.memoizedState)),$!==null)return $.dehydrated}return null}function Xb(j){if(Vb(j)!==j)throw Error(p$4(188))}function Yb(j){var $=j.alternate;if(!$){if($=Vb(j),$===null)throw Error(p$4(188));return $!==j?null:j}for(var _e=j,et=$;;){var tt=_e.return;if(tt===null)break;var nt=tt.alternate;if(nt===null){if(et=tt.return,et!==null){_e=et;continue}break}if(tt.child===nt.child){for(nt=tt.child;nt;){if(nt===_e)return Xb(tt),j;if(nt===et)return Xb(tt),$;nt=nt.sibling}throw Error(p$4(188))}if(_e.return!==et.return)_e=tt,et=nt;else{for(var rt=!1,it=tt.child;it;){if(it===_e){rt=!0,_e=tt,et=nt;break}if(it===et){rt=!0,et=tt,_e=nt;break}it=it.sibling}if(!rt){for(it=nt.child;it;){if(it===_e){rt=!0,_e=nt,et=tt;break}if(it===et){rt=!0,et=nt,_e=tt;break}it=it.sibling}if(!rt)throw Error(p$4(189))}}if(_e.alternate!==et)throw Error(p$4(190))}if(_e.tag!==3)throw Error(p$4(188));return _e.stateNode.current===_e?j:$}function Zb(j){return j=Yb(j),j!==null?$b(j):null}function $b(j){if(j.tag===5||j.tag===6)return j;for(j=j.child;j!==null;){var $=$b(j);if($!==null)return $;j=j.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(j){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,j,void 0,(j.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(j){return j>>>=0,j===0?32:31-(pc(j)/qc|0)|0}var rc=64,sc=4194304;function tc(j){switch(j&-j){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return j&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return j&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return j}}function uc(j,$){var _e=j.pendingLanes;if(_e===0)return 0;var et=0,tt=j.suspendedLanes,nt=j.pingedLanes,rt=_e&268435455;if(rt!==0){var it=rt&~tt;it!==0?et=tc(it):(nt&=rt,nt!==0&&(et=tc(nt)))}else rt=_e&~tt,rt!==0?et=tc(rt):nt!==0&&(et=tc(nt));if(et===0)return 0;if($!==0&&$!==et&&!($&tt)&&(tt=et&-et,nt=$&-$,tt>=nt||tt===16&&(nt&4194240)!==0))return $;if(et&4&&(et|=_e&16),$=j.entangledLanes,$!==0)for(j=j.entanglements,$&=et;0<$;)_e=31-oc($),tt=1<<_e,et|=j[_e],$&=~tt;return et}function vc(j,$){switch(j){case 1:case 2:case 4:return $+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(j,$){for(var _e=j.suspendedLanes,et=j.pingedLanes,tt=j.expirationTimes,nt=j.pendingLanes;0<nt;){var rt=31-oc(nt),it=1<<rt,st=tt[rt];st===-1?(!(it&_e)||it&et)&&(tt[rt]=vc(it,$)):st<=$&&(j.expiredLanes|=it),nt&=~it}}function xc(j){return j=j.pendingLanes&-1073741825,j!==0?j:j&1073741824?1073741824:0}function yc(){var j=rc;return rc<<=1,!(rc&4194240)&&(rc=64),j}function zc(j){for(var $=[],_e=0;31>_e;_e++)$.push(j);return $}function Ac(j,$,_e){j.pendingLanes|=$,$!==536870912&&(j.suspendedLanes=0,j.pingedLanes=0),j=j.eventTimes,$=31-oc($),j[$]=_e}function Bc(j,$){var _e=j.pendingLanes&~$;j.pendingLanes=$,j.suspendedLanes=0,j.pingedLanes=0,j.expiredLanes&=$,j.mutableReadLanes&=$,j.entangledLanes&=$,$=j.entanglements;var et=j.eventTimes;for(j=j.expirationTimes;0<_e;){var tt=31-oc(_e),nt=1<<tt;$[tt]=0,et[tt]=-1,j[tt]=-1,_e&=~nt}}function Cc(j,$){var _e=j.entangledLanes|=$;for(j=j.entanglements;_e;){var et=31-oc(_e),tt=1<<et;tt&$|j[et]&$&&(j[et]|=$),_e&=~tt}}var C$2=0;function Dc(j){return j&=-j,1<j?4<j?j&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(j,$){switch(j){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete($.pointerId)}}function Tc(j,$,_e,et,tt,nt){return j===null||j.nativeEvent!==nt?(j={blockedOn:$,domEventName:_e,eventSystemFlags:et,nativeEvent:nt,targetContainers:[tt]},$!==null&&($=Cb($),$!==null&&Fc($)),j):(j.eventSystemFlags|=et,$=j.targetContainers,tt!==null&&$.indexOf(tt)===-1&&$.push(tt),j)}function Uc(j,$,_e,et,tt){switch($){case"focusin":return Lc=Tc(Lc,j,$,_e,et,tt),!0;case"dragenter":return Mc=Tc(Mc,j,$,_e,et,tt),!0;case"mouseover":return Nc=Tc(Nc,j,$,_e,et,tt),!0;case"pointerover":var nt=tt.pointerId;return Oc.set(nt,Tc(Oc.get(nt)||null,j,$,_e,et,tt)),!0;case"gotpointercapture":return nt=tt.pointerId,Pc.set(nt,Tc(Pc.get(nt)||null,j,$,_e,et,tt)),!0}return!1}function Vc(j){var $=Wc(j.target);if($!==null){var _e=Vb($);if(_e!==null){if($=_e.tag,$===13){if($=Wb(_e),$!==null){j.blockedOn=$,Ic(j.priority,function(){Gc(_e)});return}}else if($===3&&_e.stateNode.current.memoizedState.isDehydrated){j.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}j.blockedOn=null}function Xc(j){if(j.blockedOn!==null)return!1;for(var $=j.targetContainers;0<$.length;){var _e=Yc(j.domEventName,j.eventSystemFlags,$[0],j.nativeEvent);if(_e===null){_e=j.nativeEvent;var et=new _e.constructor(_e.type,_e);wb=et,_e.target.dispatchEvent(et),wb=null}else return $=Cb(_e),$!==null&&Fc($),j.blockedOn=_e,!1;$.shift()}return!0}function Zc(j,$,_e){Xc(j)&&_e.delete($)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(j,$){j.blockedOn===$&&(j.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(j){function $(tt){return ad(tt,j)}if(0<Kc.length){ad(Kc[0],j);for(var _e=1;_e<Kc.length;_e++){var et=Kc[_e];et.blockedOn===j&&(et.blockedOn=null)}}for(Lc!==null&&ad(Lc,j),Mc!==null&&ad(Mc,j),Nc!==null&&ad(Nc,j),Oc.forEach($),Pc.forEach($),_e=0;_e<Qc.length;_e++)et=Qc[_e],et.blockedOn===j&&(et.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(j,$,_e,et){var tt=C$2,nt=cd.transition;cd.transition=null;try{C$2=1,fd(j,$,_e,et)}finally{C$2=tt,cd.transition=nt}}function gd(j,$,_e,et){var tt=C$2,nt=cd.transition;cd.transition=null;try{C$2=4,fd(j,$,_e,et)}finally{C$2=tt,cd.transition=nt}}function fd(j,$,_e,et){if(dd){var tt=Yc(j,$,_e,et);if(tt===null)hd(j,$,et,id$2,_e),Sc(j,et);else if(Uc(tt,j,$,_e,et))et.stopPropagation();else if(Sc(j,et),$&4&&-1<Rc.indexOf(j)){for(;tt!==null;){var nt=Cb(tt);if(nt!==null&&Ec(nt),nt=Yc(j,$,_e,et),nt===null&&hd(j,$,et,id$2,_e),nt===tt)break;tt=nt}tt!==null&&et.stopPropagation()}else hd(j,$,et,null,_e)}}var id$2=null;function Yc(j,$,_e,et){if(id$2=null,j=xb(et),j=Wc(j),j!==null)if($=Vb(j),$===null)j=null;else if(_e=$.tag,_e===13){if(j=Wb($),j!==null)return j;j=null}else if(_e===3){if($.stateNode.current.memoizedState.isDehydrated)return $.tag===3?$.stateNode.containerInfo:null;j=null}else $!==j&&(j=null);return id$2=j,null}function jd(j){switch(j){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var j,$=ld,_e=$.length,et,tt="value"in kd?kd.value:kd.textContent,nt=tt.length;for(j=0;j<_e&&$[j]===tt[j];j++);var rt=_e-j;for(et=1;et<=rt&&$[_e-et]===tt[nt-et];et++);return md=tt.slice(j,1<et?1-et:void 0)}function od(j){var $=j.keyCode;return"charCode"in j?(j=j.charCode,j===0&&$===13&&(j=13)):j=$,j===10&&(j=13),32<=j||j===13?j:0}function pd(){return!0}function qd(){return!1}function rd(j){function $(_e,et,tt,nt,rt){this._reactName=_e,this._targetInst=tt,this.type=et,this.nativeEvent=nt,this.target=rt,this.currentTarget=null;for(var it in j)j.hasOwnProperty(it)&&(_e=j[it],this[it]=_e?_e(nt):nt[it]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2($.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),$}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(j){return j.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(j){return j.relatedTarget===void 0?j.fromElement===j.srcElement?j.toElement:j.fromElement:j.relatedTarget},movementX:function(j){return"movementX"in j?j.movementX:(j!==yd&&(yd&&j.type==="mousemove"?(wd=j.screenX-yd.screenX,xd=j.screenY-yd.screenY):xd=wd=0,yd=j),wd)},movementY:function(j){return"movementY"in j?j.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(j){return"clipboardData"in j?j.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(j){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(j):(j=Od[j])?!!$[j]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(j){if(j.key){var $=Md[j.key]||j.key;if($!=="Unidentified")return $}return j.type==="keypress"?(j=od(j),j===13?"Enter":String.fromCharCode(j)):j.type==="keydown"||j.type==="keyup"?Nd[j.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(j){return j.type==="keypress"?od(j):0},keyCode:function(j){return j.type==="keydown"||j.type==="keyup"?j.keyCode:0},which:function(j){return j.type==="keypress"?od(j):j.type==="keydown"||j.type==="keyup"?j.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(j){return"deltaX"in j?j.deltaX:"wheelDeltaX"in j?-j.wheelDeltaX:0},deltaY:function(j){return"deltaY"in j?j.deltaY:"wheelDeltaY"in j?-j.wheelDeltaY:"wheelDelta"in j?-j.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(j,$){switch(j){case"keyup":return $d.indexOf($.keyCode)!==-1;case"keydown":return $.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(j){return j=j.detail,typeof j=="object"&&"data"in j?j.data:null}var ie$2=!1;function je(j,$){switch(j){case"compositionend":return he($);case"keypress":return $.which!==32?null:(fe=!0,ee);case"textInput":return j=$.data,j===ee&&fe?null:j;default:return null}}function ke(j,$){if(ie$2)return j==="compositionend"||!ae&&ge(j,$)?(j=nd(),md=ld=kd=null,ie$2=!1,j):null;switch(j){case"paste":return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return de&&$.locale!=="ko"?null:$.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(j){var $=j&&j.nodeName&&j.nodeName.toLowerCase();return $==="input"?!!le[j.type]:$==="textarea"}function ne$1(j,$,_e,et){Eb(et),$=oe($,"onChange"),0<$.length&&(_e=new td("onChange","change",null,_e,et),j.push({event:_e,listeners:$}))}var pe=null,qe=null;function re(j){se(j,0)}function te(j){var $=ue(j);if(Wa($))return j}function ve(j,$){if(j==="change")return $}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(j){if(j.propertyName==="value"&&te(qe)){var $=[];ne$1($,qe,j,xb(j)),Jb(re,$)}}function Ce(j,$,_e){j==="focusin"?(Ae(),pe=$,qe=_e,pe.attachEvent("onpropertychange",Be)):j==="focusout"&&Ae()}function De(j){if(j==="selectionchange"||j==="keyup"||j==="keydown")return te(qe)}function Ee(j,$){if(j==="click")return te($)}function Fe(j,$){if(j==="input"||j==="change")return te($)}function Ge(j,$){return j===$&&(j!==0||1/j===1/$)||j!==j&&$!==$}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(j,$){if(He(j,$))return!0;if(typeof j!="object"||j===null||typeof $!="object"||$===null)return!1;var _e=Object.keys(j),et=Object.keys($);if(_e.length!==et.length)return!1;for(et=0;et<_e.length;et++){var tt=_e[et];if(!ja.call($,tt)||!He(j[tt],$[tt]))return!1}return!0}function Je(j){for(;j&&j.firstChild;)j=j.firstChild;return j}function Ke(j,$){var _e=Je(j);j=0;for(var et;_e;){if(_e.nodeType===3){if(et=j+_e.textContent.length,j<=$&&et>=$)return{node:_e,offset:$-j};j=et}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(j,$){return j&&$?j===$?!0:j&&j.nodeType===3?!1:$&&$.nodeType===3?Le(j,$.parentNode):"contains"in j?j.contains($):j.compareDocumentPosition?!!(j.compareDocumentPosition($)&16):!1:!1}function Me(){for(var j=window,$=Xa();$ instanceof j.HTMLIFrameElement;){try{var _e=typeof $.contentWindow.location.href=="string"}catch{_e=!1}if(_e)j=$.contentWindow;else break;$=Xa(j.document)}return $}function Ne(j){var $=j&&j.nodeName&&j.nodeName.toLowerCase();return $&&($==="input"&&(j.type==="text"||j.type==="search"||j.type==="tel"||j.type==="url"||j.type==="password")||$==="textarea"||j.contentEditable==="true")}function Oe(j){var $=Me(),_e=j.focusedElem,et=j.selectionRange;if($!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(et!==null&&Ne(_e)){if($=et.start,j=et.end,j===void 0&&(j=$),"selectionStart"in _e)_e.selectionStart=$,_e.selectionEnd=Math.min(j,_e.value.length);else if(j=($=_e.ownerDocument||document)&&$.defaultView||window,j.getSelection){j=j.getSelection();var tt=_e.textContent.length,nt=Math.min(et.start,tt);et=et.end===void 0?nt:Math.min(et.end,tt),!j.extend&&nt>et&&(tt=et,et=nt,nt=tt),tt=Ke(_e,nt);var rt=Ke(_e,et);tt&&rt&&(j.rangeCount!==1||j.anchorNode!==tt.node||j.anchorOffset!==tt.offset||j.focusNode!==rt.node||j.focusOffset!==rt.offset)&&($=$.createRange(),$.setStart(tt.node,tt.offset),j.removeAllRanges(),nt>et?(j.addRange($),j.extend(rt.node,rt.offset)):($.setEnd(rt.node,rt.offset),j.addRange($)))}}for($=[],j=_e;j=j.parentNode;)j.nodeType===1&&$.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<$.length;_e++)j=$[_e],j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(j,$,_e){var et=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(et)||(et=Qe,"selectionStart"in et&&Ne(et)?et={start:et.selectionStart,end:et.selectionEnd}:(et=(et.ownerDocument&&et.ownerDocument.defaultView||window).getSelection(),et={anchorNode:et.anchorNode,anchorOffset:et.anchorOffset,focusNode:et.focusNode,focusOffset:et.focusOffset}),Se&&Ie(Se,et)||(Se=et,et=oe(Re,"onSelect"),0<et.length&&($=new td("onSelect","select",null,$,_e),j.push({event:$,listeners:et}),$.target=Qe)))}function Ve(j,$){var _e={};return _e[j.toLowerCase()]=$.toLowerCase(),_e["Webkit"+j]="webkit"+$,_e["Moz"+j]="moz"+$,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(j){if(Xe[j])return Xe[j];if(!We[j])return j;var $=We[j],_e;for(_e in $)if($.hasOwnProperty(_e)&&_e in Ye)return Xe[j]=$[_e];return j}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(j,$){df.set(j,$),fa($,[j])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(j,$,_e){var et=j.type||"unknown-event";j.currentTarget=_e,Ub(et,$,void 0,j),j.currentTarget=null}function se(j,$){$=($&4)!==0;for(var _e=0;_e<j.length;_e++){var et=j[_e],tt=et.event;et=et.listeners;e:{var nt=void 0;if($)for(var rt=et.length-1;0<=rt;rt--){var it=et[rt],st=it.instance,ot=it.currentTarget;if(it=it.listener,st!==nt&&tt.isPropagationStopped())break e;nf(tt,it,ot),nt=st}else for(rt=0;rt<et.length;rt++){if(it=et[rt],st=it.instance,ot=it.currentTarget,it=it.listener,st!==nt&&tt.isPropagationStopped())break e;nf(tt,it,ot),nt=st}}}if(Qb)throw j=Rb,Qb=!1,Rb=null,j}function D$1(j,$){var _e=$[of];_e===void 0&&(_e=$[of]=new Set);var et=j+"__bubble";_e.has(et)||(pf($,j,2,!1),_e.add(et))}function qf(j,$,_e){var et=0;$&&(et|=4),pf(_e,j,et,$)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(j){if(!j[rf]){j[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,j),qf(_e,!0,j))});var $=j.nodeType===9?j:j.ownerDocument;$===null||$[rf]||($[rf]=!0,qf("selectionchange",!1,$))}}function pf(j,$,_e,et){switch(jd($)){case 1:var tt=ed;break;case 4:tt=gd;break;default:tt=fd}_e=tt.bind(null,$,_e,j),tt=void 0,!Lb||$!=="touchstart"&&$!=="touchmove"&&$!=="wheel"||(tt=!0),et?tt!==void 0?j.addEventListener($,_e,{capture:!0,passive:tt}):j.addEventListener($,_e,!0):tt!==void 0?j.addEventListener($,_e,{passive:tt}):j.addEventListener($,_e,!1)}function hd(j,$,_e,et,tt){var nt=et;if(!($&1)&&!($&2)&&et!==null)e:for(;;){if(et===null)return;var rt=et.tag;if(rt===3||rt===4){var it=et.stateNode.containerInfo;if(it===tt||it.nodeType===8&&it.parentNode===tt)break;if(rt===4)for(rt=et.return;rt!==null;){var st=rt.tag;if((st===3||st===4)&&(st=rt.stateNode.containerInfo,st===tt||st.nodeType===8&&st.parentNode===tt))return;rt=rt.return}for(;it!==null;){if(rt=Wc(it),rt===null)return;if(st=rt.tag,st===5||st===6){et=nt=rt;continue e}it=it.parentNode}}et=et.return}Jb(function(){var ot=nt,at=xb(_e),lt=[];e:{var ut=df.get(j);if(ut!==void 0){var ct=td,ft=j;switch(j){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":ct=Rd;break;case"focusin":ft="focus",ct=Fd;break;case"focusout":ft="blur",ct=Fd;break;case"beforeblur":case"afterblur":ct=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=Vd;break;case $e:case af:case bf:ct=Hd;break;case cf:ct=Xd;break;case"scroll":ct=vd;break;case"wheel":ct=Zd;break;case"copy":case"cut":case"paste":ct=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Td}var dt=($&4)!==0,mt=!dt&&j==="scroll",pt=dt?ut!==null?ut+"Capture":null:ut;dt=[];for(var yt=ot,vt;yt!==null;){vt=yt;var Ct=vt.stateNode;if(vt.tag===5&&Ct!==null&&(vt=Ct,pt!==null&&(Ct=Kb(yt,pt),Ct!=null&&dt.push(tf(yt,Ct,vt)))),mt)break;yt=yt.return}0<dt.length&&(ut=new ct(ut,ft,null,_e,at),lt.push({event:ut,listeners:dt}))}}if(!($&7)){e:{if(ut=j==="mouseover"||j==="pointerover",ct=j==="mouseout"||j==="pointerout",ut&&_e!==wb&&(ft=_e.relatedTarget||_e.fromElement)&&(Wc(ft)||ft[uf]))break e;if((ct||ut)&&(ut=at.window===at?at:(ut=at.ownerDocument)?ut.defaultView||ut.parentWindow:window,ct?(ft=_e.relatedTarget||_e.toElement,ct=ot,ft=ft?Wc(ft):null,ft!==null&&(mt=Vb(ft),ft!==mt||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(ct=null,ft=ot),ct!==ft)){if(dt=Bd,Ct="onMouseLeave",pt="onMouseEnter",yt="mouse",(j==="pointerout"||j==="pointerover")&&(dt=Td,Ct="onPointerLeave",pt="onPointerEnter",yt="pointer"),mt=ct==null?ut:ue(ct),vt=ft==null?ut:ue(ft),ut=new dt(Ct,yt+"leave",ct,_e,at),ut.target=mt,ut.relatedTarget=vt,Ct=null,Wc(at)===ot&&(dt=new dt(pt,yt+"enter",ft,_e,at),dt.target=vt,dt.relatedTarget=mt,Ct=dt),mt=Ct,ct&&ft)t:{for(dt=ct,pt=ft,yt=0,vt=dt;vt;vt=vf(vt))yt++;for(vt=0,Ct=pt;Ct;Ct=vf(Ct))vt++;for(;0<yt-vt;)dt=vf(dt),yt--;for(;0<vt-yt;)pt=vf(pt),vt--;for(;yt--;){if(dt===pt||pt!==null&&dt===pt.alternate)break t;dt=vf(dt),pt=vf(pt)}dt=null}else dt=null;ct!==null&&wf(lt,ut,ct,dt,!1),ft!==null&&mt!==null&&wf(lt,mt,ft,dt,!0)}}e:{if(ut=ot?ue(ot):window,ct=ut.nodeName&&ut.nodeName.toLowerCase(),ct==="select"||ct==="input"&&ut.type==="file")var At=ve;else if(me(ut))if(we)At=Fe;else{At=De;var $t=Ce}else(ct=ut.nodeName)&&ct.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(At=Ee);if(At&&(At=At(j,ot))){ne$1(lt,At,_e,at);break e}$t&&$t(j,ut,ot),j==="focusout"&&($t=ut._wrapperState)&&$t.controlled&&ut.type==="number"&&cb(ut,"number",ut.value)}switch($t=ot?ue(ot):window,j){case"focusin":(me($t)||$t.contentEditable==="true")&&(Qe=$t,Re=ot,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(lt,_e,at);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(lt,_e,at)}var bt;if(ae)e:{switch(j){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ie$2?ge(j,_e)&&(Bt="onCompositionEnd"):j==="keydown"&&_e.keyCode===229&&(Bt="onCompositionStart");Bt&&(de&&_e.locale!=="ko"&&(ie$2||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ie$2&&(bt=nd()):(kd=at,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),$t=oe(ot,Bt),0<$t.length&&(Bt=new Ld(Bt,j,null,_e,at),lt.push({event:Bt,listeners:$t}),bt?Bt.data=bt:(bt=he(_e),bt!==null&&(Bt.data=bt)))),(bt=ce?je(j,_e):ke(j,_e))&&(ot=oe(ot,"onBeforeInput"),0<ot.length&&(at=new Ld("onBeforeInput","beforeinput",null,_e,at),lt.push({event:at,listeners:ot}),at.data=bt))}se(lt,$)})}function tf(j,$,_e){return{instance:j,listener:$,currentTarget:_e}}function oe(j,$){for(var _e=$+"Capture",et=[];j!==null;){var tt=j,nt=tt.stateNode;tt.tag===5&&nt!==null&&(tt=nt,nt=Kb(j,_e),nt!=null&&et.unshift(tf(j,nt,tt)),nt=Kb(j,$),nt!=null&&et.push(tf(j,nt,tt))),j=j.return}return et}function vf(j){if(j===null)return null;do j=j.return;while(j&&j.tag!==5);return j||null}function wf(j,$,_e,et,tt){for(var nt=$._reactName,rt=[];_e!==null&&_e!==et;){var it=_e,st=it.alternate,ot=it.stateNode;if(st!==null&&st===et)break;it.tag===5&&ot!==null&&(it=ot,tt?(st=Kb(_e,nt),st!=null&&rt.unshift(tf(_e,st,it))):tt||(st=Kb(_e,nt),st!=null&&rt.push(tf(_e,st,it)))),_e=_e.return}rt.length!==0&&j.push({event:$,listeners:rt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(j){return(typeof j=="string"?j:""+j).replace(xf,`
`).replace(yf,"")}function Af(j,$,_e){if($=zf($),zf(j)!==$&&_e)throw Error(p$4(425))}function Bf(){}var Cf=null,Df=null;function Ef(j,$){return j==="textarea"||j==="noscript"||typeof $.children=="string"||typeof $.children=="number"||typeof $.dangerouslySetInnerHTML=="object"&&$.dangerouslySetInnerHTML!==null&&$.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(j){return Hf.resolve(null).then(j).catch(If)}:Ff;function If(j){setTimeout(function(){throw j})}function Kf(j,$){var _e=$,et=0;do{var tt=_e.nextSibling;if(j.removeChild(_e),tt&&tt.nodeType===8)if(_e=tt.data,_e==="/$"){if(et===0){j.removeChild(tt),bd($);return}et--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||et++;_e=tt}while(_e);bd($)}function Lf(j){for(;j!=null;j=j.nextSibling){var $=j.nodeType;if($===1||$===3)break;if($===8){if($=j.data,$==="$"||$==="$!"||$==="$?")break;if($==="/$")return null}}return j}function Mf(j){j=j.previousSibling;for(var $=0;j;){if(j.nodeType===8){var _e=j.data;if(_e==="$"||_e==="$!"||_e==="$?"){if($===0)return j;$--}else _e==="/$"&&$++}j=j.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(j){var $=j[Of];if($)return $;for(var _e=j.parentNode;_e;){if($=_e[uf]||_e[Of]){if(_e=$.alternate,$.child!==null||_e!==null&&_e.child!==null)for(j=Mf(j);j!==null;){if(_e=j[Of])return _e;j=Mf(j)}return $}j=_e,_e=j.parentNode}return null}function Cb(j){return j=j[Of]||j[uf],!j||j.tag!==5&&j.tag!==6&&j.tag!==13&&j.tag!==3?null:j}function ue(j){if(j.tag===5||j.tag===6)return j.stateNode;throw Error(p$4(33))}function Db(j){return j[Pf]||null}var Sf=[],Tf=-1;function Uf(j){return{current:j}}function E$2(j){0>Tf||(j.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(j,$){Tf++,Sf[Tf]=j.current,j.current=$}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(j,$){var _e=j.type.contextTypes;if(!_e)return Vf;var et=j.stateNode;if(et&&et.__reactInternalMemoizedUnmaskedChildContext===$)return et.__reactInternalMemoizedMaskedChildContext;var tt={},nt;for(nt in _e)tt[nt]=$[nt];return et&&(j=j.stateNode,j.__reactInternalMemoizedUnmaskedChildContext=$,j.__reactInternalMemoizedMaskedChildContext=tt),tt}function Zf(j){return j=j.childContextTypes,j!=null}function $f(){E$2(Wf),E$2(H)}function ag(j,$,_e){if(H.current!==Vf)throw Error(p$4(168));G$1(H,$),G$1(Wf,_e)}function bg(j,$,_e){var et=j.stateNode;if($=$.childContextTypes,typeof et.getChildContext!="function")return _e;et=et.getChildContext();for(var tt in et)if(!(tt in $))throw Error(p$4(108,Ra(j)||"Unknown",tt));return A$2({},_e,et)}function cg(j){return j=(j=j.stateNode)&&j.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G$1(H,j),G$1(Wf,Wf.current),!0}function dg(j,$,_e){var et=j.stateNode;if(!et)throw Error(p$4(169));_e?(j=bg(j,$,Xf),et.__reactInternalMemoizedMergedChildContext=j,E$2(Wf),E$2(H),G$1(H,j)):E$2(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(j){eg===null?eg=[j]:eg.push(j)}function ig(j){fg=!0,hg(j)}function jg(){if(!gg&&eg!==null){gg=!0;var j=0,$=C$2;try{var _e=eg;for(C$2=1;j<_e.length;j++){var et=_e[j];do et=et(!0);while(et!==null)}eg=null,fg=!1}catch(tt){throw eg!==null&&(eg=eg.slice(j+1)),ac(fc,jg),tt}finally{C$2=$,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(j,$){kg[lg++]=ng,kg[lg++]=mg,mg=j,ng=$}function ug(j,$,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=j;var et=rg;j=sg;var tt=32-oc(et)-1;et&=~(1<<tt),_e+=1;var nt=32-oc($)+tt;if(30<nt){var rt=tt-tt%5;nt=(et&(1<<rt)-1).toString(32),et>>=rt,tt-=rt,rg=1<<32-oc($)+tt|_e<<tt|et,sg=nt+j}else rg=1<<nt|_e<<tt|et,sg=j}function vg(j){j.return!==null&&(tg(j,1),ug(j,1,0))}function wg(j){for(;j===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;j===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(j,$){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=$,_e.return=j,$=j.deletions,$===null?(j.deletions=[_e],j.flags|=16):$.push(_e)}function Cg(j,$){switch(j.tag){case 5:var _e=j.type;return $=$.nodeType!==1||_e.toLowerCase()!==$.nodeName.toLowerCase()?null:$,$!==null?(j.stateNode=$,xg=j,yg=Lf($.firstChild),!0):!1;case 6:return $=j.pendingProps===""||$.nodeType!==3?null:$,$!==null?(j.stateNode=$,xg=j,yg=null,!0):!1;case 13:return $=$.nodeType!==8?null:$,$!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,j.memoizedState={dehydrated:$,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=$,_e.return=j,j.child=_e,xg=j,yg=null,!0):!1;default:return!1}}function Dg(j){return(j.mode&1)!==0&&(j.flags&128)===0}function Eg(j){if(I$1){var $=yg;if($){var _e=$;if(!Cg(j,$)){if(Dg(j))throw Error(p$4(418));$=Lf(_e.nextSibling);var et=xg;$&&Cg(j,$)?Ag(et,_e):(j.flags=j.flags&-4097|2,I$1=!1,xg=j)}}else{if(Dg(j))throw Error(p$4(418));j.flags=j.flags&-4097|2,I$1=!1,xg=j}}}function Fg(j){for(j=j.return;j!==null&&j.tag!==5&&j.tag!==3&&j.tag!==13;)j=j.return;xg=j}function Gg(j){if(j!==xg)return!1;if(!I$1)return Fg(j),I$1=!0,!1;var $;if(($=j.tag!==3)&&!($=j.tag!==5)&&($=j.type,$=$!=="head"&&$!=="body"&&!Ef(j.type,j.memoizedProps)),$&&($=yg)){if(Dg(j))throw Hg(),Error(p$4(418));for(;$;)Ag(j,$),$=Lf($.nextSibling)}if(Fg(j),j.tag===13){if(j=j.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(p$4(317));e:{for(j=j.nextSibling,$=0;j;){if(j.nodeType===8){var _e=j.data;if(_e==="/$"){if($===0){yg=Lf(j.nextSibling);break e}$--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||$++}j=j.nextSibling}yg=null}}else yg=xg?Lf(j.stateNode.nextSibling):null;return!0}function Hg(){for(var j=yg;j;)j=Lf(j.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(j){zg===null?zg=[j]:zg.push(j)}var Kg=ua.ReactCurrentBatchConfig;function Lg(j,$){if(j&&j.defaultProps){$=A$2({},$),j=j.defaultProps;for(var _e in j)$[_e]===void 0&&($[_e]=j[_e]);return $}return $}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(j){var $=Mg.current;E$2(Mg),j._currentValue=$}function Sg(j,$,_e){for(;j!==null;){var et=j.alternate;if((j.childLanes&$)!==$?(j.childLanes|=$,et!==null&&(et.childLanes|=$)):et!==null&&(et.childLanes&$)!==$&&(et.childLanes|=$),j===_e)break;j=j.return}}function Tg(j,$){Ng=j,Pg=Og=null,j=j.dependencies,j!==null&&j.firstContext!==null&&(j.lanes&$&&(Ug=!0),j.firstContext=null)}function Vg(j){var $=j._currentValue;if(Pg!==j)if(j={context:j,memoizedValue:$,next:null},Og===null){if(Ng===null)throw Error(p$4(308));Og=j,Ng.dependencies={lanes:0,firstContext:j}}else Og=Og.next=j;return $}var Wg=null;function Xg(j){Wg===null?Wg=[j]:Wg.push(j)}function Yg(j,$,_e,et){var tt=$.interleaved;return tt===null?(_e.next=_e,Xg($)):(_e.next=tt.next,tt.next=_e),$.interleaved=_e,Zg(j,et)}function Zg(j,$){j.lanes|=$;var _e=j.alternate;for(_e!==null&&(_e.lanes|=$),_e=j,j=j.return;j!==null;)j.childLanes|=$,_e=j.alternate,_e!==null&&(_e.childLanes|=$),_e=j,j=j.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(j){j.updateQueue={baseState:j.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(j,$){j=j.updateQueue,$.updateQueue===j&&($.updateQueue={baseState:j.baseState,firstBaseUpdate:j.firstBaseUpdate,lastBaseUpdate:j.lastBaseUpdate,shared:j.shared,effects:j.effects})}function ch(j,$){return{eventTime:j,lane:$,tag:0,payload:null,callback:null,next:null}}function dh(j,$,_e){var et=j.updateQueue;if(et===null)return null;if(et=et.shared,K$1&2){var tt=et.pending;return tt===null?$.next=$:($.next=tt.next,tt.next=$),et.pending=$,Zg(j,_e)}return tt=et.interleaved,tt===null?($.next=$,Xg(et)):($.next=tt.next,tt.next=$),et.interleaved=$,Zg(j,_e)}function eh(j,$,_e){if($=$.updateQueue,$!==null&&($=$.shared,(_e&4194240)!==0)){var et=$.lanes;et&=j.pendingLanes,_e|=et,$.lanes=_e,Cc(j,_e)}}function fh(j,$){var _e=j.updateQueue,et=j.alternate;if(et!==null&&(et=et.updateQueue,_e===et)){var tt=null,nt=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var rt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};nt===null?tt=nt=rt:nt=nt.next=rt,_e=_e.next}while(_e!==null);nt===null?tt=nt=$:nt=nt.next=$}else tt=nt=$;_e={baseState:et.baseState,firstBaseUpdate:tt,lastBaseUpdate:nt,shared:et.shared,effects:et.effects},j.updateQueue=_e;return}j=_e.lastBaseUpdate,j===null?_e.firstBaseUpdate=$:j.next=$,_e.lastBaseUpdate=$}function gh(j,$,_e,et){var tt=j.updateQueue;$g=!1;var nt=tt.firstBaseUpdate,rt=tt.lastBaseUpdate,it=tt.shared.pending;if(it!==null){tt.shared.pending=null;var st=it,ot=st.next;st.next=null,rt===null?nt=ot:rt.next=ot,rt=st;var at=j.alternate;at!==null&&(at=at.updateQueue,it=at.lastBaseUpdate,it!==rt&&(it===null?at.firstBaseUpdate=ot:it.next=ot,at.lastBaseUpdate=st))}if(nt!==null){var lt=tt.baseState;rt=0,at=ot=st=null,it=nt;do{var ut=it.lane,ct=it.eventTime;if((et&ut)===ut){at!==null&&(at=at.next={eventTime:ct,lane:0,tag:it.tag,payload:it.payload,callback:it.callback,next:null});e:{var ft=j,dt=it;switch(ut=$,ct=_e,dt.tag){case 1:if(ft=dt.payload,typeof ft=="function"){lt=ft.call(ct,lt,ut);break e}lt=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=dt.payload,ut=typeof ft=="function"?ft.call(ct,lt,ut):ft,ut==null)break e;lt=A$2({},lt,ut);break e;case 2:$g=!0}}it.callback!==null&&it.lane!==0&&(j.flags|=64,ut=tt.effects,ut===null?tt.effects=[it]:ut.push(it))}else ct={eventTime:ct,lane:ut,tag:it.tag,payload:it.payload,callback:it.callback,next:null},at===null?(ot=at=ct,st=lt):at=at.next=ct,rt|=ut;if(it=it.next,it===null){if(it=tt.shared.pending,it===null)break;ut=it,it=ut.next,ut.next=null,tt.lastBaseUpdate=ut,tt.shared.pending=null}}while(1);if(at===null&&(st=lt),tt.baseState=st,tt.firstBaseUpdate=ot,tt.lastBaseUpdate=at,$=tt.shared.interleaved,$!==null){tt=$;do rt|=tt.lane,tt=tt.next;while(tt!==$)}else nt===null&&(tt.shared.lanes=0);hh|=rt,j.lanes=rt,j.memoizedState=lt}}function ih(j,$,_e){if(j=$.effects,$.effects=null,j!==null)for($=0;$<j.length;$++){var et=j[$],tt=et.callback;if(tt!==null){if(et.callback=null,et=_e,typeof tt!="function")throw Error(p$4(191,tt));tt.call(et)}}}var jh=new aa.Component().refs;function kh(j,$,_e,et){$=j.memoizedState,_e=_e(et,$),_e=_e==null?$:A$2({},$,_e),j.memoizedState=_e,j.lanes===0&&(j.updateQueue.baseState=_e)}var nh={isMounted:function(j){return(j=j._reactInternals)?Vb(j)===j:!1},enqueueSetState:function(j,$,_e){j=j._reactInternals;var et=L$2(),tt=lh(j),nt=ch(et,tt);nt.payload=$,_e!=null&&(nt.callback=_e),$=dh(j,nt,tt),$!==null&&(mh($,j,tt,et),eh($,j,tt))},enqueueReplaceState:function(j,$,_e){j=j._reactInternals;var et=L$2(),tt=lh(j),nt=ch(et,tt);nt.tag=1,nt.payload=$,_e!=null&&(nt.callback=_e),$=dh(j,nt,tt),$!==null&&(mh($,j,tt,et),eh($,j,tt))},enqueueForceUpdate:function(j,$){j=j._reactInternals;var _e=L$2(),et=lh(j),tt=ch(_e,et);tt.tag=2,$!=null&&(tt.callback=$),$=dh(j,tt,et),$!==null&&(mh($,j,et,_e),eh($,j,et))}};function oh(j,$,_e,et,tt,nt,rt){return j=j.stateNode,typeof j.shouldComponentUpdate=="function"?j.shouldComponentUpdate(et,nt,rt):$.prototype&&$.prototype.isPureReactComponent?!Ie(_e,et)||!Ie(tt,nt):!0}function ph(j,$,_e){var et=!1,tt=Vf,nt=$.contextType;return typeof nt=="object"&&nt!==null?nt=Vg(nt):(tt=Zf($)?Xf:H.current,et=$.contextTypes,nt=(et=et!=null)?Yf(j,tt):Vf),$=new $(_e,nt),j.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=nh,j.stateNode=$,$._reactInternals=j,et&&(j=j.stateNode,j.__reactInternalMemoizedUnmaskedChildContext=tt,j.__reactInternalMemoizedMaskedChildContext=nt),$}function qh(j,$,_e,et){j=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(_e,et),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(_e,et),$.state!==j&&nh.enqueueReplaceState($,$.state,null)}function rh(j,$,_e,et){var tt=j.stateNode;tt.props=_e,tt.state=j.memoizedState,tt.refs=jh,ah(j);var nt=$.contextType;typeof nt=="object"&&nt!==null?tt.context=Vg(nt):(nt=Zf($)?Xf:H.current,tt.context=Yf(j,nt)),tt.state=j.memoizedState,nt=$.getDerivedStateFromProps,typeof nt=="function"&&(kh(j,$,nt,_e),tt.state=j.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof tt.getSnapshotBeforeUpdate=="function"||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||($=tt.state,typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount(),$!==tt.state&&nh.enqueueReplaceState(tt,tt.state,null),gh(j,_e,tt,et),tt.state=j.memoizedState),typeof tt.componentDidMount=="function"&&(j.flags|=4194308)}function sh(j,$,_e){if(j=_e.ref,j!==null&&typeof j!="function"&&typeof j!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$4(309));var et=_e.stateNode}if(!et)throw Error(p$4(147,j));var tt=et,nt=""+j;return $!==null&&$.ref!==null&&typeof $.ref=="function"&&$.ref._stringRef===nt?$.ref:($=function(rt){var it=tt.refs;it===jh&&(it=tt.refs={}),rt===null?delete it[nt]:it[nt]=rt},$._stringRef=nt,$)}if(typeof j!="string")throw Error(p$4(284));if(!_e._owner)throw Error(p$4(290,j))}return j}function th(j,$){throw j=Object.prototype.toString.call($),Error(p$4(31,j==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":j))}function uh(j){var $=j._init;return $(j._payload)}function vh(j){function $(pt,yt){if(j){var vt=pt.deletions;vt===null?(pt.deletions=[yt],pt.flags|=16):vt.push(yt)}}function _e(pt,yt){if(!j)return null;for(;yt!==null;)$(pt,yt),yt=yt.sibling;return null}function et(pt,yt){for(pt=new Map;yt!==null;)yt.key!==null?pt.set(yt.key,yt):pt.set(yt.index,yt),yt=yt.sibling;return pt}function tt(pt,yt){return pt=wh(pt,yt),pt.index=0,pt.sibling=null,pt}function nt(pt,yt,vt){return pt.index=vt,j?(vt=pt.alternate,vt!==null?(vt=vt.index,vt<yt?(pt.flags|=2,yt):vt):(pt.flags|=2,yt)):(pt.flags|=1048576,yt)}function rt(pt){return j&&pt.alternate===null&&(pt.flags|=2),pt}function it(pt,yt,vt,Ct){return yt===null||yt.tag!==6?(yt=xh(vt,pt.mode,Ct),yt.return=pt,yt):(yt=tt(yt,vt),yt.return=pt,yt)}function st(pt,yt,vt,Ct){var At=vt.type;return At===ya?at(pt,yt,vt.props.children,Ct,vt.key):yt!==null&&(yt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&uh(At)===yt.type)?(Ct=tt(yt,vt.props),Ct.ref=sh(pt,yt,vt),Ct.return=pt,Ct):(Ct=yh(vt.type,vt.key,vt.props,null,pt.mode,Ct),Ct.ref=sh(pt,yt,vt),Ct.return=pt,Ct)}function ot(pt,yt,vt,Ct){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==vt.containerInfo||yt.stateNode.implementation!==vt.implementation?(yt=zh(vt,pt.mode,Ct),yt.return=pt,yt):(yt=tt(yt,vt.children||[]),yt.return=pt,yt)}function at(pt,yt,vt,Ct,At){return yt===null||yt.tag!==7?(yt=Ah(vt,pt.mode,Ct,At),yt.return=pt,yt):(yt=tt(yt,vt),yt.return=pt,yt)}function lt(pt,yt,vt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return yt=xh(""+yt,pt.mode,vt),yt.return=pt,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return vt=yh(yt.type,yt.key,yt.props,null,pt.mode,vt),vt.ref=sh(pt,null,yt),vt.return=pt,vt;case wa:return yt=zh(yt,pt.mode,vt),yt.return=pt,yt;case Ha:var Ct=yt._init;return lt(pt,Ct(yt._payload),vt)}if(eb(yt)||Ka(yt))return yt=Ah(yt,pt.mode,vt,null),yt.return=pt,yt;th(pt,yt)}return null}function ut(pt,yt,vt,Ct){var At=yt!==null?yt.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number")return At!==null?null:it(pt,yt,""+vt,Ct);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:return vt.key===At?st(pt,yt,vt,Ct):null;case wa:return vt.key===At?ot(pt,yt,vt,Ct):null;case Ha:return At=vt._init,ut(pt,yt,At(vt._payload),Ct)}if(eb(vt)||Ka(vt))return At!==null?null:at(pt,yt,vt,Ct,null);th(pt,vt)}return null}function ct(pt,yt,vt,Ct,At){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return pt=pt.get(vt)||null,it(yt,pt,""+Ct,At);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va:return pt=pt.get(Ct.key===null?vt:Ct.key)||null,st(yt,pt,Ct,At);case wa:return pt=pt.get(Ct.key===null?vt:Ct.key)||null,ot(yt,pt,Ct,At);case Ha:var $t=Ct._init;return ct(pt,yt,vt,$t(Ct._payload),At)}if(eb(Ct)||Ka(Ct))return pt=pt.get(vt)||null,at(yt,pt,Ct,At,null);th(yt,Ct)}return null}function ft(pt,yt,vt,Ct){for(var At=null,$t=null,bt=yt,Bt=yt=0,Rt=null;bt!==null&&Bt<vt.length;Bt++){bt.index>Bt?(Rt=bt,bt=null):Rt=bt.sibling;var St=ut(pt,bt,vt[Bt],Ct);if(St===null){bt===null&&(bt=Rt);break}j&&bt&&St.alternate===null&&$(pt,bt),yt=nt(St,yt,Bt),$t===null?At=St:$t.sibling=St,$t=St,bt=Rt}if(Bt===vt.length)return _e(pt,bt),I$1&&tg(pt,Bt),At;if(bt===null){for(;Bt<vt.length;Bt++)bt=lt(pt,vt[Bt],Ct),bt!==null&&(yt=nt(bt,yt,Bt),$t===null?At=bt:$t.sibling=bt,$t=bt);return I$1&&tg(pt,Bt),At}for(bt=et(pt,bt);Bt<vt.length;Bt++)Rt=ct(bt,pt,Bt,vt[Bt],Ct),Rt!==null&&(j&&Rt.alternate!==null&&bt.delete(Rt.key===null?Bt:Rt.key),yt=nt(Rt,yt,Bt),$t===null?At=Rt:$t.sibling=Rt,$t=Rt);return j&&bt.forEach(function(kt){return $(pt,kt)}),I$1&&tg(pt,Bt),At}function dt(pt,yt,vt,Ct){var At=Ka(vt);if(typeof At!="function")throw Error(p$4(150));if(vt=At.call(vt),vt==null)throw Error(p$4(151));for(var $t=At=null,bt=yt,Bt=yt=0,Rt=null,St=vt.next();bt!==null&&!St.done;Bt++,St=vt.next()){bt.index>Bt?(Rt=bt,bt=null):Rt=bt.sibling;var kt=ut(pt,bt,St.value,Ct);if(kt===null){bt===null&&(bt=Rt);break}j&&bt&&kt.alternate===null&&$(pt,bt),yt=nt(kt,yt,Bt),$t===null?At=kt:$t.sibling=kt,$t=kt,bt=Rt}if(St.done)return _e(pt,bt),I$1&&tg(pt,Bt),At;if(bt===null){for(;!St.done;Bt++,St=vt.next())St=lt(pt,St.value,Ct),St!==null&&(yt=nt(St,yt,Bt),$t===null?At=St:$t.sibling=St,$t=St);return I$1&&tg(pt,Bt),At}for(bt=et(pt,bt);!St.done;Bt++,St=vt.next())St=ct(bt,pt,Bt,St.value,Ct),St!==null&&(j&&St.alternate!==null&&bt.delete(St.key===null?Bt:St.key),yt=nt(St,yt,Bt),$t===null?At=St:$t.sibling=St,$t=St);return j&&bt.forEach(function(Pt){return $(pt,Pt)}),I$1&&tg(pt,Bt),At}function mt(pt,yt,vt,Ct){if(typeof vt=="object"&&vt!==null&&vt.type===ya&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:e:{for(var At=vt.key,$t=yt;$t!==null;){if($t.key===At){if(At=vt.type,At===ya){if($t.tag===7){_e(pt,$t.sibling),yt=tt($t,vt.props.children),yt.return=pt,pt=yt;break e}}else if($t.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&uh(At)===$t.type){_e(pt,$t.sibling),yt=tt($t,vt.props),yt.ref=sh(pt,$t,vt),yt.return=pt,pt=yt;break e}_e(pt,$t);break}else $(pt,$t);$t=$t.sibling}vt.type===ya?(yt=Ah(vt.props.children,pt.mode,Ct,vt.key),yt.return=pt,pt=yt):(Ct=yh(vt.type,vt.key,vt.props,null,pt.mode,Ct),Ct.ref=sh(pt,yt,vt),Ct.return=pt,pt=Ct)}return rt(pt);case wa:e:{for($t=vt.key;yt!==null;){if(yt.key===$t)if(yt.tag===4&&yt.stateNode.containerInfo===vt.containerInfo&&yt.stateNode.implementation===vt.implementation){_e(pt,yt.sibling),yt=tt(yt,vt.children||[]),yt.return=pt,pt=yt;break e}else{_e(pt,yt);break}else $(pt,yt);yt=yt.sibling}yt=zh(vt,pt.mode,Ct),yt.return=pt,pt=yt}return rt(pt);case Ha:return $t=vt._init,mt(pt,yt,$t(vt._payload),Ct)}if(eb(vt))return ft(pt,yt,vt,Ct);if(Ka(vt))return dt(pt,yt,vt,Ct);th(pt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"?(vt=""+vt,yt!==null&&yt.tag===6?(_e(pt,yt.sibling),yt=tt(yt,vt),yt.return=pt,pt=yt):(_e(pt,yt),yt=xh(vt,pt.mode,Ct),yt.return=pt,pt=yt),rt(pt)):_e(pt,yt)}return mt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(j){if(j===Dh)throw Error(p$4(174));return j}function Ih(j,$){switch(G$1(Gh,$),G$1(Fh,j),G$1(Eh,Dh),j=$.nodeType,j){case 9:case 11:$=($=$.documentElement)?$.namespaceURI:lb(null,"");break;default:j=j===8?$.parentNode:$,$=j.namespaceURI||null,j=j.tagName,$=lb($,j)}E$2(Eh),G$1(Eh,$)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(j){Hh(Gh.current);var $=Hh(Eh.current),_e=lb($,j.type);$!==_e&&(G$1(Fh,j),G$1(Eh,_e))}function Lh(j){Fh.current===j&&(E$2(Eh),E$2(Fh))}var M$2=Uf(0);function Mh(j){for(var $=j;$!==null;){if($.tag===13){var _e=$.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return $}else if($.tag===19&&$.memoizedProps.revealOrder!==void 0){if($.flags&128)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===j)break;for(;$.sibling===null;){if($.return===null||$.return===j)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Nh=[];function Oh(){for(var j=0;j<Nh.length;j++)Nh[j]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$2=null,O$2=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$4(321))}function Wh(j,$){if($===null)return!1;for(var _e=0;_e<$.length&&_e<j.length;_e++)if(!He(j[_e],$[_e]))return!1;return!0}function Xh(j,$,_e,et,tt,nt){if(Rh=nt,N$2=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,Ph.current=j===null||j.memoizedState===null?Yh:Zh,j=_e(et,tt),Th){nt=0;do{if(Th=!1,Uh=0,25<=nt)throw Error(p$4(301));nt+=1,P$1=O$2=null,$.updateQueue=null,Ph.current=$h,j=_e(et,tt)}while(Th)}if(Ph.current=ai,$=O$2!==null&&O$2.next!==null,Rh=0,P$1=O$2=N$2=null,Sh=!1,$)throw Error(p$4(300));return j}function bi(){var j=Uh!==0;return Uh=0,j}function ci(){var j={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$2.memoizedState=P$1=j:P$1=P$1.next=j,P$1}function di(){if(O$2===null){var j=N$2.alternate;j=j!==null?j.memoizedState:null}else j=O$2.next;var $=P$1===null?N$2.memoizedState:P$1.next;if($!==null)P$1=$,O$2=j;else{if(j===null)throw Error(p$4(310));O$2=j,j={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$1===null?N$2.memoizedState=P$1=j:P$1=P$1.next=j}return P$1}function ei(j,$){return typeof $=="function"?$(j):$}function fi(j){var $=di(),_e=$.queue;if(_e===null)throw Error(p$4(311));_e.lastRenderedReducer=j;var et=O$2,tt=et.baseQueue,nt=_e.pending;if(nt!==null){if(tt!==null){var rt=tt.next;tt.next=nt.next,nt.next=rt}et.baseQueue=tt=nt,_e.pending=null}if(tt!==null){nt=tt.next,et=et.baseState;var it=rt=null,st=null,ot=nt;do{var at=ot.lane;if((Rh&at)===at)st!==null&&(st=st.next={lane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),et=ot.hasEagerState?ot.eagerState:j(et,ot.action);else{var lt={lane:at,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};st===null?(it=st=lt,rt=et):st=st.next=lt,N$2.lanes|=at,hh|=at}ot=ot.next}while(ot!==null&&ot!==nt);st===null?rt=et:st.next=it,He(et,$.memoizedState)||(Ug=!0),$.memoizedState=et,$.baseState=rt,$.baseQueue=st,_e.lastRenderedState=et}if(j=_e.interleaved,j!==null){tt=j;do nt=tt.lane,N$2.lanes|=nt,hh|=nt,tt=tt.next;while(tt!==j)}else tt===null&&(_e.lanes=0);return[$.memoizedState,_e.dispatch]}function gi(j){var $=di(),_e=$.queue;if(_e===null)throw Error(p$4(311));_e.lastRenderedReducer=j;var et=_e.dispatch,tt=_e.pending,nt=$.memoizedState;if(tt!==null){_e.pending=null;var rt=tt=tt.next;do nt=j(nt,rt.action),rt=rt.next;while(rt!==tt);He(nt,$.memoizedState)||(Ug=!0),$.memoizedState=nt,$.baseQueue===null&&($.baseState=nt),_e.lastRenderedState=nt}return[nt,et]}function hi(){}function ii(j,$){var _e=N$2,et=di(),tt=$(),nt=!He(et.memoizedState,tt);if(nt&&(et.memoizedState=tt,Ug=!0),et=et.queue,ji(ki.bind(null,_e,et,j),[j]),et.getSnapshot!==$||nt||P$1!==null&&P$1.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,et,tt,$),void 0,null),R$1===null)throw Error(p$4(349));Rh&30||ni(_e,$,tt)}return tt}function ni(j,$,_e){j.flags|=16384,j={getSnapshot:$,value:_e},$=N$2.updateQueue,$===null?($={lastEffect:null,stores:null},N$2.updateQueue=$,$.stores=[j]):(_e=$.stores,_e===null?$.stores=[j]:_e.push(j))}function mi(j,$,_e,et){$.value=_e,$.getSnapshot=et,oi($)&&pi$1(j)}function ki(j,$,_e){return _e(function(){oi($)&&pi$1(j)})}function oi(j){var $=j.getSnapshot;j=j.value;try{var _e=$();return!He(j,_e)}catch{return!0}}function pi$1(j){var $=Zg(j,1);$!==null&&mh($,j,1,-1)}function qi(j){var $=ci();return typeof j=="function"&&(j=j()),$.memoizedState=$.baseState=j,j={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:j},$.queue=j,j=j.dispatch=ri.bind(null,N$2,j),[$.memoizedState,j]}function li(j,$,_e,et){return j={tag:j,create:$,destroy:_e,deps:et,next:null},$=N$2.updateQueue,$===null?($={lastEffect:null,stores:null},N$2.updateQueue=$,$.lastEffect=j.next=j):(_e=$.lastEffect,_e===null?$.lastEffect=j.next=j:(et=_e.next,_e.next=j,j.next=et,$.lastEffect=j)),j}function si(){return di().memoizedState}function ti(j,$,_e,et){var tt=ci();N$2.flags|=j,tt.memoizedState=li(1|$,_e,void 0,et===void 0?null:et)}function ui(j,$,_e,et){var tt=di();et=et===void 0?null:et;var nt=void 0;if(O$2!==null){var rt=O$2.memoizedState;if(nt=rt.destroy,et!==null&&Wh(et,rt.deps)){tt.memoizedState=li($,_e,nt,et);return}}N$2.flags|=j,tt.memoizedState=li(1|$,_e,nt,et)}function vi(j,$){return ti(8390656,8,j,$)}function ji(j,$){return ui(2048,8,j,$)}function wi(j,$){return ui(4,2,j,$)}function xi(j,$){return ui(4,4,j,$)}function yi(j,$){if(typeof $=="function")return j=j(),$(j),function(){$(null)};if($!=null)return j=j(),$.current=j,function(){$.current=null}}function zi(j,$,_e){return _e=_e!=null?_e.concat([j]):null,ui(4,4,yi.bind(null,$,j),_e)}function Ai(){}function Bi(j,$){var _e=di();$=$===void 0?null:$;var et=_e.memoizedState;return et!==null&&$!==null&&Wh($,et[1])?et[0]:(_e.memoizedState=[j,$],j)}function Ci(j,$){var _e=di();$=$===void 0?null:$;var et=_e.memoizedState;return et!==null&&$!==null&&Wh($,et[1])?et[0]:(j=j(),_e.memoizedState=[j,$],j)}function Di(j,$,_e){return Rh&21?(He(_e,$)||(_e=yc(),N$2.lanes|=_e,hh|=_e,j.baseState=!0),$):(j.baseState&&(j.baseState=!1,Ug=!0),j.memoizedState=_e)}function Ei(j,$){var _e=C$2;C$2=_e!==0&&4>_e?_e:4,j(!0);var et=Qh.transition;Qh.transition={};try{j(!1),$()}finally{C$2=_e,Qh.transition=et}}function Fi(){return di().memoizedState}function Gi(j,$,_e){var et=lh(j);if(_e={lane:et,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(j))Ii($,_e);else if(_e=Yg(j,$,_e,et),_e!==null){var tt=L$2();mh(_e,j,et,tt),Ji(_e,$,et)}}function ri(j,$,_e){var et=lh(j),tt={lane:et,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(j))Ii($,tt);else{var nt=j.alternate;if(j.lanes===0&&(nt===null||nt.lanes===0)&&(nt=$.lastRenderedReducer,nt!==null))try{var rt=$.lastRenderedState,it=nt(rt,_e);if(tt.hasEagerState=!0,tt.eagerState=it,He(it,rt)){var st=$.interleaved;st===null?(tt.next=tt,Xg($)):(tt.next=st.next,st.next=tt),$.interleaved=tt;return}}catch{}finally{}_e=Yg(j,$,tt,et),_e!==null&&(tt=L$2(),mh(_e,j,et,tt),Ji(_e,$,et))}}function Hi(j){var $=j.alternate;return j===N$2||$!==null&&$===N$2}function Ii(j,$){Th=Sh=!0;var _e=j.pending;_e===null?$.next=$:($.next=_e.next,_e.next=$),j.pending=$}function Ji(j,$,_e){if(_e&4194240){var et=$.lanes;et&=j.pendingLanes,_e|=et,$.lanes=_e,Cc(j,_e)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(j,$){return ci().memoizedState=[j,$===void 0?null:$],j},useContext:Vg,useEffect:vi,useImperativeHandle:function(j,$,_e){return _e=_e!=null?_e.concat([j]):null,ti(4194308,4,yi.bind(null,$,j),_e)},useLayoutEffect:function(j,$){return ti(4194308,4,j,$)},useInsertionEffect:function(j,$){return ti(4,2,j,$)},useMemo:function(j,$){var _e=ci();return $=$===void 0?null:$,j=j(),_e.memoizedState=[j,$],j},useReducer:function(j,$,_e){var et=ci();return $=_e!==void 0?_e($):$,et.memoizedState=et.baseState=$,j={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:j,lastRenderedState:$},et.queue=j,j=j.dispatch=Gi.bind(null,N$2,j),[et.memoizedState,j]},useRef:function(j){var $=ci();return j={current:j},$.memoizedState=j},useState:qi,useDebugValue:Ai,useDeferredValue:function(j){return ci().memoizedState=j},useTransition:function(){var j=qi(!1),$=j[0];return j=Ei.bind(null,j[1]),ci().memoizedState=j,[$,j]},useMutableSource:function(){},useSyncExternalStore:function(j,$,_e){var et=N$2,tt=ci();if(I$1){if(_e===void 0)throw Error(p$4(407));_e=_e()}else{if(_e=$(),R$1===null)throw Error(p$4(349));Rh&30||ni(et,$,_e)}tt.memoizedState=_e;var nt={value:_e,getSnapshot:$};return tt.queue=nt,vi(ki.bind(null,et,nt,j),[j]),et.flags|=2048,li(9,mi.bind(null,et,nt,_e,$),void 0,null),_e},useId:function(){var j=ci(),$=R$1.identifierPrefix;if(I$1){var _e=sg,et=rg;_e=(et&~(1<<32-oc(et)-1)).toString(32)+_e,$=":"+$+"R"+_e,_e=Uh++,0<_e&&($+="H"+_e.toString(32)),$+=":"}else _e=Vh++,$=":"+$+"r"+_e.toString(32)+":";return j.memoizedState=$},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(j){var $=di();return Di($,O$2.memoizedState,j)},useTransition:function(){var j=fi(ei)[0],$=di().memoizedState;return[j,$]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(j){var $=di();return O$2===null?$.memoizedState=j:Di($,O$2.memoizedState,j)},useTransition:function(){var j=gi(ei)[0],$=di().memoizedState;return[j,$]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(j,$){try{var _e="",et=$;do _e+=Pa(et),et=et.return;while(et);var tt=_e}catch(nt){tt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:j,source:$,stack:tt,digest:null}}function Li(j,$,_e){return{value:j,source:null,stack:_e??null,digest:$??null}}function Mi(j,$){try{console.error($.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(j,$,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var et=$.value;return _e.callback=function(){Pi||(Pi=!0,Qi=et),Mi(j,$)},_e}function Ri(j,$,_e){_e=ch(-1,_e),_e.tag=3;var et=j.type.getDerivedStateFromError;if(typeof et=="function"){var tt=$.value;_e.payload=function(){return et(tt)},_e.callback=function(){Mi(j,$)}}var nt=j.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(_e.callback=function(){Mi(j,$),typeof et!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var rt=$.stack;this.componentDidCatch($.value,{componentStack:rt!==null?rt:""})}),_e}function Ti(j,$,_e){var et=j.pingCache;if(et===null){et=j.pingCache=new Ni;var tt=new Set;et.set($,tt)}else tt=et.get($),tt===void 0&&(tt=new Set,et.set($,tt));tt.has(_e)||(tt.add(_e),j=Ui.bind(null,j,$,_e),$.then(j,j))}function Vi(j){do{var $;if(($=j.tag===13)&&($=j.memoizedState,$=$!==null?$.dehydrated!==null:!0),$)return j;j=j.return}while(j!==null);return null}function Wi(j,$,_e,et,tt){return j.mode&1?(j.flags|=65536,j.lanes=tt,j):(j===$?j.flags|=65536:(j.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:($=ch(-1,1),$.tag=2,dh(_e,$,1))),_e.lanes|=1),j)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(j,$,_e,et){$.child=j===null?Ch($,null,_e,et):Bh($,j.child,_e,et)}function Zi(j,$,_e,et,tt){_e=_e.render;var nt=$.ref;return Tg($,tt),et=Xh(j,$,_e,et,nt,tt),_e=bi(),j!==null&&!Ug?($.updateQueue=j.updateQueue,$.flags&=-2053,j.lanes&=~tt,$i(j,$,tt)):(I$1&&_e&&vg($),$.flags|=1,Yi(j,$,et,tt),$.child)}function aj(j,$,_e,et,tt){if(j===null){var nt=_e.type;return typeof nt=="function"&&!bj(nt)&&nt.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?($.tag=15,$.type=nt,cj(j,$,nt,et,tt)):(j=yh(_e.type,null,et,$,$.mode,tt),j.ref=$.ref,j.return=$,$.child=j)}if(nt=j.child,!(j.lanes&tt)){var rt=nt.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(rt,et)&&j.ref===$.ref)return $i(j,$,tt)}return $.flags|=1,j=wh(nt,et),j.ref=$.ref,j.return=$,$.child=j}function cj(j,$,_e,et,tt){if(j!==null){var nt=j.memoizedProps;if(Ie(nt,et)&&j.ref===$.ref)if(Ug=!1,$.pendingProps=et=nt,(j.lanes&tt)!==0)j.flags&131072&&(Ug=!0);else return $.lanes=j.lanes,$i(j,$,tt)}return dj(j,$,_e,et,tt)}function ej(j,$,_e){var et=$.pendingProps,tt=et.children,nt=j!==null?j.memoizedState:null;if(et.mode==="hidden")if(!($.mode&1))$.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if(!(_e&1073741824))return j=nt!==null?nt.baseLanes|_e:_e,$.lanes=$.childLanes=1073741824,$.memoizedState={baseLanes:j,cachePool:null,transitions:null},$.updateQueue=null,G$1(fj,gj),gj|=j,null;$.memoizedState={baseLanes:0,cachePool:null,transitions:null},et=nt!==null?nt.baseLanes:_e,G$1(fj,gj),gj|=et}else nt!==null?(et=nt.baseLanes|_e,$.memoizedState=null):et=_e,G$1(fj,gj),gj|=et;return Yi(j,$,tt,_e),$.child}function hj(j,$){var _e=$.ref;(j===null&&_e!==null||j!==null&&j.ref!==_e)&&($.flags|=512,$.flags|=2097152)}function dj(j,$,_e,et,tt){var nt=Zf(_e)?Xf:H.current;return nt=Yf($,nt),Tg($,tt),_e=Xh(j,$,_e,et,nt,tt),et=bi(),j!==null&&!Ug?($.updateQueue=j.updateQueue,$.flags&=-2053,j.lanes&=~tt,$i(j,$,tt)):(I$1&&et&&vg($),$.flags|=1,Yi(j,$,_e,tt),$.child)}function ij(j,$,_e,et,tt){if(Zf(_e)){var nt=!0;cg($)}else nt=!1;if(Tg($,tt),$.stateNode===null)jj(j,$),ph($,_e,et),rh($,_e,et,tt),et=!0;else if(j===null){var rt=$.stateNode,it=$.memoizedProps;rt.props=it;var st=rt.context,ot=_e.contextType;typeof ot=="object"&&ot!==null?ot=Vg(ot):(ot=Zf(_e)?Xf:H.current,ot=Yf($,ot));var at=_e.getDerivedStateFromProps,lt=typeof at=="function"||typeof rt.getSnapshotBeforeUpdate=="function";lt||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(it!==et||st!==ot)&&qh($,rt,et,ot),$g=!1;var ut=$.memoizedState;rt.state=ut,gh($,et,rt,tt),st=$.memoizedState,it!==et||ut!==st||Wf.current||$g?(typeof at=="function"&&(kh($,_e,at,et),st=$.memoizedState),(it=$g||oh($,_e,it,et,ut,st,ot))?(lt||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount()),typeof rt.componentDidMount=="function"&&($.flags|=4194308)):(typeof rt.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=et,$.memoizedState=st),rt.props=et,rt.state=st,rt.context=ot,et=it):(typeof rt.componentDidMount=="function"&&($.flags|=4194308),et=!1)}else{rt=$.stateNode,bh(j,$),it=$.memoizedProps,ot=$.type===$.elementType?it:Lg($.type,it),rt.props=ot,lt=$.pendingProps,ut=rt.context,st=_e.contextType,typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(_e)?Xf:H.current,st=Yf($,st));var ct=_e.getDerivedStateFromProps;(at=typeof ct=="function"||typeof rt.getSnapshotBeforeUpdate=="function")||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(it!==lt||ut!==st)&&qh($,rt,et,st),$g=!1,ut=$.memoizedState,rt.state=ut,gh($,et,rt,tt);var ft=$.memoizedState;it!==lt||ut!==ft||Wf.current||$g?(typeof ct=="function"&&(kh($,_e,ct,et),ft=$.memoizedState),(ot=$g||oh($,_e,ot,et,ut,ft,st)||!1)?(at||typeof rt.UNSAFE_componentWillUpdate!="function"&&typeof rt.componentWillUpdate!="function"||(typeof rt.componentWillUpdate=="function"&&rt.componentWillUpdate(et,ft,st),typeof rt.UNSAFE_componentWillUpdate=="function"&&rt.UNSAFE_componentWillUpdate(et,ft,st)),typeof rt.componentDidUpdate=="function"&&($.flags|=4),typeof rt.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof rt.componentDidUpdate!="function"||it===j.memoizedProps&&ut===j.memoizedState||($.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||it===j.memoizedProps&&ut===j.memoizedState||($.flags|=1024),$.memoizedProps=et,$.memoizedState=ft),rt.props=et,rt.state=ft,rt.context=st,et=ot):(typeof rt.componentDidUpdate!="function"||it===j.memoizedProps&&ut===j.memoizedState||($.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||it===j.memoizedProps&&ut===j.memoizedState||($.flags|=1024),et=!1)}return kj(j,$,_e,et,nt,tt)}function kj(j,$,_e,et,tt,nt){hj(j,$);var rt=($.flags&128)!==0;if(!et&&!rt)return tt&&dg($,_e,!1),$i(j,$,nt);et=$.stateNode,Xi.current=$;var it=rt&&typeof _e.getDerivedStateFromError!="function"?null:et.render();return $.flags|=1,j!==null&&rt?($.child=Bh($,j.child,null,nt),$.child=Bh($,null,it,nt)):Yi(j,$,it,nt),$.memoizedState=et.state,tt&&dg($,_e,!0),$.child}function lj(j){var $=j.stateNode;$.pendingContext?ag(j,$.pendingContext,$.pendingContext!==$.context):$.context&&ag(j,$.context,!1),Ih(j,$.containerInfo)}function mj(j,$,_e,et,tt){return Ig(),Jg(tt),$.flags|=256,Yi(j,$,_e,et),$.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(j){return{baseLanes:j,cachePool:null,transitions:null}}function pj(j,$,_e){var et=$.pendingProps,tt=M$2.current,nt=!1,rt=($.flags&128)!==0,it;if((it=rt)||(it=j!==null&&j.memoizedState===null?!1:(tt&2)!==0),it?(nt=!0,$.flags&=-129):(j===null||j.memoizedState!==null)&&(tt|=1),G$1(M$2,tt&1),j===null)return Eg($),j=$.memoizedState,j!==null&&(j=j.dehydrated,j!==null)?($.mode&1?j.data==="$!"?$.lanes=8:$.lanes=1073741824:$.lanes=1,null):(rt=et.children,j=et.fallback,nt?(et=$.mode,nt=$.child,rt={mode:"hidden",children:rt},!(et&1)&&nt!==null?(nt.childLanes=0,nt.pendingProps=rt):nt=qj(rt,et,0,null),j=Ah(j,et,_e,null),nt.return=$,j.return=$,nt.sibling=j,$.child=nt,$.child.memoizedState=oj(_e),$.memoizedState=nj,j):rj($,rt));if(tt=j.memoizedState,tt!==null&&(it=tt.dehydrated,it!==null))return sj(j,$,rt,et,it,tt,_e);if(nt){nt=et.fallback,rt=$.mode,tt=j.child,it=tt.sibling;var st={mode:"hidden",children:et.children};return!(rt&1)&&$.child!==tt?(et=$.child,et.childLanes=0,et.pendingProps=st,$.deletions=null):(et=wh(tt,st),et.subtreeFlags=tt.subtreeFlags&14680064),it!==null?nt=wh(it,nt):(nt=Ah(nt,rt,_e,null),nt.flags|=2),nt.return=$,et.return=$,et.sibling=nt,$.child=et,et=nt,nt=$.child,rt=j.child.memoizedState,rt=rt===null?oj(_e):{baseLanes:rt.baseLanes|_e,cachePool:null,transitions:rt.transitions},nt.memoizedState=rt,nt.childLanes=j.childLanes&~_e,$.memoizedState=nj,et}return nt=j.child,j=nt.sibling,et=wh(nt,{mode:"visible",children:et.children}),!($.mode&1)&&(et.lanes=_e),et.return=$,et.sibling=null,j!==null&&(_e=$.deletions,_e===null?($.deletions=[j],$.flags|=16):_e.push(j)),$.child=et,$.memoizedState=null,et}function rj(j,$){return $=qj({mode:"visible",children:$},j.mode,0,null),$.return=j,j.child=$}function tj(j,$,_e,et){return et!==null&&Jg(et),Bh($,j.child,null,_e),j=rj($,$.pendingProps.children),j.flags|=2,$.memoizedState=null,j}function sj(j,$,_e,et,tt,nt,rt){if(_e)return $.flags&256?($.flags&=-257,et=Li(Error(p$4(422))),tj(j,$,rt,et)):$.memoizedState!==null?($.child=j.child,$.flags|=128,null):(nt=et.fallback,tt=$.mode,et=qj({mode:"visible",children:et.children},tt,0,null),nt=Ah(nt,tt,rt,null),nt.flags|=2,et.return=$,nt.return=$,et.sibling=nt,$.child=et,$.mode&1&&Bh($,j.child,null,rt),$.child.memoizedState=oj(rt),$.memoizedState=nj,nt);if(!($.mode&1))return tj(j,$,rt,null);if(tt.data==="$!"){if(et=tt.nextSibling&&tt.nextSibling.dataset,et)var it=et.dgst;return et=it,nt=Error(p$4(419)),et=Li(nt,et,void 0),tj(j,$,rt,et)}if(it=(rt&j.childLanes)!==0,Ug||it){if(et=R$1,et!==null){switch(rt&-rt){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}tt=tt&(et.suspendedLanes|rt)?0:tt,tt!==0&&tt!==nt.retryLane&&(nt.retryLane=tt,Zg(j,tt),mh(et,j,tt,-1))}return uj(),et=Li(Error(p$4(421))),tj(j,$,rt,et)}return tt.data==="$?"?($.flags|=128,$.child=j.child,$=vj.bind(null,j),tt._reactRetry=$,null):(j=nt.treeContext,yg=Lf(tt.nextSibling),xg=$,I$1=!0,zg=null,j!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=j.id,sg=j.overflow,qg=$),$=rj($,et.children),$.flags|=4096,$)}function wj(j,$,_e){j.lanes|=$;var et=j.alternate;et!==null&&(et.lanes|=$),Sg(j.return,$,_e)}function xj(j,$,_e,et,tt){var nt=j.memoizedState;nt===null?j.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:et,tail:_e,tailMode:tt}:(nt.isBackwards=$,nt.rendering=null,nt.renderingStartTime=0,nt.last=et,nt.tail=_e,nt.tailMode=tt)}function yj(j,$,_e){var et=$.pendingProps,tt=et.revealOrder,nt=et.tail;if(Yi(j,$,et.children,_e),et=M$2.current,et&2)et=et&1|2,$.flags|=128;else{if(j!==null&&j.flags&128)e:for(j=$.child;j!==null;){if(j.tag===13)j.memoizedState!==null&&wj(j,_e,$);else if(j.tag===19)wj(j,_e,$);else if(j.child!==null){j.child.return=j,j=j.child;continue}if(j===$)break e;for(;j.sibling===null;){if(j.return===null||j.return===$)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}et&=1}if(G$1(M$2,et),!($.mode&1))$.memoizedState=null;else switch(tt){case"forwards":for(_e=$.child,tt=null;_e!==null;)j=_e.alternate,j!==null&&Mh(j)===null&&(tt=_e),_e=_e.sibling;_e=tt,_e===null?(tt=$.child,$.child=null):(tt=_e.sibling,_e.sibling=null),xj($,!1,tt,_e,nt);break;case"backwards":for(_e=null,tt=$.child,$.child=null;tt!==null;){if(j=tt.alternate,j!==null&&Mh(j)===null){$.child=tt;break}j=tt.sibling,tt.sibling=_e,_e=tt,tt=j}xj($,!0,_e,null,nt);break;case"together":xj($,!1,null,null,void 0);break;default:$.memoizedState=null}return $.child}function jj(j,$){!($.mode&1)&&j!==null&&(j.alternate=null,$.alternate=null,$.flags|=2)}function $i(j,$,_e){if(j!==null&&($.dependencies=j.dependencies),hh|=$.lanes,!(_e&$.childLanes))return null;if(j!==null&&$.child!==j.child)throw Error(p$4(153));if($.child!==null){for(j=$.child,_e=wh(j,j.pendingProps),$.child=_e,_e.return=$;j.sibling!==null;)j=j.sibling,_e=_e.sibling=wh(j,j.pendingProps),_e.return=$;_e.sibling=null}return $.child}function zj(j,$,_e){switch($.tag){case 3:lj($),Ig();break;case 5:Kh($);break;case 1:Zf($.type)&&cg($);break;case 4:Ih($,$.stateNode.containerInfo);break;case 10:var et=$.type._context,tt=$.memoizedProps.value;G$1(Mg,et._currentValue),et._currentValue=tt;break;case 13:if(et=$.memoizedState,et!==null)return et.dehydrated!==null?(G$1(M$2,M$2.current&1),$.flags|=128,null):_e&$.child.childLanes?pj(j,$,_e):(G$1(M$2,M$2.current&1),j=$i(j,$,_e),j!==null?j.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(et=(_e&$.childLanes)!==0,j.flags&128){if(et)return yj(j,$,_e);$.flags|=128}if(tt=$.memoizedState,tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),G$1(M$2,M$2.current),et)break;return null;case 22:case 23:return $.lanes=0,ej(j,$,_e)}return $i(j,$,_e)}var Aj,Bj,Cj,Dj;Aj=function(j,$){for(var _e=$.child;_e!==null;){if(_e.tag===5||_e.tag===6)j.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(j,$,_e,et){var tt=j.memoizedProps;if(tt!==et){j=$.stateNode,Hh(Eh.current);var nt=null;switch(_e){case"input":tt=Ya(j,tt),et=Ya(j,et),nt=[];break;case"select":tt=A$2({},tt,{value:void 0}),et=A$2({},et,{value:void 0}),nt=[];break;case"textarea":tt=gb(j,tt),et=gb(j,et),nt=[];break;default:typeof tt.onClick!="function"&&typeof et.onClick=="function"&&(j.onclick=Bf)}ub(_e,et);var rt;_e=null;for(ot in tt)if(!et.hasOwnProperty(ot)&&tt.hasOwnProperty(ot)&&tt[ot]!=null)if(ot==="style"){var it=tt[ot];for(rt in it)it.hasOwnProperty(rt)&&(_e||(_e={}),_e[rt]="")}else ot!=="dangerouslySetInnerHTML"&&ot!=="children"&&ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&ot!=="autoFocus"&&(ea.hasOwnProperty(ot)?nt||(nt=[]):(nt=nt||[]).push(ot,null));for(ot in et){var st=et[ot];if(it=tt!=null?tt[ot]:void 0,et.hasOwnProperty(ot)&&st!==it&&(st!=null||it!=null))if(ot==="style")if(it){for(rt in it)!it.hasOwnProperty(rt)||st&&st.hasOwnProperty(rt)||(_e||(_e={}),_e[rt]="");for(rt in st)st.hasOwnProperty(rt)&&it[rt]!==st[rt]&&(_e||(_e={}),_e[rt]=st[rt])}else _e||(nt||(nt=[]),nt.push(ot,_e)),_e=st;else ot==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,it=it?it.__html:void 0,st!=null&&it!==st&&(nt=nt||[]).push(ot,st)):ot==="children"?typeof st!="string"&&typeof st!="number"||(nt=nt||[]).push(ot,""+st):ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ot)?(st!=null&&ot==="onScroll"&&D$1("scroll",j),nt||it===st||(nt=[])):(nt=nt||[]).push(ot,st))}_e&&(nt=nt||[]).push("style",_e);var ot=nt;($.updateQueue=ot)&&($.flags|=4)}};Dj=function(j,$,_e,et){_e!==et&&($.flags|=4)};function Ej(j,$){if(!I$1)switch(j.tailMode){case"hidden":$=j.tail;for(var _e=null;$!==null;)$.alternate!==null&&(_e=$),$=$.sibling;_e===null?j.tail=null:_e.sibling=null;break;case"collapsed":_e=j.tail;for(var et=null;_e!==null;)_e.alternate!==null&&(et=_e),_e=_e.sibling;et===null?$||j.tail===null?j.tail=null:j.tail.sibling=null:et.sibling=null}}function S$1(j){var $=j.alternate!==null&&j.alternate.child===j.child,_e=0,et=0;if($)for(var tt=j.child;tt!==null;)_e|=tt.lanes|tt.childLanes,et|=tt.subtreeFlags&14680064,et|=tt.flags&14680064,tt.return=j,tt=tt.sibling;else for(tt=j.child;tt!==null;)_e|=tt.lanes|tt.childLanes,et|=tt.subtreeFlags,et|=tt.flags,tt.return=j,tt=tt.sibling;return j.subtreeFlags|=et,j.childLanes=_e,$}function Fj(j,$,_e){var et=$.pendingProps;switch(wg($),$.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1($),null;case 1:return Zf($.type)&&$f(),S$1($),null;case 3:return et=$.stateNode,Jh(),E$2(Wf),E$2(H),Oh(),et.pendingContext&&(et.context=et.pendingContext,et.pendingContext=null),(j===null||j.child===null)&&(Gg($)?$.flags|=4:j===null||j.memoizedState.isDehydrated&&!($.flags&256)||($.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(j,$),S$1($),null;case 5:Lh($);var tt=Hh(Gh.current);if(_e=$.type,j!==null&&$.stateNode!=null)Cj(j,$,_e,et,tt),j.ref!==$.ref&&($.flags|=512,$.flags|=2097152);else{if(!et){if($.stateNode===null)throw Error(p$4(166));return S$1($),null}if(j=Hh(Eh.current),Gg($)){et=$.stateNode,_e=$.type;var nt=$.memoizedProps;switch(et[Of]=$,et[Pf]=nt,j=($.mode&1)!==0,_e){case"dialog":D$1("cancel",et),D$1("close",et);break;case"iframe":case"object":case"embed":D$1("load",et);break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$1(lf[tt],et);break;case"source":D$1("error",et);break;case"img":case"image":case"link":D$1("error",et),D$1("load",et);break;case"details":D$1("toggle",et);break;case"input":Za(et,nt),D$1("invalid",et);break;case"select":et._wrapperState={wasMultiple:!!nt.multiple},D$1("invalid",et);break;case"textarea":hb(et,nt),D$1("invalid",et)}ub(_e,nt),tt=null;for(var rt in nt)if(nt.hasOwnProperty(rt)){var it=nt[rt];rt==="children"?typeof it=="string"?et.textContent!==it&&(nt.suppressHydrationWarning!==!0&&Af(et.textContent,it,j),tt=["children",it]):typeof it=="number"&&et.textContent!==""+it&&(nt.suppressHydrationWarning!==!0&&Af(et.textContent,it,j),tt=["children",""+it]):ea.hasOwnProperty(rt)&&it!=null&&rt==="onScroll"&&D$1("scroll",et)}switch(_e){case"input":Va(et),db(et,nt,!0);break;case"textarea":Va(et),jb(et);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(et.onclick=Bf)}et=tt,$.updateQueue=et,et!==null&&($.flags|=4)}else{rt=tt.nodeType===9?tt:tt.ownerDocument,j==="http://www.w3.org/1999/xhtml"&&(j=kb(_e)),j==="http://www.w3.org/1999/xhtml"?_e==="script"?(j=rt.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild)):typeof et.is=="string"?j=rt.createElement(_e,{is:et.is}):(j=rt.createElement(_e),_e==="select"&&(rt=j,et.multiple?rt.multiple=!0:et.size&&(rt.size=et.size))):j=rt.createElementNS(j,_e),j[Of]=$,j[Pf]=et,Aj(j,$,!1,!1),$.stateNode=j;e:{switch(rt=vb(_e,et),_e){case"dialog":D$1("cancel",j),D$1("close",j),tt=et;break;case"iframe":case"object":case"embed":D$1("load",j),tt=et;break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$1(lf[tt],j);tt=et;break;case"source":D$1("error",j),tt=et;break;case"img":case"image":case"link":D$1("error",j),D$1("load",j),tt=et;break;case"details":D$1("toggle",j),tt=et;break;case"input":Za(j,et),tt=Ya(j,et),D$1("invalid",j);break;case"option":tt=et;break;case"select":j._wrapperState={wasMultiple:!!et.multiple},tt=A$2({},et,{value:void 0}),D$1("invalid",j);break;case"textarea":hb(j,et),tt=gb(j,et),D$1("invalid",j);break;default:tt=et}ub(_e,tt),it=tt;for(nt in it)if(it.hasOwnProperty(nt)){var st=it[nt];nt==="style"?sb(j,st):nt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(j,st)):nt==="children"?typeof st=="string"?(_e!=="textarea"||st!=="")&&ob(j,st):typeof st=="number"&&ob(j,""+st):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?st!=null&&nt==="onScroll"&&D$1("scroll",j):st!=null&&ta(j,nt,st,rt))}switch(_e){case"input":Va(j),db(j,et,!1);break;case"textarea":Va(j),jb(j);break;case"option":et.value!=null&&j.setAttribute("value",""+Sa(et.value));break;case"select":j.multiple=!!et.multiple,nt=et.value,nt!=null?fb(j,!!et.multiple,nt,!1):et.defaultValue!=null&&fb(j,!!et.multiple,et.defaultValue,!0);break;default:typeof tt.onClick=="function"&&(j.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":et=!!et.autoFocus;break e;case"img":et=!0;break e;default:et=!1}}et&&($.flags|=4)}$.ref!==null&&($.flags|=512,$.flags|=2097152)}return S$1($),null;case 6:if(j&&$.stateNode!=null)Dj(j,$,j.memoizedProps,et);else{if(typeof et!="string"&&$.stateNode===null)throw Error(p$4(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg($)){if(et=$.stateNode,_e=$.memoizedProps,et[Of]=$,(nt=et.nodeValue!==_e)&&(j=xg,j!==null))switch(j.tag){case 3:Af(et.nodeValue,_e,(j.mode&1)!==0);break;case 5:j.memoizedProps.suppressHydrationWarning!==!0&&Af(et.nodeValue,_e,(j.mode&1)!==0)}nt&&($.flags|=4)}else et=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(et),et[Of]=$,$.stateNode=et}return S$1($),null;case 13:if(E$2(M$2),et=$.memoizedState,j===null||j.memoizedState!==null&&j.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&$.mode&1&&!($.flags&128))Hg(),Ig(),$.flags|=98560,nt=!1;else if(nt=Gg($),et!==null&&et.dehydrated!==null){if(j===null){if(!nt)throw Error(p$4(318));if(nt=$.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$4(317));nt[Of]=$}else Ig(),!($.flags&128)&&($.memoizedState=null),$.flags|=4;S$1($),nt=!1}else zg!==null&&(Gj(zg),zg=null),nt=!0;if(!nt)return $.flags&65536?$:null}return $.flags&128?($.lanes=_e,$):(et=et!==null,et!==(j!==null&&j.memoizedState!==null)&&et&&($.child.flags|=8192,$.mode&1&&(j===null||M$2.current&1?T$3===0&&(T$3=3):uj())),$.updateQueue!==null&&($.flags|=4),S$1($),null);case 4:return Jh(),Bj(j,$),j===null&&sf($.stateNode.containerInfo),S$1($),null;case 10:return Rg($.type._context),S$1($),null;case 17:return Zf($.type)&&$f(),S$1($),null;case 19:if(E$2(M$2),nt=$.memoizedState,nt===null)return S$1($),null;if(et=($.flags&128)!==0,rt=nt.rendering,rt===null)if(et)Ej(nt,!1);else{if(T$3!==0||j!==null&&j.flags&128)for(j=$.child;j!==null;){if(rt=Mh(j),rt!==null){for($.flags|=128,Ej(nt,!1),et=rt.updateQueue,et!==null&&($.updateQueue=et,$.flags|=4),$.subtreeFlags=0,et=_e,_e=$.child;_e!==null;)nt=_e,j=et,nt.flags&=14680066,rt=nt.alternate,rt===null?(nt.childLanes=0,nt.lanes=j,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=rt.childLanes,nt.lanes=rt.lanes,nt.child=rt.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=rt.memoizedProps,nt.memoizedState=rt.memoizedState,nt.updateQueue=rt.updateQueue,nt.type=rt.type,j=rt.dependencies,nt.dependencies=j===null?null:{lanes:j.lanes,firstContext:j.firstContext}),_e=_e.sibling;return G$1(M$2,M$2.current&1|2),$.child}j=j.sibling}nt.tail!==null&&B$1()>Hj&&($.flags|=128,et=!0,Ej(nt,!1),$.lanes=4194304)}else{if(!et)if(j=Mh(rt),j!==null){if($.flags|=128,et=!0,_e=j.updateQueue,_e!==null&&($.updateQueue=_e,$.flags|=4),Ej(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!rt.alternate&&!I$1)return S$1($),null}else 2*B$1()-nt.renderingStartTime>Hj&&_e!==1073741824&&($.flags|=128,et=!0,Ej(nt,!1),$.lanes=4194304);nt.isBackwards?(rt.sibling=$.child,$.child=rt):(_e=nt.last,_e!==null?_e.sibling=rt:$.child=rt,nt.last=rt)}return nt.tail!==null?($=nt.tail,nt.rendering=$,nt.tail=$.sibling,nt.renderingStartTime=B$1(),$.sibling=null,_e=M$2.current,G$1(M$2,et?_e&1|2:_e&1),$):(S$1($),null);case 22:case 23:return Ij(),et=$.memoizedState!==null,j!==null&&j.memoizedState!==null!==et&&($.flags|=8192),et&&$.mode&1?gj&1073741824&&(S$1($),$.subtreeFlags&6&&($.flags|=8192)):S$1($),null;case 24:return null;case 25:return null}throw Error(p$4(156,$.tag))}function Jj(j,$){switch(wg($),$.tag){case 1:return Zf($.type)&&$f(),j=$.flags,j&65536?($.flags=j&-65537|128,$):null;case 3:return Jh(),E$2(Wf),E$2(H),Oh(),j=$.flags,j&65536&&!(j&128)?($.flags=j&-65537|128,$):null;case 5:return Lh($),null;case 13:if(E$2(M$2),j=$.memoizedState,j!==null&&j.dehydrated!==null){if($.alternate===null)throw Error(p$4(340));Ig()}return j=$.flags,j&65536?($.flags=j&-65537|128,$):null;case 19:return E$2(M$2),null;case 4:return Jh(),null;case 10:return Rg($.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(j,$){var _e=j.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(et){W(j,$,et)}else _e.current=null}function Nj(j,$,_e){try{_e()}catch(et){W(j,$,et)}}var Oj=!1;function Pj(j,$){if(Cf=dd,j=Me(),Ne(j)){if("selectionStart"in j)var _e={start:j.selectionStart,end:j.selectionEnd};else e:{_e=(_e=j.ownerDocument)&&_e.defaultView||window;var et=_e.getSelection&&_e.getSelection();if(et&&et.rangeCount!==0){_e=et.anchorNode;var tt=et.anchorOffset,nt=et.focusNode;et=et.focusOffset;try{_e.nodeType,nt.nodeType}catch{_e=null;break e}var rt=0,it=-1,st=-1,ot=0,at=0,lt=j,ut=null;t:for(;;){for(var ct;lt!==_e||tt!==0&&lt.nodeType!==3||(it=rt+tt),lt!==nt||et!==0&&lt.nodeType!==3||(st=rt+et),lt.nodeType===3&&(rt+=lt.nodeValue.length),(ct=lt.firstChild)!==null;)ut=lt,lt=ct;for(;;){if(lt===j)break t;if(ut===_e&&++ot===tt&&(it=rt),ut===nt&&++at===et&&(st=rt),(ct=lt.nextSibling)!==null)break;lt=ut,ut=lt.parentNode}lt=ct}_e=it===-1||st===-1?null:{start:it,end:st}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:j,selectionRange:_e},dd=!1,V$1=$;V$1!==null;)if($=V$1,j=$.child,($.subtreeFlags&1028)!==0&&j!==null)j.return=$,V$1=j;else for(;V$1!==null;){$=V$1;try{var ft=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var dt=ft.memoizedProps,mt=ft.memoizedState,pt=$.stateNode,yt=pt.getSnapshotBeforeUpdate($.elementType===$.type?dt:Lg($.type,dt),mt);pt.__reactInternalSnapshotBeforeUpdate=yt}break;case 3:var vt=$.stateNode.containerInfo;vt.nodeType===1?vt.textContent="":vt.nodeType===9&&vt.documentElement&&vt.removeChild(vt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(Ct){W($,$.return,Ct)}if(j=$.sibling,j!==null){j.return=$.return,V$1=j;break}V$1=$.return}return ft=Oj,Oj=!1,ft}function Qj(j,$,_e){var et=$.updateQueue;if(et=et!==null?et.lastEffect:null,et!==null){var tt=et=et.next;do{if((tt.tag&j)===j){var nt=tt.destroy;tt.destroy=void 0,nt!==void 0&&Nj($,_e,nt)}tt=tt.next}while(tt!==et)}}function Rj(j,$){if($=$.updateQueue,$=$!==null?$.lastEffect:null,$!==null){var _e=$=$.next;do{if((_e.tag&j)===j){var et=_e.create;_e.destroy=et()}_e=_e.next}while(_e!==$)}}function Sj(j){var $=j.ref;if($!==null){var _e=j.stateNode;switch(j.tag){case 5:j=_e;break;default:j=_e}typeof $=="function"?$(j):$.current=j}}function Tj(j){var $=j.alternate;$!==null&&(j.alternate=null,Tj($)),j.child=null,j.deletions=null,j.sibling=null,j.tag===5&&($=j.stateNode,$!==null&&(delete $[Of],delete $[Pf],delete $[of],delete $[Qf],delete $[Rf])),j.stateNode=null,j.return=null,j.dependencies=null,j.memoizedProps=null,j.memoizedState=null,j.pendingProps=null,j.stateNode=null,j.updateQueue=null}function Uj(j){return j.tag===5||j.tag===3||j.tag===4}function Vj(j){e:for(;;){for(;j.sibling===null;){if(j.return===null||Uj(j.return))return null;j=j.return}for(j.sibling.return=j.return,j=j.sibling;j.tag!==5&&j.tag!==6&&j.tag!==18;){if(j.flags&2||j.child===null||j.tag===4)continue e;j.child.return=j,j=j.child}if(!(j.flags&2))return j.stateNode}}function Wj(j,$,_e){var et=j.tag;if(et===5||et===6)j=j.stateNode,$?_e.nodeType===8?_e.parentNode.insertBefore(j,$):_e.insertBefore(j,$):(_e.nodeType===8?($=_e.parentNode,$.insertBefore(j,_e)):($=_e,$.appendChild(j)),_e=_e._reactRootContainer,_e!=null||$.onclick!==null||($.onclick=Bf));else if(et!==4&&(j=j.child,j!==null))for(Wj(j,$,_e),j=j.sibling;j!==null;)Wj(j,$,_e),j=j.sibling}function Xj(j,$,_e){var et=j.tag;if(et===5||et===6)j=j.stateNode,$?_e.insertBefore(j,$):_e.appendChild(j);else if(et!==4&&(j=j.child,j!==null))for(Xj(j,$,_e),j=j.sibling;j!==null;)Xj(j,$,_e),j=j.sibling}var X$1=null,Yj=!1;function Zj(j,$,_e){for(_e=_e.child;_e!==null;)ak(j,$,_e),_e=_e.sibling}function ak(j,$,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U||Mj(_e,$);case 6:var et=X$1,tt=Yj;X$1=null,Zj(j,$,_e),X$1=et,Yj=tt,X$1!==null&&(Yj?(j=X$1,_e=_e.stateNode,j.nodeType===8?j.parentNode.removeChild(_e):j.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(j=X$1,_e=_e.stateNode,j.nodeType===8?Kf(j.parentNode,_e):j.nodeType===1&&Kf(j,_e),bd(j)):Kf(X$1,_e.stateNode));break;case 4:et=X$1,tt=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(j,$,_e),X$1=et,Yj=tt;break;case 0:case 11:case 14:case 15:if(!U&&(et=_e.updateQueue,et!==null&&(et=et.lastEffect,et!==null))){tt=et=et.next;do{var nt=tt,rt=nt.destroy;nt=nt.tag,rt!==void 0&&(nt&2||nt&4)&&Nj(_e,$,rt),tt=tt.next}while(tt!==et)}Zj(j,$,_e);break;case 1:if(!U&&(Mj(_e,$),et=_e.stateNode,typeof et.componentWillUnmount=="function"))try{et.props=_e.memoizedProps,et.state=_e.memoizedState,et.componentWillUnmount()}catch(it){W(_e,$,it)}Zj(j,$,_e);break;case 21:Zj(j,$,_e);break;case 22:_e.mode&1?(U=(et=U)||_e.memoizedState!==null,Zj(j,$,_e),U=et):Zj(j,$,_e);break;default:Zj(j,$,_e)}}function bk(j){var $=j.updateQueue;if($!==null){j.updateQueue=null;var _e=j.stateNode;_e===null&&(_e=j.stateNode=new Lj),$.forEach(function(et){var tt=ck.bind(null,j,et);_e.has(et)||(_e.add(et),et.then(tt,tt))})}}function dk(j,$){var _e=$.deletions;if(_e!==null)for(var et=0;et<_e.length;et++){var tt=_e[et];try{var nt=j,rt=$,it=rt;e:for(;it!==null;){switch(it.tag){case 5:X$1=it.stateNode,Yj=!1;break e;case 3:X$1=it.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=it.stateNode.containerInfo,Yj=!0;break e}it=it.return}if(X$1===null)throw Error(p$4(160));ak(nt,rt,tt),X$1=null,Yj=!1;var st=tt.alternate;st!==null&&(st.return=null),tt.return=null}catch(ot){W(tt,$,ot)}}if($.subtreeFlags&12854)for($=$.child;$!==null;)ek($,j),$=$.sibling}function ek(j,$){var _e=j.alternate,et=j.flags;switch(j.tag){case 0:case 11:case 14:case 15:if(dk($,j),fk(j),et&4){try{Qj(3,j,j.return),Rj(3,j)}catch(dt){W(j,j.return,dt)}try{Qj(5,j,j.return)}catch(dt){W(j,j.return,dt)}}break;case 1:dk($,j),fk(j),et&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk($,j),fk(j),et&512&&_e!==null&&Mj(_e,_e.return),j.flags&32){var tt=j.stateNode;try{ob(tt,"")}catch(dt){W(j,j.return,dt)}}if(et&4&&(tt=j.stateNode,tt!=null)){var nt=j.memoizedProps,rt=_e!==null?_e.memoizedProps:nt,it=j.type,st=j.updateQueue;if(j.updateQueue=null,st!==null)try{it==="input"&&nt.type==="radio"&&nt.name!=null&&ab(tt,nt),vb(it,rt);var ot=vb(it,nt);for(rt=0;rt<st.length;rt+=2){var at=st[rt],lt=st[rt+1];at==="style"?sb(tt,lt):at==="dangerouslySetInnerHTML"?nb(tt,lt):at==="children"?ob(tt,lt):ta(tt,at,lt,ot)}switch(it){case"input":bb(tt,nt);break;case"textarea":ib(tt,nt);break;case"select":var ut=tt._wrapperState.wasMultiple;tt._wrapperState.wasMultiple=!!nt.multiple;var ct=nt.value;ct!=null?fb(tt,!!nt.multiple,ct,!1):ut!==!!nt.multiple&&(nt.defaultValue!=null?fb(tt,!!nt.multiple,nt.defaultValue,!0):fb(tt,!!nt.multiple,nt.multiple?[]:"",!1))}tt[Pf]=nt}catch(dt){W(j,j.return,dt)}}break;case 6:if(dk($,j),fk(j),et&4){if(j.stateNode===null)throw Error(p$4(162));tt=j.stateNode,nt=j.memoizedProps;try{tt.nodeValue=nt}catch(dt){W(j,j.return,dt)}}break;case 3:if(dk($,j),fk(j),et&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd($.containerInfo)}catch(dt){W(j,j.return,dt)}break;case 4:dk($,j),fk(j);break;case 13:dk($,j),fk(j),tt=j.child,tt.flags&8192&&(nt=tt.memoizedState!==null,tt.stateNode.isHidden=nt,!nt||tt.alternate!==null&&tt.alternate.memoizedState!==null||(gk=B$1())),et&4&&bk(j);break;case 22:if(at=_e!==null&&_e.memoizedState!==null,j.mode&1?(U=(ot=U)||at,dk($,j),U=ot):dk($,j),fk(j),et&8192){if(ot=j.memoizedState!==null,(j.stateNode.isHidden=ot)&&!at&&j.mode&1)for(V$1=j,at=j.child;at!==null;){for(lt=V$1=at;V$1!==null;){switch(ut=V$1,ct=ut.child,ut.tag){case 0:case 11:case 14:case 15:Qj(4,ut,ut.return);break;case 1:Mj(ut,ut.return);var ft=ut.stateNode;if(typeof ft.componentWillUnmount=="function"){et=ut,_e=ut.return;try{$=et,ft.props=$.memoizedProps,ft.state=$.memoizedState,ft.componentWillUnmount()}catch(dt){W(et,_e,dt)}}break;case 5:Mj(ut,ut.return);break;case 22:if(ut.memoizedState!==null){hk(lt);continue}}ct!==null?(ct.return=ut,V$1=ct):hk(lt)}at=at.sibling}e:for(at=null,lt=j;;){if(lt.tag===5){if(at===null){at=lt;try{tt=lt.stateNode,ot?(nt=tt.style,typeof nt.setProperty=="function"?nt.setProperty("display","none","important"):nt.display="none"):(it=lt.stateNode,st=lt.memoizedProps.style,rt=st!=null&&st.hasOwnProperty("display")?st.display:null,it.style.display=rb("display",rt))}catch(dt){W(j,j.return,dt)}}}else if(lt.tag===6){if(at===null)try{lt.stateNode.nodeValue=ot?"":lt.memoizedProps}catch(dt){W(j,j.return,dt)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===j)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===j)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===j)break e;at===lt&&(at=null),lt=lt.return}at===lt&&(at=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:dk($,j),fk(j),et&4&&bk(j);break;case 21:break;default:dk($,j),fk(j)}}function fk(j){var $=j.flags;if($&2){try{e:{for(var _e=j.return;_e!==null;){if(Uj(_e)){var et=_e;break e}_e=_e.return}throw Error(p$4(160))}switch(et.tag){case 5:var tt=et.stateNode;et.flags&32&&(ob(tt,""),et.flags&=-33);var nt=Vj(j);Xj(j,nt,tt);break;case 3:case 4:var rt=et.stateNode.containerInfo,it=Vj(j);Wj(j,it,rt);break;default:throw Error(p$4(161))}}catch(st){W(j,j.return,st)}j.flags&=-3}$&4096&&(j.flags&=-4097)}function ik(j,$,_e){V$1=j,jk(j)}function jk(j,$,_e){for(var et=(j.mode&1)!==0;V$1!==null;){var tt=V$1,nt=tt.child;if(tt.tag===22&&et){var rt=tt.memoizedState!==null||Kj;if(!rt){var it=tt.alternate,st=it!==null&&it.memoizedState!==null||U;it=Kj;var ot=U;if(Kj=rt,(U=st)&&!ot)for(V$1=tt;V$1!==null;)rt=V$1,st=rt.child,rt.tag===22&&rt.memoizedState!==null?kk(tt):st!==null?(st.return=rt,V$1=st):kk(tt);for(;nt!==null;)V$1=nt,jk(nt),nt=nt.sibling;V$1=tt,Kj=it,U=ot}lk(j)}else tt.subtreeFlags&8772&&nt!==null?(nt.return=tt,V$1=nt):lk(j)}}function lk(j){for(;V$1!==null;){var $=V$1;if($.flags&8772){var _e=$.alternate;try{if($.flags&8772)switch($.tag){case 0:case 11:case 15:U||Rj(5,$);break;case 1:var et=$.stateNode;if($.flags&4&&!U)if(_e===null)et.componentDidMount();else{var tt=$.elementType===$.type?_e.memoizedProps:Lg($.type,_e.memoizedProps);et.componentDidUpdate(tt,_e.memoizedState,et.__reactInternalSnapshotBeforeUpdate)}var nt=$.updateQueue;nt!==null&&ih($,nt,et);break;case 3:var rt=$.updateQueue;if(rt!==null){if(_e=null,$.child!==null)switch($.child.tag){case 5:_e=$.child.stateNode;break;case 1:_e=$.child.stateNode}ih($,rt,_e)}break;case 5:var it=$.stateNode;if(_e===null&&$.flags&4){_e=it;var st=$.memoizedProps;switch($.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&_e.focus();break;case"img":st.src&&(_e.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if($.memoizedState===null){var ot=$.alternate;if(ot!==null){var at=ot.memoizedState;if(at!==null){var lt=at.dehydrated;lt!==null&&bd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U||$.flags&512&&Sj($)}catch(ut){W($,$.return,ut)}}if($===j){V$1=null;break}if(_e=$.sibling,_e!==null){_e.return=$.return,V$1=_e;break}V$1=$.return}}function hk(j){for(;V$1!==null;){var $=V$1;if($===j){V$1=null;break}var _e=$.sibling;if(_e!==null){_e.return=$.return,V$1=_e;break}V$1=$.return}}function kk(j){for(;V$1!==null;){var $=V$1;try{switch($.tag){case 0:case 11:case 15:var _e=$.return;try{Rj(4,$)}catch(st){W($,_e,st)}break;case 1:var et=$.stateNode;if(typeof et.componentDidMount=="function"){var tt=$.return;try{et.componentDidMount()}catch(st){W($,tt,st)}}var nt=$.return;try{Sj($)}catch(st){W($,nt,st)}break;case 5:var rt=$.return;try{Sj($)}catch(st){W($,rt,st)}}}catch(st){W($,$.return,st)}if($===j){V$1=null;break}var it=$.sibling;if(it!==null){it.return=$.return,V$1=it;break}V$1=$.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$1=null,Y=null,Z=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(j){return j.mode&1?K$1&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(j=C$2,j!==0||(j=window.event,j=j===void 0?16:jd(j.type)),j):1}function mh(j,$,_e,et){if(50<zk)throw zk=0,Ak=null,Error(p$4(185));Ac(j,_e,et),(!(K$1&2)||j!==R$1)&&(j===R$1&&(!(K$1&2)&&(rk|=_e),T$3===4&&Dk(j,Z)),Ek(j,et),_e===1&&K$1===0&&!($.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(j,$){var _e=j.callbackNode;wc(j,$);var et=uc(j,j===R$1?Z:0);if(et===0)_e!==null&&bc(_e),j.callbackNode=null,j.callbackPriority=0;else if($=et&-et,j.callbackPriority!==$){if(_e!=null&&bc(_e),$===1)j.tag===0?ig(Fk.bind(null,j)):hg(Fk.bind(null,j)),Jf(function(){!(K$1&6)&&jg()}),_e=null;else{switch(Dc(et)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,j))}j.callbackPriority=$,j.callbackNode=_e}}function Hk(j,$){if(Bk=-1,Ck=0,K$1&6)throw Error(p$4(327));var _e=j.callbackNode;if(Ik()&&j.callbackNode!==_e)return null;var et=uc(j,j===R$1?Z:0);if(et===0)return null;if(et&30||et&j.expiredLanes||$)$=Jk(j,et);else{$=et;var tt=K$1;K$1|=2;var nt=Kk();(R$1!==j||Z!==$)&&(vk=null,Hj=B$1()+500,Lk(j,$));do try{Mk();break}catch(it){Nk(j,it)}while(1);Qg(),nk.current=nt,K$1=tt,Y!==null?$=0:(R$1=null,Z=0,$=T$3)}if($!==0){if($===2&&(tt=xc(j),tt!==0&&(et=tt,$=Ok(j,tt))),$===1)throw _e=qk,Lk(j,0),Dk(j,et),Ek(j,B$1()),_e;if($===6)Dk(j,et);else{if(tt=j.current.alternate,!(et&30)&&!Pk(tt)&&($=Jk(j,et),$===2&&(nt=xc(j),nt!==0&&(et=nt,$=Ok(j,nt))),$===1))throw _e=qk,Lk(j,0),Dk(j,et),Ek(j,B$1()),_e;switch(j.finishedWork=tt,j.finishedLanes=et,$){case 0:case 1:throw Error(p$4(345));case 2:Qk(j,uk,vk);break;case 3:if(Dk(j,et),(et&130023424)===et&&($=gk+500-B$1(),10<$)){if(uc(j,0)!==0)break;if(tt=j.suspendedLanes,(tt&et)!==et){L$2(),j.pingedLanes|=j.suspendedLanes&tt;break}j.timeoutHandle=Ff(Qk.bind(null,j,uk,vk),$);break}Qk(j,uk,vk);break;case 4:if(Dk(j,et),(et&4194240)===et)break;for($=j.eventTimes,tt=-1;0<et;){var rt=31-oc(et);nt=1<<rt,rt=$[rt],rt>tt&&(tt=rt),et&=~nt}if(et=tt,et=B$1()-et,et=(120>et?120:480>et?480:1080>et?1080:1920>et?1920:3e3>et?3e3:4320>et?4320:1960*mk(et/1960))-et,10<et){j.timeoutHandle=Ff(Qk.bind(null,j,uk,vk),et);break}Qk(j,uk,vk);break;case 5:Qk(j,uk,vk);break;default:throw Error(p$4(329))}}}return Ek(j,B$1()),j.callbackNode===_e?Hk.bind(null,j):null}function Ok(j,$){var _e=tk;return j.current.memoizedState.isDehydrated&&(Lk(j,$).flags|=256),j=Jk(j,$),j!==2&&($=uk,uk=_e,$!==null&&Gj($)),j}function Gj(j){uk===null?uk=j:uk.push.apply(uk,j)}function Pk(j){for(var $=j;;){if($.flags&16384){var _e=$.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var et=0;et<_e.length;et++){var tt=_e[et],nt=tt.getSnapshot;tt=tt.value;try{if(!He(nt(),tt))return!1}catch{return!1}}}if(_e=$.child,$.subtreeFlags&16384&&_e!==null)_e.return=$,$=_e;else{if($===j)break;for(;$.sibling===null;){if($.return===null||$.return===j)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Dk(j,$){for($&=~sk,$&=~rk,j.suspendedLanes|=$,j.pingedLanes&=~$,j=j.expirationTimes;0<$;){var _e=31-oc($),et=1<<_e;j[_e]=-1,$&=~et}}function Fk(j){if(K$1&6)throw Error(p$4(327));Ik();var $=uc(j,0);if(!($&1))return Ek(j,B$1()),null;var _e=Jk(j,$);if(j.tag!==0&&_e===2){var et=xc(j);et!==0&&($=et,_e=Ok(j,et))}if(_e===1)throw _e=qk,Lk(j,0),Dk(j,$),Ek(j,B$1()),_e;if(_e===6)throw Error(p$4(345));return j.finishedWork=j.current.alternate,j.finishedLanes=$,Qk(j,uk,vk),Ek(j,B$1()),null}function Rk(j,$){var _e=K$1;K$1|=1;try{return j($)}finally{K$1=_e,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(j){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var $=K$1;K$1|=1;var _e=pk.transition,et=C$2;try{if(pk.transition=null,C$2=1,j)return j()}finally{C$2=et,pk.transition=_e,K$1=$,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(j,$){j.finishedWork=null,j.finishedLanes=0;var _e=j.timeoutHandle;if(_e!==-1&&(j.timeoutHandle=-1,Gf(_e)),Y!==null)for(_e=Y.return;_e!==null;){var et=_e;switch(wg(et),et.tag){case 1:et=et.type.childContextTypes,et!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H),Oh();break;case 5:Lh(et);break;case 4:Jh();break;case 13:E$2(M$2);break;case 19:E$2(M$2);break;case 10:Rg(et.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R$1=j,Y=j=wh(j.current,null),Z=gj=$,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for($=0;$<Wg.length;$++)if(_e=Wg[$],et=_e.interleaved,et!==null){_e.interleaved=null;var tt=et.next,nt=_e.pending;if(nt!==null){var rt=nt.next;nt.next=tt,et.next=rt}_e.pending=et}Wg=null}return j}function Nk(j,$){do{var _e=Y;try{if(Qg(),Ph.current=ai,Sh){for(var et=N$2.memoizedState;et!==null;){var tt=et.queue;tt!==null&&(tt.pending=null),et=et.next}Sh=!1}if(Rh=0,P$1=O$2=N$2=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$3=1,qk=$,Y=null;break}e:{var nt=j,rt=_e.return,it=_e,st=$;if($=Z,it.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var ot=st,at=it,lt=at.tag;if(!(at.mode&1)&&(lt===0||lt===11||lt===15)){var ut=at.alternate;ut?(at.updateQueue=ut.updateQueue,at.memoizedState=ut.memoizedState,at.lanes=ut.lanes):(at.updateQueue=null,at.memoizedState=null)}var ct=Vi(rt);if(ct!==null){ct.flags&=-257,Wi(ct,rt,it,nt,$),ct.mode&1&&Ti(nt,ot,$),$=ct,st=ot;var ft=$.updateQueue;if(ft===null){var dt=new Set;dt.add(st),$.updateQueue=dt}else ft.add(st);break e}else{if(!($&1)){Ti(nt,ot,$),uj();break e}st=Error(p$4(426))}}else if(I$1&&it.mode&1){var mt=Vi(rt);if(mt!==null){!(mt.flags&65536)&&(mt.flags|=256),Wi(mt,rt,it,nt,$),Jg(Ki(st,it));break e}}nt=st=Ki(st,it),T$3!==4&&(T$3=2),tk===null?tk=[nt]:tk.push(nt),nt=rt;do{switch(nt.tag){case 3:nt.flags|=65536,$&=-$,nt.lanes|=$;var pt=Oi(nt,st,$);fh(nt,pt);break e;case 1:it=st;var yt=nt.type,vt=nt.stateNode;if(!(nt.flags&128)&&(typeof yt.getDerivedStateFromError=="function"||vt!==null&&typeof vt.componentDidCatch=="function"&&(Si===null||!Si.has(vt)))){nt.flags|=65536,$&=-$,nt.lanes|=$;var Ct=Ri(nt,it,$);fh(nt,Ct);break e}}nt=nt.return}while(nt!==null)}Tk(_e)}catch(At){$=At,Y===_e&&_e!==null&&(Y=_e=_e.return);continue}break}while(1)}function Kk(){var j=nk.current;return nk.current=ai,j===null?ai:j}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z)}function Jk(j,$){var _e=K$1;K$1|=2;var et=Kk();(R$1!==j||Z!==$)&&(vk=null,Lk(j,$));do try{Uk();break}catch(tt){Nk(j,tt)}while(1);if(Qg(),K$1=_e,nk.current=et,Y!==null)throw Error(p$4(261));return R$1=null,Z=0,T$3}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(j){var $=Wk(j.alternate,j,gj);j.memoizedProps=j.pendingProps,$===null?Tk(j):Y=$,ok.current=null}function Tk(j){var $=j;do{var _e=$.alternate;if(j=$.return,$.flags&32768){if(_e=Jj(_e,$),_e!==null){_e.flags&=32767,Y=_e;return}if(j!==null)j.flags|=32768,j.subtreeFlags=0,j.deletions=null;else{T$3=6,Y=null;return}}else if(_e=Fj(_e,$,gj),_e!==null){Y=_e;return}if($=$.sibling,$!==null){Y=$;return}Y=$=j}while($!==null);T$3===0&&(T$3=5)}function Qk(j,$,_e){var et=C$2,tt=pk.transition;try{pk.transition=null,C$2=1,Xk(j,$,_e,et)}finally{pk.transition=tt,C$2=et}return null}function Xk(j,$,_e,et){do Ik();while(xk!==null);if(K$1&6)throw Error(p$4(327));_e=j.finishedWork;var tt=j.finishedLanes;if(_e===null)return null;if(j.finishedWork=null,j.finishedLanes=0,_e===j.current)throw Error(p$4(177));j.callbackNode=null,j.callbackPriority=0;var nt=_e.lanes|_e.childLanes;if(Bc(j,nt),j===R$1&&(Y=R$1=null,Z=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),nt=(_e.flags&15990)!==0,_e.subtreeFlags&15990||nt){nt=pk.transition,pk.transition=null;var rt=C$2;C$2=1;var it=K$1;K$1|=4,ok.current=null,Pj(j,_e),ek(_e,j),Oe(Df),dd=!!Cf,Df=Cf=null,j.current=_e,ik(_e),dc(),K$1=it,C$2=rt,pk.transition=nt}else j.current=_e;if(wk&&(wk=!1,xk=j,yk=tt),nt=j.pendingLanes,nt===0&&(Si=null),mc(_e.stateNode),Ek(j,B$1()),$!==null)for(et=j.onRecoverableError,_e=0;_e<$.length;_e++)tt=$[_e],et(tt.value,{componentStack:tt.stack,digest:tt.digest});if(Pi)throw Pi=!1,j=Qi,Qi=null,j;return yk&1&&j.tag!==0&&Ik(),nt=j.pendingLanes,nt&1?j===Ak?zk++:(zk=0,Ak=j):zk=0,jg(),null}function Ik(){if(xk!==null){var j=Dc(yk),$=pk.transition,_e=C$2;try{if(pk.transition=null,C$2=16>j?16:j,xk===null)var et=!1;else{if(j=xk,xk=null,yk=0,K$1&6)throw Error(p$4(331));var tt=K$1;for(K$1|=4,V$1=j.current;V$1!==null;){var nt=V$1,rt=nt.child;if(V$1.flags&16){var it=nt.deletions;if(it!==null){for(var st=0;st<it.length;st++){var ot=it[st];for(V$1=ot;V$1!==null;){var at=V$1;switch(at.tag){case 0:case 11:case 15:Qj(8,at,nt)}var lt=at.child;if(lt!==null)lt.return=at,V$1=lt;else for(;V$1!==null;){at=V$1;var ut=at.sibling,ct=at.return;if(Tj(at),at===ot){V$1=null;break}if(ut!==null){ut.return=ct,V$1=ut;break}V$1=ct}}}var ft=nt.alternate;if(ft!==null){var dt=ft.child;if(dt!==null){ft.child=null;do{var mt=dt.sibling;dt.sibling=null,dt=mt}while(dt!==null)}}V$1=nt}}if(nt.subtreeFlags&2064&&rt!==null)rt.return=nt,V$1=rt;else e:for(;V$1!==null;){if(nt=V$1,nt.flags&2048)switch(nt.tag){case 0:case 11:case 15:Qj(9,nt,nt.return)}var pt=nt.sibling;if(pt!==null){pt.return=nt.return,V$1=pt;break e}V$1=nt.return}}var yt=j.current;for(V$1=yt;V$1!==null;){rt=V$1;var vt=rt.child;if(rt.subtreeFlags&2064&&vt!==null)vt.return=rt,V$1=vt;else e:for(rt=yt;V$1!==null;){if(it=V$1,it.flags&2048)try{switch(it.tag){case 0:case 11:case 15:Rj(9,it)}}catch(At){W(it,it.return,At)}if(it===rt){V$1=null;break e}var Ct=it.sibling;if(Ct!==null){Ct.return=it.return,V$1=Ct;break e}V$1=it.return}}if(K$1=tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,j)}catch{}et=!0}return et}finally{C$2=_e,pk.transition=$}}return!1}function Yk(j,$,_e){$=Ki(_e,$),$=Oi(j,$,1),j=dh(j,$,1),$=L$2(),j!==null&&(Ac(j,1,$),Ek(j,$))}function W(j,$,_e){if(j.tag===3)Yk(j,j,_e);else for(;$!==null;){if($.tag===3){Yk($,j,_e);break}else if($.tag===1){var et=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof et.componentDidCatch=="function"&&(Si===null||!Si.has(et))){j=Ki(_e,j),j=Ri($,j,1),$=dh($,j,1),j=L$2(),$!==null&&(Ac($,1,j),Ek($,j));break}}$=$.return}}function Ui(j,$,_e){var et=j.pingCache;et!==null&&et.delete($),$=L$2(),j.pingedLanes|=j.suspendedLanes&_e,R$1===j&&(Z&_e)===_e&&(T$3===4||T$3===3&&(Z&130023424)===Z&&500>B$1()-gk?Lk(j,0):sk|=_e),Ek(j,$)}function Zk(j,$){$===0&&(j.mode&1?($=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):$=1);var _e=L$2();j=Zg(j,$),j!==null&&(Ac(j,$,_e),Ek(j,_e))}function vj(j){var $=j.memoizedState,_e=0;$!==null&&(_e=$.retryLane),Zk(j,_e)}function ck(j,$){var _e=0;switch(j.tag){case 13:var et=j.stateNode,tt=j.memoizedState;tt!==null&&(_e=tt.retryLane);break;case 19:et=j.stateNode;break;default:throw Error(p$4(314))}et!==null&&et.delete($),Zk(j,_e)}var Wk;Wk=function(j,$,_e){if(j!==null)if(j.memoizedProps!==$.pendingProps||Wf.current)Ug=!0;else{if(!(j.lanes&_e)&&!($.flags&128))return Ug=!1,zj(j,$,_e);Ug=!!(j.flags&131072)}else Ug=!1,I$1&&$.flags&1048576&&ug($,ng,$.index);switch($.lanes=0,$.tag){case 2:var et=$.type;jj(j,$),j=$.pendingProps;var tt=Yf($,H.current);Tg($,_e),tt=Xh(null,$,et,j,tt,_e);var nt=bi();return $.flags|=1,typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0?($.tag=1,$.memoizedState=null,$.updateQueue=null,Zf(et)?(nt=!0,cg($)):nt=!1,$.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,ah($),tt.updater=nh,$.stateNode=tt,tt._reactInternals=$,rh($,et,j,_e),$=kj(null,$,et,!0,nt,_e)):($.tag=0,I$1&&nt&&vg($),Yi(null,$,tt,_e),$=$.child),$;case 16:et=$.elementType;e:{switch(jj(j,$),j=$.pendingProps,tt=et._init,et=tt(et._payload),$.type=et,tt=$.tag=$k(et),j=Lg(et,j),tt){case 0:$=dj(null,$,et,j,_e);break e;case 1:$=ij(null,$,et,j,_e);break e;case 11:$=Zi(null,$,et,j,_e);break e;case 14:$=aj(null,$,et,Lg(et.type,j),_e);break e}throw Error(p$4(306,et,""))}return $;case 0:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Lg(et,tt),dj(j,$,et,tt,_e);case 1:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Lg(et,tt),ij(j,$,et,tt,_e);case 3:e:{if(lj($),j===null)throw Error(p$4(387));et=$.pendingProps,nt=$.memoizedState,tt=nt.element,bh(j,$),gh($,et,null,_e);var rt=$.memoizedState;if(et=rt.element,nt.isDehydrated)if(nt={element:et,isDehydrated:!1,cache:rt.cache,pendingSuspenseBoundaries:rt.pendingSuspenseBoundaries,transitions:rt.transitions},$.updateQueue.baseState=nt,$.memoizedState=nt,$.flags&256){tt=Ki(Error(p$4(423)),$),$=mj(j,$,et,_e,tt);break e}else if(et!==tt){tt=Ki(Error(p$4(424)),$),$=mj(j,$,et,_e,tt);break e}else for(yg=Lf($.stateNode.containerInfo.firstChild),xg=$,I$1=!0,zg=null,_e=Ch($,null,et,_e),$.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),et===tt){$=$i(j,$,_e);break e}Yi(j,$,et,_e)}$=$.child}return $;case 5:return Kh($),j===null&&Eg($),et=$.type,tt=$.pendingProps,nt=j!==null?j.memoizedProps:null,rt=tt.children,Ef(et,tt)?rt=null:nt!==null&&Ef(et,nt)&&($.flags|=32),hj(j,$),Yi(j,$,rt,_e),$.child;case 6:return j===null&&Eg($),null;case 13:return pj(j,$,_e);case 4:return Ih($,$.stateNode.containerInfo),et=$.pendingProps,j===null?$.child=Bh($,null,et,_e):Yi(j,$,et,_e),$.child;case 11:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Lg(et,tt),Zi(j,$,et,tt,_e);case 7:return Yi(j,$,$.pendingProps,_e),$.child;case 8:return Yi(j,$,$.pendingProps.children,_e),$.child;case 12:return Yi(j,$,$.pendingProps.children,_e),$.child;case 10:e:{if(et=$.type._context,tt=$.pendingProps,nt=$.memoizedProps,rt=tt.value,G$1(Mg,et._currentValue),et._currentValue=rt,nt!==null)if(He(nt.value,rt)){if(nt.children===tt.children&&!Wf.current){$=$i(j,$,_e);break e}}else for(nt=$.child,nt!==null&&(nt.return=$);nt!==null;){var it=nt.dependencies;if(it!==null){rt=nt.child;for(var st=it.firstContext;st!==null;){if(st.context===et){if(nt.tag===1){st=ch(-1,_e&-_e),st.tag=2;var ot=nt.updateQueue;if(ot!==null){ot=ot.shared;var at=ot.pending;at===null?st.next=st:(st.next=at.next,at.next=st),ot.pending=st}}nt.lanes|=_e,st=nt.alternate,st!==null&&(st.lanes|=_e),Sg(nt.return,_e,$),it.lanes|=_e;break}st=st.next}}else if(nt.tag===10)rt=nt.type===$.type?null:nt.child;else if(nt.tag===18){if(rt=nt.return,rt===null)throw Error(p$4(341));rt.lanes|=_e,it=rt.alternate,it!==null&&(it.lanes|=_e),Sg(rt,_e,$),rt=nt.sibling}else rt=nt.child;if(rt!==null)rt.return=nt;else for(rt=nt;rt!==null;){if(rt===$){rt=null;break}if(nt=rt.sibling,nt!==null){nt.return=rt.return,rt=nt;break}rt=rt.return}nt=rt}Yi(j,$,tt.children,_e),$=$.child}return $;case 9:return tt=$.type,et=$.pendingProps.children,Tg($,_e),tt=Vg(tt),et=et(tt),$.flags|=1,Yi(j,$,et,_e),$.child;case 14:return et=$.type,tt=Lg(et,$.pendingProps),tt=Lg(et.type,tt),aj(j,$,et,tt,_e);case 15:return cj(j,$,$.type,$.pendingProps,_e);case 17:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Lg(et,tt),jj(j,$),$.tag=1,Zf(et)?(j=!0,cg($)):j=!1,Tg($,_e),ph($,et,tt),rh($,et,tt,_e),kj(null,$,et,!0,j,_e);case 19:return yj(j,$,_e);case 22:return ej(j,$,_e)}throw Error(p$4(156,$.tag))};function Gk(j,$){return ac(j,$)}function al(j,$,_e,et){this.tag=j,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=et,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(j,$,_e,et){return new al(j,$,_e,et)}function bj(j){return j=j.prototype,!(!j||!j.isReactComponent)}function $k(j){if(typeof j=="function")return bj(j)?1:0;if(j!=null){if(j=j.$$typeof,j===Da)return 11;if(j===Ga)return 14}return 2}function wh(j,$){var _e=j.alternate;return _e===null?(_e=Bg(j.tag,$,j.key,j.mode),_e.elementType=j.elementType,_e.type=j.type,_e.stateNode=j.stateNode,_e.alternate=j,j.alternate=_e):(_e.pendingProps=$,_e.type=j.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=j.flags&14680064,_e.childLanes=j.childLanes,_e.lanes=j.lanes,_e.child=j.child,_e.memoizedProps=j.memoizedProps,_e.memoizedState=j.memoizedState,_e.updateQueue=j.updateQueue,$=j.dependencies,_e.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},_e.sibling=j.sibling,_e.index=j.index,_e.ref=j.ref,_e}function yh(j,$,_e,et,tt,nt){var rt=2;if(et=j,typeof j=="function")bj(j)&&(rt=1);else if(typeof j=="string")rt=5;else e:switch(j){case ya:return Ah(_e.children,tt,nt,$);case za:rt=8,tt|=8;break;case Aa:return j=Bg(12,_e,$,tt|2),j.elementType=Aa,j.lanes=nt,j;case Ea:return j=Bg(13,_e,$,tt),j.elementType=Ea,j.lanes=nt,j;case Fa:return j=Bg(19,_e,$,tt),j.elementType=Fa,j.lanes=nt,j;case Ia:return qj(_e,tt,nt,$);default:if(typeof j=="object"&&j!==null)switch(j.$$typeof){case Ba:rt=10;break e;case Ca:rt=9;break e;case Da:rt=11;break e;case Ga:rt=14;break e;case Ha:rt=16,et=null;break e}throw Error(p$4(130,j==null?j:typeof j,""))}return $=Bg(rt,_e,$,tt),$.elementType=j,$.type=et,$.lanes=nt,$}function Ah(j,$,_e,et){return j=Bg(7,j,et,$),j.lanes=_e,j}function qj(j,$,_e,et){return j=Bg(22,j,et,$),j.elementType=Ia,j.lanes=_e,j.stateNode={isHidden:!1},j}function xh(j,$,_e){return j=Bg(6,j,null,$),j.lanes=_e,j}function zh(j,$,_e){return $=Bg(4,j.children!==null?j.children:[],j.key,$),$.lanes=_e,$.stateNode={containerInfo:j.containerInfo,pendingChildren:null,implementation:j.implementation},$}function bl(j,$,_e,et,tt){this.tag=$,this.containerInfo=j,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=et,this.onRecoverableError=tt,this.mutableSourceEagerHydrationData=null}function cl(j,$,_e,et,tt,nt,rt,it,st){return j=new bl(j,$,_e,it,st),$===1?($=1,nt===!0&&($|=8)):$=0,nt=Bg(3,null,null,$),j.current=nt,nt.stateNode=j,nt.memoizedState={element:et,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(nt),j}function dl(j,$,_e){var et=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:et==null?null:""+et,children:j,containerInfo:$,implementation:_e}}function el(j){if(!j)return Vf;j=j._reactInternals;e:{if(Vb(j)!==j||j.tag!==1)throw Error(p$4(170));var $=j;do{switch($.tag){case 3:$=$.stateNode.context;break e;case 1:if(Zf($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break e}}$=$.return}while($!==null);throw Error(p$4(171))}if(j.tag===1){var _e=j.type;if(Zf(_e))return bg(j,_e,$)}return $}function fl(j,$,_e,et,tt,nt,rt,it,st){return j=cl(_e,et,!0,j,tt,nt,rt,it,st),j.context=el(null),_e=j.current,et=L$2(),tt=lh(_e),nt=ch(et,tt),nt.callback=$??null,dh(_e,nt,tt),j.current.lanes=tt,Ac(j,tt,et),Ek(j,et),j}function gl(j,$,_e,et){var tt=$.current,nt=L$2(),rt=lh(tt);return _e=el(_e),$.context===null?$.context=_e:$.pendingContext=_e,$=ch(nt,rt),$.payload={element:j},et=et===void 0?null:et,et!==null&&($.callback=et),j=dh(tt,$,rt),j!==null&&(mh(j,tt,rt,nt),eh(j,tt,rt)),rt}function hl(j){if(j=j.current,!j.child)return null;switch(j.child.tag){case 5:return j.child.stateNode;default:return j.child.stateNode}}function il(j,$){if(j=j.memoizedState,j!==null&&j.dehydrated!==null){var _e=j.retryLane;j.retryLane=_e!==0&&_e<$?_e:$}}function jl(j,$){il(j,$),(j=j.alternate)&&il(j,$)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(j){console.error(j)};function ml(j){this._internalRoot=j}nl.prototype.render=ml.prototype.render=function(j){var $=this._internalRoot;if($===null)throw Error(p$4(409));gl(j,$,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var j=this._internalRoot;if(j!==null){this._internalRoot=null;var $=j.containerInfo;Sk(function(){gl(null,j,null,null)}),$[uf]=null}};function nl(j){this._internalRoot=j}nl.prototype.unstable_scheduleHydration=function(j){if(j){var $=Hc();j={blockedOn:null,target:j,priority:$};for(var _e=0;_e<Qc.length&&$!==0&&$<Qc[_e].priority;_e++);Qc.splice(_e,0,j),_e===0&&Vc(j)}};function ol(j){return!(!j||j.nodeType!==1&&j.nodeType!==9&&j.nodeType!==11)}function pl(j){return!(!j||j.nodeType!==1&&j.nodeType!==9&&j.nodeType!==11&&(j.nodeType!==8||j.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(j,$,_e,et,tt){if(tt){if(typeof et=="function"){var nt=et;et=function(){var ot=hl(rt);nt.call(ot)}}var rt=fl($,et,j,0,null,!1,!1,"",ql);return j._reactRootContainer=rt,j[uf]=rt.current,sf(j.nodeType===8?j.parentNode:j),Sk(),rt}for(;tt=j.lastChild;)j.removeChild(tt);if(typeof et=="function"){var it=et;et=function(){var ot=hl(st);it.call(ot)}}var st=cl(j,0,!1,null,null,!1,!1,"",ql);return j._reactRootContainer=st,j[uf]=st.current,sf(j.nodeType===8?j.parentNode:j),Sk(function(){gl($,st,_e,et)}),st}function sl(j,$,_e,et,tt){var nt=_e._reactRootContainer;if(nt){var rt=nt;if(typeof tt=="function"){var it=tt;tt=function(){var st=hl(rt);it.call(st)}}gl($,rt,j,tt)}else rt=rl(_e,$,j,tt,et);return hl(rt)}Ec=function(j){switch(j.tag){case 3:var $=j.stateNode;if($.current.memoizedState.isDehydrated){var _e=tc($.pendingLanes);_e!==0&&(Cc($,_e|1),Ek($,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var et=Zg(j,1);if(et!==null){var tt=L$2();mh(et,j,1,tt)}}),jl(j,1)}};Fc=function(j){if(j.tag===13){var $=Zg(j,134217728);if($!==null){var _e=L$2();mh($,j,134217728,_e)}jl(j,134217728)}};Gc=function(j){if(j.tag===13){var $=lh(j),_e=Zg(j,$);if(_e!==null){var et=L$2();mh(_e,j,$,et)}jl(j,$)}};Hc=function(){return C$2};Ic=function(j,$){var _e=C$2;try{return C$2=j,$()}finally{C$2=_e}};yb=function(j,$,_e){switch($){case"input":if(bb(j,_e),$=_e.name,_e.type==="radio"&&$!=null){for(_e=j;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+$)+'][type="radio"]'),$=0;$<_e.length;$++){var et=_e[$];if(et!==j&&et.form===j.form){var tt=Db(et);if(!tt)throw Error(p$4(90));Wa(et),bb(et,tt)}}}break;case"textarea":ib(j,_e);break;case"select":$=_e.value,$!=null&&fb(j,!!_e.multiple,$,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(j){return j=Zb(j),j===null?null:j.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(j,$){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol($))throw Error(p$4(200));return dl(j,$,null,_e)};reactDom_production_min.createRoot=function(j,$){if(!ol(j))throw Error(p$4(299));var _e=!1,et="",tt=ll;return $!=null&&($.unstable_strictMode===!0&&(_e=!0),$.identifierPrefix!==void 0&&(et=$.identifierPrefix),$.onRecoverableError!==void 0&&(tt=$.onRecoverableError)),$=cl(j,1,!1,null,null,_e,!1,et,tt),j[uf]=$.current,sf(j.nodeType===8?j.parentNode:j),new ml($)};reactDom_production_min.findDOMNode=function(j){if(j==null)return null;if(j.nodeType===1)return j;var $=j._reactInternals;if($===void 0)throw typeof j.render=="function"?Error(p$4(188)):(j=Object.keys(j).join(","),Error(p$4(268,j)));return j=Zb($),j=j===null?null:j.stateNode,j};reactDom_production_min.flushSync=function(j){return Sk(j)};reactDom_production_min.hydrate=function(j,$,_e){if(!pl($))throw Error(p$4(200));return sl(null,j,$,!0,_e)};reactDom_production_min.hydrateRoot=function(j,$,_e){if(!ol(j))throw Error(p$4(405));var et=_e!=null&&_e.hydratedSources||null,tt=!1,nt="",rt=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(tt=!0),_e.identifierPrefix!==void 0&&(nt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),$=fl($,null,j,1,_e??null,tt,!1,nt,rt),j[uf]=$.current,sf(j),et)for(j=0;j<et.length;j++)_e=et[j],tt=_e._getVersion,tt=tt(_e._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[_e,tt]:$.mutableSourceEagerHydrationData.push(_e,tt);return new nl($)};reactDom_production_min.render=function(j,$,_e){if(!pl($))throw Error(p$4(200));return sl(null,j,$,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(j){if(!pl(j))throw Error(p$4(40));return j._reactRootContainer?(Sk(function(){sl(null,null,j,!1,function(){j._reactRootContainer=null,j[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(j,$,_e,et){if(!pl(_e))throw Error(p$4(200));if(j==null||j._reactInternals===void 0)throw Error(p$4(38));return sl(j,$,_e,!1,et)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(j){console.error(j)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$3=reactDomExports;client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;const App$1="";/**
 * @remix-run/router v1.3.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(j){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(j[et]=_e[et])}return j},_extends$3.apply(this,arguments)}var Action;(function(j){j.Pop="POP",j.Push="PUSH",j.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(j){j===void 0&&(j={});function $(tt,nt){let{pathname:rt="/",search:it="",hash:st=""}=parsePath(tt.location.hash.substr(1));return createLocation("",{pathname:rt,search:it,hash:st},nt.state&&nt.state.usr||null,nt.state&&nt.state.key||"default")}function _e(tt,nt){let rt=tt.document.querySelector("base"),it="";if(rt&&rt.getAttribute("href")){let st=tt.location.href,ot=st.indexOf("#");it=ot===-1?st:st.slice(0,ot)}return it+"#"+(typeof nt=="string"?nt:createPath(nt))}function et(tt,nt){warning$1(tt.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(nt)+")")}return getUrlBasedHistory($,_e,et,j)}function invariant(j,$){if(j===!1||j===null||typeof j>"u")throw new Error($)}function warning$1(j,$){if(!j){typeof console<"u"&&console.warn($);try{throw new Error($)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(j,$){return{usr:j.state,key:j.key,idx:$}}function createLocation(j,$,_e,et){return _e===void 0&&(_e=null),_extends$3({pathname:typeof j=="string"?j:j.pathname,search:"",hash:""},typeof $=="string"?parsePath($):$,{state:_e,key:$&&$.key||et||createKey()})}function createPath(j){let{pathname:$="/",search:_e="",hash:et=""}=j;return _e&&_e!=="?"&&($+=_e.charAt(0)==="?"?_e:"?"+_e),et&&et!=="#"&&($+=et.charAt(0)==="#"?et:"#"+et),$}function parsePath(j){let $={};if(j){let _e=j.indexOf("#");_e>=0&&($.hash=j.substr(_e),j=j.substr(0,_e));let et=j.indexOf("?");et>=0&&($.search=j.substr(et),j=j.substr(0,et)),j&&($.pathname=j)}return $}function getUrlBasedHistory(j,$,_e,et){et===void 0&&(et={});let{window:tt=document.defaultView,v5Compat:nt=!1}=et,rt=tt.history,it=Action.Pop,st=null,ot=at();ot==null&&(ot=0,rt.replaceState(_extends$3({},rt.state,{idx:ot}),""));function at(){return(rt.state||{idx:null}).idx}function lt(){it=Action.Pop;let mt=at(),pt=mt==null?null:mt-ot;ot=mt,st&&st({action:it,location:dt.location,delta:pt})}function ut(mt,pt){it=Action.Push;let yt=createLocation(dt.location,mt,pt);_e&&_e(yt,mt),ot=at()+1;let vt=getHistoryState(yt,ot),Ct=dt.createHref(yt);try{rt.pushState(vt,"",Ct)}catch{tt.location.assign(Ct)}nt&&st&&st({action:it,location:dt.location,delta:1})}function ct(mt,pt){it=Action.Replace;let yt=createLocation(dt.location,mt,pt);_e&&_e(yt,mt),ot=at();let vt=getHistoryState(yt,ot),Ct=dt.createHref(yt);rt.replaceState(vt,"",Ct),nt&&st&&st({action:it,location:dt.location,delta:0})}function ft(mt){let pt=tt.location.origin!=="null"?tt.location.origin:tt.location.href,yt=typeof mt=="string"?mt:createPath(mt);return invariant(pt,"No window.location.(origin|href) available to create URL for href: "+yt),new URL(yt,pt)}let dt={get action(){return it},get location(){return j(tt,rt)},listen(mt){if(st)throw new Error("A history only accepts one active listener");return tt.addEventListener(PopStateEventType,lt),st=mt,()=>{tt.removeEventListener(PopStateEventType,lt),st=null}},createHref(mt){return $(tt,mt)},createURL:ft,encodeLocation(mt){let pt=ft(mt);return{pathname:pt.pathname,search:pt.search,hash:pt.hash}},push:ut,replace:ct,go(mt){return rt.go(mt)}};return dt}var ResultType;(function(j){j.data="data",j.deferred="deferred",j.redirect="redirect",j.error="error"})(ResultType||(ResultType={}));function isIndexRoute(j){return j.index===!0}function convertRoutesToDataRoutes(j,$,_e){return $===void 0&&($=[]),_e===void 0&&(_e=new Set),j.map((et,tt)=>{let nt=[...$,tt],rt=typeof et.id=="string"?et.id:nt.join("-");return invariant(et.index!==!0||!et.children,"Cannot specify children on an index route"),invariant(!_e.has(rt),'Found a route id collision on id "'+rt+`".  Route id's must be globally unique within Data Router usages`),_e.add(rt),isIndexRoute(et)?_extends$3({},et,{id:rt}):_extends$3({},et,{id:rt,children:et.children?convertRoutesToDataRoutes(et.children,nt,_e):void 0})})}function matchRoutes(j,$,_e){_e===void 0&&(_e="/");let et=typeof $=="string"?parsePath($):$,tt=stripBasename(et.pathname||"/",_e);if(tt==null)return null;let nt=flattenRoutes(j);rankRouteBranches(nt);let rt=null;for(let it=0;rt==null&&it<nt.length;++it)rt=matchRouteBranch(nt[it],safelyDecodeURI(tt));return rt}function flattenRoutes(j,$,_e,et){$===void 0&&($=[]),_e===void 0&&(_e=[]),et===void 0&&(et="");let tt=(nt,rt,it)=>{let st={relativePath:it===void 0?nt.path||"":it,caseSensitive:nt.caseSensitive===!0,childrenIndex:rt,route:nt};st.relativePath.startsWith("/")&&(invariant(st.relativePath.startsWith(et),'Absolute route path "'+st.relativePath+'" nested under path '+('"'+et+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),st.relativePath=st.relativePath.slice(et.length));let ot=joinPaths([et,st.relativePath]),at=_e.concat(st);nt.children&&nt.children.length>0&&(invariant(nt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+ot+'".')),flattenRoutes(nt.children,$,at,ot)),!(nt.path==null&&!nt.index)&&$.push({path:ot,score:computeScore(ot,nt.index),routesMeta:at})};return j.forEach((nt,rt)=>{var it;if(nt.path===""||!((it=nt.path)!=null&&it.includes("?")))tt(nt,rt);else for(let st of explodeOptionalSegments(nt.path))tt(nt,rt,st)}),$}function explodeOptionalSegments(j){let $=j.split("/");if($.length===0)return[];let[_e,...et]=$,tt=_e.endsWith("?"),nt=_e.replace(/\?$/,"");if(et.length===0)return tt?[nt,""]:[nt];let rt=explodeOptionalSegments(et.join("/")),it=[];return it.push(...rt.map(st=>st===""?nt:[nt,st].join("/"))),tt&&it.push(...rt),it.map(st=>j.startsWith("/")&&st===""?"/":st)}function rankRouteBranches(j){j.sort(($,_e)=>$.score!==_e.score?_e.score-$.score:compareIndexes($.routesMeta.map(et=>et.childrenIndex),_e.routesMeta.map(et=>et.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=j=>j==="*";function computeScore(j,$){let _e=j.split("/"),et=_e.length;return _e.some(isSplat)&&(et+=splatPenalty),$&&(et+=indexRouteValue),_e.filter(tt=>!isSplat(tt)).reduce((tt,nt)=>tt+(paramRe.test(nt)?dynamicSegmentValue:nt===""?emptySegmentValue:staticSegmentValue),et)}function compareIndexes(j,$){return j.length===$.length&&j.slice(0,-1).every((et,tt)=>et===$[tt])?j[j.length-1]-$[$.length-1]:0}function matchRouteBranch(j,$){let{routesMeta:_e}=j,et={},tt="/",nt=[];for(let rt=0;rt<_e.length;++rt){let it=_e[rt],st=rt===_e.length-1,ot=tt==="/"?$:$.slice(tt.length)||"/",at=matchPath({path:it.relativePath,caseSensitive:it.caseSensitive,end:st},ot);if(!at)return null;Object.assign(et,at.params);let lt=it.route;nt.push({params:et,pathname:joinPaths([tt,at.pathname]),pathnameBase:normalizePathname(joinPaths([tt,at.pathnameBase])),route:lt}),at.pathnameBase!=="/"&&(tt=joinPaths([tt,at.pathnameBase]))}return nt}function matchPath(j,$){typeof j=="string"&&(j={path:j,caseSensitive:!1,end:!0});let[_e,et]=compilePath(j.path,j.caseSensitive,j.end),tt=$.match(_e);if(!tt)return null;let nt=tt[0],rt=nt.replace(/(.)\/+$/,"$1"),it=tt.slice(1);return{params:et.reduce((ot,at,lt)=>{if(at==="*"){let ut=it[lt]||"";rt=nt.slice(0,nt.length-ut.length).replace(/(.)\/+$/,"$1")}return ot[at]=safelyDecodeURIComponent(it[lt]||"",at),ot},{}),pathname:nt,pathnameBase:rt,pattern:j}}function compilePath(j,$,_e){$===void 0&&($=!1),_e===void 0&&(_e=!0),warning(j==="*"||!j.endsWith("*")||j.endsWith("/*"),'Route path "'+j+'" will be treated as if it were '+('"'+j.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+j.replace(/\*$/,"/*")+'".'));let et=[],tt="^"+j.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(rt,it)=>(et.push(it),"/([^\\/]+)"));return j.endsWith("*")?(et.push("*"),tt+=j==="*"||j==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_e?tt+="\\/*$":j!==""&&j!=="/"&&(tt+="(?:(?=\\/|$))"),[new RegExp(tt,$?void 0:"i"),et]}function safelyDecodeURI(j){try{return decodeURI(j)}catch($){return warning(!1,'The URL path "'+j+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+$+").")),j}}function safelyDecodeURIComponent(j,$){try{return decodeURIComponent(j)}catch(_e){return warning(!1,'The value for the URL param "'+$+'" will not be decoded because'+(' the string "'+j+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+_e+").")),j}}function stripBasename(j,$){if($==="/")return j;if(!j.toLowerCase().startsWith($.toLowerCase()))return null;let _e=$.endsWith("/")?$.length-1:$.length,et=j.charAt(_e);return et&&et!=="/"?null:j.slice(_e)||"/"}function warning(j,$){if(!j){typeof console<"u"&&console.warn($);try{throw new Error($)}catch{}}}function resolvePath(j,$){$===void 0&&($="/");let{pathname:_e,search:et="",hash:tt=""}=typeof j=="string"?parsePath(j):j;return{pathname:_e?_e.startsWith("/")?_e:resolvePathname(_e,$):$,search:normalizeSearch(et),hash:normalizeHash(tt)}}function resolvePathname(j,$){let _e=$.replace(/\/+$/,"").split("/");return j.split("/").forEach(tt=>{tt===".."?_e.length>1&&_e.pop():tt!=="."&&_e.push(tt)}),_e.length>1?_e.join("/"):"/"}function getInvalidPathError(j,$,_e,et){return"Cannot include a '"+j+"' character in a manually specified "+("`to."+$+"` field ["+JSON.stringify(et)+"].  Please separate it out to the ")+("`to."+_e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(j){return j.filter(($,_e)=>_e===0||$.route.path&&$.route.path.length>0)}function resolveTo(j,$,_e,et){et===void 0&&(et=!1);let tt;typeof j=="string"?tt=parsePath(j):(tt=_extends$3({},j),invariant(!tt.pathname||!tt.pathname.includes("?"),getInvalidPathError("?","pathname","search",tt)),invariant(!tt.pathname||!tt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",tt)),invariant(!tt.search||!tt.search.includes("#"),getInvalidPathError("#","search","hash",tt)));let nt=j===""||tt.pathname==="",rt=nt?"/":tt.pathname,it;if(et||rt==null)it=_e;else{let lt=$.length-1;if(rt.startsWith("..")){let ut=rt.split("/");for(;ut[0]==="..";)ut.shift(),lt-=1;tt.pathname=ut.join("/")}it=lt>=0?$[lt]:"/"}let st=resolvePath(tt,it),ot=rt&&rt!=="/"&&rt.endsWith("/"),at=(nt||rt===".")&&_e.endsWith("/");return!st.pathname.endsWith("/")&&(ot||at)&&(st.pathname+="/"),st}const joinPaths=j=>j.join("/").replace(/\/\/+/g,"/"),normalizePathname=j=>j.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=j=>!j||j==="?"?"":j.startsWith("?")?j:"?"+j,normalizeHash=j=>!j||j==="#"?"":j.startsWith("#")?j:"#"+j;class AbortedDeferredError extends Error{}class DeferredData{constructor($,_e){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],invariant($&&typeof $=="object"&&!Array.isArray($),"defer() only accepts plain objects");let et;this.abortPromise=new Promise((nt,rt)=>et=rt),this.controller=new AbortController;let tt=()=>et(new AbortedDeferredError("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",tt),this.controller.signal.addEventListener("abort",tt),this.data=Object.entries($).reduce((nt,rt)=>{let[it,st]=rt;return Object.assign(nt,{[it]:this.trackPromise(it,st)})},{}),this.done&&this.unlistenAbortSignal(),this.init=_e}trackPromise($,_e){if(!(_e instanceof Promise))return _e;this.deferredKeys.push($),this.pendingKeysSet.add($);let et=Promise.race([_e,this.abortPromise]).then(tt=>this.onSettle(et,$,null,tt),tt=>this.onSettle(et,$,tt));return et.catch(()=>{}),Object.defineProperty(et,"_tracked",{get:()=>!0}),et}onSettle($,_e,et,tt){return this.controller.signal.aborted&&et instanceof AbortedDeferredError?(this.unlistenAbortSignal(),Object.defineProperty($,"_error",{get:()=>et}),Promise.reject(et)):(this.pendingKeysSet.delete(_e),this.done&&this.unlistenAbortSignal(),et?(Object.defineProperty($,"_error",{get:()=>et}),this.emit(!1,_e),Promise.reject(et)):(Object.defineProperty($,"_data",{get:()=>tt}),this.emit(!1,_e),tt))}emit($,_e){this.subscribers.forEach(et=>et($,_e))}subscribe($){return this.subscribers.add($),()=>this.subscribers.delete($)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach(($,_e)=>this.pendingKeysSet.delete(_e)),this.emit(!0)}async resolveData($){let _e=!1;if(!this.done){let et=()=>this.cancel();$.addEventListener("abort",et),_e=await new Promise(tt=>{this.subscribe(nt=>{$.removeEventListener("abort",et),(nt||this.done)&&tt(nt)})})}return _e}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return invariant(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce(($,_e)=>{let[et,tt]=_e;return Object.assign($,{[et]:unwrapTrackedPromise(tt)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function isTrackedPromise(j){return j instanceof Promise&&j._tracked===!0}function unwrapTrackedPromise(j){if(!isTrackedPromise(j))return j;if(j._error)throw j._error;return j._data}const redirect=function($,_e){_e===void 0&&(_e=302);let et=_e;typeof et=="number"?et={status:et}:typeof et.status>"u"&&(et.status=302);let tt=new Headers(et.headers);return tt.set("Location",$),new Response(null,_extends$3({},et,{headers:tt}))};class ErrorResponse{constructor($,_e,et,tt){tt===void 0&&(tt=!1),this.status=$,this.statusText=_e||"",this.internal=tt,et instanceof Error?(this.data=et.toString(),this.error=et):this.data=et}}function isRouteErrorResponse(j){return j!=null&&typeof j.status=="number"&&typeof j.statusText=="string"&&typeof j.internal=="boolean"&&"data"in j}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServer=!isBrowser$1;function createRouter(j){invariant(j.routes.length>0,"You must provide a non-empty routes array to createRouter");let $=convertRoutesToDataRoutes(j.routes),_e=null,et=new Set,tt=null,nt=null,rt=null,it=j.hydrationData!=null,st=matchRoutes($,j.history.location,j.basename),ot=null;if(st==null){let _t=getInternalRouterError(404,{pathname:j.history.location.pathname}),{matches:Ft,route:Ht}=getShortCircuitMatches($);st=Ft,ot={[Ht.id]:_t}}let at=!st.some(_t=>_t.route.loader)||j.hydrationData!=null,lt,ut={historyAction:j.history.action,location:j.history.location,matches:st,initialized:at,navigation:IDLE_NAVIGATION,restoreScrollPosition:j.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:j.hydrationData&&j.hydrationData.loaderData||{},actionData:j.hydrationData&&j.hydrationData.actionData||null,errors:j.hydrationData&&j.hydrationData.errors||ot,fetchers:new Map,blockers:new Map},ct=Action.Pop,ft=!1,dt,mt=!1,pt=!1,yt=[],vt=[],Ct=new Map,At=0,$t=-1,bt=new Map,Bt=new Set,Rt=new Map,St=new Map,kt=null,Pt=new Map,Mt=!1;function Lt(){return _e=j.history.listen(_t=>{let{action:Ft,location:Ht,delta:Gt}=_t;if(Mt){Mt=!1;return}warning(kt!=null&&Gt===null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Wt=kn({currentLocation:ut.location,nextLocation:Ht,historyAction:Ft});if(Wt&&Gt!=null){Mt=!0,j.history.go(Gt*-1),On(Wt,{state:"blocked",location:Ht,proceed(){On(Wt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ht}),j.history.go(Gt)},reset(){Fn(Wt),Ut({blockers:new Map(lt.state.blockers)})}});return}return Yt(Ft,Ht)}),ut.initialized||Yt(Action.Pop,ut.location),lt}function zt(){_e&&_e(),et.clear(),dt&&dt.abort(),ut.fetchers.forEach((_t,Ft)=>Vn(Ft)),ut.blockers.forEach((_t,Ft)=>Fn(Ft))}function Kt(_t){return et.add(_t),()=>et.delete(_t)}function Ut(_t){ut=_extends$3({},ut,_t),et.forEach(Ft=>Ft(ut))}function It(_t,Ft){var Ht,Gt;let Wt=ut.actionData!=null&&ut.navigation.formMethod!=null&&isMutationMethod(ut.navigation.formMethod)&&ut.navigation.state==="loading"&&((Ht=_t.state)==null?void 0:Ht._isRedirect)!==!0,Jt;Ft.actionData?Object.keys(Ft.actionData).length>0?Jt=Ft.actionData:Jt=null:Wt?Jt=ut.actionData:Jt=null;let Zt=Ft.loaderData?mergeLoaderData(ut.loaderData,Ft.loaderData,Ft.matches||[],Ft.errors):ut.loaderData;for(let[Qt]of Pt)Fn(Qt);let tn=ft===!0||ut.navigation.formMethod!=null&&isMutationMethod(ut.navigation.formMethod)&&((Gt=_t.state)==null?void 0:Gt._isRedirect)!==!0;Ut(_extends$3({},Ft,{actionData:Jt,loaderData:Zt,historyAction:ct,location:_t,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:gn(_t,Ft.matches||ut.matches),preventScrollReset:tn,blockers:new Map(ut.blockers)})),mt||ct===Action.Pop||(ct===Action.Push?j.history.push(_t,_t.state):ct===Action.Replace&&j.history.replace(_t,_t.state)),ct=Action.Pop,ft=!1,mt=!1,pt=!1,yt=[],vt=[]}async function Vt(_t,Ft){if(typeof _t=="number"){j.history.go(_t);return}let{path:Ht,submission:Gt,error:Wt}=normalizeNavigateOptions(_t,Ft),Jt=ut.location,Zt=createLocation(ut.location,Ht,Ft&&Ft.state);Zt=_extends$3({},Zt,j.history.encodeLocation(Zt));let tn=Ft&&Ft.replace!=null?Ft.replace:void 0,Qt=Action.Push;tn===!0?Qt=Action.Replace:tn===!1||Gt!=null&&isMutationMethod(Gt.formMethod)&&Gt.formAction===ut.location.pathname+ut.location.search&&(Qt=Action.Replace);let fn=Ft&&"preventScrollReset"in Ft?Ft.preventScrollReset===!0:void 0,nn=kn({currentLocation:Jt,nextLocation:Zt,historyAction:Qt});if(nn){On(nn,{state:"blocked",location:Zt,proceed(){On(nn,{state:"proceeding",proceed:void 0,reset:void 0,location:Zt}),Vt(_t,Ft)},reset(){Fn(nn),Ut({blockers:new Map(ut.blockers)})}});return}return await Yt(Qt,Zt,{submission:Gt,pendingError:Wt,preventScrollReset:fn,replace:Ft&&Ft.replace})}function jt(){if(Dn(),Ut({revalidation:"loading"}),ut.navigation.state!=="submitting"){if(ut.navigation.state==="idle"){Yt(ut.historyAction,ut.location,{startUninterruptedRevalidation:!0});return}Yt(ct||ut.historyAction,ut.navigation.location,{overrideNavigation:ut.navigation})}}async function Yt(_t,Ft,Ht){dt&&dt.abort(),dt=null,ct=_t,mt=(Ht&&Ht.startUninterruptedRevalidation)===!0,Pn(ut.location,ut.matches),ft=(Ht&&Ht.preventScrollReset)===!0;let Gt=Ht&&Ht.overrideNavigation,Wt=matchRoutes($,Ft,j.basename);if(!Wt){let an=getInternalRouterError(404,{pathname:Ft.pathname}),{matches:yn,route:dn}=getShortCircuitMatches($);Sn(),It(Ft,{matches:yn,loaderData:{},errors:{[dn.id]:an}});return}if(isHashChangeOnly(ut.location,Ft)&&!(Ht&&Ht.submission&&isMutationMethod(Ht.submission.formMethod))){It(Ft,{matches:Wt});return}dt=new AbortController;let Jt=createClientSideRequest(j.history,Ft,dt.signal,Ht&&Ht.submission),Zt,tn;if(Ht&&Ht.pendingError)tn={[findNearestBoundary(Wt).route.id]:Ht.pendingError};else if(Ht&&Ht.submission&&isMutationMethod(Ht.submission.formMethod)){let an=await Xt(Jt,Ft,Ht.submission,Wt,{replace:Ht.replace});if(an.shortCircuited)return;Zt=an.pendingActionData,tn=an.pendingActionError,Gt=_extends$3({state:"loading",location:Ft},Ht.submission),Jt=new Request(Jt.url,{signal:Jt.signal})}let{shortCircuited:Qt,loaderData:fn,errors:nn}=await sn(Jt,Ft,Wt,Gt,Ht&&Ht.submission,Ht&&Ht.replace,Zt,tn);Qt||(dt=null,It(Ft,_extends$3({matches:Wt},Zt?{actionData:Zt}:{},{loaderData:fn,errors:nn})))}async function Xt(_t,Ft,Ht,Gt,Wt){Dn();let Jt=_extends$3({state:"submitting",location:Ft},Ht);Ut({navigation:Jt});let Zt,tn=getTargetMatch(Gt,Ft);if(!tn.route.action)Zt={type:ResultType.error,error:getInternalRouterError(405,{method:_t.method,pathname:Ft.pathname,routeId:tn.route.id})};else if(Zt=await callLoaderOrAction("action",_t,tn,Gt,lt.basename),_t.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Zt)){let Qt;return Wt&&Wt.replace!=null?Qt=Wt.replace:Qt=Zt.location===ut.location.pathname+ut.location.search,await _n(ut,Zt,{submission:Ht,replace:Qt}),{shortCircuited:!0}}if(isErrorResult(Zt)){let Qt=findNearestBoundary(Gt,tn.route.id);return(Wt&&Wt.replace)!==!0&&(ct=Action.Push),{pendingActionData:{},pendingActionError:{[Qt.route.id]:Zt.error}}}if(isDeferredResult(Zt))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[tn.route.id]:Zt.data}}}async function sn(_t,Ft,Ht,Gt,Wt,Jt,Zt,tn){let Qt=Gt;Qt||(Qt=_extends$3({state:"loading",location:Ft,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Wt));let fn=Wt||(Qt.formMethod&&Qt.formAction&&Qt.formData&&Qt.formEncType?{formMethod:Qt.formMethod,formAction:Qt.formAction,formData:Qt.formData,formEncType:Qt.formEncType}:void 0),[nn,an]=getMatchesToLoad(j.history,ut,Ht,fn,Ft,pt,yt,vt,Zt,tn,Rt);if(Sn(mn=>!(Ht&&Ht.some(wn=>wn.route.id===mn))||nn&&nn.some(wn=>wn.route.id===mn)),nn.length===0&&an.length===0)return It(Ft,_extends$3({matches:Ht,loaderData:{},errors:tn||null},Zt?{actionData:Zt}:{})),{shortCircuited:!0};if(!mt){an.forEach(wn=>{let Ln=ut.fetchers.get(wn.key),Kn={state:"loading",data:Ln&&Ln.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};ut.fetchers.set(wn.key,Kn)});let mn=Zt||ut.actionData;Ut(_extends$3({navigation:Qt},mn?Object.keys(mn).length===0?{actionData:null}:{actionData:mn}:{},an.length>0?{fetchers:new Map(ut.fetchers)}:{}))}$t=++At,an.forEach(mn=>Ct.set(mn.key,dt));let{results:yn,loaderResults:dn,fetcherResults:xn}=await Wn(ut.matches,Ht,nn,an,_t);if(_t.signal.aborted)return{shortCircuited:!0};an.forEach(mn=>Ct.delete(mn.key));let Tn=findRedirect(yn);if(Tn)return await _n(ut,Tn,{replace:Jt}),{shortCircuited:!0};let{loaderData:Bn,errors:un}=processLoaderData(ut,Ht,nn,dn,tn,an,xn,St);St.forEach((mn,wn)=>{mn.subscribe(Ln=>{(Ln||mn.done)&&St.delete(wn)})}),jn();let Jn=Gn($t);return _extends$3({loaderData:Bn,errors:un},Jn||an.length>0?{fetchers:new Map(ut.fetchers)}:{})}function on(_t){return ut.fetchers.get(_t)||IDLE_FETCHER}function hn(_t,Ft,Ht,Gt){if(isServer)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ct.has(_t)&&Mn(_t);let Wt=matchRoutes($,Ht,j.basename);if(!Wt){In(_t,Ft,getInternalRouterError(404,{pathname:Ht}));return}let{path:Jt,submission:Zt}=normalizeNavigateOptions(Ht,Gt,!0),tn=getTargetMatch(Wt,Jt);if(ft=(Gt&&Gt.preventScrollReset)===!0,Zt&&isMutationMethod(Zt.formMethod)){cn(_t,Ft,Jt,tn,Wt,Zt);return}Rt.set(_t,{routeId:Ft,path:Jt,match:tn,matches:Wt}),An(_t,Ft,Jt,tn,Wt,Zt)}async function cn(_t,Ft,Ht,Gt,Wt,Jt){if(Dn(),Rt.delete(_t),!Gt.route.action){let Rn=getInternalRouterError(405,{method:Jt.formMethod,pathname:Ht,routeId:Ft});In(_t,Ft,Rn);return}let Zt=ut.fetchers.get(_t),tn=_extends$3({state:"submitting"},Jt,{data:Zt&&Zt.data," _hasFetcherDoneAnything ":!0});ut.fetchers.set(_t,tn),Ut({fetchers:new Map(ut.fetchers)});let Qt=new AbortController,fn=createClientSideRequest(j.history,Ht,Qt.signal,Jt);Ct.set(_t,Qt);let nn=await callLoaderOrAction("action",fn,Gt,Wt,lt.basename);if(fn.signal.aborted){Ct.get(_t)===Qt&&Ct.delete(_t);return}if(isRedirectResult(nn)){Ct.delete(_t),Bt.add(_t);let Rn=_extends$3({state:"loading"},Jt,{data:void 0," _hasFetcherDoneAnything ":!0});return ut.fetchers.set(_t,Rn),Ut({fetchers:new Map(ut.fetchers)}),_n(ut,nn,{isFetchActionRedirect:!0})}if(isErrorResult(nn)){In(_t,Ft,nn.error);return}if(isDeferredResult(nn))throw getInternalRouterError(400,{type:"defer-action"});let an=ut.navigation.location||ut.location,yn=createClientSideRequest(j.history,an,Qt.signal),dn=ut.navigation.state!=="idle"?matchRoutes($,ut.navigation.location,j.basename):ut.matches;invariant(dn,"Didn't find any matches after fetcher action");let xn=++At;bt.set(_t,xn);let Tn=_extends$3({state:"loading",data:nn.data},Jt,{" _hasFetcherDoneAnything ":!0});ut.fetchers.set(_t,Tn);let[Bn,un]=getMatchesToLoad(j.history,ut,dn,Jt,an,pt,yt,vt,{[Gt.route.id]:nn.data},void 0,Rt);un.filter(Rn=>Rn.key!==_t).forEach(Rn=>{let tr=Rn.key,ir=ut.fetchers.get(tr),xr={state:"loading",data:ir&&ir.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};ut.fetchers.set(tr,xr),Ct.set(tr,Qt)}),Ut({fetchers:new Map(ut.fetchers)});let{results:Jn,loaderResults:mn,fetcherResults:wn}=await Wn(ut.matches,dn,Bn,un,yn);if(Qt.signal.aborted)return;bt.delete(_t),Ct.delete(_t),un.forEach(Rn=>Ct.delete(Rn.key));let Ln=findRedirect(Jn);if(Ln)return _n(ut,Ln);let{loaderData:Kn,errors:er}=processLoaderData(ut,ut.matches,Bn,mn,void 0,un,wn,St),vr={state:"idle",data:nn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};ut.fetchers.set(_t,vr);let rr=Gn(xn);ut.navigation.state==="loading"&&xn>$t?(invariant(ct,"Expected pending action"),dt&&dt.abort(),It(ut.navigation.location,{matches:dn,loaderData:Kn,errors:er,fetchers:new Map(ut.fetchers)})):(Ut(_extends$3({errors:er,loaderData:mergeLoaderData(ut.loaderData,Kn,dn,er)},rr?{fetchers:new Map(ut.fetchers)}:{})),pt=!1)}async function An(_t,Ft,Ht,Gt,Wt,Jt){let Zt=ut.fetchers.get(_t),tn=_extends$3({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Jt,{data:Zt&&Zt.data," _hasFetcherDoneAnything ":!0});ut.fetchers.set(_t,tn),Ut({fetchers:new Map(ut.fetchers)});let Qt=new AbortController,fn=createClientSideRequest(j.history,Ht,Qt.signal);Ct.set(_t,Qt);let nn=await callLoaderOrAction("loader",fn,Gt,Wt,lt.basename);if(isDeferredResult(nn)&&(nn=await resolveDeferredData(nn,fn.signal,!0)||nn),Ct.get(_t)===Qt&&Ct.delete(_t),fn.signal.aborted)return;if(isRedirectResult(nn)){await _n(ut,nn);return}if(isErrorResult(nn)){let yn=findNearestBoundary(ut.matches,Ft);ut.fetchers.delete(_t),Ut({fetchers:new Map(ut.fetchers),errors:{[yn.route.id]:nn.error}});return}invariant(!isDeferredResult(nn),"Unhandled fetcher deferred data");let an={state:"idle",data:nn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};ut.fetchers.set(_t,an),Ut({fetchers:new Map(ut.fetchers)})}async function _n(_t,Ft,Ht){var Gt;let{submission:Wt,replace:Jt,isFetchActionRedirect:Zt}=Ht===void 0?{}:Ht;Ft.revalidate&&(pt=!0);let tn=createLocation(_t.location,Ft.location,_extends$3({_isRedirect:!0},Zt?{_isFetchActionRedirect:!0}:{}));if(invariant(tn,"Expected a location on the redirect navigation"),isBrowser$1&&typeof((Gt=window)==null?void 0:Gt.location)<"u"){let dn=j.history.createURL(Ft.location).origin;if(window.location.origin!==dn){Jt?window.location.replace(Ft.location):window.location.assign(Ft.location);return}}dt=null;let Qt=Jt===!0?Action.Replace:Action.Push,{formMethod:fn,formAction:nn,formEncType:an,formData:yn}=_t.navigation;!Wt&&fn&&nn&&yn&&an&&(Wt={formMethod:fn,formAction:nn,formEncType:an,formData:yn}),redirectPreserveMethodStatusCodes.has(Ft.status)&&Wt&&isMutationMethod(Wt.formMethod)?await Yt(Qt,tn,{submission:_extends$3({},Wt,{formAction:Ft.location}),preventScrollReset:ft}):await Yt(Qt,tn,{overrideNavigation:{state:"loading",location:tn,formMethod:Wt?Wt.formMethod:void 0,formAction:Wt?Wt.formAction:void 0,formEncType:Wt?Wt.formEncType:void 0,formData:Wt?Wt.formData:void 0},preventScrollReset:ft})}async function Wn(_t,Ft,Ht,Gt,Wt){let Jt=await Promise.all([...Ht.map(Qt=>callLoaderOrAction("loader",Wt,Qt,Ft,lt.basename)),...Gt.map(Qt=>callLoaderOrAction("loader",createClientSideRequest(j.history,Qt.path,Wt.signal),Qt.match,Qt.matches,lt.basename))]),Zt=Jt.slice(0,Ht.length),tn=Jt.slice(Ht.length);return await Promise.all([resolveDeferredResults(_t,Ht,Zt,Wt.signal,!1,ut.loaderData),resolveDeferredResults(_t,Gt.map(Qt=>Qt.match),tn,Wt.signal,!0)]),{results:Jt,loaderResults:Zt,fetcherResults:tn}}function Dn(){pt=!0,yt.push(...Sn()),Rt.forEach((_t,Ft)=>{Ct.has(Ft)&&(vt.push(Ft),Mn(Ft))})}function In(_t,Ft,Ht){let Gt=findNearestBoundary(ut.matches,Ft);Vn(_t),Ut({errors:{[Gt.route.id]:Ht},fetchers:new Map(ut.fetchers)})}function Vn(_t){Ct.has(_t)&&Mn(_t),Rt.delete(_t),bt.delete(_t),Bt.delete(_t),ut.fetchers.delete(_t)}function Mn(_t){let Ft=Ct.get(_t);invariant(Ft,"Expected fetch controller: "+_t),Ft.abort(),Ct.delete(_t)}function bn(_t){for(let Ft of _t){let Gt={state:"idle",data:on(Ft).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};ut.fetchers.set(Ft,Gt)}}function jn(){let _t=[];for(let Ft of Bt){let Ht=ut.fetchers.get(Ft);invariant(Ht,"Expected fetcher: "+Ft),Ht.state==="loading"&&(Bt.delete(Ft),_t.push(Ft))}bn(_t)}function Gn(_t){let Ft=[];for(let[Ht,Gt]of bt)if(Gt<_t){let Wt=ut.fetchers.get(Ht);invariant(Wt,"Expected fetcher: "+Ht),Wt.state==="loading"&&(Mn(Ht),bt.delete(Ht),Ft.push(Ht))}return bn(Ft),Ft.length>0}function Yn(_t,Ft){let Ht=ut.blockers.get(_t)||IDLE_BLOCKER;return Pt.get(_t)!==Ft&&(Pt.set(_t,Ft),kt==null?kt=_t:_t!==kt&&warning(!1,"A router only supports one blocker at a time")),Ht}function Fn(_t){ut.blockers.delete(_t),Pt.delete(_t),kt===_t&&(kt=null)}function On(_t,Ft){let Ht=ut.blockers.get(_t)||IDLE_BLOCKER;invariant(Ht.state==="unblocked"&&Ft.state==="blocked"||Ht.state==="blocked"&&Ft.state==="blocked"||Ht.state==="blocked"&&Ft.state==="proceeding"||Ht.state==="blocked"&&Ft.state==="unblocked"||Ht.state==="proceeding"&&Ft.state==="unblocked","Invalid blocker state transition: "+Ht.state+" -> "+Ft.state),ut.blockers.set(_t,Ft),Ut({blockers:new Map(ut.blockers)})}function kn(_t){let{currentLocation:Ft,nextLocation:Ht,historyAction:Gt}=_t;if(kt==null)return;let Wt=Pt.get(kt);invariant(Wt,"Could not find a function for the active blocker");let Jt=ut.blockers.get(kt);if(!(Jt&&Jt.state==="proceeding")&&Wt({currentLocation:Ft,nextLocation:Ht,historyAction:Gt}))return kt}function Sn(_t){let Ft=[];return St.forEach((Ht,Gt)=>{(!_t||_t(Gt))&&(Ht.cancel(),Ft.push(Gt),St.delete(Gt))}),Ft}function $n(_t,Ft,Ht){if(tt=_t,rt=Ft,nt=Ht||(Gt=>Gt.key),!it&&ut.navigation===IDLE_NAVIGATION){it=!0;let Gt=gn(ut.location,ut.matches);Gt!=null&&Ut({restoreScrollPosition:Gt})}return()=>{tt=null,rt=null,nt=null}}function Pn(_t,Ft){if(tt&&nt&&rt){let Ht=Ft.map(Wt=>createUseMatchesMatch(Wt,ut.loaderData)),Gt=nt(_t,Ht)||_t.key;tt[Gt]=rt()}}function gn(_t,Ft){if(tt&&nt&&rt){let Ht=Ft.map(Jt=>createUseMatchesMatch(Jt,ut.loaderData)),Gt=nt(_t,Ht)||_t.key,Wt=tt[Gt];if(typeof Wt=="number")return Wt}return null}return lt={get basename(){return j.basename},get state(){return ut},get routes(){return $},initialize:Lt,subscribe:Kt,enableScrollRestoration:$n,navigate:Vt,fetch:hn,revalidate:jt,createHref:_t=>j.history.createHref(_t),encodeLocation:_t=>j.history.encodeLocation(_t),getFetcher:on,deleteFetcher:Vn,dispose:zt,getBlocker:Yn,deleteBlocker:Fn,_internalFetchControllers:Ct,_internalActiveDeferreds:St},lt}function isSubmissionNavigation(j){return j!=null&&"formData"in j}function normalizeNavigateOptions(j,$,_e){_e===void 0&&(_e=!1);let et=typeof j=="string"?j:createPath(j);if(!$||!isSubmissionNavigation($))return{path:et};if($.formMethod&&!isValidMethod($.formMethod))return{path:et,error:getInternalRouterError(405,{method:$.formMethod})};let tt;if($.formData&&(tt={formMethod:$.formMethod||"get",formAction:stripHashFromPath(et),formEncType:$&&$.formEncType||"application/x-www-form-urlencoded",formData:$.formData},isMutationMethod(tt.formMethod)))return{path:et,submission:tt};let nt=parsePath(et),rt=convertFormDataToSearchParams($.formData);return _e&&nt.search&&hasNakedIndexQuery(nt.search)&&rt.append("index",""),nt.search="?"+rt,{path:createPath(nt),submission:tt}}function getLoaderMatchesUntilBoundary(j,$){let _e=j;if($){let et=j.findIndex(tt=>tt.route.id===$);et>=0&&(_e=j.slice(0,et))}return _e}function getMatchesToLoad(j,$,_e,et,tt,nt,rt,it,st,ot,at){let lt=ot?Object.values(ot)[0]:st?Object.values(st)[0]:void 0,ut=j.createURL($.location),ct=j.createURL(tt),ft=nt||ut.toString()===ct.toString()||ut.search!==ct.search,dt=ot?Object.keys(ot)[0]:void 0,pt=getLoaderMatchesUntilBoundary(_e,dt).filter((vt,Ct)=>{if(vt.route.loader==null)return!1;if(isNewLoader($.loaderData,$.matches[Ct],vt)||rt.some(bt=>bt===vt.route.id))return!0;let At=$.matches[Ct],$t=vt;return shouldRevalidateLoader(vt,_extends$3({currentUrl:ut,currentParams:At.params,nextUrl:ct,nextParams:$t.params},et,{actionResult:lt,defaultShouldRevalidate:ft||isNewRouteInstance(At,$t)}))}),yt=[];return at&&at.forEach((vt,Ct)=>{if(_e.some(At=>At.route.id===vt.routeId))it.includes(Ct)?yt.push(_extends$3({key:Ct},vt)):shouldRevalidateLoader(vt.match,_extends$3({currentUrl:ut,currentParams:$.matches[$.matches.length-1].params,nextUrl:ct,nextParams:_e[_e.length-1].params},et,{actionResult:lt,defaultShouldRevalidate:ft}))&&yt.push(_extends$3({key:Ct},vt));else return}),[pt,yt]}function isNewLoader(j,$,_e){let et=!$||_e.route.id!==$.route.id,tt=j[_e.route.id]===void 0;return et||tt}function isNewRouteInstance(j,$){let _e=j.route.path;return j.pathname!==$.pathname||_e!=null&&_e.endsWith("*")&&j.params["*"]!==$.params["*"]}function shouldRevalidateLoader(j,$){if(j.route.shouldRevalidate){let _e=j.route.shouldRevalidate($);if(typeof _e=="boolean")return _e}return $.defaultShouldRevalidate}async function callLoaderOrAction(j,$,_e,et,tt,nt,rt,it){tt===void 0&&(tt="/"),nt===void 0&&(nt=!1),rt===void 0&&(rt=!1);let st,ot,at,lt=new Promise((ct,ft)=>at=ft),ut=()=>at();$.signal.addEventListener("abort",ut);try{let ct=_e.route[j];invariant(ct,"Could not find the "+j+' to run on the "'+_e.route.id+'" route'),ot=await Promise.race([ct({request:$,params:_e.params,context:it}),lt]),invariant(ot!==void 0,"You defined "+(j==="action"?"an action":"a loader")+" for route "+('"'+_e.route.id+"\" but didn't return anything from your `"+j+"` ")+"function. Please return a value or `null`.")}catch(ct){st=ResultType.error,ot=ct}finally{$.signal.removeEventListener("abort",ut)}if(isResponse(ot)){let ct=ot.status;if(redirectStatusCodes.has(ct)){let mt=ot.headers.get("Location");if(invariant(mt,"Redirects returned/thrown from loaders/actions must have a Location header"),/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(mt)){if(!nt){let yt=new URL($.url),vt=mt.startsWith("//")?new URL(yt.protocol+mt):new URL(mt);vt.origin===yt.origin&&(mt=vt.pathname+vt.search+vt.hash)}}else{let yt=et.slice(0,et.indexOf(_e)+1),vt=getPathContributingMatches(yt).map(At=>At.pathnameBase),Ct=resolveTo(mt,vt,new URL($.url).pathname);if(invariant(createPath(Ct),"Unable to resolve redirect location: "+mt),tt){let At=Ct.pathname;Ct.pathname=At==="/"?tt:joinPaths([tt,At])}mt=createPath(Ct)}if(nt)throw ot.headers.set("Location",mt),ot;return{type:ResultType.redirect,status:ct,location:mt,revalidate:ot.headers.get("X-Remix-Revalidate")!==null}}if(rt)throw{type:st||ResultType.data,response:ot};let ft,dt=ot.headers.get("Content-Type");return dt&&/\bapplication\/json\b/.test(dt)?ft=await ot.json():ft=await ot.text(),st===ResultType.error?{type:st,error:new ErrorResponse(ct,ot.statusText,ft),headers:ot.headers}:{type:ResultType.data,data:ft,statusCode:ot.status,headers:ot.headers}}return st===ResultType.error?{type:st,error:ot}:ot instanceof DeferredData?{type:ResultType.deferred,deferredData:ot}:{type:ResultType.data,data:ot}}function createClientSideRequest(j,$,_e,et){let tt=j.createURL(stripHashFromPath($)).toString(),nt={signal:_e};if(et&&isMutationMethod(et.formMethod)){let{formMethod:rt,formEncType:it,formData:st}=et;nt.method=rt.toUpperCase(),nt.body=it==="application/x-www-form-urlencoded"?convertFormDataToSearchParams(st):st}return new Request(tt,nt)}function convertFormDataToSearchParams(j){let $=new URLSearchParams;for(let[_e,et]of j.entries())$.append(_e,et instanceof File?et.name:et);return $}function processRouteLoaderData(j,$,_e,et,tt){let nt={},rt=null,it,st=!1,ot={};return _e.forEach((at,lt)=>{let ut=$[lt].route.id;if(invariant(!isRedirectResult(at),"Cannot handle redirect results in processLoaderData"),isErrorResult(at)){let ct=findNearestBoundary(j,ut),ft=at.error;et&&(ft=Object.values(et)[0],et=void 0),rt=rt||{},rt[ct.route.id]==null&&(rt[ct.route.id]=ft),nt[ut]=void 0,st||(st=!0,it=isRouteErrorResponse(at.error)?at.error.status:500),at.headers&&(ot[ut]=at.headers)}else isDeferredResult(at)?(tt.set(ut,at.deferredData),nt[ut]=at.deferredData.data):nt[ut]=at.data,at.statusCode!=null&&at.statusCode!==200&&!st&&(it=at.statusCode),at.headers&&(ot[ut]=at.headers)}),et&&(rt=et,nt[Object.keys(et)[0]]=void 0),{loaderData:nt,errors:rt,statusCode:it||200,loaderHeaders:ot}}function processLoaderData(j,$,_e,et,tt,nt,rt,it){let{loaderData:st,errors:ot}=processRouteLoaderData($,_e,et,tt,it);for(let at=0;at<nt.length;at++){let{key:lt,match:ut}=nt[at];invariant(rt!==void 0&&rt[at]!==void 0,"Did not find corresponding fetcher result");let ct=rt[at];if(isErrorResult(ct)){let ft=findNearestBoundary(j.matches,ut.route.id);ot&&ot[ft.route.id]||(ot=_extends$3({},ot,{[ft.route.id]:ct.error})),j.fetchers.delete(lt)}else if(isRedirectResult(ct))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(ct))invariant(!1,"Unhandled fetcher deferred data");else{let ft={state:"idle",data:ct.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};j.fetchers.set(lt,ft)}}return{loaderData:st,errors:ot}}function mergeLoaderData(j,$,_e,et){let tt=_extends$3({},$);for(let nt of _e){let rt=nt.route.id;if($.hasOwnProperty(rt)?$[rt]!==void 0&&(tt[rt]=$[rt]):j[rt]!==void 0&&(tt[rt]=j[rt]),et&&et.hasOwnProperty(rt))break}return tt}function findNearestBoundary(j,$){return($?j.slice(0,j.findIndex(et=>et.route.id===$)+1):[...j]).reverse().find(et=>et.route.hasErrorBoundary===!0)||j[0]}function getShortCircuitMatches(j){let $=j.find(_e=>_e.index||!_e.path||_e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:$}],route:$}}function getInternalRouterError(j,$){let{pathname:_e,routeId:et,method:tt,type:nt}=$===void 0?{}:$,rt="Unknown Server Error",it="Unknown @remix-run/router error";return j===400?(rt="Bad Request",tt&&_e&&et?it="You made a "+tt+' request to "'+_e+'" but '+('did not provide a `loader` for route "'+et+'", ')+"so there is no way to handle the request.":nt==="defer-action"&&(it="defer() is not supported in actions")):j===403?(rt="Forbidden",it='Route "'+et+'" does not match URL "'+_e+'"'):j===404?(rt="Not Found",it='No route matches URL "'+_e+'"'):j===405&&(rt="Method Not Allowed",tt&&_e&&et?it="You made a "+tt.toUpperCase()+' request to "'+_e+'" but '+('did not provide an `action` for route "'+et+'", ')+"so there is no way to handle the request.":tt&&(it='Invalid request method "'+tt.toUpperCase()+'"')),new ErrorResponse(j||500,rt,new Error(it),!0)}function findRedirect(j){for(let $=j.length-1;$>=0;$--){let _e=j[$];if(isRedirectResult(_e))return _e}}function stripHashFromPath(j){let $=typeof j=="string"?parsePath(j):j;return createPath(_extends$3({},$,{hash:""}))}function isHashChangeOnly(j,$){return j.pathname===$.pathname&&j.search===$.search&&j.hash!==$.hash}function isDeferredResult(j){return j.type===ResultType.deferred}function isErrorResult(j){return j.type===ResultType.error}function isRedirectResult(j){return(j&&j.type)===ResultType.redirect}function isResponse(j){return j!=null&&typeof j.status=="number"&&typeof j.statusText=="string"&&typeof j.headers=="object"&&typeof j.body<"u"}function isValidMethod(j){return validRequestMethods.has(j)}function isMutationMethod(j){return validMutationMethods.has(j)}async function resolveDeferredResults(j,$,_e,et,tt,nt){for(let rt=0;rt<_e.length;rt++){let it=_e[rt],st=$[rt],ot=j.find(lt=>lt.route.id===st.route.id),at=ot!=null&&!isNewRouteInstance(ot,st)&&(nt&&nt[st.route.id])!==void 0;isDeferredResult(it)&&(tt||at)&&await resolveDeferredData(it,et,tt).then(lt=>{lt&&(_e[rt]=lt||_e[rt])})}}async function resolveDeferredData(j,$,_e){if(_e===void 0&&(_e=!1),!await j.deferredData.resolveData($)){if(_e)try{return{type:ResultType.data,data:j.deferredData.unwrappedData}}catch(tt){return{type:ResultType.error,error:tt}}return{type:ResultType.data,data:j.deferredData.data}}}function hasNakedIndexQuery(j){return new URLSearchParams(j).getAll("index").some($=>$==="")}function createUseMatchesMatch(j,$){let{route:_e,pathname:et,params:tt}=j;return{id:_e.id,pathname:et,params:tt,data:$[_e.id],handle:_e.handle}}function getTargetMatch(j,$){let _e=typeof $=="string"?parsePath($).search:$.search;if(j[j.length-1].route.index&&hasNakedIndexQuery(_e||""))return j[j.length-1];let et=getPathContributingMatches(j);return et[et.length-1]}/**
 * React Router v6.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(j){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(j[et]=_e[et])}return j},_extends$2.apply(this,arguments)}function isPolyfill(j,$){return j===$&&(j!==0||1/j===1/$)||j!==j&&$!==$}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$1;function useSyncExternalStore$2(j,$,_e){const et=$(),[{inst:tt},nt]=useState({inst:{value:et,getSnapshot:$}});return useLayoutEffect(()=>{tt.value=et,tt.getSnapshot=$,checkIfSnapshotChanged(tt)&&nt({inst:tt})},[j,et,$]),useEffect(()=>(checkIfSnapshotChanged(tt)&&nt({inst:tt}),j(()=>{checkIfSnapshotChanged(tt)&&nt({inst:tt})})),[j]),useDebugValue(et),et}function checkIfSnapshotChanged(j){const $=j.getSnapshot,_e=j.value;try{const et=$();return!is(_e,et)}catch{return!0}}function useSyncExternalStore$1(j,$,_e){return $()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2,useSyncExternalStore="useSyncExternalStore"in React$1?(j=>j.useSyncExternalStore)(React$1):shim,DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function useHref(j,$){let{relative:_e}=$===void 0?{}:$;useInRouterContext()||invariant(!1);let{basename:et,navigator:tt}=reactExports.useContext(NavigationContext),{hash:nt,pathname:rt,search:it}=useResolvedPath(j,{relative:_e}),st=rt;return et!=="/"&&(st=rt==="/"?et:joinPaths([et,rt])),tt.createHref({pathname:st,search:it,hash:nt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:j,navigator:$}=reactExports.useContext(NavigationContext),{matches:_e}=reactExports.useContext(RouteContext),{pathname:et}=useLocation(),tt=JSON.stringify(getPathContributingMatches(_e).map(it=>it.pathnameBase)),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{nt.current=!0}),reactExports.useCallback(function(it,st){if(st===void 0&&(st={}),!nt.current)return;if(typeof it=="number"){$.go(it);return}let ot=resolveTo(it,JSON.parse(tt),et,st.relative==="path");j!=="/"&&(ot.pathname=ot.pathname==="/"?j:joinPaths([j,ot.pathname])),(st.replace?$.replace:$.push)(ot,st.state,st)},[j,$,tt,et])}const OutletContext=reactExports.createContext(null);function useOutlet(j){let $=reactExports.useContext(RouteContext).outlet;return $&&reactExports.createElement(OutletContext.Provider,{value:j},$)}function useResolvedPath(j,$){let{relative:_e}=$===void 0?{}:$,{matches:et}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),nt=JSON.stringify(getPathContributingMatches(et).map(rt=>rt.pathnameBase));return reactExports.useMemo(()=>resolveTo(j,JSON.parse(nt),tt,_e==="path"),[j,nt,tt,_e])}function useRoutes(j,$){useInRouterContext()||invariant(!1);let{navigator:_e}=reactExports.useContext(NavigationContext),et=reactExports.useContext(DataRouterStateContext),{matches:tt}=reactExports.useContext(RouteContext),nt=tt[tt.length-1],rt=nt?nt.params:{};nt&&nt.pathname;let it=nt?nt.pathnameBase:"/";nt&&nt.route;let st=useLocation(),ot;if($){var at;let dt=typeof $=="string"?parsePath($):$;it==="/"||(at=dt.pathname)!=null&&at.startsWith(it)||invariant(!1),ot=dt}else ot=st;let lt=ot.pathname||"/",ut=it==="/"?lt:lt.slice(it.length)||"/",ct=matchRoutes(j,{pathname:ut}),ft=_renderMatches(ct&&ct.map(dt=>Object.assign({},dt,{params:Object.assign({},rt,dt.params),pathname:joinPaths([it,_e.encodeLocation?_e.encodeLocation(dt.pathname).pathname:dt.pathname]),pathnameBase:dt.pathnameBase==="/"?it:joinPaths([it,_e.encodeLocation?_e.encodeLocation(dt.pathnameBase).pathname:dt.pathnameBase])})),tt,et||void 0);return $&&ft?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},ot),navigationType:Action.Pop}},ft):ft}function DefaultErrorElement(){let j=useRouteError(),$=isRouteErrorResponse(j)?j.status+" "+j.statusText:j instanceof Error?j.message:JSON.stringify(j),_e=j instanceof Error?j.stack:null,tt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},nt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},$),_e?reactExports.createElement("pre",{style:tt},_e):null,nt)}class RenderErrorBoundary extends reactExports.Component{constructor($){super($),this.state={location:$.location,error:$.error}}static getDerivedStateFromError($){return{error:$}}static getDerivedStateFromProps($,_e){return _e.location!==$.location?{error:$.error,location:$.location}:{error:$.error||_e.error,location:_e.location}}componentDidCatch($,_e){console.error("React Router caught the following error during render",$,_e)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(j){let{routeContext:$,match:_e,children:et}=j,tt=reactExports.useContext(DataRouterContext);return tt&&tt.static&&tt.staticContext&&_e.route.errorElement&&(tt.staticContext._deepestRenderedBoundaryId=_e.route.id),reactExports.createElement(RouteContext.Provider,{value:$},et)}function _renderMatches(j,$,_e){if($===void 0&&($=[]),j==null)if(_e!=null&&_e.errors)j=_e.matches;else return null;let et=j,tt=_e==null?void 0:_e.errors;if(tt!=null){let nt=et.findIndex(rt=>rt.route.id&&(tt==null?void 0:tt[rt.route.id]));nt>=0||invariant(!1),et=et.slice(0,Math.min(et.length,nt+1))}return et.reduceRight((nt,rt,it)=>{let st=rt.route.id?tt==null?void 0:tt[rt.route.id]:null,ot=_e?rt.route.errorElement||reactExports.createElement(DefaultErrorElement,null):null,at=$.concat(et.slice(0,it+1)),lt=()=>reactExports.createElement(RenderedRoute,{match:rt,routeContext:{outlet:nt,matches:at}},st?ot:rt.route.element!==void 0?rt.route.element:nt);return _e&&(rt.route.errorElement||it===0)?reactExports.createElement(RenderErrorBoundary,{location:_e.location,component:ot,error:st,children:lt(),routeContext:{outlet:null,matches:at}}):lt()},null)}var DataRouterHook$1;(function(j){j.UseBlocker="useBlocker",j.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(j){j.UseLoaderData="useLoaderData",j.UseActionData="useActionData",j.UseRouteError="useRouteError",j.UseNavigation="useNavigation",j.UseRouteLoaderData="useRouteLoaderData",j.UseMatches="useMatches",j.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(j){let $=reactExports.useContext(DataRouterStateContext);return $||invariant(!1),$}function useRouteContext(j){let $=reactExports.useContext(RouteContext);return $||invariant(!1),$}function useCurrentRouteId(j){let $=useRouteContext(),_e=$.matches[$.matches.length-1];return _e.route.id||invariant(!1),_e.route.id}function useRouteError(){var j;let $=reactExports.useContext(RouteErrorContext),_e=useDataRouterState(DataRouterStateHook$1.UseRouteError),et=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return $||((j=_e.errors)==null?void 0:j[et])}function RouterProvider(j){let{fallbackElement:$,router:_e}=j,et=useSyncExternalStore(_e.subscribe,()=>_e.state,()=>_e.state),tt=reactExports.useMemo(()=>({createHref:_e.createHref,encodeLocation:_e.encodeLocation,go:rt=>_e.navigate(rt),push:(rt,it,st)=>_e.navigate(rt,{state:it,preventScrollReset:st==null?void 0:st.preventScrollReset}),replace:(rt,it,st)=>_e.navigate(rt,{replace:!0,state:it,preventScrollReset:st==null?void 0:st.preventScrollReset})}),[_e]),nt=_e.basename||"/";return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:{router:_e,navigator:tt,static:!1,basename:nt}},reactExports.createElement(DataRouterStateContext.Provider,{value:et},reactExports.createElement(Router,{basename:_e.basename,location:_e.state.location,navigationType:_e.state.historyAction,navigator:tt},_e.state.initialized?reactExports.createElement(Routes,null):$))),null)}function Outlet(j){return useOutlet(j.context)}function Route(j){invariant(!1)}function Router(j){let{basename:$="/",children:_e=null,location:et,navigationType:tt=Action.Pop,navigator:nt,static:rt=!1}=j;useInRouterContext()&&invariant(!1);let it=$.replace(/^\/*/,"/"),st=reactExports.useMemo(()=>({basename:it,navigator:nt,static:rt}),[it,nt,rt]);typeof et=="string"&&(et=parsePath(et));let{pathname:ot="/",search:at="",hash:lt="",state:ut=null,key:ct="default"}=et,ft=reactExports.useMemo(()=>{let dt=stripBasename(ot,it);return dt==null?null:{pathname:dt,search:at,hash:lt,state:ut,key:ct}},[it,ot,at,lt,ut,ct]);return ft==null?null:reactExports.createElement(NavigationContext.Provider,{value:st},reactExports.createElement(LocationContext.Provider,{children:_e,value:{location:ft,navigationType:tt}}))}function Routes(j){let{children:$,location:_e}=j,et=reactExports.useContext(DataRouterContext),tt=et&&!$?et.router.routes:createRoutesFromChildren($);return useRoutes(tt,_e)}var AwaitRenderStatus;(function(j){j[j.pending=0]="pending",j[j.success=1]="success",j[j.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(j,$){$===void 0&&($=[]);let _e=[];return reactExports.Children.forEach(j,(et,tt)=>{if(!reactExports.isValidElement(et))return;if(et.type===reactExports.Fragment){_e.push.apply(_e,createRoutesFromChildren(et.props.children,$));return}et.type!==Route&&invariant(!1),!et.props.index||!et.props.children||invariant(!1);let nt=[...$,tt],rt={id:et.props.id||nt.join("-"),caseSensitive:et.props.caseSensitive,element:et.props.element,index:et.props.index,path:et.props.path,loader:et.props.loader,action:et.props.action,errorElement:et.props.errorElement,hasErrorBoundary:et.props.errorElement!=null,shouldRevalidate:et.props.shouldRevalidate,handle:et.props.handle};et.props.children&&(rt.children=createRoutesFromChildren(et.props.children,nt)),_e.push(rt)}),_e}function enhanceManualRouteObjects(j){return j.map($=>{let _e=_extends$2({},$);return _e.hasErrorBoundary==null&&(_e.hasErrorBoundary=_e.errorElement!=null),_e.children&&(_e.children=enhanceManualRouteObjects(_e.children)),_e})}/**
 * React Router DOM v6.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(j){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(j[et]=_e[et])}return j},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(j,$){if(j==null)return{};var _e={},et=Object.keys(j),tt,nt;for(nt=0;nt<et.length;nt++)tt=et[nt],!($.indexOf(tt)>=0)&&(_e[tt]=j[tt]);return _e}function isModifiedEvent(j){return!!(j.metaKey||j.altKey||j.ctrlKey||j.shiftKey)}function shouldProcessLinkClick(j,$){return j.button===0&&(!$||$==="_self")&&!isModifiedEvent(j)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_excluded2=["aria-current","caseSensitive","className","end","style","to","children"];function createHashRouter(j,$){return createRouter({basename:$==null?void 0:$.basename,history:createHashHistory({window:$==null?void 0:$.window}),hydrationData:($==null?void 0:$.hydrationData)||parseHydrationData(),routes:enhanceManualRouteObjects(j)}).initialize()}function parseHydrationData(){var j;let $=(j=window)==null?void 0:j.__staticRouterHydrationData;return $&&$.errors&&($=_extends$1({},$,{errors:deserializeErrors($.errors)})),$}function deserializeErrors(j){if(!j)return null;let $=Object.entries(j),_e={};for(let[et,tt]of $)if(tt&&tt.__type==="RouteErrorResponse")_e[et]=new ErrorResponse(tt.status,tt.statusText,tt.data,tt.internal===!0);else if(tt&&tt.__type==="Error"){let nt=new Error(tt.message);nt.stack="",_e[et]=nt}else _e[et]=tt;return _e}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Link=reactExports.forwardRef(function($,_e){let{onClick:et,relative:tt,reloadDocument:nt,replace:rt,state:it,target:st,to:ot,preventScrollReset:at}=$,lt=_objectWithoutPropertiesLoose$1($,_excluded$1),ut=typeof ot=="string"?ot:createPath(ot),ct=/^[a-z+]+:\/\//i.test(ut)||ut.startsWith("//"),ft=ut,dt=!1;if(isBrowser&&ct){let vt=new URL(window.location.href),Ct=ut.startsWith("//")?new URL(vt.protocol+ut):new URL(ut);Ct.origin===vt.origin?ft=Ct.pathname+Ct.search+Ct.hash:dt=!0}let mt=useHref(ft,{relative:tt}),pt=useLinkClickHandler(ft,{replace:rt,state:it,target:st,preventScrollReset:at,relative:tt});function yt(vt){et&&et(vt),vt.defaultPrevented||pt(vt)}return reactExports.createElement("a",_extends$1({},lt,{href:ct?ut:mt,onClick:dt||nt?et:yt,ref:_e,target:st}))}),NavLink=reactExports.forwardRef(function($,_e){let{"aria-current":et="page",caseSensitive:tt=!1,className:nt="",end:rt=!1,style:it,to:st,children:ot}=$,at=_objectWithoutPropertiesLoose$1($,_excluded2),lt=useResolvedPath(st,{relative:at.relative}),ut=useLocation(),ct=reactExports.useContext(DataRouterStateContext),{navigator:ft}=reactExports.useContext(NavigationContext),dt=ft.encodeLocation?ft.encodeLocation(lt).pathname:lt.pathname,mt=ut.pathname,pt=ct&&ct.navigation&&ct.navigation.location?ct.navigation.location.pathname:null;tt||(mt=mt.toLowerCase(),pt=pt?pt.toLowerCase():null,dt=dt.toLowerCase());let yt=mt===dt||!rt&&mt.startsWith(dt)&&mt.charAt(dt.length)==="/",vt=pt!=null&&(pt===dt||!rt&&pt.startsWith(dt)&&pt.charAt(dt.length)==="/"),Ct=yt?et:void 0,At;typeof nt=="function"?At=nt({isActive:yt,isPending:vt}):At=[nt,yt?"active":null,vt?"pending":null].filter(Boolean).join(" ");let $t=typeof it=="function"?it({isActive:yt,isPending:vt}):it;return reactExports.createElement(Link,_extends$1({},at,{"aria-current":Ct,className:At,ref:_e,style:$t,to:st}),typeof ot=="function"?ot({isActive:yt,isPending:vt}):ot)});var DataRouterHook;(function(j){j.UseScrollRestoration="useScrollRestoration",j.UseSubmitImpl="useSubmitImpl",j.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(j){j.UseFetchers="useFetchers",j.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(j,$){let{target:_e,replace:et,state:tt,preventScrollReset:nt,relative:rt}=$===void 0?{}:$,it=useNavigate(),st=useLocation(),ot=useResolvedPath(j,{relative:rt});return reactExports.useCallback(at=>{if(shouldProcessLinkClick(at,_e)){at.preventDefault();let lt=et!==void 0?et:createPath(st)===createPath(ot);it(j,{replace:lt,state:tt,preventScrollReset:nt,relative:rt})}},[st,it,ot,et,tt,_e,j,nt,rt])}const navLinkClass=({isActive:j,isPending:$})=>j?"active":$?"pending":"";function App(){return jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsxs("div",{className:"flex-row nav",children:[jsxRuntimeExports.jsx("div",{className:"nav-item title",children:jsxRuntimeExports.jsx("span",{children:"TOC-lang"})}),jsxRuntimeExports.jsx("div",{className:"nav-item right",children:jsxRuntimeExports.jsx(NavLink,{className:navLinkClass,to:"about",children:"About"})})]}),jsxRuntimeExports.jsx(Outlet,{})]})}const index$1="";function ErrorPage(){const j=useRouteError();return console.error(j),jsxRuntimeExports.jsxs("div",{id:"error-page",children:[jsxRuntimeExports.jsx("h1",{children:"Oops!"}),jsxRuntimeExports.jsx("p",{children:"Sorry, an unexpected error has occurred."}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("i",{children:j.statusText||j.message})})]})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(j){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(j[et]=_e[et])}return j},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(j,$){if(j==null)return{};var _e={},et=Object.keys(j),tt,nt;for(nt=0;nt<et.length;nt++)tt=et[nt],!($.indexOf(tt)>=0)&&(_e[tt]=j[tt]);return _e}class Text{lineAt($){if($<0||$>this.length)throw new RangeError(`Invalid position ${$} in document of length ${this.length}`);return this.lineInner($,!1,1,0)}line($){if($<1||$>this.lines)throw new RangeError(`Invalid line number ${$} in ${this.lines}-line document`);return this.lineInner($,!0,1,0)}replace($,_e,et){[$,_e]=clip(this,$,_e);let tt=[];return this.decompose(0,$,tt,2),et.length&&et.decompose(0,et.length,tt,3),this.decompose(_e,this.length,tt,1),TextNode$1.from(tt,this.length-(_e-$)+et.length)}append($){return this.replace(this.length,this.length,$)}slice($,_e=this.length){[$,_e]=clip(this,$,_e);let et=[];return this.decompose($,_e,et,0),TextNode$1.from(et,_e-$)}eq($){if($==this)return!0;if($.length!=this.length||$.lines!=this.lines)return!1;let _e=this.scanIdentical($,1),et=this.length-this.scanIdentical($,-1),tt=new RawTextCursor(this),nt=new RawTextCursor($);for(let rt=_e,it=_e;;){if(tt.next(rt),nt.next(rt),rt=0,tt.lineBreak!=nt.lineBreak||tt.done!=nt.done||tt.value!=nt.value)return!1;if(it+=tt.value.length,tt.done||it>=et)return!0}}iter($=1){return new RawTextCursor(this,$)}iterRange($,_e=this.length){return new PartialTextCursor(this,$,_e)}iterLines($,_e){let et;if($==null)et=this.iter();else{_e==null&&(_e=this.lines+1);let tt=this.line($).from;et=this.iterRange(tt,Math.max(tt,_e==this.lines+1?this.length:_e<=1?0:this.line(_e-1).to))}return new LineCursor(et)}toString(){return this.sliceString(0)}toJSON(){let $=[];return this.flatten($),$}constructor(){}static of($){if($.length==0)throw new RangeError("A document must have at least one line");return $.length==1&&!$[0]?Text.empty:$.length<=32?new TextLeaf($):TextNode$1.from(TextLeaf.split($,[]))}}class TextLeaf extends Text{constructor($,_e=textLength($)){super(),this.text=$,this.length=_e}get lines(){return this.text.length}get children(){return null}lineInner($,_e,et,tt){for(let nt=0;;nt++){let rt=this.text[nt],it=tt+rt.length;if((_e?et:it)>=$)return new Line(tt,it,et,rt);tt=it+1,et++}}decompose($,_e,et,tt){let nt=$<=0&&_e>=this.length?this:new TextLeaf(sliceText(this.text,$,_e),Math.min(_e,this.length)-Math.max(0,$));if(tt&1){let rt=et.pop(),it=appendText(nt.text,rt.text.slice(),0,nt.length);if(it.length<=32)et.push(new TextLeaf(it,rt.length+nt.length));else{let st=it.length>>1;et.push(new TextLeaf(it.slice(0,st)),new TextLeaf(it.slice(st)))}}else et.push(nt)}replace($,_e,et){if(!(et instanceof TextLeaf))return super.replace($,_e,et);[$,_e]=clip(this,$,_e);let tt=appendText(this.text,appendText(et.text,sliceText(this.text,0,$)),_e),nt=this.length+et.length-(_e-$);return tt.length<=32?new TextLeaf(tt,nt):TextNode$1.from(TextLeaf.split(tt,[]),nt)}sliceString($,_e=this.length,et=`
`){[$,_e]=clip(this,$,_e);let tt="";for(let nt=0,rt=0;nt<=_e&&rt<this.text.length;rt++){let it=this.text[rt],st=nt+it.length;nt>$&&rt&&(tt+=et),$<st&&_e>nt&&(tt+=it.slice(Math.max(0,$-nt),_e-nt)),nt=st+1}return tt}flatten($){for(let _e of this.text)$.push(_e)}scanIdentical(){return 0}static split($,_e){let et=[],tt=-1;for(let nt of $)et.push(nt),tt+=nt.length+1,et.length==32&&(_e.push(new TextLeaf(et,tt)),et=[],tt=-1);return tt>-1&&_e.push(new TextLeaf(et,tt)),_e}}let TextNode$1=class Zn extends Text{constructor($,_e){super(),this.children=$,this.length=_e,this.lines=0;for(let et of $)this.lines+=et.lines}lineInner($,_e,et,tt){for(let nt=0;;nt++){let rt=this.children[nt],it=tt+rt.length,st=et+rt.lines-1;if((_e?st:it)>=$)return rt.lineInner($,_e,et,tt);tt=it+1,et=st+1}}decompose($,_e,et,tt){for(let nt=0,rt=0;rt<=_e&&nt<this.children.length;nt++){let it=this.children[nt],st=rt+it.length;if($<=st&&_e>=rt){let ot=tt&((rt<=$?1:0)|(st>=_e?2:0));rt>=$&&st<=_e&&!ot?et.push(it):it.decompose($-rt,_e-rt,et,ot)}rt=st+1}}replace($,_e,et){if([$,_e]=clip(this,$,_e),et.lines<this.lines)for(let tt=0,nt=0;tt<this.children.length;tt++){let rt=this.children[tt],it=nt+rt.length;if($>=nt&&_e<=it){let st=rt.replace($-nt,_e-nt,et),ot=this.lines-rt.lines+st.lines;if(st.lines<ot>>5-1&&st.lines>ot>>5+1){let at=this.children.slice();return at[tt]=st,new Zn(at,this.length-(_e-$)+et.length)}return super.replace(nt,it,st)}nt=it+1}return super.replace($,_e,et)}sliceString($,_e=this.length,et=`
`){[$,_e]=clip(this,$,_e);let tt="";for(let nt=0,rt=0;nt<this.children.length&&rt<=_e;nt++){let it=this.children[nt],st=rt+it.length;rt>$&&nt&&(tt+=et),$<st&&_e>rt&&(tt+=it.sliceString($-rt,_e-rt,et)),rt=st+1}return tt}flatten($){for(let _e of this.children)_e.flatten($)}scanIdentical($,_e){if(!($ instanceof Zn))return 0;let et=0,[tt,nt,rt,it]=_e>0?[0,0,this.children.length,$.children.length]:[this.children.length-1,$.children.length-1,-1,-1];for(;;tt+=_e,nt+=_e){if(tt==rt||nt==it)return et;let st=this.children[tt],ot=$.children[nt];if(st!=ot)return et+st.scanIdentical(ot,_e);et+=st.length+1}}static from($,_e=$.reduce((et,tt)=>et+tt.length+1,-1)){let et=0;for(let ct of $)et+=ct.lines;if(et<32){let ct=[];for(let ft of $)ft.flatten(ct);return new TextLeaf(ct,_e)}let tt=Math.max(32,et>>5),nt=tt<<1,rt=tt>>1,it=[],st=0,ot=-1,at=[];function lt(ct){let ft;if(ct.lines>nt&&ct instanceof Zn)for(let dt of ct.children)lt(dt);else ct.lines>rt&&(st>rt||!st)?(ut(),it.push(ct)):ct instanceof TextLeaf&&st&&(ft=at[at.length-1])instanceof TextLeaf&&ct.lines+ft.lines<=32?(st+=ct.lines,ot+=ct.length+1,at[at.length-1]=new TextLeaf(ft.text.concat(ct.text),ft.length+1+ct.length)):(st+ct.lines>tt&&ut(),st+=ct.lines,ot+=ct.length+1,at.push(ct))}function ut(){st!=0&&(it.push(at.length==1?at[0]:Zn.from(at,ot)),ot=-1,st=at.length=0)}for(let ct of $)lt(ct);return ut(),it.length==1?it[0]:new Zn(it,_e)}};Text.empty=new TextLeaf([""],0);function textLength(j){let $=-1;for(let _e of j)$+=_e.length+1;return $}function appendText(j,$,_e=0,et=1e9){for(let tt=0,nt=0,rt=!0;nt<j.length&&tt<=et;nt++){let it=j[nt],st=tt+it.length;st>=_e&&(st>et&&(it=it.slice(0,et-tt)),tt<_e&&(it=it.slice(_e-tt)),rt?($[$.length-1]+=it,rt=!1):$.push(it)),tt=st+1}return $}function sliceText(j,$,_e){return appendText(j,[""],$,_e)}class RawTextCursor{constructor($,_e=1){this.dir=_e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[$],this.offsets=[_e>0?1:($ instanceof TextLeaf?$.text.length:$.children.length)<<1]}nextInner($,_e){for(this.done=this.lineBreak=!1;;){let et=this.nodes.length-1,tt=this.nodes[et],nt=this.offsets[et],rt=nt>>1,it=tt instanceof TextLeaf?tt.text.length:tt.children.length;if(rt==(_e>0?it:0)){if(et==0)return this.done=!0,this.value="",this;_e>0&&this.offsets[et-1]++,this.nodes.pop(),this.offsets.pop()}else if((nt&1)==(_e>0?0:1)){if(this.offsets[et]+=_e,$==0)return this.lineBreak=!0,this.value=`
`,this;$--}else if(tt instanceof TextLeaf){let st=tt.text[rt+(_e<0?-1:0)];if(this.offsets[et]+=_e,st.length>Math.max(0,$))return this.value=$==0?st:_e>0?st.slice($):st.slice(0,st.length-$),this;$-=st.length}else{let st=tt.children[rt+(_e<0?-1:0)];$>st.length?($-=st.length,this.offsets[et]+=_e):(_e<0&&this.offsets[et]--,this.nodes.push(st),this.offsets.push(_e>0?1:(st instanceof TextLeaf?st.text.length:st.children.length)<<1))}}}next($=0){return $<0&&(this.nextInner(-$,-this.dir),$=this.value.length),this.nextInner($,this.dir)}}class PartialTextCursor{constructor($,_e,et){this.value="",this.done=!1,this.cursor=new RawTextCursor($,_e>et?-1:1),this.pos=_e>et?$.length:0,this.from=Math.min(_e,et),this.to=Math.max(_e,et)}nextInner($,_e){if(_e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;$+=Math.max(0,_e<0?this.pos-this.to:this.from-this.pos);let et=_e<0?this.pos-this.from:this.to-this.pos;$>et&&($=et),et-=$;let{value:tt}=this.cursor.next($);return this.pos+=(tt.length+$)*_e,this.value=tt.length<=et?tt:_e<0?tt.slice(tt.length-et):tt.slice(0,et),this.done=!this.value,this}next($=0){return $<0?$=Math.max($,this.from-this.pos):$>0&&($=Math.min($,this.to-this.pos)),this.nextInner($,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor($){this.inner=$,this.afterBreak=!0,this.value="",this.done=!1}next($=0){let{done:_e,lineBreak:et,value:tt}=this.inner.next($);return _e&&this.afterBreak?(this.value="",this.afterBreak=!1):_e?(this.done=!0,this.value=""):et?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=tt,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor($,_e,et,tt){this.from=$,this.to=_e,this.number=et,this.text=tt}get length(){return this.to-this.from}}function clip(j,$,_e){return $=Math.max(0,Math.min(j.length,$)),[$,Math.max($,Math.min(j.length,_e))]}let extend$1="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(j=>j?parseInt(j,36):1);for(let j=1;j<extend$1.length;j++)extend$1[j]+=extend$1[j-1];function isExtendingChar(j){for(let $=1;$<extend$1.length;$+=2)if(extend$1[$]>j)return extend$1[$-1]<=j;return!1}function isRegionalIndicator(j){return j>=127462&&j<=127487}const ZWJ=8205;function findClusterBreak(j,$,_e=!0,et=!0){return(_e?nextClusterBreak:prevClusterBreak)(j,$,et)}function nextClusterBreak(j,$,_e){if($==j.length)return $;$&&surrogateLow(j.charCodeAt($))&&surrogateHigh(j.charCodeAt($-1))&&$--;let et=codePointAt(j,$);for($+=codePointSize(et);$<j.length;){let tt=codePointAt(j,$);if(et==ZWJ||tt==ZWJ||_e&&isExtendingChar(tt))$+=codePointSize(tt),et=tt;else if(isRegionalIndicator(tt)){let nt=0,rt=$-2;for(;rt>=0&&isRegionalIndicator(codePointAt(j,rt));)nt++,rt-=2;if(nt%2==0)break;$+=2}else break}return $}function prevClusterBreak(j,$,_e){for(;$>0;){let et=nextClusterBreak(j,$-2,_e);if(et<$)return et;$--}return 0}function surrogateLow(j){return j>=56320&&j<57344}function surrogateHigh(j){return j>=55296&&j<56320}function codePointAt(j,$){let _e=j.charCodeAt($);if(!surrogateHigh(_e)||$+1==j.length)return _e;let et=j.charCodeAt($+1);return surrogateLow(et)?(_e-55296<<10)+(et-56320)+65536:_e}function fromCodePoint(j){return j<=65535?String.fromCharCode(j):(j-=65536,String.fromCharCode((j>>10)+55296,(j&1023)+56320))}function codePointSize(j){return j<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(j){return j[j.Simple=0]="Simple",j[j.TrackDel=1]="TrackDel",j[j.TrackBefore=2]="TrackBefore",j[j.TrackAfter=3]="TrackAfter",j}(MapMode||(MapMode={}));class ChangeDesc{constructor($){this.sections=$}get length(){let $=0;for(let _e=0;_e<this.sections.length;_e+=2)$+=this.sections[_e];return $}get newLength(){let $=0;for(let _e=0;_e<this.sections.length;_e+=2){let et=this.sections[_e+1];$+=et<0?this.sections[_e]:et}return $}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps($){for(let _e=0,et=0,tt=0;_e<this.sections.length;){let nt=this.sections[_e++],rt=this.sections[_e++];rt<0?($(et,tt,nt),tt+=nt):tt+=rt,et+=nt}}iterChangedRanges($,_e=!1){iterChanges(this,$,_e)}get invertedDesc(){let $=[];for(let _e=0;_e<this.sections.length;){let et=this.sections[_e++],tt=this.sections[_e++];tt<0?$.push(et,tt):$.push(tt,et)}return new ChangeDesc($)}composeDesc($){return this.empty?$:$.empty?this:composeSets(this,$)}mapDesc($,_e=!1){return $.empty?this:mapSet(this,$,_e)}mapPos($,_e=-1,et=MapMode.Simple){let tt=0,nt=0;for(let rt=0;rt<this.sections.length;){let it=this.sections[rt++],st=this.sections[rt++],ot=tt+it;if(st<0){if(ot>$)return nt+($-tt);nt+=it}else{if(et!=MapMode.Simple&&ot>=$&&(et==MapMode.TrackDel&&tt<$&&ot>$||et==MapMode.TrackBefore&&tt<$||et==MapMode.TrackAfter&&ot>$))return null;if(ot>$||ot==$&&_e<0&&!it)return $==tt||_e<0?nt:nt+st;nt+=st}tt=ot}if($>tt)throw new RangeError(`Position ${$} is out of range for changeset of length ${tt}`);return nt}touchesRange($,_e=$){for(let et=0,tt=0;et<this.sections.length&&tt<=_e;){let nt=this.sections[et++],rt=this.sections[et++],it=tt+nt;if(rt>=0&&tt<=_e&&it>=$)return tt<$&&it>_e?"cover":!0;tt=it}return!1}toString(){let $="";for(let _e=0;_e<this.sections.length;){let et=this.sections[_e++],tt=this.sections[_e++];$+=($?" ":"")+et+(tt>=0?":"+tt:"")}return $}toJSON(){return this.sections}static fromJSON($){if(!Array.isArray($)||$.length%2||$.some(_e=>typeof _e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc($)}static create($){return new ChangeDesc($)}}class ChangeSet extends ChangeDesc{constructor($,_e){super($),this.inserted=_e}apply($){if(this.length!=$.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(_e,et,tt,nt,rt)=>$=$.replace(tt,tt+(et-_e),rt),!1),$}mapDesc($,_e=!1){return mapSet(this,$,_e,!0)}invert($){let _e=this.sections.slice(),et=[];for(let tt=0,nt=0;tt<_e.length;tt+=2){let rt=_e[tt],it=_e[tt+1];if(it>=0){_e[tt]=it,_e[tt+1]=rt;let st=tt>>1;for(;et.length<st;)et.push(Text.empty);et.push(rt?$.slice(nt,nt+rt):Text.empty)}nt+=rt}return new ChangeSet(_e,et)}compose($){return this.empty?$:$.empty?this:composeSets(this,$,!0)}map($,_e=!1){return $.empty?this:mapSet(this,$,_e,!0)}iterChanges($,_e=!1){iterChanges(this,$,_e)}get desc(){return ChangeDesc.create(this.sections)}filter($){let _e=[],et=[],tt=[],nt=new SectionIter(this);e:for(let rt=0,it=0;;){let st=rt==$.length?1e9:$[rt++];for(;it<st||it==st&&nt.len==0;){if(nt.done)break e;let at=Math.min(nt.len,st-it);addSection(tt,at,-1);let lt=nt.ins==-1?-1:nt.off==0?nt.ins:0;addSection(_e,at,lt),lt>0&&addInsert(et,_e,nt.text),nt.forward(at),it+=at}let ot=$[rt++];for(;it<ot;){if(nt.done)break e;let at=Math.min(nt.len,ot-it);addSection(_e,at,-1),addSection(tt,at,nt.ins==-1?-1:nt.off==0?nt.ins:0),nt.forward(at),it+=at}}return{changes:new ChangeSet(_e,et),filtered:ChangeDesc.create(tt)}}toJSON(){let $=[];for(let _e=0;_e<this.sections.length;_e+=2){let et=this.sections[_e],tt=this.sections[_e+1];tt<0?$.push(et):tt==0?$.push([et]):$.push([et].concat(this.inserted[_e>>1].toJSON()))}return $}static of($,_e,et){let tt=[],nt=[],rt=0,it=null;function st(at=!1){if(!at&&!tt.length)return;rt<_e&&addSection(tt,_e-rt,-1);let lt=new ChangeSet(tt,nt);it=it?it.compose(lt.map(it)):lt,tt=[],nt=[],rt=0}function ot(at){if(Array.isArray(at))for(let lt of at)ot(lt);else if(at instanceof ChangeSet){if(at.length!=_e)throw new RangeError(`Mismatched change set length (got ${at.length}, expected ${_e})`);st(),it=it?it.compose(at.map(it)):at}else{let{from:lt,to:ut=lt,insert:ct}=at;if(lt>ut||lt<0||ut>_e)throw new RangeError(`Invalid change range ${lt} to ${ut} (in doc of length ${_e})`);let ft=ct?typeof ct=="string"?Text.of(ct.split(et||DefaultSplit)):ct:Text.empty,dt=ft.length;if(lt==ut&&dt==0)return;lt<rt&&st(),lt>rt&&addSection(tt,lt-rt,-1),addSection(tt,ut-lt,dt),addInsert(nt,tt,ft),rt=ut}}return ot($),st(!it),it}static empty($){return new ChangeSet($?[$,-1]:[],[])}static fromJSON($){if(!Array.isArray($))throw new RangeError("Invalid JSON representation of ChangeSet");let _e=[],et=[];for(let tt=0;tt<$.length;tt++){let nt=$[tt];if(typeof nt=="number")_e.push(nt,-1);else{if(!Array.isArray(nt)||typeof nt[0]!="number"||nt.some((rt,it)=>it&&typeof rt!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(nt.length==1)_e.push(nt[0],0);else{for(;et.length<tt;)et.push(Text.empty);et[tt]=Text.of(nt.slice(1)),_e.push(nt[0],et[tt].length)}}}return new ChangeSet(_e,et)}static createSet($,_e){return new ChangeSet($,_e)}}function addSection(j,$,_e,et=!1){if($==0&&_e<=0)return;let tt=j.length-2;tt>=0&&_e<=0&&_e==j[tt+1]?j[tt]+=$:$==0&&j[tt]==0?j[tt+1]+=_e:et?(j[tt]+=$,j[tt+1]+=_e):j.push($,_e)}function addInsert(j,$,_e){if(_e.length==0)return;let et=$.length-2>>1;if(et<j.length)j[j.length-1]=j[j.length-1].append(_e);else{for(;j.length<et;)j.push(Text.empty);j.push(_e)}}function iterChanges(j,$,_e){let et=j.inserted;for(let tt=0,nt=0,rt=0;rt<j.sections.length;){let it=j.sections[rt++],st=j.sections[rt++];if(st<0)tt+=it,nt+=it;else{let ot=tt,at=nt,lt=Text.empty;for(;ot+=it,at+=st,st&&et&&(lt=lt.append(et[rt-2>>1])),!(_e||rt==j.sections.length||j.sections[rt+1]<0);)it=j.sections[rt++],st=j.sections[rt++];$(tt,ot,nt,at,lt),tt=ot,nt=at}}}function mapSet(j,$,_e,et=!1){let tt=[],nt=et?[]:null,rt=new SectionIter(j),it=new SectionIter($);for(let st=-1;;)if(rt.ins==-1&&it.ins==-1){let ot=Math.min(rt.len,it.len);addSection(tt,ot,-1),rt.forward(ot),it.forward(ot)}else if(it.ins>=0&&(rt.ins<0||st==rt.i||rt.off==0&&(it.len<rt.len||it.len==rt.len&&!_e))){let ot=it.len;for(addSection(tt,it.ins,-1);ot;){let at=Math.min(rt.len,ot);rt.ins>=0&&st<rt.i&&rt.len<=at&&(addSection(tt,0,rt.ins),nt&&addInsert(nt,tt,rt.text),st=rt.i),rt.forward(at),ot-=at}it.next()}else if(rt.ins>=0){let ot=0,at=rt.len;for(;at;)if(it.ins==-1){let lt=Math.min(at,it.len);ot+=lt,at-=lt,it.forward(lt)}else if(it.ins==0&&it.len<at)at-=it.len,it.next();else break;addSection(tt,ot,st<rt.i?rt.ins:0),nt&&st<rt.i&&addInsert(nt,tt,rt.text),st=rt.i,rt.forward(rt.len-at)}else{if(rt.done&&it.done)return nt?ChangeSet.createSet(tt,nt):ChangeDesc.create(tt);throw new Error("Mismatched change set lengths")}}function composeSets(j,$,_e=!1){let et=[],tt=_e?[]:null,nt=new SectionIter(j),rt=new SectionIter($);for(let it=!1;;){if(nt.done&&rt.done)return tt?ChangeSet.createSet(et,tt):ChangeDesc.create(et);if(nt.ins==0)addSection(et,nt.len,0,it),nt.next();else if(rt.len==0&&!rt.done)addSection(et,0,rt.ins,it),tt&&addInsert(tt,et,rt.text),rt.next();else{if(nt.done||rt.done)throw new Error("Mismatched change set lengths");{let st=Math.min(nt.len2,rt.len),ot=et.length;if(nt.ins==-1){let at=rt.ins==-1?-1:rt.off?0:rt.ins;addSection(et,st,at,it),tt&&at&&addInsert(tt,et,rt.text)}else rt.ins==-1?(addSection(et,nt.off?0:nt.len,st,it),tt&&addInsert(tt,et,nt.textBit(st))):(addSection(et,nt.off?0:nt.len,rt.off?0:rt.ins,it),tt&&!rt.off&&addInsert(tt,et,rt.text));it=(nt.ins>st||rt.ins>=0&&rt.len>st)&&(it||et.length>ot),nt.forward2(st),rt.forward(st)}}}}class SectionIter{constructor($){this.set=$,this.i=0,this.next()}next(){let{sections:$}=this.set;this.i<$.length?(this.len=$[this.i++],this.ins=$[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:$}=this.set,_e=this.i-2>>1;return _e>=$.length?Text.empty:$[_e]}textBit($){let{inserted:_e}=this.set,et=this.i-2>>1;return et>=_e.length&&!$?Text.empty:_e[et].slice(this.off,$==null?void 0:this.off+$)}forward($){$==this.len?this.next():(this.len-=$,this.off+=$)}forward2($){this.ins==-1?this.forward($):$==this.ins?this.next():(this.ins-=$,this.off+=$)}}class SelectionRange{constructor($,_e,et){this.from=$,this.to=_e,this.flags=et}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let $=this.flags&7;return $==7?null:$}get goalColumn(){let $=this.flags>>6;return $==16777215?void 0:$}map($,_e=-1){let et,tt;return this.empty?et=tt=$.mapPos(this.from,_e):(et=$.mapPos(this.from,1),tt=$.mapPos(this.to,-1)),et==this.from&&tt==this.to?this:new SelectionRange(et,tt,this.flags)}extend($,_e=$){if($<=this.anchor&&_e>=this.anchor)return EditorSelection.range($,_e);let et=Math.abs($-this.anchor)>Math.abs(_e-this.anchor)?$:_e;return EditorSelection.range(this.anchor,et)}eq($,_e=!1){return this.anchor==$.anchor&&this.head==$.head&&(!_e||!this.empty||this.assoc==$.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON($){if(!$||typeof $.anchor!="number"||typeof $.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range($.anchor,$.head)}static create($,_e,et){return new SelectionRange($,_e,et)}}class EditorSelection{constructor($,_e){this.ranges=$,this.mainIndex=_e}map($,_e=-1){return $.empty?this:EditorSelection.create(this.ranges.map(et=>et.map($,_e)),this.mainIndex)}eq($,_e=!1){if(this.ranges.length!=$.ranges.length||this.mainIndex!=$.mainIndex)return!1;for(let et=0;et<this.ranges.length;et++)if(!this.ranges[et].eq($.ranges[et],_e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange($,_e=!0){return EditorSelection.create([$].concat(this.ranges),_e?0:this.mainIndex+1)}replaceRange($,_e=this.mainIndex){let et=this.ranges.slice();return et[_e]=$,EditorSelection.create(et,this.mainIndex)}toJSON(){return{ranges:this.ranges.map($=>$.toJSON()),main:this.mainIndex}}static fromJSON($){if(!$||!Array.isArray($.ranges)||typeof $.main!="number"||$.main>=$.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection($.ranges.map(_e=>SelectionRange.fromJSON(_e)),$.main)}static single($,_e=$){return new EditorSelection([EditorSelection.range($,_e)],0)}static create($,_e=0){if($.length==0)throw new RangeError("A selection needs at least one range");for(let et=0,tt=0;tt<$.length;tt++){let nt=$[tt];if(nt.empty?nt.from<=et:nt.from<et)return EditorSelection.normalized($.slice(),_e);et=nt.to}return new EditorSelection($,_e)}static cursor($,_e=0,et,tt){return SelectionRange.create($,$,(_e==0?0:_e<0?8:16)|(et==null?7:Math.min(6,et))|(tt??16777215)<<6)}static range($,_e,et,tt){let nt=(et??16777215)<<6|(tt==null?7:Math.min(6,tt));return _e<$?SelectionRange.create(_e,$,48|nt):SelectionRange.create($,_e,(_e>$?8:0)|nt)}static normalized($,_e=0){let et=$[_e];$.sort((tt,nt)=>tt.from-nt.from),_e=$.indexOf(et);for(let tt=1;tt<$.length;tt++){let nt=$[tt],rt=$[tt-1];if(nt.empty?nt.from<=rt.to:nt.from<rt.to){let it=rt.from,st=Math.max(nt.to,rt.to);tt<=_e&&_e--,$.splice(--tt,2,nt.anchor>nt.head?EditorSelection.range(st,it):EditorSelection.range(it,st))}}return new EditorSelection($,_e)}}function checkSelection(j,$){for(let _e of j.ranges)if(_e.to>$)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor($,_e,et,tt,nt){this.combine=$,this.compareInput=_e,this.compare=et,this.isStatic=tt,this.id=nextID++,this.default=$([]),this.extensions=typeof nt=="function"?nt(this):nt}get reader(){return this}static define($={}){return new Facet($.combine||(_e=>_e),$.compareInput||((_e,et)=>_e===et),$.compare||($.combine?(_e,et)=>_e===et:sameArray$1),!!$.static,$.enables)}of($){return new FacetProvider([],this,0,$)}compute($,_e){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider($,this,1,_e)}computeN($,_e){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider($,this,2,_e)}from($,_e){return _e||(_e=et=>et),this.compute([$],et=>_e(et.field($)))}}function sameArray$1(j,$){return j==$||j.length==$.length&&j.every((_e,et)=>_e===$[et])}class FacetProvider{constructor($,_e,et,tt){this.dependencies=$,this.facet=_e,this.type=et,this.value=tt,this.id=nextID++}dynamicSlot($){var _e;let et=this.value,tt=this.facet.compareInput,nt=this.id,rt=$[nt]>>1,it=this.type==2,st=!1,ot=!1,at=[];for(let lt of this.dependencies)lt=="doc"?st=!0:lt=="selection"?ot=!0:((_e=$[lt.id])!==null&&_e!==void 0?_e:1)&1||at.push($[lt.id]);return{create(lt){return lt.values[rt]=et(lt),1},update(lt,ut){if(st&&ut.docChanged||ot&&(ut.docChanged||ut.selection)||ensureAll(lt,at)){let ct=et(lt);if(it?!compareArray(ct,lt.values[rt],tt):!tt(ct,lt.values[rt]))return lt.values[rt]=ct,1}return 0},reconfigure:(lt,ut)=>{let ct,ft=ut.config.address[nt];if(ft!=null){let dt=getAddr(ut,ft);if(this.dependencies.every(mt=>mt instanceof Facet?ut.facet(mt)===lt.facet(mt):mt instanceof StateField?ut.field(mt,!1)==lt.field(mt,!1):!0)||(it?compareArray(ct=et(lt),dt,tt):tt(ct=et(lt),dt)))return lt.values[rt]=dt,0}else ct=et(lt);return lt.values[rt]=ct,1}}}}function compareArray(j,$,_e){if(j.length!=$.length)return!1;for(let et=0;et<j.length;et++)if(!_e(j[et],$[et]))return!1;return!0}function ensureAll(j,$){let _e=!1;for(let et of $)ensureAddr(j,et)&1&&(_e=!0);return _e}function dynamicFacetSlot(j,$,_e){let et=_e.map(st=>j[st.id]),tt=_e.map(st=>st.type),nt=et.filter(st=>!(st&1)),rt=j[$.id]>>1;function it(st){let ot=[];for(let at=0;at<et.length;at++){let lt=getAddr(st,et[at]);if(tt[at]==2)for(let ut of lt)ot.push(ut);else ot.push(lt)}return $.combine(ot)}return{create(st){for(let ot of et)ensureAddr(st,ot);return st.values[rt]=it(st),1},update(st,ot){if(!ensureAll(st,nt))return 0;let at=it(st);return $.compare(at,st.values[rt])?0:(st.values[rt]=at,1)},reconfigure(st,ot){let at=ensureAll(st,et),lt=ot.config.facets[$.id],ut=ot.facet($);if(lt&&!at&&sameArray$1(_e,lt))return st.values[rt]=ut,0;let ct=it(st);return $.compare(ct,ut)?(st.values[rt]=ut,0):(st.values[rt]=ct,1)}}}const initField=Facet.define({static:!0});class StateField{constructor($,_e,et,tt,nt){this.id=$,this.createF=_e,this.updateF=et,this.compareF=tt,this.spec=nt,this.provides=void 0}static define($){let _e=new StateField(nextID++,$.create,$.update,$.compare||((et,tt)=>et===tt),$);return $.provide&&(_e.provides=$.provide(_e)),_e}create($){let _e=$.facet(initField).find(et=>et.field==this);return((_e==null?void 0:_e.create)||this.createF)($)}slot($){let _e=$[this.id]>>1;return{create:et=>(et.values[_e]=this.create(et),1),update:(et,tt)=>{let nt=et.values[_e],rt=this.updateF(nt,tt);return this.compareF(nt,rt)?0:(et.values[_e]=rt,1)},reconfigure:(et,tt)=>tt.config.address[this.id]!=null?(et.values[_e]=tt.field(this),0):(et.values[_e]=this.create(et),1)}}init($){return[this,initField.of({field:this,create:$})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(j){return $=>new PrecExtension($,j)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor($,_e){this.inner=$,this.prec=_e}}class Compartment{of($){return new CompartmentInstance(this,$)}reconfigure($){return Compartment.reconfigure.of({compartment:this,extension:$})}get($){return $.config.compartments.get(this)}}class CompartmentInstance{constructor($,_e){this.compartment=$,this.inner=_e}}class Configuration{constructor($,_e,et,tt,nt,rt){for(this.base=$,this.compartments=_e,this.dynamicSlots=et,this.address=tt,this.staticValues=nt,this.facets=rt,this.statusTemplate=[];this.statusTemplate.length<et.length;)this.statusTemplate.push(0)}staticFacet($){let _e=this.address[$.id];return _e==null?$.default:this.staticValues[_e>>1]}static resolve($,_e,et){let tt=[],nt=Object.create(null),rt=new Map;for(let ut of flatten$1($,_e,rt))ut instanceof StateField?tt.push(ut):(nt[ut.facet.id]||(nt[ut.facet.id]=[])).push(ut);let it=Object.create(null),st=[],ot=[];for(let ut of tt)it[ut.id]=ot.length<<1,ot.push(ct=>ut.slot(ct));let at=et==null?void 0:et.config.facets;for(let ut in nt){let ct=nt[ut],ft=ct[0].facet,dt=at&&at[ut]||[];if(ct.every(mt=>mt.type==0))if(it[ft.id]=st.length<<1|1,sameArray$1(dt,ct))st.push(et.facet(ft));else{let mt=ft.combine(ct.map(pt=>pt.value));st.push(et&&ft.compare(mt,et.facet(ft))?et.facet(ft):mt)}else{for(let mt of ct)mt.type==0?(it[mt.id]=st.length<<1|1,st.push(mt.value)):(it[mt.id]=ot.length<<1,ot.push(pt=>mt.dynamicSlot(pt)));it[ft.id]=ot.length<<1,ot.push(mt=>dynamicFacetSlot(mt,ft,ct))}}let lt=ot.map(ut=>ut(it));return new Configuration($,rt,lt,it,st,nt)}}function flatten$1(j,$,_e){let et=[[],[],[],[],[]],tt=new Map;function nt(rt,it){let st=tt.get(rt);if(st!=null){if(st<=it)return;let ot=et[st].indexOf(rt);ot>-1&&et[st].splice(ot,1),rt instanceof CompartmentInstance&&_e.delete(rt.compartment)}if(tt.set(rt,it),Array.isArray(rt))for(let ot of rt)nt(ot,it);else if(rt instanceof CompartmentInstance){if(_e.has(rt.compartment))throw new RangeError("Duplicate use of compartment in extensions");let ot=$.get(rt.compartment)||rt.inner;_e.set(rt.compartment,ot),nt(ot,it)}else if(rt instanceof PrecExtension)nt(rt.inner,rt.prec);else if(rt instanceof StateField)et[it].push(rt),rt.provides&&nt(rt.provides,it);else if(rt instanceof FacetProvider)et[it].push(rt),rt.facet.extensions&&nt(rt.facet.extensions,Prec_.default);else{let ot=rt.extension;if(!ot)throw new Error(`Unrecognized extension value in extension set (${rt}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);nt(ot,it)}}return nt(j,Prec_.default),et.reduce((rt,it)=>rt.concat(it))}function ensureAddr(j,$){if($&1)return 2;let _e=$>>1,et=j.status[_e];if(et==4)throw new Error("Cyclic dependency between fields and/or facets");if(et&2)return et;j.status[_e]=4;let tt=j.computeSlot(j,j.config.dynamicSlots[_e]);return j.status[_e]=2|tt}function getAddr(j,$){return $&1?j.config.staticValues[$>>1]:j.values[$>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:j=>j.some($=>$),static:!0}),lineSeparator=Facet.define({combine:j=>j.length?j[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:j=>j.length?j[0]:!1});class Annotation{constructor($,_e){this.type=$,this.value=_e}static define(){return new AnnotationType}}class AnnotationType{of($){return new Annotation(this,$)}}class StateEffectType{constructor($){this.map=$}of($){return new StateEffect(this,$)}}class StateEffect{constructor($,_e){this.type=$,this.value=_e}map($){let _e=this.type.map(this.value,$);return _e===void 0?void 0:_e==this.value?this:new StateEffect(this.type,_e)}is($){return this.type==$}static define($={}){return new StateEffectType($.map||(_e=>_e))}static mapEffects($,_e){if(!$.length)return $;let et=[];for(let tt of $){let nt=tt.map(_e);nt&&et.push(nt)}return et}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor($,_e,et,tt,nt,rt){this.startState=$,this.changes=_e,this.selection=et,this.effects=tt,this.annotations=nt,this.scrollIntoView=rt,this._doc=null,this._state=null,et&&checkSelection(et,_e.newLength),nt.some(it=>it.type==Transaction.time)||(this.annotations=nt.concat(Transaction.time.of(Date.now())))}static create($,_e,et,tt,nt,rt){return new Transaction($,_e,et,tt,nt,rt)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation($){for(let _e of this.annotations)if(_e.type==$)return _e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent($){let _e=this.annotation(Transaction.userEvent);return!!(_e&&(_e==$||_e.length>$.length&&_e.slice(0,$.length)==$&&_e[$.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(j,$){let _e=[];for(let et=0,tt=0;;){let nt,rt;if(et<j.length&&(tt==$.length||$[tt]>=j[et]))nt=j[et++],rt=j[et++];else if(tt<$.length)nt=$[tt++],rt=$[tt++];else return _e;!_e.length||_e[_e.length-1]<nt?_e.push(nt,rt):_e[_e.length-1]<rt&&(_e[_e.length-1]=rt)}}function mergeTransaction(j,$,_e){var et;let tt,nt,rt;return _e?(tt=$.changes,nt=ChangeSet.empty($.changes.length),rt=j.changes.compose($.changes)):(tt=$.changes.map(j.changes),nt=j.changes.mapDesc($.changes,!0),rt=j.changes.compose(tt)),{changes:rt,selection:$.selection?$.selection.map(nt):(et=j.selection)===null||et===void 0?void 0:et.map(tt),effects:StateEffect.mapEffects(j.effects,tt).concat(StateEffect.mapEffects($.effects,nt)),annotations:j.annotations.length?j.annotations.concat($.annotations):$.annotations,scrollIntoView:j.scrollIntoView||$.scrollIntoView}}function resolveTransactionInner(j,$,_e){let et=$.selection,tt=asArray$1($.annotations);return $.userEvent&&(tt=tt.concat(Transaction.userEvent.of($.userEvent))),{changes:$.changes instanceof ChangeSet?$.changes:ChangeSet.of($.changes||[],_e,j.facet(lineSeparator)),selection:et&&(et instanceof EditorSelection?et:EditorSelection.single(et.anchor,et.head)),effects:asArray$1($.effects),annotations:tt,scrollIntoView:!!$.scrollIntoView}}function resolveTransaction(j,$,_e){let et=resolveTransactionInner(j,$.length?$[0]:{},j.doc.length);$.length&&$[0].filter===!1&&(_e=!1);for(let nt=1;nt<$.length;nt++){$[nt].filter===!1&&(_e=!1);let rt=!!$[nt].sequential;et=mergeTransaction(et,resolveTransactionInner(j,$[nt],rt?et.changes.newLength:j.doc.length),rt)}let tt=Transaction.create(j,et.changes,et.selection,et.effects,et.annotations,et.scrollIntoView);return extendTransaction(_e?filterTransaction(tt):tt)}function filterTransaction(j){let $=j.startState,_e=!0;for(let tt of $.facet(changeFilter)){let nt=tt(j);if(nt===!1){_e=!1;break}Array.isArray(nt)&&(_e=_e===!0?nt:joinRanges(_e,nt))}if(_e!==!0){let tt,nt;if(_e===!1)nt=j.changes.invertedDesc,tt=ChangeSet.empty($.doc.length);else{let rt=j.changes.filter(_e);tt=rt.changes,nt=rt.filtered.mapDesc(rt.changes).invertedDesc}j=Transaction.create($,tt,j.selection&&j.selection.map(nt),StateEffect.mapEffects(j.effects,nt),j.annotations,j.scrollIntoView)}let et=$.facet(transactionFilter);for(let tt=et.length-1;tt>=0;tt--){let nt=et[tt](j);nt instanceof Transaction?j=nt:Array.isArray(nt)&&nt.length==1&&nt[0]instanceof Transaction?j=nt[0]:j=resolveTransaction($,asArray$1(nt),!1)}return j}function extendTransaction(j){let $=j.startState,_e=$.facet(transactionExtender),et=j;for(let tt=_e.length-1;tt>=0;tt--){let nt=_e[tt](j);nt&&Object.keys(nt).length&&(et=mergeTransaction(et,resolveTransactionInner($,nt,j.changes.newLength),!0))}return et==j?j:Transaction.create($,j.changes,j.selection,et.effects,et.annotations,et.scrollIntoView)}const none$3=[];function asArray$1(j){return j==null?none$3:Array.isArray(j)?j:[j]}var CharCategory=function(j){return j[j.Word=0]="Word",j[j.Space=1]="Space",j[j.Other=2]="Other",j}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar(j){if(wordChar)return wordChar.test(j);for(let $=0;$<j.length;$++){let _e=j[$];if(/\w/.test(_e)||_e>""&&(_e.toUpperCase()!=_e.toLowerCase()||nonASCIISingleCaseWordChar.test(_e)))return!0}return!1}function makeCategorizer(j){return $=>{if(!/\S/.test($))return CharCategory.Space;if(hasWordChar($))return CharCategory.Word;for(let _e=0;_e<j.length;_e++)if($.indexOf(j[_e])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor($,_e,et,tt,nt,rt){this.config=$,this.doc=_e,this.selection=et,this.values=tt,this.status=$.statusTemplate.slice(),this.computeSlot=nt,rt&&(rt._state=this);for(let it=0;it<this.config.dynamicSlots.length;it++)ensureAddr(this,it<<1);this.computeSlot=null}field($,_e=!0){let et=this.config.address[$.id];if(et==null){if(_e)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,et),getAddr(this,et)}update(...$){return resolveTransaction(this,$,!0)}applyTransaction($){let _e=this.config,{base:et,compartments:tt}=_e;for(let it of $.effects)it.is(Compartment.reconfigure)?(_e&&(tt=new Map,_e.compartments.forEach((st,ot)=>tt.set(ot,st)),_e=null),tt.set(it.value.compartment,it.value.extension)):it.is(StateEffect.reconfigure)?(_e=null,et=it.value):it.is(StateEffect.appendConfig)&&(_e=null,et=asArray$1(et).concat(it.value));let nt;_e?nt=$.startState.values.slice():(_e=Configuration.resolve(et,tt,this),nt=new EditorState(_e,this.doc,this.selection,_e.dynamicSlots.map(()=>null),(st,ot)=>ot.reconfigure(st,this),null).values);let rt=$.startState.facet(allowMultipleSelections)?$.newSelection:$.newSelection.asSingle();new EditorState(_e,$.newDoc,rt,nt,(it,st)=>st.update(it,$),$)}replaceSelection($){return typeof $=="string"&&($=this.toText($)),this.changeByRange(_e=>({changes:{from:_e.from,to:_e.to,insert:$},range:EditorSelection.cursor(_e.from+$.length)}))}changeByRange($){let _e=this.selection,et=$(_e.ranges[0]),tt=this.changes(et.changes),nt=[et.range],rt=asArray$1(et.effects);for(let it=1;it<_e.ranges.length;it++){let st=$(_e.ranges[it]),ot=this.changes(st.changes),at=ot.map(tt);for(let ut=0;ut<it;ut++)nt[ut]=nt[ut].map(at);let lt=tt.mapDesc(ot,!0);nt.push(st.range.map(lt)),tt=tt.compose(at),rt=StateEffect.mapEffects(rt,at).concat(StateEffect.mapEffects(asArray$1(st.effects),lt))}return{changes:tt,selection:EditorSelection.create(nt,_e.mainIndex),effects:rt}}changes($=[]){return $ instanceof ChangeSet?$:ChangeSet.of($,this.doc.length,this.facet(EditorState.lineSeparator))}toText($){return Text.of($.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc($=0,_e=this.doc.length){return this.doc.sliceString($,_e,this.lineBreak)}facet($){let _e=this.config.address[$.id];return _e==null?$.default:(ensureAddr(this,_e),getAddr(this,_e))}toJSON($){let _e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if($)for(let et in $){let tt=$[et];tt instanceof StateField&&this.config.address[tt.id]!=null&&(_e[et]=tt.spec.toJSON(this.field($[et]),this))}return _e}static fromJSON($,_e={},et){if(!$||typeof $.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let tt=[];if(et){for(let nt in et)if(Object.prototype.hasOwnProperty.call($,nt)){let rt=et[nt],it=$[nt];tt.push(rt.init(st=>rt.spec.fromJSON(it,st)))}}return EditorState.create({doc:$.doc,selection:EditorSelection.fromJSON($.selection),extensions:_e.extensions?tt.concat([_e.extensions]):tt})}static create($={}){let _e=Configuration.resolve($.extensions||[],new Map),et=$.doc instanceof Text?$.doc:Text.of(($.doc||"").split(_e.staticFacet(EditorState.lineSeparator)||DefaultSplit)),tt=$.selection?$.selection instanceof EditorSelection?$.selection:EditorSelection.single($.selection.anchor,$.selection.head):EditorSelection.single(0);return checkSelection(tt,et.length),_e.staticFacet(allowMultipleSelections)||(tt=tt.asSingle()),new EditorState(_e,et,tt,_e.dynamicSlots.map(()=>null),(nt,rt)=>rt.create(nt),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase($,..._e){for(let et of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(et,$)){$=et[$];break}return _e.length&&($=$.replace(/\$(\$|\d*)/g,(et,tt)=>{if(tt=="$")return"$";let nt=+(tt||1);return!nt||nt>_e.length?et:_e[nt-1]})),$}languageDataAt($,_e,et=-1){let tt=[];for(let nt of this.facet(languageData))for(let rt of nt(this,_e,et))Object.prototype.hasOwnProperty.call(rt,$)&&tt.push(rt[$]);return tt}charCategorizer($){return makeCategorizer(this.languageDataAt("wordChars",$).join(""))}wordAt($){let{text:_e,from:et,length:tt}=this.doc.lineAt($),nt=this.charCategorizer($),rt=$-et,it=$-et;for(;rt>0;){let st=findClusterBreak(_e,rt,!1);if(nt(_e.slice(st,rt))!=CharCategory.Word)break;rt=st}for(;it<tt;){let st=findClusterBreak(_e,it);if(nt(_e.slice(it,st))!=CharCategory.Word)break;it=st}return rt==it?null:EditorSelection.range(rt+et,it+et)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:j=>j.length?j[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(j,$){let _e=Object.keys(j),et=Object.keys($);return _e.length==et.length&&_e.every(tt=>j[tt]==$[tt])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(j,$,_e={}){let et={};for(let tt of j)for(let nt of Object.keys(tt)){let rt=tt[nt],it=et[nt];if(it===void 0)et[nt]=rt;else if(!(it===rt||rt===void 0))if(Object.hasOwnProperty.call(_e,nt))et[nt]=_e[nt](it,rt);else throw new Error("Config merge conflict for field "+nt)}for(let tt in $)et[tt]===void 0&&(et[tt]=$[tt]);return et}class RangeValue{eq($){return this==$}range($,_e=$){return Range$1.create($,_e,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class ns{constructor($,_e,et){this.from=$,this.to=_e,this.value=et}static create($,_e,et){return new ns($,_e,et)}};function cmpRange(j,$){return j.from-$.from||j.value.startSide-$.value.startSide}class Chunk{constructor($,_e,et,tt){this.from=$,this.to=_e,this.value=et,this.maxPoint=tt}get length(){return this.to[this.to.length-1]}findIndex($,_e,et,tt=0){let nt=et?this.to:this.from;for(let rt=tt,it=nt.length;;){if(rt==it)return rt;let st=rt+it>>1,ot=nt[st]-$||(et?this.value[st].endSide:this.value[st].startSide)-_e;if(st==rt)return ot>=0?rt:it;ot>=0?it=st:rt=st+1}}between($,_e,et,tt){for(let nt=this.findIndex(_e,-1e9,!0),rt=this.findIndex(et,1e9,!1,nt);nt<rt;nt++)if(tt(this.from[nt]+$,this.to[nt]+$,this.value[nt])===!1)return!1}map($,_e){let et=[],tt=[],nt=[],rt=-1,it=-1;for(let st=0;st<this.value.length;st++){let ot=this.value[st],at=this.from[st]+$,lt=this.to[st]+$,ut,ct;if(at==lt){let ft=_e.mapPos(at,ot.startSide,ot.mapMode);if(ft==null||(ut=ct=ft,ot.startSide!=ot.endSide&&(ct=_e.mapPos(at,ot.endSide),ct<ut)))continue}else if(ut=_e.mapPos(at,ot.startSide),ct=_e.mapPos(lt,ot.endSide),ut>ct||ut==ct&&ot.startSide>0&&ot.endSide<=0)continue;(ct-ut||ot.endSide-ot.startSide)<0||(rt<0&&(rt=ut),ot.point&&(it=Math.max(it,ct-ut)),et.push(ot),tt.push(ut-rt),nt.push(ct-rt))}return{mapped:et.length?new Chunk(tt,nt,et,it):null,pos:rt}}}class RangeSet{constructor($,_e,et,tt){this.chunkPos=$,this.chunk=_e,this.nextLayer=et,this.maxPoint=tt}static create($,_e,et,tt){return new RangeSet($,_e,et,tt)}get length(){let $=this.chunk.length-1;return $<0?0:Math.max(this.chunkEnd($),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let $=this.nextLayer.size;for(let _e of this.chunk)$+=_e.value.length;return $}chunkEnd($){return this.chunkPos[$]+this.chunk[$].length}update($){let{add:_e=[],sort:et=!1,filterFrom:tt=0,filterTo:nt=this.length}=$,rt=$.filter;if(_e.length==0&&!rt)return this;if(et&&(_e=_e.slice().sort(cmpRange)),this.isEmpty)return _e.length?RangeSet.of(_e):this;let it=new LayerCursor(this,null,-1).goto(0),st=0,ot=[],at=new RangeSetBuilder;for(;it.value||st<_e.length;)if(st<_e.length&&(it.from-_e[st].from||it.startSide-_e[st].value.startSide)>=0){let lt=_e[st++];at.addInner(lt.from,lt.to,lt.value)||ot.push(lt)}else it.rangeIndex==1&&it.chunkIndex<this.chunk.length&&(st==_e.length||this.chunkEnd(it.chunkIndex)<_e[st].from)&&(!rt||tt>this.chunkEnd(it.chunkIndex)||nt<this.chunkPos[it.chunkIndex])&&at.addChunk(this.chunkPos[it.chunkIndex],this.chunk[it.chunkIndex])?it.nextChunk():((!rt||tt>it.to||nt<it.from||rt(it.from,it.to,it.value))&&(at.addInner(it.from,it.to,it.value)||ot.push(Range$1.create(it.from,it.to,it.value))),it.next());return at.finishInner(this.nextLayer.isEmpty&&!ot.length?RangeSet.empty:this.nextLayer.update({add:ot,filter:rt,filterFrom:tt,filterTo:nt}))}map($){if($.empty||this.isEmpty)return this;let _e=[],et=[],tt=-1;for(let rt=0;rt<this.chunk.length;rt++){let it=this.chunkPos[rt],st=this.chunk[rt],ot=$.touchesRange(it,it+st.length);if(ot===!1)tt=Math.max(tt,st.maxPoint),_e.push(st),et.push($.mapPos(it));else if(ot===!0){let{mapped:at,pos:lt}=st.map(it,$);at&&(tt=Math.max(tt,at.maxPoint),_e.push(at),et.push(lt))}}let nt=this.nextLayer.map($);return _e.length==0?nt:new RangeSet(et,_e,nt||RangeSet.empty,tt)}between($,_e,et){if(!this.isEmpty){for(let tt=0;tt<this.chunk.length;tt++){let nt=this.chunkPos[tt],rt=this.chunk[tt];if(_e>=nt&&$<=nt+rt.length&&rt.between(nt,$-nt,_e-nt,et)===!1)return}this.nextLayer.between($,_e,et)}}iter($=0){return HeapCursor.from([this]).goto($)}get isEmpty(){return this.nextLayer==this}static iter($,_e=0){return HeapCursor.from($).goto(_e)}static compare($,_e,et,tt,nt=-1){let rt=$.filter(lt=>lt.maxPoint>0||!lt.isEmpty&&lt.maxPoint>=nt),it=_e.filter(lt=>lt.maxPoint>0||!lt.isEmpty&&lt.maxPoint>=nt),st=findSharedChunks(rt,it,et),ot=new SpanCursor(rt,st,nt),at=new SpanCursor(it,st,nt);et.iterGaps((lt,ut,ct)=>compare(ot,lt,at,ut,ct,tt)),et.empty&&et.length==0&&compare(ot,0,at,0,0,tt)}static eq($,_e,et=0,tt){tt==null&&(tt=1e9-1);let nt=$.filter(at=>!at.isEmpty&&_e.indexOf(at)<0),rt=_e.filter(at=>!at.isEmpty&&$.indexOf(at)<0);if(nt.length!=rt.length)return!1;if(!nt.length)return!0;let it=findSharedChunks(nt,rt),st=new SpanCursor(nt,it,0).goto(et),ot=new SpanCursor(rt,it,0).goto(et);for(;;){if(st.to!=ot.to||!sameValues(st.active,ot.active)||st.point&&(!ot.point||!st.point.eq(ot.point)))return!1;if(st.to>tt)return!0;st.next(),ot.next()}}static spans($,_e,et,tt,nt=-1){let rt=new SpanCursor($,null,nt).goto(_e),it=_e,st=rt.openStart;for(;;){let ot=Math.min(rt.to,et);if(rt.point){let at=rt.activeForPoint(rt.to),lt=rt.pointFrom<_e?at.length+1:Math.min(at.length,st);tt.point(it,ot,rt.point,at,lt,rt.pointRank),st=Math.min(rt.openEnd(ot),at.length)}else ot>it&&(tt.span(it,ot,rt.active,st),st=rt.openEnd(ot));if(rt.to>et)return st+(rt.point&&rt.to>et?1:0);it=rt.to,rt.next()}}static of($,_e=!1){let et=new RangeSetBuilder;for(let tt of $ instanceof Range$1?[$]:_e?lazySort($):$)et.add(tt.from,tt.to,tt.value);return et.finish()}static join($){if(!$.length)return RangeSet.empty;let _e=$[$.length-1];for(let et=$.length-2;et>=0;et--)for(let tt=$[et];tt!=RangeSet.empty;tt=tt.nextLayer)_e=new RangeSet(tt.chunkPos,tt.chunk,_e,Math.max(tt.maxPoint,_e.maxPoint));return _e}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(j){if(j.length>1)for(let $=j[0],_e=1;_e<j.length;_e++){let et=j[_e];if(cmpRange($,et)>0)return j.slice().sort(cmpRange);$=et}return j}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk($){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,$&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add($,_e,et){this.addInner($,_e,et)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add($,_e,et)}addInner($,_e,et){let tt=$-this.lastTo||et.startSide-this.last.endSide;if(tt<=0&&($-this.lastFrom||et.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return tt<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=$),this.from.push($-this.chunkStart),this.to.push(_e-this.chunkStart),this.last=et,this.lastFrom=$,this.lastTo=_e,this.value.push(et),et.point&&(this.maxPoint=Math.max(this.maxPoint,_e-$)),!0)}addChunk($,_e){if(($-this.lastTo||_e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,_e.maxPoint),this.chunks.push(_e),this.chunkPos.push($);let et=_e.value.length-1;return this.last=_e.value[et],this.lastFrom=_e.from[et]+$,this.lastTo=_e.to[et]+$,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner($){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return $;let _e=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner($):$,this.setMaxPoint);return this.from=null,_e}}function findSharedChunks(j,$,_e){let et=new Map;for(let nt of j)for(let rt=0;rt<nt.chunk.length;rt++)nt.chunk[rt].maxPoint<=0&&et.set(nt.chunk[rt],nt.chunkPos[rt]);let tt=new Set;for(let nt of $)for(let rt=0;rt<nt.chunk.length;rt++){let it=et.get(nt.chunk[rt]);it!=null&&(_e?_e.mapPos(it):it)==nt.chunkPos[rt]&&!(_e!=null&&_e.touchesRange(it,it+nt.chunk[rt].length))&&tt.add(nt.chunk[rt])}return tt}class LayerCursor{constructor($,_e,et,tt=0){this.layer=$,this.skip=_e,this.minPoint=et,this.rank=tt}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto($,_e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner($,_e,!1),this}gotoInner($,_e,et){for(;this.chunkIndex<this.layer.chunk.length;){let tt=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(tt)||this.layer.chunkEnd(this.chunkIndex)<$||tt.maxPoint<this.minPoint))break;this.chunkIndex++,et=!1}if(this.chunkIndex<this.layer.chunk.length){let tt=this.layer.chunk[this.chunkIndex].findIndex($-this.layer.chunkPos[this.chunkIndex],_e,!0);(!et||this.rangeIndex<tt)&&this.setRangeIndex(tt)}this.next()}forward($,_e){(this.to-$||this.endSide-_e)<0&&this.gotoInner($,_e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let $=this.layer.chunkPos[this.chunkIndex],_e=this.layer.chunk[this.chunkIndex],et=$+_e.from[this.rangeIndex];if(this.from=et,this.to=$+_e.to[this.rangeIndex],this.value=_e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex($){if($==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=$}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare($){return this.from-$.from||this.startSide-$.startSide||this.rank-$.rank||this.to-$.to||this.endSide-$.endSide}}class HeapCursor{constructor($){this.heap=$}static from($,_e=null,et=-1){let tt=[];for(let nt=0;nt<$.length;nt++)for(let rt=$[nt];!rt.isEmpty;rt=rt.nextLayer)rt.maxPoint>=et&&tt.push(new LayerCursor(rt,_e,et,nt));return tt.length==1?tt[0]:new HeapCursor(tt)}get startSide(){return this.value?this.value.startSide:0}goto($,_e=-1e9){for(let et of this.heap)et.goto($,_e);for(let et=this.heap.length>>1;et>=0;et--)heapBubble(this.heap,et);return this.next(),this}forward($,_e){for(let et of this.heap)et.forward($,_e);for(let et=this.heap.length>>1;et>=0;et--)heapBubble(this.heap,et);(this.to-$||this.value.endSide-_e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let $=this.heap[0];this.from=$.from,this.to=$.to,this.value=$.value,this.rank=$.rank,$.value&&$.next(),heapBubble(this.heap,0)}}}function heapBubble(j,$){for(let _e=j[$];;){let et=($<<1)+1;if(et>=j.length)break;let tt=j[et];if(et+1<j.length&&tt.compare(j[et+1])>=0&&(tt=j[et+1],et++),_e.compare(tt)<0)break;j[et]=_e,j[$]=tt,$=et}}class SpanCursor{constructor($,_e,et){this.minPoint=et,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from($,_e,et)}goto($,_e=-1e9){return this.cursor.goto($,_e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=$,this.endSide=_e,this.openStart=-1,this.next(),this}forward($,_e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-$||this.active[this.minActive].endSide-_e)<0;)this.removeActive(this.minActive);this.cursor.forward($,_e)}removeActive($){remove$1(this.active,$),remove$1(this.activeTo,$),remove$1(this.activeRank,$),this.minActive=findMinIndex(this.active,this.activeTo)}addActive($){let _e=0,{value:et,to:tt,rank:nt}=this.cursor;for(;_e<this.activeRank.length&&(nt-this.activeRank[_e]||tt-this.activeTo[_e])>0;)_e++;insert(this.active,_e,et),insert(this.activeTo,_e,tt),insert(this.activeRank,_e,nt),$&&insert($,_e,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let $=this.to,_e=this.point;this.point=null;let et=this.openStart<0?[]:null;for(;;){let tt=this.minActive;if(tt>-1&&(this.activeTo[tt]-this.cursor.from||this.active[tt].endSide-this.cursor.startSide)<0){if(this.activeTo[tt]>$){this.to=this.activeTo[tt],this.endSide=this.active[tt].endSide;break}this.removeActive(tt),et&&remove$1(et,tt)}else if(this.cursor.value)if(this.cursor.from>$){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let nt=this.cursor.value;if(!nt.point)this.addActive(et),this.cursor.next();else if(_e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=nt,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=nt.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(et){this.openStart=0;for(let tt=et.length-1;tt>=0&&et[tt]<$;tt--)this.openStart++}}activeForPoint($){if(!this.active.length)return this.active;let _e=[];for(let et=this.active.length-1;et>=0&&!(this.activeRank[et]<this.pointRank);et--)(this.activeTo[et]>$||this.activeTo[et]==$&&this.active[et].endSide>=this.point.endSide)&&_e.push(this.active[et]);return _e.reverse()}openEnd($){let _e=0;for(let et=this.activeTo.length-1;et>=0&&this.activeTo[et]>$;et--)_e++;return _e}}function compare(j,$,_e,et,tt,nt){j.goto($),_e.goto(et);let rt=et+tt,it=et,st=et-$;for(;;){let ot=j.to+st-_e.to||j.endSide-_e.endSide,at=ot<0?j.to+st:_e.to,lt=Math.min(at,rt);if(j.point||_e.point?j.point&&_e.point&&(j.point==_e.point||j.point.eq(_e.point))&&sameValues(j.activeForPoint(j.to),_e.activeForPoint(_e.to))||nt.comparePoint(it,lt,j.point,_e.point):lt>it&&!sameValues(j.active,_e.active)&&nt.compareRange(it,lt,j.active,_e.active),at>rt)break;it=at,ot<=0&&j.next(),ot>=0&&_e.next()}}function sameValues(j,$){if(j.length!=$.length)return!1;for(let _e=0;_e<j.length;_e++)if(j[_e]!=$[_e]&&!j[_e].eq($[_e]))return!1;return!0}function remove$1(j,$){for(let _e=$,et=j.length-1;_e<et;_e++)j[_e]=j[_e+1];j.pop()}function insert(j,$,_e){for(let et=j.length-1;et>=$;et--)j[et+1]=j[et];j[$]=_e}function findMinIndex(j,$){let _e=-1,et=1e9;for(let tt=0;tt<$.length;tt++)($[tt]-et||j[tt].endSide-j[_e].endSide)<0&&(_e=tt,et=$[tt]);return _e}function countColumn(j,$,_e=j.length){let et=0;for(let tt=0;tt<_e;)j.charCodeAt(tt)==9?(et+=$-et%$,tt++):(et++,tt=findClusterBreak(j,tt));return et}function findColumn(j,$,_e,et){for(let tt=0,nt=0;;){if(nt>=$)return tt;if(tt==j.length)break;nt+=j.charCodeAt(tt)==9?_e-nt%_e:1,tt=findClusterBreak(j,tt)}return et===!0?-1:j.length}const C$1="",COUNT=typeof Symbol>"u"?"__"+C$1:Symbol.for(C$1),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor($,_e){this.rules=[];let{finish:et}=_e||{};function tt(rt){return/^@/.test(rt)?[rt]:rt.split(/,\s*/)}function nt(rt,it,st,ot){let at=[],lt=/^@(\w+)\b/.exec(rt[0]),ut=lt&&lt[1]=="keyframes";if(lt&&it==null)return st.push(rt[0]+";");for(let ct in it){let ft=it[ct];if(/&/.test(ct))nt(ct.split(/,\s*/).map(dt=>rt.map(mt=>dt.replace(/&/,mt))).reduce((dt,mt)=>dt.concat(mt)),ft,st);else if(ft&&typeof ft=="object"){if(!lt)throw new RangeError("The value of a property ("+ct+") should be a primitive value.");nt(tt(ct),ft,at,ut)}else ft!=null&&at.push(ct.replace(/_.*/,"").replace(/[A-Z]/g,dt=>"-"+dt.toLowerCase())+": "+ft+";")}(at.length||ut)&&st.push((et&&!lt&&!ot?rt.map(et):rt).join(", ")+" {"+at.join(" ")+"}")}for(let rt in $)nt(tt(rt),$[rt],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let $=top$1[COUNT]||1;return top$1[COUNT]=$+1,C$1+$.toString(36)}static mount($,_e,et){let tt=$[SET],nt=et&&et.nonce;tt?nt&&tt.setNonce(nt):tt=new StyleSet($,nt),tt.mount(Array.isArray(_e)?_e:[_e])}}let adoptedSet=new Map;class StyleSet{constructor($,_e){let et=$.ownerDocument||$,tt=et.defaultView;if(!$.head&&$.adoptedStyleSheets&&tt.CSSStyleSheet){let nt=adoptedSet.get(et);if(nt)return $.adoptedStyleSheets=[nt.sheet,...$.adoptedStyleSheets],$[SET]=nt;this.sheet=new tt.CSSStyleSheet,$.adoptedStyleSheets=[this.sheet,...$.adoptedStyleSheets],adoptedSet.set(et,this)}else{this.styleTag=et.createElement("style"),_e&&this.styleTag.setAttribute("nonce",_e);let nt=$.head||$;nt.insertBefore(this.styleTag,nt.firstChild)}this.modules=[],$[SET]=this}mount($){let _e=this.sheet,et=0,tt=0;for(let nt=0;nt<$.length;nt++){let rt=$[nt],it=this.modules.indexOf(rt);if(it<tt&&it>-1&&(this.modules.splice(it,1),tt--,it=-1),it==-1){if(this.modules.splice(tt++,0,rt),_e)for(let st=0;st<rt.rules.length;st++)_e.insertRule(rt.rules[st],et++)}else{for(;tt<it;)et+=this.modules[tt++].rules.length;et+=rt.rules.length,tt++}}if(!_e){let nt="";for(let rt=0;rt<this.modules.length;rt++)nt+=this.modules[rt].getRules()+`
`;this.styleTag.textContent=nt}}setNonce($){this.styleTag&&this.styleTag.getAttribute("nonce")!=$&&this.styleTag.setAttribute("nonce",$)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$2=0;i$2<10;i$2++)base[48+i$2]=base[96+i$2]=String(i$2);for(var i$2=1;i$2<=24;i$2++)base[i$2+111]="F"+i$2;for(var i$2=65;i$2<=90;i$2++)base[i$2]=String.fromCharCode(i$2+32),shift[i$2]=String.fromCharCode(i$2);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(j){var $=mac&&j.metaKey&&j.shiftKey&&!j.ctrlKey&&!j.altKey||ie$1&&j.shiftKey&&j.key&&j.key.length==1||j.key=="Unidentified",_e=!$&&j.key||(j.shiftKey?shift:base)[j.keyCode]||j.key||"Unidentified";return _e=="Esc"&&(_e="Escape"),_e=="Del"&&(_e="Delete"),_e=="Left"&&(_e="ArrowLeft"),_e=="Up"&&(_e="ArrowUp"),_e=="Right"&&(_e="ArrowRight"),_e=="Down"&&(_e="ArrowDown"),_e}function getSelection(j){let $;return j.nodeType==11?$=j.getSelection?j:j.ownerDocument:$=j,$.getSelection()}function contains(j,$){return $?j==$||j.contains($.nodeType!=1?$.parentNode:$):!1}function deepActiveElement(j){let $=j.activeElement;for(;$&&$.shadowRoot;)$=$.shadowRoot.activeElement;return $}function hasSelection(j,$){if(!$.anchorNode)return!1;try{return contains(j,$.anchorNode)}catch{return!1}}function clientRectsFor(j){return j.nodeType==3?textRange(j,0,j.nodeValue.length).getClientRects():j.nodeType==1?j.getClientRects():[]}function isEquivalentPosition(j,$,_e,et){return _e?scanFor(j,$,_e,et,-1)||scanFor(j,$,_e,et,1):!1}function domIndex(j){for(var $=0;;$++)if(j=j.previousSibling,!j)return $}function scanFor(j,$,_e,et,tt){for(;;){if(j==_e&&$==et)return!0;if($==(tt<0?0:maxOffset(j))){if(j.nodeName=="DIV")return!1;let nt=j.parentNode;if(!nt||nt.nodeType!=1)return!1;$=domIndex(j)+(tt<0?0:1),j=nt}else if(j.nodeType==1){if(j=j.childNodes[$+(tt<0?-1:0)],j.nodeType==1&&j.contentEditable=="false")return!1;$=tt<0?maxOffset(j):0}else return!1}}function maxOffset(j){return j.nodeType==3?j.nodeValue.length:j.childNodes.length}function flattenRect(j,$){let _e=$?j.left:j.right;return{left:_e,right:_e,top:j.top,bottom:j.bottom}}function windowRect(j){return{left:0,right:j.innerWidth,top:0,bottom:j.innerHeight}}function getScale(j,$){let _e=$.width/j.offsetWidth,et=$.height/j.offsetHeight;return(_e>.995&&_e<1.005||!isFinite(_e)||Math.abs($.width-j.offsetWidth)<1)&&(_e=1),(et>.995&&et<1.005||!isFinite(et)||Math.abs($.height-j.offsetHeight)<1)&&(et=1),{scaleX:_e,scaleY:et}}function scrollRectIntoView(j,$,_e,et,tt,nt,rt,it){let st=j.ownerDocument,ot=st.defaultView||window;for(let at=j,lt=!1;at&&!lt;)if(at.nodeType==1){let ut,ct=at==st.body,ft=1,dt=1;if(ct)ut=windowRect(ot);else{if(/^(fixed|sticky)$/.test(getComputedStyle(at).position)&&(lt=!0),at.scrollHeight<=at.clientHeight&&at.scrollWidth<=at.clientWidth){at=at.assignedSlot||at.parentNode;continue}let yt=at.getBoundingClientRect();({scaleX:ft,scaleY:dt}=getScale(at,yt)),ut={left:yt.left,right:yt.left+at.clientWidth*ft,top:yt.top,bottom:yt.top+at.clientHeight*dt}}let mt=0,pt=0;if(tt=="nearest")$.top<ut.top?(pt=-(ut.top-$.top+rt),_e>0&&$.bottom>ut.bottom+pt&&(pt=$.bottom-ut.bottom+pt+rt)):$.bottom>ut.bottom&&(pt=$.bottom-ut.bottom+rt,_e<0&&$.top-pt<ut.top&&(pt=-(ut.top+pt-$.top+rt)));else{let yt=$.bottom-$.top,vt=ut.bottom-ut.top;pt=(tt=="center"&&yt<=vt?$.top+yt/2-vt/2:tt=="start"||tt=="center"&&_e<0?$.top-rt:$.bottom-vt+rt)-ut.top}if(et=="nearest"?$.left<ut.left?(mt=-(ut.left-$.left+nt),_e>0&&$.right>ut.right+mt&&(mt=$.right-ut.right+mt+nt)):$.right>ut.right&&(mt=$.right-ut.right+nt,_e<0&&$.left<ut.left+mt&&(mt=-(ut.left+mt-$.left+nt))):mt=(et=="center"?$.left+($.right-$.left)/2-(ut.right-ut.left)/2:et=="start"==it?$.left-nt:$.right-(ut.right-ut.left)+nt)-ut.left,mt||pt)if(ct)ot.scrollBy(mt,pt);else{let yt=0,vt=0;if(pt){let Ct=at.scrollTop;at.scrollTop+=pt/dt,vt=(at.scrollTop-Ct)*dt}if(mt){let Ct=at.scrollLeft;at.scrollLeft+=mt/ft,yt=(at.scrollLeft-Ct)*ft}$={left:$.left-yt,top:$.top-vt,right:$.right-yt,bottom:$.bottom-vt},yt&&Math.abs(yt-mt)<1&&(et="nearest"),vt&&Math.abs(vt-pt)<1&&(tt="nearest")}if(ct)break;at=at.assignedSlot||at.parentNode}else if(at.nodeType==11)at=at.host;else break}function scrollableParent(j){let $=j.ownerDocument;for(let _e=j.parentNode;_e&&_e!=$.body;)if(_e.nodeType==1){if(_e.scrollHeight>_e.clientHeight||_e.scrollWidth>_e.clientWidth)return _e;_e=_e.assignedSlot||_e.parentNode}else if(_e.nodeType==11)_e=_e.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq($){return this.anchorNode==$.anchorNode&&this.anchorOffset==$.anchorOffset&&this.focusNode==$.focusNode&&this.focusOffset==$.focusOffset}setRange($){let{anchorNode:_e,focusNode:et}=$;this.set(_e,Math.min($.anchorOffset,_e?maxOffset(_e):0),et,Math.min($.focusOffset,et?maxOffset(et):0))}set($,_e,et,tt){this.anchorNode=$,this.anchorOffset=_e,this.focusNode=et,this.focusOffset=tt}}let preventScrollSupported=null;function focusPreventScroll(j){if(j.setActive)return j.setActive();if(preventScrollSupported)return j.focus(preventScrollSupported);let $=[];for(let _e=j;_e&&($.push(_e,_e.scrollTop,_e.scrollLeft),_e!=_e.ownerDocument);_e=_e.parentNode);if(j.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let _e=0;_e<$.length;){let et=$[_e++],tt=$[_e++],nt=$[_e++];et.scrollTop!=tt&&(et.scrollTop=tt),et.scrollLeft!=nt&&(et.scrollLeft=nt)}}}let scratchRange;function textRange(j,$,_e=$){let et=scratchRange||(scratchRange=document.createRange());return et.setEnd(j,_e),et.setStart(j,$),et}function dispatchKey(j,$,_e){let et={key:$,code:$,keyCode:_e,which:_e,cancelable:!0},tt=new KeyboardEvent("keydown",et);tt.synthetic=!0,j.dispatchEvent(tt);let nt=new KeyboardEvent("keyup",et);return nt.synthetic=!0,j.dispatchEvent(nt),tt.defaultPrevented||nt.defaultPrevented}function getRoot(j){for(;j;){if(j&&(j.nodeType==9||j.nodeType==11&&j.host))return j;j=j.assignedSlot||j.parentNode}return null}function clearAttributes(j){for(;j.attributes.length;)j.removeAttributeNode(j.attributes[0])}function atElementStart(j,$){let _e=$.focusNode,et=$.focusOffset;if(!_e||$.anchorNode!=_e||$.anchorOffset!=et)return!1;for(et=Math.min(et,maxOffset(_e));;)if(et){if(_e.nodeType!=1)return!1;let tt=_e.childNodes[et-1];tt.contentEditable=="false"?et--:(_e=tt,et=maxOffset(_e))}else{if(_e==j)return!0;et=domIndex(_e),_e=_e.parentNode}}function isScrolledToBottom(j){return j.scrollTop>Math.max(1,j.scrollHeight-j.clientHeight-4)}class DOMPos{constructor($,_e,et=!0){this.node=$,this.offset=_e,this.precise=et}static before($,_e){return new DOMPos($.parentNode,domIndex($),_e)}static after($,_e){return new DOMPos($.parentNode,domIndex($)+1,_e)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore($){let _e=this.posAtStart;for(let et of this.children){if(et==$)return _e;_e+=et.length+et.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter($){return this.posBefore($)+$.length}sync($,_e){if(this.flags&2){let et=this.dom,tt=null,nt;for(let rt of this.children){if(rt.flags&7){if(!rt.dom&&(nt=tt?tt.nextSibling:et.firstChild)){let it=ContentView.get(nt);(!it||!it.parent&&it.canReuseDOM(rt))&&rt.reuseDOM(nt)}rt.sync($,_e),rt.flags&=-8}if(nt=tt?tt.nextSibling:et.firstChild,_e&&!_e.written&&_e.node==et&&nt!=rt.dom&&(_e.written=!0),rt.dom.parentNode==et)for(;nt&&nt!=rt.dom;)nt=rm$1(nt);else et.insertBefore(rt.dom,nt);tt=rt.dom}for(nt=tt?tt.nextSibling:et.firstChild,nt&&_e&&_e.node==et&&(_e.written=!0);nt;)nt=rm$1(nt)}else if(this.flags&1)for(let et of this.children)et.flags&7&&(et.sync($,_e),et.flags&=-8)}reuseDOM($){}localPosFromDOM($,_e){let et;if($==this.dom)et=this.dom.childNodes[_e];else{let tt=maxOffset($)==0?0:_e==0?-1:1;for(;;){let nt=$.parentNode;if(nt==this.dom)break;tt==0&&nt.firstChild!=nt.lastChild&&($==nt.firstChild?tt=-1:tt=1),$=nt}tt<0?et=$:et=$.nextSibling}if(et==this.dom.firstChild)return 0;for(;et&&!ContentView.get(et);)et=et.nextSibling;if(!et)return this.length;for(let tt=0,nt=0;;tt++){let rt=this.children[tt];if(rt.dom==et)return nt;nt+=rt.length+rt.breakAfter}}domBoundsAround($,_e,et=0){let tt=-1,nt=-1,rt=-1,it=-1;for(let st=0,ot=et,at=et;st<this.children.length;st++){let lt=this.children[st],ut=ot+lt.length;if(ot<$&&ut>_e)return lt.domBoundsAround($,_e,ot);if(ut>=$&&tt==-1&&(tt=st,nt=ot),ot>_e&&lt.dom.parentNode==this.dom){rt=st,it=at;break}at=ut,ot=ut+lt.breakAfter}return{from:nt,to:it<0?et+this.length:it,startDOM:(tt?this.children[tt-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:rt<this.children.length&&rt>=0?this.children[rt].dom:null}}markDirty($=!1){this.flags|=2,this.markParentsDirty($)}markParentsDirty($){for(let _e=this.parent;_e;_e=_e.parent){if($&&(_e.flags|=2),_e.flags&1)return;_e.flags|=1,$=!1}}setParent($){this.parent!=$&&(this.parent=$,this.flags&7&&this.markParentsDirty(!0))}setDOM($){this.dom!=$&&(this.dom&&(this.dom.cmView=null),this.dom=$,$.cmView=this)}get rootView(){for(let $=this;;){let _e=$.parent;if(!_e)return $;$=_e}}replaceChildren($,_e,et=noChildren){this.markDirty();for(let tt=$;tt<_e;tt++){let nt=this.children[tt];nt.parent==this&&et.indexOf(nt)<0&&nt.destroy()}this.children.splice($,_e-$,...et);for(let tt=0;tt<et.length;tt++)et[tt].setParent(this)}ignoreMutation($){return!1}ignoreEvent($){return!1}childCursor($=this.length){return new ChildCursor(this.children,$,this.children.length)}childPos($,_e=1){return this.childCursor().findPos($,_e)}toString(){let $=this.constructor.name.replace("View","");return $+(this.children.length?"("+this.children.join()+")":this.length?"["+($=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get($){return $.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge($,_e,et,tt,nt,rt){return!1}become($){return!1}canReuseDOM($){return $.constructor==this.constructor&&!((this.flags|$.flags)&8)}getSide(){return 0}destroy(){for(let $ of this.children)$.parent==this&&$.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(j){let $=j.nextSibling;return j.parentNode.removeChild(j),$}class ChildCursor{constructor($,_e,et){this.children=$,this.pos=_e,this.i=et,this.off=0}findPos($,_e=1){for(;;){if($>this.pos||$==this.pos&&(_e>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=$-this.pos,this;let et=this.children[--this.i];this.pos-=et.length+et.breakAfter}}}function replaceRange(j,$,_e,et,tt,nt,rt,it,st){let{children:ot}=j,at=ot.length?ot[$]:null,lt=nt.length?nt[nt.length-1]:null,ut=lt?lt.breakAfter:rt;if(!($==et&&at&&!rt&&!ut&&nt.length<2&&at.merge(_e,tt,nt.length?lt:null,_e==0,it,st))){if(et<ot.length){let ct=ot[et];ct&&(tt<ct.length||ct.breakAfter&&(lt!=null&&lt.breakAfter))?($==et&&(ct=ct.split(tt),tt=0),!ut&&lt&&ct.merge(0,tt,lt,!0,0,st)?nt[nt.length-1]=ct:((tt||ct.children.length&&!ct.children[0].length)&&ct.merge(0,tt,null,!1,0,st),nt.push(ct))):ct!=null&&ct.breakAfter&&(lt?lt.breakAfter=1:rt=1),et++}for(at&&(at.breakAfter=rt,_e>0&&(!rt&&nt.length&&at.merge(_e,at.length,nt[0],!1,it,0)?at.breakAfter=nt.shift().breakAfter:(_e<at.length||at.children.length&&at.children[at.children.length-1].length==0)&&at.merge(_e,at.length,null,!1,it,0),$++));$<et&&nt.length;)if(ot[et-1].become(nt[nt.length-1]))et--,nt.pop(),st=nt.length?0:it;else if(ot[$].become(nt[0]))$++,nt.shift(),it=nt.length?0:st;else break;!nt.length&&$&&et<ot.length&&!ot[$-1].breakAfter&&ot[et].merge(0,0,ot[$-1],!1,it,st)&&$--,($<et||nt.length)&&j.replaceChildren($,et,nt)}}function mergeChildrenInto(j,$,_e,et,tt,nt){let rt=j.childCursor(),{i:it,off:st}=rt.findPos(_e,1),{i:ot,off:at}=rt.findPos($,-1),lt=$-_e;for(let ut of et)lt+=ut.length;j.length+=lt,replaceRange(j,ot,at,it,st,et,0,tt,nt)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor($){super(),this.text=$}get length(){return this.text.length}createDOM($){this.setDOM($||document.createTextNode(this.text))}sync($,_e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(_e&&_e.node==this.dom&&(_e.written=!0),this.dom.nodeValue=this.text)}reuseDOM($){$.nodeType==3&&this.createDOM($)}merge($,_e,et){return this.flags&8||et&&(!(et instanceof TextView)||this.length-(_e-$)+et.length>MaxJoinLen||et.flags&8)?!1:(this.text=this.text.slice(0,$)+(et?et.text:"")+this.text.slice(_e),this.markDirty(),!0)}split($){let _e=new TextView(this.text.slice($));return this.text=this.text.slice(0,$),this.markDirty(),_e.flags|=this.flags&8,_e}localPosFromDOM($,_e){return $==this.dom?_e:_e?this.text.length:0}domAtPos($){return new DOMPos(this.dom,$)}domBoundsAround($,_e,et){return{from:et,to:et+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt($,_e){return textCoords(this.dom,$,_e)}}class MarkView extends ContentView{constructor($,_e=[],et=0){super(),this.mark=$,this.children=_e,this.length=et;for(let tt of _e)tt.setParent(this)}setAttrs($){if(clearAttributes($),this.mark.class&&($.className=this.mark.class),this.mark.attrs)for(let _e in this.mark.attrs)$.setAttribute(_e,this.mark.attrs[_e]);return $}canReuseDOM($){return super.canReuseDOM($)&&!((this.flags|$.flags)&8)}reuseDOM($){$.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM($),this.flags|=6)}sync($,_e){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync($,_e)}merge($,_e,et,tt,nt,rt){return et&&(!(et instanceof MarkView&&et.mark.eq(this.mark))||$&&nt<=0||_e<this.length&&rt<=0)?!1:(mergeChildrenInto(this,$,_e,et?et.children.slice():[],nt-1,rt-1),this.markDirty(),!0)}split($){let _e=[],et=0,tt=-1,nt=0;for(let it of this.children){let st=et+it.length;st>$&&_e.push(et<$?it.split($-et):it),tt<0&&et>=$&&(tt=nt),et=st,nt++}let rt=this.length-$;return this.length=$,tt>-1&&(this.children.length=tt,this.markDirty()),new MarkView(this.mark,_e,rt)}domAtPos($){return inlineDOMAtPos(this,$)}coordsAt($,_e){return coordsInChildren(this,$,_e)}}function textCoords(j,$,_e){let et=j.nodeValue.length;$>et&&($=et);let tt=$,nt=$,rt=0;$==0&&_e<0||$==et&&_e>=0?browser.chrome||browser.gecko||($?(tt--,rt=1):nt<et&&(nt++,rt=-1)):_e<0?tt--:nt<et&&nt++;let it=textRange(j,tt,nt).getClientRects();if(!it.length)return null;let st=it[(rt?rt<0:_e>=0)?0:it.length-1];return browser.safari&&!rt&&st.width==0&&(st=Array.prototype.find.call(it,ot=>ot.width)||st),rt?flattenRect(st,rt<0):st||null}class WidgetView extends ContentView{static create($,_e,et){return new WidgetView($,_e,et)}constructor($,_e,et){super(),this.widget=$,this.length=_e,this.side=et,this.prevWidget=null}split($){let _e=WidgetView.create(this.widget,this.length-$,this.side);return this.length-=$,_e}sync($){(!this.dom||!this.widget.updateDOM(this.dom,$))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM($)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge($,_e,et,tt,nt,rt){return et&&(!(et instanceof WidgetView)||!this.widget.compare(et.widget)||$>0&&nt<=0||_e<this.length&&rt<=0)?!1:(this.length=$+(et?et.length:0)+(this.length-_e),!0)}become($){return $ instanceof WidgetView&&$.side==this.side&&this.widget.constructor==$.widget.constructor?(this.widget.compare($.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=$.widget,this.length=$.length,!0):!1}ignoreMutation(){return!0}ignoreEvent($){return this.widget.ignoreEvent($)}get overrideDOMText(){if(this.length==0)return Text.empty;let $=this;for(;$.parent;)$=$.parent;let{view:_e}=$,et=_e&&_e.state.doc,tt=this.posAtStart;return et?et.slice(tt,tt+this.length):Text.empty}domAtPos($){return(this.length?$==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,$==this.length)}domBoundsAround(){return null}coordsAt($,_e){let et=this.widget.coordsAt(this.dom,$,_e);if(et)return et;let tt=this.dom.getClientRects(),nt=null;if(!tt.length)return null;let rt=this.side?this.side<0:$>0;for(let it=rt?tt.length-1:0;nt=tt[it],!($>0?it==0:it==tt.length-1||nt.top<nt.bottom);it+=rt?-1:1);return flattenRect(nt,!rt)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor($){super(),this.side=$}get length(){return 0}merge(){return!1}become($){return $ instanceof WidgetBufferView&&$.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let $=document.createElement("img");$.className="cm-widgetBuffer",$.setAttribute("aria-hidden","true"),this.setDOM($)}}getSide(){return this.side}domAtPos($){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt($){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(j,$){let _e=j.dom,{children:et}=j,tt=0;for(let nt=0;tt<et.length;tt++){let rt=et[tt],it=nt+rt.length;if(!(it==nt&&rt.getSide()<=0)){if($>nt&&$<it&&rt.dom.parentNode==_e)return rt.domAtPos($-nt);if($<=nt)break;nt=it}}for(let nt=tt;nt>0;nt--){let rt=et[nt-1];if(rt.dom.parentNode==_e)return rt.domAtPos(rt.length)}for(let nt=tt;nt<et.length;nt++){let rt=et[nt];if(rt.dom.parentNode==_e)return rt.domAtPos(0)}return new DOMPos(_e,0)}function joinInlineInto(j,$,_e){let et,{children:tt}=j;_e>0&&$ instanceof MarkView&&tt.length&&(et=tt[tt.length-1])instanceof MarkView&&et.mark.eq($.mark)?joinInlineInto(et,$.children[0],_e-1):(tt.push($),$.setParent(j)),j.length+=$.length}function coordsInChildren(j,$,_e){let et=null,tt=-1,nt=null,rt=-1;function it(ot,at){for(let lt=0,ut=0;lt<ot.children.length&&ut<=at;lt++){let ct=ot.children[lt],ft=ut+ct.length;ft>=at&&(ct.children.length?it(ct,at-ut):(!nt||nt.isHidden&&_e>0)&&(ft>at||ut==ft&&ct.getSide()>0)?(nt=ct,rt=at-ut):(ut<at||ut==ft&&ct.getSide()<0&&!ct.isHidden)&&(et=ct,tt=at-ut)),ut=ft}}it(j,$);let st=(_e<0?et:nt)||et||nt;return st?st.coordsAt(Math.max(0,st==et?tt:rt),_e):fallbackRect(j)}function fallbackRect(j){let $=j.dom.lastChild;if(!$)return j.dom.getBoundingClientRect();let _e=clientRectsFor($);return _e[_e.length-1]||null}function combineAttrs(j,$){for(let _e in j)_e=="class"&&$.class?$.class+=" "+j.class:_e=="style"&&$.style?$.style+=";"+j.style:$[_e]=j[_e];return $}const noAttrs$1=Object.create(null);function attrsEq(j,$,_e){if(j==$)return!0;j||(j=noAttrs$1),$||($=noAttrs$1);let et=Object.keys(j),tt=Object.keys($);if(et.length-(_e&&et.indexOf(_e)>-1?1:0)!=tt.length-(_e&&tt.indexOf(_e)>-1?1:0))return!1;for(let nt of et)if(nt!=_e&&(tt.indexOf(nt)==-1||j[nt]!==$[nt]))return!1;return!0}function updateAttrs(j,$,_e){let et=!1;if($)for(let tt in $)_e&&tt in _e||(et=!0,tt=="style"?j.style.cssText="":j.removeAttribute(tt));if(_e)for(let tt in _e)$&&$[tt]==_e[tt]||(et=!0,tt=="style"?j.style.cssText=_e[tt]:j.setAttribute(tt,_e[tt]));return et}function getAttrs(j){let $=Object.create(null);for(let _e=0;_e<j.attributes.length;_e++){let et=j.attributes[_e];$[et.name]=et.value}return $}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge($,_e,et,tt,nt,rt){if(et){if(!(et instanceof LineView))return!1;this.dom||et.transferDOM(this)}return tt&&this.setDeco(et?et.attrs:null),mergeChildrenInto(this,$,_e,et?et.children.slice():[],nt,rt),!0}split($){let _e=new LineView;if(_e.breakAfter=this.breakAfter,this.length==0)return _e;let{i:et,off:tt}=this.childPos($);tt&&(_e.append(this.children[et].split(tt),0),this.children[et].merge(tt,this.children[et].length,null,!1,0,0),et++);for(let nt=et;nt<this.children.length;nt++)_e.append(this.children[nt],0);for(;et>0&&this.children[et-1].length==0;)this.children[--et].destroy();return this.children.length=et,this.markDirty(),this.length=$,_e}transferDOM($){this.dom&&(this.markDirty(),$.setDOM(this.dom),$.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco($){attrsEq(this.attrs,$)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=$)}append($,_e){joinInlineInto(this,$,_e)}addLineDeco($){let _e=$.spec.attributes,et=$.spec.class;_e&&(this.attrs=combineAttrs(_e,this.attrs||{})),et&&(this.attrs=combineAttrs({class:et},this.attrs||{}))}domAtPos($){return inlineDOMAtPos(this,$)}reuseDOM($){$.nodeName=="DIV"&&(this.setDOM($),this.flags|=6)}sync($,_e){var et;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync($,_e);let tt=this.dom.lastChild;for(;tt&&ContentView.get(tt)instanceof MarkView;)tt=tt.lastChild;if(!tt||!this.length||tt.nodeName!="BR"&&((et=ContentView.get(tt))===null||et===void 0?void 0:et.isEditable)==!1&&(!browser.ios||!this.children.some(nt=>nt instanceof TextView))){let nt=document.createElement("BR");nt.cmIgnore=!0,this.dom.appendChild(nt)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let $=0,_e;for(let et of this.children){if(!(et instanceof TextView)||/[^ -~]/.test(et.text))return null;let tt=clientRectsFor(et.dom);if(tt.length!=1)return null;$+=tt[0].width,_e=tt[0].height}return $?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:$/this.length,textHeight:_e}:null}coordsAt($,_e){let et=coordsInChildren(this,$,_e);if(!this.children.length&&et&&this.parent){let{heightOracle:tt}=this.parent.view.viewState,nt=et.bottom-et.top;if(Math.abs(nt-tt.lineHeight)<2&&tt.textHeight<nt){let rt=(nt-tt.textHeight)/2;return{top:et.top+rt,bottom:et.bottom-rt,left:et.left,right:et.left}}}return et}become($){return!1}covers(){return!0}static find($,_e){for(let et=0,tt=0;et<$.children.length;et++){let nt=$.children[et],rt=tt+nt.length;if(rt>=_e){if(nt instanceof LineView)return nt;if(rt>_e)break}tt=rt+nt.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor($,_e,et){super(),this.widget=$,this.length=_e,this.deco=et,this.breakAfter=0,this.prevWidget=null}merge($,_e,et,tt,nt,rt){return et&&(!(et instanceof BlockWidgetView)||!this.widget.compare(et.widget)||$>0&&nt<=0||_e<this.length&&rt<=0)?!1:(this.length=$+(et?et.length:0)+(this.length-_e),!0)}domAtPos($){return $==0?DOMPos.before(this.dom):DOMPos.after(this.dom,$==this.length)}split($){let _e=this.length-$;this.length=$;let et=new BlockWidgetView(this.widget,_e,this.deco);return et.breakAfter=this.breakAfter,et}get children(){return noChildren}sync($){(!this.dom||!this.widget.updateDOM(this.dom,$))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM($)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become($){return $ instanceof BlockWidgetView&&$.widget.constructor==this.widget.constructor?($.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=$.widget,this.length=$.length,this.deco=$.deco,this.breakAfter=$.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent($){return this.widget.ignoreEvent($)}get isEditable(){return!1}get isWidget(){return!0}coordsAt($,_e){return this.widget.coordsAt(this.dom,$,_e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers($){let{startSide:_e,endSide:et}=this.deco;return _e==et?!1:$<0?_e<0:et>0}}class WidgetType{eq($){return!1}updateDOM($,_e){return!1}compare($){return this==$||this.constructor==$.constructor&&this.eq($)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent($){return!0}coordsAt($,_e,et){return null}get isHidden(){return!1}get editable(){return!1}destroy($){}}var BlockType=function(j){return j[j.Text=0]="Text",j[j.WidgetBefore=1]="WidgetBefore",j[j.WidgetAfter=2]="WidgetAfter",j[j.WidgetRange=3]="WidgetRange",j}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor($,_e,et,tt){super(),this.startSide=$,this.endSide=_e,this.widget=et,this.spec=tt}get heightRelevant(){return!1}static mark($){return new MarkDecoration($)}static widget($){let _e=Math.max(-1e4,Math.min(1e4,$.side||0)),et=!!$.block;return _e+=et&&!$.inlineOrder?_e>0?3e8:-4e8:_e>0?1e8:-1e8,new PointDecoration($,_e,_e,et,$.widget||null,!1)}static replace($){let _e=!!$.block,et,tt;if($.isBlockGap)et=-5e8,tt=4e8;else{let{start:nt,end:rt}=getInclusive($,_e);et=(nt?_e?-3e8:-1:5e8)-1,tt=(rt?_e?2e8:1:-6e8)+1}return new PointDecoration($,et,tt,_e,$.widget||null,!0)}static line($){return new LineDecoration($)}static set($,_e=!1){return RangeSet.of($,_e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor($){let{start:_e,end:et}=getInclusive($);super(_e?-1:5e8,et?1:-6e8,null,$),this.tagName=$.tagName||"span",this.class=$.class||"",this.attrs=$.attributes||null}eq($){var _e,et;return this==$||$ instanceof MarkDecoration&&this.tagName==$.tagName&&(this.class||((_e=this.attrs)===null||_e===void 0?void 0:_e.class))==($.class||((et=$.attrs)===null||et===void 0?void 0:et.class))&&attrsEq(this.attrs,$.attrs,"class")}range($,_e=$){if($>=_e)throw new RangeError("Mark decorations may not be empty");return super.range($,_e)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor($){super(-2e8,-2e8,null,$)}eq($){return $ instanceof LineDecoration&&this.spec.class==$.spec.class&&attrsEq(this.spec.attributes,$.spec.attributes)}range($,_e=$){if(_e!=$)throw new RangeError("Line decoration ranges must be zero-length");return super.range($,_e)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor($,_e,et,tt,nt,rt){super(_e,et,nt,$),this.block=tt,this.isReplace=rt,this.mapMode=tt?_e<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq($){return $ instanceof PointDecoration&&widgetsEq(this.widget,$.widget)&&this.block==$.block&&this.startSide==$.startSide&&this.endSide==$.endSide}range($,_e=$){if(this.isReplace&&($>_e||$==_e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&_e!=$)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range($,_e)}}PointDecoration.prototype.point=!0;function getInclusive(j,$=!1){let{inclusiveStart:_e,inclusiveEnd:et}=j;return _e==null&&(_e=j.inclusive),et==null&&(et=j.inclusive),{start:_e??$,end:et??$}}function widgetsEq(j,$){return j==$||!!(j&&$&&j.compare($))}function addRange(j,$,_e,et=0){let tt=_e.length-1;tt>=0&&_e[tt]+et>=j?_e[tt]=Math.max(_e[tt],$):_e.push(j,$)}class ContentBuilder{constructor($,_e,et,tt){this.doc=$,this.pos=_e,this.end=et,this.disallowBlockEffectsFor=tt,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=$.iter(),this.skip=_e}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let $=this.content[this.content.length-1];return!($.breakAfter||$ instanceof BlockWidgetView&&$.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer($=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),$),$.length),this.pendingBuffer=0)}addBlockWidget($){this.flushBuffer(),this.curLine=null,this.content.push($)}finish($){this.pendingBuffer&&$<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!($&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText($,_e,et){for(;$>0;){if(this.textOff==this.text.length){let{value:nt,lineBreak:rt,done:it}=this.cursor.next(this.skip);if(this.skip=0,it)throw new Error("Ran out of text content when drawing inline views");if(rt){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,$--;continue}else this.text=nt,this.textOff=0}let tt=Math.min(this.text.length-this.textOff,$,512);this.flushBuffer(_e.slice(_e.length-et)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+tt)),_e),et),this.atCursorPos=!0,this.textOff+=tt,$-=tt,et=0}}span($,_e,et,tt){this.buildText(_e-$,et,tt),this.pos=_e,this.openStart<0&&(this.openStart=tt)}point($,_e,et,tt,nt,rt){if(this.disallowBlockEffectsFor[rt]&&et instanceof PointDecoration){if(et.block)throw new RangeError("Block decorations may not be specified via plugins");if(_e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let it=_e-$;if(et instanceof PointDecoration)if(et.block)et.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(et.widget||new NullWidget("div"),it,et));else{let st=WidgetView.create(et.widget||new NullWidget("span"),it,it?0:et.startSide),ot=this.atCursorPos&&!st.isEditable&&nt<=tt.length&&($<_e||et.startSide>0),at=!st.isEditable&&($<_e||nt>tt.length||et.startSide<=0),lt=this.getLine();this.pendingBuffer==2&&!ot&&!st.isEditable&&(this.pendingBuffer=0),this.flushBuffer(tt),ot&&(lt.append(wrapMarks(new WidgetBufferView(1),tt),nt),nt=tt.length+Math.max(0,nt-tt.length)),lt.append(wrapMarks(st,tt),nt),this.atCursorPos=at,this.pendingBuffer=at?$<_e||nt>tt.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=tt.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(et);it&&(this.textOff+it<=this.text.length?this.textOff+=it:(this.skip+=it-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=_e),this.openStart<0&&(this.openStart=nt)}static build($,_e,et,tt,nt){let rt=new ContentBuilder($,_e,et,nt);return rt.openEnd=RangeSet.spans(tt,_e,et,rt),rt.openStart<0&&(rt.openStart=rt.openEnd),rt.finish(rt.openEnd),rt}}function wrapMarks(j,$){for(let _e of $)j=new MarkView(_e,[j],j.length);return j}class NullWidget extends WidgetType{constructor($){super(),this.tag=$}eq($){return $.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM($){return $.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Direction=function(j){return j[j.LTR=0]="LTR",j[j.RTL=1]="RTL",j}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(j){let $=[];for(let _e=0;_e<j.length;_e++)$.push(1<<+j[_e]);return $}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let j of["()","[]","{}"]){let $=j.charCodeAt(0),_e=j.charCodeAt(1);Brackets[$]=_e,Brackets[_e]=-$}function charType(j){return j<=247?LowTypes[j]:1424<=j&&j<=1524?2:1536<=j&&j<=1785?ArabicTypes[j-1536]:1774<=j&&j<=2220?4:8192<=j&&j<=8204?256:64336<=j&&j<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor($,_e,et){this.from=$,this.to=_e,this.level=et}side($,_e){return this.dir==_e==$?this.to:this.from}forward($,_e){return $==(this.dir==_e)}static find($,_e,et,tt){let nt=-1;for(let rt=0;rt<$.length;rt++){let it=$[rt];if(it.from<=_e&&it.to>=_e){if(it.level==et)return rt;(nt<0||(tt!=0?tt<0?it.from<_e:it.to>_e:$[nt].level>it.level))&&(nt=rt)}}if(nt<0)throw new RangeError("Index out of range");return nt}}function isolatesEq(j,$){if(j.length!=$.length)return!1;for(let _e=0;_e<j.length;_e++){let et=j[_e],tt=$[_e];if(et.from!=tt.from||et.to!=tt.to||et.direction!=tt.direction||!isolatesEq(et.inner,tt.inner))return!1}return!0}const types=[];function computeCharTypes(j,$,_e,et,tt){for(let nt=0;nt<=et.length;nt++){let rt=nt?et[nt-1].to:$,it=nt<et.length?et[nt].from:_e,st=nt?256:tt;for(let ot=rt,at=st,lt=st;ot<it;ot++){let ut=charType(j.charCodeAt(ot));ut==512?ut=at:ut==8&&lt==4&&(ut=16),types[ot]=ut==4?2:ut,ut&7&&(lt=ut),at=ut}for(let ot=rt,at=st,lt=st;ot<it;ot++){let ut=types[ot];if(ut==128)ot<it-1&&at==types[ot+1]&&at&24?ut=types[ot]=at:types[ot]=256;else if(ut==64){let ct=ot+1;for(;ct<it&&types[ct]==64;)ct++;let ft=ot&&at==8||ct<_e&&types[ct]==8?lt==1?1:8:256;for(let dt=ot;dt<ct;dt++)types[dt]=ft;ot=ct-1}else ut==8&&lt==1&&(types[ot]=1);at=ut,ut&7&&(lt=ut)}}}function processBracketPairs(j,$,_e,et,tt){let nt=tt==1?2:1;for(let rt=0,it=0,st=0;rt<=et.length;rt++){let ot=rt?et[rt-1].to:$,at=rt<et.length?et[rt].from:_e;for(let lt=ot,ut,ct,ft;lt<at;lt++)if(ct=Brackets[ut=j.charCodeAt(lt)])if(ct<0){for(let dt=it-3;dt>=0;dt-=3)if(BracketStack[dt+1]==-ct){let mt=BracketStack[dt+2],pt=mt&2?tt:mt&4?mt&1?nt:tt:0;pt&&(types[lt]=types[BracketStack[dt]]=pt),it=dt;break}}else{if(BracketStack.length==189)break;BracketStack[it++]=lt,BracketStack[it++]=ut,BracketStack[it++]=st}else if((ft=types[lt])==2||ft==1){let dt=ft==tt;st=dt?0:1;for(let mt=it-3;mt>=0;mt-=3){let pt=BracketStack[mt+2];if(pt&2)break;if(dt)BracketStack[mt+2]|=2;else{if(pt&4)break;BracketStack[mt+2]|=4}}}}}function processNeutrals(j,$,_e,et){for(let tt=0,nt=et;tt<=_e.length;tt++){let rt=tt?_e[tt-1].to:j,it=tt<_e.length?_e[tt].from:$;for(let st=rt;st<it;){let ot=types[st];if(ot==256){let at=st+1;for(;;)if(at==it){if(tt==_e.length)break;at=_e[tt++].to,it=tt<_e.length?_e[tt].from:$}else if(types[at]==256)at++;else break;let lt=nt==1,ut=(at<$?types[at]:et)==1,ct=lt==ut?lt?1:2:et;for(let ft=at,dt=tt,mt=dt?_e[dt-1].to:j;ft>st;)ft==mt&&(ft=_e[--dt].from,mt=dt?_e[dt-1].to:j),types[--ft]=ct;st=at}else nt=ot,st++}}}function emitSpans(j,$,_e,et,tt,nt,rt){let it=et%2?2:1;if(et%2==tt%2)for(let st=$,ot=0;st<_e;){let at=!0,lt=!1;if(ot==nt.length||st<nt[ot].from){let dt=types[st];dt!=it&&(at=!1,lt=dt==16)}let ut=!at&&it==1?[]:null,ct=at?et:et+1,ft=st;e:for(;;)if(ot<nt.length&&ft==nt[ot].from){if(lt)break e;let dt=nt[ot];if(!at)for(let mt=dt.to,pt=ot+1;;){if(mt==_e)break e;if(pt<nt.length&&nt[pt].from==mt)mt=nt[pt++].to;else{if(types[mt]==it)break e;break}}if(ot++,ut)ut.push(dt);else{dt.from>st&&rt.push(new BidiSpan(st,dt.from,ct));let mt=dt.direction==LTR!=!(ct%2);computeSectionOrder(j,mt?et+1:et,tt,dt.inner,dt.from,dt.to,rt),st=dt.to}ft=dt.to}else{if(ft==_e||(at?types[ft]!=it:types[ft]==it))break;ft++}ut?emitSpans(j,st,ft,et+1,tt,ut,rt):st<ft&&rt.push(new BidiSpan(st,ft,ct)),st=ft}else for(let st=_e,ot=nt.length;st>$;){let at=!0,lt=!1;if(!ot||st>nt[ot-1].to){let dt=types[st-1];dt!=it&&(at=!1,lt=dt==16)}let ut=!at&&it==1?[]:null,ct=at?et:et+1,ft=st;e:for(;;)if(ot&&ft==nt[ot-1].to){if(lt)break e;let dt=nt[--ot];if(!at)for(let mt=dt.from,pt=ot;;){if(mt==$)break e;if(pt&&nt[pt-1].to==mt)mt=nt[--pt].from;else{if(types[mt-1]==it)break e;break}}if(ut)ut.push(dt);else{dt.to<st&&rt.push(new BidiSpan(dt.to,st,ct));let mt=dt.direction==LTR!=!(ct%2);computeSectionOrder(j,mt?et+1:et,tt,dt.inner,dt.from,dt.to,rt),st=dt.from}ft=dt.from}else{if(ft==$||(at?types[ft-1]!=it:types[ft-1]==it))break;ft--}ut?emitSpans(j,ft,st,et+1,tt,ut,rt):ft<st&&rt.push(new BidiSpan(ft,st,ct)),st=ft}}function computeSectionOrder(j,$,_e,et,tt,nt,rt){let it=$%2?2:1;computeCharTypes(j,tt,nt,et,it),processBracketPairs(j,tt,nt,et,it),processNeutrals(tt,nt,et,it),emitSpans(j,tt,nt,$,_e,et,rt)}function computeOrder(j,$,_e){if(!j)return[new BidiSpan(0,0,$==RTL?1:0)];if($==LTR&&!_e.length&&!BidiRE.test(j))return trivialOrder(j.length);if(_e.length)for(;j.length>types.length;)types[types.length]=256;let et=[],tt=$==LTR?0:1;return computeSectionOrder(j,tt,tt,_e,0,j.length,et),et}function trivialOrder(j){return[new BidiSpan(0,j,0)]}let movedOver="";function moveVisually(j,$,_e,et,tt){var nt;let rt=et.head-j.from,it=BidiSpan.find($,rt,(nt=et.bidiLevel)!==null&&nt!==void 0?nt:-1,et.assoc),st=$[it],ot=st.side(tt,_e);if(rt==ot){let ut=it+=tt?1:-1;if(ut<0||ut>=$.length)return null;st=$[it=ut],rt=st.side(!tt,_e),ot=st.side(tt,_e)}let at=findClusterBreak(j.text,rt,st.forward(tt,_e));(at<st.from||at>st.to)&&(at=ot),movedOver=j.text.slice(Math.min(rt,at),Math.max(rt,at));let lt=it==(tt?$.length-1:0)?null:$[it+(tt?1:-1)];return lt&&at==ot&&lt.level+(tt?0:1)<st.level?EditorSelection.cursor(lt.side(!tt,_e)+j.from,lt.forward(tt,_e)?1:-1,lt.level):EditorSelection.cursor(at+j.from,st.forward(tt,_e)?-1:1,st.level)}function autoDirection(j,$,_e){for(let et=$;et<_e;et++){let tt=charType(j.charCodeAt(et));if(tt==1)return LTR;if(tt==2||tt==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:j=>j.some($=>$)}),nativeSelectionHidden=Facet.define({combine:j=>j.some($=>$)});class ScrollTarget{constructor($,_e="nearest",et="nearest",tt=5,nt=5,rt=!1){this.range=$,this.y=_e,this.x=et,this.yMargin=tt,this.xMargin=nt,this.isSnapshot=rt}map($){return $.empty?this:new ScrollTarget(this.range.map($),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip($){return this.range.to<=$.doc.length?this:new ScrollTarget(EditorSelection.cursor($.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(j,$)=>j.map($)});function logException(j,$,_e){let et=j.facet(exceptionSink);et.length?et[0]($):window.onerror?window.onerror(String($),_e,void 0,void 0,$):_e?console.error(_e+":",$):console.error($)}const editable=Facet.define({combine:j=>j.length?j[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor($,_e,et,tt,nt){this.id=$,this.create=_e,this.domEventHandlers=et,this.domEventObservers=tt,this.extension=nt(this)}static define($,_e){const{eventHandlers:et,eventObservers:tt,provide:nt,decorations:rt}=_e||{};return new ViewPlugin(nextPluginID++,$,et,tt,it=>{let st=[viewPlugin.of(it)];return rt&&st.push(decorations.of(ot=>{let at=ot.plugin(it);return at?rt(at):Decoration.none})),nt&&st.push(nt(it)),st})}static fromClass($,_e){return ViewPlugin.define(et=>new $(et),_e)}}class PluginInstance{constructor($){this.spec=$,this.mustUpdate=null,this.value=null}update($){if(this.value){if(this.mustUpdate){let _e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(_e)}catch(et){if(logException(_e.state,et,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create($)}catch(_e){logException($.state,_e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy($){var _e;if(!((_e=this.value)===null||_e===void 0)&&_e.destroy)try{this.value.destroy()}catch(et){logException($.state,et,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(j,$){let _e=j.state.facet(bidiIsolatedRanges);if(!_e.length)return _e;let et=_e.map(nt=>nt instanceof Function?nt(j):nt),tt=[];return RangeSet.spans(et,$.from,$.to,{point(){},span(nt,rt,it,st){let ot=nt-$.from,at=rt-$.from,lt=tt;for(let ut=it.length-1;ut>=0;ut--,st--){let ct=it[ut].spec.bidiIsolate,ft;if(ct==null&&(ct=autoDirection($.text,ot,at)),st>0&&lt.length&&(ft=lt[lt.length-1]).to==ot&&ft.direction==ct)ft.to=at,lt=ft.inner;else{let dt={from:ot,to:at,direction:ct,inner:[]};lt.push(dt),lt=dt.inner}}}}),tt}const scrollMargins=Facet.define();function getScrollMargins(j){let $=0,_e=0,et=0,tt=0;for(let nt of j.state.facet(scrollMargins)){let rt=nt(j);rt&&(rt.left!=null&&($=Math.max($,rt.left)),rt.right!=null&&(_e=Math.max(_e,rt.right)),rt.top!=null&&(et=Math.max(et,rt.top)),rt.bottom!=null&&(tt=Math.max(tt,rt.bottom)))}return{left:$,right:_e,top:et,bottom:tt}}const styleModule=Facet.define();class ChangedRange{constructor($,_e,et,tt){this.fromA=$,this.toA=_e,this.fromB=et,this.toB=tt}join($){return new ChangedRange(Math.min(this.fromA,$.fromA),Math.max(this.toA,$.toA),Math.min(this.fromB,$.fromB),Math.max(this.toB,$.toB))}addToSet($){let _e=$.length,et=this;for(;_e>0;_e--){let tt=$[_e-1];if(!(tt.fromA>et.toA)){if(tt.toA<et.fromA)break;et=et.join(tt),$.splice(_e-1,1)}}return $.splice(_e,0,et),$}static extendWithRanges($,_e){if(_e.length==0)return $;let et=[];for(let tt=0,nt=0,rt=0,it=0;;tt++){let st=tt==$.length?null:$[tt],ot=rt-it,at=st?st.fromB:1e9;for(;nt<_e.length&&_e[nt]<at;){let lt=_e[nt],ut=_e[nt+1],ct=Math.max(it,lt),ft=Math.min(at,ut);if(ct<=ft&&new ChangedRange(ct+ot,ft+ot,ct,ft).addToSet(et),ut>at)break;nt+=2}if(!st)return et;new ChangedRange(st.fromA,st.toA,st.fromB,st.toB).addToSet(et),rt=st.toA,it=st.toB}}}class ViewUpdate{constructor($,_e,et){this.view=$,this.state=_e,this.transactions=et,this.flags=0,this.startState=$.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let nt of et)this.changes=this.changes.compose(nt.changes);let tt=[];this.changes.iterChangedRanges((nt,rt,it,st)=>tt.push(new ChangedRange(nt,rt,it,st))),this.changedRanges=tt}static create($,_e,et){return new ViewUpdate($,_e,et)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some($=>$.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor($){super(),this.view=$,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM($.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,$.state.doc.length)],0,null)}update($){var _e;let et=$.changedRanges;this.minWidth>0&&et.length&&(et.every(({fromA:ot,toA:at})=>at<this.minWidthFrom||ot>this.minWidthTo)?(this.minWidthFrom=$.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=$.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let tt=-1;this.view.inputState.composing>=0&&(!((_e=this.domChanged)===null||_e===void 0)&&_e.newSel?tt=this.domChanged.newSel.head:!touchesComposition($.changes,this.hasComposition)&&!$.selectionSet&&(tt=$.state.selection.main.head));let nt=tt>-1?findCompositionRange(this.view,$.changes,tt):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:ot,to:at}=this.hasComposition;et=new ChangedRange(ot,at,$.changes.mapPos(ot,-1),$.changes.mapPos(at,1)).addToSet(et.slice())}this.hasComposition=nt?{from:nt.range.fromB,to:nt.range.toB}:null,(browser.ie||browser.chrome)&&!nt&&$&&$.state.doc.lines!=$.startState.doc.lines&&(this.forceSelection=!0);let rt=this.decorations,it=this.updateDeco(),st=findChangedDeco(rt,it,$.changes);return et=ChangedRange.extendWithRanges(et,st),!(this.flags&7)&&et.length==0?!1:(this.updateInner(et,$.startState.doc.length,nt),$.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner($,_e,et){this.view.viewState.mustMeasureContent=!0,this.updateChildren($,_e,et);let{observer:tt}=this.view;tt.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let rt=browser.chrome||browser.ios?{node:tt.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,rt),this.flags&=-8,rt&&(rt.written||tt.selectionRange.focusNode!=rt.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(rt=>rt.flags&=-9);let nt=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let rt of this.children)rt instanceof BlockWidgetView&&rt.widget instanceof BlockGapWidget&&nt.push(rt.dom);tt.updateGaps(nt)}updateChildren($,_e,et){let tt=et?et.range.addToSet($.slice()):$,nt=this.childCursor(_e);for(let rt=tt.length-1;;rt--){let it=rt>=0?tt[rt]:null;if(!it)break;let{fromA:st,toA:ot,fromB:at,toB:lt}=it,ut,ct,ft,dt;if(et&&et.range.fromB<lt&&et.range.toB>at){let Ct=ContentBuilder.build(this.view.state.doc,at,et.range.fromB,this.decorations,this.dynamicDecorationMap),At=ContentBuilder.build(this.view.state.doc,et.range.toB,lt,this.decorations,this.dynamicDecorationMap);ct=Ct.breakAtStart,ft=Ct.openStart,dt=At.openEnd;let $t=this.compositionView(et);At.breakAtStart?$t.breakAfter=1:At.content.length&&$t.merge($t.length,$t.length,At.content[0],!1,At.openStart,0)&&($t.breakAfter=At.content[0].breakAfter,At.content.shift()),Ct.content.length&&$t.merge(0,0,Ct.content[Ct.content.length-1],!0,0,Ct.openEnd)&&Ct.content.pop(),ut=Ct.content.concat($t).concat(At.content)}else({content:ut,breakAtStart:ct,openStart:ft,openEnd:dt}=ContentBuilder.build(this.view.state.doc,at,lt,this.decorations,this.dynamicDecorationMap));let{i:mt,off:pt}=nt.findPos(ot,1),{i:yt,off:vt}=nt.findPos(st,-1);replaceRange(this,yt,vt,mt,pt,ut,ct,ft,dt)}et&&this.fixCompositionDOM(et)}compositionView($){let _e=new TextView($.text.nodeValue);_e.flags|=8;for(let{deco:tt}of $.marks)_e=new MarkView(tt,[_e],_e.length);let et=new LineView;return et.append(_e,0),et}fixCompositionDOM($){let _e=(nt,rt)=>{rt.flags|=8|(rt.children.some(st=>st.flags&7)?1:0),this.markedForComposition.add(rt);let it=ContentView.get(nt);it&&it!=rt&&(it.dom=null),rt.setDOM(nt)},et=this.childPos($.range.fromB,1),tt=this.children[et.i];_e($.line,tt);for(let nt=$.marks.length-1;nt>=-1;nt--)et=tt.childPos(et.off,1),tt=tt.children[et.i],_e(nt>=0?$.marks[nt].node:$.text,tt)}updateSelection($=!1,_e=!1){($||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let et=this.view.root.activeElement,tt=et==this.dom,nt=!tt&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(et&&this.dom.contains(et));if(!(tt||_e||nt))return;let rt=this.forceSelection;this.forceSelection=!1;let it=this.view.state.selection.main,st=this.moveToLine(this.domAtPos(it.anchor)),ot=it.empty?st:this.moveToLine(this.domAtPos(it.head));if(browser.gecko&&it.empty&&!this.hasComposition&&betweenUneditable(st)){let lt=document.createTextNode("");this.view.observer.ignore(()=>st.node.insertBefore(lt,st.node.childNodes[st.offset]||null)),st=ot=new DOMPos(lt,0),rt=!0}let at=this.view.observer.selectionRange;(rt||!at.focusNode||(!isEquivalentPosition(st.node,st.offset,at.anchorNode,at.anchorOffset)||!isEquivalentPosition(ot.node,ot.offset,at.focusNode,at.focusOffset))&&!this.suppressWidgetCursorChange(at,it))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(at.focusNode)&&inUneditable(at.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let lt=getSelection(this.view.root);if(lt)if(it.empty){if(browser.gecko){let ut=nextToUneditable(st.node,st.offset);if(ut&&ut!=3){let ct=nearbyTextNode(st.node,st.offset,ut==1?1:-1);ct&&(st=new DOMPos(ct.node,ct.offset))}}lt.collapse(st.node,st.offset),it.bidiLevel!=null&&lt.caretBidiLevel!==void 0&&(lt.caretBidiLevel=it.bidiLevel)}else if(lt.extend){lt.collapse(st.node,st.offset);try{lt.extend(ot.node,ot.offset)}catch{}}else{let ut=document.createRange();it.anchor>it.head&&([st,ot]=[ot,st]),ut.setEnd(ot.node,ot.offset),ut.setStart(st.node,st.offset),lt.removeAllRanges(),lt.addRange(ut)}nt&&this.view.root.activeElement==this.dom&&(this.dom.blur(),et&&et.focus())}),this.view.observer.setSelectionRange(st,ot)),this.impreciseAnchor=st.precise?null:new DOMPos(at.anchorNode,at.anchorOffset),this.impreciseHead=ot.precise?null:new DOMPos(at.focusNode,at.focusOffset)}suppressWidgetCursorChange($,_e){return this.hasComposition&&_e.empty&&isEquivalentPosition($.focusNode,$.focusOffset,$.anchorNode,$.anchorOffset)&&this.posFromDOM($.focusNode,$.focusOffset)==_e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:$}=this,_e=$.state.selection.main,et=getSelection($.root),{anchorNode:tt,anchorOffset:nt}=$.observer.selectionRange;if(!et||!_e.empty||!_e.assoc||!et.modify)return;let rt=LineView.find(this,_e.head);if(!rt)return;let it=rt.posAtStart;if(_e.head==it||_e.head==it+rt.length)return;let st=this.coordsAt(_e.head,-1),ot=this.coordsAt(_e.head,1);if(!st||!ot||st.bottom>ot.top)return;let at=this.domAtPos(_e.head+_e.assoc);et.collapse(at.node,at.offset),et.modify("move",_e.assoc<0?"forward":"backward","lineboundary"),$.observer.readSelectionRange();let lt=$.observer.selectionRange;$.docView.posFromDOM(lt.anchorNode,lt.anchorOffset)!=_e.from&&et.collapse(tt,nt)}moveToLine($){let _e=this.dom,et;if($.node!=_e)return $;for(let tt=$.offset;!et&&tt<_e.childNodes.length;tt++){let nt=ContentView.get(_e.childNodes[tt]);nt instanceof LineView&&(et=nt.domAtPos(0))}for(let tt=$.offset-1;!et&&tt>=0;tt--){let nt=ContentView.get(_e.childNodes[tt]);nt instanceof LineView&&(et=nt.domAtPos(nt.length))}return et?new DOMPos(et.node,et.offset,!0):$}nearest($){for(let _e=$;_e;){let et=ContentView.get(_e);if(et&&et.rootView==this)return et;_e=_e.parentNode}return null}posFromDOM($,_e){let et=this.nearest($);if(!et)throw new RangeError("Trying to find position for a DOM position outside of the document");return et.localPosFromDOM($,_e)+et.posAtStart}domAtPos($){let{i:_e,off:et}=this.childCursor().findPos($,-1);for(;_e<this.children.length-1;){let tt=this.children[_e];if(et<tt.length||tt instanceof LineView)break;_e++,et=0}return this.children[_e].domAtPos(et)}coordsAt($,_e){let et=null,tt=0;for(let nt=this.length,rt=this.children.length-1;rt>=0;rt--){let it=this.children[rt],st=nt-it.breakAfter,ot=st-it.length;if(st<$)break;ot<=$&&(ot<$||it.covers(-1))&&(st>$||it.covers(1))&&(!et||it instanceof LineView&&!(et instanceof LineView&&_e>=0))&&(et=it,tt=ot),nt=ot}return et?et.coordsAt($-tt,_e):null}coordsForChar($){let{i:_e,off:et}=this.childPos($,1),tt=this.children[_e];if(!(tt instanceof LineView))return null;for(;tt.children.length;){let{i:it,off:st}=tt.childPos(et,1);for(;;it++){if(it==tt.children.length)return null;if((tt=tt.children[it]).length)break}et=st}if(!(tt instanceof TextView))return null;let nt=findClusterBreak(tt.text,et);if(nt==et)return null;let rt=textRange(tt.dom,et,nt).getClientRects();for(let it=0;it<rt.length;it++){let st=rt[it];if(it==rt.length-1||st.top<st.bottom&&st.left<st.right)return st}return null}measureVisibleLineHeights($){let _e=[],{from:et,to:tt}=$,nt=this.view.contentDOM.clientWidth,rt=nt>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,it=-1,st=this.view.textDirection==Direction.LTR;for(let ot=0,at=0;at<this.children.length;at++){let lt=this.children[at],ut=ot+lt.length;if(ut>tt)break;if(ot>=et){let ct=lt.dom.getBoundingClientRect();if(_e.push(ct.height),rt){let ft=lt.dom.lastChild,dt=ft?clientRectsFor(ft):[];if(dt.length){let mt=dt[dt.length-1],pt=st?mt.right-ct.left:ct.right-mt.left;pt>it&&(it=pt,this.minWidth=nt,this.minWidthFrom=ot,this.minWidthTo=ut)}}}ot=ut+lt.breakAfter}return _e}textDirectionAt($){let{i:_e}=this.childPos($,1);return getComputedStyle(this.children[_e].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let nt of this.children)if(nt instanceof LineView){let rt=nt.measureTextSize();if(rt)return rt}let $=document.createElement("div"),_e,et,tt;return $.className="cm-line",$.style.width="99999px",$.style.position="absolute",$.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild($);let nt=clientRectsFor($.firstChild)[0];_e=$.getBoundingClientRect().height,et=nt?nt.width/27:7,tt=nt?nt.height:_e,$.remove()}),{lineHeight:_e,charWidth:et,textHeight:tt}}childCursor($=this.length){let _e=this.children.length;return _e&&($-=this.children[--_e].length),new ChildCursor(this.children,$,_e)}computeBlockGapDeco(){let $=[],_e=this.view.viewState;for(let et=0,tt=0;;tt++){let nt=tt==_e.viewports.length?null:_e.viewports[tt],rt=nt?nt.from-1:this.length;if(rt>et){let it=(_e.lineBlockAt(rt).bottom-_e.lineBlockAt(et).top)/this.view.scaleY;$.push(Decoration.replace({widget:new BlockGapWidget(it),block:!0,inclusive:!0,isBlockGap:!0}).range(et,rt))}if(!nt)break;et=nt.to+1}return Decoration.set($)}updateDeco(){let $=this.view.state.facet(decorations).map((tt,nt)=>(this.dynamicDecorationMap[nt]=typeof tt=="function")?tt(this.view):tt),_e=!1,et=this.view.state.facet(outerDecorations).map((tt,nt)=>{let rt=typeof tt=="function";return rt&&(_e=!0),rt?tt(this.view):tt});et.length&&(this.dynamicDecorationMap[$.length]=_e,$.push(RangeSet.join(et)));for(let tt=$.length;tt<$.length+3;tt++)this.dynamicDecorationMap[tt]=!1;return this.decorations=[...$,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView($){if($.isSnapshot){let ot=this.view.viewState.lineBlockAt($.range.head);this.view.scrollDOM.scrollTop=ot.top-$.yMargin,this.view.scrollDOM.scrollLeft=$.xMargin;return}let{range:_e}=$,et=this.coordsAt(_e.head,_e.empty?_e.assoc:_e.head>_e.anchor?-1:1),tt;if(!et)return;!_e.empty&&(tt=this.coordsAt(_e.anchor,_e.anchor>_e.head?-1:1))&&(et={left:Math.min(et.left,tt.left),top:Math.min(et.top,tt.top),right:Math.max(et.right,tt.right),bottom:Math.max(et.bottom,tt.bottom)});let nt=getScrollMargins(this.view),rt={left:et.left-nt.left,top:et.top-nt.top,right:et.right+nt.right,bottom:et.bottom+nt.bottom},{offsetWidth:it,offsetHeight:st}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,rt,_e.head<_e.anchor?-1:1,$.x,$.y,Math.max(Math.min($.xMargin,it),-it),Math.max(Math.min($.yMargin,st),-st),this.view.textDirection==Direction.LTR)}}function betweenUneditable(j){return j.node.nodeType==1&&j.node.firstChild&&(j.offset==0||j.node.childNodes[j.offset-1].contentEditable=="false")&&(j.offset==j.node.childNodes.length||j.node.childNodes[j.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor($){super(),this.height=$}toDOM(){let $=document.createElement("div");return $.className="cm-gap",this.updateDOM($),$}eq($){return $.height==this.height}updateDOM($){return $.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function findCompositionNode(j,$){let _e=j.observer.selectionRange,et=_e.focusNode&&nearbyTextNode(_e.focusNode,_e.focusOffset,0);if(!et)return null;let tt=$-et.offset;return{from:tt,to:tt+et.node.nodeValue.length,node:et.node}}function findCompositionRange(j,$,_e){let et=findCompositionNode(j,_e);if(!et)return null;let{node:tt,from:nt,to:rt}=et,it=tt.nodeValue;if(/[\n\r]/.test(it)||j.state.doc.sliceString(et.from,et.to)!=it)return null;let st=$.invertedDesc,ot=new ChangedRange(st.mapPos(nt),st.mapPos(rt),nt,rt),at=[];for(let lt=tt.parentNode;;lt=lt.parentNode){let ut=ContentView.get(lt);if(ut instanceof MarkView)at.push({node:lt,deco:ut.mark});else{if(ut instanceof LineView||lt.nodeName=="DIV"&&lt.parentNode==j.contentDOM)return{range:ot,text:tt,marks:at,line:lt};if(lt!=j.contentDOM)at.push({node:lt,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(lt),tagName:lt.tagName.toLowerCase()})});else return null}}}function nearbyTextNode(j,$,_e){if(_e<=0)for(let et=j,tt=$;;){if(et.nodeType==3)return{node:et,offset:tt};if(et.nodeType==1&&tt>0)et=et.childNodes[tt-1],tt=maxOffset(et);else break}if(_e>=0)for(let et=j,tt=$;;){if(et.nodeType==3)return{node:et,offset:tt};if(et.nodeType==1&&tt<et.childNodes.length&&_e>=0)et=et.childNodes[tt],tt=0;else break}return null}function nextToUneditable(j,$){return j.nodeType!=1?0:($&&j.childNodes[$-1].contentEditable=="false"?1:0)|($<j.childNodes.length&&j.childNodes[$].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange($,_e){addRange($,_e,this.changes)}comparePoint($,_e){addRange($,_e,this.changes)}};function findChangedDeco(j,$,_e){let et=new DecorationComparator$1;return RangeSet.compare(j,$,_e,et),et.changes}function inUneditable(j,$){for(let _e=j;_e&&_e!=$;_e=_e.assignedSlot||_e.parentNode)if(_e.nodeType==1&&_e.contentEditable=="false")return!0;return!1}function touchesComposition(j,$){let _e=!1;return $&&j.iterChangedRanges((et,tt)=>{et<$.to&&tt>$.from&&(_e=!0)}),_e}function groupAt(j,$,_e=1){let et=j.charCategorizer($),tt=j.doc.lineAt($),nt=$-tt.from;if(tt.length==0)return EditorSelection.cursor($);nt==0?_e=1:nt==tt.length&&(_e=-1);let rt=nt,it=nt;_e<0?rt=findClusterBreak(tt.text,nt,!1):it=findClusterBreak(tt.text,nt);let st=et(tt.text.slice(rt,it));for(;rt>0;){let ot=findClusterBreak(tt.text,rt,!1);if(et(tt.text.slice(ot,rt))!=st)break;rt=ot}for(;it<tt.length;){let ot=findClusterBreak(tt.text,it);if(et(tt.text.slice(it,ot))!=st)break;it=ot}return EditorSelection.range(rt+tt.from,it+tt.from)}function getdx(j,$){return $.left>j?$.left-j:Math.max(0,j-$.right)}function getdy(j,$){return $.top>j?$.top-j:Math.max(0,j-$.bottom)}function yOverlap(j,$){return j.top<$.bottom-1&&j.bottom>$.top+1}function upTop(j,$){return $<j.top?{top:$,left:j.left,right:j.right,bottom:j.bottom}:j}function upBot(j,$){return $>j.bottom?{top:j.top,left:j.left,right:j.right,bottom:$}:j}function domPosAtCoords(j,$,_e){let et,tt,nt,rt,it=!1,st,ot,at,lt;for(let ft=j.firstChild;ft;ft=ft.nextSibling){let dt=clientRectsFor(ft);for(let mt=0;mt<dt.length;mt++){let pt=dt[mt];tt&&yOverlap(tt,pt)&&(pt=upTop(upBot(pt,tt.bottom),tt.top));let yt=getdx($,pt),vt=getdy(_e,pt);if(yt==0&&vt==0)return ft.nodeType==3?domPosInText(ft,$,_e):domPosAtCoords(ft,$,_e);if(!et||rt>vt||rt==vt&&nt>yt){et=ft,tt=pt,nt=yt,rt=vt;let Ct=vt?_e<pt.top?-1:1:yt?$<pt.left?-1:1:0;it=!Ct||(Ct>0?mt<dt.length-1:mt>0)}yt==0?_e>pt.bottom&&(!at||at.bottom<pt.bottom)?(st=ft,at=pt):_e<pt.top&&(!lt||lt.top>pt.top)&&(ot=ft,lt=pt):at&&yOverlap(at,pt)?at=upBot(at,pt.bottom):lt&&yOverlap(lt,pt)&&(lt=upTop(lt,pt.top))}}if(at&&at.bottom>=_e?(et=st,tt=at):lt&&lt.top<=_e&&(et=ot,tt=lt),!et)return{node:j,offset:0};let ut=Math.max(tt.left,Math.min(tt.right,$));if(et.nodeType==3)return domPosInText(et,ut,_e);if(it&&et.contentEditable!="false")return domPosAtCoords(et,ut,_e);let ct=Array.prototype.indexOf.call(j.childNodes,et)+($>=(tt.left+tt.right)/2?1:0);return{node:j,offset:ct}}function domPosInText(j,$,_e){let et=j.nodeValue.length,tt=-1,nt=1e9,rt=0;for(let it=0;it<et;it++){let st=textRange(j,it,it+1).getClientRects();for(let ot=0;ot<st.length;ot++){let at=st[ot];if(at.top==at.bottom)continue;rt||(rt=$-at.left);let lt=(at.top>_e?at.top-_e:_e-at.bottom)-1;if(at.left-1<=$&&at.right+1>=$&&lt<nt){let ut=$>=(at.left+at.right)/2,ct=ut;if((browser.chrome||browser.gecko)&&textRange(j,it).getBoundingClientRect().left==at.right&&(ct=!ut),lt<=0)return{node:j,offset:it+(ct?1:0)};tt=it+(ct?1:0),nt=lt}}}return{node:j,offset:tt>-1?tt:rt>0?j.nodeValue.length:0}}function posAtCoords(j,$,_e,et=-1){var tt,nt;let rt=j.contentDOM.getBoundingClientRect(),it=rt.top+j.viewState.paddingTop,st,{docHeight:ot}=j.viewState,{x:at,y:lt}=$,ut=lt-it;if(ut<0)return 0;if(ut>ot)return j.state.doc.length;for(let Ct=j.viewState.heightOracle.textHeight/2,At=!1;st=j.elementAtHeight(ut),st.type!=BlockType.Text;)for(;ut=et>0?st.bottom+Ct:st.top-Ct,!(ut>=0&&ut<=ot);){if(At)return _e?null:0;At=!0,et=-et}lt=it+ut;let ct=st.from;if(ct<j.viewport.from)return j.viewport.from==0?0:_e?null:posAtCoordsImprecise(j,rt,st,at,lt);if(ct>j.viewport.to)return j.viewport.to==j.state.doc.length?j.state.doc.length:_e?null:posAtCoordsImprecise(j,rt,st,at,lt);let ft=j.dom.ownerDocument,dt=j.root.elementFromPoint?j.root:ft,mt=dt.elementFromPoint(at,lt);mt&&!j.contentDOM.contains(mt)&&(mt=null),mt||(at=Math.max(rt.left+1,Math.min(rt.right-1,at)),mt=dt.elementFromPoint(at,lt),mt&&!j.contentDOM.contains(mt)&&(mt=null));let pt,yt=-1;if(mt&&((tt=j.docView.nearest(mt))===null||tt===void 0?void 0:tt.isEditable)!=!1){if(ft.caretPositionFromPoint){let Ct=ft.caretPositionFromPoint(at,lt);Ct&&({offsetNode:pt,offset:yt}=Ct)}else if(ft.caretRangeFromPoint){let Ct=ft.caretRangeFromPoint(at,lt);Ct&&({startContainer:pt,startOffset:yt}=Ct,(!j.contentDOM.contains(pt)||browser.safari&&isSuspiciousSafariCaretResult(pt,yt,at)||browser.chrome&&isSuspiciousChromeCaretResult(pt,yt,at))&&(pt=void 0))}}if(!pt||!j.docView.dom.contains(pt)){let Ct=LineView.find(j.docView,ct);if(!Ct)return ut>st.top+st.height/2?st.to:st.from;({node:pt,offset:yt}=domPosAtCoords(Ct.dom,at,lt))}let vt=j.docView.nearest(pt);if(!vt)return null;if(vt.isWidget&&((nt=vt.dom)===null||nt===void 0?void 0:nt.nodeType)==1){let Ct=vt.dom.getBoundingClientRect();return $.y<Ct.top||$.y<=Ct.bottom&&$.x<=(Ct.left+Ct.right)/2?vt.posAtStart:vt.posAtEnd}else return vt.localPosFromDOM(pt,yt)+vt.posAtStart}function posAtCoordsImprecise(j,$,_e,et,tt){let nt=Math.round((et-$.left)*j.defaultCharacterWidth);if(j.lineWrapping&&_e.height>j.defaultLineHeight*1.5){let it=j.viewState.heightOracle.textHeight,st=Math.floor((tt-_e.top-(j.defaultLineHeight-it)*.5)/it);nt+=st*j.viewState.heightOracle.lineLength}let rt=j.state.sliceDoc(_e.from,_e.to);return _e.from+findColumn(rt,nt,j.state.tabSize)}function isSuspiciousSafariCaretResult(j,$,_e){let et;if(j.nodeType!=3||$!=(et=j.nodeValue.length))return!1;for(let tt=j.nextSibling;tt;tt=tt.nextSibling)if(tt.nodeType!=1||tt.nodeName!="BR")return!1;return textRange(j,et-1,et).getBoundingClientRect().left>_e}function isSuspiciousChromeCaretResult(j,$,_e){if($!=0)return!1;for(let tt=j;;){let nt=tt.parentNode;if(!nt||nt.nodeType!=1||nt.firstChild!=tt)return!1;if(nt.classList.contains("cm-line"))break;tt=nt}let et=j.nodeType==1?j.getBoundingClientRect():textRange(j,0,Math.max(j.nodeValue.length,1)).getBoundingClientRect();return _e-et.left>5}function blockAt(j,$){let _e=j.lineBlockAt($);if(Array.isArray(_e.type)){for(let et of _e.type)if(et.to>$||et.to==$&&(et.to==_e.to||et.type==BlockType.Text))return et}return _e}function moveToLineBoundary(j,$,_e,et){let tt=blockAt(j,$.head),nt=!et||tt.type!=BlockType.Text||!(j.lineWrapping||tt.widgetLineBreaks)?null:j.coordsAtPos($.assoc<0&&$.head>tt.from?$.head-1:$.head);if(nt){let rt=j.dom.getBoundingClientRect(),it=j.textDirectionAt(tt.from),st=j.posAtCoords({x:_e==(it==Direction.LTR)?rt.right-1:rt.left+1,y:(nt.top+nt.bottom)/2});if(st!=null)return EditorSelection.cursor(st,_e?-1:1)}return EditorSelection.cursor(_e?tt.to:tt.from,_e?-1:1)}function moveByChar(j,$,_e,et){let tt=j.state.doc.lineAt($.head),nt=j.bidiSpans(tt),rt=j.textDirectionAt(tt.from);for(let it=$,st=null;;){let ot=moveVisually(tt,nt,rt,it,_e),at=movedOver;if(!ot){if(tt.number==(_e?j.state.doc.lines:1))return it;at=`
`,tt=j.state.doc.line(tt.number+(_e?1:-1)),nt=j.bidiSpans(tt),ot=j.visualLineSide(tt,!_e)}if(st){if(!st(at))return it}else{if(!et)return ot;st=et(at)}it=ot}}function byGroup(j,$,_e){let et=j.state.charCategorizer($),tt=et(_e);return nt=>{let rt=et(nt);return tt==CharCategory.Space&&(tt=rt),tt==rt}}function moveVertically(j,$,_e,et){let tt=$.head,nt=_e?1:-1;if(tt==(_e?j.state.doc.length:0))return EditorSelection.cursor(tt,$.assoc);let rt=$.goalColumn,it,st=j.contentDOM.getBoundingClientRect(),ot=j.coordsAtPos(tt,$.assoc||-1),at=j.documentTop;if(ot)rt==null&&(rt=ot.left-st.left),it=nt<0?ot.top:ot.bottom;else{let ct=j.viewState.lineBlockAt(tt);rt==null&&(rt=Math.min(st.right-st.left,j.defaultCharacterWidth*(tt-ct.from))),it=(nt<0?ct.top:ct.bottom)+at}let lt=st.left+rt,ut=et??j.viewState.heightOracle.textHeight>>1;for(let ct=0;;ct+=10){let ft=it+(ut+ct)*nt,dt=posAtCoords(j,{x:lt,y:ft},!1,nt);if(ft<st.top||ft>st.bottom||(nt<0?dt<tt:dt>tt)){let mt=j.docView.coordsForChar(dt),pt=!mt||ft<mt.top?-1:1;return EditorSelection.cursor(dt,pt,void 0,rt)}}}function skipAtomicRanges(j,$,_e){for(;;){let et=0;for(let tt of j)tt.between($-1,$+1,(nt,rt,it)=>{if($>nt&&$<rt){let st=et||_e||($-nt<rt-$?-1:1);$=st<0?nt:rt,et=st}});if(!et)return $}}function skipAtoms(j,$,_e){let et=skipAtomicRanges(j.state.facet(atomicRanges).map(tt=>tt(j)),_e.from,$.head>_e.from?-1:1);return et==_e.from?_e:EditorSelection.cursor(et,et<_e.from?1:-1)}class InputState{setSelectionOrigin($){this.lastSelectionOrigin=$,this.lastSelectionTime=Date.now()}constructor($){this.view=$,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=$.hasFocus,browser.safari&&$.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack($.contentDOM.ownerDocument)}handleEvent($){!eventBelongsToEditor(this.view,$)||this.ignoreDuringComposition($)||$.type=="keydown"&&this.keydown($)||this.runHandlers($.type,$)}runHandlers($,_e){let et=this.handlers[$];if(et){for(let tt of et.observers)tt(this.view,_e);for(let tt of et.handlers){if(_e.defaultPrevented)break;if(tt(this.view,_e)){_e.preventDefault();break}}}}ensureHandlers($){let _e=computeHandlers($),et=this.handlers,tt=this.view.contentDOM;for(let nt in _e)if(nt!="scroll"){let rt=!_e[nt].handlers.length,it=et[nt];it&&rt!=!it.handlers.length&&(tt.removeEventListener(nt,this.handleEvent),it=null),it||tt.addEventListener(nt,this.handleEvent,{passive:rt})}for(let nt in et)nt!="scroll"&&!_e[nt]&&tt.removeEventListener(nt,this.handleEvent);this.handlers=_e}keydown($){if(this.lastKeyCode=$.keyCode,this.lastKeyTime=Date.now(),$.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if($.keyCode!=27&&modifierCodes.indexOf($.keyCode)<0&&(this.view.inputState.lastEscPress=0),browser.android&&browser.chrome&&!$.synthetic&&($.keyCode==13||$.keyCode==8))return this.view.observer.delayAndroidKey($.key,$.keyCode),!0;let _e;return browser.ios&&!$.synthetic&&!$.altKey&&!$.metaKey&&((_e=PendingKeys.find(et=>et.keyCode==$.keyCode))&&!$.ctrlKey||EmacsyPendingKeys.indexOf($.key)>-1&&$.ctrlKey&&!$.shiftKey)?(this.pendingIOSKey=_e||$,setTimeout(()=>this.flushIOSKey(),250),!0):($.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let $=this.pendingIOSKey;return $?(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,$.key,$.keyCode)):!1}ignoreDuringComposition($){return/^key/.test($.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection($){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=$}update($){this.mouseSelection&&this.mouseSelection.update($),this.draggedContent&&$.docChanged&&(this.draggedContent=this.draggedContent.map($.changes)),$.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(j,$){return(_e,et)=>{try{return $.call(j,et,_e)}catch(tt){logException(_e.state,tt)}}}function computeHandlers(j){let $=Object.create(null);function _e(et){return $[et]||($[et]={observers:[],handlers:[]})}for(let et of j){let tt=et.spec;if(tt&&tt.domEventHandlers)for(let nt in tt.domEventHandlers){let rt=tt.domEventHandlers[nt];rt&&_e(nt).handlers.push(bindHandler(et.value,rt))}if(tt&&tt.domEventObservers)for(let nt in tt.domEventObservers){let rt=tt.domEventObservers[nt];rt&&_e(nt).observers.push(bindHandler(et.value,rt))}}for(let et in handlers)_e(et).handlers.push(handlers[et]);for(let et in observers)_e(et).observers.push(observers[et]);return $}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(j){return Math.max(0,j)*.7+8}function dist(j,$){return Math.max(Math.abs(j.clientX-$.clientX),Math.abs(j.clientY-$.clientY))}class MouseSelection{constructor($,_e,et,tt){this.view=$,this.startEvent=_e,this.style=et,this.mustSelect=tt,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=_e,this.scrollParent=scrollableParent($.contentDOM),this.atoms=$.state.facet(atomicRanges).map(rt=>rt($));let nt=$.contentDOM.ownerDocument;nt.addEventListener("mousemove",this.move=this.move.bind(this)),nt.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=_e.shiftKey,this.multiple=$.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange($,_e),this.dragging=isInPrimarySelection($,_e)&&getClickType(_e)==1?null:!1}start($){this.dragging===!1&&this.select($)}move($){var _e;if($.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,$)<10)return;this.select(this.lastEvent=$);let et=0,tt=0,nt=((_e=this.scrollParent)===null||_e===void 0?void 0:_e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},rt=getScrollMargins(this.view);$.clientX-rt.left<=nt.left+dragScrollMargin?et=-dragScrollSpeed(nt.left-$.clientX):$.clientX+rt.right>=nt.right-dragScrollMargin&&(et=dragScrollSpeed($.clientX-nt.right)),$.clientY-rt.top<=nt.top+dragScrollMargin?tt=-dragScrollSpeed(nt.top-$.clientY):$.clientY+rt.bottom>=nt.bottom-dragScrollMargin&&(tt=dragScrollSpeed($.clientY-nt.bottom)),this.setScrollSpeed(et,tt)}up($){this.dragging==null&&this.select(this.lastEvent),this.dragging||$.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let $=this.view.contentDOM.ownerDocument;$.removeEventListener("mousemove",this.move),$.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed($,_e){this.scrollSpeed={x:$,y:_e},$||_e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms($){let _e=null;for(let et=0;et<$.ranges.length;et++){let tt=$.ranges[et],nt=null;if(tt.empty){let rt=skipAtomicRanges(this.atoms,tt.from,0);rt!=tt.from&&(nt=EditorSelection.cursor(rt,-1))}else{let rt=skipAtomicRanges(this.atoms,tt.from,-1),it=skipAtomicRanges(this.atoms,tt.to,1);(rt!=tt.from||it!=tt.to)&&(nt=EditorSelection.range(tt.from==tt.anchor?rt:it,tt.from==tt.head?rt:it))}nt&&(_e||(_e=$.ranges.slice()),_e[et]=nt)}return _e?EditorSelection.create(_e,$.mainIndex):$}select($){let{view:_e}=this,et=this.skipAtoms(this.style.get($,this.extend,this.multiple));(this.mustSelect||!et.eq(_e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:et,userEvent:"select.pointer"}),this.mustSelect=!1}update($){this.style.update($)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(j,$){let _e=j.state.facet(clickAddsSelectionRange);return _e.length?_e[0]($):browser.mac?$.metaKey:$.ctrlKey}function dragMovesSelection(j,$){let _e=j.state.facet(dragMovesSelection$1);return _e.length?_e[0]($):browser.mac?!$.altKey:!$.ctrlKey}function isInPrimarySelection(j,$){let{main:_e}=j.state.selection;if(_e.empty)return!1;let et=getSelection(j.root);if(!et||et.rangeCount==0)return!0;let tt=et.getRangeAt(0).getClientRects();for(let nt=0;nt<tt.length;nt++){let rt=tt[nt];if(rt.left<=$.clientX&&rt.right>=$.clientX&&rt.top<=$.clientY&&rt.bottom>=$.clientY)return!0}return!1}function eventBelongsToEditor(j,$){if(!$.bubbles)return!0;if($.defaultPrevented)return!1;for(let _e=$.target,et;_e!=j.contentDOM;_e=_e.parentNode)if(!_e||_e.nodeType==11||(et=ContentView.get(_e))&&et.ignoreEvent($))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(j){let $=j.dom.parentNode;if(!$)return;let _e=$.appendChild(document.createElement("textarea"));_e.style.cssText="position: fixed; left: -10000px; top: 10px",_e.focus(),setTimeout(()=>{j.focus(),_e.remove(),doPaste(j,_e.value)},50)}function doPaste(j,$){let{state:_e}=j,et,tt=1,nt=_e.toText($),rt=nt.lines==_e.selection.ranges.length;if(lastLinewiseCopy!=null&&_e.selection.ranges.every(st=>st.empty)&&lastLinewiseCopy==nt.toString()){let st=-1;et=_e.changeByRange(ot=>{let at=_e.doc.lineAt(ot.from);if(at.from==st)return{range:ot};st=at.from;let lt=_e.toText((rt?nt.line(tt++).text:$)+_e.lineBreak);return{changes:{from:at.from,insert:lt},range:EditorSelection.cursor(ot.from+lt.length)}})}else rt?et=_e.changeByRange(st=>{let ot=nt.line(tt++);return{changes:{from:st.from,to:st.to,insert:ot.text},range:EditorSelection.cursor(st.from+ot.length)}}):et=_e.replaceSelection(nt);j.dispatch(et,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=j=>{j.inputState.lastScrollTop=j.scrollDOM.scrollTop,j.inputState.lastScrollLeft=j.scrollDOM.scrollLeft};handlers.keydown=(j,$)=>(j.inputState.setSelectionOrigin("select"),$.keyCode==27&&(j.inputState.lastEscPress=Date.now()),!1);observers.touchstart=(j,$)=>{j.inputState.lastTouchTime=Date.now(),j.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=j=>{j.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(j,$)=>{if(j.observer.flush(),j.inputState.lastTouchTime>Date.now()-2e3)return!1;let _e=null;for(let et of j.state.facet(mouseSelectionStyle))if(_e=et(j,$),_e)break;if(!_e&&$.button==0&&(_e=basicMouseSelection(j,$)),_e){let et=!j.hasFocus;j.inputState.startMouseSelection(new MouseSelection(j,$,_e,et)),et&&j.observer.ignore(()=>focusPreventScroll(j.contentDOM));let tt=j.inputState.mouseSelection;if(tt)return tt.start($),tt.dragging===!1}return!1};function rangeForClick(j,$,_e,et){if(et==1)return EditorSelection.cursor($,_e);if(et==2)return groupAt(j.state,$,_e);{let tt=LineView.find(j.docView,$),nt=j.state.doc.lineAt(tt?tt.posAtEnd:$),rt=tt?tt.posAtStart:nt.from,it=tt?tt.posAtEnd:nt.to;return it<j.state.doc.length&&it==nt.to&&it++,EditorSelection.range(rt,it)}}let insideY=(j,$)=>j>=$.top&&j<=$.bottom,inside=(j,$,_e)=>insideY($,_e)&&j>=_e.left&&j<=_e.right;function findPositionSide(j,$,_e,et){let tt=LineView.find(j.docView,$);if(!tt)return 1;let nt=$-tt.posAtStart;if(nt==0)return 1;if(nt==tt.length)return-1;let rt=tt.coordsAt(nt,-1);if(rt&&inside(_e,et,rt))return-1;let it=tt.coordsAt(nt,1);return it&&inside(_e,et,it)?1:rt&&insideY(et,rt)?-1:1}function queryPos(j,$){let _e=j.posAtCoords({x:$.clientX,y:$.clientY},!1);return{pos:_e,bias:findPositionSide(j,_e,$.clientX,$.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(j){if(!BadMouseDetail)return j.detail;let $=lastMouseDown,_e=lastMouseDownTime;return lastMouseDown=j,lastMouseDownTime=Date.now(),lastMouseDownCount=!$||_e>Date.now()-400&&Math.abs($.clientX-j.clientX)<2&&Math.abs($.clientY-j.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(j,$){let _e=queryPos(j,$),et=getClickType($),tt=j.state.selection;return{update(nt){nt.docChanged&&(_e.pos=nt.changes.mapPos(_e.pos),tt=tt.map(nt.changes))},get(nt,rt,it){let st=queryPos(j,nt),ot,at=rangeForClick(j,st.pos,st.bias,et);if(_e.pos!=st.pos&&!rt){let lt=rangeForClick(j,_e.pos,_e.bias,et),ut=Math.min(lt.from,at.from),ct=Math.max(lt.to,at.to);at=ut<at.from?EditorSelection.range(ut,ct):EditorSelection.range(ct,ut)}return rt?tt.replaceRange(tt.main.extend(at.from,at.to)):it&&et==1&&tt.ranges.length>1&&(ot=removeRangeAround(tt,st.pos))?ot:it?tt.addRange(at):EditorSelection.create([at])}}}function removeRangeAround(j,$){for(let _e=0;_e<j.ranges.length;_e++){let{from:et,to:tt}=j.ranges[_e];if(et<=$&&tt>=$)return EditorSelection.create(j.ranges.slice(0,_e).concat(j.ranges.slice(_e+1)),j.mainIndex==_e?0:j.mainIndex-(j.mainIndex>_e?1:0))}return null}handlers.dragstart=(j,$)=>{let{selection:{main:_e}}=j.state;if($.target.draggable){let tt=j.docView.nearest($.target);if(tt&&tt.isWidget){let nt=tt.posAtStart,rt=nt+tt.length;(nt>=_e.to||rt<=_e.from)&&(_e=EditorSelection.range(nt,rt))}}let{inputState:et}=j;return et.mouseSelection&&(et.mouseSelection.dragging=!0),et.draggedContent=_e,$.dataTransfer&&($.dataTransfer.setData("Text",j.state.sliceDoc(_e.from,_e.to)),$.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=j=>(j.inputState.draggedContent=null,!1);function dropText(j,$,_e,et){if(!_e)return;let tt=j.posAtCoords({x:$.clientX,y:$.clientY},!1),{draggedContent:nt}=j.inputState,rt=et&&nt&&dragMovesSelection(j,$)?{from:nt.from,to:nt.to}:null,it={from:tt,insert:_e},st=j.state.changes(rt?[rt,it]:it);j.focus(),j.dispatch({changes:st,selection:{anchor:st.mapPos(tt,-1),head:st.mapPos(tt,1)},userEvent:rt?"move.drop":"input.drop"}),j.inputState.draggedContent=null}handlers.drop=(j,$)=>{if(!$.dataTransfer)return!1;if(j.state.readOnly)return!0;let _e=$.dataTransfer.files;if(_e&&_e.length){let et=Array(_e.length),tt=0,nt=()=>{++tt==_e.length&&dropText(j,$,et.filter(rt=>rt!=null).join(j.state.lineBreak),!1)};for(let rt=0;rt<_e.length;rt++){let it=new FileReader;it.onerror=nt,it.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(it.result)||(et[rt]=it.result),nt()},it.readAsText(_e[rt])}return!0}else{let et=$.dataTransfer.getData("Text");if(et)return dropText(j,$,et,!0),!0}return!1};handlers.paste=(j,$)=>{if(j.state.readOnly)return!0;j.observer.flush();let _e=brokenClipboardAPI?null:$.clipboardData;return _e?(doPaste(j,_e.getData("text/plain")||_e.getData("text/uri-text")),!0):(capturePaste(j),!1)};function captureCopy(j,$){let _e=j.dom.parentNode;if(!_e)return;let et=_e.appendChild(document.createElement("textarea"));et.style.cssText="position: fixed; left: -10000px; top: 10px",et.value=$,et.focus(),et.selectionEnd=$.length,et.selectionStart=0,setTimeout(()=>{et.remove(),j.focus()},50)}function copiedRange(j){let $=[],_e=[],et=!1;for(let tt of j.selection.ranges)tt.empty||($.push(j.sliceDoc(tt.from,tt.to)),_e.push(tt));if(!$.length){let tt=-1;for(let{from:nt}of j.selection.ranges){let rt=j.doc.lineAt(nt);rt.number>tt&&($.push(rt.text),_e.push({from:rt.from,to:Math.min(j.doc.length,rt.to+1)})),tt=rt.number}et=!0}return{text:$.join(j.lineBreak),ranges:_e,linewise:et}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(j,$)=>{let{text:_e,ranges:et,linewise:tt}=copiedRange(j.state);if(!_e&&!tt)return!1;lastLinewiseCopy=tt?_e:null,$.type=="cut"&&!j.state.readOnly&&j.dispatch({changes:et,scrollIntoView:!0,userEvent:"delete.cut"});let nt=brokenClipboardAPI?null:$.clipboardData;return nt?(nt.clearData(),nt.setData("text/plain",_e),!0):(captureCopy(j,_e),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(j,$){let _e=[];for(let et of j.facet(focusChangeEffect)){let tt=et(j,$);tt&&_e.push(tt)}return _e?j.update({effects:_e,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(j){setTimeout(()=>{let $=j.hasFocus;if($!=j.inputState.notifiedFocused){let _e=focusChangeTransaction(j.state,$);_e?j.dispatch(_e):j.update([])}},10)}observers.focus=j=>{j.inputState.lastFocusTime=Date.now(),!j.scrollDOM.scrollTop&&(j.inputState.lastScrollTop||j.inputState.lastScrollLeft)&&(j.scrollDOM.scrollTop=j.inputState.lastScrollTop,j.scrollDOM.scrollLeft=j.inputState.lastScrollLeft),updateForFocusChange(j)};observers.blur=j=>{j.observer.clearSelectionRange(),updateForFocusChange(j)};observers.compositionstart=observers.compositionupdate=j=>{j.inputState.compositionFirstChange==null&&(j.inputState.compositionFirstChange=!0),j.inputState.composing<0&&(j.inputState.composing=0)};observers.compositionend=j=>{j.inputState.composing=-1,j.inputState.compositionEndedAt=Date.now(),j.inputState.compositionPendingKey=!0,j.inputState.compositionPendingChange=j.observer.pendingRecords().length>0,j.inputState.compositionFirstChange=null,browser.chrome&&browser.android?j.observer.flushSoon():j.inputState.compositionPendingChange?Promise.resolve().then(()=>j.observer.flush()):setTimeout(()=>{j.inputState.composing<0&&j.docView.hasComposition&&j.update([])},50)};observers.contextmenu=j=>{j.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(j,$)=>{var _e;let et;if(browser.chrome&&browser.android&&(et=PendingKeys.find(tt=>tt.inputType==$.inputType))&&(j.observer.delayAndroidKey(et.key,et.keyCode),et.key=="Backspace"||et.key=="Delete")){let tt=((_e=window.visualViewport)===null||_e===void 0?void 0:_e.height)||0;setTimeout(()=>{var nt;(((nt=window.visualViewport)===null||nt===void 0?void 0:nt.height)||0)>tt+10&&j.hasFocus&&(j.contentDOM.blur(),j.focus())},100)}return!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(j){appliedFirefoxHack.has(j)||(appliedFirefoxHack.add(j),j.addEventListener("copy",()=>{}),j.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor($){this.lineWrapping=$,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap($,_e){let et=this.doc.lineAt(_e).number-this.doc.lineAt($).number+1;return this.lineWrapping&&(et+=Math.max(0,Math.ceil((_e-$-et*this.lineLength*.5)/this.lineLength))),this.lineHeight*et}heightForLine($){return this.lineWrapping?(1+Math.max(0,Math.ceil(($-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc($){return this.doc=$,this}mustRefreshForWrapping($){return wrappingWhiteSpace.indexOf($)>-1!=this.lineWrapping}mustRefreshForHeights($){let _e=!1;for(let et=0;et<$.length;et++){let tt=$[et];tt<0?et++:this.heightSamples[Math.floor(tt*10)]||(_e=!0,this.heightSamples[Math.floor(tt*10)]=!0)}return _e}refresh($,_e,et,tt,nt,rt){let it=wrappingWhiteSpace.indexOf($)>-1,st=Math.round(_e)!=Math.round(this.lineHeight)||this.lineWrapping!=it;if(this.lineWrapping=it,this.lineHeight=_e,this.charWidth=et,this.textHeight=tt,this.lineLength=nt,st){this.heightSamples={};for(let ot=0;ot<rt.length;ot++){let at=rt[ot];at<0?ot++:this.heightSamples[Math.floor(at*10)]=!0}}return st}}class MeasuredHeights{constructor($,_e){this.from=$,this.heights=_e,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor($,_e,et,tt,nt){this.from=$,this.length=_e,this.top=et,this.height=tt,this._content=nt}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join($){let _e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray($._content)?$._content:[$]);return new BlockInfo(this.from,this.length+$.length,this.top,this.height+$.height,_e)}}var QueryType$1=function(j){return j[j.ByPos=0]="ByPos",j[j.ByHeight=1]="ByHeight",j[j.ByPosNoHeight=2]="ByPosNoHeight",j}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor($,_e,et=2){this.length=$,this.height=_e,this.flags=et}get outdated(){return(this.flags&2)>0}set outdated($){this.flags=($?2:0)|this.flags&-3}setHeight($,_e){this.height!=_e&&(Math.abs(this.height-_e)>Epsilon&&($.heightChanged=!0),this.height=_e)}replace($,_e,et){return HeightMap.of(et)}decomposeLeft($,_e){_e.push(this)}decomposeRight($,_e){_e.push(this)}applyChanges($,_e,et,tt){let nt=this,rt=et.doc;for(let it=tt.length-1;it>=0;it--){let{fromA:st,toA:ot,fromB:at,toB:lt}=tt[it],ut=nt.lineAt(st,QueryType$1.ByPosNoHeight,et.setDoc(_e),0,0),ct=ut.to>=ot?ut:nt.lineAt(ot,QueryType$1.ByPosNoHeight,et,0,0);for(lt+=ct.to-ot,ot=ct.to;it>0&&ut.from<=tt[it-1].toA;)st=tt[it-1].fromA,at=tt[it-1].fromB,it--,st<ut.from&&(ut=nt.lineAt(st,QueryType$1.ByPosNoHeight,et,0,0));at+=ut.from-st,st=ut.from;let ft=NodeBuilder.build(et.setDoc(rt),$,at,lt);nt=nt.replace(st,ot,ft)}return nt.updateHeight(et,0)}static empty(){return new HeightMapText(0,0)}static of($){if($.length==1)return $[0];let _e=0,et=$.length,tt=0,nt=0;for(;;)if(_e==et)if(tt>nt*2){let it=$[_e-1];it.break?$.splice(--_e,1,it.left,null,it.right):$.splice(--_e,1,it.left,it.right),et+=1+it.break,tt-=it.size}else if(nt>tt*2){let it=$[et];it.break?$.splice(et,1,it.left,null,it.right):$.splice(et,1,it.left,it.right),et+=2+it.break,nt-=it.size}else break;else if(tt<nt){let it=$[_e++];it&&(tt+=it.size)}else{let it=$[--et];it&&(nt+=it.size)}let rt=0;return $[_e-1]==null?(rt=1,_e--):$[_e]==null&&(rt=1,et++),new HeightMapBranch(HeightMap.of($.slice(0,_e)),rt,HeightMap.of($.slice(et)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor($,_e,et){super($,_e),this.deco=et}blockAt($,_e,et,tt){return new BlockInfo(tt,this.length,et,this.height,this.deco||0)}lineAt($,_e,et,tt,nt){return this.blockAt(0,et,tt,nt)}forEachLine($,_e,et,tt,nt,rt){$<=nt+this.length&&_e>=nt&&rt(this.blockAt(0,et,tt,nt))}updateHeight($,_e=0,et=!1,tt){return tt&&tt.from<=_e&&tt.more&&this.setHeight($,tt.heights[tt.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor($,_e){super($,_e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt($,_e,et,tt){return new BlockInfo(tt,this.length,et,this.height,this.breaks)}replace($,_e,et){let tt=et[0];return et.length==1&&(tt instanceof HeightMapText||tt instanceof HeightMapGap&&tt.flags&4)&&Math.abs(this.length-tt.length)<10?(tt instanceof HeightMapGap?tt=new HeightMapText(tt.length,this.height):tt.height=this.height,this.outdated||(tt.outdated=!1),tt):HeightMap.of(et)}updateHeight($,_e=0,et=!1,tt){return tt&&tt.from<=_e&&tt.more?this.setHeight($,tt.heights[tt.index++]):(et||this.outdated)&&this.setHeight($,Math.max(this.widgetHeight,$.heightForLine(this.length-this.collapsed))+this.breaks*$.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor($){super($,0)}heightMetrics($,_e){let et=$.doc.lineAt(_e).number,tt=$.doc.lineAt(_e+this.length).number,nt=tt-et+1,rt,it=0;if($.lineWrapping){let st=Math.min(this.height,$.lineHeight*nt);rt=st/nt,this.length>nt+1&&(it=(this.height-st)/(this.length-nt-1))}else rt=this.height/nt;return{firstLine:et,lastLine:tt,perLine:rt,perChar:it}}blockAt($,_e,et,tt){let{firstLine:nt,lastLine:rt,perLine:it,perChar:st}=this.heightMetrics(_e,tt);if(_e.lineWrapping){let ot=tt+Math.round(Math.max(0,Math.min(1,($-et)/this.height))*this.length),at=_e.doc.lineAt(ot),lt=it+at.length*st,ut=Math.max(et,$-lt/2);return new BlockInfo(at.from,at.length,ut,lt,0)}else{let ot=Math.max(0,Math.min(rt-nt,Math.floor(($-et)/it))),{from:at,length:lt}=_e.doc.line(nt+ot);return new BlockInfo(at,lt,et+it*ot,it,0)}}lineAt($,_e,et,tt,nt){if(_e==QueryType$1.ByHeight)return this.blockAt($,et,tt,nt);if(_e==QueryType$1.ByPosNoHeight){let{from:ct,to:ft}=et.doc.lineAt($);return new BlockInfo(ct,ft-ct,0,0,0)}let{firstLine:rt,perLine:it,perChar:st}=this.heightMetrics(et,nt),ot=et.doc.lineAt($),at=it+ot.length*st,lt=ot.number-rt,ut=tt+it*lt+st*(ot.from-nt-lt);return new BlockInfo(ot.from,ot.length,Math.max(tt,Math.min(ut,tt+this.height-at)),at,0)}forEachLine($,_e,et,tt,nt,rt){$=Math.max($,nt),_e=Math.min(_e,nt+this.length);let{firstLine:it,perLine:st,perChar:ot}=this.heightMetrics(et,nt);for(let at=$,lt=tt;at<=_e;){let ut=et.doc.lineAt(at);if(at==$){let ft=ut.number-it;lt+=st*ft+ot*($-nt-ft)}let ct=st+ot*ut.length;rt(new BlockInfo(ut.from,ut.length,lt,ct,0)),lt+=ct,at=ut.to+1}}replace($,_e,et){let tt=this.length-_e;if(tt>0){let nt=et[et.length-1];nt instanceof HeightMapGap?et[et.length-1]=new HeightMapGap(nt.length+tt):et.push(null,new HeightMapGap(tt-1))}if($>0){let nt=et[0];nt instanceof HeightMapGap?et[0]=new HeightMapGap($+nt.length):et.unshift(new HeightMapGap($-1),null)}return HeightMap.of(et)}decomposeLeft($,_e){_e.push(new HeightMapGap($-1),null)}decomposeRight($,_e){_e.push(null,new HeightMapGap(this.length-$-1))}updateHeight($,_e=0,et=!1,tt){let nt=_e+this.length;if(tt&&tt.from<=_e+this.length&&tt.more){let rt=[],it=Math.max(_e,tt.from),st=-1;for(tt.from>_e&&rt.push(new HeightMapGap(tt.from-_e-1).updateHeight($,_e));it<=nt&&tt.more;){let at=$.doc.lineAt(it).length;rt.length&&rt.push(null);let lt=tt.heights[tt.index++];st==-1?st=lt:Math.abs(lt-st)>=Epsilon&&(st=-2);let ut=new HeightMapText(at,lt);ut.outdated=!1,rt.push(ut),it+=at+1}it<=nt&&rt.push(null,new HeightMapGap(nt-it).updateHeight($,it));let ot=HeightMap.of(rt);return(st<0||Math.abs(ot.height-this.height)>=Epsilon||Math.abs(st-this.heightMetrics($,_e).perLine)>=Epsilon)&&($.heightChanged=!0),ot}else(et||this.outdated)&&(this.setHeight($,$.heightForGap(_e,_e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor($,_e,et){super($.length+_e+et.length,$.height+et.height,_e|($.outdated||et.outdated?2:0)),this.left=$,this.right=et,this.size=$.size+et.size}get break(){return this.flags&1}blockAt($,_e,et,tt){let nt=et+this.left.height;return $<nt?this.left.blockAt($,_e,et,tt):this.right.blockAt($,_e,nt,tt+this.left.length+this.break)}lineAt($,_e,et,tt,nt){let rt=tt+this.left.height,it=nt+this.left.length+this.break,st=_e==QueryType$1.ByHeight?$<rt:$<it,ot=st?this.left.lineAt($,_e,et,tt,nt):this.right.lineAt($,_e,et,rt,it);if(this.break||(st?ot.to<it:ot.from>it))return ot;let at=_e==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return st?ot.join(this.right.lineAt(it,at,et,rt,it)):this.left.lineAt(it,at,et,tt,nt).join(ot)}forEachLine($,_e,et,tt,nt,rt){let it=tt+this.left.height,st=nt+this.left.length+this.break;if(this.break)$<st&&this.left.forEachLine($,_e,et,tt,nt,rt),_e>=st&&this.right.forEachLine($,_e,et,it,st,rt);else{let ot=this.lineAt(st,QueryType$1.ByPos,et,tt,nt);$<ot.from&&this.left.forEachLine($,ot.from-1,et,tt,nt,rt),ot.to>=$&&ot.from<=_e&&rt(ot),_e>ot.to&&this.right.forEachLine(ot.to+1,_e,et,it,st,rt)}}replace($,_e,et){let tt=this.left.length+this.break;if(_e<tt)return this.balanced(this.left.replace($,_e,et),this.right);if($>this.left.length)return this.balanced(this.left,this.right.replace($-tt,_e-tt,et));let nt=[];$>0&&this.decomposeLeft($,nt);let rt=nt.length;for(let it of et)nt.push(it);if($>0&&mergeGaps(nt,rt-1),_e<this.length){let it=nt.length;this.decomposeRight(_e,nt),mergeGaps(nt,it)}return HeightMap.of(nt)}decomposeLeft($,_e){let et=this.left.length;if($<=et)return this.left.decomposeLeft($,_e);_e.push(this.left),this.break&&(et++,$>=et&&_e.push(null)),$>et&&this.right.decomposeLeft($-et,_e)}decomposeRight($,_e){let et=this.left.length,tt=et+this.break;if($>=tt)return this.right.decomposeRight($-tt,_e);$<et&&this.left.decomposeRight($,_e),this.break&&$<tt&&_e.push(null),_e.push(this.right)}balanced($,_e){return $.size>2*_e.size||_e.size>2*$.size?HeightMap.of(this.break?[$,null,_e]:[$,_e]):(this.left=$,this.right=_e,this.height=$.height+_e.height,this.outdated=$.outdated||_e.outdated,this.size=$.size+_e.size,this.length=$.length+this.break+_e.length,this)}updateHeight($,_e=0,et=!1,tt){let{left:nt,right:rt}=this,it=_e+nt.length+this.break,st=null;return tt&&tt.from<=_e+nt.length&&tt.more?st=nt=nt.updateHeight($,_e,et,tt):nt.updateHeight($,_e,et),tt&&tt.from<=it+rt.length&&tt.more?st=rt=rt.updateHeight($,it,et,tt):rt.updateHeight($,it,et),st?this.balanced(nt,rt):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(j,$){let _e,et;j[$]==null&&(_e=j[$-1])instanceof HeightMapGap&&(et=j[$+1])instanceof HeightMapGap&&j.splice($-1,3,new HeightMapGap(_e.length+1+et.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor($,_e){this.pos=$,this.oracle=_e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=$}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span($,_e){if(this.lineStart>-1){let et=Math.min(_e,this.lineEnd),tt=this.nodes[this.nodes.length-1];tt instanceof HeightMapText?tt.length+=et-this.pos:(et>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(et-this.pos,-1)),this.writtenTo=et,_e>et&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=_e}point($,_e,et){if($<_e||et.heightRelevant){let tt=et.widget?et.widget.estimatedHeight:0,nt=et.widget?et.widget.lineBreaks:0;tt<0&&(tt=this.oracle.lineHeight);let rt=_e-$;et.block?this.addBlock(new HeightMapBlock(rt,tt,et)):(rt||nt||tt>=relevantWidgetHeight)&&this.addLineDeco(tt,nt,rt)}else _e>$&&this.span($,_e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:$,to:_e}=this.oracle.doc.lineAt(this.pos);this.lineStart=$,this.lineEnd=_e,this.writtenTo<$&&((this.writtenTo<$-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,$-1)),this.nodes.push(null)),this.pos>$&&this.nodes.push(new HeightMapText(this.pos-$,-1)),this.writtenTo=this.pos}blankContent($,_e){let et=new HeightMapGap(_e-$);return this.oracle.doc.lineAt($).to==_e&&(et.flags|=4),et}ensureLine(){this.enterLine();let $=this.nodes.length?this.nodes[this.nodes.length-1]:null;if($ instanceof HeightMapText)return $;let _e=new HeightMapText(0,-1);return this.nodes.push(_e),_e}addBlock($){this.enterLine();let _e=$.deco;_e&&_e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push($),this.writtenTo=this.pos=this.pos+$.length,_e&&_e.endSide>0&&(this.covering=$)}addLineDeco($,_e,et){let tt=this.ensureLine();tt.length+=et,tt.collapsed+=et,tt.widgetHeight=Math.max(tt.widgetHeight,$),tt.breaks+=_e,this.writtenTo=this.pos=this.pos+et}finish($){let _e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(_e instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||_e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let et=$;for(let tt of this.nodes)tt instanceof HeightMapText&&tt.updateHeight(this.oracle,et),et+=tt?tt.length:1;return this.nodes}static build($,_e,et,tt){let nt=new NodeBuilder(et,$);return RangeSet.spans(_e,et,tt,nt,0),nt.finish(et)}}function heightRelevantDecoChanges(j,$,_e){let et=new DecorationComparator;return RangeSet.compare(j,$,_e,et,0),et.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint($,_e,et,tt){($<_e||et&&et.heightRelevant||tt&&tt.heightRelevant)&&addRange($,_e,this.changes,5)}}function visiblePixelRange(j,$){let _e=j.getBoundingClientRect(),et=j.ownerDocument,tt=et.defaultView||window,nt=Math.max(0,_e.left),rt=Math.min(tt.innerWidth,_e.right),it=Math.max(0,_e.top),st=Math.min(tt.innerHeight,_e.bottom);for(let ot=j.parentNode;ot&&ot!=et.body;)if(ot.nodeType==1){let at=ot,lt=window.getComputedStyle(at);if((at.scrollHeight>at.clientHeight||at.scrollWidth>at.clientWidth)&&lt.overflow!="visible"){let ut=at.getBoundingClientRect();nt=Math.max(nt,ut.left),rt=Math.min(rt,ut.right),it=Math.max(it,ut.top),st=ot==j.parentNode?ut.bottom:Math.min(st,ut.bottom)}ot=lt.position=="absolute"||lt.position=="fixed"?at.offsetParent:at.parentNode}else if(ot.nodeType==11)ot=ot.host;else break;return{left:nt-_e.left,right:Math.max(nt,rt)-_e.left,top:it-(_e.top+$),bottom:Math.max(it,st)-(_e.top+$)}}function fullPixelRange(j,$){let _e=j.getBoundingClientRect();return{left:0,right:_e.right-_e.left,top:$,bottom:_e.bottom-(_e.top+$)}}class LineGap{constructor($,_e,et){this.from=$,this.to=_e,this.size=et}static same($,_e){if($.length!=_e.length)return!1;for(let et=0;et<$.length;et++){let tt=$[et],nt=_e[et];if(tt.from!=nt.from||tt.to!=nt.to||tt.size!=nt.size)return!1}return!0}draw($,_e){return Decoration.replace({widget:new LineGapWidget(this.size*(_e?$.scaleY:$.scaleX),_e)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor($,_e){super(),this.size=$,this.vertical=_e}eq($){return $.size==this.size&&$.vertical==this.vertical}toDOM(){let $=document.createElement("div");return this.vertical?$.style.height=this.size+"px":($.style.width=this.size+"px",$.style.height="2px",$.style.display="inline-block"),$}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor($){this.state=$,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let _e=$.facet(contentAttributes).some(et=>typeof et!="function"&&et.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(_e),this.stateDeco=$.facet(decorations).filter(et=>typeof et!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc($.doc),[new ChangedRange(0,0,0,$.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(et=>et.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let $=[this.viewport],{main:_e}=this.state.selection;for(let et=0;et<=1;et++){let tt=et?_e.head:_e.anchor;if(!$.some(({from:nt,to:rt})=>tt>=nt&&tt<=rt)){let{from:nt,to:rt}=this.lineBlockAt(tt);$.push(new Viewport(nt,rt))}}this.viewports=$.sort((et,tt)=>et.from-tt.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,$=>{this.viewportLines.push(this.scaler.scale==1?$:scaleBlock($,this.scaler))})}update($,_e=null){this.state=$.state;let et=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(at=>typeof at!="function");let tt=$.changedRanges,nt=ChangedRange.extendWithRanges(tt,heightRelevantDecoChanges(et,this.stateDeco,$?$.changes:ChangeSet.empty(this.state.doc.length))),rt=this.heightMap.height,it=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,$.startState.doc,this.heightOracle.setDoc(this.state.doc),nt),this.heightMap.height!=rt&&($.flags|=2),it?(this.scrollAnchorPos=$.changes.mapPos(it.from,-1),this.scrollAnchorHeight=it.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let st=nt.length?this.mapViewport(this.viewport,$.changes):this.viewport;(_e&&(_e.range.head<st.from||_e.range.head>st.to)||!this.viewportIsAppropriate(st))&&(st=this.getViewport(0,_e));let ot=!$.changes.empty||$.flags&2||st.from!=this.viewport.from||st.to!=this.viewport.to;this.viewport=st,this.updateForViewport(),ot&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,$.changes))),$.flags|=this.computeVisibleRanges(),_e&&(this.scrollTarget=_e),!this.mustEnforceCursorAssoc&&$.selectionSet&&$.view.lineWrapping&&$.state.selection.main.empty&&$.state.selection.main.assoc&&!$.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure($){let _e=$.contentDOM,et=window.getComputedStyle(_e),tt=this.heightOracle,nt=et.whiteSpace;this.defaultTextDirection=et.direction=="rtl"?Direction.RTL:Direction.LTR;let rt=this.heightOracle.mustRefreshForWrapping(nt),it=_e.getBoundingClientRect(),st=rt||this.mustMeasureContent||this.contentDOMHeight!=it.height;this.contentDOMHeight=it.height,this.mustMeasureContent=!1;let ot=0,at=0;if(it.width&&it.height){let{scaleX:Ct,scaleY:At}=getScale(_e,it);(this.scaleX!=Ct||this.scaleY!=At)&&(this.scaleX=Ct,this.scaleY=At,ot|=8,rt=st=!0)}let lt=(parseInt(et.paddingTop)||0)*this.scaleY,ut=(parseInt(et.paddingBottom)||0)*this.scaleY;(this.paddingTop!=lt||this.paddingBottom!=ut)&&(this.paddingTop=lt,this.paddingBottom=ut,ot|=10),this.editorWidth!=$.scrollDOM.clientWidth&&(tt.lineWrapping&&(st=!0),this.editorWidth=$.scrollDOM.clientWidth,ot|=8);let ct=$.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=ct&&(this.scrollAnchorHeight=-1,this.scrollTop=ct),this.scrolledToBottom=isScrolledToBottom($.scrollDOM);let ft=(this.printing?fullPixelRange:visiblePixelRange)(_e,this.paddingTop),dt=ft.top-this.pixelViewport.top,mt=ft.bottom-this.pixelViewport.bottom;this.pixelViewport=ft;let pt=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(pt!=this.inView&&(this.inView=pt,pt&&(st=!0)),!this.inView&&!this.scrollTarget)return 0;let yt=it.width;if((this.contentDOMWidth!=yt||this.editorHeight!=$.scrollDOM.clientHeight)&&(this.contentDOMWidth=it.width,this.editorHeight=$.scrollDOM.clientHeight,ot|=8),st){let Ct=$.docView.measureVisibleLineHeights(this.viewport);if(tt.mustRefreshForHeights(Ct)&&(rt=!0),rt||tt.lineWrapping&&Math.abs(yt-this.contentDOMWidth)>tt.charWidth){let{lineHeight:At,charWidth:$t,textHeight:bt}=$.docView.measureTextSize();rt=At>0&&tt.refresh(nt,At,$t,bt,yt/$t,Ct),rt&&($.docView.minWidth=0,ot|=8)}dt>0&&mt>0?at=Math.max(dt,mt):dt<0&&mt<0&&(at=Math.min(dt,mt)),tt.heightChanged=!1;for(let At of this.viewports){let $t=At.from==this.viewport.from?Ct:$.docView.measureVisibleLineHeights(At);this.heightMap=(rt?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,$.state.doc.length)]):this.heightMap).updateHeight(tt,0,rt,new MeasuredHeights(At.from,$t))}tt.heightChanged&&(ot|=2)}let vt=!this.viewportIsAppropriate(this.viewport,at)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return vt&&(this.viewport=this.getViewport(at,this.scrollTarget)),this.updateForViewport(),(ot&2||vt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(rt?[]:this.lineGaps,$)),ot|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,$.docView.enforceCursorAssoc()),ot}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport($,_e){let et=.5-Math.max(-.5,Math.min(.5,$/1e3/2)),tt=this.heightMap,nt=this.heightOracle,{visibleTop:rt,visibleBottom:it}=this,st=new Viewport(tt.lineAt(rt-et*1e3,QueryType$1.ByHeight,nt,0,0).from,tt.lineAt(it+(1-et)*1e3,QueryType$1.ByHeight,nt,0,0).to);if(_e){let{head:ot}=_e.range;if(ot<st.from||ot>st.to){let at=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),lt=tt.lineAt(ot,QueryType$1.ByPos,nt,0,0),ut;_e.y=="center"?ut=(lt.top+lt.bottom)/2-at/2:_e.y=="start"||_e.y=="nearest"&&ot<st.from?ut=lt.top:ut=lt.bottom-at,st=new Viewport(tt.lineAt(ut-1e3/2,QueryType$1.ByHeight,nt,0,0).from,tt.lineAt(ut+at+1e3/2,QueryType$1.ByHeight,nt,0,0).to)}}return st}mapViewport($,_e){let et=_e.mapPos($.from,-1),tt=_e.mapPos($.to,1);return new Viewport(this.heightMap.lineAt(et,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(tt,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:$,to:_e},et=0){if(!this.inView)return!0;let{top:tt}=this.heightMap.lineAt($,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:nt}=this.heightMap.lineAt(_e,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:rt,visibleBottom:it}=this;return($==0||tt<=rt-Math.max(10,Math.min(-et,250)))&&(_e==this.state.doc.length||nt>=it+Math.max(10,Math.min(et,250)))&&tt>rt-2*1e3&&nt<it+2*1e3}mapLineGaps($,_e){if(!$.length||_e.empty)return $;let et=[];for(let tt of $)_e.touchesRange(tt.from,tt.to)||et.push(new LineGap(_e.mapPos(tt.from),_e.mapPos(tt.to),tt.size));return et}ensureLineGaps($,_e){let et=this.heightOracle.lineWrapping,tt=et?1e4:2e3,nt=tt>>1,rt=tt<<1;if(this.defaultTextDirection!=Direction.LTR&&!et)return[];let it=[],st=(ot,at,lt,ut)=>{if(at-ot<nt)return;let ct=this.state.selection.main,ft=[ct.from];ct.empty||ft.push(ct.to);for(let mt of ft)if(mt>ot&&mt<at){st(ot,mt-10,lt,ut),st(mt+10,at,lt,ut);return}let dt=find$3($,mt=>mt.from>=lt.from&&mt.to<=lt.to&&Math.abs(mt.from-ot)<nt&&Math.abs(mt.to-at)<nt&&!ft.some(pt=>mt.from<pt&&mt.to>pt));if(!dt){if(at<lt.to&&_e&&et&&_e.visibleRanges.some(mt=>mt.from<=at&&mt.to>=at)){let mt=_e.moveToLineBoundary(EditorSelection.cursor(at),!1,!0).head;mt>ot&&(at=mt)}dt=new LineGap(ot,at,this.gapSize(lt,ot,at,ut))}it.push(dt)};for(let ot of this.viewportLines){if(ot.length<rt)continue;let at=lineStructure(ot.from,ot.to,this.stateDeco);if(at.total<rt)continue;let lt=this.scrollTarget?this.scrollTarget.range.head:null,ut,ct;if(et){let ft=tt/this.heightOracle.lineLength*this.heightOracle.lineHeight,dt,mt;if(lt!=null){let pt=findFraction(at,lt),yt=((this.visibleBottom-this.visibleTop)/2+ft)/ot.height;dt=pt-yt,mt=pt+yt}else dt=(this.visibleTop-ot.top-ft)/ot.height,mt=(this.visibleBottom-ot.top+ft)/ot.height;ut=findPosition(at,dt),ct=findPosition(at,mt)}else{let ft=at.total*this.heightOracle.charWidth,dt=tt*this.heightOracle.charWidth,mt,pt;if(lt!=null){let yt=findFraction(at,lt),vt=((this.pixelViewport.right-this.pixelViewport.left)/2+dt)/ft;mt=yt-vt,pt=yt+vt}else mt=(this.pixelViewport.left-dt)/ft,pt=(this.pixelViewport.right+dt)/ft;ut=findPosition(at,mt),ct=findPosition(at,pt)}ut>ot.from&&st(ot.from,ut,ot,at),ct<ot.to&&st(ct,ot.to,ot,at)}return it}gapSize($,_e,et,tt){let nt=findFraction(tt,et)-findFraction(tt,_e);return this.heightOracle.lineWrapping?$.height*nt:tt.total*this.heightOracle.charWidth*nt}updateLineGaps($){LineGap.same($,this.lineGaps)||(this.lineGaps=$,this.lineGapDeco=Decoration.set($.map(_e=>_e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let $=this.stateDeco;this.lineGaps.length&&($=$.concat(this.lineGapDeco));let _e=[];RangeSet.spans($,this.viewport.from,this.viewport.to,{span(tt,nt){_e.push({from:tt,to:nt})},point(){}},20);let et=_e.length!=this.visibleRanges.length||this.visibleRanges.some((tt,nt)=>tt.from!=_e[nt].from||tt.to!=_e[nt].to);return this.visibleRanges=_e,et?4:0}lineBlockAt($){return $>=this.viewport.from&&$<=this.viewport.to&&this.viewportLines.find(_e=>_e.from<=$&&_e.to>=$)||scaleBlock(this.heightMap.lineAt($,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight($){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM($),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt($){let _e=this.lineBlockAtHeight($+8);return _e.from>=this.viewport.from||this.viewportLines[0].top-$>200?_e:this.viewportLines[0]}elementAtHeight($){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM($),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor($,_e){this.from=$,this.to=_e}}function lineStructure(j,$,_e){let et=[],tt=j,nt=0;return RangeSet.spans(_e,j,$,{span(){},point(rt,it){rt>tt&&(et.push({from:tt,to:rt}),nt+=rt-tt),tt=it}},20),tt<$&&(et.push({from:tt,to:$}),nt+=$-tt),{total:nt,ranges:et}}function findPosition({total:j,ranges:$},_e){if(_e<=0)return $[0].from;if(_e>=1)return $[$.length-1].to;let et=Math.floor(j*_e);for(let tt=0;;tt++){let{from:nt,to:rt}=$[tt],it=rt-nt;if(et<=it)return nt+et;et-=it}}function findFraction(j,$){let _e=0;for(let{from:et,to:tt}of j.ranges){if($<=tt){_e+=$-et;break}_e+=tt-et}return _e/j.total}function find$3(j,$){for(let _e of j)if($(_e))return _e}const IdScaler={toDOM(j){return j},fromDOM(j){return j},scale:1};class BigScaler{constructor($,_e,et){let tt=0,nt=0,rt=0;this.viewports=et.map(({from:it,to:st})=>{let ot=_e.lineAt(it,QueryType$1.ByPos,$,0,0).top,at=_e.lineAt(st,QueryType$1.ByPos,$,0,0).bottom;return tt+=at-ot,{from:it,to:st,top:ot,bottom:at,domTop:0,domBottom:0}}),this.scale=(7e6-tt)/(_e.height-tt);for(let it of this.viewports)it.domTop=rt+(it.top-nt)*this.scale,rt=it.domBottom=it.domTop+(it.bottom-it.top),nt=it.bottom}toDOM($){for(let _e=0,et=0,tt=0;;_e++){let nt=_e<this.viewports.length?this.viewports[_e]:null;if(!nt||$<nt.top)return tt+($-et)*this.scale;if($<=nt.bottom)return nt.domTop+($-nt.top);et=nt.bottom,tt=nt.domBottom}}fromDOM($){for(let _e=0,et=0,tt=0;;_e++){let nt=_e<this.viewports.length?this.viewports[_e]:null;if(!nt||$<nt.domTop)return et+($-tt)/this.scale;if($<=nt.domBottom)return nt.top+($-nt.domTop);et=nt.bottom,tt=nt.domBottom}}}function scaleBlock(j,$){if($.scale==1)return j;let _e=$.toDOM(j.top),et=$.toDOM(j.bottom);return new BlockInfo(j.from,j.length,_e,et-_e,Array.isArray(j._content)?j._content.map(tt=>scaleBlock(tt,$)):j._content)}const theme=Facet.define({combine:j=>j.join(" ")}),darkTheme=Facet.define({combine:j=>j.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(j,$,_e){return new StyleModule($,{finish(et){return/&/.test(et)?et.replace(/&\w*/,tt=>{if(tt=="&")return j;if(!_e||!_e[tt])throw new RangeError(`Unsupported selector: ${tt}`);return _e[tt]}):j+" "+et}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="";class DOMReader{constructor($,_e){this.points=$,this.text="",this.lineSeparator=_e.facet(EditorState.lineSeparator)}append($){this.text+=$}lineBreak(){this.text+=LineBreakPlaceholder}readRange($,_e){if(!$)return this;let et=$.parentNode;for(let tt=$;;){this.findPointBefore(et,tt);let nt=this.text.length;this.readNode(tt);let rt=tt.nextSibling;if(rt==_e)break;let it=ContentView.get(tt),st=ContentView.get(rt);(it&&st?it.breakAfter:(it?it.breakAfter:isBlockElement(tt))||isBlockElement(rt)&&(tt.nodeName!="BR"||tt.cmIgnore)&&this.text.length>nt)&&this.lineBreak(),tt=rt}return this.findPointBefore(et,_e),this}readTextNode($){let _e=$.nodeValue;for(let et of this.points)et.node==$&&(et.pos=this.text.length+Math.min(et.offset,_e.length));for(let et=0,tt=this.lineSeparator?null:/\r\n?|\n/g;;){let nt=-1,rt=1,it;if(this.lineSeparator?(nt=_e.indexOf(this.lineSeparator,et),rt=this.lineSeparator.length):(it=tt.exec(_e))&&(nt=it.index,rt=it[0].length),this.append(_e.slice(et,nt<0?_e.length:nt)),nt<0)break;if(this.lineBreak(),rt>1)for(let st of this.points)st.node==$&&st.pos>this.text.length&&(st.pos-=rt-1);et=nt+rt}}readNode($){if($.cmIgnore)return;let _e=ContentView.get($),et=_e&&_e.overrideDOMText;if(et!=null){this.findPointInside($,et.length);for(let tt=et.iter();!tt.next().done;)tt.lineBreak?this.lineBreak():this.append(tt.value)}else $.nodeType==3?this.readTextNode($):$.nodeName=="BR"?$.nextSibling&&this.lineBreak():$.nodeType==1&&this.readRange($.firstChild,null)}findPointBefore($,_e){for(let et of this.points)et.node==$&&$.childNodes[et.offset]==_e&&(et.pos=this.text.length)}findPointInside($,_e){for(let et of this.points)($.nodeType==3?et.node==$:$.contains(et.node))&&(et.pos=this.text.length+(isAtEnd($,et.node,et.offset)?_e:0))}}function isAtEnd(j,$,_e){for(;;){if(!$||_e<maxOffset($))return!1;if($==j)return!0;_e=domIndex($)+1,$=$.parentNode}}function isBlockElement(j){return j.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(j.nodeName)}class DOMPoint{constructor($,_e){this.node=$,this.offset=_e,this.pos=-1}}class DOMChange{constructor($,_e,et,tt){this.typeOver=tt,this.bounds=null,this.text="";let{impreciseHead:nt,impreciseAnchor:rt}=$.docView;if($.state.readOnly&&_e>-1)this.newSel=null;else if(_e>-1&&(this.bounds=$.docView.domBoundsAround(_e,et,0))){let it=nt||rt?[]:selectionPoints($),st=new DOMReader(it,$.state);st.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=st.text,this.newSel=selectionFromPoints(it,this.bounds.from)}else{let it=$.observer.selectionRange,st=nt&&nt.node==it.focusNode&&nt.offset==it.focusOffset||!contains($.contentDOM,it.focusNode)?$.state.selection.main.head:$.docView.posFromDOM(it.focusNode,it.focusOffset),ot=rt&&rt.node==it.anchorNode&&rt.offset==it.anchorOffset||!contains($.contentDOM,it.anchorNode)?$.state.selection.main.anchor:$.docView.posFromDOM(it.anchorNode,it.anchorOffset),at=$.viewport;if(browser.ios&&$.state.selection.main.empty&&st!=ot&&(at.from>0||at.to<$.state.doc.length)){let lt=at.from-Math.min(st,ot),ut=at.to-Math.max(st,ot);(lt==0||lt==1)&&(ut==0||ut==-1)&&(st=0,ot=$.state.doc.length)}this.newSel=EditorSelection.single(ot,st)}}}function applyDOMChange(j,$){let _e,{newSel:et}=$,tt=j.state.selection.main,nt=j.inputState.lastKeyTime>Date.now()-100?j.inputState.lastKeyCode:-1;if($.bounds){let{from:rt,to:it}=$.bounds,st=tt.from,ot=null;(nt===8||browser.android&&$.text.length<it-rt)&&(st=tt.to,ot="end");let at=findDiff(j.state.doc.sliceString(rt,it,LineBreakPlaceholder),$.text,st-rt,ot);at&&(browser.chrome&&nt==13&&at.toB==at.from+2&&$.text.slice(at.from,at.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&at.toB--,_e={from:rt+at.from,to:rt+at.toA,insert:Text.of($.text.slice(at.from,at.toB).split(LineBreakPlaceholder))})}else et&&(!j.hasFocus&&j.state.facet(editable)||et.main.eq(tt))&&(et=null);if(!_e&&!et)return!1;if(!_e&&$.typeOver&&!tt.empty&&et&&et.main.empty?_e={from:tt.from,to:tt.to,insert:j.state.doc.slice(tt.from,tt.to)}:_e&&_e.from>=tt.from&&_e.to<=tt.to&&(_e.from!=tt.from||_e.to!=tt.to)&&tt.to-tt.from-(_e.to-_e.from)<=4?_e={from:tt.from,to:tt.to,insert:j.state.doc.slice(tt.from,_e.from).append(_e.insert).append(j.state.doc.slice(_e.to,tt.to))}:(browser.mac||browser.android)&&_e&&_e.from==_e.to&&_e.from==tt.head-1&&/^\. ?$/.test(_e.insert.toString())&&j.contentDOM.getAttribute("autocorrect")=="off"?(et&&_e.insert.length==2&&(et=EditorSelection.single(et.main.anchor-1,et.main.head-1)),_e={from:tt.from,to:tt.to,insert:Text.of([" "])}):browser.chrome&&_e&&_e.from==_e.to&&_e.from==tt.head&&_e.insert.toString()==`
 `&&j.lineWrapping&&(et&&(et=EditorSelection.single(et.main.anchor-1,et.main.head-1)),_e={from:tt.from,to:tt.to,insert:Text.of([" "])}),_e){if(browser.ios&&j.inputState.flushIOSKey()||browser.android&&(_e.from==tt.from&&_e.to==tt.to&&_e.insert.length==1&&_e.insert.lines==2&&dispatchKey(j.contentDOM,"Enter",13)||(_e.from==tt.from-1&&_e.to==tt.to&&_e.insert.length==0||nt==8&&_e.insert.length<_e.to-_e.from&&_e.to>tt.head)&&dispatchKey(j.contentDOM,"Backspace",8)||_e.from==tt.from&&_e.to==tt.to+1&&_e.insert.length==0&&dispatchKey(j.contentDOM,"Delete",46)))return!0;let rt=_e.insert.toString();j.inputState.composing>=0&&j.inputState.composing++;let it,st=()=>it||(it=applyDefaultInsert(j,_e,et));return j.state.facet(inputHandler$1).some(ot=>ot(j,_e.from,_e.to,rt,st))||j.dispatch(st()),!0}else if(et&&!et.main.eq(tt)){let rt=!1,it="select";return j.inputState.lastSelectionTime>Date.now()-50&&(j.inputState.lastSelectionOrigin=="select"&&(rt=!0),it=j.inputState.lastSelectionOrigin),j.dispatch({selection:et,scrollIntoView:rt,userEvent:it}),!0}else return!1}function applyDefaultInsert(j,$,_e){let et,tt=j.state,nt=tt.selection.main;if($.from>=nt.from&&$.to<=nt.to&&$.to-$.from>=(nt.to-nt.from)/3&&(!_e||_e.main.empty&&_e.main.from==$.from+$.insert.length)&&j.inputState.composing<0){let it=nt.from<$.from?tt.sliceDoc(nt.from,$.from):"",st=nt.to>$.to?tt.sliceDoc($.to,nt.to):"";et=tt.replaceSelection(j.state.toText(it+$.insert.sliceString(0,void 0,j.state.lineBreak)+st))}else{let it=tt.changes($),st=_e&&_e.main.to<=it.newLength?_e.main:void 0;if(tt.selection.ranges.length>1&&j.inputState.composing>=0&&$.to<=nt.to&&$.to>=nt.to-10){let ot=j.state.sliceDoc($.from,$.to),at,lt=_e&&findCompositionNode(j,_e.main.head);if(lt){let ft=$.insert.length-($.to-$.from);at={from:lt.from,to:lt.to-ft}}else at=j.state.doc.lineAt(nt.head);let ut=nt.to-$.to,ct=nt.to-nt.from;et=tt.changeByRange(ft=>{if(ft.from==nt.from&&ft.to==nt.to)return{changes:it,range:st||ft.map(it)};let dt=ft.to-ut,mt=dt-ot.length;if(ft.to-ft.from!=ct||j.state.sliceDoc(mt,dt)!=ot||ft.to>=at.from&&ft.from<=at.to)return{range:ft};let pt=tt.changes({from:mt,to:dt,insert:$.insert}),yt=ft.to-nt.to;return{changes:pt,range:st?EditorSelection.range(Math.max(0,st.anchor+yt),Math.max(0,st.head+yt)):ft.map(pt)}})}else et={changes:it,selection:st&&tt.selection.replaceRange(st)}}let rt="input.type";return(j.composing||j.inputState.compositionPendingChange&&j.inputState.compositionEndedAt>Date.now()-50)&&(j.inputState.compositionPendingChange=!1,rt+=".compose",j.inputState.compositionFirstChange&&(rt+=".start",j.inputState.compositionFirstChange=!1)),tt.update(et,{userEvent:rt,scrollIntoView:!0})}function findDiff(j,$,_e,et){let tt=Math.min(j.length,$.length),nt=0;for(;nt<tt&&j.charCodeAt(nt)==$.charCodeAt(nt);)nt++;if(nt==tt&&j.length==$.length)return null;let rt=j.length,it=$.length;for(;rt>0&&it>0&&j.charCodeAt(rt-1)==$.charCodeAt(it-1);)rt--,it--;if(et=="end"){let st=Math.max(0,nt-Math.min(rt,it));_e-=rt+st-nt}if(rt<nt&&j.length<$.length){let st=_e<=nt&&_e>=rt?nt-_e:0;nt-=st,it=nt+(it-rt),rt=nt}else if(it<nt){let st=_e<=nt&&_e>=it?nt-_e:0;nt-=st,rt=nt+(rt-it),it=nt}return{from:nt,toA:rt,toB:it}}function selectionPoints(j){let $=[];if(j.root.activeElement!=j.contentDOM)return $;let{anchorNode:_e,anchorOffset:et,focusNode:tt,focusOffset:nt}=j.observer.selectionRange;return _e&&($.push(new DOMPoint(_e,et)),(tt!=_e||nt!=et)&&$.push(new DOMPoint(tt,nt))),$}function selectionFromPoints(j,$){if(j.length==0)return null;let _e=j[0].pos,et=j.length==2?j[1].pos:_e;return _e>-1&&et>-1?EditorSelection.single(_e+$,et+$):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor($){this.view=$,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=$.contentDOM,this.observer=new MutationObserver(_e=>{for(let et of _e)this.queue.push(et);(browser.ie&&browser.ie_version<=11||browser.ios&&$.composing)&&_e.some(et=>et.type=="childList"&&et.removedNodes.length||et.type=="characterData"&&et.oldValue.length>et.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=_e=>{this.queue.push({target:_e.target,type:"characterData",oldValue:_e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var _e;((_e=this.view.docView)===null||_e===void 0?void 0:_e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe($.scrollDOM)),this.addWindowListeners(this.win=$.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(_e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),_e.length>0&&_e[_e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(_e=>{_e.length>0&&_e[_e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged($){this.view.inputState.runHandlers("scroll",$),this.intersecting&&this.view.measure()}onScroll($){this.intersecting&&this.flush(!1),this.onScrollChanged($)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps($){if(this.gapIntersection&&($.length!=this.gaps.length||this.gaps.some((_e,et)=>_e!=$[et]))){this.gapIntersection.disconnect();for(let _e of $)this.gapIntersection.observe(_e);this.gaps=$}}onSelectionChange($){let _e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:et}=this,tt=this.selectionRange;if(et.state.facet(editable)?et.root.activeElement!=this.dom:!hasSelection(et.dom,tt))return;let nt=tt.anchorNode&&et.docView.nearest(tt.anchorNode);if(nt&&nt.ignoreEvent($)){_e||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!et.state.selection.main.empty&&tt.focusNode&&isEquivalentPosition(tt.focusNode,tt.focusOffset,tt.anchorNode,tt.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:$}=this,_e=browser.safari&&$.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection($.root);if(!_e||this.selectionRange.eq(_e))return!1;let et=hasSelection(this.dom,_e);return et&&!this.selectionChanged&&$.inputState.lastFocusTime>Date.now()-200&&$.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,_e)?(this.view.inputState.lastFocusTime=0,$.docView.updateSelection(),!1):(this.selectionRange.setRange(_e),et&&(this.selectionChanged=!0),!0)}setSelectionRange($,_e){this.selectionRange.set($.node,$.offset,_e.node,_e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let $=0,_e=null;for(let et=this.dom;et;)if(et.nodeType==1)!_e&&$<this.scrollTargets.length&&this.scrollTargets[$]==et?$++:_e||(_e=this.scrollTargets.slice(0,$)),_e&&_e.push(et),et=et.assignedSlot||et.parentNode;else if(et.nodeType==11)et=et.host;else break;if($<this.scrollTargets.length&&!_e&&(_e=this.scrollTargets.slice(0,$)),_e){for(let et of this.scrollTargets)et.removeEventListener("scroll",this.onScroll);for(let et of this.scrollTargets=_e)et.addEventListener("scroll",this.onScroll)}}ignore($){if(!this.active)return $();try{return this.stop(),$()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey($,_e){var et;if(!this.delayedAndroidKey){let tt=()=>{let nt=this.delayedAndroidKey;nt&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=nt.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&nt.force&&dispatchKey(this.dom,nt.key,nt.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(tt)}(!this.delayedAndroidKey||$=="Enter")&&(this.delayedAndroidKey={key:$,keyCode:_e,force:this.lastChange<Date.now()-50||!!(!((et=this.delayedAndroidKey)===null||et===void 0)&&et.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let $ of this.observer.takeRecords())this.queue.push($);return this.queue}processRecords(){let $=this.pendingRecords();$.length&&(this.queue=[]);let _e=-1,et=-1,tt=!1;for(let nt of $){let rt=this.readMutation(nt);rt&&(rt.typeOver&&(tt=!0),_e==-1?{from:_e,to:et}=rt:(_e=Math.min(rt.from,_e),et=Math.max(rt.to,et)))}return{from:_e,to:et,typeOver:tt}}readChange(){let{from:$,to:_e,typeOver:et}=this.processRecords(),tt=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if($<0&&!tt)return null;$>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let nt=new DOMChange(this.view,$,_e,et);return this.view.docView.domChanged={newSel:nt.newSel?nt.newSel.main:null},nt}flush($=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;$&&this.readSelectionRange();let _e=this.readChange();if(!_e)return this.view.requestMeasure(),!1;let et=this.view.state,tt=applyDOMChange(this.view,_e);return this.view.state==et&&this.view.update([]),tt}readMutation($){let _e=this.view.docView.nearest($.target);if(!_e||_e.ignoreMutation($))return null;if(_e.markDirty($.type=="attributes"),$.type=="attributes"&&(_e.flags|=4),$.type=="childList"){let et=findChild(_e,$.previousSibling||$.target.previousSibling,-1),tt=findChild(_e,$.nextSibling||$.target.nextSibling,1);return{from:et?_e.posAfter(et):_e.posAtStart,to:tt?_e.posBefore(tt):_e.posAtEnd,typeOver:!1}}else return $.type=="characterData"?{from:_e.posAtStart,to:_e.posAtEnd,typeOver:$.target.nodeValue==$.oldValue}:null}setWindow($){$!=this.win&&(this.removeWindowListeners(this.win),this.win=$,this.addWindowListeners(this.win))}addWindowListeners($){$.addEventListener("resize",this.onResize),$.addEventListener("beforeprint",this.onPrint),$.addEventListener("scroll",this.onScroll),$.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners($){$.removeEventListener("scroll",this.onScroll),$.removeEventListener("resize",this.onResize),$.removeEventListener("beforeprint",this.onPrint),$.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var $,_e,et;this.stop(),($=this.intersection)===null||$===void 0||$.disconnect(),(_e=this.gapIntersection)===null||_e===void 0||_e.disconnect(),(et=this.resizeScroll)===null||et===void 0||et.disconnect();for(let tt of this.scrollTargets)tt.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(j,$,_e){for(;$;){let et=ContentView.get($);if(et&&et.parent==j)return et;let tt=$.parentNode;$=tt!=j.dom?tt:_e>0?$.nextSibling:$.previousSibling}return null}function safariSelectionRangeHack(j){let $=null;function _e(st){st.preventDefault(),st.stopImmediatePropagation(),$=st.getTargetRanges()[0]}if(j.contentDOM.addEventListener("beforeinput",_e,!0),j.dom.ownerDocument.execCommand("indent"),j.contentDOM.removeEventListener("beforeinput",_e,!0),!$)return null;let et=$.startContainer,tt=$.startOffset,nt=$.endContainer,rt=$.endOffset,it=j.docView.domAtPos(j.state.selection.main.anchor);return isEquivalentPosition(it.node,it.offset,nt,rt)&&([et,tt,nt,rt]=[nt,rt,et,tt]),{anchorNode:et,anchorOffset:tt,focusNode:nt,focusOffset:rt}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor($={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),$.parent&&$.parent.appendChild(this.dom);let{dispatch:_e}=$;this.dispatchTransactions=$.dispatchTransactions||_e&&(et=>et.forEach(tt=>_e(tt,this)))||(et=>this.update(et)),this.dispatch=this.dispatch.bind(this),this._root=$.root||getRoot($.parent)||document,this.viewState=new ViewState($.state||EditorState.create($)),$.scrollTo&&$.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=$.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(et=>new PluginInstance(et));for(let et of this.plugins)et.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...$){let _e=$.length==1&&$[0]instanceof Transaction?$:$.length==1&&Array.isArray($[0])?$[0]:[this.state.update(...$)];this.dispatchTransactions(_e,this)}update($){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let _e=!1,et=!1,tt,nt=this.state;for(let ut of $){if(ut.startState!=nt)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");nt=ut.state}if(this.destroyed){this.viewState.state=nt;return}let rt=this.hasFocus,it=0,st=null;$.some(ut=>ut.annotation(isFocusChange))?(this.inputState.notifiedFocused=rt,it=1):rt!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=rt,st=focusChangeTransaction(nt,rt),st||(it=1));let ot=this.observer.delayedAndroidKey,at=null;if(ot?(this.observer.clearDelayedAndroidKey(),at=this.observer.readChange(),(at&&!this.state.doc.eq(nt.doc)||!this.state.selection.eq(nt.selection))&&(at=null)):this.observer.clear(),nt.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(nt);tt=ViewUpdate.create(this,nt,$),tt.flags|=it;let lt=this.viewState.scrollTarget;try{this.updateState=2;for(let ut of $){if(lt&&(lt=lt.map(ut.changes)),ut.scrollIntoView){let{main:ct}=ut.state.selection;lt=new ScrollTarget(ct.empty?ct:EditorSelection.cursor(ct.head,ct.head>ct.anchor?-1:1))}for(let ct of ut.effects)ct.is(scrollIntoView$1)&&(lt=ct.value.clip(this.state))}this.viewState.update(tt,lt),this.bidiCache=CachedOrder.update(this.bidiCache,tt.changes),tt.empty||(this.updatePlugins(tt),this.inputState.update(tt)),_e=this.docView.update(tt),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),et=this.updateAttrs(),this.showAnnouncements($),this.docView.updateSelection(_e,$.some(ut=>ut.isUserEvent("select.pointer")))}finally{this.updateState=0}if(tt.startState.facet(theme)!=tt.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(_e||et||lt||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!tt.empty)for(let ut of this.state.facet(updateListener))try{ut(tt)}catch(ct){logException(this.state,ct,"update listener")}(st||at)&&Promise.resolve().then(()=>{st&&this.state==st.startState&&this.dispatch(st),at&&!applyDOMChange(this,at)&&ot.force&&dispatchKey(this.contentDOM,ot.key,ot.keyCode)})}setState($){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=$;return}this.updateState=2;let _e=this.hasFocus;try{for(let et of this.plugins)et.destroy(this);this.viewState=new ViewState($),this.plugins=$.facet(viewPlugin).map(et=>new PluginInstance(et)),this.pluginMap.clear();for(let et of this.plugins)et.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}_e&&this.focus(),this.requestMeasure()}updatePlugins($){let _e=$.startState.facet(viewPlugin),et=$.state.facet(viewPlugin);if(_e!=et){let tt=[];for(let nt of et){let rt=_e.indexOf(nt);if(rt<0)tt.push(new PluginInstance(nt));else{let it=this.plugins[rt];it.mustUpdate=$,tt.push(it)}}for(let nt of this.plugins)nt.mustUpdate!=$&&nt.destroy(this);this.plugins=tt,this.pluginMap.clear()}else for(let tt of this.plugins)tt.mustUpdate=$;for(let tt=0;tt<this.plugins.length;tt++)this.plugins[tt].update(this);_e!=et&&this.inputState.ensureHandlers(this.plugins)}measure($=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,$&&this.observer.forceFlush();let _e=null,et=this.scrollDOM,tt=et.scrollTop*this.scaleY,{scrollAnchorPos:nt,scrollAnchorHeight:rt}=this.viewState;Math.abs(tt-this.viewState.scrollTop)>1&&(rt=-1),this.viewState.scrollAnchorHeight=-1;try{for(let it=0;;it++){if(rt<0)if(isScrolledToBottom(et))nt=-1,rt=this.viewState.heightMap.height;else{let ct=this.viewState.scrollAnchorAt(tt);nt=ct.from,rt=ct.top}this.updateState=1;let st=this.viewState.measure(this);if(!st&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(it>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let ot=[];st&4||([this.measureRequests,ot]=[ot,this.measureRequests]);let at=ot.map(ct=>{try{return ct.read(this)}catch(ft){return logException(this.state,ft),BadMeasure}}),lt=ViewUpdate.create(this,this.state,[]),ut=!1;lt.flags|=st,_e?_e.flags|=st:_e=lt,this.updateState=2,lt.empty||(this.updatePlugins(lt),this.inputState.update(lt),this.updateAttrs(),ut=this.docView.update(lt));for(let ct=0;ct<ot.length;ct++)if(at[ct]!=BadMeasure)try{let ft=ot[ct];ft.write&&ft.write(at[ct],this)}catch(ft){logException(this.state,ft)}if(ut&&this.docView.updateSelection(!0),!lt.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,rt=-1;continue}else{let ft=(nt<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(nt).top)-rt;if(ft>1||ft<-1){tt=tt+ft,et.scrollTop=tt/this.scaleY,rt=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(_e&&!_e.empty)for(let it of this.state.facet(updateListener))it(_e)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let $=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),_e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(_e["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,_e);let et=this.observer.ignore(()=>{let tt=updateAttrs(this.contentDOM,this.contentAttrs,_e),nt=updateAttrs(this.dom,this.editorAttrs,$);return tt||nt});return this.editorAttrs=$,this.contentAttrs=_e,et}showAnnouncements($){let _e=!0;for(let et of $)for(let tt of et.effects)if(tt.is(EditorView.announce)){_e&&(this.announceDOM.textContent=""),_e=!1;let nt=this.announceDOM.appendChild(document.createElement("div"));nt.textContent=tt.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let $=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),$?{nonce:$}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure($){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),$){if(this.measureRequests.indexOf($)>-1)return;if($.key!=null){for(let _e=0;_e<this.measureRequests.length;_e++)if(this.measureRequests[_e].key===$.key){this.measureRequests[_e]=$;return}}this.measureRequests.push($)}}plugin($){let _e=this.pluginMap.get($);return(_e===void 0||_e&&_e.spec!=$)&&this.pluginMap.set($,_e=this.plugins.find(et=>et.spec==$)||null),_e&&_e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight($){return this.readMeasured(),this.viewState.elementAtHeight($)}lineBlockAtHeight($){return this.readMeasured(),this.viewState.lineBlockAtHeight($)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt($){return this.viewState.lineBlockAt($)}get contentHeight(){return this.viewState.contentHeight}moveByChar($,_e,et){return skipAtoms(this,$,moveByChar(this,$,_e,et))}moveByGroup($,_e){return skipAtoms(this,$,moveByChar(this,$,_e,et=>byGroup(this,$.head,et)))}visualLineSide($,_e){let et=this.bidiSpans($),tt=this.textDirectionAt($.from),nt=et[_e?et.length-1:0];return EditorSelection.cursor(nt.side(_e,tt)+$.from,nt.forward(!_e,tt)?1:-1)}moveToLineBoundary($,_e,et=!0){return moveToLineBoundary(this,$,_e,et)}moveVertically($,_e,et){return skipAtoms(this,$,moveVertically(this,$,_e,et))}domAtPos($){return this.docView.domAtPos($)}posAtDOM($,_e=0){return this.docView.posFromDOM($,_e)}posAtCoords($,_e=!0){return this.readMeasured(),posAtCoords(this,$,_e)}coordsAtPos($,_e=1){this.readMeasured();let et=this.docView.coordsAt($,_e);if(!et||et.left==et.right)return et;let tt=this.state.doc.lineAt($),nt=this.bidiSpans(tt),rt=nt[BidiSpan.find(nt,$-tt.from,-1,_e)];return flattenRect(et,rt.dir==Direction.LTR==_e>0)}coordsForChar($){return this.readMeasured(),this.docView.coordsForChar($)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt($){return!this.state.facet(perLineTextDirection)||$<this.viewport.from||$>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt($))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans($){if($.length>MaxBidiLine)return trivialOrder($.length);let _e=this.textDirectionAt($.from),et;for(let nt of this.bidiCache)if(nt.from==$.from&&nt.dir==_e&&(nt.fresh||isolatesEq(nt.isolates,et=getIsolatedRanges(this,$))))return nt.order;et||(et=getIsolatedRanges(this,$));let tt=computeOrder($.text,_e,et);return this.bidiCache.push(new CachedOrder($.from,$.to,_e,et,!0,tt)),tt}get hasFocus(){var $;return(this.dom.ownerDocument.hasFocus()||browser.safari&&(($=this.inputState)===null||$===void 0?void 0:$.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot($){this._root!=$&&(this._root=$,this.observer.setWindow(($.nodeType==9?$:$.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let $ of this.plugins)$.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView($,_e={}){return scrollIntoView$1.of(new ScrollTarget(typeof $=="number"?EditorSelection.cursor($):$,_e.y,_e.x,_e.yMargin,_e.xMargin))}scrollSnapshot(){let{scrollTop:$,scrollLeft:_e}=this.scrollDOM,et=this.viewState.scrollAnchorAt($);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(et.from),"start","start",et.top-$,_e,!0))}static domEventHandlers($){return ViewPlugin.define(()=>({}),{eventHandlers:$})}static domEventObservers($){return ViewPlugin.define(()=>({}),{eventObservers:$})}static theme($,_e){let et=StyleModule.newName(),tt=[theme.of(et),styleModule.of(buildTheme(`.${et}`,$))];return _e&&_e.dark&&tt.push(darkTheme.of(!0)),tt}static baseTheme($){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,$,lightDarkIDs)))}static findFromDOM($){var _e;let et=$.querySelector(".cm-content"),tt=et&&ContentView.get(et)||ContentView.get($);return((_e=tt==null?void 0:tt.rootView)===null||_e===void 0?void 0:_e.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:j=>j.length?j[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor($,_e,et,tt,nt,rt){this.from=$,this.to=_e,this.dir=et,this.isolates=tt,this.fresh=nt,this.order=rt}static update($,_e){if(_e.empty&&!$.some(nt=>nt.fresh))return $;let et=[],tt=$.length?$[$.length-1].dir:Direction.LTR;for(let nt=Math.max(0,$.length-10);nt<$.length;nt++){let rt=$[nt];rt.dir==tt&&!_e.touchesRange(rt.from,rt.to)&&et.push(new CachedOrder(_e.mapPos(rt.from,1),_e.mapPos(rt.to,-1),rt.dir,rt.isolates,!1,rt.order))}return et}}function attrsFromFacet(j,$,_e){for(let et=j.state.facet($),tt=et.length-1;tt>=0;tt--){let nt=et[tt],rt=typeof nt=="function"?nt(j):nt;rt&&combineAttrs(rt,_e)}return _e}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(j,$){const _e=j.split(/-(?!$)/);let et=_e[_e.length-1];et=="Space"&&(et=" ");let tt,nt,rt,it;for(let st=0;st<_e.length-1;++st){const ot=_e[st];if(/^(cmd|meta|m)$/i.test(ot))it=!0;else if(/^a(lt)?$/i.test(ot))tt=!0;else if(/^(c|ctrl|control)$/i.test(ot))nt=!0;else if(/^s(hift)?$/i.test(ot))rt=!0;else if(/^mod$/i.test(ot))$=="mac"?it=!0:nt=!0;else throw new Error("Unrecognized modifier name: "+ot)}return tt&&(et="Alt-"+et),nt&&(et="Ctrl-"+et),it&&(et="Meta-"+et),rt&&(et="Shift-"+et),et}function modifiers(j,$,_e){return $.altKey&&(j="Alt-"+j),$.ctrlKey&&(j="Ctrl-"+j),$.metaKey&&(j="Meta-"+j),_e!==!1&&$.shiftKey&&(j="Shift-"+j),j}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(j,$){return runHandlers(getKeymap($.state),j,$,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(j){let $=j.facet(keymap),_e=Keymaps.get($);return _e||Keymaps.set($,_e=buildKeymap($.reduce((et,tt)=>et.concat(tt),[]))),_e}function runScopeHandlers(j,$,_e){return runHandlers(getKeymap(j.state),$,j,_e)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(j,$=currentPlatform){let _e=Object.create(null),et=Object.create(null),tt=(rt,it)=>{let st=et[rt];if(st==null)et[rt]=it;else if(st!=it)throw new Error("Key binding "+rt+" is used both as a regular binding and as a multi-stroke prefix")},nt=(rt,it,st,ot,at)=>{var lt,ut;let ct=_e[rt]||(_e[rt]=Object.create(null)),ft=it.split(/ (?!$)/).map(pt=>normalizeKeyName(pt,$));for(let pt=1;pt<ft.length;pt++){let yt=ft.slice(0,pt).join(" ");tt(yt,!0),ct[yt]||(ct[yt]={preventDefault:!0,stopPropagation:!1,run:[vt=>{let Ct=storedPrefix={view:vt,prefix:yt,scope:rt};return setTimeout(()=>{storedPrefix==Ct&&(storedPrefix=null)},PrefixTimeout),!0}]})}let dt=ft.join(" ");tt(dt,!1);let mt=ct[dt]||(ct[dt]={preventDefault:!1,stopPropagation:!1,run:((ut=(lt=ct._any)===null||lt===void 0?void 0:lt.run)===null||ut===void 0?void 0:ut.slice())||[]});st&&mt.run.push(st),ot&&(mt.preventDefault=!0),at&&(mt.stopPropagation=!0)};for(let rt of j){let it=rt.scope?rt.scope.split(" "):["editor"];if(rt.any)for(let ot of it){let at=_e[ot]||(_e[ot]=Object.create(null));at._any||(at._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let lt in at)at[lt].run.push(rt.any)}let st=rt[$]||rt.key;if(st)for(let ot of it)nt(ot,st,rt.run,rt.preventDefault,rt.stopPropagation),rt.shift&&nt(ot,"Shift-"+st,rt.shift,rt.preventDefault,rt.stopPropagation)}return _e}function runHandlers(j,$,_e,et){let tt=keyName($),nt=codePointAt(tt,0),rt=codePointSize(nt)==tt.length&&tt!=" ",it="",st=!1,ot=!1,at=!1;storedPrefix&&storedPrefix.view==_e&&storedPrefix.scope==et&&(it=storedPrefix.prefix+" ",modifierCodes.indexOf($.keyCode)<0&&(ot=!0,storedPrefix=null));let lt=new Set,ut=mt=>{if(mt){for(let pt of mt.run)if(!lt.has(pt)&&(lt.add(pt),pt(_e,$)))return mt.stopPropagation&&(at=!0),!0;mt.preventDefault&&(mt.stopPropagation&&(at=!0),ot=!0)}return!1},ct=j[et],ft,dt;return ct&&(ut(ct[it+modifiers(tt,$,!rt)])?st=!0:rt&&($.altKey||$.metaKey||$.ctrlKey)&&!(browser.windows&&$.ctrlKey&&$.altKey)&&(ft=base[$.keyCode])&&ft!=tt?(ut(ct[it+modifiers(ft,$,!0)])||$.shiftKey&&(dt=shift[$.keyCode])!=tt&&dt!=ft&&ut(ct[it+modifiers(dt,$,!1)]))&&(st=!0):rt&&$.shiftKey&&ut(ct[it+modifiers(tt,$,!0)])&&(st=!0),!st&&ut(ct._any)&&(st=!0)),ot&&(st=!0),st&&at&&$.stopPropagation(),st}class RectangleMarker{constructor($,_e,et,tt,nt){this.className=$,this.left=_e,this.top=et,this.width=tt,this.height=nt}draw(){let $=document.createElement("div");return $.className=this.className,this.adjust($),$}update($,_e){return _e.className!=this.className?!1:(this.adjust($),!0)}adjust($){$.style.left=this.left+"px",$.style.top=this.top+"px",this.width!=null&&($.style.width=this.width+"px"),$.style.height=this.height+"px"}eq($){return this.left==$.left&&this.top==$.top&&this.width==$.width&&this.height==$.height&&this.className==$.className}static forRange($,_e,et){if(et.empty){let tt=$.coordsAtPos(et.head,et.assoc||1);if(!tt)return[];let nt=getBase($);return[new RectangleMarker(_e,tt.left-nt.left,tt.top-nt.top,null,tt.bottom-tt.top)]}else return rectanglesForRange($,_e,et)}}function getBase(j){let $=j.scrollDOM.getBoundingClientRect();return{left:(j.textDirection==Direction.LTR?$.left:$.right-j.scrollDOM.clientWidth*j.scaleX)-j.scrollDOM.scrollLeft*j.scaleX,top:$.top-j.scrollDOM.scrollTop*j.scaleY}}function wrappedLine(j,$,_e){let et=EditorSelection.cursor($);return{from:Math.max(_e.from,j.moveToLineBoundary(et,!1,!0).from),to:Math.min(_e.to,j.moveToLineBoundary(et,!0,!0).from),type:BlockType.Text}}function rectanglesForRange(j,$,_e){if(_e.to<=j.viewport.from||_e.from>=j.viewport.to)return[];let et=Math.max(_e.from,j.viewport.from),tt=Math.min(_e.to,j.viewport.to),nt=j.textDirection==Direction.LTR,rt=j.contentDOM,it=rt.getBoundingClientRect(),st=getBase(j),ot=rt.querySelector(".cm-line"),at=ot&&window.getComputedStyle(ot),lt=it.left+(at?parseInt(at.paddingLeft)+Math.min(0,parseInt(at.textIndent)):0),ut=it.right-(at?parseInt(at.paddingRight):0),ct=blockAt(j,et),ft=blockAt(j,tt),dt=ct.type==BlockType.Text?ct:null,mt=ft.type==BlockType.Text?ft:null;if(dt&&(j.lineWrapping||ct.widgetLineBreaks)&&(dt=wrappedLine(j,et,dt)),mt&&(j.lineWrapping||ft.widgetLineBreaks)&&(mt=wrappedLine(j,tt,mt)),dt&&mt&&dt.from==mt.from)return yt(vt(_e.from,_e.to,dt));{let At=dt?vt(_e.from,null,dt):Ct(ct,!1),$t=mt?vt(null,_e.to,mt):Ct(ft,!0),bt=[];return(dt||ct).to<(mt||ft).from-(dt&&mt?1:0)||ct.widgetLineBreaks>1&&At.bottom+j.defaultLineHeight/2<$t.top?bt.push(pt(lt,At.bottom,ut,$t.top)):At.bottom<$t.top&&j.elementAtHeight((At.bottom+$t.top)/2).type==BlockType.Text&&(At.bottom=$t.top=(At.bottom+$t.top)/2),yt(At).concat(bt).concat(yt($t))}function pt(At,$t,bt,Bt){return new RectangleMarker($,At-st.left,$t-st.top-.01,bt-At,Bt-$t+.01)}function yt({top:At,bottom:$t,horizontal:bt}){let Bt=[];for(let Rt=0;Rt<bt.length;Rt+=2)Bt.push(pt(bt[Rt],At,bt[Rt+1],$t));return Bt}function vt(At,$t,bt){let Bt=1e9,Rt=-1e9,St=[];function kt(Lt,zt,Kt,Ut,It){let Vt=j.coordsAtPos(Lt,Lt==bt.to?-2:2),jt=j.coordsAtPos(Kt,Kt==bt.from?2:-2);!Vt||!jt||(Bt=Math.min(Vt.top,jt.top,Bt),Rt=Math.max(Vt.bottom,jt.bottom,Rt),It==Direction.LTR?St.push(nt&&zt?lt:Vt.left,nt&&Ut?ut:jt.right):St.push(!nt&&Ut?lt:jt.left,!nt&&zt?ut:Vt.right))}let Pt=At??bt.from,Mt=$t??bt.to;for(let Lt of j.visibleRanges)if(Lt.to>Pt&&Lt.from<Mt)for(let zt=Math.max(Lt.from,Pt),Kt=Math.min(Lt.to,Mt);;){let Ut=j.state.doc.lineAt(zt);for(let It of j.bidiSpans(Ut)){let Vt=It.from+Ut.from,jt=It.to+Ut.from;if(Vt>=Kt)break;jt>zt&&kt(Math.max(Vt,zt),At==null&&Vt<=Pt,Math.min(jt,Kt),$t==null&&jt>=Mt,It.dir)}if(zt=Ut.to+1,zt>=Kt)break}return St.length==0&&kt(Pt,At==null,Mt,$t==null,j.textDirection),{top:Bt,bottom:Rt,horizontal:St}}function Ct(At,$t){let bt=it.top+($t?At.top:At.bottom);return{top:bt,bottom:bt,horizontal:[]}}}function sameMarker(j,$){return j.constructor==$.constructor&&j.eq($)}class LayerView{constructor($,_e){this.view=$,this.layer=_e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=$.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),_e.above&&this.dom.classList.add("cm-layer-above"),_e.class&&this.dom.classList.add(_e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder($.state),$.requestMeasure(this.measureReq),_e.mount&&_e.mount(this.dom,$)}update($){$.startState.facet(layerOrder)!=$.state.facet(layerOrder)&&this.setOrder($.state),(this.layer.update($,this.dom)||$.geometryChanged)&&(this.scale(),$.view.requestMeasure(this.measureReq))}setOrder($){let _e=0,et=$.facet(layerOrder);for(;_e<et.length&&et[_e]!=this.layer;)_e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-_e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:$,scaleY:_e}=this.view;($!=this.scaleX||_e!=this.scaleY)&&(this.scaleX=$,this.scaleY=_e,this.dom.style.transform=`scale(${1/$}, ${1/_e})`)}draw($){if($.length!=this.drawn.length||$.some((_e,et)=>!sameMarker(_e,this.drawn[et]))){let _e=this.dom.firstChild,et=0;for(let tt of $)tt.update&&_e&&tt.constructor&&this.drawn[et].constructor&&tt.update(_e,this.drawn[et])?(_e=_e.nextSibling,et++):this.dom.insertBefore(tt.draw(),_e);for(;_e;){let tt=_e.nextSibling;_e.remove(),_e=tt}this.drawn=$}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(j){return[ViewPlugin.define($=>new LayerView($,j)),layerOrder.of(j)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(j){return combineConfig(j,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:($,_e)=>Math.min($,_e),drawRangeCursor:($,_e)=>$||_e})}});function drawSelection(j={}){return[selectionConfig.of(j),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(j){return j.startState.facet(selectionConfig)!=j.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(j){let{state:$}=j,_e=$.facet(selectionConfig),et=[];for(let tt of $.selection.ranges){let nt=tt==$.selection.main;if(tt.empty?!nt||CanHidePrimary:_e.drawRangeCursor){let rt=nt?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",it=tt.empty?tt:EditorSelection.cursor(tt.head,tt.head>tt.anchor?-1:1);for(let st of RectangleMarker.forRange(j,rt,it))et.push(st)}}return et},update(j,$){j.transactions.some(et=>et.selection)&&($.style.animationName=$.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let _e=configChanged(j);return _e&&setBlinkRate(j.state,$),j.docChanged||j.selectionSet||_e},mount(j,$){setBlinkRate($.state,j)},class:"cm-cursorLayer"});function setBlinkRate(j,$){$.style.animationDuration=j.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(j){return j.state.selection.ranges.map($=>$.empty?[]:RectangleMarker.forRange(j,"cm-selectionBackground",$)).reduce(($,_e)=>$.concat(_e))},update(j,$){return j.docChanged||j.selectionSet||j.viewportChanged||configChanged(j)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important",themeSpec[".cm-content"]={caretColor:"transparent !important"});const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(j,$){return j==null?null:$.mapPos(j)}}),dropCursorPos=StateField.define({create(){return null},update(j,$){return j!=null&&(j=$.changes.mapPos(j)),$.effects.reduce((_e,et)=>et.is(setDropCursorPos)?et.value:_e,j)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(j){this.view=j,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(j){var $;let _e=j.state.field(dropCursorPos);_e==null?this.cursor!=null&&(($=this.cursor)===null||$===void 0||$.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(j.startState.field(dropCursorPos)!=_e||j.docChanged||j.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:j}=this,$=j.state.field(dropCursorPos),_e=$!=null&&j.coordsAtPos($);if(!_e)return null;let et=j.scrollDOM.getBoundingClientRect();return{left:_e.left-et.left+j.scrollDOM.scrollLeft*j.scaleX,top:_e.top-et.top+j.scrollDOM.scrollTop*j.scaleY,height:_e.bottom-_e.top}}drawCursor(j){if(this.cursor){let{scaleX:$,scaleY:_e}=this.view;j?(this.cursor.style.left=j.left/$+"px",this.cursor.style.top=j.top/_e+"px",this.cursor.style.height=j.height/_e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(j){this.view.state.field(dropCursorPos)!=j&&this.view.dispatch({effects:setDropCursorPos.of(j)})}},{eventObservers:{dragover(j){this.setDropPos(this.view.posAtCoords({x:j.clientX,y:j.clientY}))},dragleave(j){(j.target==this.view.contentDOM||!this.view.contentDOM.contains(j.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(j,$,_e,et,tt){$.lastIndex=0;for(let nt=j.iterRange(_e,et),rt=_e,it;!nt.next().done;rt+=nt.value.length)if(!nt.lineBreak)for(;it=$.exec(nt.value);)tt(rt+it.index,it)}function matchRanges(j,$){let _e=j.visibleRanges;if(_e.length==1&&_e[0].from==j.viewport.from&&_e[0].to==j.viewport.to)return _e;let et=[];for(let{from:tt,to:nt}of _e)tt=Math.max(j.state.doc.lineAt(tt).from,tt-$),nt=Math.min(j.state.doc.lineAt(nt).to,nt+$),et.length&&et[et.length-1].to>=tt?et[et.length-1].to=nt:et.push({from:tt,to:nt});return et}class MatchDecorator{constructor($){const{regexp:_e,decoration:et,decorate:tt,boundary:nt,maxLength:rt=1e3}=$;if(!_e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=_e,tt)this.addMatch=(it,st,ot,at)=>tt(at,ot,ot+it[0].length,it,st);else if(typeof et=="function")this.addMatch=(it,st,ot,at)=>{let lt=et(it,st,ot);lt&&at(ot,ot+it[0].length,lt)};else if(et)this.addMatch=(it,st,ot,at)=>at(ot,ot+it[0].length,et);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=nt,this.maxLength=rt}createDeco($){let _e=new RangeSetBuilder,et=_e.add.bind(_e);for(let{from:tt,to:nt}of matchRanges($,this.maxLength))iterMatches($.state.doc,this.regexp,tt,nt,(rt,it)=>this.addMatch(it,$,rt,et));return _e.finish()}updateDeco($,_e){let et=1e9,tt=-1;return $.docChanged&&$.changes.iterChanges((nt,rt,it,st)=>{st>$.view.viewport.from&&it<$.view.viewport.to&&(et=Math.min(it,et),tt=Math.max(st,tt))}),$.viewportChanged||tt-et>1e3?this.createDeco($.view):tt>-1?this.updateRange($.view,_e.map($.changes),et,tt):_e}updateRange($,_e,et,tt){for(let nt of $.visibleRanges){let rt=Math.max(nt.from,et),it=Math.min(nt.to,tt);if(it>rt){let st=$.state.doc.lineAt(rt),ot=st.to<it?$.state.doc.lineAt(it):st,at=Math.max(nt.from,st.from),lt=Math.min(nt.to,ot.to);if(this.boundary){for(;rt>st.from;rt--)if(this.boundary.test(st.text[rt-1-st.from])){at=rt;break}for(;it<ot.to;it++)if(this.boundary.test(ot.text[it-ot.from])){lt=it;break}}let ut=[],ct,ft=(dt,mt,pt)=>ut.push(pt.range(dt,mt));if(st==ot)for(this.regexp.lastIndex=at-st.from;(ct=this.regexp.exec(st.text))&&ct.index<lt-st.from;)this.addMatch(ct,$,ct.index+st.from,ft);else iterMatches($.state.doc,this.regexp,at,lt,(dt,mt)=>this.addMatch(mt,$,dt,ft));_e=_e.update({filterFrom:at,filterTo:lt,filter:(dt,mt)=>dt<at||mt>lt,add:ut})}}return _e}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var j;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let $=document.body.style;_supportsTabSize=((j=$.tabSize)!==null&&j!==void 0?j:$.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(j){let $=combineConfig(j,{render:null,specialChars:Specials,addSpecialChars:null});return($.replaceTabs=!supportsTabSize())&&($.specialChars=new RegExp("	|"+$.specialChars.source,UnicodeRegexpSupport)),$.addSpecialChars&&($.specialChars=new RegExp($.specialChars.source+"|"+$.addSpecialChars.source,UnicodeRegexpSupport)),$}});function highlightSpecialChars(j={}){return[specialCharConfig.of(j),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(j){this.view=j,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(j.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(j)}makeDecorator(j){return new MatchDecorator({regexp:j.specialChars,decoration:($,_e,et)=>{let{doc:tt}=_e.state,nt=codePointAt($[0],0);if(nt==9){let rt=tt.lineAt(et),it=_e.state.tabSize,st=countColumn(rt.text,it,et-rt.from);return Decoration.replace({widget:new TabWidget((it-st%it)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[nt]||(this.decorationCache[nt]=Decoration.replace({widget:new SpecialCharWidget(j,nt)}))},boundary:j.replaceTabs?void 0:/[^]/})}update(j){let $=j.state.facet(specialCharConfig);j.startState.facet(specialCharConfig)!=$?(this.decorator=this.makeDecorator($),this.decorations=this.decorator.createDeco(j.view)):this.decorations=this.decorator.updateDeco(j,this.decorations)}},{decorations:j=>j.decorations}))}const DefaultPlaceholder="";function placeholder$1(j){return j>=32?DefaultPlaceholder:j==10?"":String.fromCharCode(9216+j)}class SpecialCharWidget extends WidgetType{constructor($,_e){super(),this.options=$,this.code=_e}eq($){return $.code==this.code}toDOM($){let _e=placeholder$1(this.code),et=$.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),tt=this.options.render&&this.options.render(this.code,et,_e);if(tt)return tt;let nt=document.createElement("span");return nt.textContent=_e,nt.title=et,nt.setAttribute("aria-label",et),nt.className="cm-specialChar",nt}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor($){super(),this.width=$}eq($){return $.width==this.width}toDOM(){let $=document.createElement("span");return $.textContent="	",$.className="cm-tab",$.style.width=this.width+"px",$}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(j){this.decorations=this.getDeco(j)}update(j){(j.docChanged||j.selectionSet)&&(this.decorations=this.getDeco(j.view))}getDeco(j){let $=-1,_e=[];for(let et of j.state.selection.ranges){let tt=j.lineBlockAt(et.head);tt.from>$&&(_e.push(lineDeco.range(tt.from)),$=tt.from)}return Decoration.set(_e)}},{decorations:j=>j.decorations});class Placeholder extends WidgetType{constructor($){super(),this.content=$}toDOM(){let $=document.createElement("span");return $.className="cm-placeholder",$.style.pointerEvents="none",$.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?$.setAttribute("aria-label","placeholder "+this.content):$.setAttribute("aria-hidden","true"),$}coordsAt($){let _e=$.firstChild?clientRectsFor($.firstChild):[];if(!_e.length)return null;let et=window.getComputedStyle($.parentNode),tt=flattenRect(_e[0],et.direction!="rtl"),nt=parseInt(et.lineHeight);return tt.bottom-tt.top>nt*1.5?{left:tt.left,right:tt.right,top:tt.top,bottom:tt.top+nt}:tt}ignoreEvent(){return!1}}function placeholder(j){return ViewPlugin.fromClass(class{constructor($){this.view=$,this.placeholder=j?Decoration.set([Decoration.widget({widget:new Placeholder(j),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:$=>$.decorations})}const MaxOff=2e3;function rectangleFor(j,$,_e){let et=Math.min($.line,_e.line),tt=Math.max($.line,_e.line),nt=[];if($.off>MaxOff||_e.off>MaxOff||$.col<0||_e.col<0){let rt=Math.min($.off,_e.off),it=Math.max($.off,_e.off);for(let st=et;st<=tt;st++){let ot=j.doc.line(st);ot.length<=it&&nt.push(EditorSelection.range(ot.from+rt,ot.to+it))}}else{let rt=Math.min($.col,_e.col),it=Math.max($.col,_e.col);for(let st=et;st<=tt;st++){let ot=j.doc.line(st),at=findColumn(ot.text,rt,j.tabSize,!0);if(at<0)nt.push(EditorSelection.cursor(ot.to));else{let lt=findColumn(ot.text,it,j.tabSize);nt.push(EditorSelection.range(ot.from+at,ot.from+lt))}}}return nt}function absoluteColumn(j,$){let _e=j.coordsAtPos(j.viewport.from);return _e?Math.round(Math.abs((_e.left-$)/j.defaultCharacterWidth)):-1}function getPos(j,$){let _e=j.posAtCoords({x:$.clientX,y:$.clientY},!1),et=j.state.doc.lineAt(_e),tt=_e-et.from,nt=tt>MaxOff?-1:tt==et.length?absoluteColumn(j,$.clientX):countColumn(et.text,j.state.tabSize,_e-et.from);return{line:et.number,col:nt,off:tt}}function rectangleSelectionStyle(j,$){let _e=getPos(j,$),et=j.state.selection;return _e?{update(tt){if(tt.docChanged){let nt=tt.changes.mapPos(tt.startState.doc.line(_e.line).from),rt=tt.state.doc.lineAt(nt);_e={line:rt.number,col:_e.col,off:Math.min(_e.off,rt.length)},et=et.map(tt.changes)}},get(tt,nt,rt){let it=getPos(j,tt);if(!it)return et;let st=rectangleFor(j.state,_e,it);return st.length?rt?EditorSelection.create(st.concat(et.ranges)):EditorSelection.create(st):et}}:null}function rectangularSelection(j){let $=(j==null?void 0:j.eventFilter)||(_e=>_e.altKey&&_e.button==0);return EditorView.mouseSelectionStyle.of((_e,et)=>$(et)?rectangleSelectionStyle(_e,et):null)}const keys$1={Alt:[18,j=>!!j.altKey],Control:[17,j=>!!j.ctrlKey],Shift:[16,j=>!!j.shiftKey],Meta:[91,j=>!!j.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(j={}){let[$,_e]=keys$1[j.key||"Alt"],et=ViewPlugin.fromClass(class{constructor(tt){this.view=tt,this.isDown=!1}set(tt){this.isDown!=tt&&(this.isDown=tt,this.view.update([]))}},{eventObservers:{keydown(tt){this.set(tt.keyCode==$||_e(tt))},keyup(tt){(tt.keyCode==$||!_e(tt))&&this.set(!1)},mousemove(tt){this.set(_e(tt))}}});return[et,EditorView.contentAttributes.of(tt=>{var nt;return!((nt=tt.plugin(et))===null||nt===void 0)&&nt.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor($,_e,et){this.facet=_e,this.createTooltipView=et,this.input=$.state.facet(_e),this.tooltips=this.input.filter(tt=>tt),this.tooltipViews=this.tooltips.map(et)}update($,_e){var et;let tt=$.state.facet(this.facet),nt=tt.filter(st=>st);if(tt===this.input){for(let st of this.tooltipViews)st.update&&st.update($);return!1}let rt=[],it=_e?[]:null;for(let st=0;st<nt.length;st++){let ot=nt[st],at=-1;if(ot){for(let lt=0;lt<this.tooltips.length;lt++){let ut=this.tooltips[lt];ut&&ut.create==ot.create&&(at=lt)}if(at<0)rt[st]=this.createTooltipView(ot),it&&(it[st]=!!ot.above);else{let lt=rt[st]=this.tooltipViews[at];it&&(it[st]=_e[at]),lt.update&&lt.update($)}}}for(let st of this.tooltipViews)rt.indexOf(st)<0&&(st.dom.remove(),(et=st.destroy)===null||et===void 0||et.call(st));return _e&&(it.forEach((st,ot)=>_e[ot]=st),_e.length=it.length),this.input=tt,this.tooltips=nt,this.tooltipViews=rt,!0}}function windowSpace(j){let{win:$}=j;return{top:0,left:0,bottom:$.innerHeight,right:$.innerWidth}}const tooltipConfig=Facet.define({combine:j=>{var $,_e,et;return{position:browser.ios?"absolute":(($=j.find(tt=>tt.position))===null||$===void 0?void 0:$.position)||"fixed",parent:((_e=j.find(tt=>tt.parent))===null||_e===void 0?void 0:_e.parent)||null,tooltipSpace:((et=j.find(tt=>tt.tooltipSpace))===null||et===void 0?void 0:et.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(j){this.view=j,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let $=j.state.facet(tooltipConfig);this.position=$.position,this.parent=$.parent,this.classes=j.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(j,showTooltip,_e=>this.createTooltip(_e)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(_e=>{Date.now()>this.lastTransaction-50&&_e.length>0&&_e[_e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),j.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let j of this.manager.tooltipViews)this.intersectionObserver.observe(j.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(j){j.transactions.length&&(this.lastTransaction=Date.now());let $=this.manager.update(j,this.above);$&&this.observeIntersection();let _e=$||j.geometryChanged,et=j.state.facet(tooltipConfig);if(et.position!=this.position&&!this.madeAbsolute){this.position=et.position;for(let tt of this.manager.tooltipViews)tt.dom.style.position=this.position;_e=!0}if(et.parent!=this.parent){this.parent&&this.container.remove(),this.parent=et.parent,this.createContainer();for(let tt of this.manager.tooltipViews)this.container.appendChild(tt.dom);_e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);_e&&this.maybeMeasure()}createTooltip(j){let $=j.create(this.view);if($.dom.classList.add("cm-tooltip"),j.arrow&&!$.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let _e=document.createElement("div");_e.className="cm-tooltip-arrow",$.dom.appendChild(_e)}return $.dom.style.position=this.position,$.dom.style.top=Outside,$.dom.style.left="0px",this.container.appendChild($.dom),$.mount&&$.mount(this.view),$}destroy(){var j,$;this.view.win.removeEventListener("resize",this.measureSoon);for(let _e of this.manager.tooltipViews)_e.dom.remove(),(j=_e.destroy)===null||j===void 0||j.call(_e);this.parent&&this.container.remove(),($=this.intersectionObserver)===null||$===void 0||$.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let j=this.view.dom.getBoundingClientRect(),$=1,_e=1,et=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:tt}=this.manager.tooltipViews[0];if(browser.gecko)et=tt.offsetParent!=this.container.ownerDocument.body;else if(tt.style.top==Outside&&tt.style.left=="0px"){let nt=tt.getBoundingClientRect();et=Math.abs(nt.top+1e4)>1||Math.abs(nt.left)>1}}if(et||this.position=="absolute")if(this.parent){let tt=this.parent.getBoundingClientRect();tt.width&&tt.height&&($=tt.width/this.parent.offsetWidth,_e=tt.height/this.parent.offsetHeight)}else({scaleX:$,scaleY:_e}=this.view.viewState);return{editor:j,parent:this.parent?this.container.getBoundingClientRect():j,pos:this.manager.tooltips.map((tt,nt)=>{let rt=this.manager.tooltipViews[nt];return rt.getCoords?rt.getCoords(tt.pos):this.view.coordsAtPos(tt.pos)}),size:this.manager.tooltipViews.map(({dom:tt})=>tt.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:$,scaleY:_e,makeAbsolute:et}}writeMeasure(j){var $;if(j.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let it of this.manager.tooltipViews)it.dom.style.position="absolute"}let{editor:_e,space:et,scaleX:tt,scaleY:nt}=j,rt=[];for(let it=0;it<this.manager.tooltips.length;it++){let st=this.manager.tooltips[it],ot=this.manager.tooltipViews[it],{dom:at}=ot,lt=j.pos[it],ut=j.size[it];if(!lt||lt.bottom<=Math.max(_e.top,et.top)||lt.top>=Math.min(_e.bottom,et.bottom)||lt.right<Math.max(_e.left,et.left)-.1||lt.left>Math.min(_e.right,et.right)+.1){at.style.top=Outside;continue}let ct=st.arrow?ot.dom.querySelector(".cm-tooltip-arrow"):null,ft=ct?7:0,dt=ut.right-ut.left,mt=($=knownHeight.get(ot))!==null&&$!==void 0?$:ut.bottom-ut.top,pt=ot.offset||noOffset,yt=this.view.textDirection==Direction.LTR,vt=ut.width>et.right-et.left?yt?et.left:et.right-ut.width:yt?Math.min(lt.left-(ct?14:0)+pt.x,et.right-dt):Math.max(et.left,lt.left-dt+(ct?14:0)-pt.x),Ct=this.above[it];!st.strictSide&&(Ct?lt.top-(ut.bottom-ut.top)-pt.y<et.top:lt.bottom+(ut.bottom-ut.top)+pt.y>et.bottom)&&Ct==et.bottom-lt.bottom>lt.top-et.top&&(Ct=this.above[it]=!Ct);let At=(Ct?lt.top-et.top:et.bottom-lt.bottom)-ft;if(At<mt&&ot.resize!==!1){if(At<this.view.defaultLineHeight){at.style.top=Outside;continue}knownHeight.set(ot,mt),at.style.height=(mt=At)/nt+"px"}else at.style.height&&(at.style.height="");let $t=Ct?lt.top-mt-ft-pt.y:lt.bottom+ft+pt.y,bt=vt+dt;if(ot.overlap!==!0)for(let Bt of rt)Bt.left<bt&&Bt.right>vt&&Bt.top<$t+mt&&Bt.bottom>$t&&($t=Ct?Bt.top-mt-2-ft:Bt.bottom+ft+2);if(this.position=="absolute"?(at.style.top=($t-j.parent.top)/nt+"px",at.style.left=(vt-j.parent.left)/tt+"px"):(at.style.top=$t/nt+"px",at.style.left=vt/tt+"px"),ct){let Bt=lt.left+(yt?pt.x:-pt.x)-(vt+14-7);ct.style.left=Bt/tt+"px"}ot.overlap!==!0&&rt.push({left:vt,top:$t,right:bt,bottom:$t+mt}),at.classList.toggle("cm-tooltip-above",Ct),at.classList.toggle("cm-tooltip-below",!Ct),ot.positioned&&ot.positioned(j.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let j of this.manager.tooltipViews)j.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define();class HoverTooltipHost{static create($){return new HoverTooltipHost($)}constructor($){this.view=$,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager($,showHoverTooltip,_e=>this.createHostedView(_e))}createHostedView($){let _e=$.create(this.view);return _e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(_e.dom),this.mounted&&_e.mount&&_e.mount(this.view),_e}mount($){for(let _e of this.manager.tooltipViews)_e.mount&&_e.mount($);this.mounted=!0}positioned($){for(let _e of this.manager.tooltipViews)_e.positioned&&_e.positioned($)}update($){this.manager.update($)}destroy(){var $;for(let _e of this.manager.tooltipViews)($=_e.destroy)===null||$===void 0||$.call(_e)}passProp($){let _e;for(let et of this.manager.tooltipViews){let tt=et[$];if(tt!==void 0){if(_e===void 0)_e=tt;else if(_e!==tt)return}}return _e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],j=>{let $=j.facet(showHoverTooltip).filter(_e=>_e);return $.length===0?null:{pos:Math.min(...$.map(_e=>_e.pos)),end:Math.max(...$.map(_e=>{var et;return(et=_e.end)!==null&&et!==void 0?et:_e.pos})),create:HoverTooltipHost.create,above:$[0].above,arrow:$.some(_e=>_e.arrow)}});class HoverPlugin{constructor($,_e,et,tt,nt){this.view=$,this.source=_e,this.field=et,this.setHover=tt,this.hoverTime=nt,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:$.dom,time:0},this.checkHover=this.checkHover.bind(this),$.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),$.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let $=Date.now()-this.lastMove.time;$<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-$):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:$,lastMove:_e}=this,et=$.docView.nearest(_e.target);if(!et)return;let tt,nt=1;if(et instanceof WidgetView)tt=et.posAtStart;else{if(tt=$.posAtCoords(_e),tt==null)return;let it=$.coordsAtPos(tt);if(!it||_e.y<it.top||_e.y>it.bottom||_e.x<it.left-$.defaultCharacterWidth||_e.x>it.right+$.defaultCharacterWidth)return;let st=$.bidiSpans($.state.doc.lineAt(tt)).find(at=>at.from<=tt&&at.to>=tt),ot=st&&st.dir==Direction.RTL?-1:1;nt=_e.x<it.left?-ot:ot}let rt=this.source($,tt,nt);if(rt!=null&&rt.then){let it=this.pending={pos:tt};rt.then(st=>{this.pending==it&&(this.pending=null,st&&$.dispatch({effects:this.setHover.of(st)}))},st=>logException($.state,st,"hover tooltip"))}else rt&&$.dispatch({effects:this.setHover.of(rt)})}get tooltip(){let $=this.view.plugin(tooltipPlugin),_e=$?$.manager.tooltips.findIndex(et=>et.create==HoverTooltipHost.create):-1;return _e>-1?$.manager.tooltipViews[_e]:null}mousemove($){var _e;this.lastMove={x:$.clientX,y:$.clientY,target:$.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:et,tooltip:tt}=this;if(et&&tt&&!isInTooltip(tt.dom,$)||this.pending){let{pos:nt}=et||this.pending,rt=(_e=et==null?void 0:et.end)!==null&&_e!==void 0?_e:nt;(nt==rt?this.view.posAtCoords(this.lastMove)!=nt:!isOverRange(this.view,nt,rt,$.clientX,$.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave($){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:_e}=this;if(_e){let{tooltip:et}=this;et&&et.dom.contains($.relatedTarget)?this.watchTooltipLeave(et.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave($){let _e=et=>{$.removeEventListener("mouseleave",_e),this.active&&!this.view.dom.contains(et.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};$.addEventListener("mouseleave",_e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(j,$){let _e=j.getBoundingClientRect();return $.clientX>=_e.left-tooltipMargin&&$.clientX<=_e.right+tooltipMargin&&$.clientY>=_e.top-tooltipMargin&&$.clientY<=_e.bottom+tooltipMargin}function isOverRange(j,$,_e,et,tt,nt){let rt=j.scrollDOM.getBoundingClientRect(),it=j.documentTop+j.documentPadding.top+j.contentHeight;if(rt.left>et||rt.right<et||rt.top>tt||Math.min(rt.bottom,it)<tt)return!1;let st=j.posAtCoords({x:et,y:tt},!1);return st>=$&&st<=_e}function hoverTooltip(j,$={}){let _e=StateEffect.define(),et=StateField.define({create(){return null},update(tt,nt){if(tt&&($.hideOnChange&&(nt.docChanged||nt.selection)||$.hideOn&&$.hideOn(nt,tt)))return null;if(tt&&nt.docChanged){let rt=nt.changes.mapPos(tt.pos,-1,MapMode.TrackDel);if(rt==null)return null;let it=Object.assign(Object.create(null),tt);it.pos=rt,tt.end!=null&&(it.end=nt.changes.mapPos(tt.end)),tt=it}for(let rt of nt.effects)rt.is(_e)&&(tt=rt.value),rt.is(closeHoverTooltipEffect)&&(tt=null);return tt},provide:tt=>showHoverTooltip.from(tt)});return[et,ViewPlugin.define(tt=>new HoverPlugin(tt,j,et,_e,$.hoverTime||300)),showHoverTooltipHost]}function getTooltip(j,$){let _e=j.plugin(tooltipPlugin);if(!_e)return null;let et=_e.manager.tooltips.indexOf($);return et<0?null:_e.manager.tooltipViews[et]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(j){let $,_e;for(let et of j)$=$||et.topContainer,_e=_e||et.bottomContainer;return{topContainer:$,bottomContainer:_e}}});function getPanel(j,$){let _e=j.plugin(panelPlugin),et=_e?_e.specs.indexOf($):-1;return et>-1?_e.panels[et]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(j){this.input=j.state.facet(showPanel),this.specs=this.input.filter(_e=>_e),this.panels=this.specs.map(_e=>_e(j));let $=j.state.facet(panelConfig);this.top=new PanelGroup(j,!0,$.topContainer),this.bottom=new PanelGroup(j,!1,$.bottomContainer),this.top.sync(this.panels.filter(_e=>_e.top)),this.bottom.sync(this.panels.filter(_e=>!_e.top));for(let _e of this.panels)_e.dom.classList.add("cm-panel"),_e.mount&&_e.mount()}update(j){let $=j.state.facet(panelConfig);this.top.container!=$.topContainer&&(this.top.sync([]),this.top=new PanelGroup(j.view,!0,$.topContainer)),this.bottom.container!=$.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(j.view,!1,$.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let _e=j.state.facet(showPanel);if(_e!=this.input){let et=_e.filter(st=>st),tt=[],nt=[],rt=[],it=[];for(let st of et){let ot=this.specs.indexOf(st),at;ot<0?(at=st(j.view),it.push(at)):(at=this.panels[ot],at.update&&at.update(j)),tt.push(at),(at.top?nt:rt).push(at)}this.specs=et,this.panels=tt,this.top.sync(nt),this.bottom.sync(rt);for(let st of it)st.dom.classList.add("cm-panel"),st.mount&&st.mount()}else for(let et of this.panels)et.update&&et.update(j)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:j=>EditorView.scrollMargins.of($=>{let _e=$.plugin(j);return _e&&{top:_e.top.scrollMargin(),bottom:_e.bottom.scrollMargin()}})});class PanelGroup{constructor($,_e,et){this.view=$,this.top=_e,this.container=et,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync($){for(let _e of this.panels)_e.destroy&&$.indexOf(_e)<0&&_e.destroy();this.panels=$,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let _e=this.container||this.view.dom;_e.insertBefore(this.dom,this.top?_e.firstChild:null)}let $=this.dom.firstChild;for(let _e of this.panels)if(_e.dom.parentNode==this.dom){for(;$!=_e.dom;)$=rm($);$=$.nextSibling}else this.dom.insertBefore(_e.dom,$);for(;$;)$=rm($)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let $ of this.classes.split(" "))$&&this.container.classList.remove($);for(let $ of(this.classes=this.view.themeClasses).split(" "))$&&this.container.classList.add($)}}}function rm(j){let $=j.nextSibling;return j.remove(),$}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare($){return this==$||this.constructor==$.constructor&&this.eq($)}eq($){return!1}destroy($){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(j){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$3),j))]}const unfixGutters=Facet.define({combine:j=>j.some($=>$)});function gutters(j){let $=[gutterView];return j&&j.fixed===!1&&$.push(unfixGutters.of(!0)),$}const gutterView=ViewPlugin.fromClass(class{constructor(j){this.view=j,this.prevViewport=j.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=j.state.facet(activeGutters).map($=>new SingleGutterView(j,$));for(let $ of this.gutters)this.dom.appendChild($.dom);this.fixed=!j.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),j.scrollDOM.insertBefore(this.dom,j.contentDOM)}update(j){if(this.updateGutters(j)){let $=this.prevViewport,_e=j.view.viewport,et=Math.min($.to,_e.to)-Math.max($.from,_e.from);this.syncGutters(et<(_e.to-_e.from)*.8)}j.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=j.view.viewport}syncGutters(j){let $=this.dom.nextSibling;j&&this.dom.remove();let _e=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),et=[],tt=this.gutters.map(nt=>new UpdateContext(nt,this.view.viewport,-this.view.documentPadding.top));for(let nt of this.view.viewportLineBlocks)if(et.length&&(et=[]),Array.isArray(nt.type)){let rt=!0;for(let it of nt.type)if(it.type==BlockType.Text&&rt){advanceCursor(_e,et,it.from);for(let st of tt)st.line(this.view,it,et);rt=!1}else if(it.widget)for(let st of tt)st.widget(this.view,it)}else if(nt.type==BlockType.Text){advanceCursor(_e,et,nt.from);for(let rt of tt)rt.line(this.view,nt,et)}else if(nt.widget)for(let rt of tt)rt.widget(this.view,nt);for(let nt of tt)nt.finish();j&&this.view.scrollDOM.insertBefore(this.dom,$)}updateGutters(j){let $=j.startState.facet(activeGutters),_e=j.state.facet(activeGutters),et=j.docChanged||j.heightChanged||j.viewportChanged||!RangeSet.eq(j.startState.facet(gutterLineClass),j.state.facet(gutterLineClass),j.view.viewport.from,j.view.viewport.to);if($==_e)for(let tt of this.gutters)tt.update(j)&&(et=!0);else{et=!0;let tt=[];for(let nt of _e){let rt=$.indexOf(nt);rt<0?tt.push(new SingleGutterView(this.view,nt)):(this.gutters[rt].update(j),tt.push(this.gutters[rt]))}for(let nt of this.gutters)nt.dom.remove(),tt.indexOf(nt)<0&&nt.destroy();for(let nt of tt)this.dom.appendChild(nt.dom);this.gutters=tt}return et}destroy(){for(let j of this.gutters)j.destroy();this.dom.remove()}},{provide:j=>EditorView.scrollMargins.of($=>{let _e=$.plugin(j);return!_e||_e.gutters.length==0||!_e.fixed?null:$.textDirection==Direction.LTR?{left:_e.dom.offsetWidth*$.scaleX}:{right:_e.dom.offsetWidth*$.scaleX}})});function asArray(j){return Array.isArray(j)?j:[j]}function advanceCursor(j,$,_e){for(;j.value&&j.from<=_e;)j.from==_e&&$.push(j.value),j.next()}class UpdateContext{constructor($,_e,et){this.gutter=$,this.height=et,this.i=0,this.cursor=RangeSet.iter($.markers,_e.from)}addElement($,_e,et){let{gutter:tt}=this,nt=(_e.top-this.height)/$.scaleY,rt=_e.height/$.scaleY;if(this.i==tt.elements.length){let it=new GutterElement($,rt,nt,et);tt.elements.push(it),tt.dom.appendChild(it.dom)}else tt.elements[this.i].update($,rt,nt,et);this.height=_e.bottom,this.i++}line($,_e,et){let tt=[];advanceCursor(this.cursor,tt,_e.from),et.length&&(tt=tt.concat(et));let nt=this.gutter.config.lineMarker($,_e,tt);nt&&tt.unshift(nt);let rt=this.gutter;tt.length==0&&!rt.config.renderEmptyElements||this.addElement($,_e,tt)}widget($,_e){let et=this.gutter.config.widgetMarker($,_e.widget,_e);et&&this.addElement($,_e,[et])}finish(){let $=this.gutter;for(;$.elements.length>this.i;){let _e=$.elements.pop();$.dom.removeChild(_e.dom),_e.destroy()}}}class SingleGutterView{constructor($,_e){this.view=$,this.config=_e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let et in _e.domEventHandlers)this.dom.addEventListener(et,tt=>{let nt=tt.target,rt;if(nt!=this.dom&&this.dom.contains(nt)){for(;nt.parentNode!=this.dom;)nt=nt.parentNode;let st=nt.getBoundingClientRect();rt=(st.top+st.bottom)/2}else rt=tt.clientY;let it=$.lineBlockAtHeight(rt-$.documentTop);_e.domEventHandlers[et]($,it,tt)&&tt.preventDefault()});this.markers=asArray(_e.markers($)),_e.initialSpacer&&(this.spacer=new GutterElement($,0,0,[_e.initialSpacer($)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update($){let _e=this.markers;if(this.markers=asArray(this.config.markers($.view)),this.spacer&&this.config.updateSpacer){let tt=this.config.updateSpacer(this.spacer.markers[0],$);tt!=this.spacer.markers[0]&&this.spacer.update($.view,0,0,[tt])}let et=$.view.viewport;return!RangeSet.eq(this.markers,_e,et.from,et.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange($):!1)}destroy(){for(let $ of this.elements)$.destroy()}}class GutterElement{constructor($,_e,et,tt){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update($,_e,et,tt)}update($,_e,et,tt){this.height!=_e&&(this.height=_e,this.dom.style.height=_e+"px"),this.above!=et&&(this.dom.style.marginTop=(this.above=et)?et+"px":""),sameMarkers(this.markers,tt)||this.setMarkers($,tt)}setMarkers($,_e){let et="cm-gutterElement",tt=this.dom.firstChild;for(let nt=0,rt=0;;){let it=rt,st=nt<_e.length?_e[nt++]:null,ot=!1;if(st){let at=st.elementClass;at&&(et+=" "+at);for(let lt=rt;lt<this.markers.length;lt++)if(this.markers[lt].compare(st)){it=lt,ot=!0;break}}else it=this.markers.length;for(;rt<it;){let at=this.markers[rt++];if(at.toDOM){at.destroy(tt);let lt=tt.nextSibling;tt.remove(),tt=lt}}if(!st)break;st.toDOM&&(ot?tt=tt.nextSibling:this.dom.insertBefore(st.toDOM($),tt)),ot&&rt++}this.dom.className=et,this.markers=_e}destroy(){this.setMarkers(null,[])}}function sameMarkers(j,$){if(j.length!=$.length)return!1;for(let _e=0;_e<j.length;_e++)if(!j[_e].compare($[_e]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(j){return combineConfig(j,{formatNumber:String,domEventHandlers:{}},{domEventHandlers($,_e){let et=Object.assign({},$);for(let tt in _e){let nt=et[tt],rt=_e[tt];et[tt]=nt?(it,st,ot)=>nt(it,st,ot)||rt(it,st,ot):rt}return et}})}});class NumberMarker extends GutterMarker{constructor($){super(),this.number=$}eq($){return this.number==$.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(j,$){return j.state.facet(lineNumberConfig).formatNumber($,j.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],j=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers($){return $.state.facet(lineNumberMarkers)},lineMarker($,_e,et){return et.some(tt=>tt.toDOM)?null:new NumberMarker(formatNumber($,$.state.doc.lineAt(_e.from).number))},widgetMarker:()=>null,lineMarkerChange:$=>$.startState.facet(lineNumberConfig)!=$.state.facet(lineNumberConfig),initialSpacer($){return new NumberMarker(formatNumber($,maxLineNumber($.state.doc.lines)))},updateSpacer($,_e){let et=formatNumber(_e.view,maxLineNumber(_e.view.state.doc.lines));return et==$.number?$:new NumberMarker(et)},domEventHandlers:j.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(j={}){return[lineNumberConfig.of(j),gutters(),lineNumberGutter]}function maxLineNumber(j){let $=9;for(;$<j;)$=$*10+9;return $}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],j=>{let $=[],_e=-1;for(let et of j.selection.ranges){let tt=j.doc.lineAt(et.head).from;tt>_e&&(_e=tt,$.push(activeLineGutterMarker.range(tt)))}return RangeSet.of($)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor($,_e){this.from=$,this.to=_e}}class NodeProp{constructor($={}){this.id=nextPropID++,this.perNode=!!$.perNode,this.deserialize=$.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add($){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof $!="function"&&($=NodeType.match($)),_e=>{let et=$(_e);return et===void 0?null:[this,et]}}}NodeProp.closedBy=new NodeProp({deserialize:j=>j.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:j=>j.split(" ")});NodeProp.group=new NodeProp({deserialize:j=>j.split(" ")});NodeProp.isolate=new NodeProp({deserialize:j=>{if(j&&j!="rtl"&&j!="ltr"&&j!="auto")throw new RangeError("Invalid value for isolate: "+j);return j||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor($,_e,et){this.tree=$,this.overlay=_e,this.parser=et}static get($){return $&&$.props&&$.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor($,_e,et,tt=0){this.name=$,this.props=_e,this.id=et,this.flags=tt}static define($){let _e=$.props&&$.props.length?Object.create(null):noProps,et=($.top?1:0)|($.skipped?2:0)|($.error?4:0)|($.name==null?8:0),tt=new NodeType($.name||"",_e,$.id,et);if($.props){for(let nt of $.props)if(Array.isArray(nt)||(nt=nt(tt)),nt){if(nt[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");_e[nt[0].id]=nt[1]}}return tt}prop($){return this.props[$.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is($){if(typeof $=="string"){if(this.name==$)return!0;let _e=this.prop(NodeProp.group);return _e?_e.indexOf($)>-1:!1}return this.id==$}static match($){let _e=Object.create(null);for(let et in $)for(let tt of et.split(" "))_e[tt]=$[et];return et=>{for(let tt=et.prop(NodeProp.group),nt=-1;nt<(tt?tt.length:0);nt++){let rt=_e[nt<0?et.name:tt[nt]];if(rt)return rt}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor($){this.types=$;for(let _e=0;_e<$.length;_e++)if($[_e].id!=_e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...$){let _e=[];for(let et of this.types){let tt=null;for(let nt of $){let rt=nt(et);rt&&(tt||(tt=Object.assign({},et.props)),tt[rt[0].id]=rt[1])}_e.push(tt?new NodeType(et.name,tt,et.id,et.flags):et)}return new NodeSet(_e)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(j){j[j.ExcludeBuffers=1]="ExcludeBuffers",j[j.IncludeAnonymous=2]="IncludeAnonymous",j[j.IgnoreMounts=4]="IgnoreMounts",j[j.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));let Tree$1=class Rr{constructor($,_e,et,tt,nt){if(this.type=$,this.children=_e,this.positions=et,this.length=tt,this.props=null,nt&&nt.length){this.props=Object.create(null);for(let[rt,it]of nt)this.props[typeof rt=="number"?rt:rt.id]=it}}toString(){let $=MountedTree.get(this);if($&&!$.overlay)return $.tree.toString();let _e="";for(let et of this.children){let tt=et.toString();tt&&(_e&&(_e+=","),_e+=tt)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(_e.length?"("+_e+")":""):_e}cursor($=0){return new TreeCursor(this.topNode,$)}cursorAt($,_e=0,et=0){let tt=CachedNode.get(this)||this.topNode,nt=new TreeCursor(tt);return nt.moveTo($,_e),CachedNode.set(this,nt._tree),nt}get topNode(){return new TreeNode(this,0,0,null)}resolve($,_e=0){let et=resolveNode(CachedNode.get(this)||this.topNode,$,_e,!1);return CachedNode.set(this,et),et}resolveInner($,_e=0){let et=resolveNode(CachedInnerNode.get(this)||this.topNode,$,_e,!0);return CachedInnerNode.set(this,et),et}resolveStack($,_e=0){return stackIterator(this,$,_e)}iterate($){let{enter:_e,leave:et,from:tt=0,to:nt=this.length}=$,rt=$.mode||0,it=(rt&IterMode.IncludeAnonymous)>0;for(let st=this.cursor(rt|IterMode.IncludeAnonymous);;){let ot=!1;if(st.from<=nt&&st.to>=tt&&(!it&&st.type.isAnonymous||_e(st)!==!1)){if(st.firstChild())continue;ot=!0}for(;ot&&et&&(it||!st.type.isAnonymous)&&et(st),!st.nextSibling();){if(!st.parent())return;ot=!0}}}prop($){return $.perNode?this.props?this.props[$.id]:void 0:this.type.prop($)}get propValues(){let $=[];if(this.props)for(let _e in this.props)$.push([+_e,this.props[_e]]);return $}balance($={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(_e,et,tt)=>new Rr(this.type,_e,et,tt,this.propValues),$.makeTree||((_e,et,tt)=>new Rr(NodeType.none,_e,et,tt)))}static build($){return buildTree($)}};Tree$1.empty=new Tree$1(NodeType.none,[],[],0);class FlatBufferCursor{constructor($,_e){this.buffer=$,this.index=_e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor($,_e,et){this.buffer=$,this.length=_e,this.set=et}get type(){return NodeType.none}toString(){let $=[];for(let _e=0;_e<this.buffer.length;)$.push(this.childString(_e)),_e=this.buffer[_e+3];return $.join(",")}childString($){let _e=this.buffer[$],et=this.buffer[$+3],tt=this.set.types[_e],nt=tt.name;if(/\W/.test(nt)&&!tt.isError&&(nt=JSON.stringify(nt)),$+=4,et==$)return nt;let rt=[];for(;$<et;)rt.push(this.childString($)),$=this.buffer[$+3];return nt+"("+rt.join(",")+")"}findChild($,_e,et,tt,nt){let{buffer:rt}=this,it=-1;for(let st=$;st!=_e&&!(checkSide(nt,tt,rt[st+1],rt[st+2])&&(it=st,et>0));st=rt[st+3]);return it}slice($,_e,et){let tt=this.buffer,nt=new Uint16Array(_e-$),rt=0;for(let it=$,st=0;it<_e;){nt[st++]=tt[it++],nt[st++]=tt[it++]-et;let ot=nt[st++]=tt[it++]-et;nt[st++]=tt[it++]-$,rt=Math.max(rt,ot)}return new TreeBuffer(nt,rt,this.set)}}function checkSide(j,$,_e,et){switch(j){case-2:return _e<$;case-1:return et>=$&&_e<$;case 0:return _e<$&&et>$;case 1:return _e<=$&&et>$;case 2:return et>$;case 4:return!0}}function resolveNode(j,$,_e,et){for(var tt;j.from==j.to||(_e<1?j.from>=$:j.from>$)||(_e>-1?j.to<=$:j.to<$);){let rt=!et&&j instanceof TreeNode&&j.index<0?null:j.parent;if(!rt)return j;j=rt}let nt=et?0:IterMode.IgnoreOverlays;if(et)for(let rt=j,it=rt.parent;it;rt=it,it=rt.parent)rt instanceof TreeNode&&rt.index<0&&((tt=it.enter($,_e,nt))===null||tt===void 0?void 0:tt.from)!=rt.from&&(j=it);for(;;){let rt=j.enter($,_e,nt);if(!rt)return j;j=rt}}class BaseNode{cursor($=0){return new TreeCursor(this,$)}getChild($,_e=null,et=null){let tt=getChildren(this,$,_e,et);return tt.length?tt[0]:null}getChildren($,_e=null,et=null){return getChildren(this,$,_e,et)}resolve($,_e=0){return resolveNode(this,$,_e,!1)}resolveInner($,_e=0){return resolveNode(this,$,_e,!0)}matchContext($){return matchNodeContext(this,$)}enterUnfinishedNodesBefore($){let _e=this.childBefore($),et=this;for(;_e;){let tt=_e.lastChild;if(!tt||tt.to!=_e.to)break;tt.type.isError&&tt.from==tt.to?(et=_e,_e=tt.prevSibling):_e=tt}return et}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor($,_e,et,tt){super(),this._tree=$,this.from=_e,this.index=et,this._parent=tt}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild($,_e,et,tt,nt=0){for(let rt=this;;){for(let{children:it,positions:st}=rt._tree,ot=_e>0?it.length:-1;$!=ot;$+=_e){let at=it[$],lt=st[$]+rt.from;if(checkSide(tt,et,lt,lt+at.length)){if(at instanceof TreeBuffer){if(nt&IterMode.ExcludeBuffers)continue;let ut=at.findChild(0,at.buffer.length,_e,et-lt,tt);if(ut>-1)return new BufferNode(new BufferContext(rt,at,$,lt),null,ut)}else if(nt&IterMode.IncludeAnonymous||!at.type.isAnonymous||hasChild(at)){let ut;if(!(nt&IterMode.IgnoreMounts)&&(ut=MountedTree.get(at))&&!ut.overlay)return new TreeNode(ut.tree,lt,$,rt);let ct=new TreeNode(at,lt,$,rt);return nt&IterMode.IncludeAnonymous||!ct.type.isAnonymous?ct:ct.nextChild(_e<0?at.children.length-1:0,_e,et,tt)}}}if(nt&IterMode.IncludeAnonymous||!rt.type.isAnonymous||(rt.index>=0?$=rt.index+_e:$=_e<0?-1:rt._parent._tree.children.length,rt=rt._parent,!rt))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter($){return this.nextChild(0,1,$,2)}childBefore($){return this.nextChild(this._tree.children.length-1,-1,$,-2)}enter($,_e,et=0){let tt;if(!(et&IterMode.IgnoreOverlays)&&(tt=MountedTree.get(this._tree))&&tt.overlay){let nt=$-this.from;for(let{from:rt,to:it}of tt.overlay)if((_e>0?rt<=nt:rt<nt)&&(_e<0?it>=nt:it>nt))return new TreeNode(tt.tree,tt.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,$,_e,et)}nextSignificantParent(){let $=this;for(;$.type.isAnonymous&&$._parent;)$=$._parent;return $}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(j,$,_e,et){let tt=j.cursor(),nt=[];if(!tt.firstChild())return nt;if(_e!=null){for(;!tt.type.is(_e);)if(!tt.nextSibling())return nt}for(;;){if(et!=null&&tt.type.is(et))return nt;if(tt.type.is($)&&nt.push(tt.node),!tt.nextSibling())return et==null?nt:[]}}function matchNodeContext(j,$,_e=$.length-1){for(let et=j.parent;_e>=0;et=et.parent){if(!et)return!1;if(!et.type.isAnonymous){if($[_e]&&$[_e]!=et.name)return!1;_e--}}return!0}class BufferContext{constructor($,_e,et,tt){this.parent=$,this.buffer=_e,this.index=et,this.start=tt}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor($,_e,et){super(),this.context=$,this._parent=_e,this.index=et,this.type=$.buffer.set.types[$.buffer.buffer[et]]}child($,_e,et){let{buffer:tt}=this.context,nt=tt.findChild(this.index+4,tt.buffer[this.index+3],$,_e-this.context.start,et);return nt<0?null:new BufferNode(this.context,this,nt)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter($){return this.child(1,$,2)}childBefore($){return this.child(-1,$,-2)}enter($,_e,et=0){if(et&IterMode.ExcludeBuffers)return null;let{buffer:tt}=this.context,nt=tt.findChild(this.index+4,tt.buffer[this.index+3],_e>0?1:-1,$-this.context.start,_e);return nt<0?null:new BufferNode(this.context,this,nt)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling($){return this._parent?null:this.context.parent.nextChild(this.context.index+$,$,0,4)}get nextSibling(){let{buffer:$}=this.context,_e=$.buffer[this.index+3];return _e<(this._parent?$.buffer[this._parent.index+3]:$.buffer.length)?new BufferNode(this.context,this._parent,_e):this.externalSibling(1)}get prevSibling(){let{buffer:$}=this.context,_e=this._parent?this._parent.index+4:0;return this.index==_e?this.externalSibling(-1):new BufferNode(this.context,this._parent,$.findChild(_e,this.index,-1,0,4))}get tree(){return null}toTree(){let $=[],_e=[],{buffer:et}=this.context,tt=this.index+4,nt=et.buffer[this.index+3];if(nt>tt){let rt=et.buffer[this.index+1];$.push(et.slice(tt,nt,rt)),_e.push(0)}return new Tree$1(this.type,$,_e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(j){if(!j.length)return null;let $=0,_e=j[0];for(let nt=1;nt<j.length;nt++){let rt=j[nt];(rt.from>_e.from||rt.to<_e.to)&&(_e=rt,$=nt)}let et=_e instanceof TreeNode&&_e.index<0?null:_e.parent,tt=j.slice();return et?tt[$]=et:tt.splice($,1),new StackIterator(tt,_e)}class StackIterator{constructor($,_e){this.heads=$,this.node=_e}get next(){return iterStack(this.heads)}}function stackIterator(j,$,_e){let et=j.resolveInner($,_e),tt=null;for(let nt=et instanceof TreeNode?et:et.context.parent;nt;nt=nt.parent)if(nt.index<0){let rt=nt.parent;(tt||(tt=[et])).push(rt.resolve($,_e)),nt=rt}else{let rt=MountedTree.get(nt.tree);if(rt&&rt.overlay&&rt.overlay[0].from<=$&&rt.overlay[rt.overlay.length-1].to>=$){let it=new TreeNode(rt.tree,rt.overlay[0].from+nt.from,-1,nt);(tt||(tt=[et])).push(resolveNode(it,$,_e,!1))}}return tt?iterStack(tt):et}class TreeCursor{get name(){return this.type.name}constructor($,_e=0){if(this.mode=_e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,$ instanceof TreeNode)this.yieldNode($);else{this._tree=$.context.parent,this.buffer=$.context;for(let et=$._parent;et;et=et._parent)this.stack.unshift(et.index);this.bufferNode=$,this.yieldBuf($.index)}}yieldNode($){return $?(this._tree=$,this.type=$.type,this.from=$.from,this.to=$.to,!0):!1}yieldBuf($,_e){this.index=$;let{start:et,buffer:tt}=this.buffer;return this.type=_e||tt.set.types[tt.buffer[$]],this.from=et+tt.buffer[$+1],this.to=et+tt.buffer[$+2],!0}yield($){return $?$ instanceof TreeNode?(this.buffer=null,this.yieldNode($)):(this.buffer=$.context,this.yieldBuf($.index,$.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild($,_e,et){if(!this.buffer)return this.yield(this._tree.nextChild($<0?this._tree._tree.children.length-1:0,$,_e,et,this.mode));let{buffer:tt}=this.buffer,nt=tt.findChild(this.index+4,tt.buffer[this.index+3],$,_e-this.buffer.start,et);return nt<0?!1:(this.stack.push(this.index),this.yieldBuf(nt))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter($){return this.enterChild(1,$,2)}childBefore($){return this.enterChild(-1,$,-2)}enter($,_e,et=this.mode){return this.buffer?et&IterMode.ExcludeBuffers?!1:this.enterChild(1,$,_e):this.yield(this._tree.enter($,_e,et))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let $=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode($)}sibling($){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+$,$,0,4,this.mode)):!1;let{buffer:_e}=this.buffer,et=this.stack.length-1;if($<0){let tt=et<0?0:this.stack[et]+4;if(this.index!=tt)return this.yieldBuf(_e.findChild(tt,this.index,-1,0,4))}else{let tt=_e.buffer[this.index+3];if(tt<(et<0?_e.buffer.length:_e.buffer[this.stack[et]+3]))return this.yieldBuf(tt)}return et<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+$,$,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode($){let _e,et,{buffer:tt}=this;if(tt){if($>0){if(this.index<tt.buffer.buffer.length)return!1}else for(let nt=0;nt<this.index;nt++)if(tt.buffer.buffer[nt+3]<this.index)return!1;({index:_e,parent:et}=tt)}else({index:_e,_parent:et}=this._tree);for(;et;{index:_e,_parent:et}=et)if(_e>-1)for(let nt=_e+$,rt=$<0?-1:et._tree.children.length;nt!=rt;nt+=$){let it=et._tree.children[nt];if(this.mode&IterMode.IncludeAnonymous||it instanceof TreeBuffer||!it.type.isAnonymous||hasChild(it))return!1}return!0}move($,_e){if(_e&&this.enterChild($,0,4))return!0;for(;;){if(this.sibling($))return!0;if(this.atLastNode($)||!this.parent())return!1}}next($=!0){return this.move(1,$)}prev($=!0){return this.move(-1,$)}moveTo($,_e=0){for(;(this.from==this.to||(_e<1?this.from>=$:this.from>$)||(_e>-1?this.to<=$:this.to<$))&&this.parent(););for(;this.enterChild(1,$,_e););return this}get node(){if(!this.buffer)return this._tree;let $=this.bufferNode,_e=null,et=0;if($&&$.context==this.buffer)e:for(let tt=this.index,nt=this.stack.length;nt>=0;){for(let rt=$;rt;rt=rt._parent)if(rt.index==tt){if(tt==this.index)return rt;_e=rt,et=nt+1;break e}tt=this.stack[--nt]}for(let tt=et;tt<this.stack.length;tt++)_e=new BufferNode(this.buffer,_e,this.stack[tt]);return this.bufferNode=new BufferNode(this.buffer,_e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate($,_e){for(let et=0;;){let tt=!1;if(this.type.isAnonymous||$(this)!==!1){if(this.firstChild()){et++;continue}this.type.isAnonymous||(tt=!0)}for(;tt&&_e&&_e(this),tt=this.type.isAnonymous,!this.nextSibling();){if(!et)return;this.parent(),et--,tt=!0}}}matchContext($){if(!this.buffer)return matchNodeContext(this.node,$);let{buffer:_e}=this.buffer,{types:et}=_e.set;for(let tt=$.length-1,nt=this.stack.length-1;tt>=0;nt--){if(nt<0)return matchNodeContext(this.node,$,tt);let rt=et[_e.buffer[this.stack[nt]]];if(!rt.isAnonymous){if($[tt]&&$[tt]!=rt.name)return!1;tt--}}return!0}}function hasChild(j){return j.children.some($=>$ instanceof TreeBuffer||!$.type.isAnonymous||hasChild($))}function buildTree(j){var $;let{buffer:_e,nodeSet:et,maxBufferLength:tt=DefaultBufferLength,reused:nt=[],minRepeatType:rt=et.types.length}=j,it=Array.isArray(_e)?new FlatBufferCursor(_e,_e.length):_e,st=et.types,ot=0,at=0;function lt(At,$t,bt,Bt,Rt,St){let{id:kt,start:Pt,end:Mt,size:Lt}=it,zt=at;for(;Lt<0;)if(it.next(),Lt==-1){let jt=nt[kt];bt.push(jt),Bt.push(Pt-At);return}else if(Lt==-3){ot=kt;return}else if(Lt==-4){at=kt;return}else throw new RangeError(`Unrecognized record size: ${Lt}`);let Kt=st[kt],Ut,It,Vt=Pt-At;if(Mt-Pt<=tt&&(It=mt(it.pos-$t,Rt))){let jt=new Uint16Array(It.size-It.skip),Yt=it.pos-It.size,Xt=jt.length;for(;it.pos>Yt;)Xt=pt(It.start,jt,Xt);Ut=new TreeBuffer(jt,Mt-It.start,et),Vt=It.start-At}else{let jt=it.pos-Lt;it.next();let Yt=[],Xt=[],sn=kt>=rt?kt:-1,on=0,hn=Mt;for(;it.pos>jt;)sn>=0&&it.id==sn&&it.size>=0?(it.end<=hn-tt&&(ft(Yt,Xt,Pt,on,it.end,hn,sn,zt),on=Yt.length,hn=it.end),it.next()):St>2500?ut(Pt,jt,Yt,Xt):lt(Pt,jt,Yt,Xt,sn,St+1);if(sn>=0&&on>0&&on<Yt.length&&ft(Yt,Xt,Pt,on,Pt,hn,sn,zt),Yt.reverse(),Xt.reverse(),sn>-1&&on>0){let cn=ct(Kt);Ut=balanceRange(Kt,Yt,Xt,0,Yt.length,0,Mt-Pt,cn,cn)}else Ut=dt(Kt,Yt,Xt,Mt-Pt,zt-Mt)}bt.push(Ut),Bt.push(Vt)}function ut(At,$t,bt,Bt){let Rt=[],St=0,kt=-1;for(;it.pos>$t;){let{id:Pt,start:Mt,end:Lt,size:zt}=it;if(zt>4)it.next();else{if(kt>-1&&Mt<kt)break;kt<0&&(kt=Lt-tt),Rt.push(Pt,Mt,Lt),St++,it.next()}}if(St){let Pt=new Uint16Array(St*4),Mt=Rt[Rt.length-2];for(let Lt=Rt.length-3,zt=0;Lt>=0;Lt-=3)Pt[zt++]=Rt[Lt],Pt[zt++]=Rt[Lt+1]-Mt,Pt[zt++]=Rt[Lt+2]-Mt,Pt[zt++]=zt;bt.push(new TreeBuffer(Pt,Rt[2]-Mt,et)),Bt.push(Mt-At)}}function ct(At){return($t,bt,Bt)=>{let Rt=0,St=$t.length-1,kt,Pt;if(St>=0&&(kt=$t[St])instanceof Tree$1){if(!St&&kt.type==At&&kt.length==Bt)return kt;(Pt=kt.prop(NodeProp.lookAhead))&&(Rt=bt[St]+kt.length+Pt)}return dt(At,$t,bt,Bt,Rt)}}function ft(At,$t,bt,Bt,Rt,St,kt,Pt){let Mt=[],Lt=[];for(;At.length>Bt;)Mt.push(At.pop()),Lt.push($t.pop()+bt-Rt);At.push(dt(et.types[kt],Mt,Lt,St-Rt,Pt-St)),$t.push(Rt-bt)}function dt(At,$t,bt,Bt,Rt=0,St){if(ot){let kt=[NodeProp.contextHash,ot];St=St?[kt].concat(St):[kt]}if(Rt>25){let kt=[NodeProp.lookAhead,Rt];St=St?[kt].concat(St):[kt]}return new Tree$1(At,$t,bt,Bt,St)}function mt(At,$t){let bt=it.fork(),Bt=0,Rt=0,St=0,kt=bt.end-tt,Pt={size:0,start:0,skip:0};e:for(let Mt=bt.pos-At;bt.pos>Mt;){let Lt=bt.size;if(bt.id==$t&&Lt>=0){Pt.size=Bt,Pt.start=Rt,Pt.skip=St,St+=4,Bt+=4,bt.next();continue}let zt=bt.pos-Lt;if(Lt<0||zt<Mt||bt.start<kt)break;let Kt=bt.id>=rt?4:0,Ut=bt.start;for(bt.next();bt.pos>zt;){if(bt.size<0)if(bt.size==-3)Kt+=4;else break e;else bt.id>=rt&&(Kt+=4);bt.next()}Rt=Ut,Bt+=Lt,St+=Kt}return($t<0||Bt==At)&&(Pt.size=Bt,Pt.start=Rt,Pt.skip=St),Pt.size>4?Pt:void 0}function pt(At,$t,bt){let{id:Bt,start:Rt,end:St,size:kt}=it;if(it.next(),kt>=0&&Bt<rt){let Pt=bt;if(kt>4){let Mt=it.pos-(kt-4);for(;it.pos>Mt;)bt=pt(At,$t,bt)}$t[--bt]=Pt,$t[--bt]=St-At,$t[--bt]=Rt-At,$t[--bt]=Bt}else kt==-3?ot=Bt:kt==-4&&(at=Bt);return bt}let yt=[],vt=[];for(;it.pos>0;)lt(j.start||0,j.bufferStart||0,yt,vt,-1,0);let Ct=($=j.length)!==null&&$!==void 0?$:yt.length?vt[0]+yt[0].length:0;return new Tree$1(st[j.topID],yt.reverse(),vt.reverse(),Ct)}const nodeSizeCache=new WeakMap;function nodeSize(j,$){if(!j.isAnonymous||$ instanceof TreeBuffer||$.type!=j)return 1;let _e=nodeSizeCache.get($);if(_e==null){_e=1;for(let et of $.children){if(et.type!=j||!(et instanceof Tree$1)){_e=1;break}_e+=nodeSize(j,et)}nodeSizeCache.set($,_e)}return _e}function balanceRange(j,$,_e,et,tt,nt,rt,it,st){let ot=0;for(let ft=et;ft<tt;ft++)ot+=nodeSize(j,$[ft]);let at=Math.ceil(ot*1.5/8),lt=[],ut=[];function ct(ft,dt,mt,pt,yt){for(let vt=mt;vt<pt;){let Ct=vt,At=dt[vt],$t=nodeSize(j,ft[vt]);for(vt++;vt<pt;vt++){let bt=nodeSize(j,ft[vt]);if($t+bt>=at)break;$t+=bt}if(vt==Ct+1){if($t>at){let bt=ft[Ct];ct(bt.children,bt.positions,0,bt.children.length,dt[Ct]+yt);continue}lt.push(ft[Ct])}else{let bt=dt[vt-1]+ft[vt-1].length-At;lt.push(balanceRange(j,ft,dt,Ct,vt,At,bt,null,st))}ut.push(At+yt-nt)}}return ct($,_e,et,tt,0),(it||st)(lt,ut,rt)}class TreeFragment{constructor($,_e,et,tt,nt=!1,rt=!1){this.from=$,this.to=_e,this.tree=et,this.offset=tt,this.open=(nt?1:0)|(rt?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree($,_e=[],et=!1){let tt=[new TreeFragment(0,$.length,$,0,!1,et)];for(let nt of _e)nt.to>$.length&&tt.push(nt);return tt}static applyChanges($,_e,et=128){if(!_e.length)return $;let tt=[],nt=1,rt=$.length?$[0]:null;for(let it=0,st=0,ot=0;;it++){let at=it<_e.length?_e[it]:null,lt=at?at.fromA:1e9;if(lt-st>=et)for(;rt&&rt.from<lt;){let ut=rt;if(st>=ut.from||lt<=ut.to||ot){let ct=Math.max(ut.from,st)-ot,ft=Math.min(ut.to,lt)-ot;ut=ct>=ft?null:new TreeFragment(ct,ft,ut.tree,ut.offset+ot,it>0,!!at)}if(ut&&tt.push(ut),rt.to>lt)break;rt=nt<$.length?$[nt++]:null}if(!at)break;st=at.toA,ot=at.toA-at.toB}return tt}}let Parser$1=class{startParse($,_e,et){return typeof $=="string"&&($=new StringInput($)),et=et?et.length?et.map(tt=>new Range(tt.from,tt.to)):[new Range(0,0)]:[new Range(0,$.length)],this.createParse($,_e||[],et)}parse($,_e,et){let tt=this.startParse($,_e,et);for(;;){let nt=tt.advance();if(nt)return nt}}};class StringInput{constructor($){this.string=$}get length(){return this.string.length}chunk($){return this.string.slice($)}get lineChunks(){return!1}read($,_e){return this.string.slice($,_e)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor($,_e,et){this.set=$,this.base=_e,this.modified=et,this.id=nextTagID++}static define($){if($!=null&&$.base)throw new Error("Can not derive from a modified tag");let _e=new Tag([],null,[]);if(_e.set.push(_e),$)for(let et of $.set)_e.set.push(et);return _e}static defineModifier(){let $=new Modifier;return _e=>_e.modified.indexOf($)>-1?_e:Modifier.get(_e.base||_e,_e.modified.concat($).sort((et,tt)=>et.id-tt.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get($,_e){if(!_e.length)return $;let et=_e[0].instances.find(it=>it.base==$&&sameArray(_e,it.modified));if(et)return et;let tt=[],nt=new Tag(tt,$,_e);for(let it of _e)it.instances.push(nt);let rt=powerSet(_e);for(let it of $.set)if(!it.modified.length)for(let st of rt)tt.push(Modifier.get(it,st));return nt}}function sameArray(j,$){return j.length==$.length&&j.every((_e,et)=>_e==$[et])}function powerSet(j){let $=[[]];for(let _e=0;_e<j.length;_e++)for(let et=0,tt=$.length;et<tt;et++)$.push($[et].concat(j[_e]));return $.sort((_e,et)=>et.length-_e.length)}function styleTags(j){let $=Object.create(null);for(let _e in j){let et=j[_e];Array.isArray(et)||(et=[et]);for(let tt of _e.split(" "))if(tt){let nt=[],rt=2,it=tt;for(let lt=0;;){if(it=="..."&&lt>0&&lt+3==tt.length){rt=1;break}let ut=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(it);if(!ut)throw new RangeError("Invalid path: "+tt);if(nt.push(ut[0]=="*"?"":ut[0][0]=='"'?JSON.parse(ut[0]):ut[0]),lt+=ut[0].length,lt==tt.length)break;let ct=tt[lt++];if(lt==tt.length&&ct=="!"){rt=0;break}if(ct!="/")throw new RangeError("Invalid path: "+tt);it=tt.slice(lt)}let st=nt.length-1,ot=nt[st];if(!ot)throw new RangeError("Invalid path: "+tt);let at=new Rule(et,rt,st>0?nt.slice(0,st):null);$[ot]=at.sort($[ot])}}return ruleNodeProp.add($)}const ruleNodeProp=new NodeProp;class Rule{constructor($,_e,et,tt){this.tags=$,this.mode=_e,this.context=et,this.next=tt}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort($){return!$||$.depth<this.depth?(this.next=$,this):($.next=this.sort($.next),$)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(j,$){let _e=Object.create(null);for(let nt of j)if(!Array.isArray(nt.tag))_e[nt.tag.id]=nt.class;else for(let rt of nt.tag)_e[rt.id]=nt.class;let{scope:et,all:tt=null}=$||{};return{style:nt=>{let rt=tt;for(let it of nt)for(let st of it.set){let ot=_e[st.id];if(ot){rt=rt?rt+" "+ot:ot;break}}return rt},scope:et}}function highlightTags(j,$){let _e=null;for(let et of j){let tt=et.style($);tt&&(_e=_e?_e+" "+tt:tt)}return _e}function highlightTree(j,$,_e,et=0,tt=j.length){let nt=new HighlightBuilder(et,Array.isArray($)?$:[$],_e);nt.highlightRange(j.cursor(),et,tt,"",nt.highlighters),nt.flush(tt)}class HighlightBuilder{constructor($,_e,et){this.at=$,this.highlighters=_e,this.span=et,this.class=""}startSpan($,_e){_e!=this.class&&(this.flush($),$>this.at&&(this.at=$),this.class=_e)}flush($){$>this.at&&this.class&&this.span(this.at,$,this.class)}highlightRange($,_e,et,tt,nt){let{type:rt,from:it,to:st}=$;if(it>=et||st<=_e)return;rt.isTop&&(nt=this.highlighters.filter(ct=>!ct.scope||ct.scope(rt)));let ot=tt,at=getStyleTags($)||Rule.empty,lt=highlightTags(nt,at.tags);if(lt&&(ot&&(ot+=" "),ot+=lt,at.mode==1&&(tt+=(tt?" ":"")+lt)),this.startSpan(Math.max(_e,it),ot),at.opaque)return;let ut=$.tree&&$.tree.prop(NodeProp.mounted);if(ut&&ut.overlay){let ct=$.node.enter(ut.overlay[0].from+it,1),ft=this.highlighters.filter(mt=>!mt.scope||mt.scope(ut.tree.type)),dt=$.firstChild();for(let mt=0,pt=it;;mt++){let yt=mt<ut.overlay.length?ut.overlay[mt]:null,vt=yt?yt.from+it:st,Ct=Math.max(_e,pt),At=Math.min(et,vt);if(Ct<At&&dt)for(;$.from<At&&(this.highlightRange($,Ct,At,tt,nt),this.startSpan(Math.min(At,$.to),ot),!($.to>=vt||!$.nextSibling())););if(!yt||vt>et)break;pt=yt.to+it,pt>_e&&(this.highlightRange(ct.cursor(),Math.max(_e,yt.from+it),Math.min(et,pt),"",ft),this.startSpan(Math.min(et,pt),ot))}dt&&$.parent()}else if($.firstChild()){ut&&(tt="");do if(!($.to<=_e)){if($.from>=et)break;this.highlightRange($,_e,et,tt,nt),this.startSpan(Math.min(et,$.to),ot)}while($.nextSibling());$.parent()}}}function getStyleTags(j){let $=j.type.prop(ruleNodeProp);for(;$&&$.context&&!j.matchContext($.context);)$=$.next;return $||null}const t$2=Tag.define,comment=t$2(),name=t$2(),typeName=t$2(name),propertyName=t$2(name),literal=t$2(),string=t$2(literal),number=t$2(literal),content=t$2(),heading=t$2(content),keyword=t$2(),operator=t$2(),punctuation=t$2(),bracket=t$2(punctuation),meta=t$2(),tags={comment,lineComment:t$2(comment),blockComment:t$2(comment),docComment:t$2(comment),name,variableName:t$2(name),typeName,tagName:t$2(typeName),propertyName,attributeName:t$2(propertyName),className:t$2(name),labelName:t$2(name),namespace:t$2(name),macroName:t$2(name),literal,string,docString:t$2(string),character:t$2(string),attributeValue:t$2(string),number,integer:t$2(number),float:t$2(number),bool:t$2(literal),regexp:t$2(literal),escape:t$2(literal),color:t$2(literal),url:t$2(literal),keyword,self:t$2(keyword),null:t$2(keyword),atom:t$2(keyword),unit:t$2(keyword),modifier:t$2(keyword),operatorKeyword:t$2(keyword),controlKeyword:t$2(keyword),definitionKeyword:t$2(keyword),moduleKeyword:t$2(keyword),operator,derefOperator:t$2(operator),arithmeticOperator:t$2(operator),logicOperator:t$2(operator),bitwiseOperator:t$2(operator),compareOperator:t$2(operator),updateOperator:t$2(operator),definitionOperator:t$2(operator),typeOperator:t$2(operator),controlOperator:t$2(operator),punctuation,separator:t$2(punctuation),bracket,angleBracket:t$2(bracket),squareBracket:t$2(bracket),paren:t$2(bracket),brace:t$2(bracket),content,heading,heading1:t$2(heading),heading2:t$2(heading),heading3:t$2(heading),heading4:t$2(heading),heading5:t$2(heading),heading6:t$2(heading),contentSeparator:t$2(content),list:t$2(content),quote:t$2(content),emphasis:t$2(content),strong:t$2(content),link:t$2(content),monospace:t$2(content),strikethrough:t$2(content),inserted:t$2(),deleted:t$2(),changed:t$2(),invalid:t$2(),meta,documentMeta:t$2(meta),annotation:t$2(meta),processingInstruction:t$2(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(j){return Facet.define({combine:j?$=>$.concat(j):void 0})}const sublanguageProp=new NodeProp;class Language{constructor($,_e,et=[],tt=""){this.data=$,this.name=tt,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=_e,this.extension=[language.of(this),EditorState.languageData.of((nt,rt,it)=>{let st=topNodeAt(nt,rt,it),ot=st.type.prop(languageDataProp);if(!ot)return[];let at=nt.facet(ot),lt=st.type.prop(sublanguageProp);if(lt){let ut=st.resolve(rt-st.from,it);for(let ct of lt)if(ct.test(ut,nt)){let ft=nt.facet(ct.facet);return ct.type=="replace"?ft:ft.concat(at)}}return at})].concat(et)}isActiveAt($,_e,et=-1){return topNodeAt($,_e,et).type.prop(languageDataProp)==this.data}findRegions($){let _e=$.facet(language);if((_e==null?void 0:_e.data)==this.data)return[{from:0,to:$.doc.length}];if(!_e||!_e.allowsNesting)return[];let et=[],tt=(nt,rt)=>{if(nt.prop(languageDataProp)==this.data){et.push({from:rt,to:rt+nt.length});return}let it=nt.prop(NodeProp.mounted);if(it){if(it.tree.prop(languageDataProp)==this.data){if(it.overlay)for(let st of it.overlay)et.push({from:st.from+rt,to:st.to+rt});else et.push({from:rt,to:rt+nt.length});return}else if(it.overlay){let st=et.length;if(tt(it.tree,it.overlay[0].from+rt),et.length>st)return}}for(let st=0;st<nt.children.length;st++){let ot=nt.children[st];ot instanceof Tree$1&&tt(ot,nt.positions[st]+rt)}};return tt(syntaxTree($),0),et}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(j,$,_e){let et=j.facet(language),tt=syntaxTree(j).topNode;if(!et||et.allowsNesting)for(let nt=tt;nt;nt=nt.enter($,_e,IterMode.ExcludeBuffers))nt.type.isTop&&(tt=nt);return tt}class LRLanguage extends Language{constructor($,_e,et){super($,_e,[],et),this.parser=_e}static define($){let _e=defineLanguageFacet($.languageData);return new LRLanguage(_e,$.parser.configure({props:[languageDataProp.add(et=>et.isTop?_e:void 0)]}),$.name)}configure($,_e){return new LRLanguage(this.data,this.parser.configure($),_e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(j){let $=j.field(Language.state,!1);return $?$.tree:Tree$1.empty}class DocInput{constructor($){this.doc=$,this.cursorPos=0,this.string="",this.cursor=$.iter()}get length(){return this.doc.length}syncTo($){return this.string=this.cursor.next($-this.cursorPos).value,this.cursorPos=$+this.string.length,this.cursorPos-this.string.length}chunk($){return this.syncTo($),this.string}get lineChunks(){return!0}read($,_e){let et=this.cursorPos-this.string.length;return $<et||_e>=this.cursorPos?this.doc.sliceString($,_e):this.string.slice($-et,_e-et)}}let currentContext=null;class ParseContext{constructor($,_e,et=[],tt,nt,rt,it,st){this.parser=$,this.state=_e,this.fragments=et,this.tree=tt,this.treeLen=nt,this.viewport=rt,this.skipped=it,this.scheduleOn=st,this.parse=null,this.tempSkipped=[]}static create($,_e,et){return new ParseContext($,_e,[],Tree$1.empty,0,et,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work($,_e){return _e!=null&&_e>=this.state.doc.length&&(_e=void 0),this.tree!=Tree$1.empty&&this.isDone(_e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var et;if(typeof $=="number"){let tt=Date.now()+$;$=()=>Date.now()>tt}for(this.parse||(this.parse=this.startParse()),_e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>_e)&&_e<this.state.doc.length&&this.parse.stopAt(_e);;){let tt=this.parse.advance();if(tt)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(tt,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(et=this.parse.stoppedAt)!==null&&et!==void 0?et:this.state.doc.length,this.tree=tt,this.parse=null,this.treeLen<(_e??this.state.doc.length))this.parse=this.startParse();else return!0;if($())return!1}})}takeTree(){let $,_e;this.parse&&($=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>$)&&this.parse.stopAt($),this.withContext(()=>{for(;!(_e=this.parse.advance()););}),this.treeLen=$,this.tree=_e,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext($){let _e=currentContext;currentContext=this;try{return $()}finally{currentContext=_e}}withoutTempSkipped($){for(let _e;_e=this.tempSkipped.pop();)$=cutFragments($,_e.from,_e.to);return $}changes($,_e){let{fragments:et,tree:tt,treeLen:nt,viewport:rt,skipped:it}=this;if(this.takeTree(),!$.empty){let st=[];if($.iterChangedRanges((ot,at,lt,ut)=>st.push({fromA:ot,toA:at,fromB:lt,toB:ut})),et=TreeFragment.applyChanges(et,st),tt=Tree$1.empty,nt=0,rt={from:$.mapPos(rt.from,-1),to:$.mapPos(rt.to,1)},this.skipped.length){it=[];for(let ot of this.skipped){let at=$.mapPos(ot.from,1),lt=$.mapPos(ot.to,-1);at<lt&&it.push({from:at,to:lt})}}}return new ParseContext(this.parser,_e,et,tt,nt,rt,it,this.scheduleOn)}updateViewport($){if(this.viewport.from==$.from&&this.viewport.to==$.to)return!1;this.viewport=$;let _e=this.skipped.length;for(let et=0;et<this.skipped.length;et++){let{from:tt,to:nt}=this.skipped[et];tt<$.to&&nt>$.from&&(this.fragments=cutFragments(this.fragments,tt,nt),this.skipped.splice(et--,1))}return this.skipped.length>=_e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView($,_e){this.skipped.push({from:$,to:_e})}static getSkippingParser($){return new class extends Parser$1{createParse(_e,et,tt){let nt=tt[0].from,rt=tt[tt.length-1].to;return{parsedPos:nt,advance(){let st=currentContext;if(st){for(let ot of tt)st.tempSkipped.push(ot);$&&(st.scheduleOn=st.scheduleOn?Promise.all([st.scheduleOn,$]):$)}return this.parsedPos=rt,new Tree$1(NodeType.none,[],[],rt-nt)},stoppedAt:null,stopAt(){}}}}}isDone($){$=Math.min($,this.state.doc.length);let _e=this.fragments;return this.treeLen>=$&&_e.length&&_e[0].from==0&&_e[0].to>=$}static get(){return currentContext}}function cutFragments(j,$,_e){return TreeFragment.applyChanges(j,[{fromA:$,toA:_e,fromB:$,toB:_e}])}class LanguageState{constructor($){this.context=$,this.tree=$.tree}apply($){if(!$.docChanged&&this.tree==this.context.tree)return this;let _e=this.context.changes($.changes,$.state),et=this.context.treeLen==$.startState.doc.length?void 0:Math.max($.changes.mapPos(this.context.treeLen),_e.viewport.to);return _e.work(20,et)||_e.takeTree(),new LanguageState(_e)}static init($){let _e=Math.min(3e3,$.doc.length),et=ParseContext.create($.facet(language).parser,$,{from:0,to:_e});return et.work(20,_e)||et.takeTree(),new LanguageState(et)}}Language.state=StateField.define({create:LanguageState.init,update(j,$){for(let _e of $.effects)if(_e.is(Language.setState))return _e.value;return $.startState.facet(language)!=$.state.facet(language)?LanguageState.init($.state):j.apply($)}});let requestIdle=j=>{let $=setTimeout(()=>j(),500);return()=>clearTimeout($)};typeof requestIdleCallback<"u"&&(requestIdle=j=>{let $=-1,_e=setTimeout(()=>{$=requestIdleCallback(j,{timeout:500-100})},100);return()=>$<0?clearTimeout(_e):cancelIdleCallback($)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor($){this.view=$,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update($){let _e=this.view.state.field(Language.state).context;(_e.updateViewport($.view.viewport)||this.view.viewport.to>_e.treeLen)&&this.scheduleWork(),($.docChanged||$.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(_e)}scheduleWork(){if(this.working)return;let{state:$}=this.view,_e=$.field(Language.state);(_e.tree!=_e.context.tree||!_e.context.isDone($.doc.length))&&(this.working=requestIdle(this.work))}work($){this.working=null;let _e=Date.now();if(this.chunkEnd<_e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=_e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:et,viewport:{to:tt}}=this.view,nt=et.field(Language.state);if(nt.tree==nt.context.tree&&nt.context.isDone(tt+1e5))return;let rt=Date.now()+Math.min(this.chunkBudget,100,$&&!isInputPending?Math.max(25,$.timeRemaining()-5):1e9),it=nt.context.treeLen<tt&&et.doc.length>tt+1e3,st=nt.context.work(()=>isInputPending&&isInputPending()||Date.now()>rt,tt+(it?0:1e5));this.chunkBudget-=Date.now()-_e,(st||this.chunkBudget<=0)&&(nt.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(nt.context))})),this.chunkBudget>0&&!(st&&!it)&&this.scheduleWork(),this.checkAsyncSchedule(nt.context)}checkAsyncSchedule($){$.scheduleOn&&(this.workScheduled++,$.scheduleOn.then(()=>this.scheduleWork()).catch(_e=>logException(this.view.state,_e)).then(()=>this.workScheduled--),$.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(j){return j.length?j[0]:null},enables:j=>[Language.state,parseWorker,EditorView.contentAttributes.compute([j],$=>{let _e=$.facet(j);return _e&&_e.name?{"data-language":_e.name}:{}})]});class LanguageSupport{constructor($,_e=[]){this.language=$,this.support=_e,this.extension=[$,_e]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:j=>{if(!j.length)return"  ";let $=j[0];if(!$||/\S/.test($)||Array.from($).some(_e=>_e!=$[0]))throw new Error("Invalid indent unit: "+JSON.stringify(j[0]));return $}});function getIndentUnit(j){let $=j.facet(indentUnit);return $.charCodeAt(0)==9?j.tabSize*$.length:$.length}function indentString(j,$){let _e="",et=j.tabSize,tt=j.facet(indentUnit)[0];if(tt=="	"){for(;$>=et;)_e+="	",$-=et;tt=" "}for(let nt=0;nt<$;nt++)_e+=tt;return _e}function getIndentation(j,$){j instanceof EditorState&&(j=new IndentContext(j));for(let et of j.state.facet(indentService)){let tt=et(j,$);if(tt!==void 0)return tt}let _e=syntaxTree(j.state);return _e.length>=$?syntaxIndentation(j,_e,$):null}class IndentContext{constructor($,_e={}){this.state=$,this.options=_e,this.unit=getIndentUnit($)}lineAt($,_e=1){let et=this.state.doc.lineAt($),{simulateBreak:tt,simulateDoubleBreak:nt}=this.options;return tt!=null&&tt>=et.from&&tt<=et.to?nt&&tt==$?{text:"",from:$}:(_e<0?tt<$:tt<=$)?{text:et.text.slice(tt-et.from),from:tt}:{text:et.text.slice(0,tt-et.from),from:et.from}:et}textAfterPos($,_e=1){if(this.options.simulateDoubleBreak&&$==this.options.simulateBreak)return"";let{text:et,from:tt}=this.lineAt($,_e);return et.slice($-tt,Math.min(et.length,$+100-tt))}column($,_e=1){let{text:et,from:tt}=this.lineAt($,_e),nt=this.countColumn(et,$-tt),rt=this.options.overrideIndentation?this.options.overrideIndentation(tt):-1;return rt>-1&&(nt+=rt-this.countColumn(et,et.search(/\S|$/))),nt}countColumn($,_e=$.length){return countColumn($,this.state.tabSize,_e)}lineIndent($,_e=1){let{text:et,from:tt}=this.lineAt($,_e),nt=this.options.overrideIndentation;if(nt){let rt=nt(tt);if(rt>-1)return rt}return this.countColumn(et,et.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(j,$,_e){let et=$.resolveStack(_e),tt=et.node.enterUnfinishedNodesBefore(_e);if(tt!=et.node){let nt=[];for(let rt=tt;rt!=et.node;rt=rt.parent)nt.push(rt);for(let rt=nt.length-1;rt>=0;rt--)et={node:nt[rt],next:et}}return indentFor(et,j,_e)}function indentFor(j,$,_e){for(let et=j;et;et=et.next){let tt=indentStrategy(et.node);if(tt)return tt(TreeIndentContext.create($,_e,et))}return 0}function ignoreClosed(j){return j.pos==j.options.simulateBreak&&j.options.simulateDoubleBreak}function indentStrategy(j){let $=j.type.prop(indentNodeProp);if($)return $;let _e=j.firstChild,et;if(_e&&(et=_e.type.prop(NodeProp.closedBy))){let tt=j.lastChild,nt=tt&&et.indexOf(tt.name)>-1;return rt=>delimitedStrategy(rt,!0,1,void 0,nt&&!ignoreClosed(rt)?tt.from:void 0)}return j.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor($,_e,et){super($.state,$.options),this.base=$,this.pos=_e,this.context=et}get node(){return this.context.node}static create($,_e,et){return new TreeIndentContext($,_e,et)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor($){let _e=this.state.doc.lineAt($.from);for(;;){let et=$.resolve(_e.from);for(;et.parent&&et.parent.from==et.from;)et=et.parent;if(isParent(et,$))break;_e=this.state.doc.lineAt(et.from)}return this.lineIndent(_e.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(j,$){for(let _e=$;_e;_e=_e.parent)if(j==_e)return!0;return!1}function bracketedAligned(j){let $=j.node,_e=$.childAfter($.from),et=$.lastChild;if(!_e)return null;let tt=j.options.simulateBreak,nt=j.state.doc.lineAt(_e.from),rt=tt==null||tt<=nt.from?nt.to:Math.min(nt.to,tt);for(let it=_e.to;;){let st=$.childAfter(it);if(!st||st==et)return null;if(!st.type.isSkipped)return st.from<rt?_e:null;it=st.to}}function delimitedIndent({closing:j,align:$=!0,units:_e=1}){return et=>delimitedStrategy(et,$,_e,j)}function delimitedStrategy(j,$,_e,et,tt){let nt=j.textAfter,rt=nt.match(/^\s*/)[0].length,it=et&&nt.slice(rt,rt+et.length)==et||tt==j.pos+rt,st=$?bracketedAligned(j):null;return st?it?j.column(st.from):j.column(st.to):j.baseIndent+(it?0:j.unit*_e)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(j=>{if(!j.docChanged||!j.isUserEvent("input.type")&&!j.isUserEvent("input.complete"))return j;let $=j.startState.languageDataAt("indentOnInput",j.startState.selection.main.head);if(!$.length)return j;let _e=j.newDoc,{head:et}=j.newSelection.main,tt=_e.lineAt(et);if(et>tt.from+DontIndentBeyond)return j;let nt=_e.sliceString(tt.from,et);if(!$.some(ot=>ot.test(nt)))return j;let{state:rt}=j,it=-1,st=[];for(let{head:ot}of rt.selection.ranges){let at=rt.doc.lineAt(ot);if(at.from==it)continue;it=at.from;let lt=getIndentation(rt,at.from);if(lt==null)continue;let ut=/^\s*/.exec(at.text)[0],ct=indentString(rt,lt);ut!=ct&&st.push({from:at.from,to:at.from+ut.length,insert:ct})}return st.length?[j,{changes:st,sequential:!0}]:j})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(j){let $=j.firstChild,_e=j.lastChild;return $&&$.to<_e.from?{from:$.to,to:_e.type.isError?j.to:_e.from}:null}function syntaxFolding(j,$,_e){let et=syntaxTree(j);if(et.length<_e)return null;let tt=et.resolveStack(_e,1),nt=null;for(let rt=tt;rt;rt=rt.next){let it=rt.node;if(it.to<=_e||it.from>_e)continue;if(nt&&it.from<$)break;let st=it.type.prop(foldNodeProp);if(st&&(it.to<et.length-50||et.length==j.doc.length||!isUnfinished(it))){let ot=st(it,j);ot&&ot.from<=_e&&ot.from>=$&&ot.to>_e&&(nt=ot)}}return nt}function isUnfinished(j){let $=j.lastChild;return $&&$.to==j.to&&$.type.isError}function foldable(j,$,_e){for(let et of j.facet(foldService)){let tt=et(j,$,_e);if(tt)return tt}return syntaxFolding(j,$,_e)}function mapRange(j,$){let _e=$.mapPos(j.from,1),et=$.mapPos(j.to,-1);return _e>=et?void 0:{from:_e,to:et}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(j){let $=[];for(let{head:_e}of j.state.selection.ranges)$.some(et=>et.from<=_e&&et.to>=_e)||$.push(j.lineBlockAt(_e));return $}const foldState=StateField.define({create(){return Decoration.none},update(j,$){j=j.map($.changes);for(let _e of $.effects)if(_e.is(foldEffect)&&!foldExists(j,_e.value.from,_e.value.to)){let{preparePlaceholder:et}=$.state.facet(foldConfig),tt=et?Decoration.replace({widget:new PreparedFoldWidget(et($.state,_e.value))}):foldWidget;j=j.update({add:[tt.range(_e.value.from,_e.value.to)]})}else _e.is(unfoldEffect)&&(j=j.update({filter:(et,tt)=>_e.value.from!=et||_e.value.to!=tt,filterFrom:_e.value.from,filterTo:_e.value.to}));if($.selection){let _e=!1,{head:et}=$.selection.main;j.between(et,et,(tt,nt)=>{tt<et&&nt>et&&(_e=!0)}),_e&&(j=j.update({filterFrom:et,filterTo:et,filter:(tt,nt)=>nt<=et||tt>=et}))}return j},provide:j=>EditorView.decorations.from(j),toJSON(j,$){let _e=[];return j.between(0,$.doc.length,(et,tt)=>{_e.push(et,tt)}),_e},fromJSON(j){if(!Array.isArray(j)||j.length%2)throw new RangeError("Invalid JSON for fold state");let $=[];for(let _e=0;_e<j.length;){let et=j[_e++],tt=j[_e++];if(typeof et!="number"||typeof tt!="number")throw new RangeError("Invalid JSON for fold state");$.push(foldWidget.range(et,tt))}return Decoration.set($,!0)}});function findFold(j,$,_e){var et;let tt=null;return(et=j.field(foldState,!1))===null||et===void 0||et.between($,_e,(nt,rt)=>{(!tt||tt.from>nt)&&(tt={from:nt,to:rt})}),tt}function foldExists(j,$,_e){let et=!1;return j.between($,$,(tt,nt)=>{tt==$&&nt==_e&&(et=!0)}),et}function maybeEnable(j,$){return j.field(foldState,!1)?$:$.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=j=>{for(let $ of selectedLines(j)){let _e=foldable(j.state,$.from,$.to);if(_e)return j.dispatch({effects:maybeEnable(j.state,[foldEffect.of(_e),announceFold(j,_e)])}),!0}return!1},unfoldCode=j=>{if(!j.state.field(foldState,!1))return!1;let $=[];for(let _e of selectedLines(j)){let et=findFold(j.state,_e.from,_e.to);et&&$.push(unfoldEffect.of(et),announceFold(j,et,!1))}return $.length&&j.dispatch({effects:$}),$.length>0};function announceFold(j,$,_e=!0){let et=j.state.doc.lineAt($.from).number,tt=j.state.doc.lineAt($.to).number;return EditorView.announce.of(`${j.state.phrase(_e?"Folded lines":"Unfolded lines")} ${et} ${j.state.phrase("to")} ${tt}.`)}const foldAll=j=>{let{state:$}=j,_e=[];for(let et=0;et<$.doc.length;){let tt=j.lineBlockAt(et),nt=foldable($,tt.from,tt.to);nt&&_e.push(foldEffect.of(nt)),et=(nt?j.lineBlockAt(nt.to):tt).to+1}return _e.length&&j.dispatch({effects:maybeEnable(j.state,_e)}),!!_e.length},unfoldAll=j=>{let $=j.state.field(foldState,!1);if(!$||!$.size)return!1;let _e=[];return $.between(0,j.state.doc.length,(et,tt)=>{_e.push(unfoldEffect.of({from:et,to:tt}))}),j.dispatch({effects:_e}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(j){return combineConfig(j,defaultConfig)}});function codeFolding(j){let $=[foldState,baseTheme$1$2];return j&&$.push(foldConfig.of(j)),$}function widgetToDOM(j,$){let{state:_e}=j,et=_e.facet(foldConfig),tt=rt=>{let it=j.lineBlockAt(j.posAtDOM(rt.target)),st=findFold(j.state,it.from,it.to);st&&j.dispatch({effects:unfoldEffect.of(st)}),rt.preventDefault()};if(et.placeholderDOM)return et.placeholderDOM(j,tt,$);let nt=document.createElement("span");return nt.textContent=et.placeholderText,nt.setAttribute("aria-label",_e.phrase("folded code")),nt.title=_e.phrase("unfold"),nt.className="cm-foldPlaceholder",nt.onclick=tt,nt}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(j){return widgetToDOM(j,null)}}});class PreparedFoldWidget extends WidgetType{constructor($){super(),this.value=$}eq($){return this.value==$.value}toDOM($){return widgetToDOM($,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor($,_e){super(),this.config=$,this.open=_e}eq($){return this.config==$.config&&this.open==$.open}toDOM($){if(this.config.markerDOM)return this.config.markerDOM(this.open);let _e=document.createElement("span");return _e.textContent=this.open?this.config.openText:this.config.closedText,_e.title=$.state.phrase(this.open?"Fold line":"Unfold line"),_e}}function foldGutter(j={}){let $=Object.assign(Object.assign({},foldGutterDefaults),j),_e=new FoldMarker($,!0),et=new FoldMarker($,!1),tt=ViewPlugin.fromClass(class{constructor(rt){this.from=rt.viewport.from,this.markers=this.buildMarkers(rt)}update(rt){(rt.docChanged||rt.viewportChanged||rt.startState.facet(language)!=rt.state.facet(language)||rt.startState.field(foldState,!1)!=rt.state.field(foldState,!1)||syntaxTree(rt.startState)!=syntaxTree(rt.state)||$.foldingChanged(rt))&&(this.markers=this.buildMarkers(rt.view))}buildMarkers(rt){let it=new RangeSetBuilder;for(let st of rt.viewportLineBlocks){let ot=findFold(rt.state,st.from,st.to)?et:foldable(rt.state,st.from,st.to)?_e:null;ot&&it.add(st.from,st.from,ot)}return it.finish()}}),{domEventHandlers:nt}=$;return[tt,gutter({class:"cm-foldGutter",markers(rt){var it;return((it=rt.plugin(tt))===null||it===void 0?void 0:it.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker($,!1)},domEventHandlers:Object.assign(Object.assign({},nt),{click:(rt,it,st)=>{if(nt.click&&nt.click(rt,it,st))return!0;let ot=findFold(rt.state,it.from,it.to);if(ot)return rt.dispatch({effects:unfoldEffect.of(ot)}),!0;let at=foldable(rt.state,it.from,it.to);return at?(rt.dispatch({effects:foldEffect.of(at)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor($,_e){this.specs=$;let et;function tt(it){let st=StyleModule.newName();return(et||(et=Object.create(null)))["."+st]=it,st}const nt=typeof _e.all=="string"?_e.all:_e.all?tt(_e.all):void 0,rt=_e.scope;this.scope=rt instanceof Language?it=>it.prop(languageDataProp)==rt.data:rt?it=>it==rt:void 0,this.style=tagHighlighter($.map(it=>({tag:it.tag,class:it.class||tt(Object.assign({},it,{tag:null}))})),{all:nt}).style,this.module=et?new StyleModule(et):null,this.themeType=_e.themeType}static define($,_e){return new HighlightStyle($,_e||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(j){return j.length?[j[0]]:null}});function getHighlighters(j){let $=j.facet(highlighterFacet);return $.length?$:j.facet(fallbackHighlighter)}function syntaxHighlighting(j,$){let _e=[treeHighlighter],et;return j instanceof HighlightStyle&&(j.module&&_e.push(EditorView.styleModule.of(j.module)),et=j.themeType),$!=null&&$.fallback?_e.push(fallbackHighlighter.of(j)):et?_e.push(highlighterFacet.computeN([EditorView.darkTheme],tt=>tt.facet(EditorView.darkTheme)==(et=="dark")?[j]:[])):_e.push(highlighterFacet.of(j)),_e}class TreeHighlighter{constructor($){this.markCache=Object.create(null),this.tree=syntaxTree($.state),this.decorations=this.buildDeco($,getHighlighters($.state))}update($){let _e=syntaxTree($.state),et=getHighlighters($.state),tt=et!=getHighlighters($.startState);_e.length<$.view.viewport.to&&!tt&&_e.type==this.tree.type?this.decorations=this.decorations.map($.changes):(_e!=this.tree||$.viewportChanged||tt)&&(this.tree=_e,this.decorations=this.buildDeco($.view,et))}buildDeco($,_e){if(!_e||!this.tree.length)return Decoration.none;let et=new RangeSetBuilder;for(let{from:tt,to:nt}of $.visibleRanges)highlightTree(this.tree,_e,(rt,it,st)=>{et.add(rt,it,this.markCache[st]||(this.markCache[st]=Decoration.mark({class:st})))},tt,nt);return et.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:j=>j.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(j){return combineConfig(j,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(j){let $=[],_e=j.matched?matchingMark:nonmatchingMark;return $.push(_e.range(j.start.from,j.start.to)),j.end&&$.push(_e.range(j.end.from,j.end.to)),$}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(j,$){if(!$.docChanged&&!$.selection)return j;let _e=[],et=$.state.facet(bracketMatchingConfig);for(let tt of $.state.selection.ranges){if(!tt.empty)continue;let nt=matchBrackets($.state,tt.head,-1,et)||tt.head>0&&matchBrackets($.state,tt.head-1,1,et)||et.afterCursor&&(matchBrackets($.state,tt.head,1,et)||tt.head<$.state.doc.length&&matchBrackets($.state,tt.head+1,-1,et));nt&&(_e=_e.concat(et.renderMatch(nt,$.state)))}return Decoration.set(_e,!0)},provide:j=>EditorView.decorations.from(j)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(j={}){return[bracketMatchingConfig.of(j),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(j,$,_e){let et=j.prop($<0?NodeProp.openedBy:NodeProp.closedBy);if(et)return et;if(j.name.length==1){let tt=_e.indexOf(j.name);if(tt>-1&&tt%2==($<0?1:0))return[_e[tt+$]]}return null}function findHandle(j){let $=j.type.prop(bracketMatchingHandle);return $?$(j.node):j}function matchBrackets(j,$,_e,et={}){let tt=et.maxScanDistance||DefaultScanDist,nt=et.brackets||DefaultBrackets,rt=syntaxTree(j),it=rt.resolveInner($,_e);for(let st=it;st;st=st.parent){let ot=matchingNodes(st.type,_e,nt);if(ot&&st.from<st.to){let at=findHandle(st);if(at&&(_e>0?$>=at.from&&$<at.to:$>at.from&&$<=at.to))return matchMarkedBrackets(j,$,_e,st,at,ot,nt)}}return matchPlainBrackets(j,$,_e,rt,it.type,tt,nt)}function matchMarkedBrackets(j,$,_e,et,tt,nt,rt){let it=et.parent,st={from:tt.from,to:tt.to},ot=0,at=it==null?void 0:it.cursor();if(at&&(_e<0?at.childBefore(et.from):at.childAfter(et.to)))do if(_e<0?at.to<=et.from:at.from>=et.to){if(ot==0&&nt.indexOf(at.type.name)>-1&&at.from<at.to){let lt=findHandle(at);return{start:st,end:lt?{from:lt.from,to:lt.to}:void 0,matched:!0}}else if(matchingNodes(at.type,_e,rt))ot++;else if(matchingNodes(at.type,-_e,rt)){if(ot==0){let lt=findHandle(at);return{start:st,end:lt&&lt.from<lt.to?{from:lt.from,to:lt.to}:void 0,matched:!1}}ot--}}while(_e<0?at.prevSibling():at.nextSibling());return{start:st,matched:!1}}function matchPlainBrackets(j,$,_e,et,tt,nt,rt){let it=_e<0?j.sliceDoc($-1,$):j.sliceDoc($,$+1),st=rt.indexOf(it);if(st<0||st%2==0!=_e>0)return null;let ot={from:_e<0?$-1:$,to:_e>0?$+1:$},at=j.doc.iterRange($,_e>0?j.doc.length:0),lt=0;for(let ut=0;!at.next().done&&ut<=nt;){let ct=at.value;_e<0&&(ut+=ct.length);let ft=$+ut*_e;for(let dt=_e>0?0:ct.length-1,mt=_e>0?ct.length:-1;dt!=mt;dt+=_e){let pt=rt.indexOf(ct[dt]);if(!(pt<0||et.resolveInner(ft+dt,1).type!=tt))if(pt%2==0==_e>0)lt++;else{if(lt==1)return{start:ot,end:{from:ft+dt,to:ft+dt+1},matched:pt>>1==st>>1};lt--}}_e>0&&(ut+=ct.length)}return at.done?{start:ot,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[j,$]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[j]=createTokenType(noTokens,$);function warnForPart(j,$){warned.indexOf(j)>-1||(warned.push(j),console.warn($))}function createTokenType(j,$){let _e=[];for(let it of $.split(" ")){let st=[];for(let ot of it.split(".")){let at=j[ot]||tags[ot];at?typeof at=="function"?st.length?st=st.map(at):warnForPart(ot,`Modifier ${ot} used at start of tag`):st.length?warnForPart(ot,`Tag ${ot} used as modifier`):st=Array.isArray(at)?at:[at]:warnForPart(ot,`Unknown highlighting tag ${ot}`)}for(let ot of st)_e.push(ot)}if(!_e.length)return 0;let et=$.replace(/ /g,"_"),tt=et+" "+_e.map(it=>it.id),nt=byTag[tt];if(nt)return nt.id;let rt=byTag[tt]=NodeType.define({id:typeArray.length,name:et,props:[styleTags({[et]:_e})]});return typeArray.push(rt),rt.id}Direction.RTL,Direction.LTR;const toggleComment=j=>{let{state:$}=j,_e=$.doc.lineAt($.selection.main.from),et=getConfig(j.state,_e.from);return et.line?toggleLineComment(j):et.block?toggleBlockCommentByLine(j):!1};function command(j,$){return({state:_e,dispatch:et})=>{if(_e.readOnly)return!1;let tt=j($,_e);return tt?(et(_e.update(tt)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((j,$)=>changeBlockComment(j,$,selectedLineRanges($)),0);function getConfig(j,$){let _e=j.languageDataAt("commentTokens",$);return _e.length?_e[0]:{}}const SearchMargin=50;function findBlockComment(j,{open:$,close:_e},et,tt){let nt=j.sliceDoc(et-SearchMargin,et),rt=j.sliceDoc(tt,tt+SearchMargin),it=/\s*$/.exec(nt)[0].length,st=/^\s*/.exec(rt)[0].length,ot=nt.length-it;if(nt.slice(ot-$.length,ot)==$&&rt.slice(st,st+_e.length)==_e)return{open:{pos:et-it,margin:it&&1},close:{pos:tt+st,margin:st&&1}};let at,lt;tt-et<=2*SearchMargin?at=lt=j.sliceDoc(et,tt):(at=j.sliceDoc(et,et+SearchMargin),lt=j.sliceDoc(tt-SearchMargin,tt));let ut=/^\s*/.exec(at)[0].length,ct=/\s*$/.exec(lt)[0].length,ft=lt.length-ct-_e.length;return at.slice(ut,ut+$.length)==$&&lt.slice(ft,ft+_e.length)==_e?{open:{pos:et+ut+$.length,margin:/\s/.test(at.charAt(ut+$.length))?1:0},close:{pos:tt-ct-_e.length,margin:/\s/.test(lt.charAt(ft-1))?1:0}}:null}function selectedLineRanges(j){let $=[];for(let _e of j.selection.ranges){let et=j.doc.lineAt(_e.from),tt=_e.to<=et.to?et:j.doc.lineAt(_e.to),nt=$.length-1;nt>=0&&$[nt].to>et.from?$[nt].to=tt.to:$.push({from:et.from+/^\s*/.exec(et.text)[0].length,to:tt.to})}return $}function changeBlockComment(j,$,_e=$.selection.ranges){let et=_e.map(nt=>getConfig($,nt.from).block);if(!et.every(nt=>nt))return null;let tt=_e.map((nt,rt)=>findBlockComment($,et[rt],nt.from,nt.to));if(j!=2&&!tt.every(nt=>nt))return{changes:$.changes(_e.map((nt,rt)=>tt[rt]?[]:[{from:nt.from,insert:et[rt].open+" "},{from:nt.to,insert:" "+et[rt].close}]))};if(j!=1&&tt.some(nt=>nt)){let nt=[];for(let rt=0,it;rt<tt.length;rt++)if(it=tt[rt]){let st=et[rt],{open:ot,close:at}=it;nt.push({from:ot.pos-st.open.length,to:ot.pos+ot.margin},{from:at.pos-at.margin,to:at.pos+st.close.length})}return{changes:nt}}return null}function changeLineComment(j,$,_e=$.selection.ranges){let et=[],tt=-1;for(let{from:nt,to:rt}of _e){let it=et.length,st=1e9,ot=getConfig($,nt).line;if(ot){for(let at=nt;at<=rt;){let lt=$.doc.lineAt(at);if(lt.from>tt&&(nt==rt||rt>lt.from)){tt=lt.from;let ut=/^\s*/.exec(lt.text)[0].length,ct=ut==lt.length,ft=lt.text.slice(ut,ut+ot.length)==ot?ut:-1;ut<lt.text.length&&ut<st&&(st=ut),et.push({line:lt,comment:ft,token:ot,indent:ut,empty:ct,single:!1})}at=lt.to+1}if(st<1e9)for(let at=it;at<et.length;at++)et[at].indent<et[at].line.text.length&&(et[at].indent=st);et.length==it+1&&(et[it].single=!0)}}if(j!=2&&et.some(nt=>nt.comment<0&&(!nt.empty||nt.single))){let nt=[];for(let{line:it,token:st,indent:ot,empty:at,single:lt}of et)(lt||!at)&&nt.push({from:it.from+ot,insert:st+" "});let rt=$.changes(nt);return{changes:rt,selection:$.selection.map(rt,1)}}else if(j!=1&&et.some(nt=>nt.comment>=0)){let nt=[];for(let{line:rt,comment:it,token:st}of et)if(it>=0){let ot=rt.from+it,at=ot+st.length;rt.text[at-rt.from]==" "&&at++,nt.push({from:ot,to:at})}return{changes:nt}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(j){return combineConfig(j,{minDepth:100,newGroupDelay:500,joinToEvent:($,_e)=>_e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:($,_e)=>(et,tt)=>$(et,tt)||_e(et,tt)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(j,$){let _e=$.state.facet(historyConfig),et=$.annotation(fromHistory);if(et){let st=HistEvent.fromTransaction($,et.selection),ot=et.side,at=ot==0?j.undone:j.done;return st?at=updateBranch(at,at.length,_e.minDepth,st):at=addSelection(at,$.startState.selection),new HistoryState(ot==0?et.rest:at,ot==0?at:et.rest)}let tt=$.annotation(isolateHistory);if((tt=="full"||tt=="before")&&(j=j.isolate()),$.annotation(Transaction.addToHistory)===!1)return $.changes.empty?j:j.addMapping($.changes.desc);let nt=HistEvent.fromTransaction($),rt=$.annotation(Transaction.time),it=$.annotation(Transaction.userEvent);return nt?j=j.addChanges(nt,rt,it,_e,$):$.selection&&(j=j.addSelection($.startState.selection,rt,it,_e.newGroupDelay)),(tt=="full"||tt=="after")&&(j=j.isolate()),j},toJSON(j){return{done:j.done.map($=>$.toJSON()),undone:j.undone.map($=>$.toJSON())}},fromJSON(j){return new HistoryState(j.done.map(HistEvent.fromJSON),j.undone.map(HistEvent.fromJSON))}});function history(j={}){return[historyField_,historyConfig.of(j),EditorView.domEventHandlers({beforeinput($,_e){let et=$.inputType=="historyUndo"?undo$3:$.inputType=="historyRedo"?redo:null;return et?($.preventDefault(),et(_e)):!1}})]}function cmd(j,$){return function({state:_e,dispatch:et}){if(!$&&_e.readOnly)return!1;let tt=_e.field(historyField_,!1);if(!tt)return!1;let nt=tt.pop(j,_e,$);return nt?(et(nt),!0):!1}}const undo$3=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor($,_e,et,tt,nt){this.changes=$,this.effects=_e,this.mapped=et,this.startSelection=tt,this.selectionsAfter=nt}setSelAfter($){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,$)}toJSON(){var $,_e,et;return{changes:($=this.changes)===null||$===void 0?void 0:$.toJSON(),mapped:(_e=this.mapped)===null||_e===void 0?void 0:_e.toJSON(),startSelection:(et=this.startSelection)===null||et===void 0?void 0:et.toJSON(),selectionsAfter:this.selectionsAfter.map(tt=>tt.toJSON())}}static fromJSON($){return new HistEvent($.changes&&ChangeSet.fromJSON($.changes),[],$.mapped&&ChangeDesc.fromJSON($.mapped),$.startSelection&&EditorSelection.fromJSON($.startSelection),$.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction($,_e){let et=none$2;for(let tt of $.startState.facet(invertedEffects)){let nt=tt($);nt.length&&(et=et.concat(nt))}return!et.length&&$.changes.empty?null:new HistEvent($.changes.invert($.startState.doc),et,void 0,_e||$.startState.selection,none$2)}static selection($){return new HistEvent(void 0,none$2,void 0,void 0,$)}}function updateBranch(j,$,_e,et){let tt=$+1>_e+20?$-_e-1:0,nt=j.slice(tt,$);return nt.push(et),nt}function isAdjacent(j,$){let _e=[],et=!1;return j.iterChangedRanges((tt,nt)=>_e.push(tt,nt)),$.iterChangedRanges((tt,nt,rt,it)=>{for(let st=0;st<_e.length;){let ot=_e[st++],at=_e[st++];it>=ot&&rt<=at&&(et=!0)}}),et}function eqSelectionShape(j,$){return j.ranges.length==$.ranges.length&&j.ranges.filter((_e,et)=>_e.empty!=$.ranges[et].empty).length===0}function conc(j,$){return j.length?$.length?j.concat($):j:$}const none$2=[],MaxSelectionsPerEvent=200;function addSelection(j,$){if(j.length){let _e=j[j.length-1],et=_e.selectionsAfter.slice(Math.max(0,_e.selectionsAfter.length-MaxSelectionsPerEvent));return et.length&&et[et.length-1].eq($)?j:(et.push($),updateBranch(j,j.length-1,1e9,_e.setSelAfter(et)))}else return[HistEvent.selection([$])]}function popSelection(j){let $=j[j.length-1],_e=j.slice();return _e[j.length-1]=$.setSelAfter($.selectionsAfter.slice(0,$.selectionsAfter.length-1)),_e}function addMappingToBranch(j,$){if(!j.length)return j;let _e=j.length,et=none$2;for(;_e;){let tt=mapEvent(j[_e-1],$,et);if(tt.changes&&!tt.changes.empty||tt.effects.length){let nt=j.slice(0,_e);return nt[_e-1]=tt,nt}else $=tt.mapped,_e--,et=tt.selectionsAfter}return et.length?[HistEvent.selection(et)]:none$2}function mapEvent(j,$,_e){let et=conc(j.selectionsAfter.length?j.selectionsAfter.map(it=>it.map($)):none$2,_e);if(!j.changes)return HistEvent.selection(et);let tt=j.changes.map($),nt=$.mapDesc(j.changes,!0),rt=j.mapped?j.mapped.composeDesc(nt):nt;return new HistEvent(tt,StateEffect.mapEffects(j.effects,$),rt,j.startSelection.map(nt),et)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor($,_e,et=0,tt=void 0){this.done=$,this.undone=_e,this.prevTime=et,this.prevUserEvent=tt}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges($,_e,et,tt,nt){let rt=this.done,it=rt[rt.length-1];return it&&it.changes&&!it.changes.empty&&$.changes&&(!et||joinableUserEvent.test(et))&&(!it.selectionsAfter.length&&_e-this.prevTime<tt.newGroupDelay&&tt.joinToEvent(nt,isAdjacent(it.changes,$.changes))||et=="input.type.compose")?rt=updateBranch(rt,rt.length-1,tt.minDepth,new HistEvent($.changes.compose(it.changes),conc($.effects,it.effects),it.mapped,it.startSelection,none$2)):rt=updateBranch(rt,rt.length,tt.minDepth,$),new HistoryState(rt,none$2,_e,et)}addSelection($,_e,et,tt){let nt=this.done.length?this.done[this.done.length-1].selectionsAfter:none$2;return nt.length>0&&_e-this.prevTime<tt&&et==this.prevUserEvent&&et&&/^select($|\.)/.test(et)&&eqSelectionShape(nt[nt.length-1],$)?this:new HistoryState(addSelection(this.done,$),this.undone,_e,et)}addMapping($){return new HistoryState(addMappingToBranch(this.done,$),addMappingToBranch(this.undone,$),this.prevTime,this.prevUserEvent)}pop($,_e,et){let tt=$==0?this.done:this.undone;if(tt.length==0)return null;let nt=tt[tt.length-1],rt=nt.selectionsAfter[0]||_e.selection;if(et&&nt.selectionsAfter.length)return _e.update({selection:nt.selectionsAfter[nt.selectionsAfter.length-1],annotations:fromHistory.of({side:$,rest:popSelection(tt),selection:rt}),userEvent:$==0?"select.undo":"select.redo",scrollIntoView:!0});if(nt.changes){let it=tt.length==1?none$2:tt.slice(0,tt.length-1);return nt.mapped&&(it=addMappingToBranch(it,nt.mapped)),_e.update({changes:nt.changes,selection:nt.startSelection,effects:nt.effects,annotations:fromHistory.of({side:$,rest:it,selection:rt}),filter:!1,userEvent:$==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$2,none$2);const historyKeymap=[{key:"Mod-z",run:undo$3,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(j,$){return EditorSelection.create(j.ranges.map($),j.mainIndex)}function setSel(j,$){return j.update({selection:$,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:j,dispatch:$},_e){let et=updateSel(j.selection,_e);return et.eq(j.selection,!0)?!1:($(setSel(j,et)),!0)}function rangeEnd(j,$){return EditorSelection.cursor($?j.to:j.from)}function cursorByChar(j,$){return moveSel(j,_e=>_e.empty?j.moveByChar(_e,$):rangeEnd(_e,$))}function ltrAtCursor(j){return j.textDirectionAt(j.state.selection.main.head)==Direction.LTR}const cursorCharLeft=j=>cursorByChar(j,!ltrAtCursor(j)),cursorCharRight=j=>cursorByChar(j,ltrAtCursor(j));function cursorByGroup(j,$){return moveSel(j,_e=>_e.empty?j.moveByGroup(_e,$):rangeEnd(_e,$))}const cursorGroupLeft=j=>cursorByGroup(j,!ltrAtCursor(j)),cursorGroupRight=j=>cursorByGroup(j,ltrAtCursor(j));function interestingNode(j,$,_e){if($.type.prop(_e))return!0;let et=$.to-$.from;return et&&(et>2||/[^\s,.;:]/.test(j.sliceDoc($.from,$.to)))||$.firstChild}function moveBySyntax(j,$,_e){let et=syntaxTree(j).resolveInner($.head),tt=_e?NodeProp.closedBy:NodeProp.openedBy;for(let st=$.head;;){let ot=_e?et.childAfter(st):et.childBefore(st);if(!ot)break;interestingNode(j,ot,tt)?et=ot:st=_e?ot.to:ot.from}let nt=et.type.prop(tt),rt,it;return nt&&(rt=_e?matchBrackets(j,et.from,1):matchBrackets(j,et.to,-1))&&rt.matched?it=_e?rt.end.to:rt.end.from:it=_e?et.to:et.from,EditorSelection.cursor(it,_e?-1:1)}const cursorSyntaxLeft=j=>moveSel(j,$=>moveBySyntax(j.state,$,!ltrAtCursor(j))),cursorSyntaxRight=j=>moveSel(j,$=>moveBySyntax(j.state,$,ltrAtCursor(j)));function cursorByLine(j,$){return moveSel(j,_e=>{if(!_e.empty)return rangeEnd(_e,$);let et=j.moveVertically(_e,$);return et.head!=_e.head?et:j.moveToLineBoundary(_e,$)})}const cursorLineUp=j=>cursorByLine(j,!1),cursorLineDown=j=>cursorByLine(j,!0);function pageInfo(j){let $=j.scrollDOM.clientHeight<j.scrollDOM.scrollHeight-2,_e=0,et=0,tt;if($){for(let nt of j.state.facet(EditorView.scrollMargins)){let rt=nt(j);rt!=null&&rt.top&&(_e=Math.max(rt==null?void 0:rt.top,_e)),rt!=null&&rt.bottom&&(et=Math.max(rt==null?void 0:rt.bottom,et))}tt=j.scrollDOM.clientHeight-_e-et}else tt=(j.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:_e,marginBottom:et,selfScroll:$,height:Math.max(j.defaultLineHeight,tt-5)}}function cursorByPage(j,$){let _e=pageInfo(j),{state:et}=j,tt=updateSel(et.selection,rt=>rt.empty?j.moveVertically(rt,$,_e.height):rangeEnd(rt,$));if(tt.eq(et.selection))return!1;let nt;if(_e.selfScroll){let rt=j.coordsAtPos(et.selection.main.head),it=j.scrollDOM.getBoundingClientRect(),st=it.top+_e.marginTop,ot=it.bottom-_e.marginBottom;rt&&rt.top>st&&rt.bottom<ot&&(nt=EditorView.scrollIntoView(tt.main.head,{y:"start",yMargin:rt.top-st}))}return j.dispatch(setSel(et,tt),{effects:nt}),!0}const cursorPageUp=j=>cursorByPage(j,!1),cursorPageDown=j=>cursorByPage(j,!0);function moveByLineBoundary(j,$,_e){let et=j.lineBlockAt($.head),tt=j.moveToLineBoundary($,_e);if(tt.head==$.head&&tt.head!=(_e?et.to:et.from)&&(tt=j.moveToLineBoundary($,_e,!1)),!_e&&tt.head==et.from&&et.length){let nt=/^\s*/.exec(j.state.sliceDoc(et.from,Math.min(et.from+100,et.to)))[0].length;nt&&$.head!=et.from+nt&&(tt=EditorSelection.cursor(et.from+nt))}return tt}const cursorLineBoundaryForward=j=>moveSel(j,$=>moveByLineBoundary(j,$,!0)),cursorLineBoundaryBackward=j=>moveSel(j,$=>moveByLineBoundary(j,$,!1)),cursorLineBoundaryLeft=j=>moveSel(j,$=>moveByLineBoundary(j,$,!ltrAtCursor(j))),cursorLineBoundaryRight=j=>moveSel(j,$=>moveByLineBoundary(j,$,ltrAtCursor(j))),cursorLineStart=j=>moveSel(j,$=>EditorSelection.cursor(j.lineBlockAt($.head).from,1)),cursorLineEnd=j=>moveSel(j,$=>EditorSelection.cursor(j.lineBlockAt($.head).to,-1));function toMatchingBracket(j,$,_e){let et=!1,tt=updateSel(j.selection,nt=>{let rt=matchBrackets(j,nt.head,-1)||matchBrackets(j,nt.head,1)||nt.head>0&&matchBrackets(j,nt.head-1,1)||nt.head<j.doc.length&&matchBrackets(j,nt.head+1,-1);if(!rt||!rt.end)return nt;et=!0;let it=rt.start.from==nt.head?rt.end.to:rt.end.from;return _e?EditorSelection.range(nt.anchor,it):EditorSelection.cursor(it)});return et?($(setSel(j,tt)),!0):!1}const cursorMatchingBracket=({state:j,dispatch:$})=>toMatchingBracket(j,$,!1);function extendSel(j,$){let _e=updateSel(j.state.selection,et=>{let tt=$(et);return EditorSelection.range(et.anchor,tt.head,tt.goalColumn,tt.bidiLevel||void 0)});return _e.eq(j.state.selection)?!1:(j.dispatch(setSel(j.state,_e)),!0)}function selectByChar(j,$){return extendSel(j,_e=>j.moveByChar(_e,$))}const selectCharLeft=j=>selectByChar(j,!ltrAtCursor(j)),selectCharRight=j=>selectByChar(j,ltrAtCursor(j));function selectByGroup(j,$){return extendSel(j,_e=>j.moveByGroup(_e,$))}const selectGroupLeft=j=>selectByGroup(j,!ltrAtCursor(j)),selectGroupRight=j=>selectByGroup(j,ltrAtCursor(j)),selectSyntaxLeft=j=>extendSel(j,$=>moveBySyntax(j.state,$,!ltrAtCursor(j))),selectSyntaxRight=j=>extendSel(j,$=>moveBySyntax(j.state,$,ltrAtCursor(j)));function selectByLine(j,$){return extendSel(j,_e=>j.moveVertically(_e,$))}const selectLineUp=j=>selectByLine(j,!1),selectLineDown=j=>selectByLine(j,!0);function selectByPage(j,$){return extendSel(j,_e=>j.moveVertically(_e,$,pageInfo(j).height))}const selectPageUp=j=>selectByPage(j,!1),selectPageDown=j=>selectByPage(j,!0),selectLineBoundaryForward=j=>extendSel(j,$=>moveByLineBoundary(j,$,!0)),selectLineBoundaryBackward=j=>extendSel(j,$=>moveByLineBoundary(j,$,!1)),selectLineBoundaryLeft=j=>extendSel(j,$=>moveByLineBoundary(j,$,!ltrAtCursor(j))),selectLineBoundaryRight=j=>extendSel(j,$=>moveByLineBoundary(j,$,ltrAtCursor(j))),selectLineStart=j=>extendSel(j,$=>EditorSelection.cursor(j.lineBlockAt($.head).from)),selectLineEnd=j=>extendSel(j,$=>EditorSelection.cursor(j.lineBlockAt($.head).to)),cursorDocStart=({state:j,dispatch:$})=>($(setSel(j,{anchor:0})),!0),cursorDocEnd=({state:j,dispatch:$})=>($(setSel(j,{anchor:j.doc.length})),!0),selectDocStart=({state:j,dispatch:$})=>($(setSel(j,{anchor:j.selection.main.anchor,head:0})),!0),selectDocEnd=({state:j,dispatch:$})=>($(setSel(j,{anchor:j.selection.main.anchor,head:j.doc.length})),!0),selectAll=({state:j,dispatch:$})=>($(j.update({selection:{anchor:0,head:j.doc.length},userEvent:"select"})),!0),selectLine=({state:j,dispatch:$})=>{let _e=selectedLineBlocks(j).map(({from:et,to:tt})=>EditorSelection.range(et,Math.min(tt+1,j.doc.length)));return $(j.update({selection:EditorSelection.create(_e),userEvent:"select"})),!0},selectParentSyntax=({state:j,dispatch:$})=>{let _e=updateSel(j.selection,et=>{var tt;let nt=syntaxTree(j).resolveStack(et.from,1);for(let rt=nt;rt;rt=rt.next){let{node:it}=rt;if((it.from<et.from&&it.to>=et.to||it.to>et.to&&it.from<=et.from)&&(!((tt=it.parent)===null||tt===void 0)&&tt.parent))return EditorSelection.range(it.to,it.from)}return et});return $(setSel(j,_e)),!0},simplifySelection=({state:j,dispatch:$})=>{let _e=j.selection,et=null;return _e.ranges.length>1?et=EditorSelection.create([_e.main]):_e.main.empty||(et=EditorSelection.create([EditorSelection.cursor(_e.main.head)])),et?($(setSel(j,et)),!0):!1};function deleteBy(j,$){if(j.state.readOnly)return!1;let _e="delete.selection",{state:et}=j,tt=et.changeByRange(nt=>{let{from:rt,to:it}=nt;if(rt==it){let st=$(nt);st<rt?(_e="delete.backward",st=skipAtomic(j,st,!1)):st>rt&&(_e="delete.forward",st=skipAtomic(j,st,!0)),rt=Math.min(rt,st),it=Math.max(it,st)}else rt=skipAtomic(j,rt,!1),it=skipAtomic(j,it,!0);return rt==it?{range:nt}:{changes:{from:rt,to:it},range:EditorSelection.cursor(rt,rt<nt.head?-1:1)}});return tt.changes.empty?!1:(j.dispatch(et.update(tt,{scrollIntoView:!0,userEvent:_e,effects:_e=="delete.selection"?EditorView.announce.of(et.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(j,$,_e){if(j instanceof EditorView)for(let et of j.state.facet(EditorView.atomicRanges).map(tt=>tt(j)))et.between($,$,(tt,nt)=>{tt<$&&nt>$&&($=_e?nt:tt)});return $}const deleteByChar=(j,$)=>deleteBy(j,_e=>{let et=_e.from,{state:tt}=j,nt=tt.doc.lineAt(et),rt,it;if(!$&&et>nt.from&&et<nt.from+200&&!/[^ \t]/.test(rt=nt.text.slice(0,et-nt.from))){if(rt[rt.length-1]=="	")return et-1;let st=countColumn(rt,tt.tabSize),ot=st%getIndentUnit(tt)||getIndentUnit(tt);for(let at=0;at<ot&&rt[rt.length-1-at]==" ";at++)et--;it=et}else it=findClusterBreak(nt.text,et-nt.from,$,$)+nt.from,it==et&&nt.number!=($?tt.doc.lines:1)?it+=$?1:-1:!$&&/[\ufe00-\ufe0f]/.test(nt.text.slice(it-nt.from,et-nt.from))&&(it=findClusterBreak(nt.text,it-nt.from,!1,!1)+nt.from);return it}),deleteCharBackward=j=>deleteByChar(j,!1),deleteCharForward=j=>deleteByChar(j,!0),deleteByGroup=(j,$)=>deleteBy(j,_e=>{let et=_e.head,{state:tt}=j,nt=tt.doc.lineAt(et),rt=tt.charCategorizer(et);for(let it=null;;){if(et==($?nt.to:nt.from)){et==_e.head&&nt.number!=($?tt.doc.lines:1)&&(et+=$?1:-1);break}let st=findClusterBreak(nt.text,et-nt.from,$)+nt.from,ot=nt.text.slice(Math.min(et,st)-nt.from,Math.max(et,st)-nt.from),at=rt(ot);if(it!=null&&at!=it)break;(ot!=" "||et!=_e.head)&&(it=at),et=st}return et}),deleteGroupBackward=j=>deleteByGroup(j,!1),deleteGroupForward=j=>deleteByGroup(j,!0),deleteToLineEnd=j=>deleteBy(j,$=>{let _e=j.lineBlockAt($.head).to;return $.head<_e?_e:Math.min(j.state.doc.length,$.head+1)}),deleteLineBoundaryBackward=j=>deleteBy(j,$=>{let _e=j.moveToLineBoundary($,!1).head;return $.head>_e?_e:Math.max(0,$.head-1)}),deleteLineBoundaryForward=j=>deleteBy(j,$=>{let _e=j.moveToLineBoundary($,!0).head;return $.head<_e?_e:Math.min(j.state.doc.length,$.head+1)}),splitLine=({state:j,dispatch:$})=>{if(j.readOnly)return!1;let _e=j.changeByRange(et=>({changes:{from:et.from,to:et.to,insert:Text.of(["",""])},range:EditorSelection.cursor(et.from)}));return $(j.update(_e,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:j,dispatch:$})=>{if(j.readOnly)return!1;let _e=j.changeByRange(et=>{if(!et.empty||et.from==0||et.from==j.doc.length)return{range:et};let tt=et.from,nt=j.doc.lineAt(tt),rt=tt==nt.from?tt-1:findClusterBreak(nt.text,tt-nt.from,!1)+nt.from,it=tt==nt.to?tt+1:findClusterBreak(nt.text,tt-nt.from,!0)+nt.from;return{changes:{from:rt,to:it,insert:j.doc.slice(tt,it).append(j.doc.slice(rt,tt))},range:EditorSelection.cursor(it)}});return _e.changes.empty?!1:($(j.update(_e,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(j){let $=[],_e=-1;for(let et of j.selection.ranges){let tt=j.doc.lineAt(et.from),nt=j.doc.lineAt(et.to);if(!et.empty&&et.to==nt.from&&(nt=j.doc.lineAt(et.to-1)),_e>=tt.number){let rt=$[$.length-1];rt.to=nt.to,rt.ranges.push(et)}else $.push({from:tt.from,to:nt.to,ranges:[et]});_e=nt.number+1}return $}function moveLine(j,$,_e){if(j.readOnly)return!1;let et=[],tt=[];for(let nt of selectedLineBlocks(j)){if(_e?nt.to==j.doc.length:nt.from==0)continue;let rt=j.doc.lineAt(_e?nt.to+1:nt.from-1),it=rt.length+1;if(_e){et.push({from:nt.to,to:rt.to},{from:nt.from,insert:rt.text+j.lineBreak});for(let st of nt.ranges)tt.push(EditorSelection.range(Math.min(j.doc.length,st.anchor+it),Math.min(j.doc.length,st.head+it)))}else{et.push({from:rt.from,to:nt.from},{from:nt.to,insert:j.lineBreak+rt.text});for(let st of nt.ranges)tt.push(EditorSelection.range(st.anchor-it,st.head-it))}}return et.length?($(j.update({changes:et,scrollIntoView:!0,selection:EditorSelection.create(tt,j.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:j,dispatch:$})=>moveLine(j,$,!1),moveLineDown=({state:j,dispatch:$})=>moveLine(j,$,!0);function copyLine(j,$,_e){if(j.readOnly)return!1;let et=[];for(let tt of selectedLineBlocks(j))_e?et.push({from:tt.from,insert:j.doc.slice(tt.from,tt.to)+j.lineBreak}):et.push({from:tt.to,insert:j.lineBreak+j.doc.slice(tt.from,tt.to)});return $(j.update({changes:et,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:j,dispatch:$})=>copyLine(j,$,!1),copyLineDown=({state:j,dispatch:$})=>copyLine(j,$,!0),deleteLine=j=>{if(j.state.readOnly)return!1;let{state:$}=j,_e=$.changes(selectedLineBlocks($).map(({from:tt,to:nt})=>(tt>0?tt--:nt<$.doc.length&&nt++,{from:tt,to:nt}))),et=updateSel($.selection,tt=>j.moveVertically(tt,!0)).map(_e);return j.dispatch({changes:_e,selection:et,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(j,$){if(/\(\)|\[\]|\{\}/.test(j.sliceDoc($-1,$+1)))return{from:$,to:$};let _e=syntaxTree(j).resolveInner($),et=_e.childBefore($),tt=_e.childAfter($),nt;return et&&tt&&et.to<=$&&tt.from>=$&&(nt=et.type.prop(NodeProp.closedBy))&&nt.indexOf(tt.name)>-1&&j.doc.lineAt(et.to).from==j.doc.lineAt(tt.from).from&&!/\S/.test(j.sliceDoc(et.to,tt.from))?{from:et.to,to:tt.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(j){return({state:$,dispatch:_e})=>{if($.readOnly)return!1;let et=$.changeByRange(tt=>{let{from:nt,to:rt}=tt,it=$.doc.lineAt(nt),st=!j&&nt==rt&&isBetweenBrackets($,nt);j&&(nt=rt=(rt<=it.to?it:$.doc.lineAt(rt)).to);let ot=new IndentContext($,{simulateBreak:nt,simulateDoubleBreak:!!st}),at=getIndentation(ot,nt);for(at==null&&(at=countColumn(/^\s*/.exec($.doc.lineAt(nt).text)[0],$.tabSize));rt<it.to&&/\s/.test(it.text[rt-it.from]);)rt++;st?{from:nt,to:rt}=st:nt>it.from&&nt<it.from+100&&!/\S/.test(it.text.slice(0,nt))&&(nt=it.from);let lt=["",indentString($,at)];return st&&lt.push(indentString($,ot.lineIndent(it.from,-1))),{changes:{from:nt,to:rt,insert:Text.of(lt)},range:EditorSelection.cursor(nt+1+lt[1].length)}});return _e($.update(et,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(j,$){let _e=-1;return j.changeByRange(et=>{let tt=[];for(let rt=et.from;rt<=et.to;){let it=j.doc.lineAt(rt);it.number>_e&&(et.empty||et.to>it.from)&&($(it,tt,et),_e=it.number),rt=it.to+1}let nt=j.changes(tt);return{changes:tt,range:EditorSelection.range(nt.mapPos(et.anchor,1),nt.mapPos(et.head,1))}})}const indentSelection=({state:j,dispatch:$})=>{if(j.readOnly)return!1;let _e=Object.create(null),et=new IndentContext(j,{overrideIndentation:nt=>{let rt=_e[nt];return rt??-1}}),tt=changeBySelectedLine(j,(nt,rt,it)=>{let st=getIndentation(et,nt.from);if(st==null)return;/\S/.test(nt.text)||(st=0);let ot=/^\s*/.exec(nt.text)[0],at=indentString(j,st);(ot!=at||it.from<nt.from+ot.length)&&(_e[nt.from]=st,rt.push({from:nt.from,to:nt.from+ot.length,insert:at}))});return tt.changes.empty||$(j.update(tt,{userEvent:"indent"})),!0},indentMore=({state:j,dispatch:$})=>j.readOnly?!1:($(j.update(changeBySelectedLine(j,(_e,et)=>{et.push({from:_e.from,insert:j.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:j,dispatch:$})=>j.readOnly?!1:($(j.update(changeBySelectedLine(j,(_e,et)=>{let tt=/^\s*/.exec(_e.text)[0];if(!tt)return;let nt=countColumn(tt,j.tabSize),rt=0,it=indentString(j,Math.max(0,nt-getIndentUnit(j)));for(;rt<tt.length&&rt<it.length&&tt.charCodeAt(rt)==it.charCodeAt(rt);)rt++;et.push({from:_e.from+rt,to:_e.from+tt.length,insert:it.slice(rt)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(j=>({mac:j.key,run:j.run,shift:j.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var j=arguments[0];typeof j=="string"&&(j=document.createElement(j));var $=1,_e=arguments[1];if(_e&&typeof _e=="object"&&_e.nodeType==null&&!Array.isArray(_e)){for(var et in _e)if(Object.prototype.hasOwnProperty.call(_e,et)){var tt=_e[et];typeof tt=="string"?j.setAttribute(et,tt):tt!=null&&(j[et]=tt)}$++}for(;$<arguments.length;$++)add(j,arguments[$]);return j}function add(j,$){if(typeof $=="string")j.appendChild(document.createTextNode($));else if($!=null)if($.nodeType!=null)j.appendChild($);else if(Array.isArray($))for(var _e=0;_e<$.length;_e++)add(j,$[_e]);else throw new RangeError("Unsupported child node: "+$)}const basicNormalize=typeof String.prototype.normalize=="function"?j=>j.normalize("NFKD"):j=>j;class SearchCursor{constructor($,_e,et=0,tt=$.length,nt,rt){this.test=rt,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=$.iterRange(et,tt),this.bufferStart=et,this.normalize=nt?it=>nt(basicNormalize(it)):basicNormalize,this.query=this.normalize(_e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let $=this.peek();if($<0)return this.done=!0,this;let _e=fromCodePoint($),et=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize($);let tt=this.normalize(_e);for(let nt=0,rt=et;;nt++){let it=tt.charCodeAt(nt),st=this.match(it,rt);if(nt==tt.length-1){if(st)return this.value=st,this;break}rt==et&&nt<_e.length&&_e.charCodeAt(nt)==it&&rt++}}}match($,_e){let et=null;for(let tt=0;tt<this.matches.length;tt+=2){let nt=this.matches[tt],rt=!1;this.query.charCodeAt(nt)==$&&(nt==this.query.length-1?et={from:this.matches[tt+1],to:_e+1}:(this.matches[tt]++,rt=!0)),rt||(this.matches.splice(tt,2),tt-=2)}return this.query.charCodeAt(0)==$&&(this.query.length==1?et={from:_e,to:_e+1}:this.matches.push(1,_e)),et&&this.test&&!this.test(et.from,et.to,this.buffer,this.bufferStart)&&(et=null),et}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty$1={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor($,_e,et,tt=0,nt=$.length){if(this.text=$,this.to=nt,this.curLine="",this.done=!1,this.value=empty$1,/\\[sWDnr]|\n|\r|\[\^/.test(_e))return new MultilineRegExpCursor($,_e,et,tt,nt);this.re=new RegExp(_e,baseFlags+(et!=null&&et.ignoreCase?"i":"")),this.test=et==null?void 0:et.test,this.iter=$.iter();let rt=$.lineAt(tt);this.curLineStart=rt.from,this.matchPos=toCharEnd($,tt),this.getLine(this.curLineStart)}getLine($){this.iter.next($),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let $=this.matchPos-this.curLineStart;;){this.re.lastIndex=$;let _e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(_e){let et=this.curLineStart+_e.index,tt=et+_e[0].length;if(this.matchPos=toCharEnd(this.text,tt+(et==tt?1:0)),et==this.curLineStart+this.curLine.length&&this.nextLine(),(et<tt||et>this.value.to)&&(!this.test||this.test(et,tt,_e)))return this.value={from:et,to:tt,match:_e},this;$=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),$=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor($,_e){this.from=$,this.text=_e}get to(){return this.from+this.text.length}static get($,_e,et){let tt=flattened.get($);if(!tt||tt.from>=et||tt.to<=_e){let it=new FlattenedDoc(_e,$.sliceString(_e,et));return flattened.set($,it),it}if(tt.from==_e&&tt.to==et)return tt;let{text:nt,from:rt}=tt;return rt>_e&&(nt=$.sliceString(_e,rt)+nt,rt=_e),tt.to<et&&(nt+=$.sliceString(tt.to,et)),flattened.set($,new FlattenedDoc(rt,nt)),new FlattenedDoc(_e,nt.slice(_e-rt,et-rt))}}class MultilineRegExpCursor{constructor($,_e,et,tt,nt){this.text=$,this.to=nt,this.done=!1,this.value=empty$1,this.matchPos=toCharEnd($,tt),this.re=new RegExp(_e,baseFlags+(et!=null&&et.ignoreCase?"i":"")),this.test=et==null?void 0:et.test,this.flat=FlattenedDoc.get($,tt,this.chunkEnd(tt+5e3))}chunkEnd($){return $>=this.to?this.to:this.text.lineAt($).to}next(){for(;;){let $=this.re.lastIndex=this.matchPos-this.flat.from,_e=this.re.exec(this.flat.text);if(_e&&!_e[0]&&_e.index==$&&(this.re.lastIndex=$+1,_e=this.re.exec(this.flat.text)),_e){let et=this.flat.from+_e.index,tt=et+_e[0].length;if((this.flat.to>=this.to||_e.index+_e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(et,tt,_e)))return this.value={from:et,to:tt,match:_e},this.matchPos=toCharEnd(this.text,tt+(et==tt?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(j){try{return new RegExp(j,baseFlags),!0}catch{return!1}}function toCharEnd(j,$){if($>=j.length)return $;let _e=j.lineAt($),et;for(;$<_e.to&&(et=_e.text.charCodeAt($-_e.from))>=56320&&et<57344;)$++;return $}function createLineDialog(j){let $=String(j.state.doc.lineAt(j.state.selection.main.head).number),_e=crelt("input",{class:"cm-textfield",name:"line",value:$}),et=crelt("form",{class:"cm-gotoLine",onkeydown:nt=>{nt.keyCode==27?(nt.preventDefault(),j.dispatch({effects:dialogEffect.of(!1)}),j.focus()):nt.keyCode==13&&(nt.preventDefault(),tt())},onsubmit:nt=>{nt.preventDefault(),tt()}},crelt("label",j.state.phrase("Go to line"),": ",_e)," ",crelt("button",{class:"cm-button",type:"submit"},j.state.phrase("go")));function tt(){let nt=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(_e.value);if(!nt)return;let{state:rt}=j,it=rt.doc.lineAt(rt.selection.main.head),[,st,ot,at,lt]=nt,ut=at?+at.slice(1):0,ct=ot?+ot:it.number;if(ot&&lt){let mt=ct/100;st&&(mt=mt*(st=="-"?-1:1)+it.number/rt.doc.lines),ct=Math.round(rt.doc.lines*mt)}else ot&&st&&(ct=ct*(st=="-"?-1:1)+it.number);let ft=rt.doc.line(Math.max(1,Math.min(rt.doc.lines,ct))),dt=EditorSelection.cursor(ft.from+Math.max(0,Math.min(ut,ft.length)));j.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(dt.from,{y:"center"})],selection:dt}),j.focus()}return{dom:et}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(j,$){for(let _e of $.effects)_e.is(dialogEffect)&&(j=_e.value);return j},provide:j=>showPanel.from(j,$=>$?createLineDialog:null)}),gotoLine=j=>{let $=getPanel(j,createLineDialog);if(!$){let _e=[dialogEffect.of(!0)];j.state.field(dialogField,!1)==null&&_e.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),j.dispatch({effects:_e}),$=getPanel(j,createLineDialog)}return $&&$.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(j){return combineConfig(j,defaultHighlightOptions,{highlightWordAroundCursor:($,_e)=>$||_e,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(j){let $=[defaultTheme,matchHighlighter];return j&&$.push(highlightConfig.of(j)),$}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(j,$,_e,et){return(_e==0||j($.sliceDoc(_e-1,_e))!=CharCategory.Word)&&(et==$.doc.length||j($.sliceDoc(et,et+1))!=CharCategory.Word)}function insideWord(j,$,_e,et){return j($.sliceDoc(_e,_e+1))==CharCategory.Word&&j($.sliceDoc(et-1,et))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(j){this.decorations=this.getDeco(j)}update(j){(j.selectionSet||j.docChanged||j.viewportChanged)&&(this.decorations=this.getDeco(j.view))}getDeco(j){let $=j.state.facet(highlightConfig),{state:_e}=j,et=_e.selection;if(et.ranges.length>1)return Decoration.none;let tt=et.main,nt,rt=null;if(tt.empty){if(!$.highlightWordAroundCursor)return Decoration.none;let st=_e.wordAt(tt.head);if(!st)return Decoration.none;rt=_e.charCategorizer(tt.head),nt=_e.sliceDoc(st.from,st.to)}else{let st=tt.to-tt.from;if(st<$.minSelectionLength||st>200)return Decoration.none;if($.wholeWords){if(nt=_e.sliceDoc(tt.from,tt.to),rt=_e.charCategorizer(tt.head),!(insideWordBoundaries(rt,_e,tt.from,tt.to)&&insideWord(rt,_e,tt.from,tt.to)))return Decoration.none}else if(nt=_e.sliceDoc(tt.from,tt.to).trim(),!nt)return Decoration.none}let it=[];for(let st of j.visibleRanges){let ot=new SearchCursor(_e.doc,nt,st.from,st.to);for(;!ot.next().done;){let{from:at,to:lt}=ot.value;if((!rt||insideWordBoundaries(rt,_e,at,lt))&&(tt.empty&&at<=tt.from&&lt>=tt.to?it.push(mainMatchDeco.range(at,lt)):(at>=tt.to||lt<=tt.from)&&it.push(matchDeco.range(at,lt)),it.length>$.maxMatches))return Decoration.none}}return Decoration.set(it)}},{decorations:j=>j.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:j,dispatch:$})=>{let{selection:_e}=j,et=EditorSelection.create(_e.ranges.map(tt=>j.wordAt(tt.head)||EditorSelection.cursor(tt.head)),_e.mainIndex);return et.eq(_e)?!1:($(j.update({selection:et})),!0)};function findNextOccurrence(j,$){let{main:_e,ranges:et}=j.selection,tt=j.wordAt(_e.head),nt=tt&&tt.from==_e.from&&tt.to==_e.to;for(let rt=!1,it=new SearchCursor(j.doc,$,et[et.length-1].to);;)if(it.next(),it.done){if(rt)return null;it=new SearchCursor(j.doc,$,0,Math.max(0,et[et.length-1].from-1)),rt=!0}else{if(rt&&et.some(st=>st.from==it.value.from))continue;if(nt){let st=j.wordAt(it.value.from);if(!st||st.from!=it.value.from||st.to!=it.value.to)continue}return it.value}}const selectNextOccurrence=({state:j,dispatch:$})=>{let{ranges:_e}=j.selection;if(_e.some(nt=>nt.from===nt.to))return selectWord({state:j,dispatch:$});let et=j.sliceDoc(_e[0].from,_e[0].to);if(j.selection.ranges.some(nt=>j.sliceDoc(nt.from,nt.to)!=et))return!1;let tt=findNextOccurrence(j,et);return tt?($(j.update({selection:j.selection.addRange(EditorSelection.range(tt.from,tt.to),!1),effects:EditorView.scrollIntoView(tt.to)})),!0):!1},searchConfigFacet=Facet.define({combine(j){return combineConfig(j,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:$=>new SearchPanel($),scrollToMatch:$=>EditorView.scrollIntoView($)})}});class SearchQuery{constructor($){this.search=$.search,this.caseSensitive=!!$.caseSensitive,this.literal=!!$.literal,this.regexp=!!$.regexp,this.replace=$.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!$.wholeWord}unquote($){return this.literal?$:$.replace(/\\([nrt\\])/g,(_e,et)=>et=="n"?`
`:et=="r"?"\r":et=="t"?"	":"\\")}eq($){return this.search==$.search&&this.replace==$.replace&&this.caseSensitive==$.caseSensitive&&this.regexp==$.regexp&&this.wholeWord==$.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor($,_e=0,et){let tt=$.doc?$:EditorState.create({doc:$});return et==null&&(et=tt.doc.length),this.regexp?regexpCursor(this,tt,_e,et):stringCursor(this,tt,_e,et)}}class QueryType{constructor($){this.spec=$}}function stringCursor(j,$,_e,et){return new SearchCursor($.doc,j.unquoted,_e,et,j.caseSensitive?void 0:tt=>tt.toLowerCase(),j.wholeWord?stringWordTest($.doc,$.charCategorizer($.selection.main.head)):void 0)}function stringWordTest(j,$){return(_e,et,tt,nt)=>((nt>_e||nt+tt.length<et)&&(nt=Math.max(0,_e-2),tt=j.sliceString(nt,Math.min(j.length,et+2))),($(charBefore(tt,_e-nt))!=CharCategory.Word||$(charAfter(tt,_e-nt))!=CharCategory.Word)&&($(charAfter(tt,et-nt))!=CharCategory.Word||$(charBefore(tt,et-nt))!=CharCategory.Word))}class StringQuery extends QueryType{constructor($){super($)}nextMatch($,_e,et){let tt=stringCursor(this.spec,$,et,$.doc.length).nextOverlapping();return tt.done&&(tt=stringCursor(this.spec,$,0,_e).nextOverlapping()),tt.done?null:tt.value}prevMatchInRange($,_e,et){for(let tt=et;;){let nt=Math.max(_e,tt-1e4-this.spec.unquoted.length),rt=stringCursor(this.spec,$,nt,tt),it=null;for(;!rt.nextOverlapping().done;)it=rt.value;if(it)return it;if(nt==_e)return null;tt-=1e4}}prevMatch($,_e,et){return this.prevMatchInRange($,0,_e)||this.prevMatchInRange($,et,$.doc.length)}getReplacement($){return this.spec.unquote(this.spec.replace)}matchAll($,_e){let et=stringCursor(this.spec,$,0,$.doc.length),tt=[];for(;!et.next().done;){if(tt.length>=_e)return null;tt.push(et.value)}return tt}highlight($,_e,et,tt){let nt=stringCursor(this.spec,$,Math.max(0,_e-this.spec.unquoted.length),Math.min(et+this.spec.unquoted.length,$.doc.length));for(;!nt.next().done;)tt(nt.value.from,nt.value.to)}}function regexpCursor(j,$,_e,et){return new RegExpCursor($.doc,j.search,{ignoreCase:!j.caseSensitive,test:j.wholeWord?regexpWordTest($.charCategorizer($.selection.main.head)):void 0},_e,et)}function charBefore(j,$){return j.slice(findClusterBreak(j,$,!1),$)}function charAfter(j,$){return j.slice($,findClusterBreak(j,$))}function regexpWordTest(j){return($,_e,et)=>!et[0].length||(j(charBefore(et.input,et.index))!=CharCategory.Word||j(charAfter(et.input,et.index))!=CharCategory.Word)&&(j(charAfter(et.input,et.index+et[0].length))!=CharCategory.Word||j(charBefore(et.input,et.index+et[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch($,_e,et){let tt=regexpCursor(this.spec,$,et,$.doc.length).next();return tt.done&&(tt=regexpCursor(this.spec,$,0,_e).next()),tt.done?null:tt.value}prevMatchInRange($,_e,et){for(let tt=1;;tt++){let nt=Math.max(_e,et-tt*1e4),rt=regexpCursor(this.spec,$,nt,et),it=null;for(;!rt.next().done;)it=rt.value;if(it&&(nt==_e||it.from>nt+10))return it;if(nt==_e)return null}}prevMatch($,_e,et){return this.prevMatchInRange($,0,_e)||this.prevMatchInRange($,et,$.doc.length)}getReplacement($){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(_e,et)=>et=="$"?"$":et=="&"?$.match[0]:et!="0"&&+et<$.match.length?$.match[et]:_e)}matchAll($,_e){let et=regexpCursor(this.spec,$,0,$.doc.length),tt=[];for(;!et.next().done;){if(tt.length>=_e)return null;tt.push(et.value)}return tt}highlight($,_e,et,tt){let nt=regexpCursor(this.spec,$,Math.max(0,_e-250),Math.min(et+250,$.doc.length));for(;!nt.next().done;)tt(nt.value.from,nt.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(j){return new SearchState(defaultQuery(j).create(),null)},update(j,$){for(let _e of $.effects)_e.is(setSearchQuery)?j=new SearchState(_e.value.create(),j.panel):_e.is(togglePanel$1)&&(j=new SearchState(j.query,_e.value?createSearchPanel:null));return j},provide:j=>showPanel.from(j,$=>$.panel)});class SearchState{constructor($,_e){this.query=$,this.panel=_e}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(j){this.view=j,this.decorations=this.highlight(j.state.field(searchState))}update(j){let $=j.state.field(searchState);($!=j.startState.field(searchState)||j.docChanged||j.selectionSet||j.viewportChanged)&&(this.decorations=this.highlight($))}highlight({query:j,panel:$}){if(!$||!j.spec.valid)return Decoration.none;let{view:_e}=this,et=new RangeSetBuilder;for(let tt=0,nt=_e.visibleRanges,rt=nt.length;tt<rt;tt++){let{from:it,to:st}=nt[tt];for(;tt<rt-1&&st>nt[tt+1].from-2*250;)st=nt[++tt].to;j.highlight(_e.state,it,st,(ot,at)=>{let lt=_e.state.selection.ranges.some(ut=>ut.from==ot&&ut.to==at);et.add(ot,at,lt?selectedMatchMark:matchMark)})}return et.finish()}},{decorations:j=>j.decorations});function searchCommand(j){return $=>{let _e=$.state.field(searchState,!1);return _e&&_e.query.spec.valid?j($,_e):openSearchPanel($)}}const findNext=searchCommand((j,{query:$})=>{let{to:_e}=j.state.selection.main,et=$.nextMatch(j.state,_e,_e);if(!et)return!1;let tt=EditorSelection.single(et.from,et.to),nt=j.state.facet(searchConfigFacet);return j.dispatch({selection:tt,effects:[announceMatch(j,et),nt.scrollToMatch(tt.main,j)],userEvent:"select.search"}),selectSearchInput(j),!0}),findPrevious=searchCommand((j,{query:$})=>{let{state:_e}=j,{from:et}=_e.selection.main,tt=$.prevMatch(_e,et,et);if(!tt)return!1;let nt=EditorSelection.single(tt.from,tt.to),rt=j.state.facet(searchConfigFacet);return j.dispatch({selection:nt,effects:[announceMatch(j,tt),rt.scrollToMatch(nt.main,j)],userEvent:"select.search"}),selectSearchInput(j),!0}),selectMatches=searchCommand((j,{query:$})=>{let _e=$.matchAll(j.state,1e3);return!_e||!_e.length?!1:(j.dispatch({selection:EditorSelection.create(_e.map(et=>EditorSelection.range(et.from,et.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:j,dispatch:$})=>{let _e=j.selection;if(_e.ranges.length>1||_e.main.empty)return!1;let{from:et,to:tt}=_e.main,nt=[],rt=0;for(let it=new SearchCursor(j.doc,j.sliceDoc(et,tt));!it.next().done;){if(nt.length>1e3)return!1;it.value.from==et&&(rt=nt.length),nt.push(EditorSelection.range(it.value.from,it.value.to))}return $(j.update({selection:EditorSelection.create(nt,rt),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((j,{query:$})=>{let{state:_e}=j,{from:et,to:tt}=_e.selection.main;if(_e.readOnly)return!1;let nt=$.nextMatch(_e,et,et);if(!nt)return!1;let rt=[],it,st,ot=[];if(nt.from==et&&nt.to==tt&&(st=_e.toText($.getReplacement(nt)),rt.push({from:nt.from,to:nt.to,insert:st}),nt=$.nextMatch(_e,nt.from,nt.to),ot.push(EditorView.announce.of(_e.phrase("replaced match on line $",_e.doc.lineAt(et).number)+"."))),nt){let at=rt.length==0||rt[0].from>=nt.to?0:nt.to-nt.from-st.length;it=EditorSelection.single(nt.from-at,nt.to-at),ot.push(announceMatch(j,nt)),ot.push(_e.facet(searchConfigFacet).scrollToMatch(it.main,j))}return j.dispatch({changes:rt,selection:it,effects:ot,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((j,{query:$})=>{if(j.state.readOnly)return!1;let _e=$.matchAll(j.state,1e9).map(tt=>{let{from:nt,to:rt}=tt;return{from:nt,to:rt,insert:$.getReplacement(tt)}});if(!_e.length)return!1;let et=j.state.phrase("replaced $ matches",_e.length)+".";return j.dispatch({changes:_e,effects:EditorView.announce.of(et),userEvent:"input.replace.all"}),!0});function createSearchPanel(j){return j.state.facet(searchConfigFacet).createPanel(j)}function defaultQuery(j,$){var _e,et,tt,nt,rt;let it=j.selection.main,st=it.empty||it.to>it.from+100?"":j.sliceDoc(it.from,it.to);if($&&!st)return $;let ot=j.facet(searchConfigFacet);return new SearchQuery({search:((_e=$==null?void 0:$.literal)!==null&&_e!==void 0?_e:ot.literal)?st:st.replace(/\n/g,"\\n"),caseSensitive:(et=$==null?void 0:$.caseSensitive)!==null&&et!==void 0?et:ot.caseSensitive,literal:(tt=$==null?void 0:$.literal)!==null&&tt!==void 0?tt:ot.literal,regexp:(nt=$==null?void 0:$.regexp)!==null&&nt!==void 0?nt:ot.regexp,wholeWord:(rt=$==null?void 0:$.wholeWord)!==null&&rt!==void 0?rt:ot.wholeWord})}function getSearchInput(j){let $=getPanel(j,createSearchPanel);return $&&$.dom.querySelector("[main-field]")}function selectSearchInput(j){let $=getSearchInput(j);$&&$==j.root.activeElement&&$.select()}const openSearchPanel=j=>{let $=j.state.field(searchState,!1);if($&&$.panel){let _e=getSearchInput(j);if(_e&&_e!=j.root.activeElement){let et=defaultQuery(j.state,$.query.spec);et.valid&&j.dispatch({effects:setSearchQuery.of(et)}),_e.focus(),_e.select()}}else j.dispatch({effects:[togglePanel$1.of(!0),$?setSearchQuery.of(defaultQuery(j.state,$.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=j=>{let $=j.state.field(searchState,!1);if(!$||!$.panel)return!1;let _e=getPanel(j,createSearchPanel);return _e&&_e.dom.contains(j.root.activeElement)&&j.focus(),j.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor($){this.view=$;let _e=this.query=$.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:_e.search,placeholder:phrase($,"Find"),"aria-label":phrase($,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:_e.replace,placeholder:phrase($,"Replace"),"aria-label":phrase($,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:_e.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:_e.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:_e.wholeWord,onchange:this.commit});function et(tt,nt,rt){return crelt("button",{class:"cm-button",name:tt,onclick:nt,type:"button"},rt)}this.dom=crelt("div",{onkeydown:tt=>this.keydown(tt),class:"cm-search"},[this.searchField,et("next",()=>findNext($),[phrase($,"next")]),et("prev",()=>findPrevious($),[phrase($,"previous")]),et("select",()=>selectMatches($),[phrase($,"all")]),crelt("label",null,[this.caseField,phrase($,"match case")]),crelt("label",null,[this.reField,phrase($,"regexp")]),crelt("label",null,[this.wordField,phrase($,"by word")]),...$.state.readOnly?[]:[crelt("br"),this.replaceField,et("replace",()=>replaceNext($),[phrase($,"replace")]),et("replaceAll",()=>replaceAll($),[phrase($,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel($),"aria-label":phrase($,"close"),type:"button"},[""])])}commit(){let $=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});$.eq(this.query)||(this.query=$,this.view.dispatch({effects:setSearchQuery.of($)}))}keydown($){runScopeHandlers(this.view,$,"search-panel")?$.preventDefault():$.keyCode==13&&$.target==this.searchField?($.preventDefault(),($.shiftKey?findPrevious:findNext)(this.view)):$.keyCode==13&&$.target==this.replaceField&&($.preventDefault(),replaceNext(this.view))}update($){for(let _e of $.transactions)for(let et of _e.effects)et.is(setSearchQuery)&&!et.value.eq(this.query)&&this.setQuery(et.value)}setQuery($){this.query=$,this.searchField.value=$.search,this.replaceField.value=$.replace,this.caseField.checked=$.caseSensitive,this.reField.checked=$.regexp,this.wordField.checked=$.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(j,$){return j.state.phrase($)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(j,{from:$,to:_e}){let et=j.state.doc.lineAt($),tt=j.state.doc.lineAt(_e).to,nt=Math.max(et.from,$-AnnounceMargin),rt=Math.min(tt,_e+AnnounceMargin),it=j.state.sliceDoc(nt,rt);if(nt!=et.from){for(let st=0;st<AnnounceMargin;st++)if(!Break.test(it[st+1])&&Break.test(it[st])){it=it.slice(st);break}}if(rt!=tt){for(let st=it.length-1;st>it.length-AnnounceMargin;st--)if(!Break.test(it[st-1])&&Break.test(it[st])){it=it.slice(0,st);break}}return EditorView.announce.of(`${j.state.phrase("current match")}. ${it} ${j.state.phrase("on line")} ${et.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor($,_e,et,tt){this.state=$,this.pos=_e,this.explicit=et,this.view=tt,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore($){let _e=syntaxTree(this.state).resolveInner(this.pos,-1);for(;_e&&$.indexOf(_e.name)<0;)_e=_e.parent;return _e?{from:_e.from,to:this.pos,text:this.state.sliceDoc(_e.from,this.pos),type:_e.type}:null}matchBefore($){let _e=this.state.doc.lineAt(this.pos),et=Math.max(_e.from,this.pos-250),tt=_e.text.slice(et-_e.from,this.pos-_e.from),nt=tt.search(ensureAnchor($,!1));return nt<0?null:{from:et+nt,to:this.pos,text:tt.slice(nt)}}get aborted(){return this.abortListeners==null}addEventListener($,_e,et){$=="abort"&&this.abortListeners&&(this.abortListeners.push(_e),et&&et.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(j){let $=Object.keys(j).join(""),_e=/\w/.test($);return _e&&($=$.replace(/\w/g,"")),`[${_e?"\\w":""}${$.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(j){let $=Object.create(null),_e=Object.create(null);for(let{label:tt}of j){$[tt[0]]=!0;for(let nt=1;nt<tt.length;nt++)_e[tt[nt]]=!0}let et=toSet($)+toSet(_e)+"*$";return[new RegExp("^"+et),new RegExp(et)]}function completeFromList(j){let $=j.map(tt=>typeof tt=="string"?{label:tt}:tt),[_e,et]=$.every(tt=>/^\w+$/.test(tt.label))?[/\w*$/,/\w+$/]:prefixMatch($);return tt=>{let nt=tt.matchBefore(et);return nt||tt.explicit?{from:nt?nt.from:tt.pos,options:$,validFor:_e}:null}}class Option{constructor($,_e,et,tt){this.completion=$,this.source=_e,this.match=et,this.score=tt}}function cur(j){return j.selection.main.from}function ensureAnchor(j,$){var _e;let{source:et}=j,tt=$&&et[0]!="^",nt=et[et.length-1]!="$";return!tt&&!nt?j:new RegExp(`${tt?"^":""}(?:${et})${nt?"$":""}`,(_e=j.flags)!==null&&_e!==void 0?_e:j.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(j,$,_e,et){let{main:tt}=j.selection,nt=_e-tt.from,rt=et-tt.from;return Object.assign(Object.assign({},j.changeByRange(it=>{if(it!=tt&&_e!=et&&j.sliceDoc(it.from+nt,it.from+rt)!=j.sliceDoc(_e,et))return{range:it};let st=j.toText($);return{changes:{from:it.from+nt,to:et==tt.from?it.to:it.from+rt,insert:st},range:EditorSelection.cursor(it.from+nt+st.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(j){if(!Array.isArray(j))return j;let $=SourceCache.get(j);return $||SourceCache.set(j,$=completeFromList(j)),$}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor($){this.pattern=$,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let _e=0;_e<$.length;){let et=codePointAt($,_e),tt=codePointSize(et);this.chars.push(et);let nt=$.slice(_e,_e+tt),rt=nt.toUpperCase();this.folded.push(codePointAt(rt==nt?nt.toLowerCase():rt,0)),_e+=tt}this.astral=$.length!=this.chars.length}ret($,_e){return this.score=$,this.matched=_e,this}match($){if(this.pattern.length==0)return this.ret(-100,[]);if($.length<this.pattern.length)return null;let{chars:_e,folded:et,any:tt,precise:nt,byWord:rt}=this;if(_e.length==1){let yt=codePointAt($,0),vt=codePointSize(yt),Ct=vt==$.length?0:-100;if(yt!=_e[0])if(yt==et[0])Ct+=-200;else return null;return this.ret(Ct,[0,vt])}let it=$.indexOf(this.pattern);if(it==0)return this.ret($.length==this.pattern.length?0:-100,[0,this.pattern.length]);let st=_e.length,ot=0;if(it<0){for(let yt=0,vt=Math.min($.length,200);yt<vt&&ot<st;){let Ct=codePointAt($,yt);(Ct==_e[ot]||Ct==et[ot])&&(tt[ot++]=yt),yt+=codePointSize(Ct)}if(ot<st)return null}let at=0,lt=0,ut=!1,ct=0,ft=-1,dt=-1,mt=/[a-z]/.test($),pt=!0;for(let yt=0,vt=Math.min($.length,200),Ct=0;yt<vt&&lt<st;){let At=codePointAt($,yt);it<0&&(at<st&&At==_e[at]&&(nt[at++]=yt),ct<st&&(At==_e[ct]||At==et[ct]?(ct==0&&(ft=yt),dt=yt+1,ct++):ct=0));let $t,bt=At<255?At>=48&&At<=57||At>=97&&At<=122?2:At>=65&&At<=90?1:0:($t=fromCodePoint(At))!=$t.toLowerCase()?1:$t!=$t.toUpperCase()?2:0;(!yt||bt==1&&mt||Ct==0&&bt!=0)&&(_e[lt]==At||et[lt]==At&&(ut=!0)?rt[lt++]=yt:rt.length&&(pt=!1)),Ct=bt,yt+=codePointSize(At)}return lt==st&&rt[0]==0&&pt?this.result(-100+(ut?-200:0),rt,$):ct==st&&ft==0?this.ret(-200-$.length+(dt==$.length?0:-100),[0,dt]):it>-1?this.ret(-700-$.length,[it,it+this.pattern.length]):ct==st?this.ret(-200+-700-$.length,[ft,dt]):lt==st?this.result(-100+(ut?-200:0)+-700+(pt?0:-1100),rt,$):_e.length==2?null:this.result((tt[0]?-700:0)+-200+-1100,tt,$)}result($,_e,et){let tt=[],nt=0;for(let rt of _e){let it=rt+(this.astral?codePointSize(codePointAt(et,rt)):1);nt&&tt[nt-1]==rt?tt[nt-1]=it:(tt[nt++]=rt,tt[nt++]=it)}return this.ret($-et.length,tt)}}class StrictMatcher{constructor($){this.pattern=$,this.matched=[],this.score=0,this.folded=$.toLowerCase()}match($){if($.length<this.pattern.length)return null;let _e=$.slice(0,this.pattern.length),et=_e==this.pattern?0:_e.toLowerCase()==this.folded?-200:null;return et==null?null:(this.matched=[0,_e.length],this.score=et+($.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(j){return combineConfig(j,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:($,_e)=>$.label.localeCompare(_e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:($,_e)=>$&&_e,closeOnBlur:($,_e)=>$&&_e,icons:($,_e)=>$&&_e,tooltipClass:($,_e)=>et=>joinClass($(et),_e(et)),optionClass:($,_e)=>et=>joinClass($(et),_e(et)),addToOptions:($,_e)=>$.concat(_e),filterStrict:($,_e)=>$||_e})}});function joinClass(j,$){return j?$?j+" "+$:j:$}function defaultPositionInfo(j,$,_e,et,tt,nt){let rt=j.textDirection==Direction.RTL,it=rt,st=!1,ot="top",at,lt,ut=$.left-tt.left,ct=tt.right-$.right,ft=et.right-et.left,dt=et.bottom-et.top;if(it&&ut<Math.min(ft,ct)?it=!1:!it&&ct<Math.min(ft,ut)&&(it=!0),ft<=(it?ut:ct))at=Math.max(tt.top,Math.min(_e.top,tt.bottom-dt))-$.top,lt=Math.min(400,it?ut:ct);else{st=!0,lt=Math.min(400,(rt?$.right:tt.right-$.left)-30);let yt=tt.bottom-$.bottom;yt>=dt||yt>$.top?at=_e.bottom-$.top:(ot="bottom",at=$.bottom-_e.top)}let mt=($.bottom-$.top)/nt.offsetHeight,pt=($.right-$.left)/nt.offsetWidth;return{style:`${ot}: ${at/mt}px; max-width: ${lt/pt}px`,class:"cm-completionInfo-"+(st?rt?"left-narrow":"right-narrow":it?"left":"right")}}function optionContent(j){let $=j.addToOptions.slice();return j.icons&&$.push({render(_e){let et=document.createElement("div");return et.classList.add("cm-completionIcon"),_e.type&&et.classList.add(..._e.type.split(/\s+/g).map(tt=>"cm-completionIcon-"+tt)),et.setAttribute("aria-hidden","true"),et},position:20}),$.push({render(_e,et,tt,nt){let rt=document.createElement("span");rt.className="cm-completionLabel";let it=_e.displayLabel||_e.label,st=0;for(let ot=0;ot<nt.length;){let at=nt[ot++],lt=nt[ot++];at>st&&rt.appendChild(document.createTextNode(it.slice(st,at)));let ut=rt.appendChild(document.createElement("span"));ut.appendChild(document.createTextNode(it.slice(at,lt))),ut.className="cm-completionMatchedText",st=lt}return st<it.length&&rt.appendChild(document.createTextNode(it.slice(st))),rt},position:50},{render(_e){if(!_e.detail)return null;let et=document.createElement("span");return et.className="cm-completionDetail",et.textContent=_e.detail,et},position:80}),$.sort((_e,et)=>_e.position-et.position).map(_e=>_e.render)}function rangeAroundSelected(j,$,_e){if(j<=_e)return{from:0,to:j};if($<0&&($=0),$<=j>>1){let tt=Math.floor($/_e);return{from:tt*_e,to:(tt+1)*_e}}let et=Math.floor((j-$)/_e);return{from:j-(et+1)*_e,to:j-et*_e}}class CompletionTooltip{constructor($,_e,et){this.view=$,this.stateField=_e,this.applyCompletion=et,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:st=>this.placeInfo(st),key:this},this.space=null,this.currentClass="";let tt=$.state.field(_e),{options:nt,selected:rt}=tt.open,it=$.state.facet(completionConfig);this.optionContent=optionContent(it),this.optionClass=it.optionClass,this.tooltipClass=it.tooltipClass,this.range=rangeAroundSelected(nt.length,rt,it.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass($.state),this.dom.addEventListener("mousedown",st=>{let{options:ot}=$.state.field(_e).open;for(let at=st.target,lt;at&&at!=this.dom;at=at.parentNode)if(at.nodeName=="LI"&&(lt=/-(\d+)$/.exec(at.id))&&+lt[1]<ot.length){this.applyCompletion($,ot[+lt[1]]),st.preventDefault();return}}),this.dom.addEventListener("focusout",st=>{let ot=$.state.field(this.stateField,!1);ot&&ot.tooltip&&$.state.facet(completionConfig).closeOnBlur&&st.relatedTarget!=$.contentDOM&&$.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(nt,tt.id)}mount(){this.updateSel()}showOptions($,_e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox($,_e,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update($){var _e;let et=$.state.field(this.stateField),tt=$.startState.field(this.stateField);if(this.updateTooltipClass($.state),et!=tt){let{options:nt,selected:rt,disabled:it}=et.open;(!tt.open||tt.open.options!=nt)&&(this.range=rangeAroundSelected(nt.length,rt,$.state.facet(completionConfig).maxRenderedOptions),this.showOptions(nt,et.id)),this.updateSel(),it!=((_e=tt.open)===null||_e===void 0?void 0:_e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!it)}}updateTooltipClass($){let _e=this.tooltipClass($);if(_e!=this.currentClass){for(let et of this.currentClass.split(" "))et&&this.dom.classList.remove(et);for(let et of _e.split(" "))et&&this.dom.classList.add(et);this.currentClass=_e}}positioned($){this.space=$,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let $=this.view.state.field(this.stateField),_e=$.open;if((_e.selected>-1&&_e.selected<this.range.from||_e.selected>=this.range.to)&&(this.range=rangeAroundSelected(_e.options.length,_e.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(_e.options,$.id)),this.updateSelectedOption(_e.selected)){this.destroyInfo();let{completion:et}=_e.options[_e.selected],{info:tt}=et;if(!tt)return;let nt=typeof tt=="string"?document.createTextNode(tt):tt(et);if(!nt)return;"then"in nt?nt.then(rt=>{rt&&this.view.state.field(this.stateField,!1)==$&&this.addInfoPane(rt,et)}).catch(rt=>logException(this.view.state,rt,"completion info")):this.addInfoPane(nt,et)}}addInfoPane($,_e){this.destroyInfo();let et=this.info=document.createElement("div");if(et.className="cm-tooltip cm-completionInfo",$.nodeType!=null)et.appendChild($),this.infoDestroy=null;else{let{dom:tt,destroy:nt}=$;et.appendChild(tt),this.infoDestroy=nt||null}this.dom.appendChild(et),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption($){let _e=null;for(let et=this.list.firstChild,tt=this.range.from;et;et=et.nextSibling,tt++)et.nodeName!="LI"||!et.id?tt--:tt==$?et.hasAttribute("aria-selected")||(et.setAttribute("aria-selected","true"),_e=et):et.hasAttribute("aria-selected")&&et.removeAttribute("aria-selected");return _e&&scrollIntoView(this.list,_e),_e}measureInfo(){let $=this.dom.querySelector("[aria-selected]");if(!$||!this.info)return null;let _e=this.dom.getBoundingClientRect(),et=this.info.getBoundingClientRect(),tt=$.getBoundingClientRect(),nt=this.space;if(!nt){let rt=this.dom.ownerDocument.defaultView||window;nt={left:0,top:0,right:rt.innerWidth,bottom:rt.innerHeight}}return tt.top>Math.min(nt.bottom,_e.bottom)-10||tt.bottom<Math.max(nt.top,_e.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,_e,tt,et,nt,this.dom)}placeInfo($){this.info&&($?($.style&&(this.info.style.cssText=$.style),this.info.className="cm-tooltip cm-completionInfo "+($.class||"")):this.info.style.cssText="top: -1e6px")}createListBox($,_e,et){const tt=document.createElement("ul");tt.id=_e,tt.setAttribute("role","listbox"),tt.setAttribute("aria-expanded","true"),tt.setAttribute("aria-label",this.view.state.phrase("Completions"));let nt=null;for(let rt=et.from;rt<et.to;rt++){let{completion:it,match:st}=$[rt],{section:ot}=it;if(ot){let ut=typeof ot=="string"?ot:ot.name;if(ut!=nt&&(rt>et.from||et.from==0))if(nt=ut,typeof ot!="string"&&ot.header)tt.appendChild(ot.header(ot));else{let ct=tt.appendChild(document.createElement("completion-section"));ct.textContent=ut}}const at=tt.appendChild(document.createElement("li"));at.id=_e+"-"+rt,at.setAttribute("role","option");let lt=this.optionClass(it);lt&&(at.className=lt);for(let ut of this.optionContent){let ct=ut(it,this.view.state,this.view,st);ct&&at.appendChild(ct)}}return et.from&&tt.classList.add("cm-completionListIncompleteTop"),et.to<$.length&&tt.classList.add("cm-completionListIncompleteBottom"),tt}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(j,$){return _e=>new CompletionTooltip(_e,j,$)}function scrollIntoView(j,$){let _e=j.getBoundingClientRect(),et=$.getBoundingClientRect(),tt=_e.height/j.offsetHeight;et.top<_e.top?j.scrollTop-=(_e.top-et.top)/tt:et.bottom>_e.bottom&&(j.scrollTop+=(et.bottom-_e.bottom)/tt)}function score(j){return(j.boost||0)*100+(j.apply?10:0)+(j.info?5:0)+(j.type?1:0)}function sortOptions(j,$){let _e=[],et=null,tt=ot=>{_e.push(ot);let{section:at}=ot.completion;if(at){et||(et=[]);let lt=typeof at=="string"?at:at.name;et.some(ut=>ut.name==lt)||et.push(typeof at=="string"?{name:lt}:at)}},nt=$.facet(completionConfig);for(let ot of j)if(ot.hasResult()){let at=ot.result.getMatch;if(ot.result.filter===!1)for(let lt of ot.result.options)tt(new Option(lt,ot.source,at?at(lt):[],1e9-_e.length));else{let lt=$.sliceDoc(ot.from,ot.to),ut,ct=nt.filterStrict?new StrictMatcher(lt):new FuzzyMatcher(lt);for(let ft of ot.result.options)if(ut=ct.match(ft.label)){let dt=ft.displayLabel?at?at(ft,ut.matched):[]:ut.matched;tt(new Option(ft,ot.source,dt,ut.score+(ft.boost||0)))}}}if(et){let ot=Object.create(null),at=0,lt=(ut,ct)=>{var ft,dt;return((ft=ut.rank)!==null&&ft!==void 0?ft:1e9)-((dt=ct.rank)!==null&&dt!==void 0?dt:1e9)||(ut.name<ct.name?-1:1)};for(let ut of et.sort(lt))at-=1e5,ot[ut.name]=at;for(let ut of _e){let{section:ct}=ut.completion;ct&&(ut.score+=ot[typeof ct=="string"?ct:ct.name])}}let rt=[],it=null,st=nt.compareCompletions;for(let ot of _e.sort((at,lt)=>lt.score-at.score||st(at.completion,lt.completion))){let at=ot.completion;!it||it.label!=at.label||it.detail!=at.detail||it.type!=null&&at.type!=null&&it.type!=at.type||it.apply!=at.apply||it.boost!=at.boost?rt.push(ot):score(ot.completion)>score(it)&&(rt[rt.length-1]=ot),it=ot.completion}return rt}class CompletionDialog{constructor($,_e,et,tt,nt,rt){this.options=$,this.attrs=_e,this.tooltip=et,this.timestamp=tt,this.selected=nt,this.disabled=rt}setSelected($,_e){return $==this.selected||$>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(_e,$),this.tooltip,this.timestamp,$,this.disabled)}static build($,_e,et,tt,nt,rt){if(tt&&!rt&&$.some(ot=>ot.isPending))return tt.setDisabled();let it=sortOptions($,_e);if(!it.length)return tt&&$.some(ot=>ot.isPending)?tt.setDisabled():null;let st=_e.facet(completionConfig).selectOnOpen?0:-1;if(tt&&tt.selected!=st&&tt.selected!=-1){let ot=tt.options[tt.selected].completion;for(let at=0;at<it.length;at++)if(it[at].completion==ot){st=at;break}}return new CompletionDialog(it,makeAttrs(et,st),{pos:$.reduce((ot,at)=>at.hasResult()?Math.min(ot,at.from):ot,1e8),create:createTooltip,above:nt.aboveCursor},tt?tt.timestamp:Date.now(),st,!1)}map($){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:$.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor($,_e,et){this.active=$,this.id=_e,this.open=et}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update($){let{state:_e}=$,et=_e.facet(completionConfig),nt=(et.override||_e.languageDataAt("autocomplete",cur(_e)).map(asSource)).map(st=>(this.active.find(at=>at.source==st)||new ActiveSource(st,this.active.some(at=>at.state!=0)?1:0)).update($,et));nt.length==this.active.length&&nt.every((st,ot)=>st==this.active[ot])&&(nt=this.active);let rt=this.open,it=$.effects.some(st=>st.is(setActiveEffect));rt&&$.docChanged&&(rt=rt.map($.changes)),$.selection||nt.some(st=>st.hasResult()&&$.changes.touchesRange(st.from,st.to))||!sameResults(nt,this.active)||it?rt=CompletionDialog.build(nt,_e,this.id,rt,et,it):rt&&rt.disabled&&!nt.some(st=>st.isPending)&&(rt=null),!rt&&nt.every(st=>!st.isPending)&&nt.some(st=>st.hasResult())&&(nt=nt.map(st=>st.hasResult()?new ActiveSource(st.source,0):st));for(let st of $.effects)st.is(setSelectedEffect)&&(rt=rt&&rt.setSelected(st.value,this.id));return nt==this.active&&rt==this.open?this:new CompletionState(nt,this.id,rt)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(j,$){if(j==$)return!0;for(let _e=0,et=0;;){for(;_e<j.length&&!j[_e].hasResult();)_e++;for(;et<$.length&&!$[et].hasResult();)et++;let tt=_e==j.length,nt=et==$.length;if(tt||nt)return tt==nt;if(j[_e++].result!=$[et++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(j,$){let _e={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":j};return $>-1&&(_e["aria-activedescendant"]=j+"-"+$),_e}const none$1=[];function getUpdateType(j,$){if(j.isUserEvent("input.complete")){let et=j.annotation(pickedCompletion);if(et&&$.activateOnCompletion(et))return 12}let _e=j.isUserEvent("input.type");return _e&&$.activateOnTyping?5:_e?1:j.isUserEvent("delete.backward")?2:j.selection?8:j.docChanged?16:0}class ActiveSource{constructor($,_e,et=!1){this.source=$,this.state=_e,this.explicit=et}hasResult(){return!1}get isPending(){return this.state==1}update($,_e){let et=getUpdateType($,_e),tt=this;(et&8||et&16&&this.touches($))&&(tt=new ActiveSource(tt.source,0)),et&4&&tt.state==0&&(tt=new ActiveSource(this.source,1)),tt=tt.updateFor($,et);for(let nt of $.effects)if(nt.is(startCompletionEffect))tt=new ActiveSource(tt.source,1,nt.value);else if(nt.is(closeCompletionEffect))tt=new ActiveSource(tt.source,0);else if(nt.is(setActiveEffect))for(let rt of nt.value)rt.source==tt.source&&(tt=rt);return tt}updateFor($,_e){return this.map($.changes)}map($){return this}touches($){return $.changes.touchesRange(cur($.state))}}class ActiveResult extends ActiveSource{constructor($,_e,et,tt,nt,rt){super($,3,_e),this.limit=et,this.result=tt,this.from=nt,this.to=rt}hasResult(){return!0}updateFor($,_e){var et;if(!(_e&3))return this.map($.changes);let tt=this.result;tt.map&&!$.changes.empty&&(tt=tt.map(tt,$.changes));let nt=$.changes.mapPos(this.from),rt=$.changes.mapPos(this.to,1),it=cur($.state);if(it>rt||!tt||_e&2&&(cur($.startState)==this.from||it<this.limit))return new ActiveSource(this.source,_e&4?1:0);let st=$.changes.mapPos(this.limit);return checkValid(tt.validFor,$.state,nt,rt)?new ActiveResult(this.source,this.explicit,st,tt,nt,rt):tt.update&&(tt=tt.update(tt,nt,rt,new CompletionContext($.state,it,!1)))?new ActiveResult(this.source,this.explicit,st,tt,tt.from,(et=tt.to)!==null&&et!==void 0?et:cur($.state)):new ActiveSource(this.source,1,this.explicit)}map($){return $.empty?this:(this.result.map?this.result.map(this.result,$):this.result)?new ActiveResult(this.source,this.explicit,$.mapPos(this.limit),this.result,$.mapPos(this.from),$.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches($){return $.changes.touchesRange(this.from,this.to)}}function checkValid(j,$,_e,et){if(!j)return!1;let tt=$.sliceDoc(_e,et);return typeof j=="function"?j(tt,_e,et,$):ensureAnchor(j,!0).test(tt)}const setActiveEffect=StateEffect.define({map(j,$){return j.map(_e=>_e.map($))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(j,$){return j.update($)},provide:j=>[showTooltip.from(j,$=>$.tooltip),EditorView.contentAttributes.from(j,$=>$.attrs)]});function applyCompletion(j,$){const _e=$.completion.apply||$.completion.label;let et=j.state.field(completionState).active.find(tt=>tt.source==$.source);return et instanceof ActiveResult?(typeof _e=="string"?j.dispatch(Object.assign(Object.assign({},insertCompletionText(j.state,_e,et.from,et.to)),{annotations:pickedCompletion.of($.completion)})):_e(j,$.completion,et.from,et.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(j,$="option"){return _e=>{let et=_e.state.field(completionState,!1);if(!et||!et.open||et.open.disabled||Date.now()-et.open.timestamp<_e.state.facet(completionConfig).interactionDelay)return!1;let tt=1,nt;$=="page"&&(nt=getTooltip(_e,et.open.tooltip))&&(tt=Math.max(2,Math.floor(nt.dom.offsetHeight/nt.dom.querySelector("li").offsetHeight)-1));let{length:rt}=et.open.options,it=et.open.selected>-1?et.open.selected+tt*(j?1:-1):j?0:rt-1;return it<0?it=$=="page"?0:rt-1:it>=rt&&(it=$=="page"?rt-1:0),_e.dispatch({effects:setSelectedEffect.of(it)}),!0}}const acceptCompletion=j=>{let $=j.state.field(completionState,!1);return j.state.readOnly||!$||!$.open||$.open.selected<0||$.open.disabled||Date.now()-$.open.timestamp<j.state.facet(completionConfig).interactionDelay?!1:applyCompletion(j,$.open.options[$.open.selected])},startCompletion=j=>j.state.field(completionState,!1)?(j.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=j=>{let $=j.state.field(completionState,!1);return!$||!$.active.some(_e=>_e.state!=0)?!1:(j.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor($,_e){this.active=$,this.context=_e,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(j){this.view=j,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let $ of j.state.field(completionState).active)$.isPending&&this.startQuery($)}update(j){let $=j.state.field(completionState),_e=j.state.facet(completionConfig);if(!j.selectionSet&&!j.docChanged&&j.startState.field(completionState)==$)return;let et=j.transactions.some(nt=>{let rt=getUpdateType(nt,_e);return rt&8||(nt.selection||nt.docChanged)&&!(rt&3)});for(let nt=0;nt<this.running.length;nt++){let rt=this.running[nt];if(et||rt.context.abortOnDocChange&&j.docChanged||rt.updates.length+j.transactions.length>MaxUpdateCount&&Date.now()-rt.time>MinAbortTime){for(let it of rt.context.abortListeners)try{it()}catch(st){logException(this.view.state,st)}rt.context.abortListeners=null,this.running.splice(nt--,1)}else rt.updates.push(...j.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),j.transactions.some(nt=>nt.effects.some(rt=>rt.is(startCompletionEffect)))&&(this.pendingStart=!0);let tt=this.pendingStart?50:_e.activateOnTypingDelay;if(this.debounceUpdate=$.active.some(nt=>nt.isPending&&!this.running.some(rt=>rt.active.source==nt.source))?setTimeout(()=>this.startUpdate(),tt):-1,this.composing!=0)for(let nt of j.transactions)nt.isUserEvent("input.type")?this.composing=2:this.composing==2&&nt.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:j}=this.view,$=j.field(completionState);for(let _e of $.active)_e.isPending&&!this.running.some(et=>et.active.source==_e.source)&&this.startQuery(_e);this.running.length&&$.open&&$.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(j){let{state:$}=this.view,_e=cur($),et=new CompletionContext($,_e,j.explicit,this.view),tt=new RunningQuery(j,et);this.running.push(tt),Promise.resolve(j.source(et)).then(nt=>{tt.context.aborted||(tt.done=nt||null,this.scheduleAccept())},nt=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,nt)})}scheduleAccept(){this.running.every(j=>j.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var j;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let $=[],_e=this.view.state.facet(completionConfig),et=this.view.state.field(completionState);for(let tt=0;tt<this.running.length;tt++){let nt=this.running[tt];if(nt.done===void 0)continue;if(this.running.splice(tt--,1),nt.done){let it=cur(nt.updates.length?nt.updates[0].startState:this.view.state),st=Math.min(it,nt.done.from+(nt.active.explicit?0:1)),ot=new ActiveResult(nt.active.source,nt.active.explicit,st,nt.done,nt.done.from,(j=nt.done.to)!==null&&j!==void 0?j:it);for(let at of nt.updates)ot=ot.update(at,_e);if(ot.hasResult()){$.push(ot);continue}}let rt=et.active.find(it=>it.source==nt.active.source);if(rt&&rt.isPending)if(nt.done==null){let it=new ActiveSource(nt.active.source,0);for(let st of nt.updates)it=it.update(st,_e);it.isPending||$.push(it)}else this.startQuery(rt)}($.length||et.open&&et.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of($)})}},{eventHandlers:{blur(j){let $=this.view.state.field(completionState,!1);if($&&$.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let _e=$.open&&getTooltip(this.view,$.open.tooltip);(!_e||!_e.dom.contains(j.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(j,$){let _e=$.state.field(completionState,!1);if(!_e||!_e.open||_e.open.disabled||_e.open.selected<0||j.key.length>1||j.ctrlKey&&!(windows&&j.altKey)||j.metaKey)return!1;let et=_e.open.options[_e.open.selected],tt=_e.active.find(rt=>rt.source==et.source),nt=et.completion.commitCharacters||tt.result.commitCharacters;return nt&&nt.indexOf(j.key)>-1&&applyCompletion($,et),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults$2={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(j,$){let _e=$.mapPos(j,-1,MapMode.TrackAfter);return _e??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(j,$){if(j=j.map($.changes),$.selection){let _e=$.state.doc.lineAt($.selection.main.head);j=j.update({filter:et=>et>=_e.from&&et<=_e.to})}for(let _e of $.effects)_e.is(closeBracketEffect)&&(j=j.update({add:[closedBracket.range(_e.value,_e.value+1)]}));return j}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(j){for(let $=0;$<definedClosing.length;$+=2)if(definedClosing.charCodeAt($)==j)return definedClosing.charAt($+1);return fromCodePoint(j<128?j:j+1)}function config(j,$){return j.languageDataAt("closeBrackets",$)[0]||defaults$2}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((j,$,_e,et)=>{if((android?j.composing:j.compositionStarted)||j.state.readOnly)return!1;let tt=j.state.selection.main;if(et.length>2||et.length==2&&codePointSize(codePointAt(et,0))==1||$!=tt.from||_e!=tt.to)return!1;let nt=insertBracket(j.state,et);return nt?(j.dispatch(nt),!0):!1}),deleteBracketPair=({state:j,dispatch:$})=>{if(j.readOnly)return!1;let et=config(j,j.selection.main.head).brackets||defaults$2.brackets,tt=null,nt=j.changeByRange(rt=>{if(rt.empty){let it=prevChar(j.doc,rt.head);for(let st of et)if(st==it&&nextChar(j.doc,rt.head)==closing(codePointAt(st,0)))return{changes:{from:rt.head-st.length,to:rt.head+st.length},range:EditorSelection.cursor(rt.head-st.length)}}return{range:tt=rt}});return tt||$(j.update(nt,{scrollIntoView:!0,userEvent:"delete.backward"})),!tt},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(j,$){let _e=config(j,j.selection.main.head),et=_e.brackets||defaults$2.brackets;for(let tt of et){let nt=closing(codePointAt(tt,0));if($==tt)return nt==tt?handleSame(j,tt,et.indexOf(tt+tt+tt)>-1,_e):handleOpen(j,tt,nt,_e.before||defaults$2.before);if($==nt&&closedBracketAt(j,j.selection.main.from))return handleClose(j,tt,nt)}return null}function closedBracketAt(j,$){let _e=!1;return j.field(bracketState).between(0,j.doc.length,et=>{et==$&&(_e=!0)}),_e}function nextChar(j,$){let _e=j.sliceString($,$+2);return _e.slice(0,codePointSize(codePointAt(_e,0)))}function prevChar(j,$){let _e=j.sliceString($-2,$);return codePointSize(codePointAt(_e,0))==_e.length?_e:_e.slice(1)}function handleOpen(j,$,_e,et){let tt=null,nt=j.changeByRange(rt=>{if(!rt.empty)return{changes:[{insert:$,from:rt.from},{insert:_e,from:rt.to}],effects:closeBracketEffect.of(rt.to+$.length),range:EditorSelection.range(rt.anchor+$.length,rt.head+$.length)};let it=nextChar(j.doc,rt.head);return!it||/\s/.test(it)||et.indexOf(it)>-1?{changes:{insert:$+_e,from:rt.head},effects:closeBracketEffect.of(rt.head+$.length),range:EditorSelection.cursor(rt.head+$.length)}:{range:tt=rt}});return tt?null:j.update(nt,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(j,$,_e){let et=null,tt=j.changeByRange(nt=>nt.empty&&nextChar(j.doc,nt.head)==_e?{changes:{from:nt.head,to:nt.head+_e.length,insert:_e},range:EditorSelection.cursor(nt.head+_e.length)}:et={range:nt});return et?null:j.update(tt,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(j,$,_e,et){let tt=et.stringPrefixes||defaults$2.stringPrefixes,nt=null,rt=j.changeByRange(it=>{if(!it.empty)return{changes:[{insert:$,from:it.from},{insert:$,from:it.to}],effects:closeBracketEffect.of(it.to+$.length),range:EditorSelection.range(it.anchor+$.length,it.head+$.length)};let st=it.head,ot=nextChar(j.doc,st),at;if(ot==$){if(nodeStart(j,st))return{changes:{insert:$+$,from:st},effects:closeBracketEffect.of(st+$.length),range:EditorSelection.cursor(st+$.length)};if(closedBracketAt(j,st)){let ut=_e&&j.sliceDoc(st,st+$.length*3)==$+$+$?$+$+$:$;return{changes:{from:st,to:st+ut.length,insert:ut},range:EditorSelection.cursor(st+ut.length)}}}else{if(_e&&j.sliceDoc(st-2*$.length,st)==$+$&&(at=canStartStringAt(j,st-2*$.length,tt))>-1&&nodeStart(j,at))return{changes:{insert:$+$+$+$,from:st},effects:closeBracketEffect.of(st+$.length),range:EditorSelection.cursor(st+$.length)};if(j.charCategorizer(st)(ot)!=CharCategory.Word&&canStartStringAt(j,st,tt)>-1&&!probablyInString(j,st,$,tt))return{changes:{insert:$+$,from:st},effects:closeBracketEffect.of(st+$.length),range:EditorSelection.cursor(st+$.length)}}return{range:nt=it}});return nt?null:j.update(rt,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(j,$){let _e=syntaxTree(j).resolveInner($+1);return _e.parent&&_e.from==$}function probablyInString(j,$,_e,et){let tt=syntaxTree(j).resolveInner($,-1),nt=et.reduce((rt,it)=>Math.max(rt,it.length),0);for(let rt=0;rt<5;rt++){let it=j.sliceDoc(tt.from,Math.min(tt.to,tt.from+_e.length+nt)),st=it.indexOf(_e);if(!st||st>-1&&et.indexOf(it.slice(0,st))>-1){let at=tt.firstChild;for(;at&&at.from==tt.from&&at.to-at.from>_e.length+st;){if(j.sliceDoc(at.to-_e.length,at.to)==_e)return!1;at=at.firstChild}return!0}let ot=tt.to==$&&tt.parent;if(!ot)break;tt=ot}return!1}function canStartStringAt(j,$,_e){let et=j.charCategorizer($);if(et(j.sliceDoc($-1,$))!=CharCategory.Word)return $;for(let tt of _e){let nt=$-tt.length;if(j.sliceDoc(nt,$)==tt&&et(j.sliceDoc(nt-1,nt))!=CharCategory.Word)return nt}return-1}function autocompletion(j={}){return[commitCharacters,completionState,completionConfig.of(j),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],j=>j.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor($,_e,et){this.from=$,this.to=_e,this.diagnostic=et}}class LintState{constructor($,_e,et){this.diagnostics=$,this.panel=_e,this.selected=et}static init($,_e,et){let tt=$,nt=et.facet(lintConfig).markerFilter;nt&&(tt=nt(tt));let rt=Decoration.set(tt.map(it=>it.from==it.to||it.from==it.to-1&&et.doc.lineAt(it.from).to==it.from?Decoration.widget({widget:new DiagnosticWidget(it),diagnostic:it}).range(it.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+it.severity+(it.markClass?" "+it.markClass:"")},diagnostic:it}).range(it.from,it.to)),!0);return new LintState(rt,_e,findDiagnostic(rt))}}function findDiagnostic(j,$=null,_e=0){let et=null;return j.between(_e,1e9,(tt,nt,{spec:rt})=>{if(!($&&rt.diagnostic!=$))return et=new SelectedDiagnostic(tt,nt,rt.diagnostic),!1}),et}function hideTooltip(j,$){let _e=j.startState.doc.lineAt($.pos);return!!(j.effects.some(et=>et.is(setDiagnosticsEffect))||j.changes.touchesRange(_e.from,_e.to))}function maybeEnableLint(j,$){return j.field(lintState,!1)?$:$.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(j,$){if($.docChanged){let _e=j.diagnostics.map($.changes),et=null;if(j.selected){let tt=$.changes.mapPos(j.selected.from,1);et=findDiagnostic(_e,j.selected.diagnostic,tt)||findDiagnostic(_e,null,tt)}j=new LintState(_e,j.panel,et)}for(let _e of $.effects)_e.is(setDiagnosticsEffect)?j=LintState.init(_e.value,j.panel,$.state):_e.is(togglePanel)?j=new LintState(j.diagnostics,_e.value?LintPanel.open:null,j.selected):_e.is(movePanelSelection)&&(j=new LintState(j.diagnostics,j.panel,_e.value));return j},provide:j=>[showPanel.from(j,$=>$.panel),EditorView.decorations.from(j,$=>$.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(j,$,_e){let{diagnostics:et}=j.state.field(lintState),tt=[],nt=2e8,rt=0;et.between($-(_e<0?1:0),$+(_e>0?1:0),(st,ot,{spec:at})=>{$>=st&&$<=ot&&(st==ot||($>st||_e>0)&&($<ot||_e<0))&&(tt.push(at.diagnostic),nt=Math.min(st,nt),rt=Math.max(ot,rt))});let it=j.state.facet(lintConfig).tooltipFilter;return it&&(tt=it(tt)),tt.length?{pos:nt,end:rt,above:j.state.doc.lineAt(nt).to<rt,create(){return{dom:diagnosticsTooltip(j,tt)}}}:null}function diagnosticsTooltip(j,$){return crelt("ul",{class:"cm-tooltip-lint"},$.map(_e=>renderDiagnostic(j,_e,!1)))}const openLintPanel=j=>{let $=j.state.field(lintState,!1);(!$||!$.panel)&&j.dispatch({effects:maybeEnableLint(j.state,[togglePanel.of(!0)])});let _e=getPanel(j,LintPanel.open);return _e&&_e.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=j=>{let $=j.state.field(lintState,!1);return!$||!$.panel?!1:(j.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=j=>{let $=j.state.field(lintState,!1);if(!$)return!1;let _e=j.state.selection.main,et=$.diagnostics.iter(_e.to+1);return!et.value&&(et=$.diagnostics.iter(0),!et.value||et.from==_e.from&&et.to==_e.to)?!1:(j.dispatch({selection:{anchor:et.from,head:et.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(j){return Object.assign({sources:j.map($=>$.source)},combineConfig(j.map($=>$.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:($,_e)=>$?_e?et=>$(et)||_e(et):$:_e}))}});function assignKeys(j){let $=[];if(j)e:for(let{name:_e}of j){for(let et=0;et<_e.length;et++){let tt=_e[et];if(/[a-zA-Z]/.test(tt)&&!$.some(nt=>nt.toLowerCase()==tt.toLowerCase())){$.push(tt);continue e}}$.push("")}return $}function renderDiagnostic(j,$,_e){var et;let tt=_e?assignKeys($.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+$.severity},crelt("span",{class:"cm-diagnosticText"},$.renderMessage?$.renderMessage():$.message),(et=$.actions)===null||et===void 0?void 0:et.map((nt,rt)=>{let it=!1,st=ut=>{if(ut.preventDefault(),it)return;it=!0;let ct=findDiagnostic(j.state.field(lintState).diagnostics,$);ct&&nt.apply(j,ct.from,ct.to)},{name:ot}=nt,at=tt[rt]?ot.indexOf(tt[rt]):-1,lt=at<0?ot:[ot.slice(0,at),crelt("u",ot.slice(at,at+1)),ot.slice(at+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:st,onmousedown:st,"aria-label":` Action: ${ot}${at<0?"":` (access key "${tt[rt]})"`}.`},lt)}),$.source&&crelt("div",{class:"cm-diagnosticSource"},$.source))}class DiagnosticWidget extends WidgetType{constructor($){super(),this.diagnostic=$}eq($){return $.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor($,_e){this.diagnostic=_e,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic($,_e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor($){this.view=$,this.items=[];let _e=tt=>{if(tt.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(tt.keyCode==38||tt.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(tt.keyCode==40||tt.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(tt.keyCode==36)this.moveSelection(0);else if(tt.keyCode==35)this.moveSelection(this.items.length-1);else if(tt.keyCode==13)this.view.focus();else if(tt.keyCode>=65&&tt.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:nt}=this.items[this.selectedIndex],rt=assignKeys(nt.actions);for(let it=0;it<rt.length;it++)if(rt[it].toUpperCase().charCodeAt(0)==tt.keyCode){let st=findDiagnostic(this.view.state.field(lintState).diagnostics,nt);st&&nt.actions[it].apply($,st.from,st.to)}}else return;tt.preventDefault()},et=tt=>{for(let nt=0;nt<this.items.length;nt++)this.items[nt].dom.contains(tt.target)&&this.moveSelection(nt)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:_e,onclick:et}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let $=this.view.state.field(lintState).selected;if(!$)return-1;for(let _e=0;_e<this.items.length;_e++)if(this.items[_e].diagnostic==$.diagnostic)return _e;return-1}update(){let{diagnostics:$,selected:_e}=this.view.state.field(lintState),et=0,tt=!1,nt=null;for($.between(0,this.view.state.doc.length,(rt,it,{spec:st})=>{let ot=-1,at;for(let lt=et;lt<this.items.length;lt++)if(this.items[lt].diagnostic==st.diagnostic){ot=lt;break}ot<0?(at=new PanelItem(this.view,st.diagnostic),this.items.splice(et,0,at),tt=!0):(at=this.items[ot],ot>et&&(this.items.splice(et,ot-et),tt=!0)),_e&&at.diagnostic==_e.diagnostic?at.dom.hasAttribute("aria-selected")||(at.dom.setAttribute("aria-selected","true"),nt=at):at.dom.hasAttribute("aria-selected")&&at.dom.removeAttribute("aria-selected"),et++});et<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)tt=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),tt=!0),nt?(this.list.setAttribute("aria-activedescendant",nt.id),this.view.requestMeasure({key:this,read:()=>({sel:nt.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:rt,panel:it})=>{let st=it.height/this.list.offsetHeight;rt.top<it.top?this.list.scrollTop-=(it.top-rt.top)/st:rt.bottom>it.bottom&&(this.list.scrollTop+=(rt.bottom-it.bottom)/st)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),tt&&this.sync()}sync(){let $=this.list.firstChild;function _e(){let et=$;$=et.nextSibling,et.remove()}for(let et of this.items)if(et.dom.parentNode==this.list){for(;$!=et.dom;)_e();$=et.dom.nextSibling}else this.list.insertBefore(et.dom,$);for(;$;)_e()}moveSelection($){if(this.selectedIndex<0)return;let _e=this.view.state.field(lintState),et=findDiagnostic(_e.diagnostics,this.items[$].diagnostic);et&&this.view.dispatch({selection:{anchor:et.from,head:et.to},scrollIntoView:!0,effects:movePanelSelection.of(et)})}static open($){return new LintPanel($)}}function svg$1(j,$='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${$}>${encodeURIComponent(j)}</svg>')`}function underline(j){return svg$1(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${j}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],j=>{let{selected:$,panel:_e}=j.field(lintState);return!$||!_e||$.from==$.to?Decoration.none:Decoration.set([activeMark.range($.from,$.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function($){$===void 0&&($={});var{crosshairCursor:_e=!1}=$,et=[];$.closeBracketsKeymap!==!1&&(et=et.concat(closeBracketsKeymap)),$.defaultKeymap!==!1&&(et=et.concat(defaultKeymap)),$.searchKeymap!==!1&&(et=et.concat(searchKeymap)),$.historyKeymap!==!1&&(et=et.concat(historyKeymap)),$.foldKeymap!==!1&&(et=et.concat(foldKeymap)),$.completionKeymap!==!1&&(et=et.concat(completionKeymap)),$.lintKeymap!==!1&&(et=et.concat(lintKeymap));var tt=[];return $.lineNumbers!==!1&&tt.push(lineNumbers()),$.highlightActiveLineGutter!==!1&&tt.push(highlightActiveLineGutter()),$.highlightSpecialChars!==!1&&tt.push(highlightSpecialChars()),$.history!==!1&&tt.push(history()),$.foldGutter!==!1&&tt.push(foldGutter()),$.drawSelection!==!1&&tt.push(drawSelection()),$.dropCursor!==!1&&tt.push(dropCursor()),$.allowMultipleSelections!==!1&&tt.push(EditorState.allowMultipleSelections.of(!0)),$.indentOnInput!==!1&&tt.push(indentOnInput()),$.syntaxHighlighting!==!1&&tt.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),$.bracketMatching!==!1&&tt.push(bracketMatching()),$.closeBrackets!==!1&&tt.push(closeBrackets()),$.autocompletion!==!1&&tt.push(autocompletion()),$.rectangularSelection!==!1&&tt.push(rectangularSelection()),_e!==!1&&tt.push(crosshairCursor()),$.highlightActiveLine!==!1&&tt.push(highlightActiveLine()),$.highlightSelectionMatches!==!1&&tt.push(highlightSelectionMatches()),$.tabSize&&typeof $.tabSize=="number"&&tt.push(indentUnit.of(" ".repeat($.tabSize))),tt.concat([keymap.of(et.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection$1="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection$1},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function($){$===void 0&&($={});var{indentWithTab:_e=!0,editable:et=!0,readOnly:tt=!1,theme:nt="light",placeholder:rt="",basicSetup:it=!0}=$,st=[];switch(_e&&st.unshift(keymap.of([indentWithTab])),it&&(typeof it=="boolean"?st.unshift(basicSetup()):st.unshift(basicSetup(it))),rt&&st.unshift(placeholder(rt)),nt){case"light":st.push(defaultLightThemeOption);break;case"dark":st.push(oneDark);break;case"none":break;default:st.push(nt);break}return et===!1&&st.push(EditorView.editable.of(!1)),tt&&st.push(EditorState.readOnly.of(!0)),[...st]},getStatistics=j=>({line:j.state.doc.lineAt(j.state.selection.main.from),lineCount:j.state.doc.lines,lineBreak:j.state.lineBreak,length:j.state.doc.length,readOnly:j.state.readOnly,tabSize:j.state.tabSize,selection:j.state.selection,selectionAsSingle:j.state.selection.asSingle().main,ranges:j.state.selection.ranges,selectionCode:j.state.sliceDoc(j.state.selection.main.from,j.state.selection.main.to),selections:j.state.selection.ranges.map($=>j.state.sliceDoc($.from,$.to)),selectedText:j.state.selection.ranges.some($=>!$.empty)}),External=Annotation.define(),emptyExtensions=[];function useCodeMirror(j){var{value:$,selection:_e,onChange:et,onStatistics:tt,onCreateEditor:nt,onUpdate:rt,extensions:it=emptyExtensions,autoFocus:st,theme:ot="light",height:at=null,minHeight:lt=null,maxHeight:ut=null,width:ct=null,minWidth:ft=null,maxWidth:dt=null,placeholder:mt="",editable:pt=!0,readOnly:yt=!1,indentWithTab:vt=!0,basicSetup:Ct=!0,root:At,initialState:$t}=j,[bt,Bt]=reactExports.useState(),[Rt,St]=reactExports.useState(),[kt,Pt]=reactExports.useState(),Mt=EditorView.theme({"&":{height:at,minHeight:lt,maxHeight:ut,width:ct,minWidth:ft,maxWidth:dt},"& .cm-scroller":{height:"100% !important"}}),Lt=EditorView.updateListener.of(Ut=>{if(Ut.docChanged&&typeof et=="function"&&!Ut.transactions.some(jt=>jt.annotation(External))){var It=Ut.state.doc,Vt=It.toString();et(Vt,Ut)}tt&&tt(getStatistics(Ut))}),zt=getDefaultExtensions({theme:ot,editable:pt,readOnly:yt,placeholder:mt,indentWithTab:vt,basicSetup:Ct}),Kt=[Lt,Mt,...zt];return rt&&typeof rt=="function"&&Kt.push(EditorView.updateListener.of(rt)),Kt=Kt.concat(it),reactExports.useEffect(()=>{if(bt&&!kt){var Ut={doc:$,selection:_e,extensions:Kt},It=$t?EditorState.fromJSON($t.json,Ut,$t.fields):EditorState.create(Ut);if(Pt(It),!Rt){var Vt=new EditorView({state:It,parent:bt,root:At});St(Vt),nt&&nt(Vt,It)}}return()=>{Rt&&(Pt(void 0),St(void 0))}},[bt,kt]),reactExports.useEffect(()=>Bt(j.container),[j.container]),reactExports.useEffect(()=>()=>{Rt&&(Rt.destroy(),St(void 0))},[Rt]),reactExports.useEffect(()=>{st&&Rt&&Rt.focus()},[st,Rt]),reactExports.useEffect(()=>{Rt&&Rt.dispatch({effects:StateEffect.reconfigure.of(Kt)})},[ot,it,at,lt,ut,ct,ft,dt,mt,pt,yt,vt,Ct,et,rt]),reactExports.useEffect(()=>{if($!==void 0){var Ut=Rt?Rt.state.doc.toString():"";Rt&&$!==Ut&&Rt.dispatch({changes:{from:0,to:Ut.length,insert:$||""},annotations:[External.of(!0)]})}},[$,Rt]),{state:kt,setState:Pt,view:Rt,setView:St,container:bt,setContainer:Bt}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((j,$)=>{var{className:_e,value:et="",selection:tt,extensions:nt=[],onChange:rt,onStatistics:it,onCreateEditor:st,onUpdate:ot,autoFocus:at,theme:lt="light",height:ut,minHeight:ct,maxHeight:ft,width:dt,minWidth:mt,maxWidth:pt,basicSetup:yt,placeholder:vt,indentWithTab:Ct,editable:At,readOnly:$t,root:bt,initialState:Bt}=j,Rt=_objectWithoutPropertiesLoose(j,_excluded),St=reactExports.useRef(null),{state:kt,view:Pt,container:Mt}=useCodeMirror({container:St.current,root:bt,value:et,autoFocus:at,theme:lt,height:ut,minHeight:ct,maxHeight:ft,width:dt,minWidth:mt,maxWidth:pt,basicSetup:yt,placeholder:vt,indentWithTab:Ct,editable:At,readOnly:$t,selection:tt,onChange:rt,onStatistics:it,onCreateEditor:st,onUpdate:ot,extensions:nt,initialState:Bt});if(reactExports.useImperativeHandle($,()=>({editor:St.current,state:kt,view:Pt}),[St,Mt,kt,Pt]),typeof et!="string")throw new Error("value must be typeof string but got "+typeof et);var Lt=typeof lt=="string"?"cm-theme-"+lt:"cm-theme";return jsxRuntimeExports.jsx("div",_extends({ref:St,className:""+Lt+(_e?" "+_e:"")},Rt))});ReactCodeMirror.displayName="CodeMirror";const e$1=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),t$1=e$1?Promise.resolve().then(function(){return l$1}):Promise.resolve().then(function(){return v$3});async function n$1(...j){return(await t$1).default(...j)}e$1?Promise.resolve().then(function(){return y$3}):Promise.resolve().then(function(){return b$2});const a$2=e$1?Promise.resolve().then(function(){return m$2}):Promise.resolve().then(function(){return k$1});async function o$1(...j){return(await a$2).default(...j)}const s$1=async j=>{const $=await j.getFile();return $.handle=j,$};var c$3=async(j=[{}])=>{Array.isArray(j)||(j=[j]);const $=[];j.forEach((tt,nt)=>{$[nt]={description:tt.description||"Files",accept:{}},tt.mimeTypes?tt.mimeTypes.map(rt=>{$[nt].accept[rt]=tt.extensions||[]}):$[nt].accept["*/*"]=tt.extensions||[]});const _e=await window.showOpenFilePicker({id:j[0].id,startIn:j[0].startIn,types:$,multiple:j[0].multiple||!1,excludeAcceptAllOption:j[0].excludeAcceptAllOption||!1}),et=await Promise.all(_e.map(s$1));return j[0].multiple?et:et[0]},l$1={__proto__:null,default:c$3};function u$2(j){function $(_e){if(Object(_e)!==_e)return Promise.reject(new TypeError(_e+" is not an object."));var et=_e.done;return Promise.resolve(_e.value).then(function(tt){return{value:tt,done:et}})}return u$2=function(_e){this.s=_e,this.n=_e.next},u$2.prototype={s:null,n:null,next:function(){return $(this.n.apply(this.s,arguments))},return:function(_e){var et=this.s.return;return et===void 0?Promise.resolve({value:_e,done:!0}):$(et.apply(this.s,arguments))},throw:function(_e){var et=this.s.return;return et===void 0?Promise.reject(_e):$(et.apply(this.s,arguments))}},new u$2(j)}const p$3=async(j,$,_e=j.name,et)=>{const tt=[],nt=[];var rt,it=!1,st=!1;try{for(var ot,at=function(lt){var ut,ct,ft,dt=2;for(typeof Symbol<"u"&&(ct=Symbol.asyncIterator,ft=Symbol.iterator);dt--;){if(ct&&(ut=lt[ct])!=null)return ut.call(lt);if(ft&&(ut=lt[ft])!=null)return new u$2(ut.call(lt));ct="@@asyncIterator",ft="@@iterator"}throw new TypeError("Object is not async iterable")}(j.values());it=!(ot=await at.next()).done;it=!1){const lt=ot.value,ut=`${_e}/${lt.name}`;lt.kind==="file"?nt.push(lt.getFile().then(ct=>(ct.directoryHandle=j,ct.handle=lt,Object.defineProperty(ct,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>ut})))):lt.kind!=="directory"||!$||et&&et(lt)||tt.push(p$3(lt,$,ut,et))}}catch(lt){st=!0,rt=lt}finally{try{it&&at.return!=null&&await at.return()}finally{if(st)throw rt}}return[...(await Promise.all(tt)).flat(),...await Promise.all(nt)]};var d=async(j={})=>{j.recursive=j.recursive||!1,j.mode=j.mode||"read";const $=await window.showDirectoryPicker({id:j.id,startIn:j.startIn,mode:j.mode});return(await(await $.values()).next()).done?[$]:p$3($,j.recursive,void 0,j.skipDirectory)},y$3={__proto__:null,default:d},f$2=async(j,$=[{}],_e=null,et=!1,tt=null)=>{Array.isArray($)||($=[$]),$[0].fileName=$[0].fileName||"Untitled";const nt=[];let rt=null;if(j instanceof Blob&&j.type?rt=j.type:j.headers&&j.headers.get("content-type")&&(rt=j.headers.get("content-type")),$.forEach((ot,at)=>{nt[at]={description:ot.description||"Files",accept:{}},ot.mimeTypes?(at===0&&rt&&ot.mimeTypes.push(rt),ot.mimeTypes.map(lt=>{nt[at].accept[lt]=ot.extensions||[]})):rt?nt[at].accept[rt]=ot.extensions||[]:nt[at].accept["*/*"]=ot.extensions||[]}),_e)try{await _e.getFile()}catch(ot){if(_e=null,et)throw ot}const it=_e||await window.showSaveFilePicker({suggestedName:$[0].fileName,id:$[0].id,startIn:$[0].startIn,types:nt,excludeAcceptAllOption:$[0].excludeAcceptAllOption||!1});!_e&&tt&&tt(it);const st=await it.createWritable();return"stream"in j?(await j.stream().pipeTo(st),it):"body"in j?(await j.body.pipeTo(st),it):(await st.write(await j),await st.close(),it)},m$2={__proto__:null,default:f$2},w$1=async(j=[{}])=>(Array.isArray(j)||(j=[j]),new Promise(($,_e)=>{const et=document.createElement("input");et.type="file";const tt=[...j.map(st=>st.mimeTypes||[]),...j.map(st=>st.extensions||[])].join();et.multiple=j[0].multiple||!1,et.accept=tt||"",et.style.display="none",document.body.append(et);const nt=st=>{typeof rt=="function"&&rt(),$(st)},rt=j[0].legacySetup&&j[0].legacySetup(nt,()=>rt(_e),et),it=()=>{window.removeEventListener("focus",it),et.remove()};et.addEventListener("click",()=>{window.addEventListener("focus",it)}),et.addEventListener("change",()=>{window.removeEventListener("focus",it),et.remove(),nt(et.multiple?Array.from(et.files):et.files[0])}),"showPicker"in HTMLInputElement.prototype?et.showPicker():et.click()})),v$3={__proto__:null,default:w$1},h$2=async(j=[{}])=>(Array.isArray(j)||(j=[j]),j[0].recursive=j[0].recursive||!1,new Promise(($,_e)=>{const et=document.createElement("input");et.type="file",et.webkitdirectory=!0;const tt=rt=>{typeof nt=="function"&&nt(),$(rt)},nt=j[0].legacySetup&&j[0].legacySetup(tt,()=>nt(_e),et);et.addEventListener("change",()=>{let rt=Array.from(et.files);j[0].recursive?j[0].recursive&&j[0].skipDirectory&&(rt=rt.filter(it=>it.webkitRelativePath.split("/").every(st=>!j[0].skipDirectory({name:st,kind:"directory"})))):rt=rt.filter(it=>it.webkitRelativePath.split("/").length===2),tt(rt)}),"showPicker"in HTMLInputElement.prototype?et.showPicker():et.click()})),b$2={__proto__:null,default:h$2},P=async(j,$={})=>{Array.isArray($)&&($=$[0]);const _e=document.createElement("a");let et=j;"body"in j&&(et=await async function(rt,it){const st=rt.getReader(),ot=new ReadableStream({start:ut=>async function ct(){return st.read().then(({done:ft,value:dt})=>{if(!ft)return ut.enqueue(dt),ct();ut.close()})}()}),at=new Response(ot),lt=await at.blob();return st.releaseLock(),new Blob([lt],{type:it})}(j.body,j.headers.get("content-type"))),_e.download=$.fileName||"Untitled",_e.href=URL.createObjectURL(await et);const tt=()=>{typeof nt=="function"&&nt()},nt=$.legacySetup&&$.legacySetup(tt,()=>nt(),_e);return _e.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(_e.href),3e4),tt()}),_e.click(),null},k$1={__proto__:null,default:P};const FileControls=({onLoad:j,onSave:$,onSelectExample:_e})=>jsxRuntimeExports.jsxs("div",{className:"file-controls",children:[jsxRuntimeExports.jsx("button",{className:"load",onClick:j,children:"Load"}),jsxRuntimeExports.jsx("button",{className:"save",onClick:$,children:"Save"}),jsxRuntimeExports.jsxs("select",{onChange:et=>{_e(et.target.value)},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Examples"}),jsxRuntimeExports.jsx("option",{value:"goal",children:"Goal Tree"}),jsxRuntimeExports.jsx("option",{value:"problem",children:"Problem Tree"}),jsxRuntimeExports.jsx("option",{value:"conflict",children:"Conflict Cloud"})]})]}),exampleGoalTreeText=`type: goal

Goal: "Make money now and in the future"

revUp: "Generate more revenue" {
    class: CSF
}
costsDown: "Control costs" {
    class: CSF
}

Goal <- revUp
Goal <- costsDown

keepCust: "Protect relationship with existing customers"
newCust: "Acquire new customers"

reduceInfra: "Reduce infrastructure spending"
retain: "Retain employees"
marketSalary: "Keep up with market salaries"

morale: "Maintain employee morale"
features: "Develop new features"

newCust <- features

# This is probably the wrong place for 'retain'
features <- retain

revUp <- newCust
revUp <- keepCust
costsDown <- reduceInfra
retain <- marketSalary
retain <- morale
`,exampleEvaporatingCloudText=`type: conflict

A: Maximize business performance

B: Subordinate all decisions to the financial goal

C: Ensure people are in a state of optimal performance

D: Subordinate people's needs to the financial goal

B <- D: *inject* Psychological flow triggers

D': Attend to people's needs (& let people work)
`,exampleProblemTreeText=`type: problem

bad: "Bad user experience" {
    class: UDE
}
cluttered: "Cluttered interface" {
    class: UDE
}
bad <- cluttered
ux: "Low investment in UX design"
features: "Many features added"
cluttered <- ux && features
`;let Stack$3=class _r{constructor($,_e,et,tt,nt,rt,it,st,ot,at=0,lt){this.p=$,this.stack=_e,this.state=et,this.reducePos=tt,this.pos=nt,this.score=rt,this.buffer=it,this.bufferBase=st,this.curContext=ot,this.lookAhead=at,this.parent=lt}toString(){return`[${this.stack.filter(($,_e)=>_e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start($,_e,et=0){let tt=$.parser.context;return new _r($,[],_e,et,et,0,[],0,tt?new StackContext(tt,tt.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState($,_e){this.stack.push(this.state,_e,this.bufferBase+this.buffer.length),this.state=$}reduce($){var _e;let et=$>>19,tt=$&65535,{parser:nt}=this.p,rt=this.reducePos<this.pos-25;rt&&this.setLookAhead(this.pos);let it=nt.dynamicPrecedence(tt);if(it&&(this.score+=it),et==0){this.pushState(nt.getGoto(this.state,tt,!0),this.reducePos),tt<nt.minRepeatTerm&&this.storeNode(tt,this.reducePos,this.reducePos,rt?8:4,!0),this.reduceContext(tt,this.reducePos);return}let st=this.stack.length-(et-1)*3-($&262144?6:0),ot=st?this.stack[st-2]:this.p.ranges[0].from,at=this.reducePos-ot;at>=2e3&&!(!((_e=this.p.parser.nodeSet.types[tt])===null||_e===void 0)&&_e.isAnonymous)&&(ot==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=at):this.p.lastBigReductionSize<at&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=ot,this.p.lastBigReductionSize=at));let lt=st?this.stack[st-1]:0,ut=this.bufferBase+this.buffer.length-lt;if(tt<nt.minRepeatTerm||$&131072){let ct=nt.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(tt,ot,ct,ut+4,!0)}if($&262144)this.state=this.stack[st];else{let ct=this.stack[st-3];this.state=nt.getGoto(ct,tt,!0)}for(;this.stack.length>st;)this.stack.pop();this.reduceContext(tt,ot)}storeNode($,_e,et,tt=4,nt=!1){if($==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let rt=this,it=this.buffer.length;if(it==0&&rt.parent&&(it=rt.bufferBase-rt.parent.bufferBase,rt=rt.parent),it>0&&rt.buffer[it-4]==0&&rt.buffer[it-1]>-1){if(_e==et)return;if(rt.buffer[it-2]>=_e){rt.buffer[it-2]=et;return}}}if(!nt||this.pos==et)this.buffer.push($,_e,et,tt);else{let rt=this.buffer.length;if(rt>0&&this.buffer[rt-4]!=0){let it=!1;for(let st=rt;st>0&&this.buffer[st-2]>et;st-=4)if(this.buffer[st-1]>=0){it=!0;break}if(it)for(;rt>0&&this.buffer[rt-2]>et;)this.buffer[rt]=this.buffer[rt-4],this.buffer[rt+1]=this.buffer[rt-3],this.buffer[rt+2]=this.buffer[rt-2],this.buffer[rt+3]=this.buffer[rt-1],rt-=4,tt>4&&(tt-=4)}this.buffer[rt]=$,this.buffer[rt+1]=_e,this.buffer[rt+2]=et,this.buffer[rt+3]=tt}}shift($,_e,et,tt){if($&131072)this.pushState($&65535,this.pos);else if($&262144)this.pos=tt,this.shiftContext(_e,et),_e<=this.p.parser.maxNode&&this.buffer.push(_e,et,tt,4);else{let nt=$,{parser:rt}=this.p;(tt>this.pos||_e<=rt.maxNode)&&(this.pos=tt,rt.stateFlag(nt,1)||(this.reducePos=tt)),this.pushState(nt,et),this.shiftContext(_e,et),_e<=rt.maxNode&&this.buffer.push(_e,et,tt,4)}}apply($,_e,et,tt){$&65536?this.reduce($):this.shift($,_e,et,tt)}useNode($,_e){let et=this.p.reused.length-1;(et<0||this.p.reused[et]!=$)&&(this.p.reused.push($),et++);let tt=this.pos;this.reducePos=this.pos=tt+$.length,this.pushState(_e,tt),this.buffer.push(et,tt,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,$,this,this.p.stream.reset(this.pos-$.length)))}split(){let $=this,_e=$.buffer.length;for(;_e>0&&$.buffer[_e-2]>$.reducePos;)_e-=4;let et=$.buffer.slice(_e),tt=$.bufferBase+_e;for(;$&&tt==$.bufferBase;)$=$.parent;return new _r(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,et,tt,this.curContext,this.lookAhead,$)}recoverByDelete($,_e){let et=$<=this.p.parser.maxNode;et&&this.storeNode($,this.pos,_e,4),this.storeNode(0,this.pos,_e,et?8:4),this.pos=this.reducePos=_e,this.score-=190}canShift($){for(let _e=new SimulatedStack(this);;){let et=this.p.parser.stateSlot(_e.state,4)||this.p.parser.hasAction(_e.state,$);if(et==0)return!1;if(!(et&65536))return!0;_e.reduce(et)}}recoverByInsert($){if(this.stack.length>=300)return[];let _e=this.p.parser.nextStates(this.state);if(_e.length>8||this.stack.length>=120){let tt=[];for(let nt=0,rt;nt<_e.length;nt+=2)(rt=_e[nt+1])!=this.state&&this.p.parser.hasAction(rt,$)&&tt.push(_e[nt],rt);if(this.stack.length<120)for(let nt=0;tt.length<8&&nt<_e.length;nt+=2){let rt=_e[nt+1];tt.some((it,st)=>st&1&&it==rt)||tt.push(_e[nt],rt)}_e=tt}let et=[];for(let tt=0;tt<_e.length&&et.length<4;tt+=2){let nt=_e[tt+1];if(nt==this.state)continue;let rt=this.split();rt.pushState(nt,this.pos),rt.storeNode(0,rt.pos,rt.pos,4,!0),rt.shiftContext(_e[tt],this.pos),rt.reducePos=this.pos,rt.score-=200,et.push(rt)}return et}forceReduce(){let{parser:$}=this.p,_e=$.stateSlot(this.state,5);if(!(_e&65536))return!1;if(!$.validAction(this.state,_e)){let et=_e>>19,tt=_e&65535,nt=this.stack.length-et*3;if(nt<0||$.getGoto(this.stack[nt],tt,!1)<0){let rt=this.findForcedReduction();if(rt==null)return!1;_e=rt}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(_e),!0}findForcedReduction(){let{parser:$}=this.p,_e=[],et=(tt,nt)=>{if(!_e.includes(tt))return _e.push(tt),$.allActions(tt,rt=>{if(!(rt&393216))if(rt&65536){let it=(rt>>19)-nt;if(it>1){let st=rt&65535,ot=this.stack.length-it*3;if(ot>=0&&$.getGoto(this.stack[ot],st,!1)>=0)return it<<19|65536|st}}else{let it=et(rt,nt+1);if(it!=null)return it}})};return et(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:$}=this.p;return $.data[$.stateSlot(this.state,1)]==65535&&!$.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState($){if(this.state!=$.state||this.stack.length!=$.stack.length)return!1;for(let _e=0;_e<this.stack.length;_e+=3)if(this.stack[_e]!=$.stack[_e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled($){return this.p.parser.dialect.flags[$]}shiftContext($,_e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,$,this,this.p.stream.reset(_e)))}reduceContext($,_e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,$,this,this.p.stream.reset(_e)))}emitContext(){let $=this.buffer.length-1;($<0||this.buffer[$]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let $=this.buffer.length-1;($<0||this.buffer[$]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext($){if($!=this.curContext.context){let _e=new StackContext(this.curContext.tracker,$);_e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=_e}}setLookAhead($){$>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=$)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};class StackContext{constructor($,_e){this.tracker=$,this.context=_e,this.hash=$.strict?$.hash(_e):0}}class SimulatedStack{constructor($){this.start=$,this.state=$.state,this.stack=$.stack,this.base=this.stack.length}reduce($){let _e=$&65535,et=$>>19;et==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(et-1)*3;let tt=this.start.p.parser.getGoto(this.stack[this.base-3],_e,!0);this.state=tt}}class StackBufferCursor{constructor($,_e,et){this.stack=$,this.pos=_e,this.index=et,this.buffer=$.buffer,this.index==0&&this.maybeNext()}static create($,_e=$.bufferBase+$.buffer.length){return new StackBufferCursor($,_e,_e-$.bufferBase)}maybeNext(){let $=this.stack.parent;$!=null&&(this.index=this.stack.bufferBase-$.bufferBase,this.stack=$,this.buffer=$.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(j,$=Uint16Array){if(typeof j!="string")return j;let _e=null;for(let et=0,tt=0;et<j.length;){let nt=0;for(;;){let rt=j.charCodeAt(et++),it=!1;if(rt==126){nt=65535;break}rt>=92&&rt--,rt>=34&&rt--;let st=rt-32;if(st>=46&&(st-=46,it=!0),nt+=st,it)break;nt*=46}_e?_e[tt++]=nt:_e=new $(nt)}return _e}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor($,_e){this.input=$,this.ranges=_e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=_e[0].from,this.range=_e[0],this.end=_e[_e.length-1].to,this.readNext()}resolveOffset($,_e){let et=this.range,tt=this.rangeIndex,nt=this.pos+$;for(;nt<et.from;){if(!tt)return null;let rt=this.ranges[--tt];nt-=et.from-rt.to,et=rt}for(;_e<0?nt>et.to:nt>=et.to;){if(tt==this.ranges.length-1)return null;let rt=this.ranges[++tt];nt+=rt.from-et.to,et=rt}return nt}clipPos($){if($>=this.range.from&&$<this.range.to)return $;for(let _e of this.ranges)if(_e.to>$)return Math.max($,_e.from);return this.end}peek($){let _e=this.chunkOff+$,et,tt;if(_e>=0&&_e<this.chunk.length)et=this.pos+$,tt=this.chunk.charCodeAt(_e);else{let nt=this.resolveOffset($,1);if(nt==null)return-1;if(et=nt,et>=this.chunk2Pos&&et<this.chunk2Pos+this.chunk2.length)tt=this.chunk2.charCodeAt(et-this.chunk2Pos);else{let rt=this.rangeIndex,it=this.range;for(;it.to<=et;)it=this.ranges[++rt];this.chunk2=this.input.chunk(this.chunk2Pos=et),et+this.chunk2.length>it.to&&(this.chunk2=this.chunk2.slice(0,it.to-et)),tt=this.chunk2.charCodeAt(0)}}return et>=this.token.lookAhead&&(this.token.lookAhead=et+1),tt}acceptToken($,_e=0){let et=_e?this.resolveOffset(_e,-1):this.pos;if(et==null||et<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=$,this.token.end=et}acceptTokenTo($,_e){this.token.value=$,this.token.end=_e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:$,chunkPos:_e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=$,this.chunk2Pos=_e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let $=this.input.chunk(this.pos),_e=this.pos+$.length;this.chunk=_e>this.range.to?$.slice(0,this.range.to-this.pos):$,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance($=1){for(this.chunkOff+=$;this.pos+$>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();$-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=$,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset($,_e){if(_e?(this.token=_e,_e.start=$,_e.lookAhead=$+1,_e.value=_e.extended=-1):this.token=nullToken,this.pos!=$){if(this.pos=$,$==this.end)return this.setDone(),this;for(;$<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;$>=this.range.to;)this.range=this.ranges[++this.rangeIndex];$>=this.chunkPos&&$<this.chunkPos+this.chunk.length?this.chunkOff=$-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read($,_e){if($>=this.chunkPos&&_e<=this.chunkPos+this.chunk.length)return this.chunk.slice($-this.chunkPos,_e-this.chunkPos);if($>=this.chunk2Pos&&_e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice($-this.chunk2Pos,_e-this.chunk2Pos);if($>=this.range.from&&_e<=this.range.to)return this.input.read($,_e);let et="";for(let tt of this.ranges){if(tt.from>=_e)break;tt.to>$&&(et+=this.input.read(Math.max(tt.from,$),Math.min(tt.to,_e)))}return et}}class TokenGroup{constructor($,_e){this.data=$,this.id=_e}token($,_e){let{parser:et}=_e.p;readToken(this.data,$,_e,this.id,et.data,et.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;function readToken(j,$,_e,et,tt,nt){let rt=0,it=1<<et,{dialect:st}=_e.p.parser;e:for(;it&j[rt];){let ot=j[rt+1];for(let ct=rt+3;ct<ot;ct+=2)if((j[ct+1]&it)>0){let ft=j[ct];if(st.allows(ft)&&($.token.value==-1||$.token.value==ft||overrides(ft,$.token.value,tt,nt))){$.acceptToken(ft);break}}let at=$.next,lt=0,ut=j[rt+2];if($.next<0&&ut>lt&&j[ot+ut*3-3]==65535){rt=j[ot+ut*3-1];continue e}for(;lt<ut;){let ct=lt+ut>>1,ft=ot+ct+(ct<<1),dt=j[ft],mt=j[ft+1]||65536;if(at<dt)ut=ct;else if(at>=mt)lt=ct+1;else{rt=j[ft+2],$.advance();continue e}}break}}function findOffset(j,$,_e){for(let et=$,tt;(tt=j[et])!=65535;et++)if(tt==_e)return et-$;return-1}function overrides(j,$,_e,et){let tt=findOffset(_e,et,$);return tt<0||findOffset(_e,et,j)<tt}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;function cutAt(j,$,_e){let et=j.cursor(IterMode.IncludeAnonymous);for(et.moveTo($);;)if(!(_e<0?et.childBefore($):et.childAfter($)))for(;;){if((_e<0?et.to<$:et.from>$)&&!et.type.isError)return _e<0?Math.max(0,Math.min(et.to-1,$-25)):Math.min(j.length,Math.max(et.from+1,$+25));if(_e<0?et.prevSibling():et.nextSibling())break;if(!et.parent())return _e<0?0:j.length}}class FragmentCursor{constructor($,_e){this.fragments=$,this.nodeSet=_e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let $=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if($){for(this.safeFrom=$.openStart?cutAt($.tree,$.from+$.offset,1)-$.offset:$.from,this.safeTo=$.openEnd?cutAt($.tree,$.to+$.offset,-1)-$.offset:$.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push($.tree),this.start.push(-$.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt($){if($<this.nextStart)return null;for(;this.fragment&&this.safeTo<=$;)this.nextFragment();if(!this.fragment)return null;for(;;){let _e=this.trees.length-1;if(_e<0)return this.nextFragment(),null;let et=this.trees[_e],tt=this.index[_e];if(tt==et.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let nt=et.children[tt],rt=this.start[_e]+et.positions[tt];if(rt>$)return this.nextStart=rt,null;if(nt instanceof Tree$1){if(rt==$){if(rt<this.safeFrom)return null;let it=rt+nt.length;if(it<=this.safeTo){let st=nt.prop(NodeProp.lookAhead);if(!st||it+st<this.fragment.to)return nt}}this.index[_e]++,rt+nt.length>=Math.max(this.safeFrom,$)&&(this.trees.push(nt),this.start.push(rt),this.index.push(0))}else this.index[_e]++,this.nextStart=rt+nt.length}}}class TokenCache{constructor($,_e){this.stream=_e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=$.tokenizers.map(et=>new CachedToken)}getActions($){let _e=0,et=null,{parser:tt}=$.p,{tokenizers:nt}=tt,rt=tt.stateSlot($.state,3),it=$.curContext?$.curContext.hash:0,st=0;for(let ot=0;ot<nt.length;ot++){if(!(1<<ot&rt))continue;let at=nt[ot],lt=this.tokens[ot];if(!(et&&!at.fallback)&&((at.contextual||lt.start!=$.pos||lt.mask!=rt||lt.context!=it)&&(this.updateCachedToken(lt,at,$),lt.mask=rt,lt.context=it),lt.lookAhead>lt.end+25&&(st=Math.max(lt.lookAhead,st)),lt.value!=0)){let ut=_e;if(lt.extended>-1&&(_e=this.addActions($,lt.extended,lt.end,_e)),_e=this.addActions($,lt.value,lt.end,_e),!at.extend&&(et=lt,_e>ut))break}}for(;this.actions.length>_e;)this.actions.pop();return st&&$.setLookAhead(st),!et&&$.pos==this.stream.end&&(et=new CachedToken,et.value=$.p.parser.eofTerm,et.start=et.end=$.pos,_e=this.addActions($,et.value,et.end,_e)),this.mainToken=et,this.actions}getMainToken($){if(this.mainToken)return this.mainToken;let _e=new CachedToken,{pos:et,p:tt}=$;return _e.start=et,_e.end=Math.min(et+1,tt.stream.end),_e.value=et==tt.stream.end?tt.parser.eofTerm:0,_e}updateCachedToken($,_e,et){let tt=this.stream.clipPos(et.pos);if(_e.token(this.stream.reset(tt,$),et),$.value>-1){let{parser:nt}=et.p;for(let rt=0;rt<nt.specialized.length;rt++)if(nt.specialized[rt]==$.value){let it=nt.specializers[rt](this.stream.read($.start,$.end),et);if(it>=0&&et.p.parser.dialect.allows(it>>1)){it&1?$.extended=it>>1:$.value=it>>1;break}}}else $.value=0,$.end=this.stream.clipPos(tt+1)}putAction($,_e,et,tt){for(let nt=0;nt<tt;nt+=3)if(this.actions[nt]==$)return tt;return this.actions[tt++]=$,this.actions[tt++]=_e,this.actions[tt++]=et,tt}addActions($,_e,et,tt){let{state:nt}=$,{parser:rt}=$.p,{data:it}=rt;for(let st=0;st<2;st++)for(let ot=rt.stateSlot(nt,st?2:1);;ot+=3){if(it[ot]==65535)if(it[ot+1]==1)ot=pair(it,ot+2);else{tt==0&&it[ot+1]==2&&(tt=this.putAction(pair(it,ot+2),_e,et,tt));break}it[ot]==_e&&(tt=this.putAction(pair(it,ot+1),_e,et,tt))}return tt}}class Parse{constructor($,_e,et,tt){this.parser=$,this.input=_e,this.ranges=tt,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(_e,tt),this.tokens=new TokenCache($,this.stream),this.topTerm=$.top[1];let{from:nt}=tt[0];this.stacks=[Stack$3.start(this,$.top[0],nt)],this.fragments=et.length&&this.stream.end-nt>$.bufferLength*4?new FragmentCursor(et,$.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let $=this.stacks,_e=this.minStackPos,et=this.stacks=[],tt,nt;if(this.bigReductionCount>300&&$.length==1){let[rt]=$;for(;rt.forceReduce()&&rt.stack.length&&rt.stack[rt.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let rt=0;rt<$.length;rt++){let it=$[rt];for(;;){if(this.tokens.mainToken=null,it.pos>_e)et.push(it);else{if(this.advanceStack(it,et,$))continue;{tt||(tt=[],nt=[]),tt.push(it);let st=this.tokens.getMainToken(it);nt.push(st.value,st.end)}}break}}if(!et.length){let rt=tt&&findFinished(tt);if(rt)return verbose&&console.log("Finish with "+this.stackID(rt)),this.stackToTree(rt);if(this.parser.strict)throw verbose&&tt&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+_e);this.recovering||(this.recovering=5)}if(this.recovering&&tt){let rt=this.stoppedAt!=null&&tt[0].pos>this.stoppedAt?tt[0]:this.runRecovery(tt,nt,et);if(rt)return verbose&&console.log("Force-finish "+this.stackID(rt)),this.stackToTree(rt.forceAll())}if(this.recovering){let rt=this.recovering==1?1:this.recovering*3;if(et.length>rt)for(et.sort((it,st)=>st.score-it.score);et.length>rt;)et.pop();et.some(it=>it.reducePos>_e)&&this.recovering--}else if(et.length>1){e:for(let rt=0;rt<et.length-1;rt++){let it=et[rt];for(let st=rt+1;st<et.length;st++){let ot=et[st];if(it.sameState(ot)||it.buffer.length>500&&ot.buffer.length>500)if((it.score-ot.score||it.buffer.length-ot.buffer.length)>0)et.splice(st--,1);else{et.splice(rt--,1);continue e}}}et.length>12&&et.splice(12,et.length-12)}this.minStackPos=et[0].pos;for(let rt=1;rt<et.length;rt++)et[rt].pos<this.minStackPos&&(this.minStackPos=et[rt].pos);return null}stopAt($){if(this.stoppedAt!=null&&this.stoppedAt<$)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=$}advanceStack($,_e,et){let tt=$.pos,{parser:nt}=this,rt=verbose?this.stackID($)+" -> ":"";if(this.stoppedAt!=null&&tt>this.stoppedAt)return $.forceReduce()?$:null;if(this.fragments){let ot=$.curContext&&$.curContext.tracker.strict,at=ot?$.curContext.hash:0;for(let lt=this.fragments.nodeAt(tt);lt;){let ut=this.parser.nodeSet.types[lt.type.id]==lt.type?nt.getGoto($.state,lt.type.id):-1;if(ut>-1&&lt.length&&(!ot||(lt.prop(NodeProp.contextHash)||0)==at))return $.useNode(lt,ut),verbose&&console.log(rt+this.stackID($)+` (via reuse of ${nt.getName(lt.type.id)})`),!0;if(!(lt instanceof Tree$1)||lt.children.length==0||lt.positions[0]>0)break;let ct=lt.children[0];if(ct instanceof Tree$1&&lt.positions[0]==0)lt=ct;else break}}let it=nt.stateSlot($.state,4);if(it>0)return $.reduce(it),verbose&&console.log(rt+this.stackID($)+` (via always-reduce ${nt.getName(it&65535)})`),!0;if($.stack.length>=8400)for(;$.stack.length>6e3&&$.forceReduce(););let st=this.tokens.getActions($);for(let ot=0;ot<st.length;){let at=st[ot++],lt=st[ot++],ut=st[ot++],ct=ot==st.length||!et,ft=ct?$:$.split(),dt=this.tokens.mainToken;if(ft.apply(at,lt,dt?dt.start:ft.pos,ut),verbose&&console.log(rt+this.stackID(ft)+` (via ${at&65536?`reduce of ${nt.getName(at&65535)}`:"shift"} for ${nt.getName(lt)} @ ${tt}${ft==$?"":", split"})`),ct)return!0;ft.pos>tt?_e.push(ft):et.push(ft)}return!1}advanceFully($,_e){let et=$.pos;for(;;){if(!this.advanceStack($,null,null))return!1;if($.pos>et)return pushStackDedup($,_e),!0}}runRecovery($,_e,et){let tt=null,nt=!1;for(let rt=0;rt<$.length;rt++){let it=$[rt],st=_e[rt<<1],ot=_e[(rt<<1)+1],at=verbose?this.stackID(it)+" -> ":"";if(it.deadEnd&&(nt||(nt=!0,it.restart(),verbose&&console.log(at+this.stackID(it)+" (restarted)"),this.advanceFully(it,et))))continue;let lt=it.split(),ut=at;for(let ct=0;lt.forceReduce()&&ct<10&&(verbose&&console.log(ut+this.stackID(lt)+" (via force-reduce)"),!this.advanceFully(lt,et));ct++)verbose&&(ut=this.stackID(lt)+" -> ");for(let ct of it.recoverByInsert(st))verbose&&console.log(at+this.stackID(ct)+" (via recover-insert)"),this.advanceFully(ct,et);this.stream.end>it.pos?(ot==it.pos&&(ot++,st=0),it.recoverByDelete(st,ot),verbose&&console.log(at+this.stackID(it)+` (via recover-delete ${this.parser.getName(st)})`),pushStackDedup(it,et)):(!tt||tt.score<it.score)&&(tt=it)}return tt}stackToTree($){return $.close(),Tree$1.build({buffer:StackBufferCursor.create($),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:$.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID($){let _e=(stackIDs||(stackIDs=new WeakMap)).get($);return _e||stackIDs.set($,_e=String.fromCodePoint(this.nextStackID++)),_e+$}}function pushStackDedup(j,$){for(let _e=0;_e<$.length;_e++){let et=$[_e];if(et.pos==j.pos&&et.sameState(j)){$[_e].score<j.score&&($[_e]=j);return}}$.push(j)}class Dialect{constructor($,_e,et){this.source=$,this.flags=_e,this.disabled=et}allows($){return!this.disabled||this.disabled[$]==0}}class LRParser extends Parser$1{constructor($){if(super(),this.wrappers=[],$.version!=14)throw new RangeError(`Parser version (${$.version}) doesn't match runtime version (14)`);let _e=$.nodeNames.split(" ");this.minRepeatTerm=_e.length;for(let it=0;it<$.repeatNodeCount;it++)_e.push("");let et=Object.keys($.topRules).map(it=>$.topRules[it][1]),tt=[];for(let it=0;it<_e.length;it++)tt.push([]);function nt(it,st,ot){tt[it].push([st,st.deserialize(String(ot))])}if($.nodeProps)for(let it of $.nodeProps){let st=it[0];typeof st=="string"&&(st=NodeProp[st]);for(let ot=1;ot<it.length;){let at=it[ot++];if(at>=0)nt(at,st,it[ot++]);else{let lt=it[ot+-at];for(let ut=-at;ut>0;ut--)nt(it[ot++],st,lt);ot++}}}this.nodeSet=new NodeSet(_e.map((it,st)=>NodeType.define({name:st>=this.minRepeatTerm?void 0:it,id:st,props:tt[st],top:et.indexOf(st)>-1,error:st==0,skipped:$.skippedNodes&&$.skippedNodes.indexOf(st)>-1}))),$.propSources&&(this.nodeSet=this.nodeSet.extend(...$.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let rt=decodeArray($.tokenData);this.context=$.context,this.specializerSpecs=$.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let it=0;it<this.specializerSpecs.length;it++)this.specialized[it]=this.specializerSpecs[it].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray($.states,Uint32Array),this.data=decodeArray($.stateData),this.goto=decodeArray($.goto),this.maxTerm=$.maxTerm,this.tokenizers=$.tokenizers.map(it=>typeof it=="number"?new TokenGroup(rt,it):it),this.topRules=$.topRules,this.dialects=$.dialects||{},this.dynamicPrecedences=$.dynamicPrecedences||null,this.tokenPrecTable=$.tokenPrec,this.termNames=$.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse($,_e,et){let tt=new Parse(this,$,_e,et);for(let nt of this.wrappers)tt=nt(tt,$,_e,et);return tt}getGoto($,_e,et=!1){let tt=this.goto;if(_e>=tt[0])return-1;for(let nt=tt[_e+1];;){let rt=tt[nt++],it=rt&1,st=tt[nt++];if(it&&et)return st;for(let ot=nt+(rt>>1);nt<ot;nt++)if(tt[nt]==$)return st;if(it)return-1}}hasAction($,_e){let et=this.data;for(let tt=0;tt<2;tt++)for(let nt=this.stateSlot($,tt?2:1),rt;;nt+=3){if((rt=et[nt])==65535)if(et[nt+1]==1)rt=et[nt=pair(et,nt+2)];else{if(et[nt+1]==2)return pair(et,nt+2);break}if(rt==_e||rt==0)return pair(et,nt+1)}return 0}stateSlot($,_e){return this.states[$*6+_e]}stateFlag($,_e){return(this.stateSlot($,0)&_e)>0}validAction($,_e){return!!this.allActions($,et=>et==_e?!0:null)}allActions($,_e){let et=this.stateSlot($,4),tt=et?_e(et):void 0;for(let nt=this.stateSlot($,1);tt==null;nt+=3){if(this.data[nt]==65535)if(this.data[nt+1]==1)nt=pair(this.data,nt+2);else break;tt=_e(pair(this.data,nt+1))}return tt}nextStates($){let _e=[];for(let et=this.stateSlot($,1);;et+=3){if(this.data[et]==65535)if(this.data[et+1]==1)et=pair(this.data,et+2);else break;if(!(this.data[et+2]&1)){let tt=this.data[et+1];_e.some((nt,rt)=>rt&1&&nt==tt)||_e.push(this.data[et],tt)}}return _e}configure($){let _e=Object.assign(Object.create(LRParser.prototype),this);if($.props&&(_e.nodeSet=this.nodeSet.extend(...$.props)),$.top){let et=this.topRules[$.top];if(!et)throw new RangeError(`Invalid top rule name ${$.top}`);_e.top=et}return $.tokenizers&&(_e.tokenizers=this.tokenizers.map(et=>{let tt=$.tokenizers.find(nt=>nt.from==et);return tt?tt.to:et})),$.specializers&&(_e.specializers=this.specializers.slice(),_e.specializerSpecs=this.specializerSpecs.map((et,tt)=>{let nt=$.specializers.find(it=>it.from==et.external);if(!nt)return et;let rt=Object.assign(Object.assign({},et),{external:nt.to});return _e.specializers[tt]=getSpecializer(rt),rt})),$.contextTracker&&(_e.context=$.contextTracker),$.dialect&&(_e.dialect=this.parseDialect($.dialect)),$.strict!=null&&(_e.strict=$.strict),$.wrap&&(_e.wrappers=_e.wrappers.concat($.wrap)),$.bufferLength!=null&&(_e.bufferLength=$.bufferLength),_e}hasWrappers(){return this.wrappers.length>0}getName($){return this.termNames?this.termNames[$]:String($<=this.maxNode&&this.nodeSet.types[$].name||$)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence($){let _e=this.dynamicPrecedences;return _e==null?0:_e[$]||0}parseDialect($){let _e=Object.keys(this.dialects),et=_e.map(()=>!1);if($)for(let nt of $.split(" ")){let rt=_e.indexOf(nt);rt>=0&&(et[rt]=!0)}let tt=null;for(let nt=0;nt<_e.length;nt++)if(!et[nt])for(let rt=this.dialects[_e[nt]],it;(it=this.data[rt++])!=65535;)(tt||(tt=new Uint8Array(this.maxTerm+1)))[it]=1;return new Dialect($,et,tt)}static deserialize($){return new LRParser($)}}function pair(j,$){return j[$]|j[$+1]<<16}function findFinished(j){let $=null;for(let _e of j){let et=_e.p.stoppedAt;(_e.pos==_e.p.stream.end||et!=null&&_e.pos>et)&&_e.p.parser.stateFlag(_e.state,2)&&(!$||$.score<_e.score)&&($=_e)}return $}function getSpecializer(j){if(j.external){let $=j.extend?1:0;return(_e,et)=>j.external(_e,et)<<1|$}return j.get}const parser$3=LRParser.deserialize({version:14,states:"%WQYQPOOO_QQO'#CtOsQQO'#CsOOQO'#Cl'#ClOOQO'#Cf'#CfQYQPOOO!OQPO'#CnOOQO,59X,59XO!WQPO'#ChO!]QQO,59`O!kQPO,59XOOQO'#Cu'#CuO!pQPO,59_OOQO-E6d-E6dO!uQPO'#CpOOQO'#Cg'#CgO!zQPO,59YOOQO,59Y,59YOOQO,59S,59SOOQO-E6f-E6fO#SQPO1G.sO#XQPO'#CtO#gQPO1G.yO#rQPO,59[OOQO-E6e-E6eOOQO1G.t1G.tOOQO7+$_7+$_O#zQPO,59`O$YQPO7+$eOOQO'#Cq'#CqOOQO1G.v1G.vOOQO<<HP<<HP",stateData:"$_~O_OSPOS~ORPO~OSYOUWOcUOVhXWhXXhX~OVZOWZOXZO~OR^OfaO~ORbO~OUWOVhaWhaXha~OTdO~OReO~OSgO~OR^OfiO~OcUO~OUWORhXShX]hX~OSlORgi]gi~ORmOTmO~OUWORhaSha]ha~OToO~O",goto:"!rjPPPPPPPPPPkqwPPP!R!V!ZP!a!eP!V!h!oQTOR]TQ`URh`QXPScXkRkeTSOTTROTQVPRjdT_U`RngSQOTRf[R[Q",nodeNames:" LineComment start Ident : String && -> <- --",maxTerm:25,skippedNodes:[0,1],repeatNodeCount:3,tokenData:"&z~R`XY!TYZ!T]^!Tpq!Trs!fst$Svw$k}!O$v!Q![%u![!]&`!^!_&e!c!}%u#R#S%u#T#o%u#o#p&p#q#r&u~!YS_~XY!TYZ!T]^!Tpq!T~!iVOr!frs#Os#O!f#O#P#T#P;'S!f;'S;=`#|<%lO!f~#TOT~~#WRO;'S!f;'S;=`#a;=`O!f~#dWOr!frs#Os#O!f#O#P#T#P;'S!f;'S;=`#|;=`<%l!f<%lO!f~$PP;=`<%l!f~$XSP~OY$SZ;'S$S;'S;=`$e<%lO$S~$hP;=`<%l$S~$nPvw$q~$vOU~R${URP}!O%_!Q![%u!`!a&Z!c!}%u#R#S%u#T#o%uR%fTXQRP}!O%u!Q![%u!c!}%u#R#S%u#T#o%uP%zTRP}!O%u!Q![%u!c!}%u#R#S%u#T#o%uQ&`OVQ~&eOS~~&hP}!O&k~&pOW~~&uOc~~&zOf~",tokenizers:[0,1],topRules:{start:[0,2]},tokenPrec:0}),TocLangLanguage=LRLanguage.define({parser:parser$3.configure({props:[indentNodeProp.add({Application:delimitedIndent({closing:"}",align:!1})}),foldNodeProp.add({Application:foldInside}),styleTags({Ident:tags.variableName,Boolean:tags.bool,String:tags.string,Label:tags.string,":":tags.punctuation,"->":tags.arithmeticOperator,"--":tags.arithmeticOperator,"<-":tags.arithmeticOperator,LineComment:tags.lineComment,"{ }":tags.brace})]}),languageData:{commentTokens:{line:"#"}}}),TOC_LANG_HIGHLIGHT=syntaxHighlighting(HighlightStyle.define([...defaultHighlightStyle.specs,{tag:tags.punctuation,color:"#99b"},{tag:tags.arithmeticOperator,color:"#686"},{tag:tags.variableName,color:"#55a"},{tag:tags.string,color:"#677",fontStyle:"italic"}],{themeType:"light"}));function TOC_LANG(j){const $=et=>{let tt=et.matchBefore(/\w*/);return tt&&tt.from==tt.to&&!et.explicit?null:{from:(tt==null?void 0:tt.from)||et.pos,options:j.idents.map(nt=>({label:nt,type:"Ident"})),validFor:/^(\w+)?$/}},_e=[TocLangLanguage.data.of({autocomplete:$})];return new LanguageSupport(TocLangLanguage,_e)}const EditorContainer=({onChange:j,placeholder:$="",rows:_e=20,disabled:et=!1,autoFocus:tt=!1,text:nt,setText:rt,error:it,completions:st})=>{React.useEffect(()=>{j(nt)},[nt]);function ot(ft,dt){console.log("here is the current model value:",ft),rt(ft),j(ft)}async function at(){const dt=await(await n$1()).text();rt(dt),j(dt)}async function lt(){await o$1(new Blob([nt],{type:"text/plain"}),{fileName:"document.txt",extensions:[".txt"]})}const ut={conflict:exampleEvaporatingCloudText,goal:exampleGoalTreeText,problem:exampleProblemTreeText};async function ct(ft){ft in ut&&ot(ut[ft])}return React.useEffect(()=>{ct("goal")},[]),jsxRuntimeExports.jsxs("div",{className:"editor",children:[jsxRuntimeExports.jsx(FileControls,{onLoad:at,onSave:lt,onSelectExample:ct}),jsxRuntimeExports.jsx(ReactCodeMirror,{value:nt,height:"80vh",extensions:[TOC_LANG(st),TOC_LANG_HIGHLIGHT],onChange:ot,basicSetup:{autocompletion:!0,completionKeymap:!0}}),jsxRuntimeExports.jsx("p",{className:`edit-result ${it?"error":""}`,children:it})]})},wrapLines=(j,$)=>{const _e=j.split(" "),et=[];let tt="";return _e.forEach((nt,rt)=>{tt.length+nt.length>$&&(et.push(tt),tt=""),tt+=nt+" ",rt===_e.length-1&&et.push(tt)}),et};function computeResizeTransform(j,$,_e,et){const tt=j.getBBox({stroke:!0,fill:!0,markers:!0}),nt=tt.width+_e,rt=tt.height+et;console.log("bounding h w: ",rt,nt);const it=$.clientWidth,st=$.clientHeight;console.log("container h w: ",st,it);const ot=Math.min(100/nt,100/rt);return console.log("zoomScale: ",ot),`scale(${ot},${ot})`}function saveSvgUrl(j){const $=j.outerHTML,_e=`<?xml version="1.0" standalone="no"?>\r
`,et=new Blob([_e,$],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(et)}const intermediatePoint=(j,$,_e)=>{const et=$.x-j.x,tt=$.y-j.y,nt=Math.sqrt(et*et+tt*tt),rt=_e/nt;return{x:j.x+et*rt,y:j.y+tt*rt}};function midPoint(j,$){return{x:(j.x+$.x)/2,y:(j.y+$.y)/2}}const Injection=({text:j,edge:$,dx:_e,dy:et})=>{if(!j)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const tt=wrapLines(j,35),nt=midPoint($.start,$.end),rt=16,it=nt.x+_e,st=it-75,ot=nt.y+et,at=et/Math.abs(et),lt=ot+tt.length*rt+7,ct=at===1?ot:lt,ft=it;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("text",{x:st,y:ot,children:tt.map((dt,mt)=>jsxRuntimeExports.jsx("tspan",{x:st,dy:rt,children:dt},mt))}),jsxRuntimeExports.jsx("line",{x1:ft,y1:ct,x2:nt.x,y2:nt.y,stroke:"#000",strokeDasharray:"4 5",strokeWidth:"2"})]})},CloudEdge=({edge:j})=>jsxRuntimeExports.jsx("line",{x1:j.adjStart.x,y1:j.adjStart.y,x2:j.end.x,y2:j.end.y,stroke:"#000",strokeWidth:"3",markerStart:"url(#startarrow)"}),CloudNode=({text:j,x:$,y:_e,width:et,height:tt,annotation:nt})=>{const rt=wrapLines(j,20),it=16,st=12,ot=rt.length*it,at=_e+tt/2-ot/2-4,lt=$+st;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("rect",{x:$,y:_e,rx:"10",ry:"10",width:et,height:tt}),jsxRuntimeExports.jsx("text",{x:lt,y:at,children:rt.map((ut,ct)=>jsxRuntimeExports.jsx("tspan",{x:lt,dy:it,children:ut},ct))}),jsxRuntimeExports.jsx("circle",{cx:$,cy:_e,r:"10",style:{fill:"white",stroke:"black",strokeWidth:"2px"}}),jsxRuntimeExports.jsx("text",{x:$-4,y:_e+4,children:nt})]})},drawCloud=j=>{const $={A:"",B:"",C:"",D:"","D'":""},_e=new Map;j.statements.filter(kt=>kt.type==="node").forEach(kt=>{$[kt.id]=kt.text}),j.statements.forEach(kt=>{if(kt.type==="edge"){const Pt=kt.fromIds[0],Mt=kt.toId,Lt=Pt<Mt?`${Pt}-${Mt}`:`${Mt}-${Pt}`;_e[Lt]=kt.text}});const et=25,tt=250,nt=500,rt=50,it=300,st=(rt+it)/2,ot=150,at=75,lt={x:et,y:st,w:ot,h:at},ut={x:tt,y:rt,w:ot,h:at},ct={x:tt,y:it,w:ot,h:at},ft={x:nt,y:rt,w:ot,h:at},dt={x:nt,y:it,w:ot,h:at},mt=createEdge(lt,ut),pt=createEdge(lt,ct),yt=createEdge(ut,ft),vt=createEdge(ct,dt),Ct=nodeBottomCenterPont(ft),At=nodeTopCenterPont(dt),$t=midPoint(Ct,At),bt=[displacePoint(Ct,0,16),displacePoint($t,-15,5),displacePoint($t,15,-5),displacePoint(At,0,-16)],Bt={start:bt[0],end:bt[3]},Rt=bt.map(kt=>`${kt.x},${kt.y}`).join(" "),St=`
  svg {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-size: 13px;
  }
  svg text {
    fill: black;
  }
  svg text.annotation {
    font-weight: bold;
  }
  svg rect {
    fill: white;
    stroke: black;
    stroke-width: 2;
  }
  `;return jsxRuntimeExports.jsxs("svg",{id:"cloudSvg",width:"100%",height:"100%",version:"1.1",preserveAspectRatio:"xMinYMin",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("style",{children:St}),jsxRuntimeExports.jsxs("g",{id:"cloudSvgInner",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"1.75",orient:"auto",children:jsxRuntimeExports.jsx("polygon",{points:"0 0, 10 3.5, 0 7",transform:"scale(0.5 0.5)"})}),jsxRuntimeExports.jsx("marker",{id:"startarrow",markerWidth:"10",markerHeight:"7",refX:"5",refY:"1.75",orient:"auto",children:jsxRuntimeExports.jsx("polygon",{points:"10 0, 10 7, 0 3.5",fill:"",transform:"scale(0.5 0.5)"})}),jsxRuntimeExports.jsx("marker",{id:"endarrow",markerWidth:"10",markerHeight:"7",refX:"0",refY:"1.75",orient:"auto",markerUnits:"strokeWidth",children:jsxRuntimeExports.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"",transform:"scale(0.5 0.5)"})})]}),jsxRuntimeExports.jsx(CloudNode,{annotation:"A",text:$.A,x:lt.x,y:lt.y,width:ot,height:at}),jsxRuntimeExports.jsx(CloudNode,{annotation:"B",text:$.B,x:ut.x,y:ut.y,width:ot,height:at}),jsxRuntimeExports.jsx(CloudNode,{annotation:"C",text:$.C,x:ct.x,y:ct.y,width:ot,height:at}),jsxRuntimeExports.jsx(CloudNode,{annotation:"D",text:$.D,x:ft.x,y:ft.y,width:ot,height:at}),jsxRuntimeExports.jsx(CloudNode,{annotation:"D'",text:$["D'"],x:dt.x,y:dt.y,width:ot,height:at}),jsxRuntimeExports.jsx(CloudEdge,{edge:mt}),jsxRuntimeExports.jsx(CloudEdge,{edge:pt}),jsxRuntimeExports.jsx(CloudEdge,{edge:yt}),jsxRuntimeExports.jsx(CloudEdge,{edge:vt}),jsxRuntimeExports.jsx(Injection,{text:_e["A-B"],edge:mt,dx:-100,dy:-125}),jsxRuntimeExports.jsx(Injection,{text:_e["A-C"],edge:pt,dx:-100,dy:125}),jsxRuntimeExports.jsx(Injection,{text:_e["B-D"],edge:yt,dx:0,dy:-75}),jsxRuntimeExports.jsx(Injection,{text:_e["C-D'"],edge:vt,dx:0,dy:75}),jsxRuntimeExports.jsx(Injection,{text:_e["D-D'"],edge:Bt,dx:120,dy:20}),jsxRuntimeExports.jsx("polyline",{points:Rt,markerStart:"url(#startarrow)",markerEnd:"url(#endarrow)",style:{fill:"none",stroke:"black",strokeWidth:3}})]})]})};function createEdge(j,$){const _e={start:{x:j.x+j.w,y:j.y+j.h/2},adjStart:{x:0,y:0},end:{x:$.x,y:$.y+$.h/2}};return _e.adjStart=intermediatePoint(_e.start,_e.end,16),_e}function nodeBottomCenterPont(j){return{x:j.x+j.w/2,y:j.y+j.h}}function nodeTopCenterPont(j){return{x:j.x+j.w/2,y:j.y}}function displacePoint(j,$,_e){return{x:j.x+$,y:j.y+_e}}function Cloud({ast:j,setSvgElem:$}){return j&&React.useEffect(()=>{const _e=document.getElementById("cloudSvgInner"),et=document.getElementById("cloudSvgContainer");_e==null||_e.setAttribute("transform",computeResizeTransform(_e,et,10,0)+", translate(-10, 0)"),$(document.getElementById("cloudSvg"))},[j]),jsxRuntimeExports.jsxs("div",{id:"cloudSvgContainer",style:{width:"100%",height:"500"},children:[j&&drawCloud(j),";"]})}var noop$2={value:()=>{}};function dispatch(){for(var j=0,$=arguments.length,_e={},et;j<$;++j){if(!(et=arguments[j]+"")||et in _e||/[\s.]/.test(et))throw new Error("illegal type: "+et);_e[et]=[]}return new Dispatch(_e)}function Dispatch(j){this._=j}function parseTypenames$1(j,$){return j.trim().split(/^|\s+/).map(function(_e){var et="",tt=_e.indexOf(".");if(tt>=0&&(et=_e.slice(tt+1),_e=_e.slice(0,tt)),_e&&!$.hasOwnProperty(_e))throw new Error("unknown type: "+_e);return{type:_e,name:et}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(j,$){var _e=this._,et=parseTypenames$1(j+"",_e),tt,nt=-1,rt=et.length;if(arguments.length<2){for(;++nt<rt;)if((tt=(j=et[nt]).type)&&(tt=get$2(_e[tt],j.name)))return tt;return}if($!=null&&typeof $!="function")throw new Error("invalid callback: "+$);for(;++nt<rt;)if(tt=(j=et[nt]).type)_e[tt]=set$1(_e[tt],j.name,$);else if($==null)for(tt in _e)_e[tt]=set$1(_e[tt],j.name,null);return this},copy:function(){var j={},$=this._;for(var _e in $)j[_e]=$[_e].slice();return new Dispatch(j)},call:function(j,$){if((tt=arguments.length-2)>0)for(var _e=new Array(tt),et=0,tt,nt;et<tt;++et)_e[et]=arguments[et+2];if(!this._.hasOwnProperty(j))throw new Error("unknown type: "+j);for(nt=this._[j],et=0,tt=nt.length;et<tt;++et)nt[et].value.apply($,_e)},apply:function(j,$,_e){if(!this._.hasOwnProperty(j))throw new Error("unknown type: "+j);for(var et=this._[j],tt=0,nt=et.length;tt<nt;++tt)et[tt].value.apply($,_e)}};function get$2(j,$){for(var _e=0,et=j.length,tt;_e<et;++_e)if((tt=j[_e]).name===$)return tt.value}function set$1(j,$,_e){for(var et=0,tt=j.length;et<tt;++et)if(j[et].name===$){j[et]=noop$2,j=j.slice(0,et).concat(j.slice(et+1));break}return _e!=null&&j.push({name:$,value:_e}),j}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(j){var $=j+="",_e=$.indexOf(":");return _e>=0&&($=j.slice(0,_e))!=="xmlns"&&(j=j.slice(_e+1)),namespaces.hasOwnProperty($)?{space:namespaces[$],local:j}:j}function creatorInherit(j){return function(){var $=this.ownerDocument,_e=this.namespaceURI;return _e===xhtml&&$.documentElement.namespaceURI===xhtml?$.createElement(j):$.createElementNS(_e,j)}}function creatorFixed(j){return function(){return this.ownerDocument.createElementNS(j.space,j.local)}}function creator(j){var $=namespace(j);return($.local?creatorFixed:creatorInherit)($)}function none(){}function selector(j){return j==null?none:function(){return this.querySelector(j)}}function selection_select(j){typeof j!="function"&&(j=selector(j));for(var $=this._groups,_e=$.length,et=new Array(_e),tt=0;tt<_e;++tt)for(var nt=$[tt],rt=nt.length,it=et[tt]=new Array(rt),st,ot,at=0;at<rt;++at)(st=nt[at])&&(ot=j.call(st,st.__data__,at,nt))&&("__data__"in st&&(ot.__data__=st.__data__),it[at]=ot);return new Selection$1(et,this._parents)}function array$1(j){return j==null?[]:Array.isArray(j)?j:Array.from(j)}function empty(){return[]}function selectorAll(j){return j==null?empty:function(){return this.querySelectorAll(j)}}function arrayAll(j){return function(){return array$1(j.apply(this,arguments))}}function selection_selectAll(j){typeof j=="function"?j=arrayAll(j):j=selectorAll(j);for(var $=this._groups,_e=$.length,et=[],tt=[],nt=0;nt<_e;++nt)for(var rt=$[nt],it=rt.length,st,ot=0;ot<it;++ot)(st=rt[ot])&&(et.push(j.call(st,st.__data__,ot,rt)),tt.push(st));return new Selection$1(et,tt)}function matcher(j){return function(){return this.matches(j)}}function childMatcher(j){return function($){return $.matches(j)}}var find$2=Array.prototype.find;function childFind(j){return function(){return find$2.call(this.children,j)}}function childFirst(){return this.firstElementChild}function selection_selectChild(j){return this.select(j==null?childFirst:childFind(typeof j=="function"?j:childMatcher(j)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(j){return function(){return filter$1.call(this.children,j)}}function selection_selectChildren(j){return this.selectAll(j==null?children:childrenFilter(typeof j=="function"?j:childMatcher(j)))}function selection_filter(j){typeof j!="function"&&(j=matcher(j));for(var $=this._groups,_e=$.length,et=new Array(_e),tt=0;tt<_e;++tt)for(var nt=$[tt],rt=nt.length,it=et[tt]=[],st,ot=0;ot<rt;++ot)(st=nt[ot])&&j.call(st,st.__data__,ot,nt)&&it.push(st);return new Selection$1(et,this._parents)}function sparse(j){return new Array(j.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(j,$){this.ownerDocument=j.ownerDocument,this.namespaceURI=j.namespaceURI,this._next=null,this._parent=j,this.__data__=$}EnterNode.prototype={constructor:EnterNode,appendChild:function(j){return this._parent.insertBefore(j,this._next)},insertBefore:function(j,$){return this._parent.insertBefore(j,$)},querySelector:function(j){return this._parent.querySelector(j)},querySelectorAll:function(j){return this._parent.querySelectorAll(j)}};function constant$3(j){return function(){return j}}function bindIndex(j,$,_e,et,tt,nt){for(var rt=0,it,st=$.length,ot=nt.length;rt<ot;++rt)(it=$[rt])?(it.__data__=nt[rt],et[rt]=it):_e[rt]=new EnterNode(j,nt[rt]);for(;rt<st;++rt)(it=$[rt])&&(tt[rt]=it)}function bindKey(j,$,_e,et,tt,nt,rt){var it,st,ot=new Map,at=$.length,lt=nt.length,ut=new Array(at),ct;for(it=0;it<at;++it)(st=$[it])&&(ut[it]=ct=rt.call(st,st.__data__,it,$)+"",ot.has(ct)?tt[it]=st:ot.set(ct,st));for(it=0;it<lt;++it)ct=rt.call(j,nt[it],it,nt)+"",(st=ot.get(ct))?(et[it]=st,st.__data__=nt[it],ot.delete(ct)):_e[it]=new EnterNode(j,nt[it]);for(it=0;it<at;++it)(st=$[it])&&ot.get(ut[it])===st&&(tt[it]=st)}function datum(j){return j.__data__}function selection_data(j,$){if(!arguments.length)return Array.from(this,datum);var _e=$?bindKey:bindIndex,et=this._parents,tt=this._groups;typeof j!="function"&&(j=constant$3(j));for(var nt=tt.length,rt=new Array(nt),it=new Array(nt),st=new Array(nt),ot=0;ot<nt;++ot){var at=et[ot],lt=tt[ot],ut=lt.length,ct=arraylike(j.call(at,at&&at.__data__,ot,et)),ft=ct.length,dt=it[ot]=new Array(ft),mt=rt[ot]=new Array(ft),pt=st[ot]=new Array(ut);_e(at,lt,dt,mt,pt,ct,$);for(var yt=0,vt=0,Ct,At;yt<ft;++yt)if(Ct=dt[yt]){for(yt>=vt&&(vt=yt+1);!(At=mt[vt])&&++vt<ft;);Ct._next=At||null}}return rt=new Selection$1(rt,et),rt._enter=it,rt._exit=st,rt}function arraylike(j){return typeof j=="object"&&"length"in j?j:Array.from(j)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(j,$,_e){var et=this.enter(),tt=this,nt=this.exit();return typeof j=="function"?(et=j(et),et&&(et=et.selection())):et=et.append(j+""),$!=null&&(tt=$(tt),tt&&(tt=tt.selection())),_e==null?nt.remove():_e(nt),et&&tt?et.merge(tt).order():tt}function selection_merge(j){for(var $=j.selection?j.selection():j,_e=this._groups,et=$._groups,tt=_e.length,nt=et.length,rt=Math.min(tt,nt),it=new Array(tt),st=0;st<rt;++st)for(var ot=_e[st],at=et[st],lt=ot.length,ut=it[st]=new Array(lt),ct,ft=0;ft<lt;++ft)(ct=ot[ft]||at[ft])&&(ut[ft]=ct);for(;st<tt;++st)it[st]=_e[st];return new Selection$1(it,this._parents)}function selection_order(){for(var j=this._groups,$=-1,_e=j.length;++$<_e;)for(var et=j[$],tt=et.length-1,nt=et[tt],rt;--tt>=0;)(rt=et[tt])&&(nt&&rt.compareDocumentPosition(nt)^4&&nt.parentNode.insertBefore(rt,nt),nt=rt);return this}function selection_sort(j){j||(j=ascending);function $(lt,ut){return lt&&ut?j(lt.__data__,ut.__data__):!lt-!ut}for(var _e=this._groups,et=_e.length,tt=new Array(et),nt=0;nt<et;++nt){for(var rt=_e[nt],it=rt.length,st=tt[nt]=new Array(it),ot,at=0;at<it;++at)(ot=rt[at])&&(st[at]=ot);st.sort($)}return new Selection$1(tt,this._parents).order()}function ascending(j,$){return j<$?-1:j>$?1:j>=$?0:NaN}function selection_call(){var j=arguments[0];return arguments[0]=this,j.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var j=this._groups,$=0,_e=j.length;$<_e;++$)for(var et=j[$],tt=0,nt=et.length;tt<nt;++tt){var rt=et[tt];if(rt)return rt}return null}function selection_size(){let j=0;for(const $ of this)++j;return j}function selection_empty(){return!this.node()}function selection_each(j){for(var $=this._groups,_e=0,et=$.length;_e<et;++_e)for(var tt=$[_e],nt=0,rt=tt.length,it;nt<rt;++nt)(it=tt[nt])&&j.call(it,it.__data__,nt,tt);return this}function attrRemove$1(j){return function(){this.removeAttribute(j)}}function attrRemoveNS$1(j){return function(){this.removeAttributeNS(j.space,j.local)}}function attrConstant$1(j,$){return function(){this.setAttribute(j,$)}}function attrConstantNS$1(j,$){return function(){this.setAttributeNS(j.space,j.local,$)}}function attrFunction$1(j,$){return function(){var _e=$.apply(this,arguments);_e==null?this.removeAttribute(j):this.setAttribute(j,_e)}}function attrFunctionNS$1(j,$){return function(){var _e=$.apply(this,arguments);_e==null?this.removeAttributeNS(j.space,j.local):this.setAttributeNS(j.space,j.local,_e)}}function selection_attr(j,$){var _e=namespace(j);if(arguments.length<2){var et=this.node();return _e.local?et.getAttributeNS(_e.space,_e.local):et.getAttribute(_e)}return this.each(($==null?_e.local?attrRemoveNS$1:attrRemove$1:typeof $=="function"?_e.local?attrFunctionNS$1:attrFunction$1:_e.local?attrConstantNS$1:attrConstant$1)(_e,$))}function defaultView(j){return j.ownerDocument&&j.ownerDocument.defaultView||j.document&&j||j.defaultView}function styleRemove$1(j){return function(){this.style.removeProperty(j)}}function styleConstant$1(j,$,_e){return function(){this.style.setProperty(j,$,_e)}}function styleFunction$1(j,$,_e){return function(){var et=$.apply(this,arguments);et==null?this.style.removeProperty(j):this.style.setProperty(j,et,_e)}}function selection_style(j,$,_e){return arguments.length>1?this.each(($==null?styleRemove$1:typeof $=="function"?styleFunction$1:styleConstant$1)(j,$,_e??"")):styleValue(this.node(),j)}function styleValue(j,$){return j.style.getPropertyValue($)||defaultView(j).getComputedStyle(j,null).getPropertyValue($)}function propertyRemove(j){return function(){delete this[j]}}function propertyConstant(j,$){return function(){this[j]=$}}function propertyFunction(j,$){return function(){var _e=$.apply(this,arguments);_e==null?delete this[j]:this[j]=_e}}function selection_property(j,$){return arguments.length>1?this.each(($==null?propertyRemove:typeof $=="function"?propertyFunction:propertyConstant)(j,$)):this.node()[j]}function classArray(j){return j.trim().split(/^|\s+/)}function classList(j){return j.classList||new ClassList(j)}function ClassList(j){this._node=j,this._names=classArray(j.getAttribute("class")||"")}ClassList.prototype={add:function(j){var $=this._names.indexOf(j);$<0&&(this._names.push(j),this._node.setAttribute("class",this._names.join(" ")))},remove:function(j){var $=this._names.indexOf(j);$>=0&&(this._names.splice($,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(j){return this._names.indexOf(j)>=0}};function classedAdd(j,$){for(var _e=classList(j),et=-1,tt=$.length;++et<tt;)_e.add($[et])}function classedRemove(j,$){for(var _e=classList(j),et=-1,tt=$.length;++et<tt;)_e.remove($[et])}function classedTrue(j){return function(){classedAdd(this,j)}}function classedFalse(j){return function(){classedRemove(this,j)}}function classedFunction(j,$){return function(){($.apply(this,arguments)?classedAdd:classedRemove)(this,j)}}function selection_classed(j,$){var _e=classArray(j+"");if(arguments.length<2){for(var et=classList(this.node()),tt=-1,nt=_e.length;++tt<nt;)if(!et.contains(_e[tt]))return!1;return!0}return this.each((typeof $=="function"?classedFunction:$?classedTrue:classedFalse)(_e,$))}function textRemove(){this.textContent=""}function textConstant$1(j){return function(){this.textContent=j}}function textFunction$1(j){return function(){var $=j.apply(this,arguments);this.textContent=$??""}}function selection_text(j){return arguments.length?this.each(j==null?textRemove:(typeof j=="function"?textFunction$1:textConstant$1)(j)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(j){return function(){this.innerHTML=j}}function htmlFunction(j){return function(){var $=j.apply(this,arguments);this.innerHTML=$??""}}function selection_html(j){return arguments.length?this.each(j==null?htmlRemove:(typeof j=="function"?htmlFunction:htmlConstant)(j)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(j){var $=typeof j=="function"?j:creator(j);return this.select(function(){return this.appendChild($.apply(this,arguments))})}function constantNull(){return null}function selection_insert(j,$){var _e=typeof j=="function"?j:creator(j),et=$==null?constantNull:typeof $=="function"?$:selector($);return this.select(function(){return this.insertBefore(_e.apply(this,arguments),et.apply(this,arguments)||null)})}function remove(){var j=this.parentNode;j&&j.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var j=this.cloneNode(!1),$=this.parentNode;return $?$.insertBefore(j,this.nextSibling):j}function selection_cloneDeep(){var j=this.cloneNode(!0),$=this.parentNode;return $?$.insertBefore(j,this.nextSibling):j}function selection_clone(j){return this.select(j?selection_cloneDeep:selection_cloneShallow)}function selection_datum(j){return arguments.length?this.property("__data__",j):this.node().__data__}function contextListener(j){return function($){j.call(this,$,this.__data__)}}function parseTypenames(j){return j.trim().split(/^|\s+/).map(function($){var _e="",et=$.indexOf(".");return et>=0&&(_e=$.slice(et+1),$=$.slice(0,et)),{type:$,name:_e}})}function onRemove(j){return function(){var $=this.__on;if($){for(var _e=0,et=-1,tt=$.length,nt;_e<tt;++_e)nt=$[_e],(!j.type||nt.type===j.type)&&nt.name===j.name?this.removeEventListener(nt.type,nt.listener,nt.options):$[++et]=nt;++et?$.length=et:delete this.__on}}}function onAdd(j,$,_e){return function(){var et=this.__on,tt,nt=contextListener($);if(et){for(var rt=0,it=et.length;rt<it;++rt)if((tt=et[rt]).type===j.type&&tt.name===j.name){this.removeEventListener(tt.type,tt.listener,tt.options),this.addEventListener(tt.type,tt.listener=nt,tt.options=_e),tt.value=$;return}}this.addEventListener(j.type,nt,_e),tt={type:j.type,name:j.name,value:$,listener:nt,options:_e},et?et.push(tt):this.__on=[tt]}}function selection_on(j,$,_e){var et=parseTypenames(j+""),tt,nt=et.length,rt;if(arguments.length<2){var it=this.node().__on;if(it){for(var st=0,ot=it.length,at;st<ot;++st)for(tt=0,at=it[st];tt<nt;++tt)if((rt=et[tt]).type===at.type&&rt.name===at.name)return at.value}return}for(it=$?onAdd:onRemove,tt=0;tt<nt;++tt)this.each(it(et[tt],$,_e));return this}function dispatchEvent(j,$,_e){var et=defaultView(j),tt=et.CustomEvent;typeof tt=="function"?tt=new tt($,_e):(tt=et.document.createEvent("Event"),_e?(tt.initEvent($,_e.bubbles,_e.cancelable),tt.detail=_e.detail):tt.initEvent($,!1,!1)),j.dispatchEvent(tt)}function dispatchConstant(j,$){return function(){return dispatchEvent(this,j,$)}}function dispatchFunction(j,$){return function(){return dispatchEvent(this,j,$.apply(this,arguments))}}function selection_dispatch(j,$){return this.each((typeof $=="function"?dispatchFunction:dispatchConstant)(j,$))}function*selection_iterator(){for(var j=this._groups,$=0,_e=j.length;$<_e;++$)for(var et=j[$],tt=0,nt=et.length,rt;tt<nt;++tt)(rt=et[tt])&&(yield rt)}var root$3=[null];function Selection$1(j,$){this._groups=j,this._parents=$}function selection(){return new Selection$1([[document.documentElement]],root$3)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(j){return typeof j=="string"?new Selection$1([[document.querySelector(j)]],[document.documentElement]):new Selection$1([[j]],root$3)}function define(j,$,_e){j.prototype=$.prototype=_e,_e.constructor=j}function extend(j,$){var _e=Object.create(j.prototype);for(var et in $)_e[et]=$[et];return _e}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(j){return Object.assign(new this.constructor,this,j)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(j){var $,_e;return j=(j+"").trim().toLowerCase(),($=reHex.exec(j))?(_e=$[1].length,$=parseInt($[1],16),_e===6?rgbn($):_e===3?new Rgb($>>8&15|$>>4&240,$>>4&15|$&240,($&15)<<4|$&15,1):_e===8?rgba($>>24&255,$>>16&255,$>>8&255,($&255)/255):_e===4?rgba($>>12&15|$>>8&240,$>>8&15|$>>4&240,$>>4&15|$&240,(($&15)<<4|$&15)/255):null):($=reRgbInteger.exec(j))?new Rgb($[1],$[2],$[3],1):($=reRgbPercent.exec(j))?new Rgb($[1]*255/100,$[2]*255/100,$[3]*255/100,1):($=reRgbaInteger.exec(j))?rgba($[1],$[2],$[3],$[4]):($=reRgbaPercent.exec(j))?rgba($[1]*255/100,$[2]*255/100,$[3]*255/100,$[4]):($=reHslPercent.exec(j))?hsla($[1],$[2]/100,$[3]/100,1):($=reHslaPercent.exec(j))?hsla($[1],$[2]/100,$[3]/100,$[4]):named.hasOwnProperty(j)?rgbn(named[j]):j==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(j){return new Rgb(j>>16&255,j>>8&255,j&255,1)}function rgba(j,$,_e,et){return et<=0&&(j=$=_e=NaN),new Rgb(j,$,_e,et)}function rgbConvert(j){return j instanceof Color||(j=color(j)),j?(j=j.rgb(),new Rgb(j.r,j.g,j.b,j.opacity)):new Rgb}function rgb(j,$,_e,et){return arguments.length===1?rgbConvert(j):new Rgb(j,$,_e,et??1)}function Rgb(j,$,_e,et){this.r=+j,this.g=+$,this.b=+_e,this.opacity=+et}define(Rgb,rgb,extend(Color,{brighter(j){return j=j==null?brighter:Math.pow(brighter,j),new Rgb(this.r*j,this.g*j,this.b*j,this.opacity)},darker(j){return j=j==null?darker:Math.pow(darker,j),new Rgb(this.r*j,this.g*j,this.b*j,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const j=clampa(this.opacity);return`${j===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${j===1?")":`, ${j})`}`}function clampa(j){return isNaN(j)?1:Math.max(0,Math.min(1,j))}function clampi(j){return Math.max(0,Math.min(255,Math.round(j)||0))}function hex$1(j){return j=clampi(j),(j<16?"0":"")+j.toString(16)}function hsla(j,$,_e,et){return et<=0?j=$=_e=NaN:_e<=0||_e>=1?j=$=NaN:$<=0&&(j=NaN),new Hsl(j,$,_e,et)}function hslConvert(j){if(j instanceof Hsl)return new Hsl(j.h,j.s,j.l,j.opacity);if(j instanceof Color||(j=color(j)),!j)return new Hsl;if(j instanceof Hsl)return j;j=j.rgb();var $=j.r/255,_e=j.g/255,et=j.b/255,tt=Math.min($,_e,et),nt=Math.max($,_e,et),rt=NaN,it=nt-tt,st=(nt+tt)/2;return it?($===nt?rt=(_e-et)/it+(_e<et)*6:_e===nt?rt=(et-$)/it+2:rt=($-_e)/it+4,it/=st<.5?nt+tt:2-nt-tt,rt*=60):it=st>0&&st<1?0:rt,new Hsl(rt,it,st,j.opacity)}function hsl(j,$,_e,et){return arguments.length===1?hslConvert(j):new Hsl(j,$,_e,et??1)}function Hsl(j,$,_e,et){this.h=+j,this.s=+$,this.l=+_e,this.opacity=+et}define(Hsl,hsl,extend(Color,{brighter(j){return j=j==null?brighter:Math.pow(brighter,j),new Hsl(this.h,this.s,this.l*j,this.opacity)},darker(j){return j=j==null?darker:Math.pow(darker,j),new Hsl(this.h,this.s,this.l*j,this.opacity)},rgb(){var j=this.h%360+(this.h<0)*360,$=isNaN(j)||isNaN(this.s)?0:this.s,_e=this.l,et=_e+(_e<.5?_e:1-_e)*$,tt=2*_e-et;return new Rgb(hsl2rgb(j>=240?j-240:j+120,tt,et),hsl2rgb(j,tt,et),hsl2rgb(j<120?j+240:j-120,tt,et),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const j=clampa(this.opacity);return`${j===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${j===1?")":`, ${j})`}`}}));function clamph(j){return j=(j||0)%360,j<0?j+360:j}function clampt(j){return Math.max(0,Math.min(1,j||0))}function hsl2rgb(j,$,_e){return(j<60?$+(_e-$)*j/60:j<180?_e:j<240?$+(_e-$)*(240-j)/60:$)*255}const constant$2=j=>()=>j;function linear(j,$){return function(_e){return j+_e*$}}function exponential(j,$,_e){return j=Math.pow(j,_e),$=Math.pow($,_e)-j,_e=1/_e,function(et){return Math.pow(j+et*$,_e)}}function gamma(j){return(j=+j)==1?nogamma:function($,_e){return _e-$?exponential($,_e,j):constant$2(isNaN($)?_e:$)}}function nogamma(j,$){var _e=$-j;return _e?linear(j,_e):constant$2(isNaN(j)?$:j)}const interpolateRgb=function j($){var _e=gamma($);function et(tt,nt){var rt=_e((tt=rgb(tt)).r,(nt=rgb(nt)).r),it=_e(tt.g,nt.g),st=_e(tt.b,nt.b),ot=nogamma(tt.opacity,nt.opacity);return function(at){return tt.r=rt(at),tt.g=it(at),tt.b=st(at),tt.opacity=ot(at),tt+""}}return et.gamma=j,et}(1);function interpolateNumber(j,$){return j=+j,$=+$,function(_e){return j*(1-_e)+$*_e}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(j){return function(){return j}}function one(j){return function($){return j($)+""}}function interpolateString(j,$){var _e=reA.lastIndex=reB.lastIndex=0,et,tt,nt,rt=-1,it=[],st=[];for(j=j+"",$=$+"";(et=reA.exec(j))&&(tt=reB.exec($));)(nt=tt.index)>_e&&(nt=$.slice(_e,nt),it[rt]?it[rt]+=nt:it[++rt]=nt),(et=et[0])===(tt=tt[0])?it[rt]?it[rt]+=tt:it[++rt]=tt:(it[++rt]=null,st.push({i:rt,x:interpolateNumber(et,tt)})),_e=reB.lastIndex;return _e<$.length&&(nt=$.slice(_e),it[rt]?it[rt]+=nt:it[++rt]=nt),it.length<2?st[0]?one(st[0].x):zero($):($=st.length,function(ot){for(var at=0,lt;at<$;++at)it[(lt=st[at]).i]=lt.x(ot);return it.join("")})}var degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(j,$,_e,et,tt,nt){var rt,it,st;return(rt=Math.sqrt(j*j+$*$))&&(j/=rt,$/=rt),(st=j*_e+$*et)&&(_e-=j*st,et-=$*st),(it=Math.sqrt(_e*_e+et*et))&&(_e/=it,et/=it,st/=it),j*et<$*_e&&(j=-j,$=-$,st=-st,rt=-rt),{translateX:tt,translateY:nt,rotate:Math.atan2($,j)*degrees,skewX:Math.atan(st)*degrees,scaleX:rt,scaleY:it}}var svgNode;function parseCss(j){const $=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(j+"");return $.isIdentity?identity$2:decompose($.a,$.b,$.c,$.d,$.e,$.f)}function parseSvg(j){return j==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",j),!(j=svgNode.transform.baseVal.consolidate()))?identity$2:(j=j.matrix,decompose(j.a,j.b,j.c,j.d,j.e,j.f))}function interpolateTransform(j,$,_e,et){function tt(ot){return ot.length?ot.pop()+" ":""}function nt(ot,at,lt,ut,ct,ft){if(ot!==lt||at!==ut){var dt=ct.push("translate(",null,$,null,_e);ft.push({i:dt-4,x:interpolateNumber(ot,lt)},{i:dt-2,x:interpolateNumber(at,ut)})}else(lt||ut)&&ct.push("translate("+lt+$+ut+_e)}function rt(ot,at,lt,ut){ot!==at?(ot-at>180?at+=360:at-ot>180&&(ot+=360),ut.push({i:lt.push(tt(lt)+"rotate(",null,et)-2,x:interpolateNumber(ot,at)})):at&&lt.push(tt(lt)+"rotate("+at+et)}function it(ot,at,lt,ut){ot!==at?ut.push({i:lt.push(tt(lt)+"skewX(",null,et)-2,x:interpolateNumber(ot,at)}):at&&lt.push(tt(lt)+"skewX("+at+et)}function st(ot,at,lt,ut,ct,ft){if(ot!==lt||at!==ut){var dt=ct.push(tt(ct)+"scale(",null,",",null,")");ft.push({i:dt-4,x:interpolateNumber(ot,lt)},{i:dt-2,x:interpolateNumber(at,ut)})}else(lt!==1||ut!==1)&&ct.push(tt(ct)+"scale("+lt+","+ut+")")}return function(ot,at){var lt=[],ut=[];return ot=j(ot),at=j(at),nt(ot.translateX,ot.translateY,at.translateX,at.translateY,lt,ut),rt(ot.rotate,at.rotate,lt,ut),it(ot.skewX,at.skewX,lt,ut),st(ot.scaleX,ot.scaleY,at.scaleX,at.scaleY,lt,ut),ot=at=null,function(ct){for(var ft=-1,dt=ut.length,mt;++ft<dt;)lt[(mt=ut[ft]).i]=mt.x(ct);return lt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(j){setTimeout(j,17)};function now$3(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(j,$,_e){if(typeof j!="function")throw new TypeError("callback is not a function");_e=(_e==null?now$3():+_e)+($==null?0:+$),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=j,this._time=_e,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(j,$,_e){var et=new Timer;return et.restart(j,$,_e),et}function timerFlush(){now$3(),++frame;for(var j=taskHead,$;j;)($=clockNow-j._time)>=0&&j._call.call(void 0,$),j=j._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var j=clock.now(),$=j-clockLast;$>pokeDelay&&(clockSkew-=$,clockLast=j)}function nap(){for(var j,$=taskHead,_e,et=1/0;$;)$._call?(et>$._time&&(et=$._time),j=$,$=$._next):(_e=$._next,$._next=null,$=j?j._next=_e:taskHead=_e);taskTail=j,sleep(et)}function sleep(j){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var $=j-clockNow;$>24?(j<1/0&&(timeout$1=setTimeout(wake,j-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(j,$,_e){var et=new Timer;return $=$==null?0:+$,et.restart(tt=>{et.stop(),j(tt+$)},$,_e),et}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(j,$,_e,et,tt,nt){var rt=j.__transition;if(!rt)j.__transition={};else if(_e in rt)return;create(j,_e,{name:$,index:et,group:tt,on:emptyOn,tween:emptyTween,time:nt.time,delay:nt.delay,duration:nt.duration,ease:nt.ease,timer:null,state:CREATED})}function init(j,$){var _e=get$1(j,$);if(_e.state>CREATED)throw new Error("too late; already scheduled");return _e}function set(j,$){var _e=get$1(j,$);if(_e.state>STARTED)throw new Error("too late; already running");return _e}function get$1(j,$){var _e=j.__transition;if(!_e||!(_e=_e[$]))throw new Error("transition not found");return _e}function create(j,$,_e){var et=j.__transition,tt;et[$]=_e,_e.timer=timer(nt,0,_e.time);function nt(ot){_e.state=SCHEDULED,_e.timer.restart(rt,_e.delay,_e.time),_e.delay<=ot&&rt(ot-_e.delay)}function rt(ot){var at,lt,ut,ct;if(_e.state!==SCHEDULED)return st();for(at in et)if(ct=et[at],ct.name===_e.name){if(ct.state===STARTED)return timeout(rt);ct.state===RUNNING?(ct.state=ENDED,ct.timer.stop(),ct.on.call("interrupt",j,j.__data__,ct.index,ct.group),delete et[at]):+at<$&&(ct.state=ENDED,ct.timer.stop(),ct.on.call("cancel",j,j.__data__,ct.index,ct.group),delete et[at])}if(timeout(function(){_e.state===STARTED&&(_e.state=RUNNING,_e.timer.restart(it,_e.delay,_e.time),it(ot))}),_e.state=STARTING,_e.on.call("start",j,j.__data__,_e.index,_e.group),_e.state===STARTING){for(_e.state=STARTED,tt=new Array(ut=_e.tween.length),at=0,lt=-1;at<ut;++at)(ct=_e.tween[at].value.call(j,j.__data__,_e.index,_e.group))&&(tt[++lt]=ct);tt.length=lt+1}}function it(ot){for(var at=ot<_e.duration?_e.ease.call(null,ot/_e.duration):(_e.timer.restart(st),_e.state=ENDING,1),lt=-1,ut=tt.length;++lt<ut;)tt[lt].call(j,at);_e.state===ENDING&&(_e.on.call("end",j,j.__data__,_e.index,_e.group),st())}function st(){_e.state=ENDED,_e.timer.stop(),delete et[$];for(var ot in et)return;delete j.__transition}}function interrupt(j,$){var _e=j.__transition,et,tt,nt=!0,rt;if(_e){$=$==null?null:$+"";for(rt in _e){if((et=_e[rt]).name!==$){nt=!1;continue}tt=et.state>STARTING&&et.state<ENDING,et.state=ENDED,et.timer.stop(),et.on.call(tt?"interrupt":"cancel",j,j.__data__,et.index,et.group),delete _e[rt]}nt&&delete j.__transition}}function selection_interrupt(j){return this.each(function(){interrupt(this,j)})}function tweenRemove(j,$){var _e,et;return function(){var tt=set(this,j),nt=tt.tween;if(nt!==_e){et=_e=nt;for(var rt=0,it=et.length;rt<it;++rt)if(et[rt].name===$){et=et.slice(),et.splice(rt,1);break}}tt.tween=et}}function tweenFunction(j,$,_e){var et,tt;if(typeof _e!="function")throw new Error;return function(){var nt=set(this,j),rt=nt.tween;if(rt!==et){tt=(et=rt).slice();for(var it={name:$,value:_e},st=0,ot=tt.length;st<ot;++st)if(tt[st].name===$){tt[st]=it;break}st===ot&&tt.push(it)}nt.tween=tt}}function transition_tween(j,$){var _e=this._id;if(j+="",arguments.length<2){for(var et=get$1(this.node(),_e).tween,tt=0,nt=et.length,rt;tt<nt;++tt)if((rt=et[tt]).name===j)return rt.value;return null}return this.each(($==null?tweenRemove:tweenFunction)(_e,j,$))}function tweenValue(j,$,_e){var et=j._id;return j.each(function(){var tt=set(this,et);(tt.value||(tt.value={}))[$]=_e.apply(this,arguments)}),function(tt){return get$1(tt,et).value[$]}}function interpolate(j,$){var _e;return(typeof $=="number"?interpolateNumber:$ instanceof color?interpolateRgb:(_e=color($))?($=_e,interpolateRgb):interpolateString)(j,$)}function attrRemove(j){return function(){this.removeAttribute(j)}}function attrRemoveNS(j){return function(){this.removeAttributeNS(j.space,j.local)}}function attrConstant(j,$,_e){var et,tt=_e+"",nt;return function(){var rt=this.getAttribute(j);return rt===tt?null:rt===et?nt:nt=$(et=rt,_e)}}function attrConstantNS(j,$,_e){var et,tt=_e+"",nt;return function(){var rt=this.getAttributeNS(j.space,j.local);return rt===tt?null:rt===et?nt:nt=$(et=rt,_e)}}function attrFunction(j,$,_e){var et,tt,nt;return function(){var rt,it=_e(this),st;return it==null?void this.removeAttribute(j):(rt=this.getAttribute(j),st=it+"",rt===st?null:rt===et&&st===tt?nt:(tt=st,nt=$(et=rt,it)))}}function attrFunctionNS(j,$,_e){var et,tt,nt;return function(){var rt,it=_e(this),st;return it==null?void this.removeAttributeNS(j.space,j.local):(rt=this.getAttributeNS(j.space,j.local),st=it+"",rt===st?null:rt===et&&st===tt?nt:(tt=st,nt=$(et=rt,it)))}}function transition_attr(j,$){var _e=namespace(j),et=_e==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(j,typeof $=="function"?(_e.local?attrFunctionNS:attrFunction)(_e,et,tweenValue(this,"attr."+j,$)):$==null?(_e.local?attrRemoveNS:attrRemove)(_e):(_e.local?attrConstantNS:attrConstant)(_e,et,$))}function attrInterpolate(j,$){return function(_e){this.setAttribute(j,$.call(this,_e))}}function attrInterpolateNS(j,$){return function(_e){this.setAttributeNS(j.space,j.local,$.call(this,_e))}}function attrTweenNS(j,$){var _e,et;function tt(){var nt=$.apply(this,arguments);return nt!==et&&(_e=(et=nt)&&attrInterpolateNS(j,nt)),_e}return tt._value=$,tt}function attrTween(j,$){var _e,et;function tt(){var nt=$.apply(this,arguments);return nt!==et&&(_e=(et=nt)&&attrInterpolate(j,nt)),_e}return tt._value=$,tt}function transition_attrTween(j,$){var _e="attr."+j;if(arguments.length<2)return(_e=this.tween(_e))&&_e._value;if($==null)return this.tween(_e,null);if(typeof $!="function")throw new Error;var et=namespace(j);return this.tween(_e,(et.local?attrTweenNS:attrTween)(et,$))}function delayFunction(j,$){return function(){init(this,j).delay=+$.apply(this,arguments)}}function delayConstant(j,$){return $=+$,function(){init(this,j).delay=$}}function transition_delay(j){var $=this._id;return arguments.length?this.each((typeof j=="function"?delayFunction:delayConstant)($,j)):get$1(this.node(),$).delay}function durationFunction(j,$){return function(){set(this,j).duration=+$.apply(this,arguments)}}function durationConstant(j,$){return $=+$,function(){set(this,j).duration=$}}function transition_duration(j){var $=this._id;return arguments.length?this.each((typeof j=="function"?durationFunction:durationConstant)($,j)):get$1(this.node(),$).duration}function easeConstant(j,$){if(typeof $!="function")throw new Error;return function(){set(this,j).ease=$}}function transition_ease(j){var $=this._id;return arguments.length?this.each(easeConstant($,j)):get$1(this.node(),$).ease}function easeVarying(j,$){return function(){var _e=$.apply(this,arguments);if(typeof _e!="function")throw new Error;set(this,j).ease=_e}}function transition_easeVarying(j){if(typeof j!="function")throw new Error;return this.each(easeVarying(this._id,j))}function transition_filter(j){typeof j!="function"&&(j=matcher(j));for(var $=this._groups,_e=$.length,et=new Array(_e),tt=0;tt<_e;++tt)for(var nt=$[tt],rt=nt.length,it=et[tt]=[],st,ot=0;ot<rt;++ot)(st=nt[ot])&&j.call(st,st.__data__,ot,nt)&&it.push(st);return new Transition(et,this._parents,this._name,this._id)}function transition_merge(j){if(j._id!==this._id)throw new Error;for(var $=this._groups,_e=j._groups,et=$.length,tt=_e.length,nt=Math.min(et,tt),rt=new Array(et),it=0;it<nt;++it)for(var st=$[it],ot=_e[it],at=st.length,lt=rt[it]=new Array(at),ut,ct=0;ct<at;++ct)(ut=st[ct]||ot[ct])&&(lt[ct]=ut);for(;it<et;++it)rt[it]=$[it];return new Transition(rt,this._parents,this._name,this._id)}function start(j){return(j+"").trim().split(/^|\s+/).every(function($){var _e=$.indexOf(".");return _e>=0&&($=$.slice(0,_e)),!$||$==="start"})}function onFunction(j,$,_e){var et,tt,nt=start($)?init:set;return function(){var rt=nt(this,j),it=rt.on;it!==et&&(tt=(et=it).copy()).on($,_e),rt.on=tt}}function transition_on(j,$){var _e=this._id;return arguments.length<2?get$1(this.node(),_e).on.on(j):this.each(onFunction(_e,j,$))}function removeFunction(j){return function(){var $=this.parentNode;for(var _e in this.__transition)if(+_e!==j)return;$&&$.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(j){var $=this._name,_e=this._id;typeof j!="function"&&(j=selector(j));for(var et=this._groups,tt=et.length,nt=new Array(tt),rt=0;rt<tt;++rt)for(var it=et[rt],st=it.length,ot=nt[rt]=new Array(st),at,lt,ut=0;ut<st;++ut)(at=it[ut])&&(lt=j.call(at,at.__data__,ut,it))&&("__data__"in at&&(lt.__data__=at.__data__),ot[ut]=lt,schedule(ot[ut],$,_e,ut,ot,get$1(at,_e)));return new Transition(nt,this._parents,$,_e)}function transition_selectAll(j){var $=this._name,_e=this._id;typeof j!="function"&&(j=selectorAll(j));for(var et=this._groups,tt=et.length,nt=[],rt=[],it=0;it<tt;++it)for(var st=et[it],ot=st.length,at,lt=0;lt<ot;++lt)if(at=st[lt]){for(var ut=j.call(at,at.__data__,lt,st),ct,ft=get$1(at,_e),dt=0,mt=ut.length;dt<mt;++dt)(ct=ut[dt])&&schedule(ct,$,_e,dt,ut,ft);nt.push(ut),rt.push(at)}return new Transition(nt,rt,$,_e)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(j,$){var _e,et,tt;return function(){var nt=styleValue(this,j),rt=(this.style.removeProperty(j),styleValue(this,j));return nt===rt?null:nt===_e&&rt===et?tt:tt=$(_e=nt,et=rt)}}function styleRemove(j){return function(){this.style.removeProperty(j)}}function styleConstant(j,$,_e){var et,tt=_e+"",nt;return function(){var rt=styleValue(this,j);return rt===tt?null:rt===et?nt:nt=$(et=rt,_e)}}function styleFunction(j,$,_e){var et,tt,nt;return function(){var rt=styleValue(this,j),it=_e(this),st=it+"";return it==null&&(st=it=(this.style.removeProperty(j),styleValue(this,j))),rt===st?null:rt===et&&st===tt?nt:(tt=st,nt=$(et=rt,it))}}function styleMaybeRemove(j,$){var _e,et,tt,nt="style."+$,rt="end."+nt,it;return function(){var st=set(this,j),ot=st.on,at=st.value[nt]==null?it||(it=styleRemove($)):void 0;(ot!==_e||tt!==at)&&(et=(_e=ot).copy()).on(rt,tt=at),st.on=et}}function transition_style(j,$,_e){var et=(j+="")=="transform"?interpolateTransformCss:interpolate;return $==null?this.styleTween(j,styleNull(j,et)).on("end.style."+j,styleRemove(j)):typeof $=="function"?this.styleTween(j,styleFunction(j,et,tweenValue(this,"style."+j,$))).each(styleMaybeRemove(this._id,j)):this.styleTween(j,styleConstant(j,et,$),_e).on("end.style."+j,null)}function styleInterpolate(j,$,_e){return function(et){this.style.setProperty(j,$.call(this,et),_e)}}function styleTween(j,$,_e){var et,tt;function nt(){var rt=$.apply(this,arguments);return rt!==tt&&(et=(tt=rt)&&styleInterpolate(j,rt,_e)),et}return nt._value=$,nt}function transition_styleTween(j,$,_e){var et="style."+(j+="");if(arguments.length<2)return(et=this.tween(et))&&et._value;if($==null)return this.tween(et,null);if(typeof $!="function")throw new Error;return this.tween(et,styleTween(j,$,_e??""))}function textConstant(j){return function(){this.textContent=j}}function textFunction(j){return function(){var $=j(this);this.textContent=$??""}}function transition_text(j){return this.tween("text",typeof j=="function"?textFunction(tweenValue(this,"text",j)):textConstant(j==null?"":j+""))}function textInterpolate(j){return function($){this.textContent=j.call(this,$)}}function textTween(j){var $,_e;function et(){var tt=j.apply(this,arguments);return tt!==_e&&($=(_e=tt)&&textInterpolate(tt)),$}return et._value=j,et}function transition_textTween(j){var $="text";if(arguments.length<1)return($=this.tween($))&&$._value;if(j==null)return this.tween($,null);if(typeof j!="function")throw new Error;return this.tween($,textTween(j))}function transition_transition(){for(var j=this._name,$=this._id,_e=newId(),et=this._groups,tt=et.length,nt=0;nt<tt;++nt)for(var rt=et[nt],it=rt.length,st,ot=0;ot<it;++ot)if(st=rt[ot]){var at=get$1(st,$);schedule(st,j,_e,ot,rt,{time:at.time+at.delay+at.duration,delay:0,duration:at.duration,ease:at.ease})}return new Transition(et,this._parents,j,_e)}function transition_end(){var j,$,_e=this,et=_e._id,tt=_e.size();return new Promise(function(nt,rt){var it={value:rt},st={value:function(){--tt===0&&nt()}};_e.each(function(){var ot=set(this,et),at=ot.on;at!==j&&($=(j=at).copy(),$._.cancel.push(it),$._.interrupt.push(it),$._.end.push(st)),ot.on=$}),tt===0&&nt()})}var id$1=0;function Transition(j,$,_e,et){this._groups=j,this._parents=$,this._name=_e,this._id=et}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(j){return((j*=2)<=1?j*j*j:(j-=2)*j*j+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(j,$){for(var _e;!(_e=j.__transition)||!(_e=_e[$]);)if(!(j=j.parentNode))throw new Error(`transition ${$} not found`);return _e}function selection_transition(j){var $,_e;j instanceof Transition?($=j._id,j=j._name):($=newId(),(_e=defaultTiming).time=now$3(),j=j==null?null:j+"");for(var et=this._groups,tt=et.length,nt=0;nt<tt;++nt)for(var rt=et[nt],it=rt.length,st,ot=0;ot<it;++ot)(st=rt[ot])&&schedule(st,j,$,ot,rt,_e||inherit(st,$));return new Transition(et,this._parents,j,$)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(j){this._+=j[0];for(let $=1,_e=j.length;$<_e;++$)this._+=arguments[$]+j[$]}function appendRound(j){let $=Math.floor(j);if(!($>=0))throw new Error(`invalid digits: ${j}`);if($>15)return append;const _e=10**$;return function(et){this._+=et[0];for(let tt=1,nt=et.length;tt<nt;++tt)this._+=Math.round(arguments[tt]*_e)/_e+et[tt]}}class Path{constructor($){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=$==null?append:appendRound($)}moveTo($,_e){this._append`M${this._x0=this._x1=+$},${this._y0=this._y1=+_e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo($,_e){this._append`L${this._x1=+$},${this._y1=+_e}`}quadraticCurveTo($,_e,et,tt){this._append`Q${+$},${+_e},${this._x1=+et},${this._y1=+tt}`}bezierCurveTo($,_e,et,tt,nt,rt){this._append`C${+$},${+_e},${+et},${+tt},${this._x1=+nt},${this._y1=+rt}`}arcTo($,_e,et,tt,nt){if($=+$,_e=+_e,et=+et,tt=+tt,nt=+nt,nt<0)throw new Error(`negative radius: ${nt}`);let rt=this._x1,it=this._y1,st=et-$,ot=tt-_e,at=rt-$,lt=it-_e,ut=at*at+lt*lt;if(this._x1===null)this._append`M${this._x1=$},${this._y1=_e}`;else if(ut>epsilon)if(!(Math.abs(lt*st-ot*at)>epsilon)||!nt)this._append`L${this._x1=$},${this._y1=_e}`;else{let ct=et-rt,ft=tt-it,dt=st*st+ot*ot,mt=ct*ct+ft*ft,pt=Math.sqrt(dt),yt=Math.sqrt(ut),vt=nt*Math.tan((pi-Math.acos((dt+ut-mt)/(2*pt*yt)))/2),Ct=vt/yt,At=vt/pt;Math.abs(Ct-1)>epsilon&&this._append`L${$+Ct*at},${_e+Ct*lt}`,this._append`A${nt},${nt},0,0,${+(lt*ct>at*ft)},${this._x1=$+At*st},${this._y1=_e+At*ot}`}}arc($,_e,et,tt,nt,rt){if($=+$,_e=+_e,et=+et,rt=!!rt,et<0)throw new Error(`negative radius: ${et}`);let it=et*Math.cos(tt),st=et*Math.sin(tt),ot=$+it,at=_e+st,lt=1^rt,ut=rt?tt-nt:nt-tt;this._x1===null?this._append`M${ot},${at}`:(Math.abs(this._x1-ot)>epsilon||Math.abs(this._y1-at)>epsilon)&&this._append`L${ot},${at}`,et&&(ut<0&&(ut=ut%tau+tau),ut>tauEpsilon?this._append`A${et},${et},0,1,${lt},${$-it},${_e-st}A${et},${et},0,1,${lt},${this._x1=ot},${this._y1=at}`:ut>epsilon&&this._append`A${et},${et},0,${+(ut>=pi)},${lt},${this._x1=$+et*Math.cos(nt)},${this._y1=_e+et*Math.sin(nt)}`)}rect($,_e,et,tt){this._append`M${this._x0=this._x1=+$},${this._y0=this._y1=+_e}h${et=+et}v${+tt}h${-et}Z`}toString(){return this._}}function responseText(j){if(!j.ok)throw new Error(j.status+" "+j.statusText);return j.text()}function text(j,$){return fetch(j,$).then(responseText)}function parser$2(j){return($,_e)=>text($,_e).then(et=>new DOMParser().parseFromString(et,j))}var svg=parser$2("image/svg+xml");function constant$1(j){return function(){return j}}function withPath(j){let $=3;return j.digits=function(_e){if(!arguments.length)return $;if(_e==null)$=null;else{const et=Math.floor(_e);if(!(et>=0))throw new RangeError(`invalid digits: ${_e}`);$=et}return j},()=>new Path($)}function array(j){return typeof j=="object"&&"length"in j?j:Array.from(j)}function Linear(j){this._context=j}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(j,$){switch(j=+j,$=+$,this._point){case 0:this._point=1,this._line?this._context.lineTo(j,$):this._context.moveTo(j,$);break;case 1:this._point=2;default:this._context.lineTo(j,$);break}}};function curveLinear(j){return new Linear(j)}function x$1(j){return j[0]}function y$2(j){return j[1]}function line(j,$){var _e=constant$1(!0),et=null,tt=curveLinear,nt=null,rt=withPath(it);j=typeof j=="function"?j:j===void 0?x$1:constant$1(j),$=typeof $=="function"?$:$===void 0?y$2:constant$1($);function it(st){var ot,at=(st=array(st)).length,lt,ut=!1,ct;for(et==null&&(nt=tt(ct=rt())),ot=0;ot<=at;++ot)!(ot<at&&_e(lt=st[ot],ot,st))===ut&&((ut=!ut)?nt.lineStart():nt.lineEnd()),ut&&nt.point(+j(lt,ot,st),+$(lt,ot,st));if(ct)return nt=null,ct+""||null}return it.x=function(st){return arguments.length?(j=typeof st=="function"?st:constant$1(+st),it):j},it.y=function(st){return arguments.length?($=typeof st=="function"?st:constant$1(+st),it):$},it.defined=function(st){return arguments.length?(_e=typeof st=="function"?st:constant$1(!!st),it):_e},it.curve=function(st){return arguments.length?(tt=st,et!=null&&(nt=tt(et)),it):tt},it.context=function(st){return arguments.length?(st==null?et=nt=null:nt=tt(et=st),it):et},it}function point(j,$,_e){j._context.bezierCurveTo((2*j._x0+j._x1)/3,(2*j._y0+j._y1)/3,(j._x0+2*j._x1)/3,(j._y0+2*j._y1)/3,(j._x0+4*j._x1+$)/6,(j._y0+4*j._y1+_e)/6)}function Basis(j){this._context=j}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(j,$){switch(j=+j,$=+$,this._point){case 0:this._point=1,this._line?this._context.lineTo(j,$):this._context.moveTo(j,$);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,j,$);break}this._x0=this._x1,this._x1=j,this._y0=this._y1,this._y1=$}};function basis(j){return new Basis(j)}function Transform$1(j,$,_e){this.k=j,this.x=$,this.y=_e}Transform$1.prototype={constructor:Transform$1,scale:function(j){return j===1?this:new Transform$1(this.k*j,this.x,this.y)},translate:function(j,$){return j===0&$===0?this:new Transform$1(this.k,this.x+this.k*j,this.y+this.k*$)},apply:function(j){return[j[0]*this.k+this.x,j[1]*this.k+this.y]},applyX:function(j){return j*this.k+this.x},applyY:function(j){return j*this.k+this.y},invert:function(j){return[(j[0]-this.x)/this.k,(j[1]-this.y)/this.k]},invertX:function(j){return(j-this.x)/this.k},invertY:function(j){return(j-this.y)/this.k},rescaleX:function(j){return j.copy().domain(j.range().map(this.invertX,this).map(j.invert,j))},rescaleY:function(j){return j.copy().domain(j.range().map(this.invertY,this).map(j.invert,j))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform$1.prototype;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf||Function("return this")();const root$2=root$1;var Symbol$1=root$2.Symbol;const Symbol$2=Symbol$1;var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(j){var $=hasOwnProperty$f.call(j,symToStringTag$1),_e=j[symToStringTag$1];try{j[symToStringTag$1]=void 0;var et=!0}catch{}var tt=nativeObjectToString$1.call(j);return et&&($?j[symToStringTag$1]=_e:delete j[symToStringTag$1]),tt}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString(j){return nativeObjectToString.call(j)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(j){return j==null?j===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(j)?getRawTag(j):objectToString(j)}function isObjectLike(j){return j!=null&&typeof j=="object"}var symbolTag$3="[object Symbol]";function isSymbol(j){return typeof j=="symbol"||isObjectLike(j)&&baseGetTag(j)==symbolTag$3}function arrayMap(j,$){for(var _e=-1,et=j==null?0:j.length,tt=Array(et);++_e<et;)tt[_e]=$(j[_e],_e,j);return tt}var isArray=Array.isArray;const isArray$1=isArray;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(j){if(typeof j=="string")return j;if(isArray$1(j))return arrayMap(j,baseToString)+"";if(isSymbol(j))return symbolToString?symbolToString.call(j):"";var $=j+"";return $=="0"&&1/j==-INFINITY$3?"-0":$}var reWhitespace=/\s/;function trimmedEndIndex(j){for(var $=j.length;$--&&reWhitespace.test(j.charAt($)););return $}var reTrimStart=/^\s+/;function baseTrim(j){return j&&j.slice(0,trimmedEndIndex(j)+1).replace(reTrimStart,"")}function isObject(j){var $=typeof j;return j!=null&&($=="object"||$=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(j){if(typeof j=="number")return j;if(isSymbol(j))return NAN;if(isObject(j)){var $=typeof j.valueOf=="function"?j.valueOf():j;j=isObject($)?$+"":$}if(typeof j!="string")return j===0?j:+j;j=baseTrim(j);var _e=reIsBinary.test(j);return _e||reIsOctal.test(j)?freeParseInt(j.slice(2),_e?2:8):reIsBadHex.test(j)?NAN:+j}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(j){if(!j)return j===0?j:0;if(j=toNumber(j),j===INFINITY$2||j===-INFINITY$2){var $=j<0?-1:1;return $*MAX_INTEGER}return j===j?j:0}function toInteger(j){var $=toFinite(j),_e=$%1;return $===$?_e?$-_e:$:0}function identity$1(j){return j}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(j){if(!isObject(j))return!1;var $=baseGetTag(j);return $==funcTag$2||$==genTag$1||$==asyncTag||$==proxyTag}var coreJsData=root$2["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var j=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}();function isMasked(j){return!!maskSrcKey&&maskSrcKey in j}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(j){if(j!=null){try{return funcToString$2.call(j)}catch{}try{return j+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(j){if(!isObject(j)||isMasked(j))return!1;var $=isFunction(j)?reIsNative:reIsHostCtor;return $.test(toSource(j))}function getValue(j,$){return j==null?void 0:j[$]}function getNative(j,$){var _e=getValue(j,$);return baseIsNative(_e)?_e:void 0}var WeakMap$1=getNative(root$2,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function j(){}return function($){if(!isObject($))return{};if(objectCreate)return objectCreate($);j.prototype=$;var _e=new j;return j.prototype=void 0,_e}}();const baseCreate$1=baseCreate;function apply(j,$,_e){switch(_e.length){case 0:return j.call($);case 1:return j.call($,_e[0]);case 2:return j.call($,_e[0],_e[1]);case 3:return j.call($,_e[0],_e[1],_e[2])}return j.apply($,_e)}function noop$1(){}function copyArray(j,$){var _e=-1,et=j.length;for($||($=Array(et));++_e<et;)$[_e]=j[_e];return $}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(j){var $=0,_e=0;return function(){var et=nativeNow(),tt=HOT_SPAN-(et-_e);if(_e=et,tt>0){if(++$>=HOT_COUNT)return arguments[0]}else $=0;return j.apply(void 0,arguments)}}function constant(j){return function(){return j}}var defineProperty=function(){try{var j=getNative(Object,"defineProperty");return j({},"",{}),j}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(j,$){return defineProperty$1(j,"toString",{configurable:!0,enumerable:!1,value:constant($),writable:!0})}:identity$1;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(j,$){for(var _e=-1,et=j==null?0:j.length;++_e<et&&$(j[_e],_e,j)!==!1;);return j}function baseFindIndex(j,$,_e,et){for(var tt=j.length,nt=_e+(et?1:-1);et?nt--:++nt<tt;)if($(j[nt],nt,j))return nt;return-1}function baseIsNaN(j){return j!==j}function strictIndexOf(j,$,_e){for(var et=_e-1,tt=j.length;++et<tt;)if(j[et]===$)return et;return-1}function baseIndexOf(j,$,_e){return $===$?strictIndexOf(j,$,_e):baseFindIndex(j,baseIsNaN,_e)}function arrayIncludes(j,$){var _e=j==null?0:j.length;return!!_e&&baseIndexOf(j,$,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(j,$){var _e=typeof j;return $=$??MAX_SAFE_INTEGER$1,!!$&&(_e=="number"||_e!="symbol"&&reIsUint.test(j))&&j>-1&&j%1==0&&j<$}function baseAssignValue(j,$,_e){$=="__proto__"&&defineProperty$1?defineProperty$1(j,$,{configurable:!0,enumerable:!0,value:_e,writable:!0}):j[$]=_e}function eq(j,$){return j===$||j!==j&&$!==$}var objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function assignValue(j,$,_e){var et=j[$];(!(hasOwnProperty$d.call(j,$)&&eq(et,_e))||_e===void 0&&!($ in j))&&baseAssignValue(j,$,_e)}function copyObject(j,$,_e,et){var tt=!_e;_e||(_e={});for(var nt=-1,rt=$.length;++nt<rt;){var it=$[nt],st=et?et(_e[it],j[it],it,_e,j):void 0;st===void 0&&(st=j[it]),tt?baseAssignValue(_e,it,st):assignValue(_e,it,st)}return _e}var nativeMax$2=Math.max;function overRest(j,$,_e){return $=nativeMax$2($===void 0?j.length-1:$,0),function(){for(var et=arguments,tt=-1,nt=nativeMax$2(et.length-$,0),rt=Array(nt);++tt<nt;)rt[tt]=et[$+tt];tt=-1;for(var it=Array($+1);++tt<$;)it[tt]=et[tt];return it[$]=_e(rt),apply(j,this,it)}}function baseRest(j,$){return setToString$1(overRest(j,$,identity$1),j+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=MAX_SAFE_INTEGER}function isArrayLike(j){return j!=null&&isLength(j.length)&&!isFunction(j)}function isIterateeCall(j,$,_e){if(!isObject(_e))return!1;var et=typeof $;return(et=="number"?isArrayLike(_e)&&isIndex($,_e.length):et=="string"&&$ in _e)?eq(_e[$],j):!1}function createAssigner(j){return baseRest(function($,_e){var et=-1,tt=_e.length,nt=tt>1?_e[tt-1]:void 0,rt=tt>2?_e[2]:void 0;for(nt=j.length>3&&typeof nt=="function"?(tt--,nt):void 0,rt&&isIterateeCall(_e[0],_e[1],rt)&&(nt=tt<3?void 0:nt,tt=1),$=Object($);++et<tt;){var it=_e[et];it&&j($,it,et,nt)}return $})}var objectProto$e=Object.prototype;function isPrototype(j){var $=j&&j.constructor,_e=typeof $=="function"&&$.prototype||objectProto$e;return j===_e}function baseTimes(j,$){for(var _e=-1,et=Array(j);++_e<j;)et[_e]=$(_e);return et}var argsTag$3="[object Arguments]";function baseIsArguments(j){return isObjectLike(j)&&baseGetTag(j)==argsTag$3}var objectProto$d=Object.prototype,hasOwnProperty$c=objectProto$d.hasOwnProperty,propertyIsEnumerable$1=objectProto$d.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(j){return isObjectLike(j)&&hasOwnProperty$c.call(j,"callee")&&!propertyIsEnumerable$1.call(j,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$2.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(j){return isObjectLike(j)&&isLength(j.length)&&!!typedArrayTags[baseGetTag(j)]}function baseUnary(j){return function($){return j($)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var j=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return j||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function arrayLikeKeys(j,$){var _e=isArray$1(j),et=!_e&&isArguments$1(j),tt=!_e&&!et&&isBuffer$1(j),nt=!_e&&!et&&!tt&&isTypedArray$1(j),rt=_e||et||tt||nt,it=rt?baseTimes(j.length,String):[],st=it.length;for(var ot in j)($||hasOwnProperty$b.call(j,ot))&&!(rt&&(ot=="length"||tt&&(ot=="offset"||ot=="parent")||nt&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||isIndex(ot,st)))&&it.push(ot);return it}function overArg(j,$){return function(_e){return j($(_e))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function baseKeys(j){if(!isPrototype(j))return nativeKeys$1(j);var $=[];for(var _e in Object(j))hasOwnProperty$a.call(j,_e)&&_e!="constructor"&&$.push(_e);return $}function keys(j){return isArrayLike(j)?arrayLikeKeys(j):baseKeys(j)}function nativeKeysIn(j){var $=[];if(j!=null)for(var _e in Object(j))$.push(_e);return $}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function baseKeysIn(j){if(!isObject(j))return nativeKeysIn(j);var $=isPrototype(j),_e=[];for(var et in j)et=="constructor"&&($||!hasOwnProperty$9.call(j,et))||_e.push(et);return _e}function keysIn(j){return isArrayLike(j)?arrayLikeKeys(j,!0):baseKeysIn(j)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(j,$){if(isArray$1(j))return!1;var _e=typeof j;return _e=="number"||_e=="symbol"||_e=="boolean"||j==null||isSymbol(j)?!0:reIsPlainProp.test(j)||!reIsDeepProp.test(j)||$!=null&&j in Object($)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(j){var $=this.has(j)&&delete this.__data__[j];return this.size-=$?1:0,$}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet(j){var $=this.__data__;if(nativeCreate$1){var _e=$[j];return _e===HASH_UNDEFINED$2?void 0:_e}return hasOwnProperty$8.call($,j)?$[j]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas(j){var $=this.__data__;return nativeCreate$1?$[j]!==void 0:hasOwnProperty$7.call($,j)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(j,$){var _e=this.__data__;return this.size+=this.has(j)?0:1,_e[j]=nativeCreate$1&&$===void 0?HASH_UNDEFINED$1:$,this}function Hash(j){var $=-1,_e=j==null?0:j.length;for(this.clear();++$<_e;){var et=j[$];this.set(et[0],et[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(j,$){for(var _e=j.length;_e--;)if(eq(j[_e][0],$))return _e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(j){var $=this.__data__,_e=assocIndexOf($,j);if(_e<0)return!1;var et=$.length-1;return _e==et?$.pop():splice.call($,_e,1),--this.size,!0}function listCacheGet(j){var $=this.__data__,_e=assocIndexOf($,j);return _e<0?void 0:$[_e][1]}function listCacheHas(j){return assocIndexOf(this.__data__,j)>-1}function listCacheSet(j,$){var _e=this.__data__,et=assocIndexOf(_e,j);return et<0?(++this.size,_e.push([j,$])):_e[et][1]=$,this}function ListCache(j){var $=-1,_e=j==null?0:j.length;for(this.clear();++$<_e;){var et=j[$];this.set(et[0],et[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$2,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(j){var $=typeof j;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?j!=="__proto__":j===null}function getMapData(j,$){var _e=j.__data__;return isKeyable($)?_e[typeof $=="string"?"string":"hash"]:_e.map}function mapCacheDelete(j){var $=getMapData(this,j).delete(j);return this.size-=$?1:0,$}function mapCacheGet(j){return getMapData(this,j).get(j)}function mapCacheHas(j){return getMapData(this,j).has(j)}function mapCacheSet(j,$){var _e=getMapData(this,j),et=_e.size;return _e.set(j,$),this.size+=_e.size==et?0:1,this}function MapCache(j){var $=-1,_e=j==null?0:j.length;for(this.clear();++$<_e;){var et=j[$];this.set(et[0],et[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(j,$){if(typeof j!="function"||$!=null&&typeof $!="function")throw new TypeError(FUNC_ERROR_TEXT);var _e=function(){var et=arguments,tt=$?$.apply(this,et):et[0],nt=_e.cache;if(nt.has(tt))return nt.get(tt);var rt=j.apply(this,et);return _e.cache=nt.set(tt,rt)||nt,rt};return _e.cache=new(memoize.Cache||MapCache),_e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(j){var $=memoize(j,function(et){return _e.size===MAX_MEMOIZE_SIZE&&_e.clear(),et}),_e=$.cache;return $}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(j){var $=[];return j.charCodeAt(0)===46&&$.push(""),j.replace(rePropName,function(_e,et,tt,nt){$.push(tt?nt.replace(reEscapeChar,"$1"):et||_e)}),$});const stringToPath$1=stringToPath;function toString(j){return j==null?"":baseToString(j)}function castPath(j,$){return isArray$1(j)?j:isKey(j,$)?[j]:stringToPath$1(toString(j))}var INFINITY$1=1/0;function toKey(j){if(typeof j=="string"||isSymbol(j))return j;var $=j+"";return $=="0"&&1/j==-INFINITY$1?"-0":$}function baseGet(j,$){$=castPath($,j);for(var _e=0,et=$.length;j!=null&&_e<et;)j=j[toKey($[_e++])];return _e&&_e==et?j:void 0}function get(j,$,_e){var et=j==null?void 0:baseGet(j,$);return et===void 0?_e:et}function arrayPush(j,$){for(var _e=-1,et=$.length,tt=j.length;++_e<et;)j[tt+_e]=$[_e];return j}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(j){return isArray$1(j)||isArguments$1(j)||!!(spreadableSymbol&&j&&j[spreadableSymbol])}function baseFlatten(j,$,_e,et,tt){var nt=-1,rt=j.length;for(_e||(_e=isFlattenable),tt||(tt=[]);++nt<rt;){var it=j[nt];$>0&&_e(it)?$>1?baseFlatten(it,$-1,_e,et,tt):arrayPush(tt,it):et||(tt[tt.length]=it)}return tt}function flatten(j){var $=j==null?0:j.length;return $?baseFlatten(j,1):[]}function flatRest(j){return setToString$1(overRest(j,void 0,flatten),j+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(j){if(!isObjectLike(j)||baseGetTag(j)!=objectTag$3)return!1;var $=getPrototype$1(j);if($===null)return!0;var _e=hasOwnProperty$6.call($,"constructor")&&$.constructor;return typeof _e=="function"&&_e instanceof _e&&funcToString.call(_e)==objectCtorString}function arrayReduce(j,$,_e,et){var tt=-1,nt=j==null?0:j.length;for(et&&nt&&(_e=j[++tt]);++tt<nt;)_e=$(_e,j[tt],tt,j);return _e}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(j){var $=this.__data__,_e=$.delete(j);return this.size=$.size,_e}function stackGet(j){return this.__data__.get(j)}function stackHas(j){return this.__data__.has(j)}var LARGE_ARRAY_SIZE$1=200;function stackSet(j,$){var _e=this.__data__;if(_e instanceof ListCache){var et=_e.__data__;if(!Map$2||et.length<LARGE_ARRAY_SIZE$1-1)return et.push([j,$]),this.size=++_e.size,this;_e=this.__data__=new MapCache(et)}return _e.set(j,$),this.size=_e.size,this}function Stack$2(j){var $=this.__data__=new ListCache(j);this.size=$.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;function baseAssign(j,$){return j&&copyObject($,keys($),j)}function baseAssignIn(j,$){return j&&copyObject($,keysIn($),j)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$2.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer(j,$){if($)return j.slice();var _e=j.length,et=allocUnsafe?allocUnsafe(_e):new j.constructor(_e);return j.copy(et),et}function arrayFilter(j,$){for(var _e=-1,et=j==null?0:j.length,tt=0,nt=[];++_e<et;){var rt=j[_e];$(rt,_e,j)&&(nt[tt++]=rt)}return nt}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(j){return j==null?[]:(j=Object(j),arrayFilter(nativeGetSymbols$1(j),function($){return propertyIsEnumerable.call(j,$)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(j,$){return copyObject(j,getSymbols$1(j),$)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(j){for(var $=[];j;)arrayPush($,getSymbols$1(j)),j=getPrototype$1(j);return $}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(j,$){return copyObject(j,getSymbolsIn$1(j),$)}function baseGetAllKeys(j,$,_e){var et=$(j);return isArray$1(j)?et:arrayPush(et,_e(j))}function getAllKeys(j){return baseGetAllKeys(j,keys,getSymbols$1)}function getAllKeysIn(j){return baseGetAllKeys(j,keysIn,getSymbolsIn$1)}var DataView=getNative(root$2,"DataView");const DataView$1=DataView;var Promise$1=getNative(root$2,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$2,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(j){var $=baseGetTag(j),_e=$==objectTag$2?j.constructor:void 0,et=_e?toSource(_e):"";if(et)switch(et){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return $});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function initCloneArray(j){var $=j.length,_e=new j.constructor($);return $&&typeof j[0]=="string"&&hasOwnProperty$5.call(j,"index")&&(_e.index=j.index,_e.input=j.input),_e}var Uint8Array$1=root$2.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(j){var $=new j.constructor(j.byteLength);return new Uint8Array$2($).set(new Uint8Array$2(j)),$}function cloneDataView(j,$){var _e=$?cloneArrayBuffer(j.buffer):j.buffer;return new j.constructor(_e,j.byteOffset,j.byteLength)}var reFlags=/\w*$/;function cloneRegExp(j){var $=new j.constructor(j.source,reFlags.exec(j));return $.lastIndex=j.lastIndex,$}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(j){return symbolValueOf$1?Object(symbolValueOf$1.call(j)):{}}function cloneTypedArray(j,$){var _e=$?cloneArrayBuffer(j.buffer):j.buffer;return new j.constructor(_e,j.byteOffset,j.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(j,$,_e){var et=j.constructor;switch($){case arrayBufferTag$2:return cloneArrayBuffer(j);case boolTag$2:case dateTag$2:return new et(+j);case dataViewTag$2:return cloneDataView(j,_e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(j,_e);case mapTag$4:return new et;case numberTag$2:case stringTag$2:return new et(j);case regexpTag$2:return cloneRegExp(j);case setTag$4:return new et;case symbolTag$2:return cloneSymbol(j)}}function initCloneObject(j){return typeof j.constructor=="function"&&!isPrototype(j)?baseCreate$1(getPrototype$1(j)):{}}var mapTag$3="[object Map]";function baseIsMap(j){return isObjectLike(j)&&getTag$1(j)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(j){return isObjectLike(j)&&getTag$1(j)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(j,$,_e,et,tt,nt){var rt,it=$&CLONE_DEEP_FLAG$1,st=$&CLONE_FLAT_FLAG,ot=$&CLONE_SYMBOLS_FLAG$1;if(_e&&(rt=tt?_e(j,et,tt,nt):_e(j)),rt!==void 0)return rt;if(!isObject(j))return j;var at=isArray$1(j);if(at){if(rt=initCloneArray(j),!it)return copyArray(j,rt)}else{var lt=getTag$1(j),ut=lt==funcTag||lt==genTag;if(isBuffer$1(j))return cloneBuffer(j,it);if(lt==objectTag$1||lt==argsTag$1||ut&&!tt){if(rt=st||ut?{}:initCloneObject(j),!it)return st?copySymbolsIn(j,baseAssignIn(rt,j)):copySymbols(j,baseAssign(rt,j))}else{if(!cloneableTags[lt])return tt?j:{};rt=initCloneByTag(j,lt,it)}}nt||(nt=new Stack$2);var ct=nt.get(j);if(ct)return ct;nt.set(j,rt),isSet$1(j)?j.forEach(function(mt){rt.add(baseClone(mt,$,_e,mt,j,nt))}):isMap$1(j)&&j.forEach(function(mt,pt){rt.set(pt,baseClone(mt,$,_e,pt,j,nt))});var ft=ot?st?getAllKeysIn:getAllKeys:st?keysIn:keys,dt=at?void 0:ft(j);return arrayEach(dt||j,function(mt,pt){dt&&(pt=mt,mt=j[pt]),assignValue(rt,pt,baseClone(mt,$,_e,pt,j,nt))}),rt}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(j){return baseClone(j,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(j){return this.__data__.set(j,HASH_UNDEFINED),this}function setCacheHas(j){return this.__data__.has(j)}function SetCache(j){var $=-1,_e=j==null?0:j.length;for(this.__data__=new MapCache;++$<_e;)this.add(j[$])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(j,$){for(var _e=-1,et=j==null?0:j.length;++_e<et;)if($(j[_e],_e,j))return!0;return!1}function cacheHas(j,$){return j.has($)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(j,$,_e,et,tt,nt){var rt=_e&COMPARE_PARTIAL_FLAG$5,it=j.length,st=$.length;if(it!=st&&!(rt&&st>it))return!1;var ot=nt.get(j),at=nt.get($);if(ot&&at)return ot==$&&at==j;var lt=-1,ut=!0,ct=_e&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(nt.set(j,$),nt.set($,j);++lt<it;){var ft=j[lt],dt=$[lt];if(et)var mt=rt?et(dt,ft,lt,$,j,nt):et(ft,dt,lt,j,$,nt);if(mt!==void 0){if(mt)continue;ut=!1;break}if(ct){if(!arraySome($,function(pt,yt){if(!cacheHas(ct,yt)&&(ft===pt||tt(ft,pt,_e,et,nt)))return ct.push(yt)})){ut=!1;break}}else if(!(ft===dt||tt(ft,dt,_e,et,nt))){ut=!1;break}}return nt.delete(j),nt.delete($),ut}function mapToArray(j){var $=-1,_e=Array(j.size);return j.forEach(function(et,tt){_e[++$]=[tt,et]}),_e}function setToArray(j){var $=-1,_e=Array(j.size);return j.forEach(function(et){_e[++$]=et}),_e}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(j,$,_e,et,tt,nt,rt){switch(_e){case dataViewTag:if(j.byteLength!=$.byteLength||j.byteOffset!=$.byteOffset)return!1;j=j.buffer,$=$.buffer;case arrayBufferTag:return!(j.byteLength!=$.byteLength||!nt(new Uint8Array$2(j),new Uint8Array$2($)));case boolTag:case dateTag:case numberTag:return eq(+j,+$);case errorTag:return j.name==$.name&&j.message==$.message;case regexpTag:case stringTag:return j==$+"";case mapTag$1:var it=mapToArray;case setTag$1:var st=et&COMPARE_PARTIAL_FLAG$4;if(it||(it=setToArray),j.size!=$.size&&!st)return!1;var ot=rt.get(j);if(ot)return ot==$;et|=COMPARE_UNORDERED_FLAG$2,rt.set(j,$);var at=equalArrays(it(j),it($),et,tt,nt,rt);return rt.delete(j),at;case symbolTag:if(symbolValueOf)return symbolValueOf.call(j)==symbolValueOf.call($)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects(j,$,_e,et,tt,nt){var rt=_e&COMPARE_PARTIAL_FLAG$3,it=getAllKeys(j),st=it.length,ot=getAllKeys($),at=ot.length;if(st!=at&&!rt)return!1;for(var lt=st;lt--;){var ut=it[lt];if(!(rt?ut in $:hasOwnProperty$4.call($,ut)))return!1}var ct=nt.get(j),ft=nt.get($);if(ct&&ft)return ct==$&&ft==j;var dt=!0;nt.set(j,$),nt.set($,j);for(var mt=rt;++lt<st;){ut=it[lt];var pt=j[ut],yt=$[ut];if(et)var vt=rt?et(yt,pt,ut,$,j,nt):et(pt,yt,ut,j,$,nt);if(!(vt===void 0?pt===yt||tt(pt,yt,_e,et,nt):vt)){dt=!1;break}mt||(mt=ut=="constructor")}if(dt&&!mt){var Ct=j.constructor,At=$.constructor;Ct!=At&&"constructor"in j&&"constructor"in $&&!(typeof Ct=="function"&&Ct instanceof Ct&&typeof At=="function"&&At instanceof At)&&(dt=!1)}return nt.delete(j),nt.delete($),dt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep(j,$,_e,et,tt,nt){var rt=isArray$1(j),it=isArray$1($),st=rt?arrayTag:getTag$1(j),ot=it?arrayTag:getTag$1($);st=st==argsTag?objectTag:st,ot=ot==argsTag?objectTag:ot;var at=st==objectTag,lt=ot==objectTag,ut=st==ot;if(ut&&isBuffer$1(j)){if(!isBuffer$1($))return!1;rt=!0,at=!1}if(ut&&!at)return nt||(nt=new Stack$2),rt||isTypedArray$1(j)?equalArrays(j,$,_e,et,tt,nt):equalByTag(j,$,st,_e,et,tt,nt);if(!(_e&COMPARE_PARTIAL_FLAG$2)){var ct=at&&hasOwnProperty$3.call(j,"__wrapped__"),ft=lt&&hasOwnProperty$3.call($,"__wrapped__");if(ct||ft){var dt=ct?j.value():j,mt=ft?$.value():$;return nt||(nt=new Stack$2),tt(dt,mt,_e,et,nt)}}return ut?(nt||(nt=new Stack$2),equalObjects(j,$,_e,et,tt,nt)):!1}function baseIsEqual(j,$,_e,et,tt){return j===$?!0:j==null||$==null||!isObjectLike(j)&&!isObjectLike($)?j!==j&&$!==$:baseIsEqualDeep(j,$,_e,et,baseIsEqual,tt)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(j,$,_e,et){var tt=_e.length,nt=tt,rt=!et;if(j==null)return!nt;for(j=Object(j);tt--;){var it=_e[tt];if(rt&&it[2]?it[1]!==j[it[0]]:!(it[0]in j))return!1}for(;++tt<nt;){it=_e[tt];var st=it[0],ot=j[st],at=it[1];if(rt&&it[2]){if(ot===void 0&&!(st in j))return!1}else{var lt=new Stack$2;if(et)var ut=et(ot,at,st,j,$,lt);if(!(ut===void 0?baseIsEqual(at,ot,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,et,lt):ut))return!1}}return!0}function isStrictComparable(j){return j===j&&!isObject(j)}function getMatchData(j){for(var $=keys(j),_e=$.length;_e--;){var et=$[_e],tt=j[et];$[_e]=[et,tt,isStrictComparable(tt)]}return $}function matchesStrictComparable(j,$){return function(_e){return _e==null?!1:_e[j]===$&&($!==void 0||j in Object(_e))}}function baseMatches(j){var $=getMatchData(j);return $.length==1&&$[0][2]?matchesStrictComparable($[0][0],$[0][1]):function(_e){return _e===j||baseIsMatch(_e,j,$)}}function baseHasIn(j,$){return j!=null&&$ in Object(j)}function hasPath(j,$,_e){$=castPath($,j);for(var et=-1,tt=$.length,nt=!1;++et<tt;){var rt=toKey($[et]);if(!(nt=j!=null&&_e(j,rt)))break;j=j[rt]}return nt||++et!=tt?nt:(tt=j==null?0:j.length,!!tt&&isLength(tt)&&isIndex(rt,tt)&&(isArray$1(j)||isArguments$1(j)))}function hasIn(j,$){return j!=null&&hasPath(j,$,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(j,$){return isKey(j)&&isStrictComparable($)?matchesStrictComparable(toKey(j),$):function(_e){var et=get(_e,j);return et===void 0&&et===$?hasIn(_e,j):baseIsEqual($,et,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(j){return function($){return $==null?void 0:$[j]}}function basePropertyDeep(j){return function($){return baseGet($,j)}}function property(j){return isKey(j)?baseProperty(toKey(j)):basePropertyDeep(j)}function baseIteratee(j){return typeof j=="function"?j:j==null?identity$1:typeof j=="object"?isArray$1(j)?baseMatchesProperty(j[0],j[1]):baseMatches(j):property(j)}function createBaseFor(j){return function($,_e,et){for(var tt=-1,nt=Object($),rt=et($),it=rt.length;it--;){var st=rt[j?it:++tt];if(_e(nt[st],st,nt)===!1)break}return $}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(j,$){return j&&baseFor$1(j,$,keys)}function createBaseEach(j,$){return function(_e,et){if(_e==null)return _e;if(!isArrayLike(_e))return j(_e,et);for(var tt=_e.length,nt=$?tt:-1,rt=Object(_e);($?nt--:++nt<tt)&&et(rt[nt],nt,rt)!==!1;);return _e}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now$1=function(){return root$2.Date.now()};const now$2=now$1;var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest(function(j,$){j=Object(j);var _e=-1,et=$.length,tt=et>2?$[2]:void 0;for(tt&&isIterateeCall($[0],$[1],tt)&&(et=1);++_e<et;)for(var nt=$[_e],rt=keysIn(nt),it=-1,st=rt.length;++it<st;){var ot=rt[it],at=j[ot];(at===void 0||eq(at,objectProto$2[ot])&&!hasOwnProperty$2.call(j,ot))&&(j[ot]=nt[ot])}return j});const defaults$1=defaults;function assignMergeValue(j,$,_e){(_e!==void 0&&!eq(j[$],_e)||_e===void 0&&!($ in j))&&baseAssignValue(j,$,_e)}function isArrayLikeObject(j){return isObjectLike(j)&&isArrayLike(j)}function safeGet(j,$){if(!($==="constructor"&&typeof j[$]=="function")&&$!="__proto__")return j[$]}function toPlainObject(j){return copyObject(j,keysIn(j))}function baseMergeDeep(j,$,_e,et,tt,nt,rt){var it=safeGet(j,_e),st=safeGet($,_e),ot=rt.get(st);if(ot){assignMergeValue(j,_e,ot);return}var at=nt?nt(it,st,_e+"",j,$,rt):void 0,lt=at===void 0;if(lt){var ut=isArray$1(st),ct=!ut&&isBuffer$1(st),ft=!ut&&!ct&&isTypedArray$1(st);at=st,ut||ct||ft?isArray$1(it)?at=it:isArrayLikeObject(it)?at=copyArray(it):ct?(lt=!1,at=cloneBuffer(st,!0)):ft?(lt=!1,at=cloneTypedArray(st,!0)):at=[]:isPlainObject(st)||isArguments$1(st)?(at=it,isArguments$1(it)?at=toPlainObject(it):(!isObject(it)||isFunction(it))&&(at=initCloneObject(st))):lt=!1}lt&&(rt.set(st,at),tt(at,st,et,nt,rt),rt.delete(st)),assignMergeValue(j,_e,at)}function baseMerge(j,$,_e,et,tt){j!==$&&baseFor$1($,function(nt,rt){if(tt||(tt=new Stack$2),isObject(nt))baseMergeDeep(j,$,rt,_e,baseMerge,et,tt);else{var it=et?et(safeGet(j,rt),nt,rt+"",j,$,tt):void 0;it===void 0&&(it=nt),assignMergeValue(j,rt,it)}},keysIn)}function arrayIncludesWith(j,$,_e){for(var et=-1,tt=j==null?0:j.length;++et<tt;)if(_e($,j[et]))return!0;return!1}function last$1(j){var $=j==null?0:j.length;return $?j[$-1]:void 0}function castFunction(j){return typeof j=="function"?j:identity$1}function forEach(j,$){var _e=isArray$1(j)?arrayEach:baseEach$1;return _e(j,castFunction($))}function baseFilter(j,$){var _e=[];return baseEach$1(j,function(et,tt,nt){$(et,tt,nt)&&_e.push(et)}),_e}function filter(j,$){var _e=isArray$1(j)?arrayFilter:baseFilter;return _e(j,baseIteratee($))}function createFind(j){return function($,_e,et){var tt=Object($);if(!isArrayLike($)){var nt=baseIteratee(_e);$=keys($),_e=function(it){return nt(tt[it],it,tt)}}var rt=j($,_e,et);return rt>-1?tt[nt?$[rt]:rt]:void 0}}var nativeMax$1=Math.max;function findIndex(j,$,_e){var et=j==null?0:j.length;if(!et)return-1;var tt=_e==null?0:toInteger(_e);return tt<0&&(tt=nativeMax$1(et+tt,0)),baseFindIndex(j,baseIteratee($),tt)}var find=createFind(findIndex);const find$1=find;function baseMap(j,$){var _e=-1,et=isArrayLike(j)?Array(j.length):[];return baseEach$1(j,function(tt,nt,rt){et[++_e]=$(tt,nt,rt)}),et}function map(j,$){var _e=isArray$1(j)?arrayMap:baseMap;return _e(j,baseIteratee($))}function forIn(j,$){return j==null?j:baseFor$1(j,castFunction($),keysIn)}function forOwn(j,$){return j&&baseForOwn(j,castFunction($))}function baseGt(j,$){return j>$}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas(j,$){return j!=null&&hasOwnProperty$1.call(j,$)}function has(j,$){return j!=null&&hasPath(j,$,baseHas)}function baseValues(j,$){return arrayMap($,function(_e){return j[_e]})}function values(j){return j==null?[]:baseValues(j,keys(j))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(j){if(j==null)return!0;if(isArrayLike(j)&&(isArray$1(j)||typeof j=="string"||typeof j.splice=="function"||isBuffer$1(j)||isTypedArray$1(j)||isArguments$1(j)))return!j.length;var $=getTag$1(j);if($==mapTag||$==setTag)return!j.size;if(isPrototype(j))return!baseKeys(j).length;for(var _e in j)if(hasOwnProperty.call(j,_e))return!1;return!0}function isUndefined(j){return j===void 0}function baseLt(j,$){return j<$}function mapValues(j,$){var _e={};return $=baseIteratee($),baseForOwn(j,function(et,tt,nt){baseAssignValue(_e,tt,$(et,tt,nt))}),_e}function baseExtremum(j,$,_e){for(var et=-1,tt=j.length;++et<tt;){var nt=j[et],rt=$(nt);if(rt!=null&&(it===void 0?rt===rt&&!isSymbol(rt):_e(rt,it)))var it=rt,st=nt}return st}function max(j){return j&&j.length?baseExtremum(j,identity$1,baseGt):void 0}var merge=createAssigner(function(j,$,_e){baseMerge(j,$,_e)});const merge$1=merge;function min(j){return j&&j.length?baseExtremum(j,identity$1,baseLt):void 0}function minBy(j,$){return j&&j.length?baseExtremum(j,baseIteratee($),baseLt):void 0}function baseSet(j,$,_e,et){if(!isObject(j))return j;$=castPath($,j);for(var tt=-1,nt=$.length,rt=nt-1,it=j;it!=null&&++tt<nt;){var st=toKey($[tt]),ot=_e;if(st==="__proto__"||st==="constructor"||st==="prototype")return j;if(tt!=rt){var at=it[st];ot=et?et(at,st,it):void 0,ot===void 0&&(ot=isObject(at)?at:isIndex($[tt+1])?[]:{})}assignValue(it,st,ot),it=it[st]}return j}function basePickBy(j,$,_e){for(var et=-1,tt=$.length,nt={};++et<tt;){var rt=$[et],it=baseGet(j,rt);_e(it,rt)&&baseSet(nt,castPath(rt,j),it)}return nt}function baseSortBy(j,$){var _e=j.length;for(j.sort($);_e--;)j[_e]=j[_e].value;return j}function compareAscending(j,$){if(j!==$){var _e=j!==void 0,et=j===null,tt=j===j,nt=isSymbol(j),rt=$!==void 0,it=$===null,st=$===$,ot=isSymbol($);if(!it&&!ot&&!nt&&j>$||nt&&rt&&st&&!it&&!ot||et&&rt&&st||!_e&&st||!tt)return 1;if(!et&&!nt&&!ot&&j<$||ot&&_e&&tt&&!et&&!nt||it&&_e&&tt||!rt&&tt||!st)return-1}return 0}function compareMultiple(j,$,_e){for(var et=-1,tt=j.criteria,nt=$.criteria,rt=tt.length,it=_e.length;++et<rt;){var st=compareAscending(tt[et],nt[et]);if(st){if(et>=it)return st;var ot=_e[et];return st*(ot=="desc"?-1:1)}}return j.index-$.index}function baseOrderBy(j,$,_e){$.length?$=arrayMap($,function(nt){return isArray$1(nt)?function(rt){return baseGet(rt,nt.length===1?nt[0]:nt)}:nt}):$=[identity$1];var et=-1;$=arrayMap($,baseUnary(baseIteratee));var tt=baseMap(j,function(nt,rt,it){var st=arrayMap($,function(ot){return ot(nt)});return{criteria:st,index:++et,value:nt}});return baseSortBy(tt,function(nt,rt){return compareMultiple(nt,rt,_e)})}function basePick(j,$){return basePickBy(j,$,function(_e,et){return hasIn(j,et)})}var pick=flatRest(function(j,$){return j==null?{}:basePick(j,$)});const pick$1=pick;var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(j,$,_e,et){for(var tt=-1,nt=nativeMax(nativeCeil(($-j)/(_e||1)),0),rt=Array(nt);nt--;)rt[et?nt:++tt]=j,j+=_e;return rt}function createRange(j){return function($,_e,et){return et&&typeof et!="number"&&isIterateeCall($,_e,et)&&(_e=et=void 0),$=toFinite($),_e===void 0?(_e=$,$=0):_e=toFinite(_e),et=et===void 0?$<_e?1:-1:toFinite(et),baseRange($,_e,et,j)}}var range=createRange();const range$1=range;function baseReduce(j,$,_e,et,tt){return tt(j,function(nt,rt,it){_e=et?(et=!1,nt):$(_e,nt,rt,it)}),_e}function reduce(j,$,_e){var et=isArray$1(j)?arrayReduce:baseReduce,tt=arguments.length<3;return et(j,baseIteratee($),_e,tt,baseEach$1)}var sortBy=baseRest(function(j,$){if(j==null)return[];var _e=$.length;return _e>1&&isIterateeCall(j,$[0],$[1])?$=[]:_e>2&&isIterateeCall($[0],$[1],$[2])&&($=[$[0]]),baseOrderBy(j,baseFlatten($,1),[])});const sortBy$1=sortBy;var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(j){return new Set$2(j)}:noop$1;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(j,$,_e){var et=-1,tt=arrayIncludes,nt=j.length,rt=!0,it=[],st=it;if(_e)rt=!1,tt=arrayIncludesWith;else if(nt>=LARGE_ARRAY_SIZE){var ot=$?null:createSet$1(j);if(ot)return setToArray(ot);rt=!1,tt=cacheHas,st=new SetCache}else st=$?[]:it;e:for(;++et<nt;){var at=j[et],lt=$?$(at):at;if(at=_e||at!==0?at:0,rt&&lt===lt){for(var ut=st.length;ut--;)if(st[ut]===lt)continue e;$&&st.push(lt),it.push(at)}else tt(st,lt,_e)||(st!==it&&st.push(lt),it.push(at))}return it}var union=baseRest(function(j){return baseUniq(baseFlatten(j,1,isArrayLikeObject,!0))});const union$1=union;var idCounter=0;function uniqueId(j){var $=++idCounter;return toString(j)+$}function baseZipObject(j,$,_e){for(var et=-1,tt=j.length,nt=$.length,rt={};++et<tt;){var it=et<nt?$[et]:void 0;_e(rt,j[et],it)}return rt}function zipObject(j,$){return baseZipObject(j||[],$||[],assignValue)}var DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";class Graph{constructor($={}){this._isDirected=has($,"directed")?$.directed:!0,this._isMultigraph=has($,"multigraph")?$.multigraph:!1,this._isCompound=has($,"compound")?$.compound:!1,this._label=void 0,this._defaultNodeLabelFn=constant(void 0),this._defaultEdgeLabelFn=constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph($){return this._label=$,this}graph(){return this._label}setDefaultNodeLabel($){return isFunction($)||($=constant($)),this._defaultNodeLabelFn=$,this}nodeCount(){return this._nodeCount}nodes(){return keys(this._nodes)}sources(){var $=this;return filter(this.nodes(),function(_e){return isEmpty($._in[_e])})}sinks(){var $=this;return filter(this.nodes(),function(_e){return isEmpty($._out[_e])})}setNodes($,_e){var et=arguments,tt=this;return forEach($,function(nt){et.length>1?tt.setNode(nt,_e):tt.setNode(nt)}),this}setNode($,_e){return has(this._nodes,$)?(arguments.length>1&&(this._nodes[$]=_e),this):(this._nodes[$]=arguments.length>1?_e:this._defaultNodeLabelFn($),this._isCompound&&(this._parent[$]=GRAPH_NODE,this._children[$]={},this._children[GRAPH_NODE][$]=!0),this._in[$]={},this._preds[$]={},this._out[$]={},this._sucs[$]={},++this._nodeCount,this)}node($){return this._nodes[$]}hasNode($){return has(this._nodes,$)}removeNode($){var _e=this;if(has(this._nodes,$)){var et=function(tt){_e.removeEdge(_e._edgeObjs[tt])};delete this._nodes[$],this._isCompound&&(this._removeFromParentsChildList($),delete this._parent[$],forEach(this.children($),function(tt){_e.setParent(tt)}),delete this._children[$]),forEach(keys(this._in[$]),et),delete this._in[$],delete this._preds[$],forEach(keys(this._out[$]),et),delete this._out[$],delete this._sucs[$],--this._nodeCount}return this}setParent($,_e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined(_e))_e=GRAPH_NODE;else{_e+="";for(var et=_e;!isUndefined(et);et=this.parent(et))if(et===$)throw new Error("Setting "+_e+" as parent of "+$+" would create a cycle");this.setNode(_e)}return this.setNode($),this._removeFromParentsChildList($),this._parent[$]=_e,this._children[_e][$]=!0,this}_removeFromParentsChildList($){delete this._children[this._parent[$]][$]}parent($){if(this._isCompound){var _e=this._parent[$];if(_e!==GRAPH_NODE)return _e}}children($){if(isUndefined($)&&($=GRAPH_NODE),this._isCompound){var _e=this._children[$];if(_e)return keys(_e)}else{if($===GRAPH_NODE)return this.nodes();if(this.hasNode($))return[]}}predecessors($){var _e=this._preds[$];if(_e)return keys(_e)}successors($){var _e=this._sucs[$];if(_e)return keys(_e)}neighbors($){var _e=this.predecessors($);if(_e)return union$1(_e,this.successors($))}isLeaf($){var _e;return this.isDirected()?_e=this.successors($):_e=this.neighbors($),_e.length===0}filterNodes($){var _e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});_e.setGraph(this.graph());var et=this;forEach(this._nodes,function(rt,it){$(it)&&_e.setNode(it,rt)}),forEach(this._edgeObjs,function(rt){_e.hasNode(rt.v)&&_e.hasNode(rt.w)&&_e.setEdge(rt,et.edge(rt))});var tt={};function nt(rt){var it=et.parent(rt);return it===void 0||_e.hasNode(it)?(tt[rt]=it,it):it in tt?tt[it]:nt(it)}return this._isCompound&&forEach(_e.nodes(),function(rt){_e.setParent(rt,nt(rt))}),_e}setDefaultEdgeLabel($){return isFunction($)||($=constant($)),this._defaultEdgeLabelFn=$,this}edgeCount(){return this._edgeCount}edges(){return values(this._edgeObjs)}setPath($,_e){var et=this,tt=arguments;return reduce($,function(nt,rt){return tt.length>1?et.setEdge(nt,rt,_e):et.setEdge(nt,rt),rt}),this}setEdge(){var $,_e,et,tt,nt=!1,rt=arguments[0];typeof rt=="object"&&rt!==null&&"v"in rt?($=rt.v,_e=rt.w,et=rt.name,arguments.length===2&&(tt=arguments[1],nt=!0)):($=rt,_e=arguments[1],et=arguments[3],arguments.length>2&&(tt=arguments[2],nt=!0)),$=""+$,_e=""+_e,isUndefined(et)||(et=""+et);var it=edgeArgsToId(this._isDirected,$,_e,et);if(has(this._edgeLabels,it))return nt&&(this._edgeLabels[it]=tt),this;if(!isUndefined(et)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode($),this.setNode(_e),this._edgeLabels[it]=nt?tt:this._defaultEdgeLabelFn($,_e,et);var st=edgeArgsToObj(this._isDirected,$,_e,et);return $=st.v,_e=st.w,Object.freeze(st),this._edgeObjs[it]=st,incrementOrInitEntry(this._preds[_e],$),incrementOrInitEntry(this._sucs[$],_e),this._in[_e][it]=st,this._out[$][it]=st,this._edgeCount++,this}edge($,_e,et){var tt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,$,_e,et);return this._edgeLabels[tt]}hasEdge($,_e,et){var tt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,$,_e,et);return has(this._edgeLabels,tt)}removeEdge($,_e,et){var tt=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,$,_e,et),nt=this._edgeObjs[tt];return nt&&($=nt.v,_e=nt.w,delete this._edgeLabels[tt],delete this._edgeObjs[tt],decrementOrRemoveEntry(this._preds[_e],$),decrementOrRemoveEntry(this._sucs[$],_e),delete this._in[_e][tt],delete this._out[$][tt],this._edgeCount--),this}inEdges($,_e){var et=this._in[$];if(et){var tt=values(et);return _e?filter(tt,function(nt){return nt.v===_e}):tt}}outEdges($,_e){var et=this._out[$];if(et){var tt=values(et);return _e?filter(tt,function(nt){return nt.w===_e}):tt}}nodeEdges($,_e){var et=this.inEdges($,_e);if(et)return et.concat(this.outEdges($,_e))}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;function incrementOrInitEntry(j,$){j[$]?j[$]++:j[$]=1}function decrementOrRemoveEntry(j,$){--j[$]||delete j[$]}function edgeArgsToId(j,$,_e,et){var tt=""+$,nt=""+_e;if(!j&&tt>nt){var rt=tt;tt=nt,nt=rt}return tt+EDGE_KEY_DELIM+nt+EDGE_KEY_DELIM+(isUndefined(et)?DEFAULT_EDGE_NAME:et)}function edgeArgsToObj(j,$,_e,et){var tt=""+$,nt=""+_e;if(!j&&tt>nt){var rt=tt;tt=nt,nt=rt}var it={v:tt,w:nt};return et&&(it.name=et),it}function edgeObjToId(j,$){return edgeArgsToId(j,$.v,$.w,$.name)}class List{constructor(){var $={};$._next=$._prev=$,this._sentinel=$}dequeue(){var $=this._sentinel,_e=$._prev;if(_e!==$)return unlink(_e),_e}enqueue($){var _e=this._sentinel;$._prev&&$._next&&unlink($),$._next=_e._next,_e._next._prev=$,_e._next=$,$._prev=_e}toString(){for(var $=[],_e=this._sentinel,et=_e._prev;et!==_e;)$.push(JSON.stringify(et,filterOutLinks)),et=et._prev;return"["+$.join(", ")+"]"}}function unlink(j){j._prev._next=j._next,j._next._prev=j._prev,delete j._next,delete j._prev}function filterOutLinks(j,$){if(j!=="_next"&&j!=="_prev")return $}var DEFAULT_WEIGHT_FN=constant(1);function greedyFAS(j,$){if(j.nodeCount()<=1)return[];var _e=buildState(j,$||DEFAULT_WEIGHT_FN),et=doGreedyFAS(_e.graph,_e.buckets,_e.zeroIdx);return flatten(map(et,function(tt){return j.outEdges(tt.v,tt.w)}))}function doGreedyFAS(j,$,_e){for(var et=[],tt=$[$.length-1],nt=$[0],rt;j.nodeCount();){for(;rt=nt.dequeue();)removeNode(j,$,_e,rt);for(;rt=tt.dequeue();)removeNode(j,$,_e,rt);if(j.nodeCount()){for(var it=$.length-2;it>0;--it)if(rt=$[it].dequeue(),rt){et=et.concat(removeNode(j,$,_e,rt,!0));break}}}return et}function removeNode(j,$,_e,et,tt){var nt=tt?[]:void 0;return forEach(j.inEdges(et.v),function(rt){var it=j.edge(rt),st=j.node(rt.v);tt&&nt.push({v:rt.v,w:rt.w}),st.out-=it,assignBucket($,_e,st)}),forEach(j.outEdges(et.v),function(rt){var it=j.edge(rt),st=rt.w,ot=j.node(st);ot.in-=it,assignBucket($,_e,ot)}),j.removeNode(et.v),nt}function buildState(j,$){var _e=new Graph,et=0,tt=0;forEach(j.nodes(),function(it){_e.setNode(it,{v:it,in:0,out:0})}),forEach(j.edges(),function(it){var st=_e.edge(it.v,it.w)||0,ot=$(it),at=st+ot;_e.setEdge(it.v,it.w,at),tt=Math.max(tt,_e.node(it.v).out+=ot),et=Math.max(et,_e.node(it.w).in+=ot)});var nt=range$1(tt+et+3).map(function(){return new List}),rt=et+1;return forEach(_e.nodes(),function(it){assignBucket(nt,rt,_e.node(it))}),{graph:_e,buckets:nt,zeroIdx:rt}}function assignBucket(j,$,_e){_e.out?_e.in?j[_e.out-_e.in+$].enqueue(_e):j[j.length-1].enqueue(_e):j[0].enqueue(_e)}function run$2(j){var $=j.graph().acyclicer==="greedy"?greedyFAS(j,_e(j)):dfsFAS(j);forEach($,function(et){var tt=j.edge(et);j.removeEdge(et),tt.forwardName=et.name,tt.reversed=!0,j.setEdge(et.w,et.v,tt,uniqueId("rev"))});function _e(et){return function(tt){return et.edge(tt).weight}}}function dfsFAS(j){var $=[],_e={},et={};function tt(nt){has(et,nt)||(et[nt]=!0,_e[nt]=!0,forEach(j.outEdges(nt),function(rt){has(_e,rt.w)?$.push(rt):tt(rt.w)}),delete _e[nt])}return forEach(j.nodes(),tt),$}function undo$2(j){forEach(j.edges(),function($){var _e=j.edge($);if(_e.reversed){j.removeEdge($);var et=_e.forwardName;delete _e.reversed,delete _e.forwardName,j.setEdge($.w,$.v,_e,et)}})}function addDummyNode(j,$,_e,et){var tt;do tt=uniqueId(et);while(j.hasNode(tt));return _e.dummy=$,j.setNode(tt,_e),tt}function simplify(j){var $=new Graph().setGraph(j.graph());return forEach(j.nodes(),function(_e){$.setNode(_e,j.node(_e))}),forEach(j.edges(),function(_e){var et=$.edge(_e.v,_e.w)||{weight:0,minlen:1},tt=j.edge(_e);$.setEdge(_e.v,_e.w,{weight:et.weight+tt.weight,minlen:Math.max(et.minlen,tt.minlen)})}),$}function asNonCompoundGraph(j){var $=new Graph({multigraph:j.isMultigraph()}).setGraph(j.graph());return forEach(j.nodes(),function(_e){j.children(_e).length||$.setNode(_e,j.node(_e))}),forEach(j.edges(),function(_e){$.setEdge(_e,j.edge(_e))}),$}function intersectRect$1(j,$){var _e=j.x,et=j.y,tt=$.x-_e,nt=$.y-et,rt=j.width/2,it=j.height/2;if(!tt&&!nt)throw new Error("Not possible to find intersection inside of the rectangle");var st,ot;return Math.abs(nt)*rt>Math.abs(tt)*it?(nt<0&&(it=-it),st=it*tt/nt,ot=it):(tt<0&&(rt=-rt),st=rt,ot=rt*nt/tt),{x:_e+st,y:et+ot}}function buildLayerMatrix(j){var $=map(range$1(maxRank(j)+1),function(){return[]});return forEach(j.nodes(),function(_e){var et=j.node(_e),tt=et.rank;isUndefined(tt)||($[tt][et.order]=_e)}),$}function normalizeRanks(j){var $=min(map(j.nodes(),function(_e){return j.node(_e).rank}));forEach(j.nodes(),function(_e){var et=j.node(_e);has(et,"rank")&&(et.rank-=$)})}function removeEmptyRanks(j){var $=min(map(j.nodes(),function(nt){return j.node(nt).rank})),_e=[];forEach(j.nodes(),function(nt){var rt=j.node(nt).rank-$;_e[rt]||(_e[rt]=[]),_e[rt].push(nt)});var et=0,tt=j.graph().nodeRankFactor;forEach(_e,function(nt,rt){isUndefined(nt)&&rt%tt!==0?--et:et&&forEach(nt,function(it){j.node(it).rank+=et})})}function addBorderNode$1(j,$,_e,et){var tt={width:0,height:0};return arguments.length>=4&&(tt.rank=_e,tt.order=et),addDummyNode(j,"border",tt,$)}function maxRank(j){return max(map(j.nodes(),function($){var _e=j.node($).rank;if(!isUndefined(_e))return _e}))}function partition(j,$){var _e={lhs:[],rhs:[]};return forEach(j,function(et){$(et)?_e.lhs.push(et):_e.rhs.push(et)}),_e}function time(j,$){var _e=now$2();try{return $()}finally{console.log(j+" time: "+(now$2()-_e)+"ms")}}function notime(j,$){return $()}function addBorderSegments(j){function $(_e){var et=j.children(_e),tt=j.node(_e);if(et.length&&forEach(et,$),has(tt,"minRank")){tt.borderLeft=[],tt.borderRight=[];for(var nt=tt.minRank,rt=tt.maxRank+1;nt<rt;++nt)addBorderNode(j,"borderLeft","_bl",_e,tt,nt),addBorderNode(j,"borderRight","_br",_e,tt,nt)}}forEach(j.children(),$)}function addBorderNode(j,$,_e,et,tt,nt){var rt={width:0,height:0,rank:nt,borderType:$},it=tt[$][nt-1],st=addDummyNode(j,"border",rt,_e);tt[$][nt]=st,j.setParent(st,et),it&&j.setEdge(it,st,{weight:1})}function adjust(j){var $=j.graph().rankdir.toLowerCase();($==="lr"||$==="rl")&&swapWidthHeight(j)}function undo$1(j){var $=j.graph().rankdir.toLowerCase();($==="bt"||$==="rl")&&reverseY(j),($==="lr"||$==="rl")&&(swapXY(j),swapWidthHeight(j))}function swapWidthHeight(j){forEach(j.nodes(),function($){swapWidthHeightOne(j.node($))}),forEach(j.edges(),function($){swapWidthHeightOne(j.edge($))})}function swapWidthHeightOne(j){var $=j.width;j.width=j.height,j.height=$}function reverseY(j){forEach(j.nodes(),function($){reverseYOne(j.node($))}),forEach(j.edges(),function($){var _e=j.edge($);forEach(_e.points,reverseYOne),has(_e,"y")&&reverseYOne(_e)})}function reverseYOne(j){j.y=-j.y}function swapXY(j){forEach(j.nodes(),function($){swapXYOne(j.node($))}),forEach(j.edges(),function($){var _e=j.edge($);forEach(_e.points,swapXYOne),has(_e,"x")&&swapXYOne(_e)})}function swapXYOne(j){var $=j.x;j.x=j.y,j.y=$}function run$1(j){j.graph().dummyChains=[],forEach(j.edges(),function($){normalizeEdge(j,$)})}function normalizeEdge(j,$){var _e=$.v,et=j.node(_e).rank,tt=$.w,nt=j.node(tt).rank,rt=$.name,it=j.edge($),st=it.labelRank;if(nt!==et+1){j.removeEdge($);var ot,at,lt;for(lt=0,++et;et<nt;++lt,++et)it.points=[],at={width:0,height:0,edgeLabel:it,edgeObj:$,rank:et},ot=addDummyNode(j,"edge",at,"_d"),et===st&&(at.width=it.width,at.height=it.height,at.dummy="edge-label",at.labelpos=it.labelpos),j.setEdge(_e,ot,{weight:it.weight},rt),lt===0&&j.graph().dummyChains.push(ot),_e=ot;j.setEdge(_e,tt,{weight:it.weight},rt)}}function undo(j){forEach(j.graph().dummyChains,function($){var _e=j.node($),et=_e.edgeLabel,tt;for(j.setEdge(_e.edgeObj,et);_e.dummy;)tt=j.successors($)[0],j.removeNode($),et.points.push({x:_e.x,y:_e.y}),_e.dummy==="edge-label"&&(et.x=_e.x,et.y=_e.y,et.width=_e.width,et.height=_e.height),$=tt,_e=j.node($)})}function longestPath(j){var $={};function _e(et){var tt=j.node(et);if(has($,et))return tt.rank;$[et]=!0;var nt=min(map(j.outEdges(et),function(rt){return _e(rt.w)-j.edge(rt).minlen}));return(nt===Number.POSITIVE_INFINITY||nt===void 0||nt===null)&&(nt=0),tt.rank=nt}forEach(j.sources(),_e)}function slack(j,$){return j.node($.w).rank-j.node($.v).rank-j.edge($).minlen}function feasibleTree(j){var $=new Graph({directed:!1}),_e=j.nodes()[0],et=j.nodeCount();$.setNode(_e,{});for(var tt,nt;tightTree($,j)<et;)tt=findMinSlackEdge($,j),nt=$.hasNode(tt.v)?slack(j,tt):-slack(j,tt),shiftRanks($,j,nt);return $}function tightTree(j,$){function _e(et){forEach($.nodeEdges(et),function(tt){var nt=tt.v,rt=et===nt?tt.w:nt;!j.hasNode(rt)&&!slack($,tt)&&(j.setNode(rt,{}),j.setEdge(et,rt,{}),_e(rt))})}return forEach(j.nodes(),_e),j.nodeCount()}function findMinSlackEdge(j,$){return minBy($.edges(),function(_e){if(j.hasNode(_e.v)!==j.hasNode(_e.w))return slack($,_e)})}function shiftRanks(j,$,_e){forEach(j.nodes(),function(et){$.node(et).rank+=_e})}function CycleException(){}CycleException.prototype=new Error;function dfs$1(j,$,_e){isArray$1($)||($=[$]);var et=(j.isDirected()?j.successors:j.neighbors).bind(j),tt=[],nt={};return forEach($,function(rt){if(!j.hasNode(rt))throw new Error("Graph does not have node: "+rt);doDfs(j,rt,_e==="post",nt,et,tt)}),tt}function doDfs(j,$,_e,et,tt,nt){has(et,$)||(et[$]=!0,_e||nt.push($),forEach(tt($),function(rt){doDfs(j,rt,_e,et,tt,nt)}),_e&&nt.push($))}function postorder$1(j,$){return dfs$1(j,$,"post")}function preorder(j,$){return dfs$1(j,$,"pre")}networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex(j){j=simplify(j),longestPath(j);var $=feasibleTree(j);initLowLimValues($),initCutValues($,j);for(var _e,et;_e=leaveEdge($);)et=enterEdge($,j,_e),exchangeEdges($,j,_e,et)}function initCutValues(j,$){var _e=postorder$1(j,j.nodes());_e=_e.slice(0,_e.length-1),forEach(_e,function(et){assignCutValue(j,$,et)})}function assignCutValue(j,$,_e){var et=j.node(_e),tt=et.parent;j.edge(_e,tt).cutvalue=calcCutValue(j,$,_e)}function calcCutValue(j,$,_e){var et=j.node(_e),tt=et.parent,nt=!0,rt=$.edge(_e,tt),it=0;return rt||(nt=!1,rt=$.edge(tt,_e)),it=rt.weight,forEach($.nodeEdges(_e),function(st){var ot=st.v===_e,at=ot?st.w:st.v;if(at!==tt){var lt=ot===nt,ut=$.edge(st).weight;if(it+=lt?ut:-ut,isTreeEdge(j,_e,at)){var ct=j.edge(_e,at).cutvalue;it+=lt?-ct:ct}}}),it}function initLowLimValues(j,$){arguments.length<2&&($=j.nodes()[0]),dfsAssignLowLim(j,{},1,$)}function dfsAssignLowLim(j,$,_e,et,tt){var nt=_e,rt=j.node(et);return $[et]=!0,forEach(j.neighbors(et),function(it){has($,it)||(_e=dfsAssignLowLim(j,$,_e,it,et))}),rt.low=nt,rt.lim=_e++,tt?rt.parent=tt:delete rt.parent,_e}function leaveEdge(j){return find$1(j.edges(),function($){return j.edge($).cutvalue<0})}function enterEdge(j,$,_e){var et=_e.v,tt=_e.w;$.hasEdge(et,tt)||(et=_e.w,tt=_e.v);var nt=j.node(et),rt=j.node(tt),it=nt,st=!1;nt.lim>rt.lim&&(it=rt,st=!0);var ot=filter($.edges(),function(at){return st===isDescendant(j,j.node(at.v),it)&&st!==isDescendant(j,j.node(at.w),it)});return minBy(ot,function(at){return slack($,at)})}function exchangeEdges(j,$,_e,et){var tt=_e.v,nt=_e.w;j.removeEdge(tt,nt),j.setEdge(et.v,et.w,{}),initLowLimValues(j),initCutValues(j,$),updateRanks(j,$)}function updateRanks(j,$){var _e=find$1(j.nodes(),function(tt){return!$.node(tt).parent}),et=preorder(j,_e);et=et.slice(1),forEach(et,function(tt){var nt=j.node(tt).parent,rt=$.edge(tt,nt),it=!1;rt||(rt=$.edge(nt,tt),it=!0),$.node(tt).rank=$.node(nt).rank+(it?rt.minlen:-rt.minlen)})}function isTreeEdge(j,$,_e){return j.hasEdge($,_e)}function isDescendant(j,$,_e){return _e.low<=$.lim&&$.lim<=_e.lim}function rank(j){switch(j.graph().ranker){case"network-simplex":networkSimplexRanker(j);break;case"tight-tree":tightTreeRanker(j);break;case"longest-path":longestPathRanker(j);break;default:networkSimplexRanker(j)}}var longestPathRanker=longestPath;function tightTreeRanker(j){longestPath(j),feasibleTree(j)}function networkSimplexRanker(j){networkSimplex(j)}function run(j){var $=addDummyNode(j,"root",{},"_root"),_e=treeDepths(j),et=max(values(_e))-1,tt=2*et+1;j.graph().nestingRoot=$,forEach(j.edges(),function(rt){j.edge(rt).minlen*=tt});var nt=sumWeights(j)+1;forEach(j.children(),function(rt){dfs(j,$,tt,nt,et,_e,rt)}),j.graph().nodeRankFactor=tt}function dfs(j,$,_e,et,tt,nt,rt){var it=j.children(rt);if(!it.length){rt!==$&&j.setEdge($,rt,{weight:0,minlen:_e});return}var st=addBorderNode$1(j,"_bt"),ot=addBorderNode$1(j,"_bb"),at=j.node(rt);j.setParent(st,rt),at.borderTop=st,j.setParent(ot,rt),at.borderBottom=ot,forEach(it,function(lt){dfs(j,$,_e,et,tt,nt,lt);var ut=j.node(lt),ct=ut.borderTop?ut.borderTop:lt,ft=ut.borderBottom?ut.borderBottom:lt,dt=ut.borderTop?et:2*et,mt=ct!==ft?1:tt-nt[rt]+1;j.setEdge(st,ct,{weight:dt,minlen:mt,nestingEdge:!0}),j.setEdge(ft,ot,{weight:dt,minlen:mt,nestingEdge:!0})}),j.parent(rt)||j.setEdge($,st,{weight:0,minlen:tt+nt[rt]})}function treeDepths(j){var $={};function _e(et,tt){var nt=j.children(et);nt&&nt.length&&forEach(nt,function(rt){_e(rt,tt+1)}),$[et]=tt}return forEach(j.children(),function(et){_e(et,1)}),$}function sumWeights(j){return reduce(j.edges(),function($,_e){return $+j.edge(_e).weight},0)}function cleanup(j){var $=j.graph();j.removeNode($.nestingRoot),delete $.nestingRoot,forEach(j.edges(),function(_e){var et=j.edge(_e);et.nestingEdge&&j.removeEdge(_e)})}function addSubgraphConstraints(j,$,_e){var et={},tt;forEach(_e,function(nt){for(var rt=j.parent(nt),it,st;rt;){if(it=j.parent(rt),it?(st=et[it],et[it]=rt):(st=tt,tt=rt),st&&st!==rt){$.setEdge(st,rt);return}rt=it}})}function buildLayerGraph(j,$,_e){var et=createRootNode(j),tt=new Graph({compound:!0}).setGraph({root:et}).setDefaultNodeLabel(function(nt){return j.node(nt)});return forEach(j.nodes(),function(nt){var rt=j.node(nt),it=j.parent(nt);(rt.rank===$||rt.minRank<=$&&$<=rt.maxRank)&&(tt.setNode(nt),tt.setParent(nt,it||et),forEach(j[_e](nt),function(st){var ot=st.v===nt?st.w:st.v,at=tt.edge(ot,nt),lt=isUndefined(at)?0:at.weight;tt.setEdge(ot,nt,{weight:j.edge(st).weight+lt})}),has(rt,"minRank")&&tt.setNode(nt,{borderLeft:rt.borderLeft[$],borderRight:rt.borderRight[$]}))}),tt}function createRootNode(j){for(var $;j.hasNode($=uniqueId("_root")););return $}function crossCount(j,$){for(var _e=0,et=1;et<$.length;++et)_e+=twoLayerCrossCount(j,$[et-1],$[et]);return _e}function twoLayerCrossCount(j,$,_e){for(var et=zipObject(_e,map(_e,function(ot,at){return at})),tt=flatten(map($,function(ot){return sortBy$1(map(j.outEdges(ot),function(at){return{pos:et[at.w],weight:j.edge(at).weight}}),"pos")})),nt=1;nt<_e.length;)nt<<=1;var rt=2*nt-1;nt-=1;var it=map(new Array(rt),function(){return 0}),st=0;return forEach(tt.forEach(function(ot){var at=ot.pos+nt;it[at]+=ot.weight;for(var lt=0;at>0;)at%2&&(lt+=it[at+1]),at=at-1>>1,it[at]+=ot.weight;st+=ot.weight*lt})),st}function initOrder(j){var $={},_e=filter(j.nodes(),function(it){return!j.children(it).length}),et=max(map(_e,function(it){return j.node(it).rank})),tt=map(range$1(et+1),function(){return[]});function nt(it){if(!has($,it)){$[it]=!0;var st=j.node(it);tt[st.rank].push(it),forEach(j.successors(it),nt)}}var rt=sortBy$1(_e,function(it){return j.node(it).rank});return forEach(rt,nt),tt}function barycenter(j,$){return map($,function(_e){var et=j.inEdges(_e);if(et.length){var tt=reduce(et,function(nt,rt){var it=j.edge(rt),st=j.node(rt.v);return{sum:nt.sum+it.weight*st.order,weight:nt.weight+it.weight}},{sum:0,weight:0});return{v:_e,barycenter:tt.sum/tt.weight,weight:tt.weight}}else return{v:_e}})}function resolveConflicts(j,$){var _e={};forEach(j,function(tt,nt){var rt=_e[tt.v]={indegree:0,in:[],out:[],vs:[tt.v],i:nt};isUndefined(tt.barycenter)||(rt.barycenter=tt.barycenter,rt.weight=tt.weight)}),forEach($.edges(),function(tt){var nt=_e[tt.v],rt=_e[tt.w];!isUndefined(nt)&&!isUndefined(rt)&&(rt.indegree++,nt.out.push(_e[tt.w]))});var et=filter(_e,function(tt){return!tt.indegree});return doResolveConflicts(et)}function doResolveConflicts(j){var $=[];function _e(nt){return function(rt){rt.merged||(isUndefined(rt.barycenter)||isUndefined(nt.barycenter)||rt.barycenter>=nt.barycenter)&&mergeEntries(nt,rt)}}function et(nt){return function(rt){rt.in.push(nt),--rt.indegree===0&&j.push(rt)}}for(;j.length;){var tt=j.pop();$.push(tt),forEach(tt.in.reverse(),_e(tt)),forEach(tt.out,et(tt))}return map(filter($,function(nt){return!nt.merged}),function(nt){return pick$1(nt,["vs","i","barycenter","weight"])})}function mergeEntries(j,$){var _e=0,et=0;j.weight&&(_e+=j.barycenter*j.weight,et+=j.weight),$.weight&&(_e+=$.barycenter*$.weight,et+=$.weight),j.vs=$.vs.concat(j.vs),j.barycenter=_e/et,j.weight=et,j.i=Math.min($.i,j.i),$.merged=!0}function sort(j,$){var _e=partition(j,function(at){return has(at,"barycenter")}),et=_e.lhs,tt=sortBy$1(_e.rhs,function(at){return-at.i}),nt=[],rt=0,it=0,st=0;et.sort(compareWithBias(!!$)),st=consumeUnsortable(nt,tt,st),forEach(et,function(at){st+=at.vs.length,nt.push(at.vs),rt+=at.barycenter*at.weight,it+=at.weight,st=consumeUnsortable(nt,tt,st)});var ot={vs:flatten(nt)};return it&&(ot.barycenter=rt/it,ot.weight=it),ot}function consumeUnsortable(j,$,_e){for(var et;$.length&&(et=last$1($)).i<=_e;)$.pop(),j.push(et.vs),_e++;return _e}function compareWithBias(j){return function($,_e){return $.barycenter<_e.barycenter?-1:$.barycenter>_e.barycenter?1:j?_e.i-$.i:$.i-_e.i}}function sortSubgraph(j,$,_e,et){var tt=j.children($),nt=j.node($),rt=nt?nt.borderLeft:void 0,it=nt?nt.borderRight:void 0,st={};rt&&(tt=filter(tt,function(ft){return ft!==rt&&ft!==it}));var ot=barycenter(j,tt);forEach(ot,function(ft){if(j.children(ft.v).length){var dt=sortSubgraph(j,ft.v,_e,et);st[ft.v]=dt,has(dt,"barycenter")&&mergeBarycenters(ft,dt)}});var at=resolveConflicts(ot,_e);expandSubgraphs(at,st);var lt=sort(at,et);if(rt&&(lt.vs=flatten([rt,lt.vs,it]),j.predecessors(rt).length)){var ut=j.node(j.predecessors(rt)[0]),ct=j.node(j.predecessors(it)[0]);has(lt,"barycenter")||(lt.barycenter=0,lt.weight=0),lt.barycenter=(lt.barycenter*lt.weight+ut.order+ct.order)/(lt.weight+2),lt.weight+=2}return lt}function expandSubgraphs(j,$){forEach(j,function(_e){_e.vs=flatten(_e.vs.map(function(et){return $[et]?$[et].vs:et}))})}function mergeBarycenters(j,$){isUndefined(j.barycenter)?(j.barycenter=$.barycenter,j.weight=$.weight):(j.barycenter=(j.barycenter*j.weight+$.barycenter*$.weight)/(j.weight+$.weight),j.weight+=$.weight)}function order(j){var $=maxRank(j),_e=buildLayerGraphs(j,range$1(1,$+1),"inEdges"),et=buildLayerGraphs(j,range$1($-1,-1,-1),"outEdges"),tt=initOrder(j);assignOrder(j,tt);for(var nt=Number.POSITIVE_INFINITY,rt,it=0,st=0;st<4;++it,++st){sweepLayerGraphs(it%2?_e:et,it%4>=2),tt=buildLayerMatrix(j);var ot=crossCount(j,tt);ot<nt&&(st=0,rt=cloneDeep(tt),nt=ot)}assignOrder(j,rt)}function buildLayerGraphs(j,$,_e){return map($,function(et){return buildLayerGraph(j,et,_e)})}function sweepLayerGraphs(j,$){var _e=new Graph;forEach(j,function(et){var tt=et.graph().root,nt=sortSubgraph(et,tt,_e,$);forEach(nt.vs,function(rt,it){et.node(rt).order=it}),addSubgraphConstraints(et,_e,nt.vs)})}function assignOrder(j,$){forEach($,function(_e){forEach(_e,function(et,tt){j.node(et).order=tt})})}function parentDummyChains(j){var $=postorder(j);forEach(j.graph().dummyChains,function(_e){for(var et=j.node(_e),tt=et.edgeObj,nt=findPath(j,$,tt.v,tt.w),rt=nt.path,it=nt.lca,st=0,ot=rt[st],at=!0;_e!==tt.w;){if(et=j.node(_e),at){for(;(ot=rt[st])!==it&&j.node(ot).maxRank<et.rank;)st++;ot===it&&(at=!1)}if(!at){for(;st<rt.length-1&&j.node(ot=rt[st+1]).minRank<=et.rank;)st++;ot=rt[st]}j.setParent(_e,ot),_e=j.successors(_e)[0]}})}function findPath(j,$,_e,et){var tt=[],nt=[],rt=Math.min($[_e].low,$[et].low),it=Math.max($[_e].lim,$[et].lim),st,ot;st=_e;do st=j.parent(st),tt.push(st);while(st&&($[st].low>rt||it>$[st].lim));for(ot=st,st=et;(st=j.parent(st))!==ot;)nt.push(st);return{path:tt.concat(nt.reverse()),lca:ot}}function postorder(j){var $={},_e=0;function et(tt){var nt=_e;forEach(j.children(tt),et),$[tt]={low:nt,lim:_e++}}return forEach(j.children(),et),$}function findType1Conflicts(j,$){var _e={};function et(tt,nt){var rt=0,it=0,st=tt.length,ot=last$1(nt);return forEach(nt,function(at,lt){var ut=findOtherInnerSegmentNode(j,at),ct=ut?j.node(ut).order:st;(ut||at===ot)&&(forEach(nt.slice(it,lt+1),function(ft){forEach(j.predecessors(ft),function(dt){var mt=j.node(dt),pt=mt.order;(pt<rt||ct<pt)&&!(mt.dummy&&j.node(ft).dummy)&&addConflict(_e,dt,ft)})}),it=lt+1,rt=ct)}),nt}return reduce($,et),_e}function findType2Conflicts(j,$){var _e={};function et(nt,rt,it,st,ot){var at;forEach(range$1(rt,it),function(lt){at=nt[lt],j.node(at).dummy&&forEach(j.predecessors(at),function(ut){var ct=j.node(ut);ct.dummy&&(ct.order<st||ct.order>ot)&&addConflict(_e,ut,at)})})}function tt(nt,rt){var it=-1,st,ot=0;return forEach(rt,function(at,lt){if(j.node(at).dummy==="border"){var ut=j.predecessors(at);ut.length&&(st=j.node(ut[0]).order,et(rt,ot,lt,it,st),ot=lt,it=st)}et(rt,ot,rt.length,st,nt.length)}),rt}return reduce($,tt),_e}function findOtherInnerSegmentNode(j,$){if(j.node($).dummy)return find$1(j.predecessors($),function(_e){return j.node(_e).dummy})}function addConflict(j,$,_e){if($>_e){var et=$;$=_e,_e=et}var tt=j[$];tt||(j[$]=tt={}),tt[_e]=!0}function hasConflict(j,$,_e){if($>_e){var et=$;$=_e,_e=et}return has(j[$],_e)}function verticalAlignment(j,$,_e,et){var tt={},nt={},rt={};return forEach($,function(it){forEach(it,function(st,ot){tt[st]=st,nt[st]=st,rt[st]=ot})}),forEach($,function(it){var st=-1;forEach(it,function(ot){var at=et(ot);if(at.length){at=sortBy$1(at,function(dt){return rt[dt]});for(var lt=(at.length-1)/2,ut=Math.floor(lt),ct=Math.ceil(lt);ut<=ct;++ut){var ft=at[ut];nt[ot]===ot&&st<rt[ft]&&!hasConflict(_e,ot,ft)&&(nt[ft]=ot,nt[ot]=tt[ot]=tt[ft],st=rt[ft])}}})}),{root:tt,align:nt}}function horizontalCompaction(j,$,_e,et,tt){var nt={},rt=buildBlockGraph(j,$,_e,tt),it=tt?"borderLeft":"borderRight";function st(lt,ut){for(var ct=rt.nodes(),ft=ct.pop(),dt={};ft;)dt[ft]?lt(ft):(dt[ft]=!0,ct.push(ft),ct=ct.concat(ut(ft))),ft=ct.pop()}function ot(lt){nt[lt]=rt.inEdges(lt).reduce(function(ut,ct){return Math.max(ut,nt[ct.v]+rt.edge(ct))},0)}function at(lt){var ut=rt.outEdges(lt).reduce(function(ft,dt){return Math.min(ft,nt[dt.w]-rt.edge(dt))},Number.POSITIVE_INFINITY),ct=j.node(lt);ut!==Number.POSITIVE_INFINITY&&ct.borderType!==it&&(nt[lt]=Math.max(nt[lt],ut))}return st(ot,rt.predecessors.bind(rt)),st(at,rt.successors.bind(rt)),forEach(et,function(lt){nt[lt]=nt[_e[lt]]}),nt}function buildBlockGraph(j,$,_e,et){var tt=new Graph,nt=j.graph(),rt=sep(nt.nodesep,nt.edgesep,et);return forEach($,function(it){var st;forEach(it,function(ot){var at=_e[ot];if(tt.setNode(at),st){var lt=_e[st],ut=tt.edge(lt,at);tt.setEdge(lt,at,Math.max(rt(j,ot,st),ut||0))}st=ot})}),tt}function findSmallestWidthAlignment(j,$){return minBy(values($),function(_e){var et=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;return forIn(_e,function(nt,rt){var it=width(j,rt)/2;et=Math.max(nt+it,et),tt=Math.min(nt-it,tt)}),et-tt})}function alignCoordinates(j,$){var _e=values($),et=min(_e),tt=max(_e);forEach(["u","d"],function(nt){forEach(["l","r"],function(rt){var it=nt+rt,st=j[it],ot;if(st!==$){var at=values(st);ot=rt==="l"?et-min(at):tt-max(at),ot&&(j[it]=mapValues(st,function(lt){return lt+ot}))}})})}function balance(j,$){return mapValues(j.ul,function(_e,et){if($)return j[$.toLowerCase()][et];var tt=sortBy$1(map(j,et));return(tt[1]+tt[2])/2})}function positionX(j){var $=buildLayerMatrix(j),_e=merge$1(findType1Conflicts(j,$),findType2Conflicts(j,$)),et={},tt;forEach(["u","d"],function(rt){tt=rt==="u"?$:values($).reverse(),forEach(["l","r"],function(it){it==="r"&&(tt=map(tt,function(lt){return values(lt).reverse()}));var st=(rt==="u"?j.predecessors:j.successors).bind(j),ot=verticalAlignment(j,tt,_e,st),at=horizontalCompaction(j,tt,ot.root,ot.align,it==="r");it==="r"&&(at=mapValues(at,function(lt){return-lt})),et[rt+it]=at})});var nt=findSmallestWidthAlignment(j,et);return alignCoordinates(et,nt),balance(et,j.graph().align)}function sep(j,$,_e){return function(et,tt,nt){var rt=et.node(tt),it=et.node(nt),st=0,ot;if(st+=rt.width/2,has(rt,"labelpos"))switch(rt.labelpos.toLowerCase()){case"l":ot=-rt.width/2;break;case"r":ot=rt.width/2;break}if(ot&&(st+=_e?ot:-ot),ot=0,st+=(rt.dummy?$:j)/2,st+=(it.dummy?$:j)/2,st+=it.width/2,has(it,"labelpos"))switch(it.labelpos.toLowerCase()){case"l":ot=it.width/2;break;case"r":ot=-it.width/2;break}return ot&&(st+=_e?ot:-ot),ot=0,st}}function width(j,$){return j.node($).width}function position(j){j=asNonCompoundGraph(j),positionY(j),forOwn(positionX(j),function($,_e){j.node(_e).x=$})}function positionY(j){var $=buildLayerMatrix(j),_e=j.graph().ranksep,et=0;forEach($,function(tt){var nt=max(map(tt,function(rt){return j.node(rt).height}));forEach(tt,function(rt){j.node(rt).y=et+nt/2}),et+=nt+_e})}function layout(j,$){var _e=$&&$.debugTiming?time:notime;_e("layout",function(){var et=_e("  buildLayoutGraph",function(){return buildLayoutGraph(j)});_e("  runLayout",function(){runLayout(et,_e)}),_e("  updateInputGraph",function(){updateInputGraph(j,et)})})}function runLayout(j,$){$("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels(j)}),$("    removeSelfEdges",function(){removeSelfEdges(j)}),$("    acyclic",function(){run$2(j)}),$("    nestingGraph.run",function(){run(j)}),$("    rank",function(){rank(asNonCompoundGraph(j))}),$("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies(j)}),$("    removeEmptyRanks",function(){removeEmptyRanks(j)}),$("    nestingGraph.cleanup",function(){cleanup(j)}),$("    normalizeRanks",function(){normalizeRanks(j)}),$("    assignRankMinMax",function(){assignRankMinMax(j)}),$("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies(j)}),$("    normalize.run",function(){run$1(j)}),$("    parentDummyChains",function(){parentDummyChains(j)}),$("    addBorderSegments",function(){addBorderSegments(j)}),$("    order",function(){order(j)}),$("    insertSelfEdges",function(){insertSelfEdges(j)}),$("    adjustCoordinateSystem",function(){adjust(j)}),$("    position",function(){position(j)}),$("    positionSelfEdges",function(){positionSelfEdges(j)}),$("    removeBorderNodes",function(){removeBorderNodes(j)}),$("    normalize.undo",function(){undo(j)}),$("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords(j)}),$("    undoCoordinateSystem",function(){undo$1(j)}),$("    translateGraph",function(){translateGraph(j)}),$("    assignNodeIntersects",function(){assignNodeIntersects(j)}),$("    reversePoints",function(){reversePointsForReversedEdges(j)}),$("    acyclic.undo",function(){undo$2(j)})}function updateInputGraph(j,$){forEach(j.nodes(),function(_e){var et=j.node(_e),tt=$.node(_e);et&&(et.x=tt.x,et.y=tt.y,$.children(_e).length&&(et.width=tt.width,et.height=tt.height))}),forEach(j.edges(),function(_e){var et=j.edge(_e),tt=$.edge(_e);et.points=tt.points,has(tt,"x")&&(et.x=tt.x,et.y=tt.y)}),j.graph().width=$.graph().width,j.graph().height=$.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph(j){var $=new Graph({multigraph:!0,compound:!0}),_e=canonicalize(j.graph());return $.setGraph(merge$1({},graphDefaults,selectNumberAttrs(_e,graphNumAttrs),pick$1(_e,graphAttrs))),forEach(j.nodes(),function(et){var tt=canonicalize(j.node(et));$.setNode(et,defaults$1(selectNumberAttrs(tt,nodeNumAttrs),nodeDefaults)),$.setParent(et,j.parent(et))}),forEach(j.edges(),function(et){var tt=canonicalize(j.edge(et));$.setEdge(et,merge$1({},edgeDefaults,selectNumberAttrs(tt,edgeNumAttrs),pick$1(tt,edgeAttrs)))}),$}function makeSpaceForEdgeLabels(j){var $=j.graph();$.ranksep/=2,forEach(j.edges(),function(_e){var et=j.edge(_e);et.minlen*=2,et.labelpos.toLowerCase()!=="c"&&($.rankdir==="TB"||$.rankdir==="BT"?et.width+=et.labeloffset:et.height+=et.labeloffset)})}function injectEdgeLabelProxies(j){forEach(j.edges(),function($){var _e=j.edge($);if(_e.width&&_e.height){var et=j.node($.v),tt=j.node($.w),nt={rank:(tt.rank-et.rank)/2+et.rank,e:$};addDummyNode(j,"edge-proxy",nt,"_ep")}})}function assignRankMinMax(j){var $=0;forEach(j.nodes(),function(_e){var et=j.node(_e);et.borderTop&&(et.minRank=j.node(et.borderTop).rank,et.maxRank=j.node(et.borderBottom).rank,$=max($,et.maxRank))}),j.graph().maxRank=$}function removeEdgeLabelProxies(j){forEach(j.nodes(),function($){var _e=j.node($);_e.dummy==="edge-proxy"&&(j.edge(_e.e).labelRank=_e.rank,j.removeNode($))})}function translateGraph(j){var $=Number.POSITIVE_INFINITY,_e=0,et=Number.POSITIVE_INFINITY,tt=0,nt=j.graph(),rt=nt.marginx||0,it=nt.marginy||0;function st(ot){var at=ot.x,lt=ot.y,ut=ot.width,ct=ot.height;$=Math.min($,at-ut/2),_e=Math.max(_e,at+ut/2),et=Math.min(et,lt-ct/2),tt=Math.max(tt,lt+ct/2)}forEach(j.nodes(),function(ot){st(j.node(ot))}),forEach(j.edges(),function(ot){var at=j.edge(ot);has(at,"x")&&st(at)}),$-=rt,et-=it,forEach(j.nodes(),function(ot){var at=j.node(ot);at.x-=$,at.y-=et}),forEach(j.edges(),function(ot){var at=j.edge(ot);forEach(at.points,function(lt){lt.x-=$,lt.y-=et}),has(at,"x")&&(at.x-=$),has(at,"y")&&(at.y-=et)}),nt.width=_e-$+rt,nt.height=tt-et+it}function assignNodeIntersects(j){forEach(j.edges(),function($){var _e=j.edge($),et=j.node($.v),tt=j.node($.w),nt,rt;_e.points?(nt=_e.points[0],rt=_e.points[_e.points.length-1]):(_e.points=[],nt=tt,rt=et),_e.points.unshift(intersectRect$1(et,nt)),_e.points.push(intersectRect$1(tt,rt))})}function fixupEdgeLabelCoords(j){forEach(j.edges(),function($){var _e=j.edge($);if(has(_e,"x"))switch((_e.labelpos==="l"||_e.labelpos==="r")&&(_e.width-=_e.labeloffset),_e.labelpos){case"l":_e.x-=_e.width/2+_e.labeloffset;break;case"r":_e.x+=_e.width/2+_e.labeloffset;break}})}function reversePointsForReversedEdges(j){forEach(j.edges(),function($){var _e=j.edge($);_e.reversed&&_e.points.reverse()})}function removeBorderNodes(j){forEach(j.nodes(),function($){if(j.children($).length){var _e=j.node($),et=j.node(_e.borderTop),tt=j.node(_e.borderBottom),nt=j.node(last$1(_e.borderLeft)),rt=j.node(last$1(_e.borderRight));_e.width=Math.abs(rt.x-nt.x),_e.height=Math.abs(tt.y-et.y),_e.x=nt.x+_e.width/2,_e.y=et.y+_e.height/2}}),forEach(j.nodes(),function($){j.node($).dummy==="border"&&j.removeNode($)})}function removeSelfEdges(j){forEach(j.edges(),function($){if($.v===$.w){var _e=j.node($.v);_e.selfEdges||(_e.selfEdges=[]),_e.selfEdges.push({e:$,label:j.edge($)}),j.removeEdge($)}})}function insertSelfEdges(j){var $=buildLayerMatrix(j);forEach($,function(_e){var et=0;forEach(_e,function(tt,nt){var rt=j.node(tt);rt.order=nt+et,forEach(rt.selfEdges,function(it){addDummyNode(j,"selfedge",{width:it.label.width,height:it.label.height,rank:rt.rank,order:nt+ ++et,e:it.e,label:it.label},"_se")}),delete rt.selfEdges})})}function positionSelfEdges(j){forEach(j.nodes(),function($){var _e=j.node($);if(_e.dummy==="selfedge"){var et=j.node(_e.e.v),tt=et.x+et.width/2,nt=et.y,rt=_e.x-tt,it=et.height/2;j.setEdge(_e.e,_e.label),j.removeNode($),_e.label.points=[{x:tt+2*rt/3,y:nt-it},{x:tt+5*rt/6,y:nt-it},{x:tt+rt,y:nt},{x:tt+5*rt/6,y:nt+it},{x:tt+2*rt/3,y:nt+it}],_e.label.x=_e.x,_e.label.y=_e.y}})}function selectNumberAttrs(j,$){return mapValues(pick$1(j,$),Number)}function canonicalize(j){var $={};return forEach(j,function(_e,et){$[et.toLowerCase()]=_e}),$}function isSubgraph(j,$){return!!j.children($).length}function edgeToId(j){return escapeId(j.v)+":"+escapeId(j.w)+":"+escapeId(j.name)}var ID_DELIM=/:/g;function escapeId(j){return j?String(j).replace(ID_DELIM,"\\:"):""}function applyStyle(j,$){$&&j.attr("style",$)}function applyClass(j,$,_e){$&&j.attr("class",$).attr("class",_e+" "+j.attr("class"))}function applyTransition(j,$){var _e=$.graph();if(isPlainObject(_e)){var et=_e.transition;if(isFunction(et))return et(j)}return j}var arrows={normal,vee,undirected};function setArrows(j){arrows=j}function normal(j,$,_e,et){var tt=j.append("marker").attr("id",$).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),nt=tt.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle(nt,_e[et+"Style"]),_e[et+"Class"]&&nt.attr("class",_e[et+"Class"])}function vee(j,$,_e,et){var tt=j.append("marker").attr("id",$).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),nt=tt.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle(nt,_e[et+"Style"]),_e[et+"Class"]&&nt.attr("class",_e[et+"Class"])}function undirected(j,$,_e,et){var tt=j.append("marker").attr("id",$).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),nt=tt.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle(nt,_e[et+"Style"]),_e[et+"Class"]&&nt.attr("class",_e[et+"Class"])}function addHtmlLabel(j,$){var _e=j.append("foreignObject").attr("width","100000"),et=_e.append("xhtml:div");et.attr("xmlns","http://www.w3.org/1999/xhtml");var tt=$.label;switch(typeof tt){case"function":et.insert(tt);break;case"object":et.insert(function(){return tt});break;default:et.html(tt)}applyStyle(et,$.labelStyle),et.style("display","inline-block"),et.style("white-space","nowrap");var nt=et.node().getBoundingClientRect();return _e.attr("width",nt.width).attr("height",nt.height),_e}function addSVGLabel(j,$){var _e=j;return _e.node().appendChild($.label),applyStyle(_e,$.labelStyle),_e}function addTextLabel(j,$){for(var _e=j.append("text"),et=processEscapeSequences($.label).split(`
`),tt=0;tt<et.length;tt++)_e.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(et[tt]);return applyStyle(_e,$.labelStyle),_e}function processEscapeSequences(j){for(var $="",_e=!1,et,tt=0;tt<j.length;++tt)if(et=j[tt],_e){switch(et){case"n":$+=`
`;break;default:$+=et}_e=!1}else et==="\\"?_e=!0:$+=et;return $}function addLabel(j,$,_e){var et=$.label,tt=j.append("g");$.labelType==="svg"?addSVGLabel(tt,$):typeof et!="string"||$.labelType==="html"?addHtmlLabel(tt,$):addTextLabel(tt,$);var nt=tt.node().getBBox(),rt;switch(_e){case"top":rt=-$.height/2;break;case"bottom":rt=$.height/2-nt.height;break;default:rt=-nt.height/2}return tt.attr("transform","translate("+-nt.width/2+","+rt+")"),tt}var createClusters=function(j,$){var _e=$.nodes().filter(function(nt){return isSubgraph($,nt)}),et=j.selectAll("g.cluster").data(_e,function(nt){return nt});applyTransition(et.exit(),$).style("opacity",0).remove();var tt=et.enter().append("g").attr("class","cluster").attr("id",function(nt){var rt=$.node(nt);return rt.id}).style("opacity",0).each(function(nt){var rt=$.node(nt),it=select(this);select(this).append("rect");var st=it.append("g").attr("class","label");addLabel(st,rt,rt.clusterLabelPos)});return et=et.merge(tt),et=applyTransition(et,$).style("opacity",1),et.selectAll("rect").each(function(nt){var rt=$.node(nt),it=select(this);applyStyle(it,rt.style)}),et};function setCreateClusters(j){createClusters=j}let createEdgeLabels=function(j,$){var _e=j.selectAll("g.edgeLabel").data($.edges(),function(tt){return edgeToId(tt)}).classed("update",!0);_e.exit().remove(),_e.enter().append("g").classed("edgeLabel",!0).style("opacity",0),_e=j.selectAll("g.edgeLabel"),_e.each(function(tt){var nt=select(this);nt.select(".label").remove();var rt=$.edge(tt),it=addLabel(nt,$.edge(tt),0).classed("label",!0),st=it.node().getBBox();rt.labelId&&it.attr("id",rt.labelId),has(rt,"width")||(rt.width=st.width),has(rt,"height")||(rt.height=st.height)});var et;return _e.exit?et=_e.exit():et=_e.selectAll(null),applyTransition(et,$).style("opacity",0).remove(),_e};function setCreateEdgeLabels(j){createEdgeLabels=j}function intersectNode(j,$){return j.intersect($)}var createEdgePaths=function(j,$,_e){var et=j.selectAll("g.edgePath").data($.edges(),function(rt){return edgeToId(rt)}).classed("update",!0),tt=enter(et,$);exit(et,$);var nt=et.merge!==void 0?et.merge(tt):et;return applyTransition(nt,$).style("opacity",1),nt.each(function(rt){var it=select(this),st=$.edge(rt);st.elem=this,st.id&&it.attr("id",st.id),applyClass(it,st.class,(it.classed("update")?"update ":"")+"edgePath")}),nt.selectAll("path.path").each(function(rt){var it=$.edge(rt);it.arrowheadId=uniqueId("arrowhead");var st=select(this).attr("marker-end",function(){return"url("+makeFragmentRef(location.href,it.arrowheadId)+")"}).style("fill","none");applyTransition(st,$).attr("d",function(ot){return calcPoints($,ot)}),applyStyle(st,it.style)}),nt.selectAll("defs *").remove(),nt.selectAll("defs").each(function(rt){var it=$.edge(rt),st=_e[it.arrowhead];st(select(this),it.arrowheadId,it,"arrowhead")}),nt};function setCreateEdgePaths(j){createEdgePaths=j}function makeFragmentRef(j,$){var _e=j.split("#")[0];return _e+"#"+$}function calcPoints(j,$){var _e=j.edge($),et=j.node($.v),tt=j.node($.w),nt=_e.points.slice(1,_e.points.length-1);return nt.unshift(intersectNode(et,nt[0])),nt.push(intersectNode(tt,nt[nt.length-1])),createLine(_e,nt)}function createLine(j,$){var _e=(line||svg.line)().x(function(et){return et.x}).y(function(et){return et.y});return(_e.curve||_e.interpolate)(j.curve),_e($)}function getCoords(j){var $=j.getBBox(),_e=j.ownerSVGElement.getScreenCTM().inverse().multiply(j.getScreenCTM()).translate($.width/2,$.height/2);return{x:_e.e,y:_e.f}}function enter(j,$){var _e=j.enter().append("g").attr("class","edgePath").style("opacity",0);return _e.append("path").attr("class","path").attr("d",function(et){var tt=$.edge(et),nt=$.node(et.v).elem,rt=range$1(tt.points.length).map(function(){return getCoords(nt)});return createLine(tt,rt)}),_e.append("defs"),_e}function exit(j,$){var _e=j.exit();applyTransition(_e,$).style("opacity",0).remove()}var createNodes=function(j,$,_e){var et=$.nodes().filter(function(rt){return!isSubgraph($,rt)}),tt=j.selectAll("g.node").data(et,function(rt){return rt}).classed("update",!0);tt.exit().remove(),tt.enter().append("g").attr("class","node").style("opacity",0),tt=j.selectAll("g.node"),tt.each(function(rt){var it=$.node(rt),st=select(this);applyClass(st,it.class,(st.classed("update")?"update ":"")+"node"),st.select("g.label").remove();var ot=st.append("g").attr("class","label"),at=addLabel(ot,it),lt=_e[it.shape],ut=pick$1(at.node().getBBox(),"width","height");it.elem=this,it.id&&st.attr("id",it.id),it.labelId&&ot.attr("id",it.labelId),has(it,"width")&&(ut.width=it.width),has(it,"height")&&(ut.height=it.height),ut.width+=it.paddingLeft+it.paddingRight,ut.height+=it.paddingTop+it.paddingBottom,ot.attr("transform","translate("+(it.paddingLeft-it.paddingRight)/2+","+(it.paddingTop-it.paddingBottom)/2+")");var ct=select(this);ct.select(".label-container").remove();var ft=lt(ct,ut,it).classed("label-container",!0);applyStyle(ft,it.style);var dt=ft.node().getBBox();it.width=dt.width,it.height=dt.height});var nt;return tt.exit?nt=tt.exit():nt=tt.selectAll(null),applyTransition(nt,$).style("opacity",0).remove(),tt};function setCreateNodes(j){createNodes=j}function positionClusters(j,$){var _e=j.filter(function(){return!select(this).classed("update")});function et(tt){var nt=$.node(tt);return"translate("+nt.x+","+nt.y+")"}_e.attr("transform",et),applyTransition(j,$).style("opacity",1).attr("transform",et),applyTransition(_e.selectAll("rect"),$).attr("width",function(tt){return $.node(tt).width}).attr("height",function(tt){return $.node(tt).height}).attr("x",function(tt){var nt=$.node(tt);return-nt.width/2}).attr("y",function(tt){var nt=$.node(tt);return-nt.height/2})}function positionEdgeLabels(j,$){var _e=j.filter(function(){return!select(this).classed("update")});function et(tt){var nt=$.edge(tt);return has(nt,"x")?"translate("+nt.x+","+nt.y+")":""}_e.attr("transform",et),applyTransition(j,$).style("opacity",1).attr("transform",et)}function positionNodes(j,$){var _e=j.filter(function(){return!select(this).classed("update")});function et(tt){var nt=$.node(tt);return"translate("+nt.x+","+nt.y+")"}_e.attr("transform",et),applyTransition(j,$).style("opacity",1).attr("transform",et)}function intersectEllipse(j,$,_e,et){var tt=j.x,nt=j.y,rt=tt-et.x,it=nt-et.y,st=Math.sqrt($*$*it*it+_e*_e*rt*rt),ot=Math.abs($*_e*rt/st);et.x<tt&&(ot=-ot);var at=Math.abs($*_e*it/st);return et.y<nt&&(at=-at),{x:tt+ot,y:nt+at}}function intersectCircle(j,$,_e){return intersectEllipse(j,$,$,_e)}function intersectLine(j,$,_e,et){var tt,nt,rt,it,st,ot,at,lt,ut,ct,ft,dt,mt,pt,yt;if(tt=$.y-j.y,rt=j.x-$.x,st=$.x*j.y-j.x*$.y,ut=tt*_e.x+rt*_e.y+st,ct=tt*et.x+rt*et.y+st,!(ut!==0&&ct!==0&&sameSign(ut,ct))&&(nt=et.y-_e.y,it=_e.x-et.x,ot=et.x*_e.y-_e.x*et.y,at=nt*j.x+it*j.y+ot,lt=nt*$.x+it*$.y+ot,!(at!==0&&lt!==0&&sameSign(at,lt))&&(ft=tt*it-nt*rt,ft!==0)))return dt=Math.abs(ft/2),mt=rt*ot-it*st,pt=mt<0?(mt-dt)/ft:(mt+dt)/ft,mt=nt*st-tt*ot,yt=mt<0?(mt-dt)/ft:(mt+dt)/ft,{x:pt,y:yt}}function sameSign(j,$){return j*$>0}function intersectPolygon(j,$,_e){var et=j.x,tt=j.y,nt=[],rt=Number.POSITIVE_INFINITY,it=Number.POSITIVE_INFINITY;$.forEach(function(ft){rt=Math.min(rt,ft.x),it=Math.min(it,ft.y)});for(var st=et-j.width/2-rt,ot=tt-j.height/2-it,at=0;at<$.length;at++){var lt=$[at],ut=$[at<$.length-1?at+1:0],ct=intersectLine(j,_e,{x:st+lt.x,y:ot+lt.y},{x:st+ut.x,y:ot+ut.y});ct&&nt.push(ct)}return nt.length?(nt.length>1&&nt.sort(function(ft,dt){var mt=ft.x-_e.x,pt=ft.y-_e.y,yt=Math.sqrt(mt*mt+pt*pt),vt=dt.x-_e.x,Ct=dt.y-_e.y,At=Math.sqrt(vt*vt+Ct*Ct);return yt<At?-1:yt===At?0:1}),nt[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",j),j)}function intersectRect(j,$){var _e=j.x,et=j.y,tt=$.x-_e,nt=$.y-et,rt=j.width/2,it=j.height/2,st,ot;return Math.abs(nt)*rt>Math.abs(tt)*it?(nt<0&&(it=-it),st=nt===0?0:it*tt/nt,ot=it):(tt<0&&(rt=-rt),st=rt,ot=tt===0?0:rt*nt/tt),{x:_e+st,y:et+ot}}var shapes={rect,ellipse,circle,diamond};function setShapes(j){shapes=j}function rect(j,$,_e){var et=j.insert("rect",":first-child").attr("rx",_e.rx).attr("ry",_e.ry).attr("x",-$.width/2).attr("y",-$.height/2).attr("width",$.width).attr("height",$.height);return _e.intersect=function(tt){return intersectRect(_e,tt)},et}function ellipse(j,$,_e){var et=$.width/2,tt=$.height/2,nt=j.insert("ellipse",":first-child").attr("x",-$.width/2).attr("y",-$.height/2).attr("rx",et).attr("ry",tt);return _e.intersect=function(rt){return intersectEllipse(_e,et,tt,rt)},nt}function circle(j,$,_e){var et=Math.max($.width,$.height)/2,tt=j.insert("circle",":first-child").attr("x",-$.width/2).attr("y",-$.height/2).attr("r",et);return _e.intersect=function(nt){return intersectCircle(_e,et,nt)},tt}function diamond(j,$,_e){var et=$.width*Math.SQRT2/2,tt=$.height*Math.SQRT2/2,nt=[{x:0,y:-tt},{x:-et,y:0},{x:0,y:tt},{x:et,y:0}],rt=j.insert("polygon",":first-child").attr("points",nt.map(function(it){return it.x+","+it.y}).join(" "));return _e.intersect=function(it){return intersectPolygon(_e,nt,it)},rt}function render(){var j=function($,_e){preProcessGraph(_e);var et=createOrSelectGroup($,"output"),tt=createOrSelectGroup(et,"clusters"),nt=createOrSelectGroup(et,"edgePaths"),rt=createEdgeLabels(createOrSelectGroup(et,"edgeLabels"),_e),it=createNodes(createOrSelectGroup(et,"nodes"),_e,shapes);layout(_e),positionNodes(it,_e),positionEdgeLabels(rt,_e),createEdgePaths(nt,_e,arrows);var st=createClusters(tt,_e);positionClusters(st,_e),postProcessGraph(_e)};return j.createNodes=function($){return arguments.length?(setCreateNodes($),j):createNodes},j.createClusters=function($){return arguments.length?(setCreateClusters($),j):createClusters},j.createEdgeLabels=function($){return arguments.length?(setCreateEdgeLabels($),j):createEdgeLabels},j.createEdgePaths=function($){return arguments.length?(setCreateEdgePaths($),j):createEdgePaths},j.shapes=function($){return arguments.length?(setShapes($),j):shapes},j.arrows=function($){return arguments.length?(setArrows($),j):arrows},j}var NODE_DEFAULT_ATTRS={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},EDGE_DEFAULT_ATTRS={arrowhead:"normal",curve:curveLinear};function preProcessGraph(j){j.nodes().forEach(function($){var _e=j.node($);!has(_e,"label")&&!j.children($).length&&(_e.label=$),has(_e,"paddingX")&&defaults$1(_e,{paddingLeft:_e.paddingX,paddingRight:_e.paddingX}),has(_e,"paddingY")&&defaults$1(_e,{paddingTop:_e.paddingY,paddingBottom:_e.paddingY}),has(_e,"padding")&&defaults$1(_e,{paddingLeft:_e.padding,paddingRight:_e.padding,paddingTop:_e.padding,paddingBottom:_e.padding}),defaults$1(_e,NODE_DEFAULT_ATTRS),forEach(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(et){_e[et]=Number(_e[et])}),has(_e,"width")&&(_e._prevWidth=_e.width),has(_e,"height")&&(_e._prevHeight=_e.height)}),j.edges().forEach(function($){var _e=j.edge($);has(_e,"label")||(_e.label=""),defaults$1(_e,EDGE_DEFAULT_ATTRS)})}function postProcessGraph(j){forEach(j.nodes(),function($){var _e=j.node($);has(_e,"_prevWidth")?_e.width=_e._prevWidth:delete _e.width,has(_e,"_prevHeight")?_e.height=_e._prevHeight:delete _e.height,delete _e._prevWidth,delete _e._prevHeight})}function createOrSelectGroup(j,$){var _e=j.select("g."+$);return _e.empty()&&(_e=j.append("g").attr("class",$)),_e}function Tree({semantics:j,setSvgElem:$}){console.log("rendering tree: ",j);const _e=new Graph({directed:!0});_e.setGraph({}),_e.graph().rankdir=(j==null?void 0:j.rankdir)??"TB",_e.graph().ranksep=15,_e.graph().nodesep=20,_e.setDefaultEdgeLabel(function(){return{}});const et=({node:st,statusPercentage:ot})=>{const at='"trebuchet ms",verdana,arial,sans-serif',lt=st.intermediate?7:13,ut=st.intermediate?`font: bold ${lt}px ${at};`:`font: 300 ${lt}px ${at};`,ct=st.intermediate?"ellipse":"rect",ft=ct==="rect"?"stroke: black; stroke-width: 1px; rx: 5px; ry: 5px;":"stroke: black; stroke-width: 1px;",dt={label:wrapLines(st.label,20).join(`
`),shape:ct,style:`${ft} fill:#dff8ff;`,labelStyle:ut+"fill: black;"};st.intermediate&&(dt.width=5,dt.height=5,dt.style=`${ft} fill:white;`),ot!==void 0&&(ot>=70&&(dt.style=`${ft} fill:#95f795;`),ot<70&&ot>30&&(dt.style=`${ft} fill:#fdfdbe;`),ot<=30&&(dt.style=`${ft} fill:#ffb2b2;`)),console.log("creating node ",st.key),_e.setNode(st.key,dt)};if(React.useEffect(()=>{const ot=select("svg").select("g"),at=render(),lt=select("#tree-svg-container");if(!(lt!=null&&lt.node())||!(ot!=null&&ot.node()))return;at(ot,_e),ot.attr("transform",computeResizeTransform(ot.node(),lt.node(),13,13)+", translate(13, 13)");const ut=10;ot.selectAll("g.node .annotation-circle").remove(),ot.selectAll("g.node .annotation-label").remove();const ct=ot.selectAll("g.node").filter(function(dt){var mt;return(mt=j==null?void 0:j.nodes.get(dt))==null?void 0:mt.annotation});ct.append("circle").attr("class","annotation-circle").attr("cx",function(){const dt=this.parentNode;console.log("elem",dt);const mt=dt.getElementsByTagName("rect")[0];return mt?-mt.width.baseVal.value/2:0}).attr("cy",function(){const dt=this.parentNode;console.log("elem",dt);const mt=dt.getElementsByTagName("rect")[0];return mt?-mt.height.baseVal.value/2:0}).attr("r",ut).style("fill","white").style("stroke","black").style("stroke-width","1px");const ft=dt=>dt&&dt.length<2?11:8;ct.append("text").attr("class","annotation-label").style("font-size",function(){var dt;return ft((dt=j==null?void 0:j.nodes.get(this.parentNode.__data__))==null?void 0:dt.annotation)+"px"}).attr("x",function(){const dt=this.parentNode;console.log("elem",dt);const mt=dt.getElementsByTagName("rect")[0];return mt?-mt.width.baseVal.value/2:0}).attr("y",function(){const dt=this.parentNode;console.log("elem",dt);const mt=dt.getElementsByTagName("rect")[0];return mt?-mt.height.baseVal.value/2+1.5:0}).attr("r",ut).text(function(){var dt;return(dt=nt.get(this.parentNode.__data__))==null?void 0:dt.annotation}),$(document.getElementById("treeSvg"))},[j]),!j)return jsxRuntimeExports.jsx("div",{children:" No AST "});const tt=({from:st,to:ot})=>{var lt,ut;const at=((lt=j.nodes.get(st))==null?void 0:lt.intermediate)||((ut=j.nodes.get(ot))==null?void 0:ut.intermediate);_e.setEdge(st,ot,{curve:basis,style:"stroke: gray; fill:none; stroke-width: 1px;",minlen:at?1:2})},{nodes:nt,edges:rt}=j;console.log("{nodes, edges}",{nodes:nt,edges:rt});for(const[st,ot]of nt)et({node:ot,statusPercentage:ot.statusPercentage});for(const st of rt)tt({from:st.from,to:st.to});const it=`
  .annotation-label {
    fill: black;
    text-anchor: middle;
    font-weight: bold;
    alignment-baseline: middle;
  }
  `;return jsxRuntimeExports.jsx("div",{id:"tree-svg-container",style:{width:"100%",height:"500"},children:jsxRuntimeExports.jsxs("svg",{id:"treeSvg",width:"100%",height:"100%",version:"1.1",preserveAspectRatio:"xMinYMin",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("style",{children:it}),jsxRuntimeExports.jsx("g",{})]})})}var raf$1={exports:{}},performanceNow={exports:{}};(function(){var j,$,_e,et,tt,nt;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(j()-tt)/1e6},$=process.hrtime,j=function(){var rt;return rt=$(),rt[0]*1e9+rt[1]},et=j(),nt=process.uptime()*1e9,tt=et-nt):Date.now?(performanceNow.exports=function(){return Date.now()-_e},_e=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-_e},_e=new Date().getTime())}).call(commonjsGlobal);var performanceNowExports=performanceNow.exports,now=performanceNowExports,root=typeof window>"u"?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i$1=0;!raf&&i$1<vendors.length;i$1++)raf=root[vendors[i$1]+"Request"+suffix],caf=root[vendors[i$1]+"Cancel"+suffix]||root[vendors[i$1]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(j){if(queue.length===0){var $=now(),_e=Math.max(0,frameDuration-($-last));last=_e+$,setTimeout(function(){var et=queue.slice(0);queue.length=0;for(var tt=0;tt<et.length;tt++)if(!et[tt].cancelled)try{et[tt].callback(last)}catch(nt){setTimeout(function(){throw nt},0)}},Math.round(_e))}return queue.push({handle:++id,callback:j,cancelled:!1}),id},caf=function(j){for(var $=0;$<queue.length;$++)queue[$].handle===j&&(queue[$].cancelled=!0)}}raf$1.exports=function(j){return raf.call(root,j)};raf$1.exports.cancel=function(){caf.apply(root,arguments)};raf$1.exports.polyfill=function(j){j||(j=root),j.requestAnimationFrame=raf,j.cancelAnimationFrame=caf};var rafExports=raf$1.exports;const requestAnimationFrame=getDefaultExportFromCjs(rafExports);var rgbcolor=function(j){this.ok=!1,this.alpha=1,j.charAt(0)=="#"&&(j=j.substr(1,6)),j=j.replace(/ /g,""),j=j.toLowerCase();var $={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};j=$[j]||j;for(var _e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(st){return[parseInt(st[1]),parseInt(st[2]),parseInt(st[3]),parseFloat(st[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(st){return[parseInt(st[1]),parseInt(st[2]),parseInt(st[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(st){return[parseInt(st[1],16),parseInt(st[2],16),parseInt(st[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(st){return[parseInt(st[1]+st[1],16),parseInt(st[2]+st[2],16),parseInt(st[3]+st[3],16)]}}],et=0;et<_e.length;et++){var tt=_e[et].re,nt=_e[et].process,rt=tt.exec(j);if(rt){var it=nt(rt);this.r=it[0],this.g=it[1],this.b=it[2],it.length>3&&(this.alpha=it[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var st=this.r.toString(16),ot=this.g.toString(16),at=this.b.toString(16);return st.length==1&&(st="0"+st),ot.length==1&&(ot="0"+ot),at.length==1&&(at="0"+at),"#"+st+ot+at},this.getHelpXML=function(){for(var st=new Array,ot=0;ot<_e.length;ot++)for(var at=_e[ot].example,lt=0;lt<at.length;lt++)st[st.length]=at[lt];for(var ut in $)st[st.length]=ut;var ct=document.createElement("ul");ct.setAttribute("id","rgbcolor-examples");for(var ot=0;ot<st.length;ot++)try{var ft=document.createElement("li"),dt=new RGBColor(st[ot]),mt=document.createElement("div");mt.style.cssText="margin: 3px; border: 1px solid black; background:"+dt.toHex()+"; color:"+dt.toHex(),mt.appendChild(document.createTextNode("test"));var pt=document.createTextNode(" "+st[ot]+" -> "+dt.toRGB()+" -> "+dt.toHex());ft.appendChild(mt),ft.appendChild(pt),ct.appendChild(ft)}catch{}return ct}};const RGBColor$1=getDefaultExportFromCjs(rgbcolor);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(j,$){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,et){_e.__proto__=et}||function(_e,et){for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])})(j,$)};function r(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function _e(){this.constructor=j}t(j,$),j.prototype=$===null?Object.create($):(_e.prototype=$.prototype,new _e)}function e(j){var $="";Array.isArray(j)||(j=[j]);for(var _e=0;_e<j.length;_e++){var et=j[_e];if(et.type===_$2.CLOSE_PATH)$+="z";else if(et.type===_$2.HORIZ_LINE_TO)$+=(et.relative?"h":"H")+et.x;else if(et.type===_$2.VERT_LINE_TO)$+=(et.relative?"v":"V")+et.y;else if(et.type===_$2.MOVE_TO)$+=(et.relative?"m":"M")+et.x+" "+et.y;else if(et.type===_$2.LINE_TO)$+=(et.relative?"l":"L")+et.x+" "+et.y;else if(et.type===_$2.CURVE_TO)$+=(et.relative?"c":"C")+et.x1+" "+et.y1+" "+et.x2+" "+et.y2+" "+et.x+" "+et.y;else if(et.type===_$2.SMOOTH_CURVE_TO)$+=(et.relative?"s":"S")+et.x2+" "+et.y2+" "+et.x+" "+et.y;else if(et.type===_$2.QUAD_TO)$+=(et.relative?"q":"Q")+et.x1+" "+et.y1+" "+et.x+" "+et.y;else if(et.type===_$2.SMOOTH_QUAD_TO)$+=(et.relative?"t":"T")+et.x+" "+et.y;else{if(et.type!==_$2.ARC)throw new Error('Unexpected command type "'+et.type+'" at index '+_e+".");$+=(et.relative?"a":"A")+et.rX+" "+et.rY+" "+et.xRot+" "+ +et.lArcFlag+" "+ +et.sweepFlag+" "+et.x+" "+et.y}}return $}function i(j,$){var _e=j[0],et=j[1];return[_e*Math.cos($)-et*Math.sin($),_e*Math.sin($)+et*Math.cos($)]}function a$1(){for(var j=[],$=0;$<arguments.length;$++)j[$]=arguments[$];for(var _e=0;_e<j.length;_e++)if(typeof j[_e]!="number")throw new Error("assertNumbers arguments["+_e+"] is not a number. "+typeof j[_e]+" == typeof "+j[_e]);return!0}var n=Math.PI;function o(j,$,_e){j.lArcFlag=j.lArcFlag===0?0:1,j.sweepFlag=j.sweepFlag===0?0:1;var et=j.rX,tt=j.rY,nt=j.x,rt=j.y;et=Math.abs(j.rX),tt=Math.abs(j.rY);var it=i([($-nt)/2,(_e-rt)/2],-j.xRot/180*n),st=it[0],ot=it[1],at=Math.pow(st,2)/Math.pow(et,2)+Math.pow(ot,2)/Math.pow(tt,2);1<at&&(et*=Math.sqrt(at),tt*=Math.sqrt(at)),j.rX=et,j.rY=tt;var lt=Math.pow(et,2)*Math.pow(ot,2)+Math.pow(tt,2)*Math.pow(st,2),ut=(j.lArcFlag!==j.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(et,2)*Math.pow(tt,2)-lt)/lt)),ct=et*ot/tt*ut,ft=-tt*st/et*ut,dt=i([ct,ft],j.xRot/180*n);j.cX=dt[0]+($+nt)/2,j.cY=dt[1]+(_e+rt)/2,j.phi1=Math.atan2((ot-ft)/tt,(st-ct)/et),j.phi2=Math.atan2((-ot-ft)/tt,(-st-ct)/et),j.sweepFlag===0&&j.phi2>j.phi1&&(j.phi2-=2*n),j.sweepFlag===1&&j.phi2<j.phi1&&(j.phi2+=2*n),j.phi1*=180/n,j.phi2*=180/n}function s(j,$,_e){a$1(j,$,_e);var et=j*j+$*$-_e*_e;if(0>et)return[];if(et===0)return[[j*_e/(j*j+$*$),$*_e/(j*j+$*$)]];var tt=Math.sqrt(et);return[[(j*_e+$*tt)/(j*j+$*$),($*_e-j*tt)/(j*j+$*$)],[(j*_e-$*tt)/(j*j+$*$),($*_e+j*tt)/(j*j+$*$)]]}var u$1,h$1=Math.PI/180;function c$2(j,$,_e){return(1-_e)*j+_e*$}function y$1(j,$,_e,et){return j+Math.cos(et/180*n)*$+Math.sin(et/180*n)*_e}function p$2(j,$,_e,et){var tt=1e-6,nt=$-j,rt=_e-$,it=3*nt+3*(et-_e)-6*rt,st=6*(rt-nt),ot=3*nt;return Math.abs(it)<tt?[-ot/st]:function(at,lt,ut){ut===void 0&&(ut=1e-6);var ct=at*at/4-lt;if(ct<-ut)return[];if(ct<=ut)return[-at/2];var ft=Math.sqrt(ct);return[-at/2-ft,-at/2+ft]}(st/it,ot/it,tt)}function m$1(j,$,_e,et,tt){var nt=1-tt;return j*(nt*nt*nt)+$*(3*nt*nt*tt)+_e*(3*nt*tt*tt)+et*(tt*tt*tt)}(function(j){function $(){return tt(function(it,st,ot){return it.relative&&(it.x1!==void 0&&(it.x1+=st),it.y1!==void 0&&(it.y1+=ot),it.x2!==void 0&&(it.x2+=st),it.y2!==void 0&&(it.y2+=ot),it.x!==void 0&&(it.x+=st),it.y!==void 0&&(it.y+=ot),it.relative=!1),it})}function _e(){var it=NaN,st=NaN,ot=NaN,at=NaN;return tt(function(lt,ut,ct){return lt.type&_$2.SMOOTH_CURVE_TO&&(lt.type=_$2.CURVE_TO,it=isNaN(it)?ut:it,st=isNaN(st)?ct:st,lt.x1=lt.relative?ut-it:2*ut-it,lt.y1=lt.relative?ct-st:2*ct-st),lt.type&_$2.CURVE_TO?(it=lt.relative?ut+lt.x2:lt.x2,st=lt.relative?ct+lt.y2:lt.y2):(it=NaN,st=NaN),lt.type&_$2.SMOOTH_QUAD_TO&&(lt.type=_$2.QUAD_TO,ot=isNaN(ot)?ut:ot,at=isNaN(at)?ct:at,lt.x1=lt.relative?ut-ot:2*ut-ot,lt.y1=lt.relative?ct-at:2*ct-at),lt.type&_$2.QUAD_TO?(ot=lt.relative?ut+lt.x1:lt.x1,at=lt.relative?ct+lt.y1:lt.y1):(ot=NaN,at=NaN),lt})}function et(){var it=NaN,st=NaN;return tt(function(ot,at,lt){if(ot.type&_$2.SMOOTH_QUAD_TO&&(ot.type=_$2.QUAD_TO,it=isNaN(it)?at:it,st=isNaN(st)?lt:st,ot.x1=ot.relative?at-it:2*at-it,ot.y1=ot.relative?lt-st:2*lt-st),ot.type&_$2.QUAD_TO){it=ot.relative?at+ot.x1:ot.x1,st=ot.relative?lt+ot.y1:ot.y1;var ut=ot.x1,ct=ot.y1;ot.type=_$2.CURVE_TO,ot.x1=((ot.relative?0:at)+2*ut)/3,ot.y1=((ot.relative?0:lt)+2*ct)/3,ot.x2=(ot.x+2*ut)/3,ot.y2=(ot.y+2*ct)/3}else it=NaN,st=NaN;return ot})}function tt(it){var st=0,ot=0,at=NaN,lt=NaN;return function(ut){if(isNaN(at)&&!(ut.type&_$2.MOVE_TO))throw new Error("path must start with moveto");var ct=it(ut,st,ot,at,lt);return ut.type&_$2.CLOSE_PATH&&(st=at,ot=lt),ut.x!==void 0&&(st=ut.relative?st+ut.x:ut.x),ut.y!==void 0&&(ot=ut.relative?ot+ut.y:ut.y),ut.type&_$2.MOVE_TO&&(at=st,lt=ot),ct}}function nt(it,st,ot,at,lt,ut){return a$1(it,st,ot,at,lt,ut),tt(function(ct,ft,dt,mt){var pt=ct.x1,yt=ct.x2,vt=ct.relative&&!isNaN(mt),Ct=ct.x!==void 0?ct.x:vt?0:ft,At=ct.y!==void 0?ct.y:vt?0:dt;function $t(Xt){return Xt*Xt}ct.type&_$2.HORIZ_LINE_TO&&st!==0&&(ct.type=_$2.LINE_TO,ct.y=ct.relative?0:dt),ct.type&_$2.VERT_LINE_TO&&ot!==0&&(ct.type=_$2.LINE_TO,ct.x=ct.relative?0:ft),ct.x!==void 0&&(ct.x=ct.x*it+At*ot+(vt?0:lt)),ct.y!==void 0&&(ct.y=Ct*st+ct.y*at+(vt?0:ut)),ct.x1!==void 0&&(ct.x1=ct.x1*it+ct.y1*ot+(vt?0:lt)),ct.y1!==void 0&&(ct.y1=pt*st+ct.y1*at+(vt?0:ut)),ct.x2!==void 0&&(ct.x2=ct.x2*it+ct.y2*ot+(vt?0:lt)),ct.y2!==void 0&&(ct.y2=yt*st+ct.y2*at+(vt?0:ut));var bt=it*at-st*ot;if(ct.xRot!==void 0&&(it!==1||st!==0||ot!==0||at!==1))if(bt===0)delete ct.rX,delete ct.rY,delete ct.xRot,delete ct.lArcFlag,delete ct.sweepFlag,ct.type=_$2.LINE_TO;else{var Bt=ct.xRot*Math.PI/180,Rt=Math.sin(Bt),St=Math.cos(Bt),kt=1/$t(ct.rX),Pt=1/$t(ct.rY),Mt=$t(St)*kt+$t(Rt)*Pt,Lt=2*Rt*St*(kt-Pt),zt=$t(Rt)*kt+$t(St)*Pt,Kt=Mt*at*at-Lt*st*at+zt*st*st,Ut=Lt*(it*at+st*ot)-2*(Mt*ot*at+zt*it*st),It=Mt*ot*ot-Lt*it*ot+zt*it*it,Vt=(Math.atan2(Ut,Kt-It)+Math.PI)%Math.PI/2,jt=Math.sin(Vt),Yt=Math.cos(Vt);ct.rX=Math.abs(bt)/Math.sqrt(Kt*$t(Yt)+Ut*jt*Yt+It*$t(jt)),ct.rY=Math.abs(bt)/Math.sqrt(Kt*$t(jt)-Ut*jt*Yt+It*$t(Yt)),ct.xRot=180*Vt/Math.PI}return ct.sweepFlag!==void 0&&0>bt&&(ct.sweepFlag=+!ct.sweepFlag),ct})}function rt(){return function(it){var st={};for(var ot in it)st[ot]=it[ot];return st}}j.ROUND=function(it){function st(ot){return Math.round(ot*it)/it}return it===void 0&&(it=1e13),a$1(it),function(ot){return ot.x1!==void 0&&(ot.x1=st(ot.x1)),ot.y1!==void 0&&(ot.y1=st(ot.y1)),ot.x2!==void 0&&(ot.x2=st(ot.x2)),ot.y2!==void 0&&(ot.y2=st(ot.y2)),ot.x!==void 0&&(ot.x=st(ot.x)),ot.y!==void 0&&(ot.y=st(ot.y)),ot.rX!==void 0&&(ot.rX=st(ot.rX)),ot.rY!==void 0&&(ot.rY=st(ot.rY)),ot}},j.TO_ABS=$,j.TO_REL=function(){return tt(function(it,st,ot){return it.relative||(it.x1!==void 0&&(it.x1-=st),it.y1!==void 0&&(it.y1-=ot),it.x2!==void 0&&(it.x2-=st),it.y2!==void 0&&(it.y2-=ot),it.x!==void 0&&(it.x-=st),it.y!==void 0&&(it.y-=ot),it.relative=!0),it})},j.NORMALIZE_HVZ=function(it,st,ot){return it===void 0&&(it=!0),st===void 0&&(st=!0),ot===void 0&&(ot=!0),tt(function(at,lt,ut,ct,ft){if(isNaN(ct)&&!(at.type&_$2.MOVE_TO))throw new Error("path must start with moveto");return st&&at.type&_$2.HORIZ_LINE_TO&&(at.type=_$2.LINE_TO,at.y=at.relative?0:ut),ot&&at.type&_$2.VERT_LINE_TO&&(at.type=_$2.LINE_TO,at.x=at.relative?0:lt),it&&at.type&_$2.CLOSE_PATH&&(at.type=_$2.LINE_TO,at.x=at.relative?ct-lt:ct,at.y=at.relative?ft-ut:ft),at.type&_$2.ARC&&(at.rX===0||at.rY===0)&&(at.type=_$2.LINE_TO,delete at.rX,delete at.rY,delete at.xRot,delete at.lArcFlag,delete at.sweepFlag),at})},j.NORMALIZE_ST=_e,j.QT_TO_C=et,j.INFO=tt,j.SANITIZE=function(it){it===void 0&&(it=0),a$1(it);var st=NaN,ot=NaN,at=NaN,lt=NaN;return tt(function(ut,ct,ft,dt,mt){var pt=Math.abs,yt=!1,vt=0,Ct=0;if(ut.type&_$2.SMOOTH_CURVE_TO&&(vt=isNaN(st)?0:ct-st,Ct=isNaN(ot)?0:ft-ot),ut.type&(_$2.CURVE_TO|_$2.SMOOTH_CURVE_TO)?(st=ut.relative?ct+ut.x2:ut.x2,ot=ut.relative?ft+ut.y2:ut.y2):(st=NaN,ot=NaN),ut.type&_$2.SMOOTH_QUAD_TO?(at=isNaN(at)?ct:2*ct-at,lt=isNaN(lt)?ft:2*ft-lt):ut.type&_$2.QUAD_TO?(at=ut.relative?ct+ut.x1:ut.x1,lt=ut.relative?ft+ut.y1:ut.y2):(at=NaN,lt=NaN),ut.type&_$2.LINE_COMMANDS||ut.type&_$2.ARC&&(ut.rX===0||ut.rY===0||!ut.lArcFlag)||ut.type&_$2.CURVE_TO||ut.type&_$2.SMOOTH_CURVE_TO||ut.type&_$2.QUAD_TO||ut.type&_$2.SMOOTH_QUAD_TO){var At=ut.x===void 0?0:ut.relative?ut.x:ut.x-ct,$t=ut.y===void 0?0:ut.relative?ut.y:ut.y-ft;vt=isNaN(at)?ut.x1===void 0?vt:ut.relative?ut.x:ut.x1-ct:at-ct,Ct=isNaN(lt)?ut.y1===void 0?Ct:ut.relative?ut.y:ut.y1-ft:lt-ft;var bt=ut.x2===void 0?0:ut.relative?ut.x:ut.x2-ct,Bt=ut.y2===void 0?0:ut.relative?ut.y:ut.y2-ft;pt(At)<=it&&pt($t)<=it&&pt(vt)<=it&&pt(Ct)<=it&&pt(bt)<=it&&pt(Bt)<=it&&(yt=!0)}return ut.type&_$2.CLOSE_PATH&&pt(ct-dt)<=it&&pt(ft-mt)<=it&&(yt=!0),yt?[]:ut})},j.MATRIX=nt,j.ROTATE=function(it,st,ot){st===void 0&&(st=0),ot===void 0&&(ot=0),a$1(it,st,ot);var at=Math.sin(it),lt=Math.cos(it);return nt(lt,at,-at,lt,st-st*lt+ot*at,ot-st*at-ot*lt)},j.TRANSLATE=function(it,st){return st===void 0&&(st=0),a$1(it,st),nt(1,0,0,1,it,st)},j.SCALE=function(it,st){return st===void 0&&(st=it),a$1(it,st),nt(it,0,0,st,0,0)},j.SKEW_X=function(it){return a$1(it),nt(1,0,Math.atan(it),1,0,0)},j.SKEW_Y=function(it){return a$1(it),nt(1,Math.atan(it),0,1,0,0)},j.X_AXIS_SYMMETRY=function(it){return it===void 0&&(it=0),a$1(it),nt(-1,0,0,1,it,0)},j.Y_AXIS_SYMMETRY=function(it){return it===void 0&&(it=0),a$1(it),nt(1,0,0,-1,0,it)},j.A_TO_C=function(){return tt(function(it,st,ot){return _$2.ARC===it.type?function(at,lt,ut){var ct,ft,dt,mt;at.cX||o(at,lt,ut);for(var pt=Math.min(at.phi1,at.phi2),yt=Math.max(at.phi1,at.phi2)-pt,vt=Math.ceil(yt/90),Ct=new Array(vt),At=lt,$t=ut,bt=0;bt<vt;bt++){var Bt=c$2(at.phi1,at.phi2,bt/vt),Rt=c$2(at.phi1,at.phi2,(bt+1)/vt),St=Rt-Bt,kt=4/3*Math.tan(St*h$1/4),Pt=[Math.cos(Bt*h$1)-kt*Math.sin(Bt*h$1),Math.sin(Bt*h$1)+kt*Math.cos(Bt*h$1)],Mt=Pt[0],Lt=Pt[1],zt=[Math.cos(Rt*h$1),Math.sin(Rt*h$1)],Kt=zt[0],Ut=zt[1],It=[Kt+kt*Math.sin(Rt*h$1),Ut-kt*Math.cos(Rt*h$1)],Vt=It[0],jt=It[1];Ct[bt]={relative:at.relative,type:_$2.CURVE_TO};var Yt=function(Xt,sn){var on=i([Xt*at.rX,sn*at.rY],at.xRot),hn=on[0],cn=on[1];return[at.cX+hn,at.cY+cn]};ct=Yt(Mt,Lt),Ct[bt].x1=ct[0],Ct[bt].y1=ct[1],ft=Yt(Vt,jt),Ct[bt].x2=ft[0],Ct[bt].y2=ft[1],dt=Yt(Kt,Ut),Ct[bt].x=dt[0],Ct[bt].y=dt[1],at.relative&&(Ct[bt].x1-=At,Ct[bt].y1-=$t,Ct[bt].x2-=At,Ct[bt].y2-=$t,Ct[bt].x-=At,Ct[bt].y-=$t),At=(mt=[Ct[bt].x,Ct[bt].y])[0],$t=mt[1]}return Ct}(it,it.relative?0:st,it.relative?0:ot):it})},j.ANNOTATE_ARCS=function(){return tt(function(it,st,ot){return it.relative&&(st=0,ot=0),_$2.ARC===it.type&&o(it,st,ot),it})},j.CLONE=rt,j.CALCULATE_BOUNDS=function(){var it=function(ut){var ct={};for(var ft in ut)ct[ft]=ut[ft];return ct},st=$(),ot=et(),at=_e(),lt=tt(function(ut,ct,ft){var dt=at(ot(st(it(ut))));function mt(jt){jt>lt.maxX&&(lt.maxX=jt),jt<lt.minX&&(lt.minX=jt)}function pt(jt){jt>lt.maxY&&(lt.maxY=jt),jt<lt.minY&&(lt.minY=jt)}if(dt.type&_$2.DRAWING_COMMANDS&&(mt(ct),pt(ft)),dt.type&_$2.HORIZ_LINE_TO&&mt(dt.x),dt.type&_$2.VERT_LINE_TO&&pt(dt.y),dt.type&_$2.LINE_TO&&(mt(dt.x),pt(dt.y)),dt.type&_$2.CURVE_TO){mt(dt.x),pt(dt.y);for(var yt=0,vt=p$2(ct,dt.x1,dt.x2,dt.x);yt<vt.length;yt++)0<(Vt=vt[yt])&&1>Vt&&mt(m$1(ct,dt.x1,dt.x2,dt.x,Vt));for(var Ct=0,At=p$2(ft,dt.y1,dt.y2,dt.y);Ct<At.length;Ct++)0<(Vt=At[Ct])&&1>Vt&&pt(m$1(ft,dt.y1,dt.y2,dt.y,Vt))}if(dt.type&_$2.ARC){mt(dt.x),pt(dt.y),o(dt,ct,ft);for(var $t=dt.xRot/180*Math.PI,bt=Math.cos($t)*dt.rX,Bt=Math.sin($t)*dt.rX,Rt=-Math.sin($t)*dt.rY,St=Math.cos($t)*dt.rY,kt=dt.phi1<dt.phi2?[dt.phi1,dt.phi2]:-180>dt.phi2?[dt.phi2+360,dt.phi1+360]:[dt.phi2,dt.phi1],Pt=kt[0],Mt=kt[1],Lt=function(jt){var Yt=jt[0],Xt=jt[1],sn=180*Math.atan2(Xt,Yt)/Math.PI;return sn<Pt?sn+360:sn},zt=0,Kt=s(Rt,-bt,0).map(Lt);zt<Kt.length;zt++)(Vt=Kt[zt])>Pt&&Vt<Mt&&mt(y$1(dt.cX,bt,Rt,Vt));for(var Ut=0,It=s(St,-Bt,0).map(Lt);Ut<It.length;Ut++){var Vt;(Vt=It[Ut])>Pt&&Vt<Mt&&pt(y$1(dt.cY,Bt,St,Vt))}}return ut});return lt.minX=1/0,lt.maxX=-1/0,lt.minY=1/0,lt.maxY=-1/0,lt}})(u$1||(u$1={}));var O$1,l=function(){function j(){}return j.prototype.round=function($){return this.transform(u$1.ROUND($))},j.prototype.toAbs=function(){return this.transform(u$1.TO_ABS())},j.prototype.toRel=function(){return this.transform(u$1.TO_REL())},j.prototype.normalizeHVZ=function($,_e,et){return this.transform(u$1.NORMALIZE_HVZ($,_e,et))},j.prototype.normalizeST=function(){return this.transform(u$1.NORMALIZE_ST())},j.prototype.qtToC=function(){return this.transform(u$1.QT_TO_C())},j.prototype.aToC=function(){return this.transform(u$1.A_TO_C())},j.prototype.sanitize=function($){return this.transform(u$1.SANITIZE($))},j.prototype.translate=function($,_e){return this.transform(u$1.TRANSLATE($,_e))},j.prototype.scale=function($,_e){return this.transform(u$1.SCALE($,_e))},j.prototype.rotate=function($,_e,et){return this.transform(u$1.ROTATE($,_e,et))},j.prototype.matrix=function($,_e,et,tt,nt,rt){return this.transform(u$1.MATRIX($,_e,et,tt,nt,rt))},j.prototype.skewX=function($){return this.transform(u$1.SKEW_X($))},j.prototype.skewY=function($){return this.transform(u$1.SKEW_Y($))},j.prototype.xSymmetry=function($){return this.transform(u$1.X_AXIS_SYMMETRY($))},j.prototype.ySymmetry=function($){return this.transform(u$1.Y_AXIS_SYMMETRY($))},j.prototype.annotateArcs=function(){return this.transform(u$1.ANNOTATE_ARCS())},j}(),T$2=function(j){return j===" "||j==="	"||j==="\r"||j===`
`},v$2=function(j){return"0".charCodeAt(0)<=j.charCodeAt(0)&&j.charCodeAt(0)<="9".charCodeAt(0)},f$1=function(j){function $(){var _e=j.call(this)||this;return _e.curNumber="",_e.curCommandType=-1,_e.curCommandRelative=!1,_e.canParseCommandOrComma=!0,_e.curNumberHasExp=!1,_e.curNumberHasExpDigits=!1,_e.curNumberHasDecimal=!1,_e.curArgs=[],_e}return r($,j),$.prototype.finish=function(_e){if(_e===void 0&&(_e=[]),this.parse(" ",_e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return _e},$.prototype.parse=function(_e,et){var tt=this;et===void 0&&(et=[]);for(var nt=function(lt){et.push(lt),tt.curArgs.length=0,tt.canParseCommandOrComma=!0},rt=0;rt<_e.length;rt++){var it=_e[rt],st=!(this.curCommandType!==_$2.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),ot=v$2(it)&&(this.curNumber==="0"&&it==="0"||st);if(!v$2(it)||ot)if(it!=="e"&&it!=="E")if(it!=="-"&&it!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(it!=="."||this.curNumberHasExp||this.curNumberHasDecimal||st){if(this.curNumber&&this.curCommandType!==-1){var at=Number(this.curNumber);if(isNaN(at))throw new SyntaxError("Invalid number ending at "+rt);if(this.curCommandType===_$2.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>at)throw new SyntaxError('Expected positive number, got "'+at+'" at index "'+rt+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+rt+'"')}this.curArgs.push(at),this.curArgs.length===N$1[this.curCommandType]&&(_$2.HORIZ_LINE_TO===this.curCommandType?nt({type:_$2.HORIZ_LINE_TO,relative:this.curCommandRelative,x:at}):_$2.VERT_LINE_TO===this.curCommandType?nt({type:_$2.VERT_LINE_TO,relative:this.curCommandRelative,y:at}):this.curCommandType===_$2.MOVE_TO||this.curCommandType===_$2.LINE_TO||this.curCommandType===_$2.SMOOTH_QUAD_TO?(nt({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_$2.MOVE_TO===this.curCommandType&&(this.curCommandType=_$2.LINE_TO)):this.curCommandType===_$2.CURVE_TO?nt({type:_$2.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_$2.SMOOTH_CURVE_TO?nt({type:_$2.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_$2.QUAD_TO?nt({type:_$2.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_$2.ARC&&nt({type:_$2.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T$2(it))if(it===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(it!=="+"&&it!=="-"&&it!==".")if(ot)this.curNumber=it,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+rt+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+it+'" at index '+rt+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,it!=="z"&&it!=="Z")if(it==="h"||it==="H")this.curCommandType=_$2.HORIZ_LINE_TO,this.curCommandRelative=it==="h";else if(it==="v"||it==="V")this.curCommandType=_$2.VERT_LINE_TO,this.curCommandRelative=it==="v";else if(it==="m"||it==="M")this.curCommandType=_$2.MOVE_TO,this.curCommandRelative=it==="m";else if(it==="l"||it==="L")this.curCommandType=_$2.LINE_TO,this.curCommandRelative=it==="l";else if(it==="c"||it==="C")this.curCommandType=_$2.CURVE_TO,this.curCommandRelative=it==="c";else if(it==="s"||it==="S")this.curCommandType=_$2.SMOOTH_CURVE_TO,this.curCommandRelative=it==="s";else if(it==="q"||it==="Q")this.curCommandType=_$2.QUAD_TO,this.curCommandRelative=it==="q";else if(it==="t"||it==="T")this.curCommandType=_$2.SMOOTH_QUAD_TO,this.curCommandRelative=it==="t";else{if(it!=="a"&&it!=="A")throw new SyntaxError('Unexpected character "'+it+'" at index '+rt+".");this.curCommandType=_$2.ARC,this.curCommandRelative=it==="a"}else et.push({type:_$2.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=it,this.curNumberHasDecimal=it==="."}else this.curNumber+=it,this.curNumberHasDecimal=!0;else this.curNumber+=it;else this.curNumber+=it,this.curNumberHasExp=!0;else this.curNumber+=it,this.curNumberHasExpDigits=this.curNumberHasExp}return et},$.prototype.transform=function(_e){return Object.create(this,{parse:{value:function(et,tt){tt===void 0&&(tt=[]);for(var nt=0,rt=Object.getPrototypeOf(this).parse.call(this,et);nt<rt.length;nt++){var it=rt[nt],st=_e(it);Array.isArray(st)?tt.push.apply(tt,st):tt.push(st)}return tt}}})},$}(l),_$2=function(j){function $(_e){var et=j.call(this)||this;return et.commands=typeof _e=="string"?$.parse(_e):_e,et}return r($,j),$.prototype.encode=function(){return $.encode(this.commands)},$.prototype.getBounds=function(){var _e=u$1.CALCULATE_BOUNDS();return this.transform(_e),_e},$.prototype.transform=function(_e){for(var et=[],tt=0,nt=this.commands;tt<nt.length;tt++){var rt=_e(nt[tt]);Array.isArray(rt)?et.push.apply(et,rt):et.push(rt)}return this.commands=et,this},$.encode=function(_e){return e(_e)},$.parse=function(_e){var et=new f$1,tt=[];return et.parse(_e,tt),et.finish(tt),tt},$.CLOSE_PATH=1,$.MOVE_TO=2,$.HORIZ_LINE_TO=4,$.VERT_LINE_TO=8,$.LINE_TO=16,$.CURVE_TO=32,$.SMOOTH_CURVE_TO=64,$.QUAD_TO=128,$.SMOOTH_QUAD_TO=256,$.ARC=512,$.LINE_COMMANDS=$.LINE_TO|$.HORIZ_LINE_TO|$.VERT_LINE_TO,$.DRAWING_COMMANDS=$.HORIZ_LINE_TO|$.VERT_LINE_TO|$.LINE_TO|$.CURVE_TO|$.SMOOTH_CURVE_TO|$.QUAD_TO|$.SMOOTH_QUAD_TO|$.ARC,$}(l),N$1=((O$1={})[_$2.MOVE_TO]=2,O$1[_$2.LINE_TO]=2,O$1[_$2.HORIZ_LINE_TO]=1,O$1[_$2.VERT_LINE_TO]=1,O$1[_$2.CLOSE_PATH]=0,O$1[_$2.QUAD_TO]=4,O$1[_$2.SMOOTH_QUAD_TO]=2,O$1[_$2.CURVE_TO]=6,O$1[_$2.SMOOTH_CURVE_TO]=4,O$1[_$2.ARC]=7,O$1);function _typeof(j){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function($){return typeof $}:_typeof=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof(j)}function _classCallCheck(j,$){if(!(j instanceof $))throw new TypeError("Cannot call a class as a function")}var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas(j,$,_e,et,tt){if(typeof j=="string"&&(j=document.getElementById(j)),!j||_typeof(j)!=="object"||!("getContext"in j))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var nt=j.getContext("2d");try{return nt.getImageData($,_e,et,tt)}catch(rt){throw new Error("unable to access image data: "+rt)}}function processCanvasRGBA(j,$,_e,et,tt,nt){if(!(isNaN(nt)||nt<1)){nt|=0;var rt=getImageDataFromCanvas(j,$,_e,et,tt);rt=processImageDataRGBA(rt,$,_e,et,tt,nt),j.getContext("2d").putImageData(rt,$,_e)}}function processImageDataRGBA(j,$,_e,et,tt,nt){for(var rt=j.data,it=2*nt+1,st=et-1,ot=tt-1,at=nt+1,lt=at*(at+1)/2,ut=new BlurStack,ct=ut,ft,dt=1;dt<it;dt++)ct=ct.next=new BlurStack,dt===at&&(ft=ct);ct.next=ut;for(var mt=null,pt=null,yt=0,vt=0,Ct=mulTable[nt],At=shgTable[nt],$t=0;$t<tt;$t++){ct=ut;for(var bt=rt[vt],Bt=rt[vt+1],Rt=rt[vt+2],St=rt[vt+3],kt=0;kt<at;kt++)ct.r=bt,ct.g=Bt,ct.b=Rt,ct.a=St,ct=ct.next;for(var Pt=0,Mt=0,Lt=0,zt=0,Kt=at*bt,Ut=at*Bt,It=at*Rt,Vt=at*St,jt=lt*bt,Yt=lt*Bt,Xt=lt*Rt,sn=lt*St,on=1;on<at;on++){var hn=vt+((st<on?st:on)<<2),cn=rt[hn],An=rt[hn+1],_n=rt[hn+2],Wn=rt[hn+3],Dn=at-on;jt+=(ct.r=cn)*Dn,Yt+=(ct.g=An)*Dn,Xt+=(ct.b=_n)*Dn,sn+=(ct.a=Wn)*Dn,Pt+=cn,Mt+=An,Lt+=_n,zt+=Wn,ct=ct.next}mt=ut,pt=ft;for(var In=0;In<et;In++){var Vn=sn*Ct>>At;if(rt[vt+3]=Vn,Vn!==0){var Mn=255/Vn;rt[vt]=(jt*Ct>>At)*Mn,rt[vt+1]=(Yt*Ct>>At)*Mn,rt[vt+2]=(Xt*Ct>>At)*Mn}else rt[vt]=rt[vt+1]=rt[vt+2]=0;jt-=Kt,Yt-=Ut,Xt-=It,sn-=Vt,Kt-=mt.r,Ut-=mt.g,It-=mt.b,Vt-=mt.a;var bn=In+nt+1;bn=yt+(bn<st?bn:st)<<2,Pt+=mt.r=rt[bn],Mt+=mt.g=rt[bn+1],Lt+=mt.b=rt[bn+2],zt+=mt.a=rt[bn+3],jt+=Pt,Yt+=Mt,Xt+=Lt,sn+=zt,mt=mt.next;var jn=pt,Gn=jn.r,Yn=jn.g,Fn=jn.b,On=jn.a;Kt+=Gn,Ut+=Yn,It+=Fn,Vt+=On,Pt-=Gn,Mt-=Yn,Lt-=Fn,zt-=On,pt=pt.next,vt+=4}yt+=et}for(var kn=0;kn<et;kn++){vt=kn<<2;var Sn=rt[vt],$n=rt[vt+1],Pn=rt[vt+2],gn=rt[vt+3],_t=at*Sn,Ft=at*$n,Ht=at*Pn,Gt=at*gn,Wt=lt*Sn,Jt=lt*$n,Zt=lt*Pn,tn=lt*gn;ct=ut;for(var Qt=0;Qt<at;Qt++)ct.r=Sn,ct.g=$n,ct.b=Pn,ct.a=gn,ct=ct.next;for(var fn=et,nn=0,an=0,yn=0,dn=0,xn=1;xn<=nt;xn++){vt=fn+kn<<2;var Tn=at-xn;Wt+=(ct.r=Sn=rt[vt])*Tn,Jt+=(ct.g=$n=rt[vt+1])*Tn,Zt+=(ct.b=Pn=rt[vt+2])*Tn,tn+=(ct.a=gn=rt[vt+3])*Tn,dn+=Sn,nn+=$n,an+=Pn,yn+=gn,ct=ct.next,xn<ot&&(fn+=et)}vt=kn,mt=ut,pt=ft;for(var Bn=0;Bn<tt;Bn++){var un=vt<<2;rt[un+3]=gn=tn*Ct>>At,gn>0?(gn=255/gn,rt[un]=(Wt*Ct>>At)*gn,rt[un+1]=(Jt*Ct>>At)*gn,rt[un+2]=(Zt*Ct>>At)*gn):rt[un]=rt[un+1]=rt[un+2]=0,Wt-=_t,Jt-=Ft,Zt-=Ht,tn-=Gt,_t-=mt.r,Ft-=mt.g,Ht-=mt.b,Gt-=mt.a,un=kn+((un=Bn+at)<ot?un:ot)*et<<2,Wt+=dn+=mt.r=rt[un],Jt+=nn+=mt.g=rt[un+1],Zt+=an+=mt.b=rt[un+2],tn+=yn+=mt.a=rt[un+3],mt=mt.next,_t+=Sn=pt.r,Ft+=$n=pt.g,Ht+=Pn=pt.b,Gt+=gn=pt.a,dn-=Sn,nn-=$n,an-=Pn,yn-=gn,pt=pt.next,vt+=et}}return j}var BlurStack=function j(){_classCallCheck(this,j),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function offscreen(){let{DOMParser:j}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const $={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:j,createCanvas(_e,et){return new OffscreenCanvas(_e,et)},async createImage(_e){const tt=await(await fetch(_e)).blob();return await createImageBitmap(tt)}};return(typeof globalThis.DOMParser<"u"||typeof j>"u")&&Reflect.deleteProperty($,"DOMParser"),$}function node(j){let{DOMParser:$,canvas:_e,fetch:et}=j;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:$,fetch:et,createCanvas:_e.createCanvas,createImage:_e.loadImage}}var index=Object.freeze({__proto__:null,offscreen,node});function compressSpaces(j){return j.replace(/(?!\u3000)\s+/gm," ")}function trimLeft(j){return j.replace(/^[\n \t]+/,"")}function trimRight(j){return j.replace(/[\n \t]+$/,"")}function toNumbers(j){const $=j.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return $?$.map(parseFloat):[]}function toMatrixValue(j){const $=toNumbers(j);return[$[0]||0,$[1]||0,$[2]||0,$[3]||0,$[4]||0,$[5]||0]}const allUppercase=/^[A-Z-]+$/;function normalizeAttributeName(j){return allUppercase.test(j)?j.toLowerCase():j}function parseExternalUrl(j){const $=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(j);return $&&($[2]||$[3]||$[4])||""}function normalizeColor(j){if(!j.startsWith("rgb"))return j;let $=3;return j.replace(/\d+(\.\d+)?/g,(et,tt)=>$--&&tt?String(Math.round(parseFloat(et))):et)}const attributeRegex=/(\[[^\]]+\])/g,idRegex=/(#[^\s+>~.[:]+)/g,classRegex=/(\.[^\s+>~.[:]+)/g,pseudoElementRegex=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,pseudoClassWithBracketsRegex=/(:[\w-]+\([^)]*\))/gi,pseudoClassRegex=/(:[^\s+>~.[:]+)/g,elementRegex=/([^\s+>~.[:]+)/g;function findSelectorMatch(j,$){const _e=$.exec(j);return _e?[j.replace($," "),_e.length]:[j,0]}function getSelectorSpecificity(j){const $=[0,0,0];let _e=j.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),et=0;return[_e,et]=findSelectorMatch(_e,attributeRegex),$[1]+=et,[_e,et]=findSelectorMatch(_e,idRegex),$[0]+=et,[_e,et]=findSelectorMatch(_e,classRegex),$[1]+=et,[_e,et]=findSelectorMatch(_e,pseudoElementRegex),$[2]+=et,[_e,et]=findSelectorMatch(_e,pseudoClassWithBracketsRegex),$[1]+=et,[_e,et]=findSelectorMatch(_e,pseudoClassRegex),$[1]+=et,_e=_e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[_e,et]=findSelectorMatch(_e,elementRegex),$[2]+=et,$.join("")}const PSEUDO_ZERO=1e-8;function vectorMagnitude(j){return Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2))}function vectorsRatio(j,$){return(j[0]*$[0]+j[1]*$[1])/(vectorMagnitude(j)*vectorMagnitude($))}function vectorsAngle(j,$){return(j[0]*$[1]<j[1]*$[0]?-1:1)*Math.acos(vectorsRatio(j,$))}function CB1(j){return j*j*j}function CB2(j){return 3*j*j*(1-j)}function CB3(j){return 3*j*(1-j)*(1-j)}function CB4(j){return(1-j)*(1-j)*(1-j)}function QB1(j){return j*j}function QB2(j){return 2*j*(1-j)}function QB3(j){return(1-j)*(1-j)}class Property{static empty($){return new Property($,"EMPTY","")}split(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:_e,name:et}=this;return compressSpaces(this.getString()).trim().split($).map(tt=>new Property(_e,et,tt))}hasValue($){const _e=this.value;return _e!==null&&_e!==""&&($||_e!==0)&&typeof _e<"u"}isString($){const{value:_e}=this,et=typeof _e=="string";return!et||!$?et:$.test(_e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const $=this.getString();switch(!0){case $.endsWith("px"):case/^[0-9]+$/.test($):return!0;default:return!1}}setValue($){return this.value=$,this}getValue($){return typeof $>"u"||this.hasValue()?this.value:$}getNumber($){if(!this.hasValue())return typeof $>"u"?0:parseFloat($);const{value:_e}=this;let et=parseFloat(_e);return this.isString(/%$/)&&(et/=100),et}getString($){return typeof $>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String($)}getColor($){let _e=this.getString($);return this.isNormalizedColor||(this.isNormalizedColor=!0,_e=normalizeColor(_e),this.value=_e),_e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[et,tt]=typeof $=="boolean"?[void 0,$]:[$],{viewPort:nt}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(nt.computeSize("x"),nt.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(nt.computeSize("x"),nt.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*nt.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*nt.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&tt):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*nt.computeSize(et);default:{const rt=this.getNumber();return _e&&rt<1?rt*nt.computeSize(et):rt}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const $=this.getString(),_e=/#([^)'"]+)/.exec($),et=(_e==null?void 0:_e[1])||$;return this.document.definitions[et]}getFillStyleDefinition($,_e){let et=this.getDefinition();if(!et)return null;if(typeof et.createGradient=="function"&&"getBoundingBox"in $)return et.createGradient(this.document.ctx,$,_e);if(typeof et.createPattern=="function"){if(et.getHrefAttribute().hasValue()){const tt=et.getAttribute("patternTransform");et=et.getHrefAttribute().getDefinition(),et&&tt.hasValue()&&et.getAttribute("patternTransform",!0).setValue(tt.value)}if(et)return et.createPattern(this.document.ctx,$,_e)}return null}getTextBaseline(){if(!this.hasValue())return null;const $=this.getString();return Property.textBaselineMapping[$]||null}addOpacity($){let _e=this.getColor();const et=_e.length;let tt=0;for(let nt=0;nt<et&&(_e[nt]===","&&tt++,tt!==3);nt++);if($.hasValue()&&this.isString()&&tt!==3){const nt=new RGBColor$1(_e);nt.ok&&(nt.alpha=$.getNumber(),_e=nt.toRGBA())}return new Property(this.document,this.name,_e)}constructor($,_e,et){this.document=$,this.name=_e,this.value=et,this.isNormalizedColor=!1}}Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ViewPort{clear(){this.viewPorts=[]}setCurrent($,_e){this.viewPorts.push({width:$,height:_e})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[$]=this.viewPorts;return $||getDefault()}getCurrent(){const{viewPorts:$}=this,_e=$[$.length-1];return _e||getDefault()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize($){return typeof $=="number"?$:$==="x"?this.width:$==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}ViewPort.DEFAULT_VIEWPORT_WIDTH=800;ViewPort.DEFAULT_VIEWPORT_HEIGHT=600;function getDefault(){return{width:ViewPort.DEFAULT_VIEWPORT_WIDTH,height:ViewPort.DEFAULT_VIEWPORT_HEIGHT}}class Point{static parse($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[et=_e,tt=_e]=toNumbers($);return new Point(et,tt)}static parseScale($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[et=_e,tt=et]=toNumbers($);return new Point(et,tt)}static parsePath($){const _e=toNumbers($),et=_e.length,tt=[];for(let nt=0;nt<et;nt+=2)tt.push(new Point(_e[nt],_e[nt+1]));return tt}angleTo($){return Math.atan2($.y-this.y,$.x-this.x)}applyTransform($){const{x:_e,y:et}=this,tt=_e*$[0]+et*$[2]+$[4],nt=_e*$[1]+et*$[3]+$[5];this.x=tt,this.y=nt}constructor($,_e){this.x=$,this.y=_e}}class Mouse{isWorking(){return this.working}start(){if(this.working)return;const{screen:$,onClick:_e,onMouseMove:et}=this,tt=$.ctx.canvas;tt.onclick=_e,tt.onmousemove=et,this.working=!0}stop(){if(!this.working)return;const $=this.screen.ctx.canvas;this.working=!1,$.onclick=null,$.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:$,events:_e,eventElements:et}=this,{style:tt}=$.ctx.canvas;let nt;tt&&(tt.cursor=""),_e.forEach((rt,it)=>{let{run:st}=rt;for(nt=et[it];nt;)st(nt),nt=nt.parent}),this.events=[],this.eventElements=[]}checkPath($,_e){if(!this.working||!_e)return;const{events:et,eventElements:tt}=this;et.forEach((nt,rt)=>{let{x:it,y:st}=nt;!tt[rt]&&_e.isPointInPath&&_e.isPointInPath(it,st)&&(tt[rt]=$)})}checkBoundingBox($,_e){if(!this.working||!_e)return;const{events:et,eventElements:tt}=this;et.forEach((nt,rt)=>{let{x:it,y:st}=nt;!tt[rt]&&_e.isPointInBox(it,st)&&(tt[rt]=$)})}mapXY($,_e){const{window:et,ctx:tt}=this.screen,nt=new Point($,_e);let rt=tt.canvas;for(;rt;)nt.x-=rt.offsetLeft,nt.y-=rt.offsetTop,rt=rt.offsetParent;return et!=null&&et.scrollX&&(nt.x+=et.scrollX),et!=null&&et.scrollY&&(nt.y+=et.scrollY),nt}onClick($){const{x:_e,y:et}=this.mapXY($.clientX,$.clientY);this.events.push({type:"onclick",x:_e,y:et,run(tt){tt.onClick&&tt.onClick()}})}onMouseMove($){const{x:_e,y:et}=this.mapXY($.clientX,$.clientY);this.events.push({type:"onmousemove",x:_e,y:et,run(tt){tt.onMouseMove&&tt.onMouseMove()}})}constructor($){this.screen=$,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const defaultWindow=typeof window<"u"?window:null,defaultFetch$1=typeof fetch<"u"?fetch.bind(void 0):void 0;class Screen{wait($){this.waits.push($)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const $=this.waits.every(_e=>_e());return $&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=$,$}setDefaults($){$.strokeStyle="rgba(0,0,0,0)",$.lineCap="butt",$.lineJoin="miter",$.miterLimit=4}setViewBox($){let{document:_e,ctx:et,aspectRatio:tt,width:nt,desiredWidth:rt,height:it,desiredHeight:st,minX:ot=0,minY:at=0,refX:lt,refY:ut,clip:ct=!1,clipX:ft=0,clipY:dt=0}=$;const mt=compressSpaces(tt).replace(/^defer\s/,""),[pt,yt]=mt.split(" "),vt=pt||"xMidYMid",Ct=yt||"meet",At=nt/rt,$t=it/st,bt=Math.min(At,$t),Bt=Math.max(At,$t);let Rt=rt,St=st;Ct==="meet"&&(Rt*=bt,St*=bt),Ct==="slice"&&(Rt*=Bt,St*=Bt);const kt=new Property(_e,"refX",lt),Pt=new Property(_e,"refY",ut),Mt=kt.hasValue()&&Pt.hasValue();if(Mt&&et.translate(-bt*kt.getPixels("x"),-bt*Pt.getPixels("y")),ct){const Lt=bt*ft,zt=bt*dt;et.beginPath(),et.moveTo(Lt,zt),et.lineTo(nt,zt),et.lineTo(nt,it),et.lineTo(Lt,it),et.closePath(),et.clip()}if(!Mt){const Lt=Ct==="meet"&&bt===$t,zt=Ct==="slice"&&Bt===$t,Kt=Ct==="meet"&&bt===At,Ut=Ct==="slice"&&Bt===At;vt.startsWith("xMid")&&(Lt||zt)&&et.translate(nt/2-Rt/2,0),vt.endsWith("YMid")&&(Kt||Ut)&&et.translate(0,it/2-St/2),vt.startsWith("xMax")&&(Lt||zt)&&et.translate(nt-Rt,0),vt.endsWith("YMax")&&(Kt||Ut)&&et.translate(0,it-St)}switch(!0){case vt==="none":et.scale(At,$t);break;case Ct==="meet":et.scale(bt,bt);break;case Ct==="slice":et.scale(Bt,Bt);break}et.translate(-ot,-at)}start($){let{enableRedraw:_e=!1,ignoreMouse:et=!1,ignoreAnimation:tt=!1,ignoreDimensions:nt=!1,ignoreClear:rt=!1,forceRedraw:it,scaleWidth:st,scaleHeight:ot,offsetX:at,offsetY:lt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:ut}=this,ct=1e3/Screen.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=ct,this.readyPromise=new Promise(yt=>{this.resolveReady=yt}),this.isReady()&&this.render($,nt,rt,st,ot,at,lt),!_e)return;let ft=Date.now(),dt=ft,mt=0;const pt=()=>{ft=Date.now(),mt=ft-dt,mt>=ct&&(dt=ft-mt%ct,this.shouldUpdate(tt,it)&&(this.render($,nt,rt,st,ot,at,lt),ut.runEvents())),this.intervalId=requestAnimationFrame(pt)};et||ut.start(),this.intervalId=requestAnimationFrame(pt)}stop(){this.intervalId&&(requestAnimationFrame.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate($,_e){if(!$){const{frameDuration:et}=this;if(this.animations.reduce((nt,rt)=>rt.update(et)||nt,!1))return!0}return!!(typeof _e=="function"&&_e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render($,_e,et,tt,nt,rt,it){const{viewPort:st,ctx:ot,isFirstRender:at}=this,lt=ot.canvas;st.clear(),lt.width&&lt.height&&st.setCurrent(lt.width,lt.height);const ut=$.getStyle("width"),ct=$.getStyle("height");!_e&&(at||typeof tt!="number"&&typeof nt!="number")&&(ut.hasValue()&&(lt.width=ut.getPixels("x"),lt.style&&(lt.style.width="".concat(lt.width,"px"))),ct.hasValue()&&(lt.height=ct.getPixels("y"),lt.style&&(lt.style.height="".concat(lt.height,"px"))));let ft=lt.clientWidth||lt.width,dt=lt.clientHeight||lt.height;if(_e&&ut.hasValue()&&ct.hasValue()&&(ft=ut.getPixels("x"),dt=ct.getPixels("y")),st.setCurrent(ft,dt),typeof rt=="number"&&$.getAttribute("x",!0).setValue(rt),typeof it=="number"&&$.getAttribute("y",!0).setValue(it),typeof tt=="number"||typeof nt=="number"){const mt=toNumbers($.getAttribute("viewBox").getString());let pt=0,yt=0;if(typeof tt=="number"){const Ct=$.getStyle("width");Ct.hasValue()?pt=Ct.getPixels("x")/tt:mt[2]&&!isNaN(mt[2])&&(pt=mt[2]/tt)}if(typeof nt=="number"){const Ct=$.getStyle("height");Ct.hasValue()?yt=Ct.getPixels("y")/nt:mt[3]&&!isNaN(mt[3])&&(yt=mt[3]/nt)}pt||(pt=yt),yt||(yt=pt),$.getAttribute("width",!0).setValue(tt),$.getAttribute("height",!0).setValue(nt);const vt=$.getStyle("transform",!0,!0);vt.setValue("".concat(vt.getString()," scale(").concat(1/pt,", ").concat(1/yt,")"))}et||ot.clearRect(0,0,ft,dt),$.render(ot),at&&(this.isFirstRender=!1)}constructor($,{fetch:_e=defaultFetch$1,window:et=defaultWindow}={}){if(this.ctx=$,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=et,!_e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=_e}}Screen.defaultWindow=defaultWindow;Screen.defaultFetch=defaultFetch$1;Screen.FRAMERATE=30;Screen.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch}=Screen,DefaultDOMParser=typeof DOMParser<"u"?DOMParser:void 0;class Parser{async parse($){return $.startsWith("<")?this.parseFromString($):this.load($)}parseFromString($){const _e=new this.DOMParser;try{return this.checkDocument(_e.parseFromString($,"image/svg+xml"))}catch{return this.checkDocument(_e.parseFromString($,"text/xml"))}}checkDocument($){const _e=$.getElementsByTagName("parsererror")[0];if(_e)throw new Error(_e.textContent||"Unknown parse error");return $}async load($){const et=await(await this.fetch($)).text();return this.parseFromString(et)}constructor({fetch:$=defaultFetch,DOMParser:_e=DefaultDOMParser}={}){if(!$)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!_e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=$,this.DOMParser=_e}}class Translate{apply($){const{x:_e,y:et}=this.point;$.translate(_e||0,et||0)}unapply($){const{x:_e,y:et}=this.point;$.translate(-1*_e||0,-1*et||0)}applyToPoint($){const{x:_e,y:et}=this.point;$.applyTransform([1,0,0,1,_e||0,et||0])}constructor($,_e){this.type="translate",this.point=Point.parse(_e)}}class Rotate{apply($){const{cx:_e,cy:et,originX:tt,originY:nt,angle:rt}=this,it=_e+tt.getPixels("x"),st=et+nt.getPixels("y");$.translate(it,st),$.rotate(rt.getRadians()),$.translate(-it,-st)}unapply($){const{cx:_e,cy:et,originX:tt,originY:nt,angle:rt}=this,it=_e+tt.getPixels("x"),st=et+nt.getPixels("y");$.translate(it,st),$.rotate(-1*rt.getRadians()),$.translate(-it,-st)}applyToPoint($){const{cx:_e,cy:et,angle:tt}=this,nt=tt.getRadians();$.applyTransform([1,0,0,1,_e||0,et||0]),$.applyTransform([Math.cos(nt),Math.sin(nt),-Math.sin(nt),Math.cos(nt),0,0]),$.applyTransform([1,0,0,1,-_e||0,-et||0])}constructor($,_e,et){this.type="rotate";const tt=toNumbers(_e);this.angle=new Property($,"angle",tt[0]),this.originX=et[0],this.originY=et[1],this.cx=tt[1]||0,this.cy=tt[2]||0}}class Scale{apply($){const{scale:{x:_e,y:et},originX:tt,originY:nt}=this,rt=tt.getPixels("x"),it=nt.getPixels("y");$.translate(rt,it),$.scale(_e,et||_e),$.translate(-rt,-it)}unapply($){const{scale:{x:_e,y:et},originX:tt,originY:nt}=this,rt=tt.getPixels("x"),it=nt.getPixels("y");$.translate(rt,it),$.scale(1/_e,1/et||_e),$.translate(-rt,-it)}applyToPoint($){const{x:_e,y:et}=this.scale;$.applyTransform([_e||0,0,0,et||0,0,0])}constructor($,_e,et){this.type="scale";const tt=Point.parseScale(_e);(tt.x===0||tt.y===0)&&(tt.x=PSEUDO_ZERO,tt.y=PSEUDO_ZERO),this.scale=tt,this.originX=et[0],this.originY=et[1]}}class Matrix{apply($){const{originX:_e,originY:et,matrix:tt}=this,nt=_e.getPixels("x"),rt=et.getPixels("y");$.translate(nt,rt),$.transform(tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]),$.translate(-nt,-rt)}unapply($){const{originX:_e,originY:et,matrix:tt}=this,nt=tt[0],rt=tt[2],it=tt[4],st=tt[1],ot=tt[3],at=tt[5],lt=0,ut=0,ct=1,ft=1/(nt*(ot*ct-at*ut)-rt*(st*ct-at*lt)+it*(st*ut-ot*lt)),dt=_e.getPixels("x"),mt=et.getPixels("y");$.translate(dt,mt),$.transform(ft*(ot*ct-at*ut),ft*(at*lt-st*ct),ft*(it*ut-rt*ct),ft*(nt*ct-it*lt),ft*(rt*at-it*ot),ft*(it*st-nt*at)),$.translate(-dt,-mt)}applyToPoint($){$.applyTransform(this.matrix)}constructor($,_e,et){this.type="matrix",this.matrix=toMatrixValue(_e),this.originX=et[0],this.originY=et[1]}}class Skew extends Matrix{constructor($,_e,et){super($,_e,et),this.type="skew",this.angle=new Property($,"angle",_e)}}class SkewX extends Skew{constructor($,_e,et){super($,_e,et),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class SkewY extends Skew{constructor($,_e,et){super($,_e,et),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms(j){return compressSpaces(j).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(j){const[$="",_e=""]=j.split("(");return[$.trim(),_e.trim().replace(")","")]}class Transform{static fromElement($,_e){const et=_e.getStyle("transform",!1,!0);if(et.hasValue()){const[tt,nt=tt]=_e.getStyle("transform-origin",!1,!0).split();if(tt&&nt){const rt=[tt,nt];return new Transform($,et.getString(),rt)}}return null}apply($){this.transforms.forEach(_e=>_e.apply($))}unapply($){this.transforms.forEach(_e=>_e.unapply($))}applyToPoint($){this.transforms.forEach(_e=>_e.applyToPoint($))}constructor($,_e,et){this.document=$,this.transforms=[],parseTransforms(_e).forEach(nt=>{if(nt==="none")return;const[rt,it]=parseTransform(nt),st=Transform.transformTypes[rt];st&&this.transforms.push(new st(this.document,it,et))})}}Transform.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};class Element{getAttribute($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const et=this.attributes[$];if(!et&&_e){const tt=new Property(this.document,$,"");return this.attributes[$]=tt,tt}return et||Property.empty(this.document)}getHrefAttribute(){let $;for(const _e in this.attributes)if(_e==="href"||_e.endsWith(":href")){$=this.attributes[_e];break}return $||Property.empty(this.document)}getStyle($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const tt=this.styles[$];if(tt)return tt;const nt=this.getAttribute($);if(nt.hasValue())return this.styles[$]=nt,nt;if(!et){const{parent:rt}=this;if(rt){const it=rt.getStyle($);if(it.hasValue())return it}}if(_e){const rt=new Property(this.document,$,"");return this.styles[$]=rt,rt}return Property.empty(this.document)}render($){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if($.save(),this.getStyle("mask").hasValue()){const _e=this.getStyle("mask").getDefinition();_e&&(this.applyEffects($),_e.apply($,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const _e=this.getStyle("filter").getDefinition();_e&&(this.applyEffects($),_e.apply($,this))}else this.setContext($),this.renderChildren($),this.clearContext($);$.restore()}}setContext($){}applyEffects($){const _e=Transform.fromElement(this.document,this);_e&&_e.apply($);const et=this.getStyle("clip-path",!1,!0);if(et.hasValue()){const tt=et.getDefinition();tt&&tt.apply($)}}clearContext($){}renderChildren($){this.children.forEach(_e=>{_e.render($)})}addChild($){const _e=$ instanceof Element?$:this.document.createElement($);_e.parent=this,Element.ignoreChildTypes.includes(_e.type)||this.children.push(_e)}matchesSelector($){var _e;const{node:et}=this;if(typeof et.matches=="function")return et.matches($);const tt=(_e=et.getAttribute)===null||_e===void 0?void 0:_e.call(et,"class");return!tt||tt===""?!1:tt.split(" ").some(nt=>".".concat(nt)===$)}addStylesFromStyleDefinition(){const{styles:$,stylesSpecificity:_e}=this.document;let et;for(const tt in $)if(!tt.startsWith("@")&&this.matchesSelector(tt)){const nt=$[tt],rt=_e[tt];if(nt)for(const it in nt){let st=this.stylesSpecificity[it];typeof st>"u"&&(st="000"),rt&&rt>=st&&(et=nt[it],et&&(this.styles[it]=et),this.stylesSpecificity[it]=rt)}}}removeStyles($,_e){return _e.reduce((tt,nt)=>{const rt=$.getStyle(nt);if(!rt.hasValue())return tt;const it=rt.getString();return rt.setValue(""),[...tt,[nt,it]]},[])}restoreStyles($,_e){_e.forEach(et=>{let[tt,nt]=et;$.getStyle(tt,!0).setValue(nt)})}isFirstChild(){var $;return(($=this.parent)===null||$===void 0?void 0:$.children.indexOf(this))===0}constructor($,_e,et=!1){if(this.document=$,this.node=_e,this.captureTextNodes=et,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!_e||_e.nodeType!==1)return;Array.from(_e.attributes).forEach(rt=>{const it=normalizeAttributeName(rt.nodeName);this.attributes[it]=new Property($,it,rt.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(it=>it.trim()).forEach(it=>{if(!it)return;const[st,ot]=it.split(":").map(at=>at.trim());st&&(this.styles[st]=new Property($,st,ot))});const{definitions:tt}=$,nt=this.getAttribute("id");nt.hasValue()&&(tt[nt.getString()]||(tt[nt.getString()]=this)),Array.from(_e.childNodes).forEach(rt=>{if(rt.nodeType===1)this.addChild(rt);else if(et&&(rt.nodeType===3||rt.nodeType===4)){const it=$.createTextNode(rt);it.getText().length>0&&this.addChild(it)}})}}Element.ignoreChildTypes=["title"];class UnknownElement extends Element{constructor($,_e,et){super($,_e,et)}}function wrapFontFamily(j){const $=j.trim();return/^('|")/.test($)?$:'"'.concat($,'"')}function prepareFontFamily(j){return typeof process>"u"?j:j.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle(j){if(!j)return"";const $=j.trim().toLowerCase();switch($){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return $;default:return/^oblique\s+(-|)\d+deg$/.test($)?$:""}}function prepareFontWeight(j){if(!j)return"";const $=j.trim().toLowerCase();switch($){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return $;default:return/^[\d.]+$/.test($)?$:""}}class Font{static parse(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_e=arguments.length>1?arguments[1]:void 0,et="",tt="",nt="",rt="",it="";const st=compressSpaces($).trim().split(" "),ot={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return st.forEach(at=>{switch(!0){case(!ot.fontStyle&&Font.styles.includes(at)):at!=="inherit"&&(et=at),ot.fontStyle=!0;break;case(!ot.fontVariant&&Font.variants.includes(at)):at!=="inherit"&&(tt=at),ot.fontStyle=!0,ot.fontVariant=!0;break;case(!ot.fontWeight&&Font.weights.includes(at)):at!=="inherit"&&(nt=at),ot.fontStyle=!0,ot.fontVariant=!0,ot.fontWeight=!0;break;case!ot.fontSize:at!=="inherit"&&(rt=at.split("/")[0]||""),ot.fontStyle=!0,ot.fontVariant=!0,ot.fontWeight=!0,ot.fontSize=!0;break;default:at!=="inherit"&&(it+=at)}}),new Font(et,tt,nt,rt,it,_e)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}constructor($,_e,et,tt,nt,rt){const it=rt?typeof rt=="string"?Font.parse(rt):rt:{};this.fontFamily=nt||it.fontFamily,this.fontSize=tt||it.fontSize,this.fontStyle=$||it.fontStyle,this.fontWeight=et||it.fontWeight,this.fontVariant=_e||it.fontVariant}}Font.styles="normal|italic|oblique|inherit";Font.variants="normal|small-caps|inherit";Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class BoundingBox{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint($,_e){typeof $<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=$,this.x2=$),$<this.x1&&(this.x1=$),$>this.x2&&(this.x2=$)),typeof _e<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=_e,this.y2=_e),_e<this.y1&&(this.y1=_e),_e>this.y2&&(this.y2=_e))}addX($){this.addPoint($,0)}addY($){this.addPoint(0,$)}addBoundingBox($){if(!$)return;const{x1:_e,y1:et,x2:tt,y2:nt}=$;this.addPoint(_e,et),this.addPoint(tt,nt)}sumCubic($,_e,et,tt,nt){return Math.pow(1-$,3)*_e+3*Math.pow(1-$,2)*$*et+3*(1-$)*Math.pow($,2)*tt+Math.pow($,3)*nt}bezierCurveAdd($,_e,et,tt,nt){const rt=6*_e-12*et+6*tt,it=-3*_e+9*et-9*tt+3*nt,st=3*et-3*_e;if(it===0){if(rt===0)return;const ut=-st/rt;0<ut&&ut<1&&($?this.addX(this.sumCubic(ut,_e,et,tt,nt)):this.addY(this.sumCubic(ut,_e,et,tt,nt)));return}const ot=Math.pow(rt,2)-4*st*it;if(ot<0)return;const at=(-rt+Math.sqrt(ot))/(2*it);0<at&&at<1&&($?this.addX(this.sumCubic(at,_e,et,tt,nt)):this.addY(this.sumCubic(at,_e,et,tt,nt)));const lt=(-rt-Math.sqrt(ot))/(2*it);0<lt&&lt<1&&($?this.addX(this.sumCubic(lt,_e,et,tt,nt)):this.addY(this.sumCubic(lt,_e,et,tt,nt)))}addBezierCurve($,_e,et,tt,nt,rt,it,st){this.addPoint($,_e),this.addPoint(it,st),this.bezierCurveAdd(!0,$,et,nt,it),this.bezierCurveAdd(!1,_e,tt,rt,st)}addQuadraticCurve($,_e,et,tt,nt,rt){const it=$+.6666666666666666*(et-$),st=_e+2/3*(tt-_e),ot=it+1/3*(nt-$),at=st+1/3*(rt-_e);this.addBezierCurve($,_e,it,ot,st,at,nt,rt)}isPointInBox($,_e){const{x1:et,y1:tt,x2:nt,y2:rt}=this;return et<=$&&$<=nt&&tt<=_e&&_e<=rt}constructor($=Number.NaN,_e=Number.NaN,et=Number.NaN,tt=Number.NaN){this.x1=$,this.y1=_e,this.x2=et,this.y2=tt,this.addPoint($,_e),this.addPoint(et,tt)}}class RenderedElement extends Element{calculateOpacity(){let $=1,_e=this;for(;_e;){const et=_e.getStyle("opacity",!1,!0);et.hasValue(!0)&&($*=et.getNumber()),_e=_e.parent}return $}setContext($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!_e){const et=this.getStyle("fill"),tt=this.getStyle("fill-opacity"),nt=this.getStyle("stroke"),rt=this.getStyle("stroke-opacity");if(et.isUrlDefinition()){const ct=et.getFillStyleDefinition(this,tt);ct&&($.fillStyle=ct)}else if(et.hasValue()){et.getString()==="currentColor"&&et.setValue(this.getStyle("color").getColor());const ct=et.getColor();ct!=="inherit"&&($.fillStyle=ct==="none"?"rgba(0,0,0,0)":ct)}if(tt.hasValue()){const ct=new Property(this.document,"fill",$.fillStyle).addOpacity(tt).getColor();$.fillStyle=ct}if(nt.isUrlDefinition()){const ct=nt.getFillStyleDefinition(this,rt);ct&&($.strokeStyle=ct)}else if(nt.hasValue()){nt.getString()==="currentColor"&&nt.setValue(this.getStyle("color").getColor());const ct=nt.getString();ct!=="inherit"&&($.strokeStyle=ct==="none"?"rgba(0,0,0,0)":ct)}if(rt.hasValue()){const ct=new Property(this.document,"stroke",$.strokeStyle).addOpacity(rt).getString();$.strokeStyle=ct}const it=this.getStyle("stroke-width");if(it.hasValue()){const ct=it.getPixels();$.lineWidth=ct||PSEUDO_ZERO}const st=this.getStyle("stroke-linecap"),ot=this.getStyle("stroke-linejoin"),at=this.getStyle("stroke-miterlimit"),lt=this.getStyle("stroke-dasharray"),ut=this.getStyle("stroke-dashoffset");if(st.hasValue()&&($.lineCap=st.getString()),ot.hasValue()&&($.lineJoin=ot.getString()),at.hasValue()&&($.miterLimit=at.getNumber()),lt.hasValue()&&lt.getString()!=="none"){const ct=toNumbers(lt.getString());typeof $.setLineDash<"u"?$.setLineDash(ct):typeof $.webkitLineDash<"u"?$.webkitLineDash=ct:typeof $.mozDash<"u"&&!(ct.length===1&&ct[0]===0)&&($.mozDash=ct);const ft=ut.getPixels();typeof $.lineDashOffset<"u"?$.lineDashOffset=ft:typeof $.webkitLineDashOffset<"u"?$.webkitLineDashOffset=ft:typeof $.mozDashOffset<"u"&&($.mozDashOffset=ft)}}if(this.modifiedEmSizeStack=!1,typeof $.font<"u"){const et=this.getStyle("font"),tt=this.getStyle("font-style"),nt=this.getStyle("font-variant"),rt=this.getStyle("font-weight"),it=this.getStyle("font-size"),st=this.getStyle("font-family"),ot=new Font(tt.getString(),nt.getString(),rt.getString(),it.hasValue()?"".concat(it.getPixels(!0),"px"):"",st.getString(),Font.parse(et.getString(),$.font));tt.setValue(ot.fontStyle),nt.setValue(ot.fontVariant),rt.setValue(ot.fontWeight),it.setValue(ot.fontSize),st.setValue(ot.fontFamily),$.font=ot.toString(),it.isPixels()&&(this.document.emSize=it.getPixels(),this.modifiedEmSizeStack=!0)}_e||(this.applyEffects($),$.globalAlpha=this.calculateOpacity())}clearContext($){super.clearContext($),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...$){super(...$),this.modifiedEmSizeStack=!1}}class TextElement extends RenderedElement{setContext($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext($,_e);const et=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();et&&($.textBaseline=et)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox($){if(this.type!=="text")return this.getTElementBoundingBox($);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive($);let _e=null;return this.children.forEach((et,tt)=>{const nt=this.getChildBoundingBox($,this,this,tt);_e?_e.addBoundingBox(nt):_e=nt}),_e}getFontSize(){const{document:$,parent:_e}=this,et=Font.parse($.ctx.font).fontSize;return _e.getStyle("font-size").getNumber(et)}getTElementBoundingBox($){const _e=this.getFontSize();return new BoundingBox(this.x,this.y-_e,this.x+this.measureText($),this.y)}getGlyph($,_e,et){const tt=_e[et];let nt;if($.isArabic){var rt;const it=_e.length,st=_e[et-1],ot=_e[et+1];let at="isolated";(et===0||st===" ")&&et<it-1&&ot!==" "&&(at="terminal"),et>0&&st!==" "&&et<it-1&&ot!==" "&&(at="medial"),et>0&&st!==" "&&(et===it-1||ot===" ")&&(at="initial"),nt=((rt=$.arabicGlyphs[tt])===null||rt===void 0?void 0:rt[at])||$.glyphs[tt]}else nt=$.glyphs[tt];return nt||(nt=$.missingGlyph),nt}getText(){return""}getTextFromNode($){const _e=$||this.node,et=Array.from(_e.parentNode.childNodes),tt=et.indexOf(_e),nt=et.length-1;let rt=compressSpaces(_e.textContent||"");return tt===0&&(rt=trimLeft(rt)),tt===nt&&(rt=trimRight(rt)),rt}renderChildren($){if(this.type!=="text"){this.renderTElementChildren($);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive($),this.children.forEach((et,tt)=>{this.renderChild($,this,this,tt)});const{mouse:_e}=this.document.screen;_e.isWorking()&&_e.checkBoundingBox(this,this.getBoundingBox($))}renderTElementChildren($){const{document:_e,parent:et}=this,tt=this.getText(),nt=et.getStyle("font-family").getDefinition();if(nt){const{unitsPerEm:st}=nt.fontFace,ot=Font.parse(_e.ctx.font),at=et.getStyle("font-size").getNumber(ot.fontSize),lt=et.getStyle("font-style").getString(ot.fontStyle),ut=at/st,ct=nt.isRTL?tt.split("").reverse().join(""):tt,ft=toNumbers(et.getAttribute("dx").getString()),dt=ct.length;for(let mt=0;mt<dt;mt++){const pt=this.getGlyph(nt,ct,mt);$.translate(this.x,this.y),$.scale(ut,-ut);const yt=$.lineWidth;$.lineWidth=$.lineWidth*st/at,lt==="italic"&&$.transform(1,0,.4,1,0,0),pt.render($),lt==="italic"&&$.transform(1,0,-.4,1,0,0),$.lineWidth=yt,$.scale(1/ut,-1/ut),$.translate(-this.x,-this.y),this.x+=at*(pt.horizAdvX||nt.horizAdvX)/st,typeof ft[mt]<"u"&&!isNaN(ft[mt])&&(this.x+=ft[mt])}return}const{x:rt,y:it}=this;$.fillStyle&&$.fillText(tt,rt,it),$.strokeStyle&&$.strokeText(tt,rt,it)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const $=this.leafTexts[this.textChunkStart],_e=$.getStyle("text-anchor").getString("start"),et=!1;let tt=0;_e==="start"&&!et||_e==="end"&&et?tt=$.x-this.minX:_e==="end"&&!et||_e==="start"&&et?tt=$.x-this.maxX:tt=$.x-(this.minX+this.maxX)/2;for(let nt=this.textChunkStart;nt<this.leafTexts.length;nt++)this.leafTexts[nt].x+=tt;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive($){this.children.forEach((_e,et)=>{this.adjustChildCoordinatesRecursiveCore($,this,this,et)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore($,_e,et,tt){const nt=et.children[tt];nt.children.length>0?nt.children.forEach((rt,it)=>{_e.adjustChildCoordinatesRecursiveCore($,_e,nt,it)}):this.adjustChildCoordinates($,_e,et,tt)}adjustChildCoordinates($,_e,et,tt){const nt=et.children[tt];if(typeof nt.measureText!="function")return nt;$.save(),nt.setContext($,!0);const rt=nt.getAttribute("x"),it=nt.getAttribute("y"),st=nt.getAttribute("dx"),ot=nt.getAttribute("dy"),at=nt.getStyle("font-family").getDefinition(),lt=!!(at!=null&&at.isRTL);tt===0&&(rt.hasValue()||rt.setValue(nt.getInheritedAttribute("x")),it.hasValue()||it.setValue(nt.getInheritedAttribute("y")),st.hasValue()||st.setValue(nt.getInheritedAttribute("dx")),ot.hasValue()||ot.setValue(nt.getInheritedAttribute("dy")));const ut=nt.measureText($);return lt&&(_e.x-=ut),rt.hasValue()?(_e.applyAnchoring(),nt.x=rt.getPixels("x"),st.hasValue()&&(nt.x+=st.getPixels("x"))):(st.hasValue()&&(_e.x+=st.getPixels("x")),nt.x=_e.x),_e.x=nt.x,lt||(_e.x+=ut),it.hasValue()?(nt.y=it.getPixels("y"),ot.hasValue()&&(nt.y+=ot.getPixels("y"))):(ot.hasValue()&&(_e.y+=ot.getPixels("y")),nt.y=_e.y),_e.y=nt.y,_e.leafTexts.push(nt),_e.minX=Math.min(_e.minX,nt.x,nt.x+ut),_e.maxX=Math.max(_e.maxX,nt.x,nt.x+ut),nt.clearContext($),$.restore(),nt}getChildBoundingBox($,_e,et,tt){const nt=et.children[tt];if(typeof nt.getBoundingBox!="function")return null;const rt=nt.getBoundingBox($);return rt&&nt.children.forEach((it,st)=>{const ot=_e.getChildBoundingBox($,_e,nt,st);rt.addBoundingBox(ot)}),rt}renderChild($,_e,et,tt){const nt=et.children[tt];nt.render($),nt.children.forEach((rt,it)=>{_e.renderChild($,_e,nt,it)})}measureText($){const{measureCache:_e}=this;if(~_e)return _e;const et=this.getText(),tt=this.measureTargetText($,et);return this.measureCache=tt,tt}measureTargetText($,_e){if(!_e.length)return 0;const{parent:et}=this,tt=et.getStyle("font-family").getDefinition();if(tt){const rt=this.getFontSize(),it=tt.isRTL?_e.split("").reverse().join(""):_e,st=toNumbers(et.getAttribute("dx").getString()),ot=it.length;let at=0;for(let lt=0;lt<ot;lt++){const ut=this.getGlyph(tt,it,lt);at+=(ut.horizAdvX||tt.horizAdvX)*rt/tt.fontFace.unitsPerEm,typeof st[lt]<"u"&&!isNaN(st[lt])&&(at+=st[lt])}return at}if(!$.measureText)return _e.length*10;$.save(),this.setContext($,!0);const{width:nt}=$.measureText(_e);return this.clearContext($),$.restore(),nt}getInheritedAttribute($){let _e=this;for(;_e instanceof TextElement&&_e.isFirstChild()&&_e.parent;){const et=_e.parent.getAttribute($);if(et.hasValue(!0))return et.getString("0");_e=_e.parent}return null}constructor($,_e,et){super($,_e,new.target===TextElement?!0:et),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class TSpanElement extends TextElement{getText(){return this.text}constructor($,_e,et){super($,_e,new.target===TSpanElement?!0:et),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class TextNode extends TSpanElement{constructor(...$){super(...$),this.type="textNode"}}class PathParser extends _$2{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]}isEnd(){const{i:$,commands:_e}=this;return $>=_e.length-1}next(){const $=this.commands[++this.i];return this.previousCommand=this.command,this.command=$,$}getPoint(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const et=new Point(this.command[$],this.command[_e]);return this.makeAbsolute(et)}getAsControlPoint($,_e){const et=this.getPoint($,_e);return this.control=et,et}getAsCurrentPoint($,_e){const et=this.getPoint($,_e);return this.current=et,et}getReflectedControlPoint(){const $=this.previousCommand.type;if($!==_$2.CURVE_TO&&$!==_$2.SMOOTH_CURVE_TO&&$!==_$2.QUAD_TO&&$!==_$2.SMOOTH_QUAD_TO)return this.current;const{current:{x:_e,y:et},control:{x:tt,y:nt}}=this;return new Point(2*_e-tt,2*et-nt)}makeAbsolute($){if(this.command.relative){const{x:_e,y:et}=this.current;$.x+=_e,$.y+=et}return $}addMarker($,_e,et){const{points:tt,angles:nt}=this;et&&nt.length>0&&!nt[nt.length-1]&&(nt[nt.length-1]=tt[tt.length-1].angleTo(et)),this.addMarkerAngle($,_e?_e.angleTo($):null)}addMarkerAngle($,_e){this.points.push($),this.angles.push(_e)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:$}=this,_e=$.length;for(let et=0;et<_e;et++)if(!$[et]){for(let tt=et+1;tt<_e;tt++)if($[tt]){$[et]=$[tt];break}}return $}constructor($){super($.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new Point(0,0),this.start=new Point(0,0),this.current=new Point(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class PathElement extends RenderedElement{path($){const{pathParser:_e}=this,et=new BoundingBox;for(_e.reset(),$&&$.beginPath();!_e.isEnd();)switch(_e.next().type){case PathParser.MOVE_TO:this.pathM($,et);break;case PathParser.LINE_TO:this.pathL($,et);break;case PathParser.HORIZ_LINE_TO:this.pathH($,et);break;case PathParser.VERT_LINE_TO:this.pathV($,et);break;case PathParser.CURVE_TO:this.pathC($,et);break;case PathParser.SMOOTH_CURVE_TO:this.pathS($,et);break;case PathParser.QUAD_TO:this.pathQ($,et);break;case PathParser.SMOOTH_QUAD_TO:this.pathT($,et);break;case PathParser.ARC:this.pathA($,et);break;case PathParser.CLOSE_PATH:this.pathZ($,et);break}return et}getBoundingBox($){return this.path()}getMarkers(){const{pathParser:$}=this,_e=$.getMarkerPoints(),et=$.getMarkerAngles();return _e.map((nt,rt)=>[nt,et[rt]])}renderChildren($){this.path($),this.document.screen.mouse.checkPath(this,$);const _e=this.getStyle("fill-rule");$.fillStyle!==""&&(_e.getString("inherit")!=="inherit"?$.fill(_e.getString()):$.fill()),$.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?($.save(),$.setTransform(1,0,0,1,0,0),$.stroke(),$.restore()):$.stroke());const et=this.getMarkers();if(et){const tt=et.length-1,nt=this.getStyle("marker-start"),rt=this.getStyle("marker-mid"),it=this.getStyle("marker-end");if(nt.isUrlDefinition()){const st=nt.getDefinition(),[ot,at]=et[0];st.render($,ot,at)}if(rt.isUrlDefinition()){const st=rt.getDefinition();for(let ot=1;ot<tt;ot++){const[at,lt]=et[ot];st.render($,at,lt)}}if(it.isUrlDefinition()){const st=it.getDefinition(),[ot,at]=et[tt];st.render($,ot,at)}}}static pathM($){const _e=$.getAsCurrentPoint();return $.start=$.current,{point:_e}}pathM($,_e){const{pathParser:et}=this,{point:tt}=PathElement.pathM(et),{x:nt,y:rt}=tt;et.addMarker(tt),_e.addPoint(nt,rt),$&&$.moveTo(nt,rt)}static pathL($){const{current:_e}=$,et=$.getAsCurrentPoint();return{current:_e,point:et}}pathL($,_e){const{pathParser:et}=this,{current:tt,point:nt}=PathElement.pathL(et),{x:rt,y:it}=nt;et.addMarker(nt,tt),_e.addPoint(rt,it),$&&$.lineTo(rt,it)}static pathH($){const{current:_e,command:et}=$,tt=new Point((et.relative?_e.x:0)+et.x,_e.y);return $.current=tt,{current:_e,point:tt}}pathH($,_e){const{pathParser:et}=this,{current:tt,point:nt}=PathElement.pathH(et),{x:rt,y:it}=nt;et.addMarker(nt,tt),_e.addPoint(rt,it),$&&$.lineTo(rt,it)}static pathV($){const{current:_e,command:et}=$,tt=new Point(_e.x,(et.relative?_e.y:0)+et.y);return $.current=tt,{current:_e,point:tt}}pathV($,_e){const{pathParser:et}=this,{current:tt,point:nt}=PathElement.pathV(et),{x:rt,y:it}=nt;et.addMarker(nt,tt),_e.addPoint(rt,it),$&&$.lineTo(rt,it)}static pathC($){const{current:_e}=$,et=$.getPoint("x1","y1"),tt=$.getAsControlPoint("x2","y2"),nt=$.getAsCurrentPoint();return{current:_e,point:et,controlPoint:tt,currentPoint:nt}}pathC($,_e){const{pathParser:et}=this,{current:tt,point:nt,controlPoint:rt,currentPoint:it}=PathElement.pathC(et);et.addMarker(it,rt,nt),_e.addBezierCurve(tt.x,tt.y,nt.x,nt.y,rt.x,rt.y,it.x,it.y),$&&$.bezierCurveTo(nt.x,nt.y,rt.x,rt.y,it.x,it.y)}static pathS($){const{current:_e}=$,et=$.getReflectedControlPoint(),tt=$.getAsControlPoint("x2","y2"),nt=$.getAsCurrentPoint();return{current:_e,point:et,controlPoint:tt,currentPoint:nt}}pathS($,_e){const{pathParser:et}=this,{current:tt,point:nt,controlPoint:rt,currentPoint:it}=PathElement.pathS(et);et.addMarker(it,rt,nt),_e.addBezierCurve(tt.x,tt.y,nt.x,nt.y,rt.x,rt.y,it.x,it.y),$&&$.bezierCurveTo(nt.x,nt.y,rt.x,rt.y,it.x,it.y)}static pathQ($){const{current:_e}=$,et=$.getAsControlPoint("x1","y1"),tt=$.getAsCurrentPoint();return{current:_e,controlPoint:et,currentPoint:tt}}pathQ($,_e){const{pathParser:et}=this,{current:tt,controlPoint:nt,currentPoint:rt}=PathElement.pathQ(et);et.addMarker(rt,nt,nt),_e.addQuadraticCurve(tt.x,tt.y,nt.x,nt.y,rt.x,rt.y),$&&$.quadraticCurveTo(nt.x,nt.y,rt.x,rt.y)}static pathT($){const{current:_e}=$,et=$.getReflectedControlPoint();$.control=et;const tt=$.getAsCurrentPoint();return{current:_e,controlPoint:et,currentPoint:tt}}pathT($,_e){const{pathParser:et}=this,{current:tt,controlPoint:nt,currentPoint:rt}=PathElement.pathT(et);et.addMarker(rt,nt,nt),_e.addQuadraticCurve(tt.x,tt.y,nt.x,nt.y,rt.x,rt.y),$&&$.quadraticCurveTo(nt.x,nt.y,rt.x,rt.y)}static pathA($){const{current:_e,command:et}=$;let{rX:tt,rY:nt,xRot:rt,lArcFlag:it,sweepFlag:st}=et;const ot=rt*(Math.PI/180),at=$.getAsCurrentPoint(),lt=new Point(Math.cos(ot)*(_e.x-at.x)/2+Math.sin(ot)*(_e.y-at.y)/2,-Math.sin(ot)*(_e.x-at.x)/2+Math.cos(ot)*(_e.y-at.y)/2),ut=Math.pow(lt.x,2)/Math.pow(tt,2)+Math.pow(lt.y,2)/Math.pow(nt,2);ut>1&&(tt*=Math.sqrt(ut),nt*=Math.sqrt(ut));let ct=(it===st?-1:1)*Math.sqrt((Math.pow(tt,2)*Math.pow(nt,2)-Math.pow(tt,2)*Math.pow(lt.y,2)-Math.pow(nt,2)*Math.pow(lt.x,2))/(Math.pow(tt,2)*Math.pow(lt.y,2)+Math.pow(nt,2)*Math.pow(lt.x,2)));isNaN(ct)&&(ct=0);const ft=new Point(ct*tt*lt.y/nt,ct*-nt*lt.x/tt),dt=new Point((_e.x+at.x)/2+Math.cos(ot)*ft.x-Math.sin(ot)*ft.y,(_e.y+at.y)/2+Math.sin(ot)*ft.x+Math.cos(ot)*ft.y),mt=vectorsAngle([1,0],[(lt.x-ft.x)/tt,(lt.y-ft.y)/nt]),pt=[(lt.x-ft.x)/tt,(lt.y-ft.y)/nt],yt=[(-lt.x-ft.x)/tt,(-lt.y-ft.y)/nt];let vt=vectorsAngle(pt,yt);return vectorsRatio(pt,yt)<=-1&&(vt=Math.PI),vectorsRatio(pt,yt)>=1&&(vt=0),{currentPoint:at,rX:tt,rY:nt,sweepFlag:st,xAxisRotation:ot,centp:dt,a1:mt,ad:vt}}pathA($,_e){const{pathParser:et}=this,{currentPoint:tt,rX:nt,rY:rt,sweepFlag:it,xAxisRotation:st,centp:ot,a1:at,ad:lt}=PathElement.pathA(et),ut=1-it?1:-1,ct=at+ut*(lt/2),ft=new Point(ot.x+nt*Math.cos(ct),ot.y+rt*Math.sin(ct));if(et.addMarkerAngle(ft,ct-ut*Math.PI/2),et.addMarkerAngle(tt,ct-ut*Math.PI),_e.addPoint(tt.x,tt.y),$&&!isNaN(at)&&!isNaN(lt)){const dt=nt>rt?nt:rt,mt=nt>rt?1:nt/rt,pt=nt>rt?rt/nt:1;$.translate(ot.x,ot.y),$.rotate(st),$.scale(mt,pt),$.arc(0,0,dt,at,at+lt,!!(1-it)),$.scale(1/mt,1/pt),$.rotate(-st),$.translate(-ot.x,-ot.y)}}static pathZ($){$.current=$.start}pathZ($,_e){PathElement.pathZ(this.pathParser),$&&_e.x1!==_e.x2&&_e.y1!==_e.y2&&$.closePath()}constructor($,_e,et){super($,_e,et),this.type="path",this.pathParser=new PathParser(this.getAttribute("d").getString())}}class SVGElement extends RenderedElement{setContext($){var _e;const{document:et}=this,{screen:tt,window:nt}=et,rt=$.canvas;if(tt.setDefaults($),"style"in rt&&typeof $.font<"u"&&nt&&typeof nt.getComputedStyle<"u"){$.font=nt.getComputedStyle(rt).getPropertyValue("font");const yt=new Property(et,"fontSize",Font.parse($.font).fontSize);yt.hasValue()&&(et.rootEmSize=yt.getPixels("y"),et.emSize=et.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:it,height:st}=tt.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const ot=this.getAttribute("refX"),at=this.getAttribute("refY"),lt=this.getAttribute("viewBox"),ut=lt.hasValue()?toNumbers(lt.getString()):null,ct=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let ft=0,dt=0,mt=0,pt=0;ut&&(ft=ut[0],dt=ut[1]),this.root||(it=this.getStyle("width").getPixels("x"),st=this.getStyle("height").getPixels("y"),this.type==="marker"&&(mt=ft,pt=dt,ft=0,dt=0)),tt.viewPort.setCurrent(it,st),this.node&&(!this.parent||((_e=this.node.parentNode)===null||_e===void 0?void 0:_e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext($),$.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),ut&&(it=ut[2],st=ut[3]),et.setViewBox({ctx:$,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:tt.viewPort.width,desiredWidth:it,height:tt.viewPort.height,desiredHeight:st,minX:ft,minY:dt,refX:ot.getValue(),refY:at.getValue(),clip:ct,clipX:mt,clipY:pt}),ut&&(tt.viewPort.removeCurrent(),tt.viewPort.setCurrent(it,st))}clearContext($){super.clearContext($),this.document.screen.viewPort.removeCurrent()}resize($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$,et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const tt=this.getAttribute("width",!0),nt=this.getAttribute("height",!0),rt=this.getAttribute("viewBox"),it=this.getAttribute("style"),st=tt.getNumber(0),ot=nt.getNumber(0);if(et)if(typeof et=="string")this.getAttribute("preserveAspectRatio",!0).setValue(et);else{const at=this.getAttribute("preserveAspectRatio");at.hasValue()&&at.setValue(at.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(tt.setValue($),nt.setValue(_e),rt.hasValue()||rt.setValue("0 0 ".concat(st||$," ").concat(ot||_e)),it.hasValue()){const at=this.getStyle("width"),lt=this.getStyle("height");at.hasValue()&&at.setValue("".concat($,"px")),lt.hasValue()&&lt.setValue("".concat(_e,"px"))}}constructor(...$){super(...$),this.type="svg",this.root=!1}}class RectElement extends PathElement{path($){const _e=this.getAttribute("x").getPixels("x"),et=this.getAttribute("y").getPixels("y"),tt=this.getStyle("width",!1,!0).getPixels("x"),nt=this.getStyle("height",!1,!0).getPixels("y"),rt=this.getAttribute("rx"),it=this.getAttribute("ry");let st=rt.getPixels("x"),ot=it.getPixels("y");if(rt.hasValue()&&!it.hasValue()&&(ot=st),it.hasValue()&&!rt.hasValue()&&(st=ot),st=Math.min(st,tt/2),ot=Math.min(ot,nt/2),$){const at=4*((Math.sqrt(2)-1)/3);$.beginPath(),nt>0&&tt>0&&($.moveTo(_e+st,et),$.lineTo(_e+tt-st,et),$.bezierCurveTo(_e+tt-st+at*st,et,_e+tt,et+ot-at*ot,_e+tt,et+ot),$.lineTo(_e+tt,et+nt-ot),$.bezierCurveTo(_e+tt,et+nt-ot+at*ot,_e+tt-st+at*st,et+nt,_e+tt-st,et+nt),$.lineTo(_e+st,et+nt),$.bezierCurveTo(_e+st-at*st,et+nt,_e,et+nt-ot+at*ot,_e,et+nt-ot),$.lineTo(_e,et+ot),$.bezierCurveTo(_e,et+ot-at*ot,_e+st-at*st,et,_e+st,et),$.closePath())}return new BoundingBox(_e,et,_e+tt,et+nt)}getMarkers(){return null}constructor(...$){super(...$),this.type="rect"}}class CircleElement extends PathElement{path($){const _e=this.getAttribute("cx").getPixels("x"),et=this.getAttribute("cy").getPixels("y"),tt=this.getAttribute("r").getPixels();return $&&tt>0&&($.beginPath(),$.arc(_e,et,tt,0,Math.PI*2,!1),$.closePath()),new BoundingBox(_e-tt,et-tt,_e+tt,et+tt)}getMarkers(){return null}constructor(...$){super(...$),this.type="circle"}}class EllipseElement extends PathElement{path($){const _e=4*((Math.sqrt(2)-1)/3),et=this.getAttribute("rx").getPixels("x"),tt=this.getAttribute("ry").getPixels("y"),nt=this.getAttribute("cx").getPixels("x"),rt=this.getAttribute("cy").getPixels("y");return $&&et>0&&tt>0&&($.beginPath(),$.moveTo(nt+et,rt),$.bezierCurveTo(nt+et,rt+_e*tt,nt+_e*et,rt+tt,nt,rt+tt),$.bezierCurveTo(nt-_e*et,rt+tt,nt-et,rt+_e*tt,nt-et,rt),$.bezierCurveTo(nt-et,rt-_e*tt,nt-_e*et,rt-tt,nt,rt-tt),$.bezierCurveTo(nt+_e*et,rt-tt,nt+et,rt-_e*tt,nt+et,rt),$.closePath()),new BoundingBox(nt-et,rt-tt,nt+et,rt+tt)}getMarkers(){return null}constructor(...$){super(...$),this.type="ellipse"}}class LineElement extends PathElement{getPoints(){return[new Point(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path($){const[{x:_e,y:et},{x:tt,y:nt}]=this.getPoints();return $&&($.beginPath(),$.moveTo(_e,et),$.lineTo(tt,nt)),new BoundingBox(_e,et,tt,nt)}getMarkers(){const[$,_e]=this.getPoints(),et=$.angleTo(_e);return[[$,et],[_e,et]]}constructor(...$){super(...$),this.type="line"}}class PolylineElement extends PathElement{path($){const{points:_e}=this,[{x:et,y:tt}]=_e,nt=new BoundingBox(et,tt);return $&&($.beginPath(),$.moveTo(et,tt)),_e.forEach(rt=>{let{x:it,y:st}=rt;nt.addPoint(it,st),$&&$.lineTo(it,st)}),nt}getMarkers(){const{points:$}=this,_e=$.length-1,et=[];return $.forEach((tt,nt)=>{nt!==_e&&et.push([tt,tt.angleTo($[nt+1])])}),et.length>0&&et.push([$[$.length-1],et[et.length-1][1]]),et}constructor($,_e,et){super($,_e,et),this.type="polyline",this.points=[],this.points=Point.parsePath(this.getAttribute("points").getString())}}class PolygonElement extends PolylineElement{path($){const _e=super.path($),[{x:et,y:tt}]=this.points;return $&&($.lineTo(et,tt),$.closePath()),_e}constructor(...$){super(...$),this.type="polygon"}}class PatternElement extends Element{createPattern($,_e,et){const tt=this.getStyle("width").getPixels("x",!0),nt=this.getStyle("height").getPixels("y",!0),rt=new SVGElement(this.document,null);rt.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),rt.attributes.width=new Property(this.document,"width","".concat(tt,"px")),rt.attributes.height=new Property(this.document,"height","".concat(nt,"px")),rt.attributes.transform=new Property(this.document,"transform",this.getAttribute("patternTransform").getValue()),rt.children=this.children;const it=this.document.createCanvas(tt,nt),st=it.getContext("2d"),ot=this.getAttribute("x"),at=this.getAttribute("y");ot.hasValue()&&at.hasValue()&&st.translate(ot.getPixels("x",!0),at.getPixels("y",!0)),et.hasValue()?this.styles["fill-opacity"]=et:Reflect.deleteProperty(this.styles,"fill-opacity");for(let ut=-1;ut<=1;ut++)for(let ct=-1;ct<=1;ct++)st.save(),rt.attributes.x=new Property(this.document,"x",ut*it.width),rt.attributes.y=new Property(this.document,"y",ct*it.height),rt.render(st),st.restore();return $.createPattern(it,"repeat")}constructor(...$){super(...$),this.type="pattern"}}class MarkerElement extends Element{render($,_e,et){if(!_e)return;const{x:tt,y:nt}=_e,rt=this.getAttribute("orient").getString("auto"),it=this.getAttribute("markerUnits").getString("strokeWidth");$.translate(tt,nt),rt==="auto"&&$.rotate(et),it==="strokeWidth"&&$.scale($.lineWidth,$.lineWidth),$.save();const st=new SVGElement(this.document);st.type=this.type,st.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),st.attributes.refX=new Property(this.document,"refX",this.getAttribute("refX").getValue()),st.attributes.refY=new Property(this.document,"refY",this.getAttribute("refY").getValue()),st.attributes.width=new Property(this.document,"width",this.getAttribute("markerWidth").getValue()),st.attributes.height=new Property(this.document,"height",this.getAttribute("markerHeight").getValue()),st.attributes.overflow=new Property(this.document,"overflow",this.getAttribute("overflow").getValue()),st.attributes.fill=new Property(this.document,"fill",this.getAttribute("fill").getColor("black")),st.attributes.stroke=new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none")),st.children=this.children,st.render($),$.restore(),it==="strokeWidth"&&$.scale(1/$.lineWidth,1/$.lineWidth),rt==="auto"&&$.rotate(-et),$.translate(-tt,-nt)}constructor(...$){super(...$),this.type="marker"}}class DefsElement extends Element{render(){}constructor(...$){super(...$),this.type="defs"}}class GElement extends RenderedElement{getBoundingBox($){const _e=new BoundingBox;return this.children.forEach(et=>{_e.addBoundingBox(et.getBoundingBox($))}),_e}constructor(...$){super(...$),this.type="g"}}class GradientElement extends Element{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient($,_e,et){let tt=this;this.getHrefAttribute().hasValue()&&(tt=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(tt));const{stops:nt}=tt,rt=this.getGradient($,_e);if(!rt)return this.addParentOpacity(et,nt[nt.length-1].color);if(nt.forEach(it=>{rt.addColorStop(it.offset,this.addParentOpacity(et,it.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:it}=this,{MAX_VIRTUAL_PIXELS:st}=Screen,{viewPort:ot}=it.screen,at=ot.getRoot(),lt=new RectElement(it);lt.attributes.x=new Property(it,"x",-st/3),lt.attributes.y=new Property(it,"y",-st/3),lt.attributes.width=new Property(it,"width",st),lt.attributes.height=new Property(it,"height",st);const ut=new GElement(it);ut.attributes.transform=new Property(it,"transform",this.getAttribute("gradientTransform").getValue()),ut.children=[lt];const ct=new SVGElement(it);ct.attributes.x=new Property(it,"x",0),ct.attributes.y=new Property(it,"y",0),ct.attributes.width=new Property(it,"width",at.width),ct.attributes.height=new Property(it,"height",at.height),ct.children=[ut];const ft=it.createCanvas(at.width,at.height),dt=ft.getContext("2d");return dt.fillStyle=rt,ct.render(dt),dt.createPattern(ft,"no-repeat")}return rt}inheritStopContainer($){this.attributesToInherit.forEach(_e=>{!this.getAttribute(_e).hasValue()&&$.getAttribute(_e).hasValue()&&this.getAttribute(_e,!0).setValue($.getAttribute(_e).getValue())})}addParentOpacity($,_e){return $.hasValue()?new Property(this.document,"color",_e).addOpacity($).getColor():_e}constructor($,_e,et){super($,_e,et),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:tt,children:nt}=this;nt.forEach(rt=>{rt.type==="stop"&&tt.push(rt)})}}class LinearGradientElement extends GradientElement{getGradient($,_e){const et=this.getGradientUnits()==="objectBoundingBox",tt=et?_e.getBoundingBox($):null;if(et&&!tt)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const nt=et?tt.x+tt.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),rt=et?tt.y+tt.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),it=et?tt.x+tt.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),st=et?tt.y+tt.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return nt===it&&rt===st?null:$.createLinearGradient(nt,rt,it,st)}constructor($,_e,et){super($,_e,et),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class RadialGradientElement extends GradientElement{getGradient($,_e){const et=this.getGradientUnits()==="objectBoundingBox",tt=_e.getBoundingBox($);if(et&&!tt)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const nt=et?tt.x+tt.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),rt=et?tt.y+tt.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let it=nt,st=rt;this.getAttribute("fx").hasValue()&&(it=et?tt.x+tt.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(st=et?tt.y+tt.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const ot=et?(tt.width+tt.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),at=this.getAttribute("fr").getPixels();return $.createRadialGradient(it,st,at,nt,rt,ot)}constructor($,_e,et){super($,_e,et),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class StopElement extends Element{constructor($,_e,et){super($,_e,et),this.type="stop";const tt=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),nt=this.getStyle("stop-opacity");let rt=this.getStyle("stop-color",!0);rt.getString()===""&&rt.setValue("#000"),nt.hasValue()&&(rt=rt.addOpacity(nt)),this.offset=tt,this.color=rt.getColor()}}class AnimateElement extends Element{getProperty(){const $=this.getAttribute("attributeType").getString(),_e=this.getAttribute("attributeName").getString();return $==="CSS"?this.parent.getStyle(_e,!0):this.parent.getAttribute(_e,!0)}calcValue(){const{initialUnits:$}=this,{progress:_e,from:et,to:tt}=this.getProgress();let nt=et.getNumber()+(tt.getNumber()-et.getNumber())*_e;return $==="%"&&(nt*=100),"".concat(nt).concat($)}update($){const{parent:_e}=this,et=this.getProperty();if(this.initialValue||(this.initialValue=et.getString(),this.initialUnits=et.getUnits()),this.duration>this.maxDuration){const nt=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(nt==="freeze"&&!this.frozen)this.frozen=!0,_e&&et&&(_e.animationFrozen=!0,_e.animationFrozenValue=et.getString());else if(nt==="remove"&&!this.removed)return this.removed=!0,_e&&et&&et.setValue(_e.animationFrozen?_e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=$;let tt=!1;if(this.begin<this.duration){let nt=this.calcValue();const rt=this.getAttribute("type");if(rt.hasValue()){const it=rt.getString();nt="".concat(it,"(").concat(nt,")")}et.setValue(nt),tt=!0}return tt}getProgress(){const{document:$,values:_e}=this;let et=(this.duration-this.begin)/(this.maxDuration-this.begin),tt,nt;if(_e.hasValue()){const rt=et*(_e.getValue().length-1),it=Math.floor(rt),st=Math.ceil(rt);let ot;ot=_e.getValue()[it],tt=new Property($,"from",ot?parseFloat(ot):0),ot=_e.getValue()[st],nt=new Property($,"to",ot?parseFloat(ot):0),et=(rt-it)/(st-it)}else tt=this.from,nt=this.to;return{progress:et,from:tt,to:nt}}constructor($,_e,et){super($,_e,et),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,$.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property($,"values",null);const tt=this.getAttribute("values");tt.hasValue()&&this.values.setValue(tt.getString().split(";"))}}class AnimateColorElement extends AnimateElement{calcValue(){const{progress:$,from:_e,to:et}=this.getProgress(),tt=new RGBColor$1(_e.getColor()),nt=new RGBColor$1(et.getColor());if(tt.ok&&nt.ok){const rt=tt.r+(nt.r-tt.r)*$,it=tt.g+(nt.g-tt.g)*$,st=tt.b+(nt.b-tt.b)*$;return"rgb(".concat(Math.floor(rt),", ").concat(Math.floor(it),", ").concat(Math.floor(st),")")}return this.getAttribute("from").getColor()}constructor(...$){super(...$),this.type="animateColor"}}class AnimateTransformElement extends AnimateElement{calcValue(){const{progress:$,from:_e,to:et}=this.getProgress(),tt=toNumbers(_e.getString()),nt=toNumbers(et.getString());return tt.map((it,st)=>{const ot=nt[st];return it+(ot-it)*$}).join(" ")}constructor(...$){super(...$),this.type="animateTransform"}}class FontFaceElement extends Element{constructor($,_e,et){super($,_e,et),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class GlyphElement extends PathElement{constructor($,_e,et){super($,_e,et),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class MissingGlyphElement extends GlyphElement{constructor(...$){super(...$),this.type="missing-glyph",this.horizAdvX=0}}class FontElement extends Element{render(){}constructor($,_e,et){super($,_e,et),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:tt}=$,{children:nt}=this;for(const rt of nt)if(rt instanceof FontFaceElement){this.fontFace=rt;const it=rt.getStyle("font-family");it.hasValue()&&(tt[it.getString()]=this)}else if(rt instanceof MissingGlyphElement)this.missingGlyph=rt;else if(rt instanceof GlyphElement)if(rt.arabicForm){this.isRTL=!0,this.isArabic=!0;const it=this.arabicGlyphs[rt.unicode];typeof it>"u"?this.arabicGlyphs[rt.unicode]={[rt.arabicForm]:rt}:it[rt.arabicForm]=rt}else this.glyphs[rt.unicode]=rt}}class TRefElement extends TextElement{getText(){const $=this.getHrefAttribute().getDefinition();if($){const _e=$.children[0];if(_e)return _e.getText()}return""}constructor(...$){super(...$),this.type="tref"}}class AElement extends TextElement{getText(){return this.text}renderChildren($){if(this.hasText){super.renderChildren($);const{document:_e,x:et,y:tt}=this,{mouse:nt}=_e.screen,rt=new Property(_e,"fontSize",Font.parse(_e.ctx.font).fontSize);nt.isWorking()&&nt.checkBoundingBox(this,new BoundingBox(et,tt-rt.getPixels("y"),et+this.measureText($),tt))}else if(this.children.length>0){const _e=new GElement(this.document);_e.children=this.children,_e.parent=this,_e.render($)}}onClick(){const{window:$}=this.document;$&&$.open(this.getHrefAttribute().getString())}onMouseMove(){const $=this.document.ctx;$.canvas.style.cursor="pointer"}constructor($,_e,et){super($,_e,et),this.type="a";const{childNodes:tt}=_e,nt=tt[0],rt=tt.length>0&&Array.from(tt).every(it=>it.nodeType===3);this.hasText=rt,this.text=rt?this.getTextFromNode(nt):""}}class TextPathElement extends TextElement{getText(){return this.text}path($){const{dataArray:_e}=this;$&&$.beginPath(),_e.forEach(et=>{let{type:tt,points:nt}=et;switch(tt){case PathParser.LINE_TO:$&&$.lineTo(nt[0],nt[1]);break;case PathParser.MOVE_TO:$&&$.moveTo(nt[0],nt[1]);break;case PathParser.CURVE_TO:$&&$.bezierCurveTo(nt[0],nt[1],nt[2],nt[3],nt[4],nt[5]);break;case PathParser.QUAD_TO:$&&$.quadraticCurveTo(nt[0],nt[1],nt[2],nt[3]);break;case PathParser.ARC:{const[rt,it,st,ot,at,lt,ut,ct]=nt,ft=st>ot?st:ot,dt=st>ot?1:st/ot,mt=st>ot?ot/st:1;$&&($.translate(rt,it),$.rotate(ut),$.scale(dt,mt),$.arc(0,0,ft,at,at+lt,!!(1-ct)),$.scale(1/dt,1/mt),$.rotate(-ut),$.translate(-rt,-it));break}case PathParser.CLOSE_PATH:$&&$.closePath();break}})}renderChildren($){this.setTextData($),$.save();const _e=this.parent.getStyle("text-decoration").getString(),et=this.getFontSize(),{glyphInfo:tt}=this,nt=$.fillStyle;_e==="underline"&&$.beginPath(),tt.forEach((rt,it)=>{const{p0:st,p1:ot,rotation:at,text:lt}=rt;$.save(),$.translate(st.x,st.y),$.rotate(at),$.fillStyle&&$.fillText(lt,0,0),$.strokeStyle&&$.strokeText(lt,0,0),$.restore(),_e==="underline"&&(it===0&&$.moveTo(st.x,st.y+et/8),$.lineTo(ot.x,ot.y+et/5))}),_e==="underline"&&($.lineWidth=et/20,$.strokeStyle=nt,$.stroke(),$.closePath()),$.restore()}getLetterSpacingAt(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[$]||0}findSegmentToFitChar($,_e,et,tt,nt,rt,it,st,ot){let at=rt,lt=this.measureText($,st);st===" "&&_e==="justify"&&et<tt&&(lt+=(tt-et)/nt),ot>-1&&(at+=this.getLetterSpacingAt(ot));const ut=this.textHeight/20,ct=this.getEquidistantPointOnPath(at,ut,0),ft=this.getEquidistantPointOnPath(at+lt,ut,0),dt={p0:ct,p1:ft},mt=ct&&ft?Math.atan2(ft.y-ct.y,ft.x-ct.x):0;if(it){const pt=Math.cos(Math.PI/2+mt)*it,yt=Math.cos(-mt)*it;dt.p0={...ct,x:ct.x+pt,y:ct.y+yt},dt.p1={...ft,x:ft.x+pt,y:ft.y+yt}}return at+=lt,{offset:at,segment:dt,rotation:mt}}measureText($,_e){const{measuresCache:et}=this,tt=_e||this.getText();if(et.has(tt))return et.get(tt);const nt=this.measureTargetText($,tt);return et.set(tt,nt),nt}setTextData($){if(this.glyphInfo)return;const _e=this.getText(),et=_e.split(""),tt=_e.split(" ").length-1,nt=this.parent.getAttribute("dx").split().map(vt=>vt.getPixels("x")),rt=this.parent.getAttribute("dy").getPixels("y"),it=this.parent.getStyle("text-anchor").getString("start"),st=this.getStyle("letter-spacing"),ot=this.parent.getStyle("letter-spacing");let at=0;!st.hasValue()||st.getValue()==="inherit"?at=ot.getPixels():st.hasValue()&&st.getValue()!=="initial"&&st.getValue()!=="unset"&&(at=st.getPixels());const lt=[],ut=_e.length;this.letterSpacingCache=lt;for(let vt=0;vt<ut;vt++)lt.push(typeof nt[vt]<"u"?nt[vt]:at);const ct=lt.reduce((vt,Ct,At)=>At===0?0:vt+Ct||0,0),ft=this.measureText($),dt=Math.max(ft+ct,0);this.textWidth=ft,this.textHeight=this.getFontSize(),this.glyphInfo=[];const mt=this.getPathLength(),pt=this.getStyle("startOffset").getNumber(0)*mt;let yt=0;(it==="middle"||it==="center")&&(yt=-dt/2),(it==="end"||it==="right")&&(yt=-dt),yt+=pt,et.forEach((vt,Ct)=>{const{offset:At,segment:$t,rotation:bt}=this.findSegmentToFitChar($,it,dt,mt,tt,yt,rt,vt,Ct);yt=At,!(!$t.p0||!$t.p1)&&this.glyphInfo.push({text:et[Ct],p0:$t.p0,p1:$t.p1,rotation:bt})})}parsePathData($){if(this.pathLength=-1,!$)return[];const _e=[],{pathParser:et}=$;for(et.reset();!et.isEnd();){const{current:tt}=et,nt=tt?tt.x:0,rt=tt?tt.y:0,it=et.next();let st=it.type,ot=[];switch(it.type){case PathParser.MOVE_TO:this.pathM(et,ot);break;case PathParser.LINE_TO:st=this.pathL(et,ot);break;case PathParser.HORIZ_LINE_TO:st=this.pathH(et,ot);break;case PathParser.VERT_LINE_TO:st=this.pathV(et,ot);break;case PathParser.CURVE_TO:this.pathC(et,ot);break;case PathParser.SMOOTH_CURVE_TO:st=this.pathS(et,ot);break;case PathParser.QUAD_TO:this.pathQ(et,ot);break;case PathParser.SMOOTH_QUAD_TO:st=this.pathT(et,ot);break;case PathParser.ARC:ot=this.pathA(et);break;case PathParser.CLOSE_PATH:PathElement.pathZ(et);break}it.type!==PathParser.CLOSE_PATH?_e.push({type:st,points:ot,start:{x:nt,y:rt},pathLength:this.calcLength(nt,rt,st,ot)}):_e.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return _e}pathM($,_e){const{x:et,y:tt}=PathElement.pathM($).point;_e.push(et,tt)}pathL($,_e){const{x:et,y:tt}=PathElement.pathL($).point;return _e.push(et,tt),PathParser.LINE_TO}pathH($,_e){const{x:et,y:tt}=PathElement.pathH($).point;return _e.push(et,tt),PathParser.LINE_TO}pathV($,_e){const{x:et,y:tt}=PathElement.pathV($).point;return _e.push(et,tt),PathParser.LINE_TO}pathC($,_e){const{point:et,controlPoint:tt,currentPoint:nt}=PathElement.pathC($);_e.push(et.x,et.y,tt.x,tt.y,nt.x,nt.y)}pathS($,_e){const{point:et,controlPoint:tt,currentPoint:nt}=PathElement.pathS($);return _e.push(et.x,et.y,tt.x,tt.y,nt.x,nt.y),PathParser.CURVE_TO}pathQ($,_e){const{controlPoint:et,currentPoint:tt}=PathElement.pathQ($);_e.push(et.x,et.y,tt.x,tt.y)}pathT($,_e){const{controlPoint:et,currentPoint:tt}=PathElement.pathT($);return _e.push(et.x,et.y,tt.x,tt.y),PathParser.QUAD_TO}pathA($){let{rX:_e,rY:et,sweepFlag:tt,xAxisRotation:nt,centp:rt,a1:it,ad:st}=PathElement.pathA($);return tt===0&&st>0&&(st-=2*Math.PI),tt===1&&st<0&&(st+=2*Math.PI),[rt.x,rt.y,_e,et,it,st,nt,tt]}calcLength($,_e,et,tt){let nt=0,rt=null,it=null,st=0;switch(et){case PathParser.LINE_TO:return this.getLineLength($,_e,tt[0],tt[1]);case PathParser.CURVE_TO:for(nt=0,rt=this.getPointOnCubicBezier(0,$,_e,tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]),st=.01;st<=1;st+=.01)it=this.getPointOnCubicBezier(st,$,_e,tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]),nt+=this.getLineLength(rt.x,rt.y,it.x,it.y),rt=it;return nt;case PathParser.QUAD_TO:for(nt=0,rt=this.getPointOnQuadraticBezier(0,$,_e,tt[0],tt[1],tt[2],tt[3]),st=.01;st<=1;st+=.01)it=this.getPointOnQuadraticBezier(st,$,_e,tt[0],tt[1],tt[2],tt[3]),nt+=this.getLineLength(rt.x,rt.y,it.x,it.y),rt=it;return nt;case PathParser.ARC:{nt=0;const ot=tt[4],at=tt[5],lt=tt[4]+at;let ut=Math.PI/180;if(Math.abs(ot-lt)<ut&&(ut=Math.abs(ot-lt)),rt=this.getPointOnEllipticalArc(tt[0],tt[1],tt[2],tt[3],ot,0),at<0)for(st=ot-ut;st>lt;st-=ut)it=this.getPointOnEllipticalArc(tt[0],tt[1],tt[2],tt[3],st,0),nt+=this.getLineLength(rt.x,rt.y,it.x,it.y),rt=it;else for(st=ot+ut;st<lt;st+=ut)it=this.getPointOnEllipticalArc(tt[0],tt[1],tt[2],tt[3],st,0),nt+=this.getLineLength(rt.x,rt.y,it.x,it.y),rt=it;return it=this.getPointOnEllipticalArc(tt[0],tt[1],tt[2],tt[3],lt,0),nt+=this.getLineLength(rt.x,rt.y,it.x,it.y),nt}}return 0}getPointOnLine($,_e,et,tt,nt){let rt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:_e,it=arguments.length>6&&arguments[6]!==void 0?arguments[6]:et;const st=(nt-et)/(tt-_e+PSEUDO_ZERO);let ot=Math.sqrt($*$/(1+st*st));tt<_e&&(ot*=-1);let at=st*ot,lt=null;if(tt===_e)lt={x:rt,y:it+at};else if((it-et)/(rt-_e+PSEUDO_ZERO)===st)lt={x:rt+ot,y:it+at};else{let ut=0,ct=0;const ft=this.getLineLength(_e,et,tt,nt);if(ft<PSEUDO_ZERO)return null;let dt=(rt-_e)*(tt-_e)+(it-et)*(nt-et);dt/=ft*ft,ut=_e+dt*(tt-_e),ct=et+dt*(nt-et);const mt=this.getLineLength(rt,it,ut,ct),pt=Math.sqrt($*$-mt*mt);ot=Math.sqrt(pt*pt/(1+st*st)),tt<_e&&(ot*=-1),at=st*ot,lt={x:ut+ot,y:ct+at}}return lt}getPointOnPath($){const _e=this.getPathLength();let et=0,tt=null;if($<-5e-5||$-5e-5>_e)return null;const{dataArray:nt}=this;for(const rt of nt){if(rt&&(rt.pathLength<5e-5||et+rt.pathLength+5e-5<$)){et+=rt.pathLength;continue}const it=$-et;let st=0;switch(rt.type){case PathParser.LINE_TO:tt=this.getPointOnLine(it,rt.start.x,rt.start.y,rt.points[0],rt.points[1],rt.start.x,rt.start.y);break;case PathParser.ARC:{const ot=rt.points[4],at=rt.points[5],lt=rt.points[4]+at;if(st=ot+it/rt.pathLength*at,at<0&&st<lt||at>=0&&st>lt)break;tt=this.getPointOnEllipticalArc(rt.points[0],rt.points[1],rt.points[2],rt.points[3],st,rt.points[6]);break}case PathParser.CURVE_TO:st=it/rt.pathLength,st>1&&(st=1),tt=this.getPointOnCubicBezier(st,rt.start.x,rt.start.y,rt.points[0],rt.points[1],rt.points[2],rt.points[3],rt.points[4],rt.points[5]);break;case PathParser.QUAD_TO:st=it/rt.pathLength,st>1&&(st=1),tt=this.getPointOnQuadraticBezier(st,rt.start.x,rt.start.y,rt.points[0],rt.points[1],rt.points[2],rt.points[3]);break}if(tt)return tt;break}return null}getLineLength($,_e,et,tt){return Math.sqrt((et-$)*(et-$)+(tt-_e)*(tt-_e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce(($,_e)=>_e.pathLength>0?$+_e.pathLength:$,0)),this.pathLength}getPointOnCubicBezier($,_e,et,tt,nt,rt,it,st,ot){const at=st*CB1($)+rt*CB2($)+tt*CB3($)+_e*CB4($),lt=ot*CB1($)+it*CB2($)+nt*CB3($)+et*CB4($);return{x:at,y:lt}}getPointOnQuadraticBezier($,_e,et,tt,nt,rt,it){const st=rt*QB1($)+tt*QB2($)+_e*QB3($),ot=it*QB1($)+nt*QB2($)+et*QB3($);return{x:st,y:ot}}getPointOnEllipticalArc($,_e,et,tt,nt,rt){const it=Math.cos(rt),st=Math.sin(rt),ot={x:et*Math.cos(nt),y:tt*Math.sin(nt)};return{x:$+(ot.x*it-ot.y*st),y:_e+(ot.x*st+ot.y*it)}}buildEquidistantCache($,_e){const et=this.getPathLength(),tt=_e||.25,nt=$||et/100;if(!this.equidistantCache||this.equidistantCache.step!==nt||this.equidistantCache.precision!==tt){this.equidistantCache={step:nt,precision:tt,points:[]};let rt=0;for(let it=0;it<=et;it+=tt){const st=this.getPointOnPath(it),ot=this.getPointOnPath(it+tt);!st||!ot||(rt+=this.getLineLength(st.x,st.y,ot.x,ot.y),rt>=nt&&(this.equidistantCache.points.push({x:st.x,y:st.y,distance:it}),rt-=nt))}}}getEquidistantPointOnPath($,_e,et){if(this.buildEquidistantCache(_e,et),$<0||$-this.getPathLength()>5e-5)return null;const tt=Math.round($/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[tt]||null}constructor($,_e,et){super($,_e,et),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const tt=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(tt)}}const dataUriRegex=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class ImageElement extends RenderedElement{async loadImage($){try{const _e=await this.document.createImage($);this.image=_e}catch(_e){console.error('Error while loading image "'.concat($,'":'),_e)}this.loaded=!0}async loadSvg($){const _e=dataUriRegex.exec($);if(_e){const et=_e[5];et&&(_e[4]==="base64"?this.image=atob(et):this.image=decodeURIComponent(et))}else try{const tt=await(await this.document.fetch($)).text();this.image=tt}catch(et){console.error('Error while loading image "'.concat($,'":'),et)}this.loaded=!0}renderChildren($){const{document:_e,image:et,loaded:tt}=this,nt=this.getAttribute("x").getPixels("x"),rt=this.getAttribute("y").getPixels("y"),it=this.getStyle("width").getPixels("x"),st=this.getStyle("height").getPixels("y");if(!(!tt||!et||!it||!st)){if($.save(),$.translate(nt,rt),typeof et=="string"){const ot=_e.canvg.forkString($,et,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:it,scaleHeight:st}),{documentElement:at}=ot.document;at&&(at.parent=this),ot.render()}else _e.setViewBox({ctx:$,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:it,desiredWidth:et.width,height:st,desiredHeight:et.height}),this.loaded&&(!("complete"in et)||et.complete)&&$.drawImage(et,0,0);$.restore()}}getBoundingBox(){const $=this.getAttribute("x").getPixels("x"),_e=this.getAttribute("y").getPixels("y"),et=this.getStyle("width").getPixels("x"),tt=this.getStyle("height").getPixels("y");return new BoundingBox($,_e,$+et,_e+tt)}constructor($,_e,et){super($,_e,et),this.type="image",this.loaded=!1;const tt=this.getHrefAttribute().getString();if(!tt)return;const nt=tt.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(tt);$.images.push(this),nt?this.loadSvg(tt):this.loadImage(tt)}}class SymbolElement extends RenderedElement{render($){}constructor(...$){super(...$),this.type="symbol"}}class SVGFontLoader{async load($,_e){try{const{document:et}=this,nt=(await et.canvg.parser.load(_e)).getElementsByTagName("font");Array.from(nt).forEach(rt=>{const it=et.createElement(rt);et.definitions[$]=it})}catch(et){console.error('Error while loading font "'.concat(_e,'":'),et)}this.loaded=!0}constructor($){this.document=$,this.loaded=!1,$.fonts.push(this)}}class StyleElement extends Element{constructor($,_e,et){super($,_e,et),this.type="style",compressSpaces(Array.from(_e.childNodes).map(rt=>rt.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(rt=>{const it=rt.trim();if(!it)return;const st=it.split("{"),ot=st[0].split(","),at=st[1].split(";");ot.forEach(lt=>{const ut=lt.trim();if(!ut)return;const ct=$.styles[ut]||{};if(at.forEach(ft=>{const dt=ft.indexOf(":"),mt=ft.substr(0,dt).trim(),pt=ft.substr(dt+1,ft.length-dt).trim();mt&&pt&&(ct[mt]=new Property($,mt,pt))}),$.styles[ut]=ct,$.stylesSpecificity[ut]=getSelectorSpecificity(ut),ut==="@font-face"){const ft=ct["font-family"].getString().replace(/"|'/g,"");ct.src.getString().split(",").forEach(mt=>{if(mt.indexOf('format("svg")')>0){const pt=parseExternalUrl(mt);pt&&new SVGFontLoader($).load(ft,pt)}})}})})}}StyleElement.parseExternalUrl=parseExternalUrl;class UseElement extends RenderedElement{setContext($){super.setContext($);const _e=this.getAttribute("x"),et=this.getAttribute("y");_e.hasValue()&&$.translate(_e.getPixels("x"),0),et.hasValue()&&$.translate(0,et.getPixels("y"))}path($){const{element:_e}=this;_e&&_e.path($)}renderChildren($){const{document:_e,element:et}=this;if(et){let tt=et;if(et.type==="symbol"&&(tt=new SVGElement(_e),tt.attributes.viewBox=new Property(_e,"viewBox",et.getAttribute("viewBox").getString()),tt.attributes.preserveAspectRatio=new Property(_e,"preserveAspectRatio",et.getAttribute("preserveAspectRatio").getString()),tt.attributes.overflow=new Property(_e,"overflow",et.getAttribute("overflow").getString()),tt.children=et.children,et.styles.opacity=new Property(_e,"opacity",this.calculateOpacity())),tt.type==="svg"){const rt=this.getStyle("width",!1,!0),it=this.getStyle("height",!1,!0);rt.hasValue()&&(tt.attributes.width=new Property(_e,"width",rt.getString())),it.hasValue()&&(tt.attributes.height=new Property(_e,"height",it.getString()))}const nt=tt.parent;tt.parent=this,tt.render($),tt.parent=nt}}getBoundingBox($){const{element:_e}=this;return _e?_e.getBoundingBox($):null}elementTransform(){const{document:$,element:_e}=this;return _e?Transform.fromElement($,_e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...$){super(...$),this.type="use"}}function imGet(j,$,_e,et,tt,nt){return j[_e*et*4+$*4+nt]}function imSet(j,$,_e,et,tt,nt,rt){j[_e*et*4+$*4+nt]=rt}function m(j,$,_e){return j[$]*_e}function c$1(j,$,_e,et){return $+Math.cos(j)*_e+Math.sin(j)*et}class FeColorMatrixElement extends Element{apply($,_e,et,tt,nt){const{includeOpacity:rt,matrix:it}=this,st=$.getImageData(0,0,tt,nt);for(let ot=0;ot<nt;ot++)for(let at=0;at<tt;at++){const lt=imGet(st.data,at,ot,tt,nt,0),ut=imGet(st.data,at,ot,tt,nt,1),ct=imGet(st.data,at,ot,tt,nt,2),ft=imGet(st.data,at,ot,tt,nt,3);let dt=m(it,0,lt)+m(it,1,ut)+m(it,2,ct)+m(it,3,ft)+m(it,4,1),mt=m(it,5,lt)+m(it,6,ut)+m(it,7,ct)+m(it,8,ft)+m(it,9,1),pt=m(it,10,lt)+m(it,11,ut)+m(it,12,ct)+m(it,13,ft)+m(it,14,1),yt=m(it,15,lt)+m(it,16,ut)+m(it,17,ct)+m(it,18,ft)+m(it,19,1);rt&&(dt=0,mt=0,pt=0,yt*=ft/255),imSet(st.data,at,ot,tt,nt,0,dt),imSet(st.data,at,ot,tt,nt,1,mt),imSet(st.data,at,ot,tt,nt,2,pt),imSet(st.data,at,ot,tt,nt,3,yt)}$.clearRect(0,0,tt,nt),$.putImageData(st,0,0)}constructor($,_e,et){super($,_e,et),this.type="feColorMatrix";let tt=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const nt=tt[0];tt=[.213+.787*nt,.715-.715*nt,.072-.072*nt,0,0,.213-.213*nt,.715+.285*nt,.072-.072*nt,0,0,.213-.213*nt,.715-.715*nt,.072+.928*nt,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const nt=tt[0]*Math.PI/180;tt=[c$1(nt,.213,.787,-.213),c$1(nt,.715,-.715,-.715),c$1(nt,.072,-.072,.928),0,0,c$1(nt,.213,-.213,.143),c$1(nt,.715,.285,.14),c$1(nt,.072,-.072,-.283),0,0,c$1(nt,.213,-.213,-.787),c$1(nt,.715,-.715,.715),c$1(nt,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=tt,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class MaskElement extends Element{apply($,_e){const{document:et}=this;let tt=this.getAttribute("x").getPixels("x"),nt=this.getAttribute("y").getPixels("y"),rt=this.getStyle("width").getPixels("x"),it=this.getStyle("height").getPixels("y");if(!rt&&!it){const ct=new BoundingBox;this.children.forEach(ft=>{ct.addBoundingBox(ft.getBoundingBox($))}),tt=Math.floor(ct.x1),nt=Math.floor(ct.y1),rt=Math.floor(ct.width),it=Math.floor(ct.height)}const st=this.removeStyles(_e,MaskElement.ignoreStyles),ot=et.createCanvas(tt+rt,nt+it),at=ot.getContext("2d");et.screen.setDefaults(at),this.renderChildren(at),new FeColorMatrixElement(et,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(at,0,0,tt+rt,nt+it);const lt=et.createCanvas(tt+rt,nt+it),ut=lt.getContext("2d");et.screen.setDefaults(ut),_e.render(ut),ut.globalCompositeOperation="destination-in",ut.fillStyle=at.createPattern(ot,"no-repeat"),ut.fillRect(0,0,tt+rt,nt+it),$.fillStyle=ut.createPattern(lt,"no-repeat"),$.fillRect(0,0,tt+rt,nt+it),this.restoreStyles(_e,st)}render($){}constructor(...$){super(...$),this.type="mask"}}MaskElement.ignoreStyles=["mask","transform","clip-path"];const noop=()=>{};class ClipPathElement extends Element{apply($){const{document:_e}=this,et=Reflect.getPrototypeOf($),{beginPath:tt,closePath:nt}=$;et&&(et.beginPath=noop,et.closePath=noop),Reflect.apply(tt,$,[]),this.children.forEach(rt=>{if(!("path"in rt))return;let it="elementTransform"in rt?rt.elementTransform():null;it||(it=Transform.fromElement(_e,rt)),it&&it.apply($),rt.path($),et&&(et.closePath=nt),it&&it.unapply($)}),Reflect.apply(nt,$,[]),$.clip(),et&&(et.beginPath=tt,et.closePath=nt)}render($){}constructor(...$){super(...$),this.type="clipPath"}}class FilterElement extends Element{apply($,_e){const{document:et,children:tt}=this,nt="getBoundingBox"in _e?_e.getBoundingBox($):null;if(!nt)return;let rt=0,it=0;tt.forEach(pt=>{const yt=pt.extraFilterDistance||0;rt=Math.max(rt,yt),it=Math.max(it,yt)});const st=Math.floor(nt.width),ot=Math.floor(nt.height),at=st+2*rt,lt=ot+2*it;if(at<1||lt<1)return;const ut=Math.floor(nt.x),ct=Math.floor(nt.y),ft=this.removeStyles(_e,FilterElement.ignoreStyles),dt=et.createCanvas(at,lt),mt=dt.getContext("2d");et.screen.setDefaults(mt),mt.translate(-ut+rt,-ct+it),_e.render(mt),tt.forEach(pt=>{typeof pt.apply=="function"&&pt.apply(mt,0,0,at,lt)}),$.drawImage(dt,0,0,at,lt,ut-rt,ct-it,at,lt),this.restoreStyles(_e,ft)}render($){}constructor(...$){super(...$),this.type="filter"}}FilterElement.ignoreStyles=["filter","transform","clip-path"];class FeDropShadowElement extends Element{apply($,_e,et,tt,nt){}constructor($,_e,et){super($,_e,et),this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class FeMorphologyElement extends Element{apply($,_e,et,tt,nt){}constructor(...$){super(...$),this.type="feMorphology"}}class FeCompositeElement extends Element{apply($,_e,et,tt,nt){}constructor(...$){super(...$),this.type="feComposite"}}class FeGaussianBlurElement extends Element{apply($,_e,et,tt,nt){const{document:rt,blurRadius:it}=this,st=rt.window?rt.window.document.body:null,ot=$.canvas;ot.id=rt.getUniqueId(),st&&(ot.style.display="none",st.appendChild(ot)),processCanvasRGBA(ot,_e,et,tt,nt,it),st&&st.removeChild(ot)}constructor($,_e,et){super($,_e,et),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class TitleElement extends Element{constructor(...$){super(...$),this.type="title"}}class DescElement extends Element{constructor(...$){super(...$),this.type="desc"}}const elements={svg:SVGElement,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};function createCanvas(j,$){const _e=document.createElement("canvas");return _e.width=j,_e.height=$,_e}async function createImage(j){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const _e=document.createElement("img");return $&&(_e.crossOrigin="Anonymous"),new Promise((et,tt)=>{_e.onload=()=>{et(_e)},_e.onerror=(nt,rt,it,st,ot)=>{tt(ot)},_e.src=j})}const DEFAULT_EM_SIZE=12;class Document{bindCreateImage($,_e){return typeof _e=="boolean"?(et,tt)=>$(et,typeof tt=="boolean"?tt:_e):$}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:$}=this;return $[$.length-1]||DEFAULT_EM_SIZE}set emSize($){const{emSizeStack:_e}=this;_e.push($)}popEmSize(){const{emSizeStack:$}=this;$.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every($=>$.loaded)}isFontsLoaded(){return this.fonts.every($=>$.loaded)}createDocumentElement($){const _e=this.createElement($.documentElement);return _e.root=!0,_e.addStylesFromStyleDefinition(),this.documentElement=_e,_e}createElement($){const _e=$.nodeName.replace(/^[^:]+:/,""),et=Document.elementTypes[_e];return et?new et(this,$):new UnknownElement(this,$)}createTextNode($){return new TextNode(this,$)}setViewBox($){this.screen.setViewBox({document:this,...$})}constructor($,{rootEmSize:_e=DEFAULT_EM_SIZE,emSize:et=DEFAULT_EM_SIZE,createCanvas:tt=Document.createCanvas,createImage:nt=Document.createImage,anonymousCrossOrigin:rt}={}){this.canvg=$,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=$.screen,this.rootEmSize=_e,this.emSize=et,this.createCanvas=tt,this.createImage=this.bindCreateImage(nt,rt),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}Document.createCanvas=createCanvas;Document.createImage=createImage;Document.elementTypes=elements;class Canvg{static async from($,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const nt=await new Parser(et).parse(_e);return new Canvg($,nt,et)}static fromString($,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const nt=new Parser(et).parseFromString(_e);return new Canvg($,nt,et)}fork($,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.from($,_e,{...this.options,...et})}forkString($,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.fromString($,_e,{...this.options,...et})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...$}),await this.ready(),this.stop()}start(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:_e,screen:et,options:tt}=this;et.start(_e,{enableRedraw:!0,...tt,...$})}stop(){this.screen.stop()}resize($){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$,et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize($,_e,et)}constructor($,_e,et={}){this.parser=new Parser(et),this.screen=new Screen($,et),this.options=et;const tt=new Document(this,et),nt=tt.createDocumentElement(_e);this.document=tt,this.documentElement=nt}}const preset=index.offscreen();async function toPng(j){const{width:$,height:_e,svg:et}=j;console.log("svg",et);const tt=new OffscreenCanvas($,_e),nt=tt.getContext("2d");await(await Canvg.from(nt,et.outerHTML,preset)).render();const it=await tt.convertToBlob();return URL.createObjectURL(it)}function Diagram({ast:j,semantics:$,diagramType:_e}){const[et,tt]=React.useState(null),[nt,rt]=React.useState(null),[it,st]=React.useState(null),ot=async()=>{it?(tt(saveSvgUrl(it)),rt(await toPng({svg:it,width:it.clientWidth*2,height:it.clientHeight*2}))):(tt(null),rt(null))},at=async lt=>{st(lt),tt(null),rt(null)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"diagram-controls",children:[et&&nt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx("button",{onClick:ot,children:"Export"}),et&&nt&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("a",{href:et,download:`${_e}.svg`,children:"Download SVG"}),jsxRuntimeExports.jsx("span",{children:" | "}),jsxRuntimeExports.jsx("a",{href:nt,download:`${_e}.png`,children:"PNG"})]})]}),_e==="conflict"&&jsxRuntimeExports.jsx(Cloud,{ast:j,setSvgElem:at}),_e==="goal"&&jsxRuntimeExports.jsx(Tree,{semantics:$,setSvgElem:at}),_e==="problem"&&jsxRuntimeExports.jsx(Tree,{semantics:$,setSvgElem:at})]})}var A$1=(j=>(j.BAR="BAR",j.SECTION="SECTION",j))(A$1||{}),N=(j=>(j.ACTIVATE="activate",j.MOVE="move",j.DEACTIVATE="deactivate",j))(N||{}),y={x:0,y:0};function O(j,$){return $?{x:j.x-$.x,y:j.y-$.y}:y}function S(){let j=[],$=0,_e=0;return{collect(et){j.push(et),et.disableResponsive||($+=1,_e+=et.currentSize)},getResult(){return{sizeInfoArray:j,flexGrowRatio:$/_e}}}}function a(j){return Number.isFinite(j)&&j>0}function g$1(j,$,_e){let{collect:et,getResult:tt}=S(),nt=I(j,$,-1,_e),rt=I(j,-$,1,_e),it=$-nt.remainingOffset,st=-$-rt.remainingOffset;function ot(at,lt){at.forEach(et),et(_e[j]),lt.forEach(et)}if(it===-st)ot(nt.sizeInfoArray,rt.sizeInfoArray);else if(Math.abs(it)<Math.abs(st)){let at=I(j,-it,1,_e);ot(nt.sizeInfoArray,at.sizeInfoArray)}else{let at=I(j,-st,-1,_e);ot(at.sizeInfoArray,rt.sizeInfoArray)}return tt()}function I(j,$,_e,et){let tt=[],nt=$;for(let st=j+_e;it(st);st+=_e)if(nt){let{sizeInfo:ot,remainingOffset:at}=K(nt,et[st]);nt=at,rt(ot)}else rt(et[st]);function rt(st){_e===-1?tt.unshift(st):tt.push(st)}function it(st){return _e===-1?st>=0:st<=et.length-1}return{sizeInfoArray:tt,remainingOffset:nt}}function K(j,$){if($.isSolid)return{remainingOffset:j,sizeInfo:$};let{nextSize:_e,remainingOffset:et}=_$1($.currentSize+j,$);return{sizeInfo:{...$,currentSize:_e},remainingOffset:et}}function _$1(j,{maxSize:$,minSize:_e=0}){return j<_e?{nextSize:_e,remainingOffset:j-_e}:a($)&&j>$?{nextSize:$,remainingOffset:j-$}:{nextSize:j,remainingOffset:0}}var x={barIndex:-1,offset:0,type:"deactivate",originalCoordinate:y,defaultSizeInfoArray:[],sizeInfoArray:[],discard:!0,flexGrowRatio:0};function L$1(j){let $=x,_e=new Set;return{dispatch(et){$=(()=>{let tt={barIndex:et.barIndex,type:et.type};switch(et.type){case"activate":let{sizeInfoArray:nt,flexGrowRatio:rt}=j.getSizeRelatedInfo();return{...x,...tt,originalCoordinate:et.coordinate,defaultSizeInfoArray:nt,sizeInfoArray:nt,flexGrowRatio:rt};case"move":let it=j.calculateOffset(et.coordinate,$.originalCoordinate);return{...tt,...g$1(et.barIndex,it,$.defaultSizeInfoArray),offset:it,originalCoordinate:$.originalCoordinate,defaultSizeInfoArray:$.defaultSizeInfoArray,discard:!1};case"deactivate":return x}})(),_e.forEach(tt=>tt($))},subscribe(et){return _e.add(et),()=>_e.delete(et)},unsubscribeAll(){_e.clear()}}}function u(j,$,_e){j==null||j.dispatchEvent(new CustomEvent($,{detail:_e}))}var C=class{constructor(){pn(this,"disposeFnSet",new Set);pn(this,"watchResizerEvent",(j,$,_e)=>{j==null||j.addEventListener($,_e);let et=()=>j==null?void 0:j.removeEventListener($,_e);return this.disposeFnSet.add(et),et});pn(this,"reset",()=>{this.disposeFnSet.forEach(j=>j()),this.disposeFnSet.clear()})}},b$1=class{constructor(){pn(this,"infoMap",new Map);pn(this,"items",[])}update($){this.infoMap.clear(),this.items.forEach(_e=>_e.destroy()),this.items=$,$.forEach((_e,et)=>{this.infoMap.set(_e.elm,{item:_e,index:et})})}reset(){this.update([])}getItems(){return this.items}getItem($){var _e;return((_e=this.infoMap.get($))==null?void 0:_e.item)??null}getItemIndex($){var _e;return((_e=this.infoMap.get($))==null?void 0:_e.index)??null}},R=!0;try{window.addEventListener("test",null,{get passive(){return R={passive:!1},!0}})}catch{}function v$1({size:j}){return a(j)}function w(j){let{disableResponsive:$}=j;return v$1(j)&&$===void 0?!0:!!$}function M$1(j){return!!j&&j in A$1}function T$1(j){return $=>({"data-item-type":j,"data-item-config":JSON.stringify($)})}function V(j){return Array.from(j.childNodes).map($=>{if(!($ instanceof HTMLElement))return null;let _e=$.getAttribute("data-item-type");return M$1(_e)?{type:_e,elm:$}:null}).filter($=>!!$)}function E$1({elm:j}){try{let $=JSON.parse(j.getAttribute("data-item-config")??"");return $&&typeof $=="object"?$:{}}catch{return{}}}function D(j){return j*2+1}function B(j){return j*2}var z=class{constructor(j){pn(this,"isDiscarded",!1);this.resizeResult=j}resizeSection(j,$){if(this.isDiscarded)return;let _e=B(j),et=this.getSize(_e);if(et>=0&&$.toSize>=0){let tt=$.toSize-et;_e===this.resizeResult.sizeInfoArray.length-1||$.preferMoveLeftBar?this.moveBar(j-1,{withOffset:-tt}):this.moveBar(j,{withOffset:tt})}}moveBar(j,$){this.isDiscarded||(this.resizeResult=g$1(D(j),$.withOffset,this.resizeResult.sizeInfoArray))}discard(){this.isDiscarded=!0}isSectionResized(j){let $=B(j);return"defaultSizeInfoArray"in this.resizeResult?this.getSize($)!==this.resizeResult.defaultSizeInfoArray[$].currentSize:!1}isBarActivated(j){return"barIndex"in this.resizeResult?this.resizeResult.barIndex===D(j):!1}getSectionSize(j){return this.getSize(B(j))}getResult(){return{...this.resizeResult,discard:this.isDiscarded}}getTotalSize(){return this.resizeResult.sizeInfoArray.filter((j,$)=>j&&$%2===0).reduce((j,{currentSize:$})=>j+$,0)}getSize(j){let $=this.resizeResult.sizeInfoArray[j];return $?$.currentSize:-1}},h=class{constructor(j,$,_e){pn(this,"_config");pn(this,"_observer");this.type=j,this.elm=$,this.getConfig=_e,this._config=this.getConfig(),this._observer=new MutationObserver(()=>this._config=this.getConfig()),this._observer.observe($,{attributes:!0,attributeFilter:["data-item-config"]})}get config(){return this._config}destroy(){this._observer.disconnect()}},p$1=class extends h{constructor(_e,et){super("BAR",_e.elm,()=>F(_e));pn(this,"isActive",!1);pn(this,"isValidClick",!0);this.dispatchBarAction=et;let tt=[this.attachListener(this.elm,"mousedown","activate"),this.attachListener(document,"mousemove","move"),this.attachListener(document,"mouseup","deactivate"),this.attachListener(this.elm,"touchstart","activate",R),this.attachListener(document,"touchmove","move",R),this.attachListener(document,"touchend","deactivate"),this.attachListener(document,"touchcancel","deactivate")];this.destroy=()=>{super.destroy(),tt.forEach(nt=>nt())}}static getStyle({size:_e}){return{flex:`0 0 ${_e}px`}}attachListener(_e,et,tt,nt){let rt=it=>{this.disableUserSelectIfResizing(it,tt);let{clientX:st,clientY:ot}=("touches"in it?it.touches[0]:it)||{clientX:0,clientY:0};this.triggerAction(this.elm,tt,{x:st,y:ot})};return _e.addEventListener(et,rt,nt),()=>_e.removeEventListener(et,rt,nt)}disableUserSelectIfResizing(_e,et){(this.isActive||et==="activate")&&_e.preventDefault()}triggerAction(_e,et,tt){(this.isActive||et==="activate")&&this.dispatchBarAction(_e,{type:et,coordinate:tt}),this.isActive&&this.isValidClick&&et==="deactivate"&&(this.isValidClick=!1,u(_e,"bar:click",null)),this.updateStatusIfNeed(_e,et),this.updateClickStatus(et)}updateStatusIfNeed(_e,et){let tt=nt=>{this.isActive!==nt&&(this.isActive=nt,u(_e,"bar:status-change",{isActive:nt}))};et==="activate"?tt(!0):et==="deactivate"&&tt(!1)}updateClickStatus(_e){this.isActive&&(_e==="activate"?this.isValidClick=!0:_e==="move"&&(this.isValidClick=!1))}};function F(j){let{size:$}=E$1(j);return{size:a($)?$:10}}var f=class extends h{constructor($){super("SECTION",$.elm,()=>G($));pn(this,"sizeInfo",null);pn(this,"flexGrowRatio",0);this.updateStyle()}static getStyle({maxSize:$,minSize:_e},et){let tt=nt=>a(nt)?`${nt}px`:void 0;return{overflow:"hidden",[et?"maxHeight":"maxWidth"]:tt($),[et?"minHeight":"minWidth"]:tt(_e)}}update({sizeInfo:$,flexGrowRatio:_e}){this.sizeInfo=$,this.flexGrowRatio=_e,this.updateStyle(),u(this.elm,"section:size-change",{size:$.currentSize})}updateStyle(){let{flexGrow:$,flexShrink:_e,flexBasis:et}=this.getStyle();this.elm.style.flexGrow=`${$}`,this.elm.style.flexShrink=`${_e}`,this.elm.style.flexBasis=`${et}px`}getStyle(){let $=a(this.config.size)?0:this.config.disableResponsive?1:0;if(this.sizeInfo){let{disableResponsive:_e,currentSize:et}=this.sizeInfo;return{flexShrink:$,flexGrow:_e?0:this.flexGrowRatio*et,flexBasis:_e?et:0}}else{let _e=this.config.size||this.config.defaultSize;return a(_e)?{flexShrink:$,flexGrow:0,flexBasis:_e}:{flexShrink:$,flexGrow:1,flexBasis:0}}}};function G(j){let{size:$,defaultSize:_e,maxSize:et,minSize:tt,disableResponsive:nt}=E$1(j);return{size:a($)?$:void 0,defaultSize:a(_e)?_e:void 0,maxSize:a(et)?et:void 0,minSize:a(tt)?tt:void 0,disableResponsive:!!nt}}var k=class{constructor(j){pn(this,"styles",{container:j=>({...j,display:"flex",flexDirection:this.direction}),section:(j,$)=>({...$,...f.getStyle(j,this.config.vertical)}),bar:(j,$)=>({...$,...p$1.getStyle(j)})});pn(this,"attributes",{bar:T$1("BAR"),section:T$1("SECTION")});pn(this,"itemsCache",new b$1);pn(this,"eventHub",new C);pn(this,"container",null);pn(this,"barStore");pn(this,"dispatchBarAction",(j,$)=>{let _e=this.itemsCache.getItemIndex(j);_e&&this.barStore.dispatch({...$,barIndex:_e})});this.config=j,this.barStore=L$1({calculateOffset:($,_e)=>O($,_e)[this.axis],getSizeRelatedInfo:()=>this.makeSizeInfos()})}get axis(){return this.config.vertical?"y":"x"}get dimension(){return this.config.vertical?"height":"width"}get direction(){return this.config.vertical?"column":"row"}get on(){return this.eventHub.watchResizerEvent}init(j){this.dispose(),this.container=j,j&&(this.itemsCache.update(V(j).map($=>{switch($.type){case"BAR":return new p$1($,this.dispatchBarAction);case"SECTION":return new f($)}})),this.initStyles(j,this.itemsCache.getItems()),this.sizeRelatedInfoChange(this.makeSizeInfos()),this.barStore.subscribe($=>{this.monitorBarStatusChanges($),this.sizeRelatedInfoChange($)}))}dispose(){this.container=null,this.itemsCache.reset(),this.barStore.unsubscribeAll(),this.eventHub.reset()}getResizer(){return new z(this.makeSizeInfos())}applyResizer(j){this.sizeRelatedInfoChange(j.getResult())}sizeRelatedInfoChange(j){j.discard||(j=(()=>{if(typeof this.config.beforeApplyResizer=="function"){let $=new z(j);return this.config.beforeApplyResizer($),$.getResult()}else return j})(),!j.discard&&j.sizeInfoArray.forEach($=>{let _e=this.itemsCache.getItem($.elm);_e instanceof f&&_e.update({sizeInfo:$,flexGrowRatio:j.flexGrowRatio})}))}monitorBarStatusChanges({type:j}){switch(j){case"activate":return u(this.container,"column:activate",null);case"deactivate":return u(this.container,"column:after-resizing",null);default:return}}makeSizeInfos(){let{collect:j,getResult:$}=S();return this.itemsCache.getItems().forEach(_e=>{_e instanceof p$1&&j({elm:_e.elm,disableResponsive:!0,isSolid:!0,currentSize:_e.elm.getBoundingClientRect()[this.dimension]}),_e instanceof f&&j({elm:_e.elm,maxSize:_e.config.maxSize,minSize:_e.config.minSize,disableResponsive:w(_e.config),isSolid:v$1(_e.config),currentSize:_e.elm.getBoundingClientRect()[this.dimension]})}),$()}initStyles(j,$){Object.assign(j.style,this.styles.container()),$.forEach(_e=>{_e instanceof p$1&&Object.assign(_e.elm.style,this.styles.bar(_e.config)),_e instanceof f&&Object.assign(_e.elm.style,this.styles.section(_e.config))})}},E=reactExports.createContext(null),b=typeof window=="object"?React.useLayoutEffect:React.useEffect;function T({vertical:j,beforeApplyResizer:$}){let _e=g($);return React.useMemo(()=>new k({vertical:j,beforeApplyResizer:_e}),[j,_e])}function v(){return React.useContext(E)}function c(j,$,_e){let et=v(),tt=g(_e);React.useEffect(()=>et.on(j.current,$,nt=>tt(nt)),[et,$,j,tt])}function p(j,$){let _e=React.useRef(j);return React.useImperativeHandle($,()=>_e.current),_e}function g(j){let $=React.useRef(j);return $.current=j,React.useCallback((..._e)=>{var et;return(et=$.current)==null?void 0:et.call($,..._e)},[$])}function M({hooks:j,params:$,children:_e}){let et=j(...$);return React.createElement(React.Fragment,null,_e(et))}function A(j,{onActivate:$,afterResizing:_e}){c(j,"column:activate",$),c(j,"column:after-resizing",_e)}var X=reactExports.forwardRef(({vertical:j=!1,onActivate:$,beforeApplyResizer:_e,afterResizing:et,columnResizerRef:tt,style:nt,...rt},it)=>{let st=p(null,it),ot=T({vertical:j,beforeApplyResizer:_e});return b(()=>(ot.init(st.current),()=>ot.dispose()),[ot]),reactExports.useImperativeHandle(tt,()=>ot,[ot]),reactExports.createElement(E.Provider,{value:ot},reactExports.createElement(M,{hooks:A,params:[st,{onActivate:$,afterResizing:et}]},()=>reactExports.createElement("div",{ref:st,...rt,style:ot.styles.container(nt)})))}),_=reactExports.forwardRef(({defaultSize:j,size:$,disableResponsive:_e,minSize:et,maxSize:tt,onSizeChanged:nt,style:rt,...it},st)=>{let ot=p(null,st),at=v(),lt={defaultSize:j,size:$,disableResponsive:_e,minSize:et,maxSize:tt};return c(ot,"section:size-change",ut=>nt==null?void 0:nt(ut.detail.size)),reactExports.createElement("div",{ref:ot,...it,style:at.styles.section(lt,rt),...at.attributes.section(lt)})}),L=reactExports.forwardRef(({top:j=0,right:$=0,bottom:_e=0,left:et=0,vertical:tt,style:nt,...rt},it)=>{let st=reactExports.useMemo(()=>({position:"absolute",top:-j,left:-et,right:-$,bottom:-_e,WebkitTapHighlightColor:"transparent",userSelect:"none",...nt}),[nt,j,et,$,_e,tt]);return reactExports.createElement("div",{...rt,style:st,ref:it})}),ne=reactExports.forwardRef(({children:j,onClick:$,expandInteractiveArea:_e,onStatusChanged:et,style:tt,size:nt=10,...rt},it)=>{let st=v(),ot=p(null,it),at={size:nt};return c(ot,"bar:click",()=>$==null?void 0:$()),c(ot,"bar:status-change",lt=>et==null?void 0:et(lt.detail.isActive)),reactExports.createElement("div",{ref:ot,...rt,style:st.styles.bar(at,{...tt,position:"relative"}),...st.attributes.bar(at)},j,reactExports.createElement(L,{..._e,vertical:st.config.vertical}))});let GrammarLocation$4=class{constructor($,_e){this.source=$,this.start=_e}toString(){return String(this.source)}offset($){return{line:$.line+this.start.line-1,column:$.line===1?$.column+this.start.column-1:$.column,offset:$.offset+this.start.offset}}static offsetStart($){return $.source&&typeof $.source.offset=="function"?$.source.offset($.start):$.start}static offsetEnd($){return $.source&&typeof $.source.offset=="function"?$.source.offset($.end):$.end}};var grammarLocation=GrammarLocation$4;const GrammarLocation$3=grammarLocation,setProtoOf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,$){j.__proto__=$}||function(j,$){for(const _e in $)Object.prototype.hasOwnProperty.call($,_e)&&(j[_e]=$[_e])};let GrammarError$3=class rs extends Error{constructor($,_e,et){super($),setProtoOf(this,rs.prototype),this.name="GrammarError",this.location=_e,et===void 0&&(et=[]),this.diagnostics=et,this.stage=null,this.problems=[["error",$,_e,et]]}toString(){let $=super.toString();this.location&&($+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&($+=`${this.location.source}:`),$+=`${this.location.start.line}:${this.location.start.column}`);for(const _e of this.diagnostics)$+=`
 from `,_e.location.source!==void 0&&_e.location.source!==null&&($+=`${_e.location.source}:`),$+=`${_e.location.start.line}:${_e.location.start.column}: ${_e.message}`;return $}format($){const _e=$.map(({source:nt,text:rt})=>({source:nt,text:rt!=null?String(rt).split(/\r\n|\n|\r/g):[]}));function et(nt,rt,it=""){let st="";const ot=_e.find(({source:ut})=>ut===nt.source),at=nt.start,lt=GrammarLocation$3.offsetStart(nt);if(ot){const ut=nt.end,ct=ot.text[at.line-1],dt=(at.line===ut.line?ut.column:ct.length+1)-at.column||1;it&&(st+=`
note: ${it}`),st+=`
 --> ${nt.source}:${lt.line}:${lt.column}
${"".padEnd(rt)} |
${lt.line.toString().padStart(rt)} | ${ct}
${"".padEnd(rt)} | ${"".padEnd(at.column-1)}${"".padEnd(dt,"^")}`}else st+=`
 at ${nt.source}:${lt.line}:${lt.column}`,it&&(st+=`: ${it}`);return st}function tt(nt,rt,it,st=[]){let ot=-1/0;it?ot=st.reduce((lt,{location:ut})=>Math.max(lt,GrammarLocation$3.offsetStart(ut).line),it.start.line):ot=Math.max.apply(null,st.map(lt=>lt.location.start.line)),ot=ot.toString().length;let at=`${nt}: ${rt}`;it&&(at+=et(it,ot));for(const lt of st)at+=et(lt.location,ot,lt.message);return at}return this.problems.filter(nt=>nt[0]!=="info").map(nt=>tt(...nt)).join(`

`)}};var grammarError=GrammarError$3;const visitor$b={build(j){function $(rt,...it){return j[rt.type](rt,...it)}function _e(){}function et(rt,...it){return $(rt.expression,...it)}function tt(rt){return function(it,...st){it[rt].forEach(ot=>$(ot,...st))}}const nt={grammar(rt,...it){rt.topLevelInitializer&&$(rt.topLevelInitializer,...it),rt.initializer&&$(rt.initializer,...it),rt.rules.forEach(st=>$(st,...it))},top_level_initializer:_e,initializer:_e,rule:et,named:et,choice:tt("alternatives"),action:et,sequence:tt("elements"),labeled:et,text:et,simple_and:et,simple_not:et,optional:et,zero_or_more:et,one_or_more:et,repeated(rt,...it){return rt.delimiter&&$(rt.delimiter,...it),$(rt.expression,...it)},group:et,semantic_and:_e,semantic_not:_e,rule_ref:_e,literal:_e,class:_e,any:_e};return Object.keys(nt).forEach(rt=>{Object.prototype.hasOwnProperty.call(j,rt)||(j[rt]=nt[rt])}),$}};var visitor_1=visitor$b;const visitor$a=visitor_1,asts$7={findRule(j,$){for(let _e=0;_e<j.rules.length;_e++)if(j.rules[_e].name===$)return j.rules[_e]},indexOfRule(j,$){for(let _e=0;_e<j.rules.length;_e++)if(j.rules[_e].name===$)return _e;return-1},alwaysConsumesOnSuccess(j,$){function _e(){return!0}function et(){return!1}const tt=visitor$a.build({choice(nt){return nt.alternatives.every(tt)},sequence(nt){return nt.elements.some(tt)},simple_and:et,simple_not:et,optional:et,zero_or_more:et,repeated(nt){const rt=nt.min?nt.min:nt.max;return rt.type!=="constant"||rt.value===0?!1:!!(tt(nt.expression)||rt.value>1&&nt.delimiter&&tt(nt.delimiter))},semantic_and:et,semantic_not:et,rule_ref(nt){const rt=asts$7.findRule(j,nt.name);return rt?tt(rt):void 0},literal(nt){return nt.value!==""},class:_e,any:_e});return tt($)}};var asts_1=asts$7;const opcodes={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};var opcodes_1=opcodes;const visitor$9=visitor_1,asts$6=asts_1,GrammarError$2=grammarError,ALWAYS_MATCH$1=1,SOMETIMES_MATCH$1=0,NEVER_MATCH$1=-1;function inferenceMatchResult$1(j){function $(rt){return rt.match=SOMETIMES_MATCH$1}function _e(rt){return nt(rt.expression),rt.match=ALWAYS_MATCH$1}function et(rt){return rt.match=nt(rt.expression)}function tt(rt,it){const st=rt.length;let ot=0,at=0;for(let lt=0;lt<st;++lt){const ut=nt(rt[lt]);ut===ALWAYS_MATCH$1&&++ot,ut===NEVER_MATCH$1&&++at}return ot===st?ALWAYS_MATCH$1:it?at===st?NEVER_MATCH$1:SOMETIMES_MATCH$1:at>0?NEVER_MATCH$1:SOMETIMES_MATCH$1}const nt=visitor$9.build({rule(rt){let it,st=0;if(typeof rt.match>"u"){rt.match=SOMETIMES_MATCH$1;do if(it=rt.match,rt.match=nt(rt.expression),++st>6)throw new GrammarError$2("Infinity cycle detected when trying to evaluate node match result",rt.location);while(it!==rt.match)}return rt.match},named:et,choice(rt){return rt.match=tt(rt.alternatives,!0)},action:et,sequence(rt){return rt.match=tt(rt.elements,!1)},labeled:et,text:et,simple_and:et,simple_not(rt){return rt.match=-nt(rt.expression)},optional:_e,zero_or_more:_e,one_or_more:et,repeated(rt){const it=nt(rt.expression),st=rt.delimiter?nt(rt.delimiter):NEVER_MATCH$1,ot=rt.min?rt.min:rt.max;return ot.type!=="constant"||rt.max.type!=="constant"?rt.match=SOMETIMES_MATCH$1:rt.max.value===0||rt.max.value!==null&&ot.value>rt.max.value?rt.match=NEVER_MATCH$1:it===NEVER_MATCH$1?rt.match=ot.value===0?ALWAYS_MATCH$1:NEVER_MATCH$1:it===ALWAYS_MATCH$1?rt.delimiter&&ot.value>=2?rt.match=st:rt.match=ALWAYS_MATCH$1:rt.delimiter&&ot.value>=2?rt.match=st===NEVER_MATCH$1?NEVER_MATCH$1:SOMETIMES_MATCH$1:rt.match=ot.value===0?ALWAYS_MATCH$1:SOMETIMES_MATCH$1},group:et,semantic_and:$,semantic_not:$,rule_ref(rt){const it=asts$6.findRule(j,rt.name);return rt.match=nt(it)},literal(rt){const it=rt.value.length===0?ALWAYS_MATCH$1:SOMETIMES_MATCH$1;return rt.match=it},class(rt){const it=rt.parts.length===0?NEVER_MATCH$1:SOMETIMES_MATCH$1;return rt.match=it},any:$});nt(j)}inferenceMatchResult$1.ALWAYS_MATCH=ALWAYS_MATCH$1;inferenceMatchResult$1.SOMETIMES_MATCH=SOMETIMES_MATCH$1;inferenceMatchResult$1.NEVER_MATCH=NEVER_MATCH$1;var inferenceMatchResult_1=inferenceMatchResult$1;const asts$5=asts_1,op$1=opcodes_1,visitor$8=visitor_1,{ALWAYS_MATCH,SOMETIMES_MATCH,NEVER_MATCH}=inferenceMatchResult_1;function generateBytecode$1(j,$){const _e=[],et=[],tt=[],nt=[],rt=[];function it(St){const kt=_e.indexOf(St);return kt===-1?_e.push(St)-1:kt}function st(St){const kt={value:St.parts,inverted:St.inverted,ignoreCase:St.ignoreCase},Pt=JSON.stringify(kt),Mt=et.findIndex(Lt=>JSON.stringify(Lt)===Pt);return Mt===-1?et.push(kt)-1:Mt}function ot(St){const kt=JSON.stringify(St),Pt=tt.findIndex(Mt=>JSON.stringify(Mt)===kt);return Pt===-1?tt.push(St)-1:Pt}function at(St,kt,Pt){const Mt={predicate:St,params:kt,body:Pt.code,location:Pt.codeLocation},Lt=JSON.stringify(Mt),zt=nt.findIndex(Kt=>JSON.stringify(Kt)===Lt);return zt===-1?nt.push(Mt)-1:zt}function lt(St){return rt.push(St)-1}function ut(St){const kt={};return Object.keys(St).forEach(Pt=>{kt[Pt]=St[Pt]}),kt}function ct(St,...kt){return St.concat(...kt)}function ft(St,kt,Pt,Mt){return St===ALWAYS_MATCH?Pt:St===NEVER_MATCH?Mt:kt.concat([Pt.length,Mt.length],Pt,Mt)}function dt(St,kt){return St.concat([kt.length],kt)}function mt(St,kt,Pt,Mt){const Lt=Object.keys(Pt).map(zt=>Mt-Pt[zt]);return[op$1.CALL,St,kt,Lt.length].concat(Lt)}function pt(St,kt,Pt){const Mt=St.match|0;return ct([op$1.PUSH_CURR_POS],[op$1.SILENT_FAILS_ON],Rt(St,{sp:Pt.sp+1,env:ut(Pt.env),action:null}),[op$1.SILENT_FAILS_OFF],ft(kt?-Mt:Mt,[kt?op$1.IF_ERROR:op$1.IF_NOT_ERROR],ct([op$1.POP],[kt?op$1.POP:op$1.POP_CURR_POS],[op$1.PUSH_UNDEFINED]),ct([op$1.POP],[kt?op$1.POP_CURR_POS:op$1.POP],[op$1.PUSH_FAILED])))}function yt(St,kt,Pt){const Mt=at(!0,Object.keys(Pt.env),St);return ct([op$1.UPDATE_SAVED_POS],mt(Mt,0,Pt.env,Pt.sp),ft(St.match|0,[op$1.IF],ct([op$1.POP],kt?[op$1.PUSH_FAILED]:[op$1.PUSH_UNDEFINED]),ct([op$1.POP],kt?[op$1.PUSH_UNDEFINED]:[op$1.PUSH_FAILED])))}function vt(St){return dt([op$1.WHILE_NOT_ERROR],ct([op$1.APPEND],St))}function Ct(St,kt,Pt,Mt){switch(St.type){case"constant":return{pre:[],post:[],sp:Pt};case"variable":return St.sp=Mt+Pt-kt[St.value],{pre:[],post:[],sp:Pt};case"function":{St.sp=Mt;const Lt=at(!0,Object.keys(kt),{code:St.value,codeLocation:St.codeLocation});return{pre:mt(Lt,0,kt,Pt),post:[op$1.NIP],sp:Pt+1}}default:throw new Error(`Unknown boundary type "${St.type}" for the "repeated" node`)}}function At(St,kt){if(kt.value!==null){const Pt=kt.type==="constant"?[op$1.IF_GE,kt.value]:[op$1.IF_GE_DYNAMIC,kt.sp];return ft(SOMETIMES_MATCH,Pt,[op$1.PUSH_FAILED],St)}return St}function $t(St,kt){const Pt=kt.type==="constant"?[op$1.IF_LT,kt.value]:[op$1.IF_LT_DYNAMIC,kt.sp];return ct(St,ft(SOMETIMES_MATCH,Pt,[op$1.POP,op$1.POP_CURR_POS,op$1.PUSH_FAILED],[op$1.NIP]))}function bt(St,kt,Pt,Mt,Lt){return St?ct([op$1.PUSH_CURR_POS],Rt(St,{sp:Mt.sp+Lt+1,env:ut(Mt.env),action:null}),ft(St.match|0,[op$1.IF_NOT_ERROR],ct([op$1.POP],Pt,ft(-kt,[op$1.IF_ERROR],[op$1.POP,op$1.POP_CURR_POS,op$1.PUSH_FAILED],[op$1.NIP])),[op$1.NIP])):Pt}function Bt(St){return $&&$.output==="source-and-map"&&Object.entries(St).forEach(([kt,Pt])=>{St[kt]=function(Mt,...Lt){const zt=Pt(Mt,...Lt);return zt===void 0||!Mt.location?zt:ct([op$1.SOURCE_MAP_PUSH,lt(Mt.location)],zt,[op$1.SOURCE_MAP_POP])}}),visitor$8.build(St)}const Rt=Bt({grammar(St){St.rules.forEach(Rt),St.literals=_e,St.classes=et,St.expectations=tt,St.functions=nt,St.locations=rt},rule(St){St.bytecode=Rt(St.expression,{sp:-1,env:{},pluck:[],action:null})},named(St,kt){const Pt=St.match|0,Mt=Pt===NEVER_MATCH?null:ot({type:"rule",value:St.name});return ct([op$1.SILENT_FAILS_ON],Rt(St.expression,kt),[op$1.SILENT_FAILS_OFF],ft(Pt,[op$1.IF_ERROR],[op$1.FAIL,Mt],[]))},choice(St,kt){function Pt(Mt,Lt){const zt=Mt[0].match|0,Kt=Rt(Mt[0],{sp:Lt.sp,env:ut(Lt.env),action:null});return zt===ALWAYS_MATCH?Kt:ct(Kt,Mt.length>1?ft(SOMETIMES_MATCH,[op$1.IF_ERROR],ct([op$1.POP],Pt(Mt.slice(1),Lt)),[]):[])}return Pt(St.alternatives,kt)},action(St,kt){const Pt=ut(kt.env),Mt=St.expression.type!=="sequence"||St.expression.elements.length===0,Lt=Rt(St.expression,{sp:kt.sp+(Mt?1:0),env:Pt,action:St}),zt=St.expression.match|0,Kt=Mt&&zt!==NEVER_MATCH?at(!1,Object.keys(Pt),St):null;return Mt?ct([op$1.PUSH_CURR_POS],Lt,ft(zt,[op$1.IF_NOT_ERROR],ct([op$1.LOAD_SAVED_POS,1],mt(Kt,1,Pt,kt.sp+2)),[]),[op$1.NIP]):Lt},sequence(St,kt){function Pt(Mt,Lt){if(Mt.length>0){const zt=St.elements.length-Mt.length+1;return ct(Rt(Mt[0],{sp:Lt.sp,env:Lt.env,pluck:Lt.pluck,action:null}),ft(Mt[0].match|0,[op$1.IF_NOT_ERROR],Pt(Mt.slice(1),{sp:Lt.sp+1,env:Lt.env,pluck:Lt.pluck,action:Lt.action}),ct(zt>1?[op$1.POP_N,zt]:[op$1.POP],[op$1.POP_CURR_POS],[op$1.PUSH_FAILED])))}else{if(Lt.pluck.length>0)return ct([op$1.PLUCK,St.elements.length+1,Lt.pluck.length],Lt.pluck.map(zt=>Lt.sp-zt));if(Lt.action){const zt=at(!1,Object.keys(Lt.env),Lt.action);return ct([op$1.LOAD_SAVED_POS,St.elements.length],mt(zt,St.elements.length+1,Lt.env,Lt.sp))}else return ct([op$1.WRAP,St.elements.length],[op$1.NIP])}}return ct([op$1.PUSH_CURR_POS],Pt(St.elements,{sp:kt.sp+1,env:kt.env,pluck:[],action:kt.action}))},labeled(St,kt){let Pt=kt.env;const Mt=St.label,Lt=kt.sp+1;Mt&&(Pt=ut(kt.env),kt.env[St.label]=Lt),St.pick&&kt.pluck.push(Lt);const zt=Rt(St.expression,{sp:kt.sp,env:Pt,action:null});return Mt&&St.labelLocation&&$&&$.output==="source-and-map"?ct([op$1.SOURCE_MAP_LABEL_PUSH,Lt,it(Mt),lt(St.labelLocation)],zt,[op$1.SOURCE_MAP_LABEL_POP,Lt]):zt},text(St,kt){return ct([op$1.PUSH_CURR_POS],Rt(St.expression,{sp:kt.sp+1,env:ut(kt.env),action:null}),ft(St.match|0,[op$1.IF_NOT_ERROR],ct([op$1.POP],[op$1.TEXT]),[op$1.NIP]))},simple_and(St,kt){return pt(St.expression,!1,kt)},simple_not(St,kt){return pt(St.expression,!0,kt)},optional(St,kt){return ct(Rt(St.expression,{sp:kt.sp,env:ut(kt.env),action:null}),ft(-(St.expression.match|0),[op$1.IF_ERROR],ct([op$1.POP],[op$1.PUSH_NULL]),[]))},zero_or_more(St,kt){const Pt=Rt(St.expression,{sp:kt.sp+1,env:ut(kt.env),action:null});return ct([op$1.PUSH_EMPTY_ARRAY],Pt,vt(Pt),[op$1.POP])},one_or_more(St,kt){const Pt=Rt(St.expression,{sp:kt.sp+1,env:ut(kt.env),action:null});return ct([op$1.PUSH_EMPTY_ARRAY],Pt,ft(St.expression.match|0,[op$1.IF_NOT_ERROR],ct(vt(Pt),[op$1.POP]),ct([op$1.POP],[op$1.POP],[op$1.PUSH_FAILED])))},repeated(St,kt){const Pt=St.min?St.min:St.max,Mt=Pt.type!=="constant"||Pt.value>0,Lt=St.max.type!=="constant"&&St.max.value!==null,zt=Mt?2:1,Kt=St.min?Ct(St.min,kt.env,kt.sp,2+(St.max.type==="function"?1:0)):{pre:[],post:[],sp:kt.sp},Ut=Ct(St.max,kt.env,Kt.sp,zt),It=Rt(St.expression,{sp:Ut.sp+zt,env:ut(kt.env),action:null}),Vt=St.delimiter!==null?Rt(St.expression,{sp:Ut.sp+zt+1,env:ut(kt.env),action:null}):It,jt=bt(St.delimiter,St.expression.match|0,Vt,kt,zt),Yt=At(jt,St.max),Xt=Lt?At(It,St.max):It,sn=ct(Mt?[op$1.PUSH_CURR_POS]:[],[op$1.PUSH_EMPTY_ARRAY],Xt,vt(Yt),[op$1.POP]);return ct(Kt.pre,Ut.pre,Mt?$t(sn,Pt):sn,Ut.post,Kt.post)},group(St,kt){return Rt(St.expression,{sp:kt.sp,env:ut(kt.env),action:null})},semantic_and(St,kt){return yt(St,!1,kt)},semantic_not(St,kt){return yt(St,!0,kt)},rule_ref(St){return[op$1.RULE,asts$5.indexOfRule(j,St.name)]},literal(St){if(St.value.length>0){const kt=St.match|0,Mt=kt===SOMETIMES_MATCH||kt===ALWAYS_MATCH&&!St.ignoreCase?it(St.ignoreCase?St.value.toLowerCase():St.value):null,Lt=kt!==ALWAYS_MATCH?ot({type:"literal",value:St.value,ignoreCase:St.ignoreCase}):null;return ft(kt,St.ignoreCase?[op$1.MATCH_STRING_IC,Mt]:[op$1.MATCH_STRING,Mt],St.ignoreCase?[op$1.ACCEPT_N,St.value.length]:[op$1.ACCEPT_STRING,Mt],[op$1.FAIL,Lt])}return[op$1.PUSH_EMPTY_STRING]},class(St){const kt=St.match|0,Pt=kt===SOMETIMES_MATCH?st(St):null,Mt=kt!==ALWAYS_MATCH?ot({type:"class",value:St.parts,inverted:St.inverted,ignoreCase:St.ignoreCase}):null;return ft(kt,[op$1.MATCH_CHAR_CLASS,Pt],[op$1.ACCEPT_N,1],[op$1.FAIL,Mt])},any(St){const kt=St.match|0,Pt=kt!==ALWAYS_MATCH?ot({type:"any"}):null;return ft(kt,[op$1.MATCH_ANY],[op$1.ACCEPT_N,1],[op$1.FAIL,Pt])}});Rt(j)}var generateBytecode_1=generateBytecode$1,sourceMap={},sourceMapGenerator={},base64Vlq={},base64$3={};const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");base64$3.encode=function(j){if(0<=j&&j<intToCharMap.length)return intToCharMap[j];throw new TypeError("Must be between 0 and 63: "+j)};const base64$2=base64$3,VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(j){return j<0?(-j<<1)+1:(j<<1)+0}base64Vlq.encode=function($){let _e="",et,tt=toVLQSigned($);do et=tt&VLQ_BASE_MASK,tt>>>=VLQ_BASE_SHIFT,tt>0&&(et|=VLQ_CONTINUATION_BIT),_e+=base64$2.encode(et);while(tt>0);return _e};var util$3={};function getArg(j,$,_e){if($ in j)return j[$];if(arguments.length===3)return _e;throw new Error('"'+$+'" is a required argument.')}util$3.getArg=getArg;const supportsNullProto=function(){return!("__proto__"in Object.create(null))}();function identity(j){return j}function toSetString(j){return isProtoString(j)?"$"+j:j}util$3.toSetString=supportsNullProto?identity:toSetString;function fromSetString(j){return isProtoString(j)?j.slice(1):j}util$3.fromSetString=supportsNullProto?identity:fromSetString;function isProtoString(j){if(!j)return!1;const $=j.length;if($<9||j.charCodeAt($-1)!==95||j.charCodeAt($-2)!==95||j.charCodeAt($-3)!==111||j.charCodeAt($-4)!==116||j.charCodeAt($-5)!==111||j.charCodeAt($-6)!==114||j.charCodeAt($-7)!==112||j.charCodeAt($-8)!==95||j.charCodeAt($-9)!==95)return!1;for(let _e=$-10;_e>=0;_e--)if(j.charCodeAt(_e)!==36)return!1;return!0}function strcmp(j,$){return j===$?0:j===null?1:$===null?-1:j>$?1:-1}function compareByGeneratedPositionsInflated(j,$){let _e=j.generatedLine-$.generatedLine;return _e!==0||(_e=j.generatedColumn-$.generatedColumn,_e!==0)||(_e=strcmp(j.source,$.source),_e!==0)||(_e=j.originalLine-$.originalLine,_e!==0)||(_e=j.originalColumn-$.originalColumn,_e!==0)?_e:strcmp(j.name,$.name)}util$3.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated;const PROTOCOL="http:",PROTOCOL_AND_HOST=`${PROTOCOL}//host`;function createSafeHandler(j){return $=>{const _e=getURLType($),et=buildSafeBase($),tt=new URL($,et);j(tt);const nt=tt.toString();return _e==="absolute"?nt:_e==="scheme-relative"?nt.slice(PROTOCOL.length):_e==="path-absolute"?nt.slice(PROTOCOL_AND_HOST.length):computeRelativeURL(et,nt)}}function withBase(j,$){return new URL(j,$).toString()}function buildUniqueSegment(j,$){let _e=0;do{const et=j+_e++;if($.indexOf(et)===-1)return et}while(!0)}function buildSafeBase(j){const $=j.split("..").length-1,_e=buildUniqueSegment("p",j);let et=`${PROTOCOL_AND_HOST}/`;for(let tt=0;tt<$;tt++)et+=`${_e}/`;return et}const ABSOLUTE_SCHEME=/^[A-Za-z0-9\+\-\.]+:/;function getURLType(j){return j[0]==="/"?j[1]==="/"?"scheme-relative":"path-absolute":ABSOLUTE_SCHEME.test(j)?"absolute":"path-relative"}function computeRelativeURL(j,$){typeof j=="string"&&(j=new URL(j)),typeof $=="string"&&($=new URL($));const _e=$.pathname.split("/"),et=j.pathname.split("/");for(et.length>0&&!et[et.length-1]&&et.pop();_e.length>0&&et.length>0&&_e[0]===et[0];)_e.shift(),et.shift();return et.map(()=>"..").concat(_e).join("/")+$.search+$.hash}const ensureDirectory=createSafeHandler(j=>{j.pathname=j.pathname.replace(/\/?$/,"/")}),normalize=createSafeHandler(j=>{});util$3.normalize=normalize;function join(j,$){const _e=getURLType($),et=getURLType(j);if(j=ensureDirectory(j),_e==="absolute")return withBase($,void 0);if(et==="absolute")return withBase($,j);if(_e==="scheme-relative")return normalize($);if(et==="scheme-relative")return withBase($,withBase(j,PROTOCOL_AND_HOST)).slice(PROTOCOL.length);if(_e==="path-absolute")return normalize($);if(et==="path-absolute")return withBase($,withBase(j,PROTOCOL_AND_HOST)).slice(PROTOCOL_AND_HOST.length);const tt=buildSafeBase($+j),nt=withBase($,withBase(j,tt));return computeRelativeURL(tt,nt)}util$3.join=join;function relative(j,$){const _e=relativeIfPossible(j,$);return typeof _e=="string"?_e:normalize($)}util$3.relative=relative;function relativeIfPossible(j,$){if(getURLType(j)!==getURLType($))return null;const et=buildSafeBase(j+$),tt=new URL(j,et),nt=new URL($,et);try{new URL("",nt.toString())}catch{return null}return nt.protocol!==tt.protocol||nt.user!==tt.user||nt.password!==tt.password||nt.hostname!==tt.hostname||nt.port!==tt.port?null:computeRelativeURL(tt,nt)}var arraySet={};let ArraySet$1=class ss{constructor(){this._array=[],this._set=new Map}static fromArray($,_e){const et=new ss;for(let tt=0,nt=$.length;tt<nt;tt++)et.add($[tt],_e);return et}size(){return this._set.size}add($,_e){const et=this.has($),tt=this._array.length;(!et||_e)&&this._array.push($),et||this._set.set($,tt)}has($){return this._set.has($)}indexOf($){const _e=this._set.get($);if(_e>=0)return _e;throw new Error('"'+$+'" is not in the set.')}at($){if($>=0&&$<this._array.length)return this._array[$];throw new Error("No element indexed by "+$)}toArray(){return this._array.slice()}};arraySet.ArraySet=ArraySet$1;var mappingList={};const util$2=util$3;function generatedPositionAfter(j,$){const _e=j.generatedLine,et=$.generatedLine,tt=j.generatedColumn,nt=$.generatedColumn;return et>_e||et==_e&&nt>=tt||util$2.compareByGeneratedPositionsInflated(j,$)<=0}let MappingList$1=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach($,_e){this._array.forEach($,_e)}add($){generatedPositionAfter(this._last,$)?(this._last=$,this._array.push($)):(this._sorted=!1,this._array.push($))}toArray(){return this._sorted||(this._array.sort(util$2.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};mappingList.MappingList=MappingList$1;const base64VLQ=base64Vlq,util$1=util$3,ArraySet=arraySet.ArraySet,MappingList=mappingList.MappingList;let SourceMapGenerator$1=class os{constructor($){$||($={}),this._file=util$1.getArg($,"file",null),this._sourceRoot=util$1.getArg($,"sourceRoot",null),this._skipValidation=util$1.getArg($,"skipValidation",!1),this._sources=new ArraySet,this._names=new ArraySet,this._mappings=new MappingList,this._sourcesContents=null}static fromSourceMap($){const _e=$.sourceRoot,et=new os({file:$.file,sourceRoot:_e});return $.eachMapping(function(tt){const nt={generated:{line:tt.generatedLine,column:tt.generatedColumn}};tt.source!=null&&(nt.source=tt.source,_e!=null&&(nt.source=util$1.relative(_e,nt.source)),nt.original={line:tt.originalLine,column:tt.originalColumn},tt.name!=null&&(nt.name=tt.name)),et.addMapping(nt)}),$.sources.forEach(function(tt){let nt=tt;_e!=null&&(nt=util$1.relative(_e,tt)),et._sources.has(nt)||et._sources.add(nt);const rt=$.sourceContentFor(tt);rt!=null&&et.setSourceContent(tt,rt)}),et}addMapping($){const _e=util$1.getArg($,"generated"),et=util$1.getArg($,"original",null);let tt=util$1.getArg($,"source",null),nt=util$1.getArg($,"name",null);this._skipValidation||this._validateMapping(_e,et,tt,nt),tt!=null&&(tt=String(tt),this._sources.has(tt)||this._sources.add(tt)),nt!=null&&(nt=String(nt),this._names.has(nt)||this._names.add(nt)),this._mappings.add({generatedLine:_e.line,generatedColumn:_e.column,originalLine:et&&et.line,originalColumn:et&&et.column,source:tt,name:nt})}setSourceContent($,_e){let et=$;this._sourceRoot!=null&&(et=util$1.relative(this._sourceRoot,et)),_e!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util$1.toSetString(et)]=_e):this._sourcesContents&&(delete this._sourcesContents[util$1.toSetString(et)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap($,_e,et){let tt=_e;if(_e==null){if($.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);tt=$.file}const nt=this._sourceRoot;nt!=null&&(tt=util$1.relative(nt,tt));const rt=this._mappings.toArray().length>0?new ArraySet:this._sources,it=new ArraySet;this._mappings.unsortedForEach(function(st){if(st.source===tt&&st.originalLine!=null){const lt=$.originalPositionFor({line:st.originalLine,column:st.originalColumn});lt.source!=null&&(st.source=lt.source,et!=null&&(st.source=util$1.join(et,st.source)),nt!=null&&(st.source=util$1.relative(nt,st.source)),st.originalLine=lt.line,st.originalColumn=lt.column,lt.name!=null&&(st.name=lt.name))}const ot=st.source;ot!=null&&!rt.has(ot)&&rt.add(ot);const at=st.name;at!=null&&!it.has(at)&&it.add(at)},this),this._sources=rt,this._names=it,$.sources.forEach(function(st){const ot=$.sourceContentFor(st);ot!=null&&(et!=null&&(st=util$1.join(et,st)),nt!=null&&(st=util$1.relative(nt,st)),this.setSourceContent(st,ot))},this)}_validateMapping($,_e,et,tt){if(_e&&typeof _e.line!="number"&&typeof _e.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!($&&"line"in $&&"column"in $&&$.line>0&&$.column>=0&&!_e&&!et&&!tt)){if(!($&&"line"in $&&"column"in $&&_e&&"line"in _e&&"column"in _e&&$.line>0&&$.column>=0&&_e.line>0&&_e.column>=0&&et))throw new Error("Invalid mapping: "+JSON.stringify({generated:$,source:et,original:_e,name:tt}))}}_serializeMappings(){let $=0,_e=1,et=0,tt=0,nt=0,rt=0,it="",st,ot,at,lt;const ut=this._mappings.toArray();for(let ct=0,ft=ut.length;ct<ft;ct++){if(ot=ut[ct],st="",ot.generatedLine!==_e)for($=0;ot.generatedLine!==_e;)st+=";",_e++;else if(ct>0){if(!util$1.compareByGeneratedPositionsInflated(ot,ut[ct-1]))continue;st+=","}st+=base64VLQ.encode(ot.generatedColumn-$),$=ot.generatedColumn,ot.source!=null&&(lt=this._sources.indexOf(ot.source),st+=base64VLQ.encode(lt-rt),rt=lt,st+=base64VLQ.encode(ot.originalLine-1-tt),tt=ot.originalLine-1,st+=base64VLQ.encode(ot.originalColumn-et),et=ot.originalColumn,ot.name!=null&&(at=this._names.indexOf(ot.name),st+=base64VLQ.encode(at-nt),nt=at)),it+=st}return it}_generateSourcesContent($,_e){return $.map(function(et){if(!this._sourcesContents)return null;_e!=null&&(et=util$1.relative(_e,et));const tt=util$1.toSetString(et);return Object.prototype.hasOwnProperty.call(this._sourcesContents,tt)?this._sourcesContents[tt]:null},this)}toJSON(){const $={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&($.file=this._file),this._sourceRoot!=null&&($.sourceRoot=this._sourceRoot),this._sourcesContents&&($.sourcesContent=this._generateSourcesContent($.sources,$.sourceRoot)),$}toString(){return JSON.stringify(this.toJSON())}};SourceMapGenerator$1.prototype._version=3;sourceMapGenerator.SourceMapGenerator=SourceMapGenerator$1;var sourceNode={};const SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,util=util$3,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";let SourceNode$2=class Mr{constructor($,_e,et,tt,nt){this.children=[],this.sourceContents={},this.line=$??null,this.column=_e??null,this.source=et??null,this.name=nt??null,this[isSourceNode]=!0,tt!=null&&this.add(tt)}static fromStringWithSourceMap($,_e,et){const tt=new Mr,nt=$.split(REGEX_NEWLINE);let rt=0;const it=function(){const ct=dt(),ft=dt()||"";return ct+ft;function dt(){return rt<nt.length?nt[rt++]:void 0}};let st=1,ot=0,at=null,lt;return _e.eachMapping(function(ct){if(at!==null)if(st<ct.generatedLine)ut(at,it()),st++,ot=0;else{lt=nt[rt]||"";const ft=lt.substr(0,ct.generatedColumn-ot);nt[rt]=lt.substr(ct.generatedColumn-ot),ot=ct.generatedColumn,ut(at,ft),at=ct;return}for(;st<ct.generatedLine;)tt.add(it()),st++;ot<ct.generatedColumn&&(lt=nt[rt]||"",tt.add(lt.substr(0,ct.generatedColumn)),nt[rt]=lt.substr(ct.generatedColumn),ot=ct.generatedColumn),at=ct},this),rt<nt.length&&(at&&ut(at,it()),tt.add(nt.splice(rt).join(""))),_e.sources.forEach(function(ct){const ft=_e.sourceContentFor(ct);ft!=null&&(et!=null&&(ct=util.join(et,ct)),tt.setSourceContent(ct,ft))}),tt;function ut(ct,ft){if(ct===null||ct.source===void 0)tt.add(ft);else{const dt=et?util.join(et,ct.source):ct.source;tt.add(new Mr(ct.originalLine,ct.originalColumn,dt,ft,ct.name))}}}add($){if(Array.isArray($))$.forEach(function(_e){this.add(_e)},this);else if($[isSourceNode]||typeof $=="string")$&&this.children.push($);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+$);return this}prepend($){if(Array.isArray($))for(let _e=$.length-1;_e>=0;_e--)this.prepend($[_e]);else if($[isSourceNode]||typeof $=="string")this.children.unshift($);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+$);return this}walk($){let _e;for(let et=0,tt=this.children.length;et<tt;et++)_e=this.children[et],_e[isSourceNode]?_e.walk($):_e!==""&&$(_e,{source:this.source,line:this.line,column:this.column,name:this.name})}join($){let _e,et;const tt=this.children.length;if(tt>0){for(_e=[],et=0;et<tt-1;et++)_e.push(this.children[et]),_e.push($);_e.push(this.children[et]),this.children=_e}return this}replaceRight($,_e){const et=this.children[this.children.length-1];return et[isSourceNode]?et.replaceRight($,_e):typeof et=="string"?this.children[this.children.length-1]=et.replace($,_e):this.children.push("".replace($,_e)),this}setSourceContent($,_e){this.sourceContents[util.toSetString($)]=_e}walkSourceContents($){for(let et=0,tt=this.children.length;et<tt;et++)this.children[et][isSourceNode]&&this.children[et].walkSourceContents($);const _e=Object.keys(this.sourceContents);for(let et=0,tt=_e.length;et<tt;et++)$(util.fromSetString(_e[et]),this.sourceContents[_e[et]])}toString(){let $="";return this.walk(function(_e){$+=_e}),$}toStringWithSourceMap($){const _e={code:"",line:1,column:0},et=new SourceMapGenerator($);let tt=!1,nt=null,rt=null,it=null,st=null;return this.walk(function(ot,at){_e.code+=ot,at.source!==null&&at.line!==null&&at.column!==null?((nt!==at.source||rt!==at.line||it!==at.column||st!==at.name)&&et.addMapping({source:at.source,original:{line:at.line,column:at.column},generated:{line:_e.line,column:_e.column},name:at.name}),nt=at.source,rt=at.line,it=at.column,st=at.name,tt=!0):tt&&(et.addMapping({generated:{line:_e.line,column:_e.column}}),nt=null,tt=!1);for(let lt=0,ut=ot.length;lt<ut;lt++)ot.charCodeAt(lt)===NEWLINE_CODE?(_e.line++,_e.column=0,lt+1===ut?(nt=null,tt=!1):tt&&et.addMapping({source:at.source,original:{line:at.line,column:at.column},generated:{line:_e.line,column:_e.column},name:at.name})):_e.column++}),this.walkSourceContents(function(ot,at){et.setSourceContent(ot,at)}),{code:_e.code,map:et}}};sourceNode.SourceNode=SourceNode$2;sourceMap.SourceMapGenerator=sourceMapGenerator.SourceMapGenerator;sourceMap.SourceNode=sourceNode.SourceNode;const{SourceNode:SourceNode$1}=sourceMap,GrammarLocation$2=grammarLocation;let Stack$1=class yr{constructor($,_e,et,tt){this.sp=-1,this.maxSp=-1,this.varName=_e,this.ruleName=$,this.type=et,this.bytecode=tt,this.labels={},this.sourceMapStack=[]}name($){if($<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${$}.
Bytecode: ${this.bytecode}`);return this.varName+$}static sourceNode($,_e,et){const tt=GrammarLocation$2.offsetStart($);return new SourceNode$1(tt.line,tt.column?tt.column-1:null,String($.source),_e,et)}push($){++this.sp>this.maxSp&&(this.maxSp=this.sp);const _e=this.labels[this.sp],et=[this.name(this.sp)," = ",$,";"];if(_e)if(this.sourceMapStack.length){const tt=yr.sourceNode(_e.location,et.splice(0,2),_e.label),{parts:nt,location:rt}=this.sourceMapPopInternal(),it=rt.start.offset<_e.location.end.offset?{start:_e.location.end,end:rt.end,source:rt.source}:rt,st=yr.sourceNode(it,et.concat(`
`));return this.sourceMapStack.push([nt,nt.length+1,rt]),new SourceNode$1(null,null,_e.location.source,[tt,st])}else return yr.sourceNode(_e.location,et.concat(`
`));return et.join("")}pop($){return $!==void 0?(this.sp-=$,Array.from({length:$},(_e,et)=>this.name(this.sp+1+et))):this.name(this.sp--)}top(){return this.name(this.sp)}index($){if($<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${$}.
Bytecode: ${this.bytecode}`);return this.name(this.sp-$)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result.
Bytecode: ${this.bytecode}`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},($,_e)=>this.name(_e)).join(", ")+";"}checkedIf($,_e,et){const tt=this.sp;if(_e(),et){const nt=this.sp;if(this.sp=tt,et(),nt!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+$+": Branches of a condition can't move the stack pointer differently (before: "+tt+", after then: "+nt+", after else: "+this.sp+"). Bytecode: "+this.bytecode)}}checkedLoop($,_e){const et=this.sp;if(_e(),et!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+$+": Body of a loop can't move the stack pointer (before: "+et+", after: "+this.sp+"). Bytecode: "+this.bytecode)}sourceMapPush($,_e){if(this.sourceMapStack.length){const et=this.sourceMapStack[this.sourceMapStack.length-1];et[2].start.offset===_e.start.offset&&et[2].end.offset>_e.end.offset&&(et[2]={start:_e.end,end:et[2].end,source:et[2].source})}this.sourceMapStack.push([$,$.length,_e])}sourceMapPopInternal(){const[$,_e,et]=this.sourceMapStack.pop(),tt=$.splice(_e).map(nt=>nt instanceof SourceNode$1?nt:nt+`
`);if(tt.length){const nt=GrammarLocation$2.offsetStart(et);$.push(new SourceNode$1(nt.line,nt.column-1,String(et.source),tt))}return{parts:$,location:et}}sourceMapPop($){const{location:_e}=this.sourceMapPopInternal();if(this.sourceMapStack.length&&_e.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){const{parts:et,location:tt}=this.sourceMapPopInternal(),nt=tt.start.offset<_e.end.offset?{start:_e.end,end:tt.end,source:tt.source}:tt;this.sourceMapStack.push([et,et.length+($||0),nt])}}};var stack=Stack$1,version="3.0.2",utils={};function hex(j){return j.charCodeAt(0).toString(16).toUpperCase()}utils.hex=hex;function stringEscape$1(j){return j.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+hex($)).replace(/[\x10-\x1F\x7F-\xFF]/g,$=>"\\x"+hex($)).replace(/[\u0100-\u0FFF]/g,$=>"\\u0"+hex($)).replace(/[\u1000-\uFFFF]/g,$=>"\\u"+hex($))}utils.stringEscape=stringEscape$1;function regexpClassEscape$1(j){return j.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+hex($)).replace(/[\x10-\x1F\x7F-\xFF]/g,$=>"\\x"+hex($)).replace(/[\u0100-\u0FFF]/g,$=>"\\u0"+hex($)).replace(/[\u1000-\uFFFF]/g,$=>"\\u"+hex($))}utils.regexpClassEscape=regexpClassEscape$1;function base64$1(j){const $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_e=j.length%3,et=j.length-_e;let tt="";for(let nt=0;nt<et;nt+=3)tt+=$[j[nt]>>2],tt+=$[(j[nt]&3)<<4|j[nt+1]>>4],tt+=$[(j[nt+1]&15)<<2|j[nt+2]>>6],tt+=$[j[nt+2]&63];return _e===1?(tt+=$[j[et]>>2],tt+=$[(j[et]&3)<<4],tt+="=="):_e===2&&(tt+=$[j[et]>>2],tt+=$[(j[et]&3)<<4|j[et+1]>>4],tt+=$[(j[et+1]&15)<<2],tt+="="),tt}utils.base64=base64$1;const asts$4=asts_1,op=opcodes_1,Stack=stack,VERSION$1=version,{stringEscape,regexpClassEscape}=utils,{SourceNode}=sourceMap,GrammarLocation$1=grammarLocation;function toSourceNode(j,$,_e){const et=GrammarLocation$1.offsetStart($),tt=et.line,nt=et.column-1,rt=j.split(`
`);return rt.length===1?new SourceNode(tt,nt,String($.source),j,_e):new SourceNode(null,null,String($.source),rt.map((it,st)=>new SourceNode(tt+st,st===0?nt:0,String($.source),st===rt.length-1?it:[it,`
`],_e)))}function wrapInSourceNode(j,$,_e,et,tt){if(_e){const nt=GrammarLocation$1.offsetEnd(_e);return new SourceNode(null,null,String(_e.source),[j,toSourceNode($,_e,tt),new SourceNode(nt.line,nt.column-1,String(_e.source),et)])}return new SourceNode(null,null,null,[j,$,et])}function generateJS$1(j,$){function _e(dt){let mt=!0,pt=0;function yt(vt){return Array.isArray(vt)?vt.map(yt):vt instanceof SourceNode?(pt++,vt.children=yt(vt.children),pt--,vt):(mt?vt=vt.replace(/^(.+)$/gm,"  $1"):vt=vt.replace(/\n(\s*\S)/g,`
  $1`),mt=!pt||vt.endsWith(`
`),vt)}return yt(dt)}function et(dt){return"peg$c"+dt}function tt(dt){return"peg$r"+dt}function nt(dt){return"peg$e"+dt}function rt(dt){return"peg$f"+dt}function it(dt){return"peg$parse"+dt}function st(){function dt(vt){return'"'+stringEscape(vt)+'"'}function mt(vt){return"/^["+(vt.inverted?"^":"")+vt.value.map(Ct=>Array.isArray(Ct)?regexpClassEscape(Ct[0])+"-"+regexpClassEscape(Ct[1]):regexpClassEscape(Ct)).join("")+"]/"+(vt.ignoreCase?"i":"")}function pt(vt){switch(vt.type){case"rule":return'peg$otherExpectation("'+stringEscape(vt.value)+'")';case"literal":return'peg$literalExpectation("'+stringEscape(vt.value)+'", '+vt.ignoreCase+")";case"class":return"peg$classExpectation(["+vt.value.map(At=>Array.isArray(At)?'["'+stringEscape(At[0])+'", "'+stringEscape(At[1])+'"]':'"'+stringEscape(At)+'"').join(", ")+"], "+vt.inverted+", "+vt.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(vt)+")")}}function yt(vt,Ct){return wrapInSourceNode(`
  var ${rt(Ct)} = function(${vt.params.join(", ")}) {`,vt.body,vt.location,"};")}return new SourceNode(null,null,$.grammarSource,[j.literals.map((vt,Ct)=>"  var "+et(Ct)+" = "+dt(vt)+";").concat("",j.classes.map((vt,Ct)=>"  var "+tt(Ct)+" = "+mt(vt)+";")).concat("",j.expectations.map((vt,Ct)=>"  var "+nt(Ct)+" = "+pt(vt)+";")).concat("").join(`
`),j.functions.map(yt)])}function ot(dt,mt){const pt=[];return pt.push(""),$.trace&&pt.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+dt+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),$.cache&&(pt.push("var key = peg$currPos * "+j.rules.length+" + "+mt+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),$.trace&&pt.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+dt+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+dt+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),pt.push("  return cached.result;","}","")),pt}function at(dt,mt){const pt=[];return $.cache&&pt.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+mt+" };"),$.trace&&pt.push("","if ("+mt+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+dt+",","    result: "+mt+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+dt+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),pt.push("","return "+mt+";"),pt}function lt(dt){const mt=[],pt=new Stack(dt.name,"s","var",dt.bytecode);function yt(Ct){let At=0;const $t=Ct.length,bt=[];let Bt;function Rt(Pt,Mt){const Lt=Mt+3,zt=Ct[At+Lt-2],Kt=Ct[At+Lt-1];let Ut,It;pt.checkedIf(At,()=>{At+=Lt,Ut=yt(Ct.slice(At,At+zt)),At+=zt},Kt>0?()=>{It=yt(Ct.slice(At,At+Kt)),At+=Kt}:null),bt.push("if ("+Pt+") {"),bt.push(..._e(Ut)),Kt>0&&(bt.push("} else {"),bt.push(..._e(It))),bt.push("}")}function St(Pt){const Lt=Ct[At+2-1];let zt;pt.checkedLoop(At,()=>{At+=2,zt=yt(Ct.slice(At,At+Lt)),At+=Lt}),bt.push("while ("+Pt+") {"),bt.push(..._e(zt)),bt.push("}")}function kt(Pt){const Mt=Ct[At+Pt-1];return rt(Ct[At+1])+"("+Ct.slice(At+Pt,At+Pt+Mt).map(Lt=>pt.index(Lt)).join(", ")+")"}for(;At<$t;)switch(Ct[At]){case op.PUSH_EMPTY_STRING:bt.push(pt.push("''")),At++;break;case op.PUSH_CURR_POS:bt.push(pt.push("peg$currPos")),At++;break;case op.PUSH_UNDEFINED:bt.push(pt.push("undefined")),At++;break;case op.PUSH_NULL:bt.push(pt.push("null")),At++;break;case op.PUSH_FAILED:bt.push(pt.push("peg$FAILED")),At++;break;case op.PUSH_EMPTY_ARRAY:bt.push(pt.push("[]")),At++;break;case op.POP:pt.pop(),At++;break;case op.POP_CURR_POS:bt.push("peg$currPos = "+pt.pop()+";"),At++;break;case op.POP_N:pt.pop(Ct[At+1]),At+=2;break;case op.NIP:Bt=pt.pop(),pt.pop(),bt.push(pt.push(Bt)),At++;break;case op.APPEND:Bt=pt.pop(),bt.push(pt.top()+".push("+Bt+");"),At++;break;case op.WRAP:bt.push(pt.push("["+pt.pop(Ct[At+1]).join(", ")+"]")),At+=2;break;case op.TEXT:bt.push(pt.push("input.substring("+pt.pop()+", peg$currPos)")),At++;break;case op.PLUCK:{const Mt=Ct[At+3-1],Lt=3+Mt;Bt=Ct.slice(At+3,At+Lt),Bt=Mt===1?pt.index(Bt[0]):`[ ${Bt.map(zt=>pt.index(zt)).join(", ")} ]`,pt.pop(Ct[At+1]),bt.push(pt.push(Bt)),At+=Lt;break}case op.IF:Rt(pt.top(),0);break;case op.IF_ERROR:Rt(pt.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:Rt(pt.top()+" !== peg$FAILED",0);break;case op.IF_LT:Rt(pt.top()+".length < "+Ct[At+1],1);break;case op.IF_GE:Rt(pt.top()+".length >= "+Ct[At+1],1);break;case op.IF_LT_DYNAMIC:Rt(pt.top()+".length < ("+pt.index(Ct[At+1])+"|0)",1);break;case op.IF_GE_DYNAMIC:Rt(pt.top()+".length >= ("+pt.index(Ct[At+1])+"|0)",1);break;case op.WHILE_NOT_ERROR:St(pt.top()+" !== peg$FAILED");break;case op.MATCH_ANY:Rt("input.length > peg$currPos",0);break;case op.MATCH_STRING:Rt(j.literals[Ct[At+1]].length>1?"input.substr(peg$currPos, "+j.literals[Ct[At+1]].length+") === "+et(Ct[At+1]):"input.charCodeAt(peg$currPos) === "+j.literals[Ct[At+1]].charCodeAt(0),1);break;case op.MATCH_STRING_IC:Rt("input.substr(peg$currPos, "+j.literals[Ct[At+1]].length+").toLowerCase() === "+et(Ct[At+1]),1);break;case op.MATCH_CHAR_CLASS:Rt(tt(Ct[At+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:bt.push(pt.push(Ct[At+1]>1?"input.substr(peg$currPos, "+Ct[At+1]+")":"input.charAt(peg$currPos)")),bt.push(Ct[At+1]>1?"peg$currPos += "+Ct[At+1]+";":"peg$currPos++;"),At+=2;break;case op.ACCEPT_STRING:bt.push(pt.push(et(Ct[At+1]))),bt.push(j.literals[Ct[At+1]].length>1?"peg$currPos += "+j.literals[Ct[At+1]].length+";":"peg$currPos++;"),At+=2;break;case op.FAIL:bt.push(pt.push("peg$FAILED")),bt.push("if (peg$silentFails === 0) { peg$fail("+nt(Ct[At+1])+"); }"),At+=2;break;case op.LOAD_SAVED_POS:bt.push("peg$savedPos = "+pt.index(Ct[At+1])+";"),At+=2;break;case op.UPDATE_SAVED_POS:bt.push("peg$savedPos = peg$currPos;"),At++;break;case op.CALL:Bt=kt(4),pt.pop(Ct[At+2]),bt.push(pt.push(Bt)),At+=4+Ct[At+3];break;case op.RULE:bt.push(pt.push(it(j.rules[Ct[At+1]].name)+"()")),At+=2;break;case op.SILENT_FAILS_ON:bt.push("peg$silentFails++;"),At++;break;case op.SILENT_FAILS_OFF:bt.push("peg$silentFails--;"),At++;break;case op.SOURCE_MAP_PUSH:pt.sourceMapPush(bt,j.locations[Ct[At+1]]),At+=2;break;case op.SOURCE_MAP_POP:{pt.sourceMapPop(),At++;break}case op.SOURCE_MAP_LABEL_PUSH:pt.labels[Ct[At+1]]={label:j.literals[Ct[At+2]],location:j.locations[Ct[At+3]]},At+=4;break;case op.SOURCE_MAP_LABEL_POP:delete pt.labels[Ct[At+1]],At+=2;break;default:throw new Error("Invalid opcode: "+Ct[At]+".",{rule:dt.name,bytecode:Ct})}return bt}const vt=yt(dt.bytecode);return mt.push(wrapInSourceNode("function ",it(dt.name),dt.nameLocation,`() {
`,dt.name)),$.trace&&mt.push("  var startPos = peg$currPos;"),mt.push(_e(pt.defines())),mt.push(..._e(ot('"'+stringEscape(dt.name)+'"',asts$4.indexOfRule(j,dt.name)))),mt.push(..._e(vt)),mt.push(..._e(at('"'+stringEscape(dt.name)+'"',pt.result()))),mt.push("}"),mt}function ut(dt){return dt.codeLocation?toSourceNode(dt.code,dt.codeLocation,"$"+dt.type):dt.code}function ct(){const dt=[];j.topLevelInitializer&&(dt.push(ut(j.topLevelInitializer)),dt.push("")),dt.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"      ? this.location.source.offset(s)","      : s;",'    var loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", offset_s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + offset_s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),$.trace&&dt.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");const mt="{ "+$.allowedStartRules.map(yt=>yt+": "+it(yt)).join(", ")+" }",pt=it($.allowedStartRules[0]);return dt.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+mt+";","  var peg$startRuleFunction = "+pt+";","",st(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),$.cache&&dt.push("  var peg$resultsCache = {};",""),$.trace&&dt.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),dt.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    var res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),j.rules.forEach(yt=>{dt.push(..._e(lt(yt))),dt.push("")}),j.initializer&&(dt.push(ut(j.initializer)),dt.push("")),dt.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new SourceNode(null,null,$.grammarSource,dt.map(yt=>yt instanceof SourceNode?yt:yt+`
`))}function ft(dt){function mt(){return[`// Generated by Peggy ${VERSION$1}.`,"//","// https://peggyjs.org/"]}function pt(){return $.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}const vt={bare(){return[...mt(),"(function() {",'  "use strict";',"",dt,"",_e("return "+pt()+";"),"})()"]},commonjs(){const Ct=Object.keys($.dependencies),At=mt();return At.push("",'"use strict";',""),Ct.length>0&&(Ct.forEach($t=>{At.push("var "+$t+' = require("'+stringEscape($.dependencies[$t])+'");')}),At.push("")),At.push(dt,"","module.exports = "+pt()+";"),At},es(){const Ct=Object.keys($.dependencies),At=mt();return At.push(""),Ct.length>0&&(Ct.forEach($t=>{At.push("import "+$t+' from "'+stringEscape($.dependencies[$t])+'";')}),At.push("")),At.push(dt,"","export {","  peg$SyntaxError as SyntaxError,",$.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),At},amd(){const Ct=Object.keys($.dependencies),$t="["+Ct.map(Bt=>$.dependencies[Bt]).map(Bt=>'"'+stringEscape(Bt)+'"').join(", ")+"]",bt=Ct.join(", ");return[...mt(),"define("+$t+", function("+bt+") {",'  "use strict";',"",dt,"",_e("return "+pt()+";"),"});"]},globals(){return[...mt(),"(function(root) {",'  "use strict";',"",dt,"",_e("root."+$.exportVar+" = "+pt()+";"),"})(this);"]},umd(){const Ct=Object.keys($.dependencies),At=Ct.map(St=>$.dependencies[St]),$t="["+At.map(St=>'"'+stringEscape(St)+'"').join(", ")+"]",bt=At.map(St=>'require("'+stringEscape(St)+'")').join(", "),Bt=Ct.join(", "),Rt=mt();return Rt.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+$t+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+bt+");"),$.exportVar!==null&&Rt.push("  } else {","    root."+$.exportVar+" = factory();"),Rt.push("  }","})(this, function("+Bt+") {",'  "use strict";',"",dt,"",_e("return "+pt()+";"),"});"),Rt}}[$.format]();return new SourceNode(null,null,$.grammarSource,vt.map(Ct=>Ct instanceof SourceNode?Ct:Ct+`
`))}j.code=ft(ct())}var generateJs=generateJS$1;const asts$3=asts_1,visitor$7=visitor_1;function removeProxyRules$1(j,$,_e){function et(rt){return rt.type==="rule"&&rt.expression.type==="rule_ref"}function tt(rt,it,st){visitor$7.build({rule_ref(at){at.name===it&&(at.name=st,_e.info(`Proxy rule "${it}" replaced by the rule "${st}"`,at.location,[{message:"This rule will be used",location:asts$3.findRule(rt,st).nameLocation}]))}})(rt)}const nt=[];j.rules.forEach((rt,it)=>{et(rt)&&(tt(j,rt.name,rt.expression.name),$.allowedStartRules.indexOf(rt.name)===-1&&nt.push(it))}),nt.reverse(),nt.forEach(rt=>{j.rules.splice(rt,1)})}var removeProxyRules_1=removeProxyRules$1;const visitor$6=visitor_1;function reportDuplicateLabels$1(j,$,_e){function et(rt){const it={};return Object.keys(rt).forEach(st=>{it[st]=rt[st]}),it}function tt(rt,it){nt(rt.expression,et(it))}const nt=visitor$6.build({rule(rt){nt(rt.expression,{})},choice(rt,it){rt.alternatives.forEach(st=>{nt(st,et(it))})},action:tt,labeled(rt,it){const st=rt.label;st&&Object.prototype.hasOwnProperty.call(it,st)&&_e.error(`Label "${rt.label}" is already defined`,rt.labelLocation,[{message:"Original label location",location:it[st]}]),nt(rt.expression,it),it[rt.label]=rt.labelLocation},text:tt,simple_and:tt,simple_not:tt,optional:tt,zero_or_more:tt,one_or_more:tt,repeated(rt,it){rt.delimiter&&nt(rt.delimiter,et(it)),nt(rt.expression,et(it))},group:tt});nt(j)}var reportDuplicateLabels_1=reportDuplicateLabels$1;const visitor$5=visitor_1;function reportDuplicateRules$1(j,$,_e){const et={};visitor$5.build({rule(nt){if(Object.prototype.hasOwnProperty.call(et,nt.name)){_e.error(`Rule "${nt.name}" is already defined`,nt.nameLocation,[{message:"Original rule location",location:et[nt.name]}]);return}et[nt.name]=nt.nameLocation}})(j)}var reportDuplicateRules_1=reportDuplicateRules$1;const asts$2=asts_1,visitor$4=visitor_1;function reportInfiniteRecursion$1(j,$,_e){const et=[],tt=[],nt=visitor$4.build({rule(rt){et.push(rt.name),nt(rt.expression),et.pop()},sequence(rt){rt.elements.every(it=>(nt(it),!asts$2.alwaysConsumesOnSuccess(j,it)))},repeated(rt){nt(rt.expression),rt.delimiter&&!asts$2.alwaysConsumesOnSuccess(j,rt.expression)&&nt(rt.delimiter)},rule_ref(rt){tt.push(rt);const it=asts$2.findRule(j,rt.name);if(et.indexOf(rt.name)!==-1){et.push(rt.name),_e.error("Possible infinite loop when parsing (left recursion: "+et.join(" -> ")+")",it.nameLocation,tt.map((st,ot,at)=>({message:ot+1!==at.length?`Step ${ot+1}: call of the rule "${st.name}" without input consumption`:`Step ${ot+1}: call itself without input consumption - left recursion`,location:st.location})));return}it&&nt(it),tt.pop()}});nt(j)}var reportInfiniteRecursion_1=reportInfiniteRecursion$1;const asts$1=asts_1,visitor$3=visitor_1;function reportInfiniteRepetition$1(j,$,_e){const et=visitor$3.build({zero_or_more(tt){asts$1.alwaysConsumesOnSuccess(j,tt.expression)||_e.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",tt.location)},one_or_more(tt){asts$1.alwaysConsumesOnSuccess(j,tt.expression)||_e.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",tt.location)},repeated(tt){if(tt.delimiter&&et(tt.delimiter),!(asts$1.alwaysConsumesOnSuccess(j,tt.expression)||tt.delimiter&&asts$1.alwaysConsumesOnSuccess(j,tt.delimiter)))if(tt.max.value===null)_e.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",tt.location);else{const nt=tt.min?tt.min:tt.max;_e.warning(nt.type==="constant"&&tt.max.type==="constant"?`An expression may not consume any input and may always match ${tt.max.value} times`:"An expression may not consume any input and may always match with a maximum repetition count",tt.location)}}});et(j)}var reportInfiniteRepetition_1=reportInfiniteRepetition$1;const asts=asts_1,visitor$2=visitor_1;function reportUndefinedRules$1(j,$,_e){visitor$2.build({rule_ref(tt){asts.findRule(j,tt.name)||_e.error(`Rule "${tt.name}" is not defined`,tt.location)}})(j)}var reportUndefinedRules_1=reportUndefinedRules$1;const visitor$1=visitor_1;function reportIncorrectPlucking$1(j,$,_e){const et=visitor$1.build({action(tt){et(tt.expression,tt)},labeled(tt,nt){tt.pick&&nt&&_e.error('"@" cannot be used with an action block',tt.labelLocation,[{message:"Action block location",location:nt.codeLocation}]),et(tt.expression)}});et(j)}var reportIncorrectPlucking_1=reportIncorrectPlucking$1;const GrammarError$1=grammarError;class Defaults{constructor($){$=typeof $<"u"?$:{},typeof $.error=="function"&&(this.error=$.error),typeof $.warning=="function"&&(this.warning=$.warning),typeof $.info=="function"&&(this.info=$.info)}error(){}warning(){}info(){}}let Session$1=class{constructor($){this._callbacks=new Defaults($),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...$){++this.errors,this._firstError===null&&(this._firstError=new GrammarError$1(...$),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...$]),this._callbacks.error(this.stage,...$)}warning(...$){this.problems.push(["warning",...$]),this._callbacks.warning(this.stage,...$)}info(...$){this.problems.push(["info",...$]),this._callbacks.info(this.stage,...$)}checkErrors(){if(this.errors!==0)throw this._firstError}};var session=Session$1;const generateBytecode=generateBytecode_1,generateJS=generateJs,inferenceMatchResult=inferenceMatchResult_1,removeProxyRules=removeProxyRules_1,reportDuplicateLabels=reportDuplicateLabels_1,reportDuplicateRules=reportDuplicateRules_1,reportInfiniteRecursion=reportInfiniteRecursion_1,reportInfiniteRepetition=reportInfiniteRepetition_1,reportUndefinedRules=reportUndefinedRules_1,reportIncorrectPlucking=reportIncorrectPlucking_1,Session=session,visitor=visitor_1,{base64}=utils;function processOptions(j,$){const _e={};return Object.keys(j).forEach(et=>{_e[et]=j[et]}),Object.keys($).forEach(et=>{Object.prototype.hasOwnProperty.call(_e,et)||(_e[et]=$[et])}),_e}function isSourceMapCapable(j){return typeof j=="string"?j.length>0:j&&typeof j.offset=="function"}const compiler$1={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");const allRules=ast.rules.map(j=>j.name);if(options.allowedStartRules.some(j=>j==="*"))options.allowedStartRules=allRules;else for(const j of options.allowedStartRules)if(allRules.indexOf(j)===-1)throw new Error(`Unknown start rule "${j}"`);if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");const session=new Session(options);switch(Object.keys(passes).forEach(j=>{session.stage=j,session.info(`Process stage ${j}`),passes[j].forEach($=>{session.info(`Process pass ${j}.${$.name}`),$(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if(typeof TextEncoder>"u")throw new Error("TextEncoder is not supported by this platform");const j=ast.code.toStringWithSourceMap(),$=new TextEncoder,_e=base64($.encode(JSON.stringify(j.map.toJSON())));return j.code+`//# sourceMappingURL=data:application/json;charset=utf-8;base64,${_e}
`}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};var compiler_1=compiler$1;const OPS_TO_PREFIXED_TYPES={$:"text","&":"simple_and","!":"simple_not"},OPS_TO_SUFFIXED_TYPES={"?":"optional","*":"zero_or_more","+":"one_or_more"},OPS_TO_SEMANTIC_PREDICATE_TYPES={"&":"semantic_and","!":"semantic_not"};function peg$subclass(j,$){function _e(){this.constructor=j}_e.prototype=$.prototype,j.prototype=new _e}function peg$SyntaxError(j,$,_e,et){var tt=Error.call(this,j);return Object.setPrototypeOf&&Object.setPrototypeOf(tt,peg$SyntaxError.prototype),tt.expected=$,tt.found=_e,tt.location=et,tt.name="SyntaxError",tt}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(j,$,_e){return _e=_e||" ",j.length>$?j:($-=j.length,_e+=_e.repeat($),j+_e.slice(0,$))}peg$SyntaxError.prototype.format=function(j){var $="Error: "+this.message;if(this.location){var _e=null,et;for(et=0;et<j.length;et++)if(j[et].source===this.location.source){_e=j[et].text.split(/\r\n|\n|\r/g);break}var tt=this.location.start,nt=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(tt):tt,rt=this.location.source+":"+nt.line+":"+nt.column;if(_e){var it=this.location.end,st=peg$padEnd("",nt.line.toString().length," "),ot=_e[tt.line-1],at=tt.line===it.line?it.column:ot.length+1,lt=at-tt.column||1;$+=`
 --> `+rt+`
`+st+` |
`+nt.line+" | "+ot+`
`+st+" | "+peg$padEnd("",tt.column-1," ")+peg$padEnd("",lt,"^")}else $+=`
 at `+rt}return $};peg$SyntaxError.buildMessage=function(j,$){var _e={literal:function(ot){return'"'+tt(ot.text)+'"'},class:function(ot){var at=ot.parts.map(function(lt){return Array.isArray(lt)?nt(lt[0])+"-"+nt(lt[1]):nt(lt)});return"["+(ot.inverted?"^":"")+at.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(ot){return ot.description}};function et(ot){return ot.charCodeAt(0).toString(16).toUpperCase()}function tt(ot){return ot.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(at){return"\\x0"+et(at)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(at){return"\\x"+et(at)})}function nt(ot){return ot.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(at){return"\\x0"+et(at)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(at){return"\\x"+et(at)})}function rt(ot){return _e[ot.type](ot)}function it(ot){var at=ot.map(rt),lt,ut;if(at.sort(),at.length>0){for(lt=1,ut=1;lt<at.length;lt++)at[lt-1]!==at[lt]&&(at[ut]=at[lt],ut++);at.length=ut}switch(at.length){case 1:return at[0];case 2:return at[0]+" or "+at[1];default:return at.slice(0,-1).join(", ")+", or "+at[at.length-1]}}function st(ot){return ot?'"'+tt(ot)+'"':"end of input"}return"Expected "+it(j)+" but "+st($)+" found."};function peg$parse(j,$){$=$!==void 0?$:{};var _e={},et=$.grammarSource,tt={Grammar:zr},nt=zr,rt="{",it="}",st="=",ot="/",at="@",lt=":",ut="$",ct="&",ft="!",dt="?",mt="*",pt="+",yt="|",vt=",",Ct="..",At="(",$t=")",bt="	",Bt="\v",Rt="\f",St=" ",kt="",Pt="\uFEFF",Mt=`
`,Lt=`\r
`,zt="\r",Kt="\u2028",Ut="\u2029",It="/*",Vt="*/",jt="//",Yt="_",Xt="\\",sn="",on="",hn="i",cn='"',An="'",_n="[",Wn="^",Dn="]",In="-",Vn="0",Mn="b",bn="f",jn="n",Gn="r",Yn="t",Fn="v",On="x",kn="u",Sn=".",$n=";",Pn=/^[\n\r\u2028\u2029]/,gn=/^[0-9]/,_t=/^[0-9a-f]/i,Ft=/^[{}]/,Ht=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Gt=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Wt=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Jt=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Zt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,tn=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,Qt=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,fn=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,nn=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,an=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,yn=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,dn=qt("{",!1),xn=qt("}",!1),Tn=qt("=",!1),Bn=qt("/",!1),un=qt("@",!1),Jn=qt(":",!1),mn=qt("$",!1),wn=qt("&",!1),Ln=qt("!",!1),Kn=qt("?",!1),er=qt("*",!1),vr=qt("+",!1),rr=qt("|",!1),Rn=qt(",",!1),tr=qt("..",!1),ir=qt("(",!1),xr=qt(")",!1),Fr=Uo(),as=zn("whitespace"),ls=qt("	",!1),us=qt("\v",!1),cs=qt("\f",!1),hs=qt(" ",!1),fs=qt("",!1),ds=qt("\uFEFF",!1),ps=Cn([`
`,"\r","\u2028","\u2029"],!1,!1),gs=zn("end of line"),ms=qt(`
`,!1),ys=qt(`\r
`,!1),vs=qt("\r",!1),xs=qt("\u2028",!1),Cs=qt("\u2029",!1),As=zn("comment"),Or=qt("/*",!1),Xn=qt("*/",!1),Es=qt("//",!1),Ss=zn("identifier"),ws=qt("_",!1),Hn=qt("\\",!1),bs=qt("",!1),ks=qt("",!1),$s=zn("literal"),Lr=qt("i",!1),Ts=zn("string"),sr=qt('"',!1),or=qt("'",!1),Ds=zn("character class"),Ps=qt("[",!1),Bs=qt("^",!1),Nr=qt("]",!1),Rs=qt("-",!1),_s=qt("0",!1),Ms=qt("b",!1),Fs=qt("f",!1),Os=qt("n",!1),Ls=qt("r",!1),Ns=qt("t",!1),Is=qt("v",!1),Ir=qt("x",!1),Vr=qt("u",!1),Vs=Cn([["0","9"]],!1,!1),Hs=Cn([["0","9"],["a","f"]],!1,!0),js=qt(".",!1),zs=zn("code block"),ar=Cn(["{","}"],!1,!1),Us=Cn([["a","z"],"",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","",["",""],"","","","","",["",""],"","","","",["",""],["",""],"","","","","","","","","","",["",""],"","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"",["",""],"","","","","",["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],"","","","","","","","","","","",["",""],"","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","","","",["",""],["",""],"","",["",""],"",["",""],"","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","",["",""],"","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Ws=Cn([["",""],["",""],["",""],"","","","","","",["",""],["",""],"","","","","","","","","","","",["",""],["",""],"",["",""],"","",["",""],["",""],"","","",["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],"","",["",""],"","","","",["",""],["",""],"",["",""]],!1,!1),Gs=Cn(["","","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","",["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Ys=Cn(["","","","",["",""],["",""],["",""],"","",""],!1,!1),Ks=Cn([["A","Z"],["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],"","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""],"","","","","","","","","",["",""],"",["",""],["",""],["",""],"",["",""],"","","","","","","","","","","","","","",["",""],["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],"",["",""],"","","",["",""],["",""],["",""],"","",["",""],"",["",""],"","","",["",""],"","",["",""],"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",["",""],"","","","","","","","","","","","","","","","","","",["",""],["",""],"",["",""]],!1,!1),Xs=Cn(["","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],"",["",""],["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","","",["",""],["",""],"","","",["",""],["",""],"","",["",""],"","",["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],"",["",""],["",""],["",""],""],!1,!1),Qs=Cn([["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],"",["",""],["",""],"","",["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],"","","",["",""],"","",["",""],"","","","",["",""],["",""],["",""],["",""],["",""],"","","","",["",""],["",""],"",["",""],"",["",""],"",["",""],"","",["",""],["",""],"",["",""],["",""],["",""],["",""],"","","",["",""],["",""],["",""],["",""],["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],"",["",""],["",""],"",["",""],["",""],"","",["",""],"","",["",""],["",""],"",["",""],["",""],"",["",""],"","",["",""],["",""],["",""],["",""],["",""],"",["",""],"",["",""],["",""],["",""],["",""],["",""],["",""],"","",["",""],["",""],["",""],["",""],"",["",""],["",""],"",["",""],["",""],["",""],"",["",""],["",""],["",""],"","","",["",""],"",["",""],["",""],["",""],["",""],"",["",""],"","",["",""],["",""],["",""],"","","","",["",""],["",""],["",""],"",["",""],"","","","","",["",""],["",""]],!1,!1),qs=Cn([["0","9"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Zs=Cn([["",""],["",""],["",""],"",["",""],["",""],["",""]],!1,!1),Js=Cn(["_",["",""],"",["",""],["",""],""],!1,!1),eo=Cn([" ","","",["",""],"","",""],!1,!1),Hr=qt(";",!1),to=function(ht,xt,wt){return{type:"grammar",topLevelInitializer:ht,initializer:xt,rules:wt,location:ln()}},no=function(ht){return{type:"top_level_initializer",code:ht[0],codeLocation:ht[1],location:ln()}},ro=function(ht){return{type:"initializer",code:ht[0],codeLocation:ht[1],location:ln()}},io=function(ht,xt,wt){return{type:"rule",name:ht[0],nameLocation:ht[1],expression:xt!==null?{type:"named",name:xt,expression:wt,location:ln()}:wt,location:ln()}},so=function(ht,xt){return xt.length>0?{type:"choice",alternatives:[ht].concat(xt),location:ln()}:ht},oo=function(ht,xt){return xt!==null?{type:"action",expression:ht,code:xt[0],codeLocation:xt[1],location:ln()}:ht},ao=function(ht,xt){return xt.length>0||ht.type==="labeled"&&ht.pick?{type:"sequence",elements:[ht].concat(xt),location:ln()}:ht},lo=function(ht,xt,wt){return wt.type.startsWith("semantic_")&&cr('"@" cannot be used on a semantic predicate',ht),{type:"labeled",label:xt!==null?xt[0]:null,labelLocation:xt!==null?xt[1]:ht,pick:!0,expression:wt,location:ln()}},uo=function(ht,xt){return{type:"labeled",label:ht[0],labelLocation:ht[1],expression:xt,location:ln()}},co=function(){return ln()},ho=function(ht){return Yl.indexOf(ht[0])>=0&&cr(`Label can't be a reserved word "${ht[0]}"`,ht[1]),ht},fo=function(ht,xt){return{type:OPS_TO_PREFIXED_TYPES[ht],expression:xt,location:ln()}},po=function(ht,xt){return{type:OPS_TO_SUFFIXED_TYPES[xt],expression:ht,location:ln()}},go=function(ht,xt,wt){let Et=xt[0],Dt=xt[1];return Dt.type==="constant"&&Dt.value===0&&cr("The maximum count of repetitions of the rule must be > 0",Dt.location),{type:"repeated",min:Et,max:Dt,expression:ht,delimiter:wt,location:ln()}},mo=function(ht,xt){return[ht!==null?ht:{type:"constant",value:0},xt!==null?xt:{type:"constant",value:null}]},yo=function(ht){return[null,ht]},vo=function(ht){return{type:"constant",value:ht,location:ln()}},xo=function(ht){return{type:"variable",value:ht[0],location:ln()}},Co=function(ht){return{type:"function",value:ht[0],codeLocation:ht[1],location:ln()}},Ao=function(ht){return ht.type==="labeled"||ht.type==="sequence"?{type:"group",expression:ht,location:ln()}:ht},Eo=function(ht){return{type:"rule_ref",name:ht[0],location:ln()}},So=function(ht,xt){return{type:OPS_TO_SEMANTIC_PREDICATE_TYPES[ht],code:xt[0],codeLocation:xt[1],location:ln()}},wo=function(ht,xt){return[ht+xt.join(""),ln()]},bo=function(ht,xt){return{type:"literal",value:ht,ignoreCase:xt!==null,location:ln()}},ko=function(ht){return ht.join("")},$o=function(ht){return ht.join("")},To=function(ht,xt,wt){return{type:"class",parts:xt.filter(Et=>Et!==""),inverted:ht!==null,ignoreCase:wt!==null,location:ln()}},Do=function(ht,xt){return ht.charCodeAt(0)>xt.charCodeAt(0)&&cr("Invalid character range: "+zo()+"."),[ht,xt]},Po=function(){return""},Bo=function(){return"\0"},Ro=function(){return"\b"},_o=function(){return"\f"},Mo=function(){return`
`},Fo=function(){return"\r"},Oo=function(){return"	"},Lo=function(){return"\v"},No=function(ht){return String.fromCharCode(parseInt(ht,16))},Io=function(ht){return String.fromCharCode(parseInt(ht,16))},Vo=function(){return{type:"any",location:ln()}},Ho=function(ht){return[ht,ln()]},jo=function(ht){return parseInt(ht,10)},gt=0,en=0,lr=[{line:1,column:1}],Nn=0,Cr=[],Tt=0,ur;if("startRule"in $){if(!($.startRule in tt))throw new Error(`Can't start parsing from rule "`+$.startRule+'".');nt=tt[$.startRule]}function zo(){return j.substring(en,gt)}function ln(){return hr(en,gt)}function cr(ht,xt){throw xt=xt!==void 0?xt:hr(en,gt),Go(ht,xt)}function qt(ht,xt){return{type:"literal",text:ht,ignoreCase:xt}}function Cn(ht,xt,wt){return{type:"class",parts:ht,inverted:xt,ignoreCase:wt}}function Uo(){return{type:"any"}}function Wo(){return{type:"end"}}function zn(ht){return{type:"other",description:ht}}function jr(ht){var xt=lr[ht],wt;if(xt)return xt;for(wt=ht-1;!lr[wt];)wt--;for(xt=lr[wt],xt={line:xt.line,column:xt.column};wt<ht;)j.charCodeAt(wt)===10?(xt.line++,xt.column=1):xt.column++,wt++;return lr[ht]=xt,xt}function hr(ht,xt,wt){var Et=jr(ht),Dt=jr(xt),Ot={source:et,start:{offset:ht,line:Et.line,column:Et.column},end:{offset:xt,line:Dt.line,column:Dt.column}};return wt&&et&&typeof et.offset=="function"&&(Ot.start=et.offset(Ot.start),Ot.end=et.offset(Ot.end)),Ot}function Nt(ht){gt<Nn||(gt>Nn&&(Nn=gt,Cr=[]),Cr.push(ht))}function Go(ht,xt){return new peg$SyntaxError(ht,null,null,xt)}function Yo(ht,xt,wt){return new peg$SyntaxError(peg$SyntaxError.buildMessage(ht,xt),ht,xt,wt)}function zr(){var ht,xt,wt,Et,Dt,Ot;if(ht=gt,rn(),xt=gt,wt=Ko(),wt!==_e?(Et=rn(),xt=wt):(gt=xt,xt=_e),xt===_e&&(xt=null),wt=gt,Et=Xo(),Et!==_e?(Dt=rn(),wt=Et):(gt=wt,wt=_e),wt===_e&&(wt=null),Et=[],Dt=gt,Ot=Ur(),Ot!==_e?(rn(),Dt=Ot):(gt=Dt,Dt=_e),Dt!==_e)for(;Dt!==_e;)Et.push(Dt),Dt=gt,Ot=Ur(),Ot!==_e?(rn(),Dt=Ot):(gt=Dt,Dt=_e);else Et=_e;return Et!==_e?(en=ht,ht=to(xt,wt,Et)):(gt=ht,ht=_e),ht}function Ko(){var ht,xt,wt,Et,Dt;return ht=gt,j.charCodeAt(gt)===123?(xt=rt,gt++):(xt=_e,Tt===0&&Nt(dn)),xt!==_e?(wt=nr(),wt!==_e?(j.charCodeAt(gt)===125?(Et=it,gt++):(Et=_e,Tt===0&&Nt(xn)),Et!==_e?(Dt=Br(),Dt!==_e?(en=ht,ht=no(wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function Xo(){var ht,xt,wt;return ht=gt,xt=nr(),xt!==_e?(wt=Br(),wt!==_e?(en=ht,ht=ro(xt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function Ur(){var ht,xt,wt,Et,Dt,Ot;return ht=gt,xt=pr(),xt!==_e?(rn(),wt=gt,Et=$r(),Et!==_e?(rn(),wt=Et):(gt=wt,wt=_e),wt===_e&&(wt=null),j.charCodeAt(gt)===61?(Et=st,gt++):(Et=_e,Tt===0&&Nt(Tn)),Et!==_e?(rn(),Dt=Ar(),Dt!==_e?(Ot=Br(),Ot!==_e?(en=ht,ht=io(xt,wt,Dt)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function Ar(){var ht,xt,wt,Et,Dt,Ot;if(ht=gt,xt=Er(),xt!==_e){for(wt=[],Et=gt,rn(),j.charCodeAt(gt)===47?(Dt=ot,gt++):(Dt=_e,Tt===0&&Nt(Bn)),Dt!==_e?(rn(),Ot=Er(),Ot!==_e?Et=Ot:(gt=Et,Et=_e)):(gt=Et,Et=_e);Et!==_e;)wt.push(Et),Et=gt,rn(),j.charCodeAt(gt)===47?(Dt=ot,gt++):(Dt=_e,Tt===0&&Nt(Bn)),Dt!==_e?(rn(),Ot=Er(),Ot!==_e?Et=Ot:(gt=Et,Et=_e)):(gt=Et,Et=_e);en=ht,ht=so(xt,wt)}else gt=ht,ht=_e;return ht}function Er(){var ht,xt,wt,Et;return ht=gt,xt=Qo(),xt!==_e?(wt=gt,rn(),Et=nr(),Et!==_e?wt=Et:(gt=wt,wt=_e),wt===_e&&(wt=null),en=ht,ht=oo(xt,wt)):(gt=ht,ht=_e),ht}function Qo(){var ht,xt,wt,Et,Dt;if(ht=gt,xt=Sr(),xt!==_e){for(wt=[],Et=gt,rn(),Dt=Sr(),Dt!==_e?Et=Dt:(gt=Et,Et=_e);Et!==_e;)wt.push(Et),Et=gt,rn(),Dt=Sr(),Dt!==_e?Et=Dt:(gt=Et,Et=_e);en=ht,ht=ao(xt,wt)}else gt=ht,ht=_e;return ht}function Sr(){var ht,xt,wt,Et;return ht=gt,xt=qo(),xt!==_e?(wt=Wr(),wt===_e&&(wt=null),Et=wr(),Et!==_e?(en=ht,ht=lo(xt,wt,Et)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=gt,xt=Wr(),xt!==_e?(wt=rn(),Et=wr(),Et!==_e?(en=ht,ht=uo(xt,Et)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=wr())),ht}function qo(){var ht,xt;return ht=gt,j.charCodeAt(gt)===64?(xt=at,gt++):(xt=_e,Tt===0&&Nt(un)),xt!==_e&&(en=ht,xt=co()),ht=xt,ht}function Wr(){var ht,xt,wt;return ht=gt,xt=pr(),xt!==_e?(rn(),j.charCodeAt(gt)===58?(wt=lt,gt++):(wt=_e,Tt===0&&Nt(Jn)),wt!==_e?(en=ht,ht=ho(xt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function wr(){var ht,xt,wt;return ht=gt,xt=Zo(),xt!==_e?(rn(),wt=Gr(),wt!==_e?(en=ht,ht=fo(xt,wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=Gr()),ht}function Zo(){var ht;return j.charCodeAt(gt)===36?(ht=ut,gt++):(ht=_e,Tt===0&&Nt(mn)),ht===_e&&(j.charCodeAt(gt)===38?(ht=ct,gt++):(ht=_e,Tt===0&&Nt(wn)),ht===_e&&(j.charCodeAt(gt)===33?(ht=ft,gt++):(ht=_e,Tt===0&&Nt(Ln)))),ht}function Gr(){var ht,xt,wt;return ht=gt,xt=kr(),xt!==_e?(rn(),wt=Jo(),wt!==_e?(en=ht,ht=po(xt,wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=na(),ht===_e&&(ht=kr())),ht}function Jo(){var ht;return j.charCodeAt(gt)===63?(ht=dt,gt++):(ht=_e,Tt===0&&Nt(Kn)),ht===_e&&(j.charCodeAt(gt)===42?(ht=mt,gt++):(ht=_e,Tt===0&&Nt(er)),ht===_e&&(j.charCodeAt(gt)===43?(ht=pt,gt++):(ht=_e,Tt===0&&Nt(vr)))),ht}function na(){var ht,xt,wt,Et,Dt,Ot,vn;return ht=gt,xt=kr(),xt!==_e?(rn(),j.charCodeAt(gt)===124?(wt=yt,gt++):(wt=_e,Tt===0&&Nt(rr)),wt!==_e?(rn(),Et=ga(),Et!==_e?(rn(),Dt=gt,j.charCodeAt(gt)===44?(Ot=vt,gt++):(Ot=_e,Tt===0&&Nt(Rn)),Ot!==_e?(rn(),vn=Ar(),vn!==_e?(rn(),Dt=vn):(gt=Dt,Dt=_e)):(gt=Dt,Dt=_e),Dt===_e&&(Dt=null),j.charCodeAt(gt)===124?(Ot=yt,gt++):(Ot=_e,Tt===0&&Nt(rr)),Ot!==_e?(en=ht,ht=go(xt,Et,Dt)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function ga(){var ht,xt,wt,Et;return ht=gt,xt=br(),xt===_e&&(xt=null),rn(),j.substr(gt,2)===Ct?(wt=Ct,gt+=2):(wt=_e,Tt===0&&Nt(tr)),wt!==_e?(rn(),Et=br(),Et===_e&&(Et=null),en=ht,ht=mo(xt,Et)):(gt=ht,ht=_e),ht===_e&&(ht=gt,xt=br(),xt!==_e&&(en=ht,xt=yo(xt)),ht=xt),ht}function br(){var ht,xt;return ht=gt,xt=Rl(),xt!==_e&&(en=ht,xt=vo(xt)),ht=xt,ht===_e&&(ht=gt,xt=pr(),xt!==_e&&(en=ht,xt=xo(xt)),ht=xt,ht===_e&&(ht=gt,xt=nr(),xt!==_e&&(en=ht,xt=Co(xt)),ht=xt)),ht}function kr(){var ht,xt,wt,Et;return ht=Al(),ht===_e&&(ht=El(),ht===_e&&(ht=Pl(),ht===_e&&(ht=xa(),ht===_e&&(ht=ba(),ht===_e&&(ht=gt,j.charCodeAt(gt)===40?(xt=At,gt++):(xt=_e,Tt===0&&Nt(ir)),xt!==_e?(rn(),wt=Ar(),wt!==_e?(rn(),j.charCodeAt(gt)===41?(Et=$t,gt++):(Et=_e,Tt===0&&Nt(xr)),Et!==_e?(en=ht,ht=Ao(wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e)))))),ht}function xa(){var ht,xt,wt,Et,Dt,Ot,vn,qn;return ht=gt,xt=pr(),xt!==_e?(wt=gt,Tt++,Et=gt,Dt=rn(),Ot=gt,vn=$r(),vn!==_e?(qn=rn(),vn=[vn,qn],Ot=vn):(gt=Ot,Ot=_e),Ot===_e&&(Ot=null),j.charCodeAt(gt)===61?(vn=st,gt++):(vn=_e,Tt===0&&Nt(Tn)),vn!==_e?(Dt=[Dt,Ot,vn],Et=Dt):(gt=Et,Et=_e),Tt--,Et===_e?wt=void 0:(gt=wt,wt=_e),wt!==_e?(en=ht,ht=Eo(xt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function ba(){var ht,xt,wt;return ht=gt,xt=$a(),xt!==_e?(rn(),wt=nr(),wt!==_e?(en=ht,ht=So(xt,wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function $a(){var ht;return j.charCodeAt(gt)===38?(ht=ct,gt++):(ht=_e,Tt===0&&Nt(wn)),ht===_e&&(j.charCodeAt(gt)===33?(ht=ft,gt++):(ht=_e,Tt===0&&Nt(Ln))),ht}function En(){var ht;return j.length>gt?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Fr)),ht}function fr(){var ht;return Tt++,j.charCodeAt(gt)===9?(ht=bt,gt++):(ht=_e,Tt===0&&Nt(ls)),ht===_e&&(j.charCodeAt(gt)===11?(ht=Bt,gt++):(ht=_e,Tt===0&&Nt(us)),ht===_e&&(j.charCodeAt(gt)===12?(ht=Rt,gt++):(ht=_e,Tt===0&&Nt(cs)),ht===_e&&(j.charCodeAt(gt)===32?(ht=St,gt++):(ht=_e,Tt===0&&Nt(hs)),ht===_e&&(j.charCodeAt(gt)===160?(ht=kt,gt++):(ht=_e,Tt===0&&Nt(fs)),ht===_e&&(j.charCodeAt(gt)===65279?(ht=Pt,gt++):(ht=_e,Tt===0&&Nt(ds)),ht===_e&&(ht=Ul())))))),Tt--,ht===_e&&Tt===0&&Nt(as),ht}function Un(){var ht;return Pn.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(ps)),ht}function dr(){var ht;return Tt++,j.charCodeAt(gt)===10?(ht=Mt,gt++):(ht=_e,Tt===0&&Nt(ms)),ht===_e&&(j.substr(gt,2)===Lt?(ht=Lt,gt+=2):(ht=_e,Tt===0&&Nt(ys)),ht===_e&&(j.charCodeAt(gt)===13?(ht=zt,gt++):(ht=_e,Tt===0&&Nt(vs)),ht===_e&&(j.charCodeAt(gt)===8232?(ht=Kt,gt++):(ht=_e,Tt===0&&Nt(xs)),ht===_e&&(j.charCodeAt(gt)===8233?(ht=Ut,gt++):(ht=_e,Tt===0&&Nt(Cs)))))),Tt--,ht===_e&&Tt===0&&Nt(gs),ht}function Yr(){var ht;return Tt++,ht=yl(),ht===_e&&(ht=Xr()),Tt--,ht===_e&&Tt===0&&Nt(As),ht}function yl(){var ht,xt,wt,Et,Dt,Ot;if(ht=gt,j.substr(gt,2)===It?(xt=It,gt+=2):(xt=_e,Tt===0&&Nt(Or)),xt!==_e){for(wt=[],Et=gt,Dt=gt,Tt++,j.substr(gt,2)===Vt?(Ot=Vt,gt+=2):(Ot=_e,Tt===0&&Nt(Xn)),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);Et!==_e;)wt.push(Et),Et=gt,Dt=gt,Tt++,j.substr(gt,2)===Vt?(Ot=Vt,gt+=2):(Ot=_e,Tt===0&&Nt(Xn)),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);j.substr(gt,2)===Vt?(Et=Vt,gt+=2):(Et=_e,Tt===0&&Nt(Xn)),Et!==_e?(xt=[xt,wt,Et],ht=xt):(gt=ht,ht=_e)}else gt=ht,ht=_e;return ht}function Kr(){var ht,xt,wt,Et,Dt,Ot;if(ht=gt,j.substr(gt,2)===It?(xt=It,gt+=2):(xt=_e,Tt===0&&Nt(Or)),xt!==_e){for(wt=[],Et=gt,Dt=gt,Tt++,j.substr(gt,2)===Vt?(Ot=Vt,gt+=2):(Ot=_e,Tt===0&&Nt(Xn)),Ot===_e&&(Ot=Un()),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);Et!==_e;)wt.push(Et),Et=gt,Dt=gt,Tt++,j.substr(gt,2)===Vt?(Ot=Vt,gt+=2):(Ot=_e,Tt===0&&Nt(Xn)),Ot===_e&&(Ot=Un()),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);j.substr(gt,2)===Vt?(Et=Vt,gt+=2):(Et=_e,Tt===0&&Nt(Xn)),Et!==_e?(xt=[xt,wt,Et],ht=xt):(gt=ht,ht=_e)}else gt=ht,ht=_e;return ht}function Xr(){var ht,xt,wt,Et,Dt,Ot;if(ht=gt,j.substr(gt,2)===jt?(xt=jt,gt+=2):(xt=_e,Tt===0&&Nt(Es)),xt!==_e){for(wt=[],Et=gt,Dt=gt,Tt++,Ot=Un(),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);Et!==_e;)wt.push(Et),Et=gt,Dt=gt,Tt++,Ot=Un(),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);xt=[xt,wt],ht=xt}else gt=ht,ht=_e;return ht}function pr(){var ht,xt,wt,Et;if(Tt++,ht=gt,xt=Qr(),xt!==_e){for(wt=[],Et=qr();Et!==_e;)wt.push(Et),Et=qr();en=ht,ht=wo(xt,wt)}else gt=ht,ht=_e;return Tt--,ht===_e&&(xt=_e,Tt===0&&Nt(Ss)),ht}function Qr(){var ht,xt,wt;return ht=xl(),ht===_e&&(j.charCodeAt(gt)===95?(ht=Yt,gt++):(ht=_e,Tt===0&&Nt(ws)),ht===_e&&(ht=gt,j.charCodeAt(gt)===92?(xt=Xt,gt++):(xt=_e,Tt===0&&Nt(Hn)),xt!==_e?(wt=ts(),wt!==_e?ht=wt:(gt=ht,ht=_e)):(gt=ht,ht=_e))),ht}function qr(){var ht;return ht=Qr(),ht===_e&&(j.charCodeAt(gt)===36?(ht=ut,gt++):(ht=_e,Tt===0&&Nt(mn)),ht===_e&&(ht=Cl(),ht===_e&&(ht=Vl(),ht===_e&&(ht=zl(),ht===_e&&(j.charCodeAt(gt)===8204?(ht=sn,gt++):(ht=_e,Tt===0&&Nt(bs)),ht===_e&&(j.charCodeAt(gt)===8205?(ht=on,gt++):(ht=_e,Tt===0&&Nt(ks)))))))),ht}function xl(){var ht;return ht=Ll(),ht===_e&&(ht=_l(),ht===_e&&(ht=Ol(),ht===_e&&(ht=Ml(),ht===_e&&(ht=Fl(),ht===_e&&(ht=Hl()))))),ht}function Cl(){var ht;return ht=Il(),ht===_e&&(ht=Nl()),ht}function Al(){var ht,xt,wt;return Tt++,ht=gt,xt=$r(),xt!==_e?(j.charCodeAt(gt)===105?(wt=hn,gt++):(wt=_e,Tt===0&&Nt(Lr)),wt===_e&&(wt=null),en=ht,ht=bo(xt,wt)):(gt=ht,ht=_e),Tt--,ht===_e&&(xt=_e,Tt===0&&Nt($s)),ht}function $r(){var ht,xt,wt,Et;if(Tt++,ht=gt,j.charCodeAt(gt)===34?(xt=cn,gt++):(xt=_e,Tt===0&&Nt(sr)),xt!==_e){for(wt=[],Et=Zr();Et!==_e;)wt.push(Et),Et=Zr();j.charCodeAt(gt)===34?(Et=cn,gt++):(Et=_e,Tt===0&&Nt(sr)),Et!==_e?(en=ht,ht=ko(wt)):(gt=ht,ht=_e)}else gt=ht,ht=_e;if(ht===_e)if(ht=gt,j.charCodeAt(gt)===39?(xt=An,gt++):(xt=_e,Tt===0&&Nt(or)),xt!==_e){for(wt=[],Et=Jr();Et!==_e;)wt.push(Et),Et=Jr();j.charCodeAt(gt)===39?(Et=An,gt++):(Et=_e,Tt===0&&Nt(or)),Et!==_e?(en=ht,ht=$o(wt)):(gt=ht,ht=_e)}else gt=ht,ht=_e;return Tt--,ht===_e&&(xt=_e,Tt===0&&Nt(Ts)),ht}function Zr(){var ht,xt,wt,Et;return ht=gt,xt=gt,wt=gt,Tt++,j.charCodeAt(gt)===34?(Et=cn,gt++):(Et=_e,Tt===0&&Nt(sr)),Et===_e&&(j.charCodeAt(gt)===92?(Et=Xt,gt++):(Et=_e,Tt===0&&Nt(Hn)),Et===_e&&(Et=Un())),Tt--,Et===_e?wt=void 0:(gt=wt,wt=_e),wt!==_e?(Et=En(),Et!==_e?(wt=[wt,Et],xt=wt):(gt=xt,xt=_e)):(gt=xt,xt=_e),xt!==_e?ht=j.substring(ht,gt):ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===92?(xt=Xt,gt++):(xt=_e,Tt===0&&Nt(Hn)),xt!==_e?(wt=Dr(),wt!==_e?ht=wt:(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=Tr())),ht}function Jr(){var ht,xt,wt,Et;return ht=gt,xt=gt,wt=gt,Tt++,j.charCodeAt(gt)===39?(Et=An,gt++):(Et=_e,Tt===0&&Nt(or)),Et===_e&&(j.charCodeAt(gt)===92?(Et=Xt,gt++):(Et=_e,Tt===0&&Nt(Hn)),Et===_e&&(Et=Un())),Tt--,Et===_e?wt=void 0:(gt=wt,wt=_e),wt!==_e?(Et=En(),Et!==_e?(wt=[wt,Et],xt=wt):(gt=xt,xt=_e)):(gt=xt,xt=_e),xt!==_e?ht=j.substring(ht,gt):ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===92?(xt=Xt,gt++):(xt=_e,Tt===0&&Nt(Hn)),xt!==_e?(wt=Dr(),wt!==_e?ht=wt:(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=Tr())),ht}function El(){var ht,xt,wt,Et,Dt,Ot;if(Tt++,ht=gt,j.charCodeAt(gt)===91?(xt=_n,gt++):(xt=_e,Tt===0&&Nt(Ps)),xt!==_e){for(j.charCodeAt(gt)===94?(wt=Wn,gt++):(wt=_e,Tt===0&&Nt(Bs)),wt===_e&&(wt=null),Et=[],Dt=_i(),Dt===_e&&(Dt=gr());Dt!==_e;)Et.push(Dt),Dt=_i(),Dt===_e&&(Dt=gr());j.charCodeAt(gt)===93?(Dt=Dn,gt++):(Dt=_e,Tt===0&&Nt(Nr)),Dt!==_e?(j.charCodeAt(gt)===105?(Ot=hn,gt++):(Ot=_e,Tt===0&&Nt(Lr)),Ot===_e&&(Ot=null),en=ht,ht=To(wt,Et,Ot)):(gt=ht,ht=_e)}else gt=ht,ht=_e;return Tt--,ht===_e&&(xt=_e,Tt===0&&Nt(Ds)),ht}function _i(){var ht,xt,wt,Et;return ht=gt,xt=gr(),xt!==_e?(j.charCodeAt(gt)===45?(wt=In,gt++):(wt=_e,Tt===0&&Nt(Rs)),wt!==_e?(Et=gr(),Et!==_e?(en=ht,ht=Do(xt,Et)):(gt=ht,ht=_e)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function gr(){var ht,xt,wt,Et;return ht=gt,xt=gt,wt=gt,Tt++,j.charCodeAt(gt)===93?(Et=Dn,gt++):(Et=_e,Tt===0&&Nt(Nr)),Et===_e&&(j.charCodeAt(gt)===92?(Et=Xt,gt++):(Et=_e,Tt===0&&Nt(Hn)),Et===_e&&(Et=Un())),Tt--,Et===_e?wt=void 0:(gt=wt,wt=_e),wt!==_e?(Et=En(),Et!==_e?(wt=[wt,Et],xt=wt):(gt=xt,xt=_e)):(gt=xt,xt=_e),xt!==_e?ht=j.substring(ht,gt):ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===92?(xt=Xt,gt++):(xt=_e,Tt===0&&Nt(Hn)),xt!==_e?(wt=Dr(),wt!==_e?ht=wt:(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=Tr())),ht}function Tr(){var ht,xt,wt;return ht=gt,j.charCodeAt(gt)===92?(xt=Xt,gt++):(xt=_e,Tt===0&&Nt(Hn)),xt!==_e?(wt=dr(),wt!==_e?(en=ht,ht=Po()):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function Dr(){var ht,xt,wt,Et;return ht=Sl(),ht===_e&&(ht=gt,j.charCodeAt(gt)===48?(xt=Vn,gt++):(xt=_e,Tt===0&&Nt(_s)),xt!==_e?(wt=gt,Tt++,Et=mr(),Tt--,Et===_e?wt=void 0:(gt=wt,wt=_e),wt!==_e?(en=ht,ht=Bo()):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht===_e&&(ht=Dl(),ht===_e&&(ht=ts()))),ht}function Sl(){var ht;return ht=es(),ht===_e&&(ht=$l()),ht}function es(){var ht,xt;return j.charCodeAt(gt)===39?(ht=An,gt++):(ht=_e,Tt===0&&Nt(or)),ht===_e&&(j.charCodeAt(gt)===34?(ht=cn,gt++):(ht=_e,Tt===0&&Nt(sr)),ht===_e&&(j.charCodeAt(gt)===92?(ht=Xt,gt++):(ht=_e,Tt===0&&Nt(Hn)),ht===_e&&(ht=gt,j.charCodeAt(gt)===98?(xt=Mn,gt++):(xt=_e,Tt===0&&Nt(Ms)),xt!==_e&&(en=ht,xt=Ro()),ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===102?(xt=bn,gt++):(xt=_e,Tt===0&&Nt(Fs)),xt!==_e&&(en=ht,xt=_o()),ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===110?(xt=jn,gt++):(xt=_e,Tt===0&&Nt(Os)),xt!==_e&&(en=ht,xt=Mo()),ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===114?(xt=Gn,gt++):(xt=_e,Tt===0&&Nt(Ls)),xt!==_e&&(en=ht,xt=Fo()),ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===116?(xt=Yn,gt++):(xt=_e,Tt===0&&Nt(Ns)),xt!==_e&&(en=ht,xt=Oo()),ht=xt,ht===_e&&(ht=gt,j.charCodeAt(gt)===118?(xt=Fn,gt++):(xt=_e,Tt===0&&Nt(Is)),xt!==_e&&(en=ht,xt=Lo()),ht=xt)))))))),ht}function $l(){var ht,xt,wt,Et;return ht=gt,xt=gt,wt=gt,Tt++,Et=Tl(),Et===_e&&(Et=Un()),Tt--,Et===_e?wt=void 0:(gt=wt,wt=_e),wt!==_e?(Et=En(),Et!==_e?(wt=[wt,Et],xt=wt):(gt=xt,xt=_e)):(gt=xt,xt=_e),xt!==_e?ht=j.substring(ht,gt):ht=xt,ht}function Tl(){var ht;return ht=es(),ht===_e&&(ht=mr(),ht===_e&&(j.charCodeAt(gt)===120?(ht=On,gt++):(ht=_e,Tt===0&&Nt(Ir)),ht===_e&&(j.charCodeAt(gt)===117?(ht=kn,gt++):(ht=_e,Tt===0&&Nt(Vr))))),ht}function Dl(){var ht,xt,wt,Et,Dt,Ot;return ht=gt,j.charCodeAt(gt)===120?(xt=On,gt++):(xt=_e,Tt===0&&Nt(Ir)),xt!==_e?(wt=gt,Et=gt,Dt=Qn(),Dt!==_e?(Ot=Qn(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e),Et!==_e?wt=j.substring(wt,gt):wt=Et,wt!==_e?(en=ht,ht=No(wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function ts(){var ht,xt,wt,Et,Dt,Ot,vn,qn;return ht=gt,j.charCodeAt(gt)===117?(xt=kn,gt++):(xt=_e,Tt===0&&Nt(Vr)),xt!==_e?(wt=gt,Et=gt,Dt=Qn(),Dt!==_e?(Ot=Qn(),Ot!==_e?(vn=Qn(),vn!==_e?(qn=Qn(),qn!==_e?(Dt=[Dt,Ot,vn,qn],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e)):(gt=Et,Et=_e)):(gt=Et,Et=_e),Et!==_e?wt=j.substring(wt,gt):wt=Et,wt!==_e?(en=ht,ht=Io(wt)):(gt=ht,ht=_e)):(gt=ht,ht=_e),ht}function mr(){var ht;return gn.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Vs)),ht}function Qn(){var ht;return _t.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Hs)),ht}function Pl(){var ht,xt;return ht=gt,j.charCodeAt(gt)===46?(xt=Sn,gt++):(xt=_e,Tt===0&&Nt(js)),xt!==_e&&(en=ht,xt=Vo()),ht=xt,ht}function nr(){var ht,xt,wt,Et;return Tt++,ht=gt,j.charCodeAt(gt)===123?(xt=rt,gt++):(xt=_e,Tt===0&&Nt(dn)),xt!==_e?(wt=Bl(),j.charCodeAt(gt)===125?(Et=it,gt++):(Et=_e,Tt===0&&Nt(xn)),Et!==_e?ht=wt:(gt=ht,ht=_e)):(gt=ht,ht=_e),Tt--,ht===_e&&(xt=_e,Tt===0&&Nt(zs)),ht}function Bl(){var ht,xt;return ht=gt,xt=Pr(),en=ht,xt=Ho(xt),ht=xt,ht}function Pr(){var ht,xt,wt,Et,Dt,Ot;if(ht=gt,xt=[],wt=[],Et=gt,Dt=gt,Tt++,Ft.test(j.charAt(gt))?(Ot=j.charAt(gt),gt++):(Ot=_e,Tt===0&&Nt(ar)),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e),Et!==_e)for(;Et!==_e;)wt.push(Et),Et=gt,Dt=gt,Tt++,Ft.test(j.charAt(gt))?(Ot=j.charAt(gt),gt++):(Ot=_e,Tt===0&&Nt(ar)),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);else wt=_e;for(wt===_e&&(wt=gt,j.charCodeAt(gt)===123?(Et=rt,gt++):(Et=_e,Tt===0&&Nt(dn)),Et!==_e?(Dt=Pr(),j.charCodeAt(gt)===125?(Ot=it,gt++):(Ot=_e,Tt===0&&Nt(xn)),Ot!==_e?(Et=[Et,Dt,Ot],wt=Et):(gt=wt,wt=_e)):(gt=wt,wt=_e));wt!==_e;){if(xt.push(wt),wt=[],Et=gt,Dt=gt,Tt++,Ft.test(j.charAt(gt))?(Ot=j.charAt(gt),gt++):(Ot=_e,Tt===0&&Nt(ar)),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e),Et!==_e)for(;Et!==_e;)wt.push(Et),Et=gt,Dt=gt,Tt++,Ft.test(j.charAt(gt))?(Ot=j.charAt(gt),gt++):(Ot=_e,Tt===0&&Nt(ar)),Tt--,Ot===_e?Dt=void 0:(gt=Dt,Dt=_e),Dt!==_e?(Ot=En(),Ot!==_e?(Dt=[Dt,Ot],Et=Dt):(gt=Et,Et=_e)):(gt=Et,Et=_e);else wt=_e;wt===_e&&(wt=gt,j.charCodeAt(gt)===123?(Et=rt,gt++):(Et=_e,Tt===0&&Nt(dn)),Et!==_e?(Dt=Pr(),j.charCodeAt(gt)===125?(Ot=it,gt++):(Ot=_e,Tt===0&&Nt(xn)),Ot!==_e?(Et=[Et,Dt,Ot],wt=Et):(gt=wt,wt=_e)):(gt=wt,wt=_e))}return ht=j.substring(ht,gt),ht}function Rl(){var ht,xt,wt,Et;if(ht=gt,xt=gt,wt=[],Et=mr(),Et!==_e)for(;Et!==_e;)wt.push(Et),Et=mr();else wt=_e;return wt!==_e?xt=j.substring(xt,gt):xt=wt,xt!==_e&&(en=ht,xt=jo(xt)),ht=xt,ht}function _l(){var ht;return Ht.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Us)),ht}function Ml(){var ht;return Gt.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Ws)),ht}function Fl(){var ht;return Wt.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Gs)),ht}function Ol(){var ht;return Jt.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Ys)),ht}function Ll(){var ht;return Zt.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Ks)),ht}function Nl(){var ht;return tn.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Xs)),ht}function Il(){var ht;return Qt.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Qs)),ht}function Vl(){var ht;return fn.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(qs)),ht}function Hl(){var ht;return nn.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Zs)),ht}function zl(){var ht;return an.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(Js)),ht}function Ul(){var ht;return yn.test(j.charAt(gt))?(ht=j.charAt(gt),gt++):(ht=_e,Tt===0&&Nt(eo)),ht}function rn(){var ht,xt;for(ht=[],xt=fr(),xt===_e&&(xt=dr(),xt===_e&&(xt=Yr()));xt!==_e;)ht.push(xt),xt=fr(),xt===_e&&(xt=dr(),xt===_e&&(xt=Yr()));return ht}function Wl(){var ht,xt;for(ht=[],xt=fr(),xt===_e&&(xt=Kr());xt!==_e;)ht.push(xt),xt=fr(),xt===_e&&(xt=Kr());return ht}function Br(){var ht,xt,wt,Et;if(ht=[],xt=gt,wt=rn(),j.charCodeAt(gt)===59?(Et=$n,gt++):(Et=_e,Tt===0&&Nt(Hr)),Et!==_e?(wt=[wt,Et],xt=wt):(gt=xt,xt=_e),xt!==_e)for(;xt!==_e;)ht.push(xt),xt=gt,wt=rn(),j.charCodeAt(gt)===59?(Et=$n,gt++):(Et=_e,Tt===0&&Nt(Hr)),Et!==_e?(wt=[wt,Et],xt=wt):(gt=xt,xt=_e);else ht=_e;return ht===_e&&(ht=gt,xt=Wl(),wt=Xr(),wt===_e&&(wt=null),Et=dr(),Et!==_e?(xt=[xt,wt,Et],ht=xt):(gt=ht,ht=_e),ht===_e&&(ht=gt,xt=rn(),wt=Gl(),wt!==_e?(xt=[xt,wt],ht=xt):(gt=ht,ht=_e))),ht}function Gl(){var ht,xt;return ht=gt,Tt++,j.length>gt?(xt=j.charAt(gt),gt++):(xt=_e,Tt===0&&Nt(Fr)),Tt--,xt===_e?ht=void 0:(gt=ht,ht=_e),ht}const Yl=$.reservedWords||[];if(ur=nt(),ur!==_e&&gt===j.length)return ur;throw ur!==_e&&gt<j.length&&Nt(Wo()),Yo(Cr,Nn<j.length?j.charAt(Nn):null,Nn<j.length?hr(Nn,Nn+1):hr(Nn,Nn))}var parser$1={SyntaxError:peg$SyntaxError,parse:peg$parse};const GrammarError=grammarError,GrammarLocation=grammarLocation,compiler=compiler_1,parser=parser$1,VERSION=version,RESERVED_WORDS=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],peg={VERSION,RESERVED_WORDS,GrammarError,GrammarLocation,parser,compiler,generate(j,$){$=$!==void 0?$:{};function _e(nt){const rt={};return Object.keys(nt).forEach(it=>{rt[it]=nt[it].slice()}),rt}const et="plugins"in $?$.plugins:[],tt={parser:peg.parser,passes:_e(peg.compiler.passes),reservedWords:peg.RESERVED_WORDS.slice()};return et.forEach(nt=>{nt.use(tt,$)}),peg.compiler.compile(tt.parser.parse(j,{grammarSource:$.grammarSource,reservedWords:tt.reservedWords}),tt.passes,$)}};var peg_1=peg;const peggy=getDefaultExportFromCjs(peg_1),tocLangGrammarUrl="data:application/octet-stream;base64,Ly8gRGVidWcgd2l0aCBQZWdneUpzIHNhbmRib3gKLy8gaHR0cHM6Ly9wZWdneWpzLm9yZy9vbmxpbmUuaHRtbAoKewogIGZ1bmN0aW9uIG1ha2VJbnRlZ2VyKG8pIHsKICAgIHJldHVybiBwYXJzZUludChvLmpvaW4oIiIpLCAxMCk7CiAgfQp9CgpzdGFydAogID0gc3RhdGVtZW50OnN0YXRlbWVudD8gbW9yZVN0YXRlbWVudHM6KEVPTCBfIEBzdGF0ZW1lbnQpKiBFT0w/IF8KewogIGNvbnN0IHN0YXRlbWVudHMgPSBzdGF0ZW1lbnQgPyBbc3RhdGVtZW50LCAuLi5tb3JlU3RhdGVtZW50c10gOiBtb3JlU3RhdGVtZW50czsKICByZXR1cm4gewogICAgc3RhdGVtZW50czogc3RhdGVtZW50cwogIH07Cn0KCnN0YXRlbWVudCA9IGNvbW1lbnRMaW5lIC8gbm9kZVN0YXRlbWVudCAvIGVkZ2VTdGF0ZW1lbnQKCmNvbW1lbnRMaW5lID0gXyAiIyIgdGV4dDooW15cblxyXSopCnsKICByZXR1cm4gewogICAgdHlwZTogImNvbW1lbnQiLAogICAgdGV4dDogdGV4dC5qb2luKCIiKQogIH07Cn0KCm5vZGVTdGF0ZW1lbnQgPSBfIGlkZW50OmlkZW50IF8gbGFiZWw6Y29sb25MYWJlbCBfIHBhcmFtczpwYXJhbUJsb2NrPyBfCiAgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogIm5vZGUiLAogICAgICBpZDogaWRlbnQsCiAgICAgIHRleHQ6IGxhYmVsLAogICAgICBwYXJhbXM6IHBhcmFtcyB8fCB7fQogICAgfTsKICB9Cgpjb2xvbkxhYmVsID0gIjoiIF9fIGxhYmVsOmxhYmVsCiAgewogICAgcmV0dXJuIGxhYmVsCiAgfQoKZWRnZVN0YXRlbWVudCA9IGxlZnRFZGdlU3RhdGVtZW50IC8gcmlnaHRFZGdlU3RhdGVtZW50IC8gYmlEaXJFZGdlU3RhdGVtZW50CgpsZWZ0RWRnZVN0YXRlbWVudCA9IF8gIHRvSWQ6aWRlbnQgXyAiPC0iIF8gZnJvbUlkczppZGVudHwuLiwgXyAiJiYiIF98IF8gbGFiZWw6Y29sb25MYWJlbD8KICB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAiZWRnZSIsCiAgICAgIHRvSWQ6IHRvSWQsCiAgICAgIHRleHQ6IGxhYmVsIHx8IHVuZGVmaW5lZCwKICAgICAgZnJvbUlkczogZnJvbUlkcwogICAgfTsKICB9CgpyaWdodEVkZ2VTdGF0ZW1lbnQgPSBfICBmcm9tSWRzOmlkZW50fC4uLCBfICImJiIgX3wgXyAiLT4iIF8gdG9JZDppZGVudCBfIGxhYmVsOmNvbG9uTGFiZWw/CiAgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogImVkZ2UiLAogICAgICB0b0lkOiB0b0lkLAogICAgICB0ZXh0OiBsYWJlbCB8fCB1bmRlZmluZWQsCiAgICAgIGZyb21JZHM6IGZyb21JZHMKICAgIH07CiAgfQoKYmlEaXJFZGdlU3RhdGVtZW50ID0gXyAgZnJvbUlkOmlkZW50IF8gIi0tIiBfIHRvSWQ6aWRlbnQgXyBsYWJlbDpjb2xvbkxhYmVsPwogIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICJlZGdlIiwKICAgICAgdG9JZDogdG9JZCwKICAgICAgdGV4dDogbGFiZWwgfHwgdW5kZWZpbmVkLAogICAgICBmcm9tSWRzOiBbZnJvbUlkXSwKICAgICAgYmlEaXJlY3Rpb25hbDogdHJ1ZQogICAgfTsKICB9CgoKcGFyYW1CbG9jayA9ICJ7IiAgXyBFT0w/IF8gcGFyYW1zOnBhcmFtfC4uLCBfICJFT0wiIF98ICJ9IiAKewoJcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhwYXJhbXMpOwp9CgpwYXJhbSA9IGlkZW50OmlkZW50IF8gJzonIF8gZXhwcmVzc2lvbjoobnVtL2xhYmVsKSBfIEVPTD8gXwp7CglyZXR1cm4gW2lkZW50LCBleHByZXNzaW9uXTsKfQoKbnVtID0gIG51bTooWzAtOV0rKQp7IHJldHVybiBtYWtlSW50ZWdlcihudW0pOyB9CgppZGVudCA9IGlkOihbYS16QS1aMC05XyddKykKeyByZXR1cm4gaWQuam9pbigiIik7IH0KCmxhYmVsID0gc3RyOnN0cmluZyAvIHRleHQ6KFtee31cbl0qKQp7IHJldHVybiB0ZXh0LmpvaW4oIiIpLnRyaW0oKTsgfQoKc3RyaW5nID0gIlwiIiB0ZXh0OihbXiJdKikgIlwiIgp7IHJldHVybiB0ZXh0LmpvaW4oIiIpOyB9CgpFT0wKICA9IFsgXHRdKiBbXG5ccl0rCgpfICJvcHRpb25hbCB3aGl0ZXNwYWNlIgogID0gWyBcdF0qCgpfXyAid2hpdGVzcGFjZSIKICA9IFsgXHRdKwo=",loadFile=async j=>await(await fetch(j)).text(),tocLangParserPromise=loadFile(tocLangGrammarUrl).then(j=>peggy.generate(j)),parsersPromise=Promise.all([tocLangParserPromise]).then(([j])=>({conflict:j,goal:j,problem:j})),isGoalNodeStatement=j=>j.type==="node"&&normalizeId(j.id)==="goal",normalizeId=j=>j&&j.toLowerCase()==="goal"?"Goal":j,parseGoalTreeSemantics=j=>{const $=new Map;$.set("Goal",{key:"Goal",label:"",annotation:"G"});const _e=[],et=j.statements.find(isGoalNodeStatement);return et&&($.get("Goal").label=et.text),j.statements.filter(tt=>tt.type==="node").forEach(tt=>{const nt={key:tt.id,label:tt.text};tt.params.class&&(nt.annotation=tt.params.class),tt.id==="Goal"&&(nt.annotation="G"),(tt.params.status||tt.params.status===0)&&(nt.statusPercentage=tt.params.status),$.set(tt.id,nt)}),j.statements.filter(tt=>tt.type==="edge").forEach(tt=>{const nt=tt.toId;if(!$.has(nt))throw new Error(`Node ${nt} not found`);if(tt.fromIds.length!==1)throw new Error("Edges must have exactly one 'from' node in a Goal Tree");const rt=tt.fromIds[0];if(!$.has(rt))throw new Error(`Requirement ${rt} not found`);nt==="Goal"&&($.get(rt).annotation="CSF"),_e.push({from:rt,to:nt})}),{nodes:$,edges:_e,rankdir:"BT"}},parseProblemTreeSemantics=j=>{const $=new Map,_e=[],et=tt=>{var rt,it,st;const nt=/^(UDE|FOL|DE)/i;if(typeof((rt=tt.params)==null?void 0:rt.class)=="string"&&((st=(it=tt.params)==null?void 0:it.class)!=null&&st.match(nt)))return tt.params.class.match(nt)[0].toUpperCase()};return j.statements.filter(tt=>tt.type==="node").forEach(tt=>{$.set(tt.id,{annotation:et(tt),key:tt.id,label:tt.text})}),j.statements.filter(tt=>tt.type==="edge").forEach(tt=>{const nt=tt.toId;let rt=nt;if(tt.fromIds.length>1){const it=tt.fromIds.join("_")+"_cause_"+nt;rt=it,$.set(it,{key:it,label:"AND",intermediate:!0}),_e.push({from:it,to:nt})}for(const it of tt.fromIds){if(!$.has(it))throw new Error(`Cause ${it} not declared`);if(!$.has(nt))throw new Error(`Effect ${nt} not declared`);_e.push({from:it,to:rt})}}),{nodes:$,edges:_e,rankdir:"BT"}},normalizeAstIds=j=>{const{statements:$,..._e}=j;return{statements:$.map(tt=>{const{id:nt,fromIds:rt,toId:it,...st}=tt,ot={...st};return nt&&(ot.id=normalizeId(nt)),it&&(ot.toId=normalizeId(it)),rt&&(ot.fromIds=rt.map(normalizeId)),ot}),..._e}},parseTextToAst=async j=>{if(typeof j!="string")throw Error("Code missing");const $=j.match(/\btype:\s*(\w+)\b/);if(!$)throw Error("Type declaration missing");const _e=$[1];if(["problem","conflict","goal"].includes(_e)){const et=_e,nt=(await parsersPromise)[_e].parse(j);return{ast:{statements:normalizeAstIds(nt).statements.filter(st=>st.id!=="type")},type:et}}else throw Error(`Invalid type '${_e}'. Must be one of: problem, conflict, goal`)},completions={idents:[]};function Draw(){const[j,$]=React.useState(null),[_e,et]=React.useState(null),[tt,nt]=React.useState(""),[rt,it]=React.useState(),[st,ot]=React.useState(),at=async lt=>{try{const{ast:ut,type:ct}=await parseTextToAst(lt);if(console.log("diagramType",ct),ct==="goal"){const ft=parseGoalTreeSemantics(ut);et(ft),completions.idents=Array.from(ft.nodes.keys())}else if(ct==="problem"){const ft=parseProblemTreeSemantics(ut);et(ft),completions.idents=Array.from(ft.nodes.keys())}else et(null),ot(null),completions.idents=["A","B","C","D","D'"];console.log(ut),$(ut),ot(ct),nt("")}catch(ut){console.error(ut),nt(ut.toString())}};return jsxRuntimeExports.jsxs(X,{children:[jsxRuntimeExports.jsx(_,{minSize:50,children:jsxRuntimeExports.jsx(EditorContainer,{onChange:at,rows:20,text:rt,setText:it,error:tt,completions})}),jsxRuntimeExports.jsx(ne,{size:4,style:{background:"#ddd",cursor:"col-resize"}}),jsxRuntimeExports.jsx(_,{minSize:100,children:jsxRuntimeExports.jsx(Diagram,{ast:j,semantics:_e,diagramType:st})})]})}function About(j){return jsxRuntimeExports.jsxs("div",{id:"about-page",children:[jsxRuntimeExports.jsx("h1",{children:"TOC-Lang"}),jsxRuntimeExports.jsxs("p",{children:["Generate"," ",jsxRuntimeExports.jsx("a",{href:"https://en.wikipedia.org/wiki/Theory_of_constraints",children:"Theory of Constraints"})," ","diagrams from text-based notation. Learn more"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/raymyers/toc-lang/",children:"on GitHub!"})]})]})}const router=createHashRouter([{path:"/",element:jsxRuntimeExports.jsx(App,{}),errorElement:jsxRuntimeExports.jsx(ErrorPage,{}),children:[{index:!0,loader:async()=>redirect("/draw/goal-tree")},{path:"draw",element:jsxRuntimeExports.jsx(Draw,{})},{path:"draw/:diagramType",loader:async()=>redirect("/draw")},{path:"about",element:jsxRuntimeExports.jsx(About,{})}]}],{basename:"/"}),rootResetElt=document.getElementById("root-reset");rootResetElt&&client.createRoot(rootResetElt).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(RouterProvider,{router})}))});export default Zl();
