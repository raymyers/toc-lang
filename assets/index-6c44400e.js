var Wl=($,g)=>()=>(g||$((g={exports:{}}).exports,g),g.exports);var Gl=Wl((exports,module)=>{function _mergeNamespaces($,g){for(var j=0;j<g.length;j++){const _e=g[j];if(typeof _e!="string"&&!Array.isArray(_e)){for(const et in _e)if(et!=="default"&&!(et in $)){const tt=Object.getOwnPropertyDescriptor(_e,et);tt&&Object.defineProperty($,et,tt.get?tt:{enumerable:!0,get:()=>_e[et]})}}}return Object.freeze(Object.defineProperty($,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const et of document.querySelectorAll('link[rel="modulepreload"]'))_e(et);new MutationObserver(et=>{for(const tt of et)if(tt.type==="childList")for(const nt of tt.addedNodes)nt.tagName==="LINK"&&nt.rel==="modulepreload"&&_e(nt)}).observe(document,{childList:!0,subtree:!0});function j(et){const tt={};return et.integrity&&(tt.integrity=et.integrity),et.referrerPolicy&&(tt.referrerPolicy=et.referrerPolicy),et.crossOrigin==="use-credentials"?tt.credentials="include":et.crossOrigin==="anonymous"?tt.credentials="omit":tt.credentials="same-origin",tt}function _e(et){if(et.ep)return;et.ep=!0;const tt=j(et);fetch(et.href,tt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1($){return $===null||typeof $!="object"?null:($=z$1&&$[z$1]||$["@@iterator"],typeof $=="function"?$:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$1={};function E$1($,g,j){this.props=$,this.context=g,this.refs=D$1,this.updater=j||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function($,g){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,g,"setState")};E$1.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1($,g,j){this.props=$,this.context=g,this.refs=D$1,this.updater=j||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1($,g,j){var _e,et={},tt=null,nt=null;if(g!=null)for(_e in g.ref!==void 0&&(nt=g.ref),g.key!==void 0&&(tt=""+g.key),g)J.call(g,_e)&&!L$1.hasOwnProperty(_e)&&(et[_e]=g[_e]);var rt=arguments.length-2;if(rt===1)et.children=j;else if(1<rt){for(var it=Array(rt),st=0;st<rt;st++)it[st]=arguments[st+2];et.children=it}if($&&$.defaultProps)for(_e in rt=$.defaultProps,rt)et[_e]===void 0&&(et[_e]=rt[_e]);return{$$typeof:l$3,type:$,key:tt,ref:nt,props:et,_owner:K$1.current}}function N$2($,g){return{$$typeof:l$3,type:$.type,key:g,ref:$.ref,props:$.props,_owner:$._owner}}function O$2($){return typeof $=="object"&&$!==null&&$.$$typeof===l$3}function escape($){var g={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(j){return g[j]})}var P$2=/\/+/g;function Q$1($,g){return typeof $=="object"&&$!==null&&$.key!=null?escape(""+$.key):g.toString(36)}function R$1($,g,j,_e,et){var tt=typeof $;(tt==="undefined"||tt==="boolean")&&($=null);var nt=!1;if($===null)nt=!0;else switch(tt){case"string":case"number":nt=!0;break;case"object":switch($.$$typeof){case l$3:case n$3:nt=!0}}if(nt)return nt=$,et=et(nt),$=_e===""?"."+Q$1(nt,0):_e,I$1(et)?(j="",$!=null&&(j=$.replace(P$2,"$&/")+"/"),R$1(et,g,j,"",function(st){return st})):et!=null&&(O$2(et)&&(et=N$2(et,j+(!et.key||nt&&nt.key===et.key?"":(""+et.key).replace(P$2,"$&/")+"/")+$)),g.push(et)),1;if(nt=0,_e=_e===""?".":_e+":",I$1($))for(var rt=0;rt<$.length;rt++){tt=$[rt];var it=_e+Q$1(tt,rt);nt+=R$1(tt,g,j,it,et)}else if(it=A$1($),typeof it=="function")for($=it.call($),rt=0;!(tt=$.next()).done;)tt=tt.value,it=_e+Q$1(tt,rt++),nt+=R$1(tt,g,j,it,et);else if(tt==="object")throw g=String($),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return nt}function S$1($,g,j){if($==null)return $;var _e=[],et=0;return R$1($,_e,"","",function(tt){return g.call(j,tt,et++)}),_e}function T$2($){if($._status===-1){var g=$._result;g=g(),g.then(function(j){($._status===0||$._status===-1)&&($._status=1,$._result=j)},function(j){($._status===0||$._status===-1)&&($._status=2,$._result=j)}),$._status===-1&&($._status=0,$._result=g)}if($._status===1)return $._result.default;throw $._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function($,g,j){S$1($,function(){g.apply(this,arguments)},j)},count:function($){var g=0;return S$1($,function(){g++}),g},toArray:function($){return S$1($,function(g){return g})||[]},only:function($){if(!O$2($))throw Error("React.Children.only expected to receive a single React element child.");return $}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function($,g,j){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var _e=C$2({},$.props),et=$.key,tt=$.ref,nt=$._owner;if(g!=null){if(g.ref!==void 0&&(tt=g.ref,nt=K$1.current),g.key!==void 0&&(et=""+g.key),$.type&&$.type.defaultProps)var rt=$.type.defaultProps;for(it in g)J.call(g,it)&&!L$1.hasOwnProperty(it)&&(_e[it]=g[it]===void 0&&rt!==void 0?rt[it]:g[it])}var it=arguments.length-2;if(it===1)_e.children=j;else if(1<it){rt=Array(it);for(var st=0;st<it;st++)rt[st]=arguments[st+2];_e.children=rt}return{$$typeof:l$3,type:$.type,key:et,ref:tt,props:_e,_owner:nt}};react_production_min.createContext=function($){return $={$$typeof:u$2,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:t$3,_context:$},$.Consumer=$};react_production_min.createElement=M$1;react_production_min.createFactory=function($){var g=M$1.bind(null,$);return g.type=$,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function($){return{$$typeof:v$3,render:$}};react_production_min.isValidElement=O$2;react_production_min.lazy=function($){return{$$typeof:y$3,_payload:{_status:-1,_result:$},_init:T$2}};react_production_min.memo=function($,g){return{$$typeof:x$1,type:$,compare:g===void 0?null:g}};react_production_min.startTransition=function($){var g=V$1.transition;V$1.transition={};try{$()}finally{V$1.transition=g}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function($,g){return U$1.current.useCallback($,g)};react_production_min.useContext=function($){return U$1.current.useContext($)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function($){return U$1.current.useDeferredValue($)};react_production_min.useEffect=function($,g){return U$1.current.useEffect($,g)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function($,g,j){return U$1.current.useImperativeHandle($,g,j)};react_production_min.useInsertionEffect=function($,g){return U$1.current.useInsertionEffect($,g)};react_production_min.useLayoutEffect=function($,g){return U$1.current.useLayoutEffect($,g)};react_production_min.useMemo=function($,g){return U$1.current.useMemo($,g)};react_production_min.useReducer=function($,g,j){return U$1.current.useReducer($,g,j)};react_production_min.useRef=function($){return U$1.current.useRef($)};react_production_min.useState=function($){return U$1.current.useState($)};react_production_min.useSyncExternalStore=function($,g,j){return U$1.current.useSyncExternalStore($,g,j)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$1=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q($,g,j){var _e,et={},tt=null,nt=null;j!==void 0&&(tt=""+j),g.key!==void 0&&(tt=""+g.key),g.ref!==void 0&&(nt=g.ref);for(_e in g)m$4.call(g,_e)&&!p$3.hasOwnProperty(_e)&&(et[_e]=g[_e]);if($&&$.defaultProps)for(_e in g=$.defaultProps,g)et[_e]===void 0&&(et[_e]=g[_e]);return{$$typeof:k$1,type:$,key:tt,ref:nt,props:et,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;/**
 * @remix-run/router v1.3.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function($){for(var g=1;g<arguments.length;g++){var j=arguments[g];for(var _e in j)Object.prototype.hasOwnProperty.call(j,_e)&&($[_e]=j[_e])}return $},_extends$3.apply(this,arguments)}var Action;(function($){$.Pop="POP",$.Push="PUSH",$.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory($){$===void 0&&($={});function g(_e,et){let{pathname:tt,search:nt,hash:rt}=_e.location;return createLocation("",{pathname:tt,search:nt,hash:rt},et.state&&et.state.usr||null,et.state&&et.state.key||"default")}function j(_e,et){return typeof et=="string"?et:createPath(et)}return getUrlBasedHistory(g,j,null,$)}function invariant($,g){if($===!1||$===null||typeof $>"u")throw new Error(g)}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState($,g){return{usr:$.state,key:$.key,idx:g}}function createLocation($,g,j,_e){return j===void 0&&(j=null),_extends$3({pathname:typeof $=="string"?$:$.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:j,key:g&&g.key||_e||createKey()})}function createPath($){let{pathname:g="/",search:j="",hash:_e=""}=$;return j&&j!=="?"&&(g+=j.charAt(0)==="?"?j:"?"+j),_e&&_e!=="#"&&(g+=_e.charAt(0)==="#"?_e:"#"+_e),g}function parsePath($){let g={};if($){let j=$.indexOf("#");j>=0&&(g.hash=$.substr(j),$=$.substr(0,j));let _e=$.indexOf("?");_e>=0&&(g.search=$.substr(_e),$=$.substr(0,_e)),$&&(g.pathname=$)}return g}function getUrlBasedHistory($,g,j,_e){_e===void 0&&(_e={});let{window:et=document.defaultView,v5Compat:tt=!1}=_e,nt=et.history,rt=Action.Pop,it=null,st=ot();st==null&&(st=0,nt.replaceState(_extends$3({},nt.state,{idx:st}),""));function ot(){return(nt.state||{idx:null}).idx}function at(){rt=Action.Pop;let gt=ot(),dt=gt==null?null:gt-st;st=gt,it&&it({action:rt,location:ft.location,delta:dt})}function lt(gt,dt){rt=Action.Push;let mt=createLocation(ft.location,gt,dt);j&&j(mt,gt),st=ot()+1;let yt=getHistoryState(mt,st),Et=ft.createHref(mt);try{nt.pushState(yt,"",Et)}catch{et.location.assign(Et)}tt&&it&&it({action:rt,location:ft.location,delta:1})}function ut(gt,dt){rt=Action.Replace;let mt=createLocation(ft.location,gt,dt);j&&j(mt,gt),st=ot();let yt=getHistoryState(mt,st),Et=ft.createHref(mt);nt.replaceState(yt,"",Et),tt&&it&&it({action:rt,location:ft.location,delta:0})}function ht(gt){let dt=et.location.origin!=="null"?et.location.origin:et.location.href,mt=typeof gt=="string"?gt:createPath(gt);return invariant(dt,"No window.location.(origin|href) available to create URL for href: "+mt),new URL(mt,dt)}let ft={get action(){return rt},get location(){return $(et,nt)},listen(gt){if(it)throw new Error("A history only accepts one active listener");return et.addEventListener(PopStateEventType,at),it=gt,()=>{et.removeEventListener(PopStateEventType,at),it=null}},createHref(gt){return g(et,gt)},createURL:ht,encodeLocation(gt){let dt=ht(gt);return{pathname:dt.pathname,search:dt.search,hash:dt.hash}},push:lt,replace:ut,go(gt){return nt.go(gt)}};return ft}var ResultType;(function($){$.data="data",$.deferred="deferred",$.redirect="redirect",$.error="error"})(ResultType||(ResultType={}));function isIndexRoute($){return $.index===!0}function convertRoutesToDataRoutes($,g,j){return g===void 0&&(g=[]),j===void 0&&(j=new Set),$.map((_e,et)=>{let tt=[...g,et],nt=typeof _e.id=="string"?_e.id:tt.join("-");return invariant(_e.index!==!0||!_e.children,"Cannot specify children on an index route"),invariant(!j.has(nt),'Found a route id collision on id "'+nt+`".  Route id's must be globally unique within Data Router usages`),j.add(nt),isIndexRoute(_e)?_extends$3({},_e,{id:nt}):_extends$3({},_e,{id:nt,children:_e.children?convertRoutesToDataRoutes(_e.children,tt,j):void 0})})}function matchRoutes($,g,j){j===void 0&&(j="/");let _e=typeof g=="string"?parsePath(g):g,et=stripBasename(_e.pathname||"/",j);if(et==null)return null;let tt=flattenRoutes($);rankRouteBranches(tt);let nt=null;for(let rt=0;nt==null&&rt<tt.length;++rt)nt=matchRouteBranch(tt[rt],safelyDecodeURI(et));return nt}function flattenRoutes($,g,j,_e){g===void 0&&(g=[]),j===void 0&&(j=[]),_e===void 0&&(_e="");let et=(tt,nt,rt)=>{let it={relativePath:rt===void 0?tt.path||"":rt,caseSensitive:tt.caseSensitive===!0,childrenIndex:nt,route:tt};it.relativePath.startsWith("/")&&(invariant(it.relativePath.startsWith(_e),'Absolute route path "'+it.relativePath+'" nested under path '+('"'+_e+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),it.relativePath=it.relativePath.slice(_e.length));let st=joinPaths([_e,it.relativePath]),ot=j.concat(it);tt.children&&tt.children.length>0&&(invariant(tt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+st+'".')),flattenRoutes(tt.children,g,ot,st)),!(tt.path==null&&!tt.index)&&g.push({path:st,score:computeScore(st,tt.index),routesMeta:ot})};return $.forEach((tt,nt)=>{var rt;if(tt.path===""||!((rt=tt.path)!=null&&rt.includes("?")))et(tt,nt);else for(let it of explodeOptionalSegments(tt.path))et(tt,nt,it)}),g}function explodeOptionalSegments($){let g=$.split("/");if(g.length===0)return[];let[j,..._e]=g,et=j.endsWith("?"),tt=j.replace(/\?$/,"");if(_e.length===0)return et?[tt,""]:[tt];let nt=explodeOptionalSegments(_e.join("/")),rt=[];return rt.push(...nt.map(it=>it===""?tt:[tt,it].join("/"))),et&&rt.push(...nt),rt.map(it=>$.startsWith("/")&&it===""?"/":it)}function rankRouteBranches($){$.sort((g,j)=>g.score!==j.score?j.score-g.score:compareIndexes(g.routesMeta.map(_e=>_e.childrenIndex),j.routesMeta.map(_e=>_e.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=$=>$==="*";function computeScore($,g){let j=$.split("/"),_e=j.length;return j.some(isSplat)&&(_e+=splatPenalty),g&&(_e+=indexRouteValue),j.filter(et=>!isSplat(et)).reduce((et,tt)=>et+(paramRe.test(tt)?dynamicSegmentValue:tt===""?emptySegmentValue:staticSegmentValue),_e)}function compareIndexes($,g){return $.length===g.length&&$.slice(0,-1).every((_e,et)=>_e===g[et])?$[$.length-1]-g[g.length-1]:0}function matchRouteBranch($,g){let{routesMeta:j}=$,_e={},et="/",tt=[];for(let nt=0;nt<j.length;++nt){let rt=j[nt],it=nt===j.length-1,st=et==="/"?g:g.slice(et.length)||"/",ot=matchPath({path:rt.relativePath,caseSensitive:rt.caseSensitive,end:it},st);if(!ot)return null;Object.assign(_e,ot.params);let at=rt.route;tt.push({params:_e,pathname:joinPaths([et,ot.pathname]),pathnameBase:normalizePathname(joinPaths([et,ot.pathnameBase])),route:at}),ot.pathnameBase!=="/"&&(et=joinPaths([et,ot.pathnameBase]))}return tt}function matchPath($,g){typeof $=="string"&&($={path:$,caseSensitive:!1,end:!0});let[j,_e]=compilePath($.path,$.caseSensitive,$.end),et=g.match(j);if(!et)return null;let tt=et[0],nt=tt.replace(/(.)\/+$/,"$1"),rt=et.slice(1);return{params:_e.reduce((st,ot,at)=>{if(ot==="*"){let lt=rt[at]||"";nt=tt.slice(0,tt.length-lt.length).replace(/(.)\/+$/,"$1")}return st[ot]=safelyDecodeURIComponent(rt[at]||"",ot),st},{}),pathname:tt,pathnameBase:nt,pattern:$}}function compilePath($,g,j){g===void 0&&(g=!1),j===void 0&&(j=!0),warning($==="*"||!$.endsWith("*")||$.endsWith("/*"),'Route path "'+$+'" will be treated as if it were '+('"'+$.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+$.replace(/\*$/,"/*")+'".'));let _e=[],et="^"+$.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(nt,rt)=>(_e.push(rt),"/([^\\/]+)"));return $.endsWith("*")?(_e.push("*"),et+=$==="*"||$==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):j?et+="\\/*$":$!==""&&$!=="/"&&(et+="(?:(?=\\/|$))"),[new RegExp(et,g?void 0:"i"),_e]}function safelyDecodeURI($){try{return decodeURI($)}catch(g){return warning(!1,'The URL path "'+$+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),$}}function safelyDecodeURIComponent($,g){try{return decodeURIComponent($)}catch(j){return warning(!1,'The value for the URL param "'+g+'" will not be decoded because'+(' the string "'+$+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+j+").")),$}}function stripBasename($,g){if(g==="/")return $;if(!$.toLowerCase().startsWith(g.toLowerCase()))return null;let j=g.endsWith("/")?g.length-1:g.length,_e=$.charAt(j);return _e&&_e!=="/"?null:$.slice(j)||"/"}function warning($,g){if(!$){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function resolvePath($,g){g===void 0&&(g="/");let{pathname:j,search:_e="",hash:et=""}=typeof $=="string"?parsePath($):$;return{pathname:j?j.startsWith("/")?j:resolvePathname(j,g):g,search:normalizeSearch(_e),hash:normalizeHash(et)}}function resolvePathname($,g){let j=g.replace(/\/+$/,"").split("/");return $.split("/").forEach(et=>{et===".."?j.length>1&&j.pop():et!=="."&&j.push(et)}),j.length>1?j.join("/"):"/"}function getInvalidPathError($,g,j,_e){return"Cannot include a '"+$+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(_e)+"].  Please separate it out to the ")+("`to."+j+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches($){return $.filter((g,j)=>j===0||g.route.path&&g.route.path.length>0)}function resolveTo($,g,j,_e){_e===void 0&&(_e=!1);let et;typeof $=="string"?et=parsePath($):(et=_extends$3({},$),invariant(!et.pathname||!et.pathname.includes("?"),getInvalidPathError("?","pathname","search",et)),invariant(!et.pathname||!et.pathname.includes("#"),getInvalidPathError("#","pathname","hash",et)),invariant(!et.search||!et.search.includes("#"),getInvalidPathError("#","search","hash",et)));let tt=$===""||et.pathname==="",nt=tt?"/":et.pathname,rt;if(_e||nt==null)rt=j;else{let at=g.length-1;if(nt.startsWith("..")){let lt=nt.split("/");for(;lt[0]==="..";)lt.shift(),at-=1;et.pathname=lt.join("/")}rt=at>=0?g[at]:"/"}let it=resolvePath(et,rt),st=nt&&nt!=="/"&&nt.endsWith("/"),ot=(tt||nt===".")&&j.endsWith("/");return!it.pathname.endsWith("/")&&(st||ot)&&(it.pathname+="/"),it}const joinPaths=$=>$.join("/").replace(/\/\/+/g,"/"),normalizePathname=$=>$.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=$=>!$||$==="?"?"":$.startsWith("?")?$:"?"+$,normalizeHash=$=>!$||$==="#"?"":$.startsWith("#")?$:"#"+$;class AbortedDeferredError extends Error{}class DeferredData{constructor(g,j){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],invariant(g&&typeof g=="object"&&!Array.isArray(g),"defer() only accepts plain objects");let _e;this.abortPromise=new Promise((tt,nt)=>_e=nt),this.controller=new AbortController;let et=()=>_e(new AbortedDeferredError("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",et),this.controller.signal.addEventListener("abort",et),this.data=Object.entries(g).reduce((tt,nt)=>{let[rt,it]=nt;return Object.assign(tt,{[rt]:this.trackPromise(rt,it)})},{}),this.done&&this.unlistenAbortSignal(),this.init=j}trackPromise(g,j){if(!(j instanceof Promise))return j;this.deferredKeys.push(g),this.pendingKeysSet.add(g);let _e=Promise.race([j,this.abortPromise]).then(et=>this.onSettle(_e,g,null,et),et=>this.onSettle(_e,g,et));return _e.catch(()=>{}),Object.defineProperty(_e,"_tracked",{get:()=>!0}),_e}onSettle(g,j,_e,et){return this.controller.signal.aborted&&_e instanceof AbortedDeferredError?(this.unlistenAbortSignal(),Object.defineProperty(g,"_error",{get:()=>_e}),Promise.reject(_e)):(this.pendingKeysSet.delete(j),this.done&&this.unlistenAbortSignal(),_e?(Object.defineProperty(g,"_error",{get:()=>_e}),this.emit(!1,j),Promise.reject(_e)):(Object.defineProperty(g,"_data",{get:()=>et}),this.emit(!1,j),et))}emit(g,j){this.subscribers.forEach(_e=>_e(g,j))}subscribe(g){return this.subscribers.add(g),()=>this.subscribers.delete(g)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((g,j)=>this.pendingKeysSet.delete(j)),this.emit(!0)}async resolveData(g){let j=!1;if(!this.done){let _e=()=>this.cancel();g.addEventListener("abort",_e),j=await new Promise(et=>{this.subscribe(tt=>{g.removeEventListener("abort",_e),(tt||this.done)&&et(tt)})})}return j}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return invariant(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((g,j)=>{let[_e,et]=j;return Object.assign(g,{[_e]:unwrapTrackedPromise(et)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function isTrackedPromise($){return $ instanceof Promise&&$._tracked===!0}function unwrapTrackedPromise($){if(!isTrackedPromise($))return $;if($._error)throw $._error;return $._data}const redirect=function(g,j){j===void 0&&(j=302);let _e=j;typeof _e=="number"?_e={status:_e}:typeof _e.status>"u"&&(_e.status=302);let et=new Headers(_e.headers);return et.set("Location",g),new Response(null,_extends$3({},_e,{headers:et}))};class ErrorResponse{constructor(g,j,_e,et){et===void 0&&(et=!1),this.status=g,this.statusText=j||"",this.internal=et,_e instanceof Error?(this.data=_e.toString(),this.error=_e):this.data=_e}}function isRouteErrorResponse($){return $!=null&&typeof $.status=="number"&&typeof $.statusText=="string"&&typeof $.internal=="boolean"&&"data"in $}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServer=!isBrowser$1;function createRouter($){invariant($.routes.length>0,"You must provide a non-empty routes array to createRouter");let g=convertRoutesToDataRoutes($.routes),j=null,_e=new Set,et=null,tt=null,nt=null,rt=$.hydrationData!=null,it=matchRoutes(g,$.history.location,$.basename),st=null;if(it==null){let _t=getInternalRouterError(404,{pathname:$.history.location.pathname}),{matches:Ft,route:Vt}=getShortCircuitMatches(g);it=Ft,st={[Vt.id]:_t}}let ot=!it.some(_t=>_t.route.loader)||$.hydrationData!=null,at,lt={historyAction:$.history.action,location:$.history.location,matches:it,initialized:ot,navigation:IDLE_NAVIGATION,restoreScrollPosition:$.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:$.hydrationData&&$.hydrationData.loaderData||{},actionData:$.hydrationData&&$.hydrationData.actionData||null,errors:$.hydrationData&&$.hydrationData.errors||st,fetchers:new Map,blockers:new Map},ut=Action.Pop,ht=!1,ft,gt=!1,dt=!1,mt=[],yt=[],Et=new Map,Ct=0,kt=-1,St=new Map,Pt=new Set,Bt=new Map,xt=new Map,bt=null,$t=new Map,Mt=!1;function Ot(){return j=$.history.listen(_t=>{let{action:Ft,location:Vt,delta:Wt}=_t;if(Mt){Mt=!1;return}warning(bt!=null&&Wt===null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let zt=Sn({currentLocation:lt.location,nextLocation:Vt,historyAction:Ft});if(zt&&Wt!=null){Mt=!0,$.history.go(Wt*-1),Fn(zt,{state:"blocked",location:Vt,proceed(){Fn(zt,{state:"proceeding",proceed:void 0,reset:void 0,location:Vt}),$.history.go(Wt)},reset(){Mn(zt),Ut({blockers:new Map(at.state.blockers)})}});return}return Gt(Ft,Vt)}),lt.initialized||Gt(Action.Pop,lt.location),at}function jt(){j&&j(),_e.clear(),ft&&ft.abort(),lt.fetchers.forEach((_t,Ft)=>Nn(Ft)),lt.blockers.forEach((_t,Ft)=>Mn(Ft))}function Yt(_t){return _e.add(_t),()=>_e.delete(_t)}function Ut(_t){lt=_extends$3({},lt,_t),_e.forEach(Ft=>Ft(lt))}function Nt(_t,Ft){var Vt,Wt;let zt=lt.actionData!=null&&lt.navigation.formMethod!=null&&isMutationMethod(lt.navigation.formMethod)&&lt.navigation.state==="loading"&&((Vt=_t.state)==null?void 0:Vt._isRedirect)!==!0,Zt;Ft.actionData?Object.keys(Ft.actionData).length>0?Zt=Ft.actionData:Zt=null:zt?Zt=lt.actionData:Zt=null;let Qt=Ft.loaderData?mergeLoaderData(lt.loaderData,Ft.loaderData,Ft.matches||[],Ft.errors):lt.loaderData;for(let[Xt]of $t)Mn(Xt);let en=ht===!0||lt.navigation.formMethod!=null&&isMutationMethod(lt.navigation.formMethod)&&((Wt=_t.state)==null?void 0:Wt._isRedirect)!==!0;Ut(_extends$3({},Ft,{actionData:Zt,loaderData:Qt,historyAction:ut,location:_t,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:dn(_t,Ft.matches||lt.matches),preventScrollReset:en,blockers:new Map(lt.blockers)})),gt||ut===Action.Pop||(ut===Action.Push?$.history.push(_t,_t.state):ut===Action.Replace&&$.history.replace(_t,_t.state)),ut=Action.Pop,ht=!1,gt=!1,dt=!1,mt=[],yt=[]}async function It(_t,Ft){if(typeof _t=="number"){$.history.go(_t);return}let{path:Vt,submission:Wt,error:zt}=normalizeNavigateOptions(_t,Ft),Zt=lt.location,Qt=createLocation(lt.location,Vt,Ft&&Ft.state);Qt=_extends$3({},Qt,$.history.encodeLocation(Qt));let en=Ft&&Ft.replace!=null?Ft.replace:void 0,Xt=Action.Push;en===!0?Xt=Action.Replace:en===!1||Wt!=null&&isMutationMethod(Wt.formMethod)&&Wt.formAction===lt.location.pathname+lt.location.search&&(Xt=Action.Replace);let hn=Ft&&"preventScrollReset"in Ft?Ft.preventScrollReset===!0:void 0,tn=Sn({currentLocation:Zt,nextLocation:Qt,historyAction:Xt});if(tn){Fn(tn,{state:"blocked",location:Qt,proceed(){Fn(tn,{state:"proceeding",proceed:void 0,reset:void 0,location:Qt}),It(_t,Ft)},reset(){Mn(tn),Ut({blockers:new Map(lt.blockers)})}});return}return await Gt(Xt,Qt,{submission:Wt,pendingError:zt,preventScrollReset:hn,replace:Ft&&Ft.replace})}function Ht(){if(Tn(),Ut({revalidation:"loading"}),lt.navigation.state!=="submitting"){if(lt.navigation.state==="idle"){Gt(lt.historyAction,lt.location,{startUninterruptedRevalidation:!0});return}Gt(ut||lt.historyAction,lt.navigation.location,{overrideNavigation:lt.navigation})}}async function Gt(_t,Ft,Vt){ft&&ft.abort(),ft=null,ut=_t,gt=(Vt&&Vt.startUninterruptedRevalidation)===!0,Dn(lt.location,lt.matches),ht=(Vt&&Vt.preventScrollReset)===!0;let Wt=Vt&&Vt.overrideNavigation,zt=matchRoutes(g,Ft,$.basename);if(!zt){let on=getInternalRouterError(404,{pathname:Ft.pathname}),{matches:gn,route:fn}=getShortCircuitMatches(g);An(),Nt(Ft,{matches:gn,loaderData:{},errors:{[fn.id]:on}});return}if(isHashChangeOnly(lt.location,Ft)&&!(Vt&&Vt.submission&&isMutationMethod(Vt.submission.formMethod))){Nt(Ft,{matches:zt});return}ft=new AbortController;let Zt=createClientSideRequest($.history,Ft,ft.signal,Vt&&Vt.submission),Qt,en;if(Vt&&Vt.pendingError)en={[findNearestBoundary(zt).route.id]:Vt.pendingError};else if(Vt&&Vt.submission&&isMutationMethod(Vt.submission.formMethod)){let on=await Kt(Zt,Ft,Vt.submission,zt,{replace:Vt.replace});if(on.shortCircuited)return;Qt=on.pendingActionData,en=on.pendingActionError,Wt=_extends$3({state:"loading",location:Ft},Vt.submission),Zt=new Request(Zt.url,{signal:Zt.signal})}let{shortCircuited:Xt,loaderData:hn,errors:tn}=await rn(Zt,Ft,zt,Wt,Vt&&Vt.submission,Vt&&Vt.replace,Qt,en);Xt||(ft=null,Nt(Ft,_extends$3({matches:zt},Qt?{actionData:Qt}:{},{loaderData:hn,errors:tn})))}async function Kt(_t,Ft,Vt,Wt,zt){Tn();let Zt=_extends$3({state:"submitting",location:Ft},Vt);Ut({navigation:Zt});let Qt,en=getTargetMatch(Wt,Ft);if(!en.route.action)Qt={type:ResultType.error,error:getInternalRouterError(405,{method:_t.method,pathname:Ft.pathname,routeId:en.route.id})};else if(Qt=await callLoaderOrAction("action",_t,en,Wt,at.basename),_t.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Qt)){let Xt;return zt&&zt.replace!=null?Xt=zt.replace:Xt=Qt.location===lt.location.pathname+lt.location.search,await Bn(lt,Qt,{submission:Vt,replace:Xt}),{shortCircuited:!0}}if(isErrorResult(Qt)){let Xt=findNearestBoundary(Wt,en.route.id);return(zt&&zt.replace)!==!0&&(ut=Action.Push),{pendingActionData:{},pendingActionError:{[Xt.route.id]:Qt.error}}}if(isDeferredResult(Qt))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[en.route.id]:Qt.data}}}async function rn(_t,Ft,Vt,Wt,zt,Zt,Qt,en){let Xt=Wt;Xt||(Xt=_extends$3({state:"loading",location:Ft,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},zt));let hn=zt||(Xt.formMethod&&Xt.formAction&&Xt.formData&&Xt.formEncType?{formMethod:Xt.formMethod,formAction:Xt.formAction,formData:Xt.formData,formEncType:Xt.formEncType}:void 0),[tn,on]=getMatchesToLoad($.history,lt,Vt,hn,Ft,dt,mt,yt,Qt,en,Bt);if(An(pn=>!(Vt&&Vt.some(xn=>xn.route.id===pn))||tn&&tn.some(xn=>xn.route.id===pn)),tn.length===0&&on.length===0)return Nt(Ft,_extends$3({matches:Vt,loaderData:{},errors:en||null},Qt?{actionData:Qt}:{})),{shortCircuited:!0};if(!gt){on.forEach(xn=>{let Rn=lt.fetchers.get(xn.key),Gn={state:"loading",data:Rn&&Rn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lt.fetchers.set(xn.key,Gn)});let pn=Qt||lt.actionData;Ut(_extends$3({navigation:Xt},pn?Object.keys(pn).length===0?{actionData:null}:{actionData:pn}:{},on.length>0?{fetchers:new Map(lt.fetchers)}:{}))}kt=++Ct,on.forEach(pn=>Et.set(pn.key,ft));let{results:gn,loaderResults:fn,fetcherResults:yn}=await Un(lt.matches,Vt,tn,on,_t);if(_t.signal.aborted)return{shortCircuited:!0};on.forEach(pn=>Et.delete(pn.key));let kn=findRedirect(gn);if(kn)return await Bn(lt,kn,{replace:Zt}),{shortCircuited:!0};let{loaderData:$n,errors:ln}=processLoaderData(lt,Vt,tn,fn,en,on,yn,xt);xt.forEach((pn,xn)=>{pn.subscribe(Rn=>{(Rn||pn.done)&&xt.delete(xn)})}),Vn();let Qn=zn(kt);return _extends$3({loaderData:$n,errors:ln},Qn||on.length>0?{fetchers:new Map(lt.fetchers)}:{})}function sn(_t){return lt.fetchers.get(_t)||IDLE_FETCHER}function cn(_t,Ft,Vt,Wt){if(isServer)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Et.has(_t)&&_n(_t);let zt=matchRoutes(g,Vt,$.basename);if(!zt){Ln(_t,Ft,getInternalRouterError(404,{pathname:Vt}));return}let{path:Zt,submission:Qt}=normalizeNavigateOptions(Vt,Wt,!0),en=getTargetMatch(zt,Zt);if(ht=(Wt&&Wt.preventScrollReset)===!0,Qt&&isMutationMethod(Qt.formMethod)){un(_t,Ft,Zt,en,zt,Qt);return}Bt.set(_t,{routeId:Ft,path:Zt,match:en,matches:zt}),En(_t,Ft,Zt,en,zt,Qt)}async function un(_t,Ft,Vt,Wt,zt,Zt){if(Tn(),Bt.delete(_t),!Wt.route.action){let Pn=getInternalRouterError(405,{method:Zt.formMethod,pathname:Vt,routeId:Ft});Ln(_t,Ft,Pn);return}let Qt=lt.fetchers.get(_t),en=_extends$3({state:"submitting"},Zt,{data:Qt&&Qt.data," _hasFetcherDoneAnything ":!0});lt.fetchers.set(_t,en),Ut({fetchers:new Map(lt.fetchers)});let Xt=new AbortController,hn=createClientSideRequest($.history,Vt,Xt.signal,Zt);Et.set(_t,Xt);let tn=await callLoaderOrAction("action",hn,Wt,zt,at.basename);if(hn.signal.aborted){Et.get(_t)===Xt&&Et.delete(_t);return}if(isRedirectResult(tn)){Et.delete(_t),Pt.add(_t);let Pn=_extends$3({state:"loading"},Zt,{data:void 0," _hasFetcherDoneAnything ":!0});return lt.fetchers.set(_t,Pn),Ut({fetchers:new Map(lt.fetchers)}),Bn(lt,tn,{isFetchActionRedirect:!0})}if(isErrorResult(tn)){Ln(_t,Ft,tn.error);return}if(isDeferredResult(tn))throw getInternalRouterError(400,{type:"defer-action"});let on=lt.navigation.location||lt.location,gn=createClientSideRequest($.history,on,Xt.signal),fn=lt.navigation.state!=="idle"?matchRoutes(g,lt.navigation.location,$.basename):lt.matches;invariant(fn,"Didn't find any matches after fetcher action");let yn=++Ct;St.set(_t,yn);let kn=_extends$3({state:"loading",data:tn.data},Zt,{" _hasFetcherDoneAnything ":!0});lt.fetchers.set(_t,kn);let[$n,ln]=getMatchesToLoad($.history,lt,fn,Zt,on,dt,mt,yt,{[Wt.route.id]:tn.data},void 0,Bt);ln.filter(Pn=>Pn.key!==_t).forEach(Pn=>{let Jn=Pn.key,nr=lt.fetchers.get(Jn),yr={state:"loading",data:nr&&nr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lt.fetchers.set(Jn,yr),Et.set(Jn,Xt)}),Ut({fetchers:new Map(lt.fetchers)});let{results:Qn,loaderResults:pn,fetcherResults:xn}=await Un(lt.matches,fn,$n,ln,gn);if(Xt.signal.aborted)return;St.delete(_t),Et.delete(_t),ln.forEach(Pn=>Et.delete(Pn.key));let Rn=findRedirect(Qn);if(Rn)return Bn(lt,Rn);let{loaderData:Gn,errors:Zn}=processLoaderData(lt,lt.matches,$n,pn,void 0,ln,xn,xt),mr={state:"idle",data:tn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lt.fetchers.set(_t,mr);let tr=zn(yn);lt.navigation.state==="loading"&&yn>kt?(invariant(ut,"Expected pending action"),ft&&ft.abort(),Nt(lt.navigation.location,{matches:fn,loaderData:Gn,errors:Zn,fetchers:new Map(lt.fetchers)})):(Ut(_extends$3({errors:Zn,loaderData:mergeLoaderData(lt.loaderData,Gn,fn,Zn)},tr?{fetchers:new Map(lt.fetchers)}:{})),dt=!1)}async function En(_t,Ft,Vt,Wt,zt,Zt){let Qt=lt.fetchers.get(_t),en=_extends$3({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Zt,{data:Qt&&Qt.data," _hasFetcherDoneAnything ":!0});lt.fetchers.set(_t,en),Ut({fetchers:new Map(lt.fetchers)});let Xt=new AbortController,hn=createClientSideRequest($.history,Vt,Xt.signal);Et.set(_t,Xt);let tn=await callLoaderOrAction("loader",hn,Wt,zt,at.basename);if(isDeferredResult(tn)&&(tn=await resolveDeferredData(tn,hn.signal,!0)||tn),Et.get(_t)===Xt&&Et.delete(_t),hn.signal.aborted)return;if(isRedirectResult(tn)){await Bn(lt,tn);return}if(isErrorResult(tn)){let gn=findNearestBoundary(lt.matches,Ft);lt.fetchers.delete(_t),Ut({fetchers:new Map(lt.fetchers),errors:{[gn.route.id]:tn.error}});return}invariant(!isDeferredResult(tn),"Unhandled fetcher deferred data");let on={state:"idle",data:tn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lt.fetchers.set(_t,on),Ut({fetchers:new Map(lt.fetchers)})}async function Bn(_t,Ft,Vt){var Wt;let{submission:zt,replace:Zt,isFetchActionRedirect:Qt}=Vt===void 0?{}:Vt;Ft.revalidate&&(dt=!0);let en=createLocation(_t.location,Ft.location,_extends$3({_isRedirect:!0},Qt?{_isFetchActionRedirect:!0}:{}));if(invariant(en,"Expected a location on the redirect navigation"),isBrowser$1&&typeof((Wt=window)==null?void 0:Wt.location)<"u"){let fn=$.history.createURL(Ft.location).origin;if(window.location.origin!==fn){Zt?window.location.replace(Ft.location):window.location.assign(Ft.location);return}}ft=null;let Xt=Zt===!0?Action.Replace:Action.Push,{formMethod:hn,formAction:tn,formEncType:on,formData:gn}=_t.navigation;!zt&&hn&&tn&&gn&&on&&(zt={formMethod:hn,formAction:tn,formEncType:on,formData:gn}),redirectPreserveMethodStatusCodes.has(Ft.status)&&zt&&isMutationMethod(zt.formMethod)?await Gt(Xt,en,{submission:_extends$3({},zt,{formAction:Ft.location}),preventScrollReset:ht}):await Gt(Xt,en,{overrideNavigation:{state:"loading",location:en,formMethod:zt?zt.formMethod:void 0,formAction:zt?zt.formAction:void 0,formEncType:zt?zt.formEncType:void 0,formData:zt?zt.formData:void 0},preventScrollReset:ht})}async function Un(_t,Ft,Vt,Wt,zt){let Zt=await Promise.all([...Vt.map(Xt=>callLoaderOrAction("loader",zt,Xt,Ft,at.basename)),...Wt.map(Xt=>callLoaderOrAction("loader",createClientSideRequest($.history,Xt.path,zt.signal),Xt.match,Xt.matches,at.basename))]),Qt=Zt.slice(0,Vt.length),en=Zt.slice(Vt.length);return await Promise.all([resolveDeferredResults(_t,Vt,Qt,zt.signal,!1,lt.loaderData),resolveDeferredResults(_t,Wt.map(Xt=>Xt.match),en,zt.signal,!0)]),{results:Zt,loaderResults:Qt,fetcherResults:en}}function Tn(){dt=!0,mt.push(...An()),Bt.forEach((_t,Ft)=>{Et.has(Ft)&&(yt.push(Ft),_n(Ft))})}function Ln(_t,Ft,Vt){let Wt=findNearestBoundary(lt.matches,Ft);Nn(_t),Ut({errors:{[Wt.route.id]:Vt},fetchers:new Map(lt.fetchers)})}function Nn(_t){Et.has(_t)&&_n(_t),Bt.delete(_t),St.delete(_t),Pt.delete(_t),lt.fetchers.delete(_t)}function _n(_t){let Ft=Et.get(_t);invariant(Ft,"Expected fetch controller: "+_t),Ft.abort(),Et.delete(_t)}function wn(_t){for(let Ft of _t){let Wt={state:"idle",data:sn(Ft).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};lt.fetchers.set(Ft,Wt)}}function Vn(){let _t=[];for(let Ft of Pt){let Vt=lt.fetchers.get(Ft);invariant(Vt,"Expected fetcher: "+Ft),Vt.state==="loading"&&(Pt.delete(Ft),_t.push(Ft))}wn(_t)}function zn(_t){let Ft=[];for(let[Vt,Wt]of St)if(Wt<_t){let zt=lt.fetchers.get(Vt);invariant(zt,"Expected fetcher: "+Vt),zt.state==="loading"&&(_n(Vt),St.delete(Vt),Ft.push(Vt))}return wn(Ft),Ft.length>0}function Wn(_t,Ft){let Vt=lt.blockers.get(_t)||IDLE_BLOCKER;return $t.get(_t)!==Ft&&($t.set(_t,Ft),bt==null?bt=_t:_t!==bt&&warning(!1,"A router only supports one blocker at a time")),Vt}function Mn(_t){lt.blockers.delete(_t),$t.delete(_t),bt===_t&&(bt=null)}function Fn(_t,Ft){let Vt=lt.blockers.get(_t)||IDLE_BLOCKER;invariant(Vt.state==="unblocked"&&Ft.state==="blocked"||Vt.state==="blocked"&&Ft.state==="blocked"||Vt.state==="blocked"&&Ft.state==="proceeding"||Vt.state==="blocked"&&Ft.state==="unblocked"||Vt.state==="proceeding"&&Ft.state==="unblocked","Invalid blocker state transition: "+Vt.state+" -> "+Ft.state),lt.blockers.set(_t,Ft),Ut({blockers:new Map(lt.blockers)})}function Sn(_t){let{currentLocation:Ft,nextLocation:Vt,historyAction:Wt}=_t;if(bt==null)return;let zt=$t.get(bt);invariant(zt,"Could not find a function for the active blocker");let Zt=lt.blockers.get(bt);if(!(Zt&&Zt.state==="proceeding")&&zt({currentLocation:Ft,nextLocation:Vt,historyAction:Wt}))return bt}function An(_t){let Ft=[];return xt.forEach((Vt,Wt)=>{(!_t||_t(Wt))&&(Vt.cancel(),Ft.push(Wt),xt.delete(Wt))}),Ft}function bn(_t,Ft,Vt){if(et=_t,nt=Ft,tt=Vt||(Wt=>Wt.key),!rt&&lt.navigation===IDLE_NAVIGATION){rt=!0;let Wt=dn(lt.location,lt.matches);Wt!=null&&Ut({restoreScrollPosition:Wt})}return()=>{et=null,nt=null,tt=null}}function Dn(_t,Ft){if(et&&tt&&nt){let Vt=Ft.map(zt=>createUseMatchesMatch(zt,lt.loaderData)),Wt=tt(_t,Vt)||_t.key;et[Wt]=nt()}}function dn(_t,Ft){if(et&&tt&&nt){let Vt=Ft.map(Zt=>createUseMatchesMatch(Zt,lt.loaderData)),Wt=tt(_t,Vt)||_t.key,zt=et[Wt];if(typeof zt=="number")return zt}return null}return at={get basename(){return $.basename},get state(){return lt},get routes(){return g},initialize:Ot,subscribe:Yt,enableScrollRestoration:bn,navigate:It,fetch:cn,revalidate:Ht,createHref:_t=>$.history.createHref(_t),encodeLocation:_t=>$.history.encodeLocation(_t),getFetcher:sn,deleteFetcher:Nn,dispose:jt,getBlocker:Wn,deleteBlocker:Mn,_internalFetchControllers:Et,_internalActiveDeferreds:xt},at}function isSubmissionNavigation($){return $!=null&&"formData"in $}function normalizeNavigateOptions($,g,j){j===void 0&&(j=!1);let _e=typeof $=="string"?$:createPath($);if(!g||!isSubmissionNavigation(g))return{path:_e};if(g.formMethod&&!isValidMethod(g.formMethod))return{path:_e,error:getInternalRouterError(405,{method:g.formMethod})};let et;if(g.formData&&(et={formMethod:g.formMethod||"get",formAction:stripHashFromPath(_e),formEncType:g&&g.formEncType||"application/x-www-form-urlencoded",formData:g.formData},isMutationMethod(et.formMethod)))return{path:_e,submission:et};let tt=parsePath(_e),nt=convertFormDataToSearchParams(g.formData);return j&&tt.search&&hasNakedIndexQuery(tt.search)&&nt.append("index",""),tt.search="?"+nt,{path:createPath(tt),submission:et}}function getLoaderMatchesUntilBoundary($,g){let j=$;if(g){let _e=$.findIndex(et=>et.route.id===g);_e>=0&&(j=$.slice(0,_e))}return j}function getMatchesToLoad($,g,j,_e,et,tt,nt,rt,it,st,ot){let at=st?Object.values(st)[0]:it?Object.values(it)[0]:void 0,lt=$.createURL(g.location),ut=$.createURL(et),ht=tt||lt.toString()===ut.toString()||lt.search!==ut.search,ft=st?Object.keys(st)[0]:void 0,dt=getLoaderMatchesUntilBoundary(j,ft).filter((yt,Et)=>{if(yt.route.loader==null)return!1;if(isNewLoader(g.loaderData,g.matches[Et],yt)||nt.some(St=>St===yt.route.id))return!0;let Ct=g.matches[Et],kt=yt;return shouldRevalidateLoader(yt,_extends$3({currentUrl:lt,currentParams:Ct.params,nextUrl:ut,nextParams:kt.params},_e,{actionResult:at,defaultShouldRevalidate:ht||isNewRouteInstance(Ct,kt)}))}),mt=[];return ot&&ot.forEach((yt,Et)=>{if(j.some(Ct=>Ct.route.id===yt.routeId))rt.includes(Et)?mt.push(_extends$3({key:Et},yt)):shouldRevalidateLoader(yt.match,_extends$3({currentUrl:lt,currentParams:g.matches[g.matches.length-1].params,nextUrl:ut,nextParams:j[j.length-1].params},_e,{actionResult:at,defaultShouldRevalidate:ht}))&&mt.push(_extends$3({key:Et},yt));else return}),[dt,mt]}function isNewLoader($,g,j){let _e=!g||j.route.id!==g.route.id,et=$[j.route.id]===void 0;return _e||et}function isNewRouteInstance($,g){let j=$.route.path;return $.pathname!==g.pathname||j!=null&&j.endsWith("*")&&$.params["*"]!==g.params["*"]}function shouldRevalidateLoader($,g){if($.route.shouldRevalidate){let j=$.route.shouldRevalidate(g);if(typeof j=="boolean")return j}return g.defaultShouldRevalidate}async function callLoaderOrAction($,g,j,_e,et,tt,nt,rt){et===void 0&&(et="/"),tt===void 0&&(tt=!1),nt===void 0&&(nt=!1);let it,st,ot,at=new Promise((ut,ht)=>ot=ht),lt=()=>ot();g.signal.addEventListener("abort",lt);try{let ut=j.route[$];invariant(ut,"Could not find the "+$+' to run on the "'+j.route.id+'" route'),st=await Promise.race([ut({request:g,params:j.params,context:rt}),at]),invariant(st!==void 0,"You defined "+($==="action"?"an action":"a loader")+" for route "+('"'+j.route.id+"\" but didn't return anything from your `"+$+"` ")+"function. Please return a value or `null`.")}catch(ut){it=ResultType.error,st=ut}finally{g.signal.removeEventListener("abort",lt)}if(isResponse(st)){let ut=st.status;if(redirectStatusCodes.has(ut)){let gt=st.headers.get("Location");if(invariant(gt,"Redirects returned/thrown from loaders/actions must have a Location header"),/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(gt)){if(!tt){let mt=new URL(g.url),yt=gt.startsWith("//")?new URL(mt.protocol+gt):new URL(gt);yt.origin===mt.origin&&(gt=yt.pathname+yt.search+yt.hash)}}else{let mt=_e.slice(0,_e.indexOf(j)+1),yt=getPathContributingMatches(mt).map(Ct=>Ct.pathnameBase),Et=resolveTo(gt,yt,new URL(g.url).pathname);if(invariant(createPath(Et),"Unable to resolve redirect location: "+gt),et){let Ct=Et.pathname;Et.pathname=Ct==="/"?et:joinPaths([et,Ct])}gt=createPath(Et)}if(tt)throw st.headers.set("Location",gt),st;return{type:ResultType.redirect,status:ut,location:gt,revalidate:st.headers.get("X-Remix-Revalidate")!==null}}if(nt)throw{type:it||ResultType.data,response:st};let ht,ft=st.headers.get("Content-Type");return ft&&/\bapplication\/json\b/.test(ft)?ht=await st.json():ht=await st.text(),it===ResultType.error?{type:it,error:new ErrorResponse(ut,st.statusText,ht),headers:st.headers}:{type:ResultType.data,data:ht,statusCode:st.status,headers:st.headers}}return it===ResultType.error?{type:it,error:st}:st instanceof DeferredData?{type:ResultType.deferred,deferredData:st}:{type:ResultType.data,data:st}}function createClientSideRequest($,g,j,_e){let et=$.createURL(stripHashFromPath(g)).toString(),tt={signal:j};if(_e&&isMutationMethod(_e.formMethod)){let{formMethod:nt,formEncType:rt,formData:it}=_e;tt.method=nt.toUpperCase(),tt.body=rt==="application/x-www-form-urlencoded"?convertFormDataToSearchParams(it):it}return new Request(et,tt)}function convertFormDataToSearchParams($){let g=new URLSearchParams;for(let[j,_e]of $.entries())g.append(j,_e instanceof File?_e.name:_e);return g}function processRouteLoaderData($,g,j,_e,et){let tt={},nt=null,rt,it=!1,st={};return j.forEach((ot,at)=>{let lt=g[at].route.id;if(invariant(!isRedirectResult(ot),"Cannot handle redirect results in processLoaderData"),isErrorResult(ot)){let ut=findNearestBoundary($,lt),ht=ot.error;_e&&(ht=Object.values(_e)[0],_e=void 0),nt=nt||{},nt[ut.route.id]==null&&(nt[ut.route.id]=ht),tt[lt]=void 0,it||(it=!0,rt=isRouteErrorResponse(ot.error)?ot.error.status:500),ot.headers&&(st[lt]=ot.headers)}else isDeferredResult(ot)?(et.set(lt,ot.deferredData),tt[lt]=ot.deferredData.data):tt[lt]=ot.data,ot.statusCode!=null&&ot.statusCode!==200&&!it&&(rt=ot.statusCode),ot.headers&&(st[lt]=ot.headers)}),_e&&(nt=_e,tt[Object.keys(_e)[0]]=void 0),{loaderData:tt,errors:nt,statusCode:rt||200,loaderHeaders:st}}function processLoaderData($,g,j,_e,et,tt,nt,rt){let{loaderData:it,errors:st}=processRouteLoaderData(g,j,_e,et,rt);for(let ot=0;ot<tt.length;ot++){let{key:at,match:lt}=tt[ot];invariant(nt!==void 0&&nt[ot]!==void 0,"Did not find corresponding fetcher result");let ut=nt[ot];if(isErrorResult(ut)){let ht=findNearestBoundary($.matches,lt.route.id);st&&st[ht.route.id]||(st=_extends$3({},st,{[ht.route.id]:ut.error})),$.fetchers.delete(at)}else if(isRedirectResult(ut))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(ut))invariant(!1,"Unhandled fetcher deferred data");else{let ht={state:"idle",data:ut.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};$.fetchers.set(at,ht)}}return{loaderData:it,errors:st}}function mergeLoaderData($,g,j,_e){let et=_extends$3({},g);for(let tt of j){let nt=tt.route.id;if(g.hasOwnProperty(nt)?g[nt]!==void 0&&(et[nt]=g[nt]):$[nt]!==void 0&&(et[nt]=$[nt]),_e&&_e.hasOwnProperty(nt))break}return et}function findNearestBoundary($,g){return(g?$.slice(0,$.findIndex(_e=>_e.route.id===g)+1):[...$]).reverse().find(_e=>_e.route.hasErrorBoundary===!0)||$[0]}function getShortCircuitMatches($){let g=$.find(j=>j.index||!j.path||j.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:g}],route:g}}function getInternalRouterError($,g){let{pathname:j,routeId:_e,method:et,type:tt}=g===void 0?{}:g,nt="Unknown Server Error",rt="Unknown @remix-run/router error";return $===400?(nt="Bad Request",et&&j&&_e?rt="You made a "+et+' request to "'+j+'" but '+('did not provide a `loader` for route "'+_e+'", ')+"so there is no way to handle the request.":tt==="defer-action"&&(rt="defer() is not supported in actions")):$===403?(nt="Forbidden",rt='Route "'+_e+'" does not match URL "'+j+'"'):$===404?(nt="Not Found",rt='No route matches URL "'+j+'"'):$===405&&(nt="Method Not Allowed",et&&j&&_e?rt="You made a "+et.toUpperCase()+' request to "'+j+'" but '+('did not provide an `action` for route "'+_e+'", ')+"so there is no way to handle the request.":et&&(rt='Invalid request method "'+et.toUpperCase()+'"')),new ErrorResponse($||500,nt,new Error(rt),!0)}function findRedirect($){for(let g=$.length-1;g>=0;g--){let j=$[g];if(isRedirectResult(j))return j}}function stripHashFromPath($){let g=typeof $=="string"?parsePath($):$;return createPath(_extends$3({},g,{hash:""}))}function isHashChangeOnly($,g){return $.pathname===g.pathname&&$.search===g.search&&$.hash!==g.hash}function isDeferredResult($){return $.type===ResultType.deferred}function isErrorResult($){return $.type===ResultType.error}function isRedirectResult($){return($&&$.type)===ResultType.redirect}function isResponse($){return $!=null&&typeof $.status=="number"&&typeof $.statusText=="string"&&typeof $.headers=="object"&&typeof $.body<"u"}function isValidMethod($){return validRequestMethods.has($)}function isMutationMethod($){return validMutationMethods.has($)}async function resolveDeferredResults($,g,j,_e,et,tt){for(let nt=0;nt<j.length;nt++){let rt=j[nt],it=g[nt],st=$.find(at=>at.route.id===it.route.id),ot=st!=null&&!isNewRouteInstance(st,it)&&(tt&&tt[it.route.id])!==void 0;isDeferredResult(rt)&&(et||ot)&&await resolveDeferredData(rt,_e,et).then(at=>{at&&(j[nt]=at||j[nt])})}}async function resolveDeferredData($,g,j){if(j===void 0&&(j=!1),!await $.deferredData.resolveData(g)){if(j)try{return{type:ResultType.data,data:$.deferredData.unwrappedData}}catch(et){return{type:ResultType.error,error:et}}return{type:ResultType.data,data:$.deferredData.data}}}function hasNakedIndexQuery($){return new URLSearchParams($).getAll("index").some(g=>g==="")}function createUseMatchesMatch($,g){let{route:j,pathname:_e,params:et}=$;return{id:j.id,pathname:_e,params:et,data:g[j.id],handle:j.handle}}function getTargetMatch($,g){let j=typeof g=="string"?parsePath(g).search:g.search;if($[$.length-1].route.index&&hasNakedIndexQuery(j||""))return $[$.length-1];let _e=getPathContributingMatches($);return _e[_e.length-1]}/**
 * React Router v6.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function($){for(var g=1;g<arguments.length;g++){var j=arguments[g];for(var _e in j)Object.prototype.hasOwnProperty.call(j,_e)&&($[_e]=j[_e])}return $},_extends$2.apply(this,arguments)}function isPolyfill($,g){return $===g&&($!==0||1/$===1/g)||$!==$&&g!==g}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$1;function useSyncExternalStore$2($,g,j){const _e=g(),[{inst:et},tt]=useState({inst:{value:_e,getSnapshot:g}});return useLayoutEffect(()=>{et.value=_e,et.getSnapshot=g,checkIfSnapshotChanged(et)&&tt({inst:et})},[$,_e,g]),useEffect(()=>(checkIfSnapshotChanged(et)&&tt({inst:et}),$(()=>{checkIfSnapshotChanged(et)&&tt({inst:et})})),[$]),useDebugValue(_e),_e}function checkIfSnapshotChanged($){const g=$.getSnapshot,j=$.value;try{const _e=g();return!is(j,_e)}catch{return!0}}function useSyncExternalStore$1($,g,j){return g()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2,useSyncExternalStore="useSyncExternalStore"in React$1?($=>$.useSyncExternalStore)(React$1):shim,DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function useHref($,g){let{relative:j}=g===void 0?{}:g;useInRouterContext()||invariant(!1);let{basename:_e,navigator:et}=reactExports.useContext(NavigationContext),{hash:tt,pathname:nt,search:rt}=useResolvedPath($,{relative:j}),it=nt;return _e!=="/"&&(it=nt==="/"?_e:joinPaths([_e,nt])),et.createHref({pathname:it,search:rt,hash:tt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:$,navigator:g}=reactExports.useContext(NavigationContext),{matches:j}=reactExports.useContext(RouteContext),{pathname:_e}=useLocation(),et=JSON.stringify(getPathContributingMatches(j).map(rt=>rt.pathnameBase)),tt=reactExports.useRef(!1);return reactExports.useEffect(()=>{tt.current=!0}),reactExports.useCallback(function(rt,it){if(it===void 0&&(it={}),!tt.current)return;if(typeof rt=="number"){g.go(rt);return}let st=resolveTo(rt,JSON.parse(et),_e,it.relative==="path");$!=="/"&&(st.pathname=st.pathname==="/"?$:joinPaths([$,st.pathname])),(it.replace?g.replace:g.push)(st,it.state,it)},[$,g,et,_e])}const OutletContext=reactExports.createContext(null);function useOutlet($){let g=reactExports.useContext(RouteContext).outlet;return g&&reactExports.createElement(OutletContext.Provider,{value:$},g)}function useResolvedPath($,g){let{relative:j}=g===void 0?{}:g,{matches:_e}=reactExports.useContext(RouteContext),{pathname:et}=useLocation(),tt=JSON.stringify(getPathContributingMatches(_e).map(nt=>nt.pathnameBase));return reactExports.useMemo(()=>resolveTo($,JSON.parse(tt),et,j==="path"),[$,tt,et,j])}function useRoutes($,g){useInRouterContext()||invariant(!1);let{navigator:j}=reactExports.useContext(NavigationContext),_e=reactExports.useContext(DataRouterStateContext),{matches:et}=reactExports.useContext(RouteContext),tt=et[et.length-1],nt=tt?tt.params:{};tt&&tt.pathname;let rt=tt?tt.pathnameBase:"/";tt&&tt.route;let it=useLocation(),st;if(g){var ot;let ft=typeof g=="string"?parsePath(g):g;rt==="/"||(ot=ft.pathname)!=null&&ot.startsWith(rt)||invariant(!1),st=ft}else st=it;let at=st.pathname||"/",lt=rt==="/"?at:at.slice(rt.length)||"/",ut=matchRoutes($,{pathname:lt}),ht=_renderMatches(ut&&ut.map(ft=>Object.assign({},ft,{params:Object.assign({},nt,ft.params),pathname:joinPaths([rt,j.encodeLocation?j.encodeLocation(ft.pathname).pathname:ft.pathname]),pathnameBase:ft.pathnameBase==="/"?rt:joinPaths([rt,j.encodeLocation?j.encodeLocation(ft.pathnameBase).pathname:ft.pathnameBase])})),et,_e||void 0);return g&&ht?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},st),navigationType:Action.Pop}},ht):ht}function DefaultErrorElement(){let $=useRouteError(),g=isRouteErrorResponse($)?$.status+" "+$.statusText:$ instanceof Error?$.message:JSON.stringify($),j=$ instanceof Error?$.stack:null,et={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},tt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),j?reactExports.createElement("pre",{style:et},j):null,tt)}class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,j){return j.location!==g.location?{error:g.error,location:g.location}:{error:g.error||j.error,location:j.location}}componentDidCatch(g,j){console.error("React Router caught the following error during render",g,j)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute($){let{routeContext:g,match:j,children:_e}=$,et=reactExports.useContext(DataRouterContext);return et&&et.static&&et.staticContext&&j.route.errorElement&&(et.staticContext._deepestRenderedBoundaryId=j.route.id),reactExports.createElement(RouteContext.Provider,{value:g},_e)}function _renderMatches($,g,j){if(g===void 0&&(g=[]),$==null)if(j!=null&&j.errors)$=j.matches;else return null;let _e=$,et=j==null?void 0:j.errors;if(et!=null){let tt=_e.findIndex(nt=>nt.route.id&&(et==null?void 0:et[nt.route.id]));tt>=0||invariant(!1),_e=_e.slice(0,Math.min(_e.length,tt+1))}return _e.reduceRight((tt,nt,rt)=>{let it=nt.route.id?et==null?void 0:et[nt.route.id]:null,st=j?nt.route.errorElement||reactExports.createElement(DefaultErrorElement,null):null,ot=g.concat(_e.slice(0,rt+1)),at=()=>reactExports.createElement(RenderedRoute,{match:nt,routeContext:{outlet:tt,matches:ot}},it?st:nt.route.element!==void 0?nt.route.element:tt);return j&&(nt.route.errorElement||rt===0)?reactExports.createElement(RenderErrorBoundary,{location:j.location,component:st,error:it,children:at(),routeContext:{outlet:null,matches:ot}}):at()},null)}var DataRouterHook$1;(function($){$.UseBlocker="useBlocker",$.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function($){$.UseLoaderData="useLoaderData",$.UseActionData="useActionData",$.UseRouteError="useRouteError",$.UseNavigation="useNavigation",$.UseRouteLoaderData="useRouteLoaderData",$.UseMatches="useMatches",$.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState($){let g=reactExports.useContext(DataRouterStateContext);return g||invariant(!1),g}function useRouteContext($){let g=reactExports.useContext(RouteContext);return g||invariant(!1),g}function useCurrentRouteId($){let g=useRouteContext(),j=g.matches[g.matches.length-1];return j.route.id||invariant(!1),j.route.id}function useRouteError(){var $;let g=reactExports.useContext(RouteErrorContext),j=useDataRouterState(DataRouterStateHook$1.UseRouteError),_e=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g||(($=j.errors)==null?void 0:$[_e])}function RouterProvider($){let{fallbackElement:g,router:j}=$,_e=useSyncExternalStore(j.subscribe,()=>j.state,()=>j.state),et=reactExports.useMemo(()=>({createHref:j.createHref,encodeLocation:j.encodeLocation,go:nt=>j.navigate(nt),push:(nt,rt,it)=>j.navigate(nt,{state:rt,preventScrollReset:it==null?void 0:it.preventScrollReset}),replace:(nt,rt,it)=>j.navigate(nt,{replace:!0,state:rt,preventScrollReset:it==null?void 0:it.preventScrollReset})}),[j]),tt=j.basename||"/";return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:{router:j,navigator:et,static:!1,basename:tt}},reactExports.createElement(DataRouterStateContext.Provider,{value:_e},reactExports.createElement(Router,{basename:j.basename,location:j.state.location,navigationType:j.state.historyAction,navigator:et},j.state.initialized?reactExports.createElement(Routes,null):g))),null)}function Outlet($){return useOutlet($.context)}function Route($){invariant(!1)}function Router($){let{basename:g="/",children:j=null,location:_e,navigationType:et=Action.Pop,navigator:tt,static:nt=!1}=$;useInRouterContext()&&invariant(!1);let rt=g.replace(/^\/*/,"/"),it=reactExports.useMemo(()=>({basename:rt,navigator:tt,static:nt}),[rt,tt,nt]);typeof _e=="string"&&(_e=parsePath(_e));let{pathname:st="/",search:ot="",hash:at="",state:lt=null,key:ut="default"}=_e,ht=reactExports.useMemo(()=>{let ft=stripBasename(st,rt);return ft==null?null:{pathname:ft,search:ot,hash:at,state:lt,key:ut}},[rt,st,ot,at,lt,ut]);return ht==null?null:reactExports.createElement(NavigationContext.Provider,{value:it},reactExports.createElement(LocationContext.Provider,{children:j,value:{location:ht,navigationType:et}}))}function Routes($){let{children:g,location:j}=$,_e=reactExports.useContext(DataRouterContext),et=_e&&!g?_e.router.routes:createRoutesFromChildren(g);return useRoutes(et,j)}var AwaitRenderStatus;(function($){$[$.pending=0]="pending",$[$.success=1]="success",$[$.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren($,g){g===void 0&&(g=[]);let j=[];return reactExports.Children.forEach($,(_e,et)=>{if(!reactExports.isValidElement(_e))return;if(_e.type===reactExports.Fragment){j.push.apply(j,createRoutesFromChildren(_e.props.children,g));return}_e.type!==Route&&invariant(!1),!_e.props.index||!_e.props.children||invariant(!1);let tt=[...g,et],nt={id:_e.props.id||tt.join("-"),caseSensitive:_e.props.caseSensitive,element:_e.props.element,index:_e.props.index,path:_e.props.path,loader:_e.props.loader,action:_e.props.action,errorElement:_e.props.errorElement,hasErrorBoundary:_e.props.errorElement!=null,shouldRevalidate:_e.props.shouldRevalidate,handle:_e.props.handle};_e.props.children&&(nt.children=createRoutesFromChildren(_e.props.children,tt)),j.push(nt)}),j}function enhanceManualRouteObjects($){return $.map(g=>{let j=_extends$2({},g);return j.hasErrorBoundary==null&&(j.hasErrorBoundary=j.errorElement!=null),j.children&&(j.children=enhanceManualRouteObjects(j.children)),j})}/**
 * React Router DOM v6.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function($){for(var g=1;g<arguments.length;g++){var j=arguments[g];for(var _e in j)Object.prototype.hasOwnProperty.call(j,_e)&&($[_e]=j[_e])}return $},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1($,g){if($==null)return{};var j={},_e=Object.keys($),et,tt;for(tt=0;tt<_e.length;tt++)et=_e[tt],!(g.indexOf(et)>=0)&&(j[et]=$[et]);return j}function isModifiedEvent($){return!!($.metaKey||$.altKey||$.ctrlKey||$.shiftKey)}function shouldProcessLinkClick($,g){return $.button===0&&(!g||g==="_self")&&!isModifiedEvent($)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_excluded2=["aria-current","caseSensitive","className","end","style","to","children"];function createBrowserRouter($,g){return createRouter({basename:g==null?void 0:g.basename,history:createBrowserHistory({window:g==null?void 0:g.window}),hydrationData:(g==null?void 0:g.hydrationData)||parseHydrationData(),routes:enhanceManualRouteObjects($)}).initialize()}function parseHydrationData(){var $;let g=($=window)==null?void 0:$.__staticRouterHydrationData;return g&&g.errors&&(g=_extends$1({},g,{errors:deserializeErrors(g.errors)})),g}function deserializeErrors($){if(!$)return null;let g=Object.entries($),j={};for(let[_e,et]of g)if(et&&et.__type==="RouteErrorResponse")j[_e]=new ErrorResponse(et.status,et.statusText,et.data,et.internal===!0);else if(et&&et.__type==="Error"){let tt=new Error(et.message);tt.stack="",j[_e]=tt}else j[_e]=et;return j}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Link=reactExports.forwardRef(function(g,j){let{onClick:_e,relative:et,reloadDocument:tt,replace:nt,state:rt,target:it,to:st,preventScrollReset:ot}=g,at=_objectWithoutPropertiesLoose$1(g,_excluded$1),lt=typeof st=="string"?st:createPath(st),ut=/^[a-z+]+:\/\//i.test(lt)||lt.startsWith("//"),ht=lt,ft=!1;if(isBrowser&&ut){let yt=new URL(window.location.href),Et=lt.startsWith("//")?new URL(yt.protocol+lt):new URL(lt);Et.origin===yt.origin?ht=Et.pathname+Et.search+Et.hash:ft=!0}let gt=useHref(ht,{relative:et}),dt=useLinkClickHandler(ht,{replace:nt,state:rt,target:it,preventScrollReset:ot,relative:et});function mt(yt){_e&&_e(yt),yt.defaultPrevented||dt(yt)}return reactExports.createElement("a",_extends$1({},at,{href:ut?lt:gt,onClick:ft||tt?_e:mt,ref:j,target:it}))}),NavLink=reactExports.forwardRef(function(g,j){let{"aria-current":_e="page",caseSensitive:et=!1,className:tt="",end:nt=!1,style:rt,to:it,children:st}=g,ot=_objectWithoutPropertiesLoose$1(g,_excluded2),at=useResolvedPath(it,{relative:ot.relative}),lt=useLocation(),ut=reactExports.useContext(DataRouterStateContext),{navigator:ht}=reactExports.useContext(NavigationContext),ft=ht.encodeLocation?ht.encodeLocation(at).pathname:at.pathname,gt=lt.pathname,dt=ut&&ut.navigation&&ut.navigation.location?ut.navigation.location.pathname:null;et||(gt=gt.toLowerCase(),dt=dt?dt.toLowerCase():null,ft=ft.toLowerCase());let mt=gt===ft||!nt&&gt.startsWith(ft)&&gt.charAt(ft.length)==="/",yt=dt!=null&&(dt===ft||!nt&&dt.startsWith(ft)&&dt.charAt(ft.length)==="/"),Et=mt?_e:void 0,Ct;typeof tt=="function"?Ct=tt({isActive:mt,isPending:yt}):Ct=[tt,mt?"active":null,yt?"pending":null].filter(Boolean).join(" ");let kt=typeof rt=="function"?rt({isActive:mt,isPending:yt}):rt;return reactExports.createElement(Link,_extends$1({},ot,{"aria-current":Et,className:Ct,ref:j,style:kt,to:it}),typeof st=="function"?st({isActive:mt,isPending:yt}):st)});var DataRouterHook;(function($){$.UseScrollRestoration="useScrollRestoration",$.UseSubmitImpl="useSubmitImpl",$.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function($){$.UseFetchers="useFetchers",$.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler($,g){let{target:j,replace:_e,state:et,preventScrollReset:tt,relative:nt}=g===void 0?{}:g,rt=useNavigate(),it=useLocation(),st=useResolvedPath($,{relative:nt});return reactExports.useCallback(ot=>{if(shouldProcessLinkClick(ot,j)){ot.preventDefault();let at=_e!==void 0?_e:createPath(it)===createPath(st);rt($,{replace:at,state:et,preventScrollReset:tt,relative:nt})}},[it,rt,st,_e,et,j,$,tt,nt])}var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function($){function g(Nt,It){var Ht=Nt.length;Nt.push(It);e:for(;0<Ht;){var Gt=Ht-1>>>1,Kt=Nt[Gt];if(0<et(Kt,It))Nt[Gt]=It,Nt[Ht]=Kt,Ht=Gt;else break e}}function j(Nt){return Nt.length===0?null:Nt[0]}function _e(Nt){if(Nt.length===0)return null;var It=Nt[0],Ht=Nt.pop();if(Ht!==It){Nt[0]=Ht;e:for(var Gt=0,Kt=Nt.length,rn=Kt>>>1;Gt<rn;){var sn=2*(Gt+1)-1,cn=Nt[sn],un=sn+1,En=Nt[un];if(0>et(cn,Ht))un<Kt&&0>et(En,cn)?(Nt[Gt]=En,Nt[un]=Ht,Gt=un):(Nt[Gt]=cn,Nt[sn]=Ht,Gt=sn);else if(un<Kt&&0>et(En,Ht))Nt[Gt]=En,Nt[un]=Ht,Gt=un;else break e}}return It}function et(Nt,It){var Ht=Nt.sortIndex-It.sortIndex;return Ht!==0?Ht:Nt.id-It.id}if(typeof performance=="object"&&typeof performance.now=="function"){var tt=performance;$.unstable_now=function(){return tt.now()}}else{var nt=Date,rt=nt.now();$.unstable_now=function(){return nt.now()-rt}}var it=[],st=[],ot=1,at=null,lt=3,ut=!1,ht=!1,ft=!1,gt=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,mt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function yt(Nt){for(var It=j(st);It!==null;){if(It.callback===null)_e(st);else if(It.startTime<=Nt)_e(st),It.sortIndex=It.expirationTime,g(it,It);else break;It=j(st)}}function Et(Nt){if(ft=!1,yt(Nt),!ht)if(j(it)!==null)ht=!0,Yt(Ct);else{var It=j(st);It!==null&&Ut(Et,It.startTime-Nt)}}function Ct(Nt,It){ht=!1,ft&&(ft=!1,dt(Pt),Pt=-1),ut=!0;var Ht=lt;try{for(yt(It),at=j(it);at!==null&&(!(at.expirationTime>It)||Nt&&!bt());){var Gt=at.callback;if(typeof Gt=="function"){at.callback=null,lt=at.priorityLevel;var Kt=Gt(at.expirationTime<=It);It=$.unstable_now(),typeof Kt=="function"?at.callback=Kt:at===j(it)&&_e(it),yt(It)}else _e(it);at=j(it)}if(at!==null)var rn=!0;else{var sn=j(st);sn!==null&&Ut(Et,sn.startTime-It),rn=!1}return rn}finally{at=null,lt=Ht,ut=!1}}var kt=!1,St=null,Pt=-1,Bt=5,xt=-1;function bt(){return!($.unstable_now()-xt<Bt)}function $t(){if(St!==null){var Nt=$.unstable_now();xt=Nt;var It=!0;try{It=St(!0,Nt)}finally{It?Mt():(kt=!1,St=null)}}else kt=!1}var Mt;if(typeof mt=="function")Mt=function(){mt($t)};else if(typeof MessageChannel<"u"){var Ot=new MessageChannel,jt=Ot.port2;Ot.port1.onmessage=$t,Mt=function(){jt.postMessage(null)}}else Mt=function(){gt($t,0)};function Yt(Nt){St=Nt,kt||(kt=!0,Mt())}function Ut(Nt,It){Pt=gt(function(){Nt($.unstable_now())},It)}$.unstable_IdlePriority=5,$.unstable_ImmediatePriority=1,$.unstable_LowPriority=4,$.unstable_NormalPriority=3,$.unstable_Profiling=null,$.unstable_UserBlockingPriority=2,$.unstable_cancelCallback=function(Nt){Nt.callback=null},$.unstable_continueExecution=function(){ht||ut||(ht=!0,Yt(Ct))},$.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Bt=0<Nt?Math.floor(1e3/Nt):5},$.unstable_getCurrentPriorityLevel=function(){return lt},$.unstable_getFirstCallbackNode=function(){return j(it)},$.unstable_next=function(Nt){switch(lt){case 1:case 2:case 3:var It=3;break;default:It=lt}var Ht=lt;lt=It;try{return Nt()}finally{lt=Ht}},$.unstable_pauseExecution=function(){},$.unstable_requestPaint=function(){},$.unstable_runWithPriority=function(Nt,It){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var Ht=lt;lt=Nt;try{return It()}finally{lt=Ht}},$.unstable_scheduleCallback=function(Nt,It,Ht){var Gt=$.unstable_now();switch(typeof Ht=="object"&&Ht!==null?(Ht=Ht.delay,Ht=typeof Ht=="number"&&0<Ht?Gt+Ht:Gt):Ht=Gt,Nt){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=Ht+Kt,Nt={id:ot++,callback:It,priorityLevel:Nt,startTime:Ht,expirationTime:Kt,sortIndex:-1},Ht>Gt?(Nt.sortIndex=Ht,g(st,Nt),j(it)===null&&Nt===j(st)&&(ft?(dt(Pt),Pt=-1):ft=!0,Ut(Et,Ht-Gt))):(Nt.sortIndex=Kt,g(it,Nt),ht||ut||(ht=!0,Yt(Ct))),Nt},$.unstable_shouldYield=bt,$.unstable_wrapCallback=function(Nt){var It=lt;return function(){var Ht=lt;lt=It;try{return Nt.apply(this,arguments)}finally{lt=Ht}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2($){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+$,j=1;j<arguments.length;j++)g+="&args[]="+encodeURIComponent(arguments[j]);return"Minified React error #"+$+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa($,g){ha($,g),ha($+"Capture",g)}function ha($,g){for(ea[$]=g,$=0;$<g.length;$++)da.add(g[$])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa($){return ja.call(ma,$)?!0:ja.call(la,$)?!1:ka.test($)?ma[$]=!0:(la[$]=!0,!1)}function pa($,g,j,_e){if(j!==null&&j.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return _e?!1:j!==null?!j.acceptsBooleans:($=$.toLowerCase().slice(0,5),$!=="data-"&&$!=="aria-");default:return!1}}function qa($,g,j,_e){if(g===null||typeof g>"u"||pa($,g,j,_e))return!0;if(_e)return!1;if(j!==null)switch(j.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v$2($,g,j,_e,et,tt,nt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=_e,this.attributeNamespace=et,this.mustUseProperty=j,this.propertyName=$,this.type=g,this.sanitizeURL=tt,this.removeEmptyString=nt}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){z[$]=new v$2($,0,!1,$,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var g=$[0];z[g]=new v$2(g,1,!1,$[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function($){z[$]=new v$2($,2,!1,$.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){z[$]=new v$2($,2,!1,$,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){z[$]=new v$2($,3,!1,$.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function($){z[$]=new v$2($,3,!0,$,null,!1,!1)});["capture","download"].forEach(function($){z[$]=new v$2($,4,!1,$,null,!1,!1)});["cols","rows","size","span"].forEach(function($){z[$]=new v$2($,6,!1,$,null,!1,!1)});["rowSpan","start"].forEach(function($){z[$]=new v$2($,5,!1,$.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var g=$.replace(ra,sa);z[g]=new v$2(g,1,!1,$,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var g=$.replace(ra,sa);z[g]=new v$2(g,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function($){var g=$.replace(ra,sa);z[g]=new v$2(g,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function($){z[$]=new v$2($,1,!1,$.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function($){z[$]=new v$2($,1,!1,$.toLowerCase(),null,!0,!0)});function ta($,g,j,_e){var et=z.hasOwnProperty(g)?z[g]:null;(et!==null?et.type!==0:_e||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,j,et,_e)&&(j=null),_e||et===null?oa(g)&&(j===null?$.removeAttribute(g):$.setAttribute(g,""+j)):et.mustUseProperty?$[et.propertyName]=j===null?et.type===3?!1:"":j:(g=et.attributeName,_e=et.attributeNamespace,j===null?$.removeAttribute(g):(et=et.type,j=et===3||et===4&&j===!0?"":""+j,_e?$.setAttributeNS(_e,g,j):$.setAttribute(g,j))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka($){return $===null||typeof $!="object"?null:($=Ja&&$[Ja]||$["@@iterator"],typeof $=="function"?$:null)}var A=Object.assign,La;function Ma($){if(La===void 0)try{throw Error()}catch(j){var g=j.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+$}var Na=!1;function Oa($,g){if(!$||Na)return"";Na=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(st){var _e=st}Reflect.construct($,[],g)}else{try{g.call()}catch(st){_e=st}$.call(g.prototype)}else{try{throw Error()}catch(st){_e=st}$()}}catch(st){if(st&&_e&&typeof st.stack=="string"){for(var et=st.stack.split(`
`),tt=_e.stack.split(`
`),nt=et.length-1,rt=tt.length-1;1<=nt&&0<=rt&&et[nt]!==tt[rt];)rt--;for(;1<=nt&&0<=rt;nt--,rt--)if(et[nt]!==tt[rt]){if(nt!==1||rt!==1)do if(nt--,rt--,0>rt||et[nt]!==tt[rt]){var it=`
`+et[nt].replace(" at new "," at ");return $.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",$.displayName)),it}while(1<=nt&&0<=rt);break}}}finally{Na=!1,Error.prepareStackTrace=j}return($=$?$.displayName||$.name:"")?Ma($):""}function Pa($){switch($.tag){case 5:return Ma($.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return $=Oa($.type,!1),$;case 11:return $=Oa($.type.render,!1),$;case 1:return $=Oa($.type,!0),$;default:return""}}function Qa($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case Ca:return($.displayName||"Context")+".Consumer";case Ba:return($._context.displayName||"Context")+".Provider";case Da:var g=$.render;return $=$.displayName,$||($=g.displayName||g.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case Ga:return g=$.displayName||null,g!==null?g:Qa($.type)||"Memo";case Ha:g=$._payload,$=$._init;try{return Qa($(g))}catch{}}return null}function Ra($){var g=$.type;switch($.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=g.render,$=$.displayName||$.name||"",g.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa($){switch(typeof $){case"boolean":case"number":case"string":case"undefined":return $;case"object":return $;default:return""}}function Ta($){var g=$.type;return($=$.nodeName)&&$.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua($){var g=Ta($)?"checked":"value",j=Object.getOwnPropertyDescriptor($.constructor.prototype,g),_e=""+$[g];if(!$.hasOwnProperty(g)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var et=j.get,tt=j.set;return Object.defineProperty($,g,{configurable:!0,get:function(){return et.call(this)},set:function(nt){_e=""+nt,tt.call(this,nt)}}),Object.defineProperty($,g,{enumerable:j.enumerable}),{getValue:function(){return _e},setValue:function(nt){_e=""+nt},stopTracking:function(){$._valueTracker=null,delete $[g]}}}}function Va($){$._valueTracker||($._valueTracker=Ua($))}function Wa($){if(!$)return!1;var g=$._valueTracker;if(!g)return!0;var j=g.getValue(),_e="";return $&&(_e=Ta($)?$.checked?"true":"false":$.value),$=_e,$!==j?(g.setValue($),!0):!1}function Xa($){if($=$||(typeof document<"u"?document:void 0),typeof $>"u")return null;try{return $.activeElement||$.body}catch{return $.body}}function Ya($,g){var j=g.checked;return A({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:j??$._wrapperState.initialChecked})}function Za($,g){var j=g.defaultValue==null?"":g.defaultValue,_e=g.checked!=null?g.checked:g.defaultChecked;j=Sa(g.value!=null?g.value:j),$._wrapperState={initialChecked:_e,initialValue:j,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab($,g){g=g.checked,g!=null&&ta($,"checked",g,!1)}function bb($,g){ab($,g);var j=Sa(g.value),_e=g.type;if(j!=null)_e==="number"?(j===0&&$.value===""||$.value!=j)&&($.value=""+j):$.value!==""+j&&($.value=""+j);else if(_e==="submit"||_e==="reset"){$.removeAttribute("value");return}g.hasOwnProperty("value")?cb($,g.type,j):g.hasOwnProperty("defaultValue")&&cb($,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&($.defaultChecked=!!g.defaultChecked)}function db($,g,j){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var _e=g.type;if(!(_e!=="submit"&&_e!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+$._wrapperState.initialValue,j||g===$.value||($.value=g),$.defaultValue=g}j=$.name,j!==""&&($.name=""),$.defaultChecked=!!$._wrapperState.initialChecked,j!==""&&($.name=j)}function cb($,g,j){(g!=="number"||Xa($.ownerDocument)!==$)&&(j==null?$.defaultValue=""+$._wrapperState.initialValue:$.defaultValue!==""+j&&($.defaultValue=""+j))}var eb=Array.isArray;function fb($,g,j,_e){if($=$.options,g){g={};for(var et=0;et<j.length;et++)g["$"+j[et]]=!0;for(j=0;j<$.length;j++)et=g.hasOwnProperty("$"+$[j].value),$[j].selected!==et&&($[j].selected=et),et&&_e&&($[j].defaultSelected=!0)}else{for(j=""+Sa(j),g=null,et=0;et<$.length;et++){if($[et].value===j){$[et].selected=!0,_e&&($[et].defaultSelected=!0);return}g!==null||$[et].disabled||(g=$[et])}g!==null&&(g.selected=!0)}}function gb($,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A({},g,{value:void 0,defaultValue:void 0,children:""+$._wrapperState.initialValue})}function hb($,g){var j=g.value;if(j==null){if(j=g.children,g=g.defaultValue,j!=null){if(g!=null)throw Error(p$2(92));if(eb(j)){if(1<j.length)throw Error(p$2(93));j=j[0]}g=j}g==null&&(g=""),j=g}$._wrapperState={initialValue:Sa(j)}}function ib($,g){var j=Sa(g.value),_e=Sa(g.defaultValue);j!=null&&(j=""+j,j!==$.value&&($.value=j),g.defaultValue==null&&$.defaultValue!==j&&($.defaultValue=j)),_e!=null&&($.defaultValue=""+_e)}function jb($){var g=$.textContent;g===$._wrapperState.initialValue&&g!==""&&g!==null&&($.value=g)}function kb($){switch($){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb($,g){return $==null||$==="http://www.w3.org/1999/xhtml"?kb(g):$==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":$}var mb,nb=function($){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,j,_e,et){MSApp.execUnsafeLocalFunction(function(){return $(g,j,_e,et)})}:$}(function($,g){if($.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in $)$.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;$.firstChild;)$.removeChild($.firstChild);for(;g.firstChild;)$.appendChild(g.firstChild)}});function ob($,g){if(g){var j=$.firstChild;if(j&&j===$.lastChild&&j.nodeType===3){j.nodeValue=g;return}}$.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function($){qb.forEach(function(g){g=g+$.charAt(0).toUpperCase()+$.substring(1),pb[g]=pb[$]})});function rb($,g,j){return g==null||typeof g=="boolean"||g===""?"":j||typeof g!="number"||g===0||pb.hasOwnProperty($)&&pb[$]?(""+g).trim():g+"px"}function sb($,g){$=$.style;for(var j in g)if(g.hasOwnProperty(j)){var _e=j.indexOf("--")===0,et=rb(j,g[j],_e);j==="float"&&(j="cssFloat"),_e?$.setProperty(j,et):$[j]=et}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub($,g){if(g){if(tb[$]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$2(137,$));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$2(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$2(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$2(62))}}function vb($,g){if($.indexOf("-")===-1)return typeof g.is=="string";switch($){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb($){return $=$.target||$.srcElement||window,$.correspondingUseElement&&($=$.correspondingUseElement),$.nodeType===3?$.parentNode:$}var yb=null,zb=null,Ab=null;function Bb($){if($=Cb($)){if(typeof yb!="function")throw Error(p$2(280));var g=$.stateNode;g&&(g=Db(g),yb($.stateNode,$.type,g))}}function Eb($){zb?Ab?Ab.push($):Ab=[$]:zb=$}function Fb(){if(zb){var $=zb,g=Ab;if(Ab=zb=null,Bb($),g)for($=0;$<g.length;$++)Bb(g[$])}}function Gb($,g){return $(g)}function Hb(){}var Ib=!1;function Jb($,g,j){if(Ib)return $(g,j);Ib=!0;try{return Gb($,g,j)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb($,g){var j=$.stateNode;if(j===null)return null;var _e=Db(j);if(_e===null)return null;j=_e[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_e=!_e.disabled)||($=$.type,_e=!($==="button"||$==="input"||$==="select"||$==="textarea")),$=!_e;break e;default:$=!1}if($)return null;if(j&&typeof j!="function")throw Error(p$2(231,g,typeof j));return j}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb($,g,j,_e,et,tt,nt,rt,it){var st=Array.prototype.slice.call(arguments,3);try{g.apply(j,st)}catch(ot){this.onError(ot)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function($){Ob=!0,Pb=$}};function Tb($,g,j,_e,et,tt,nt,rt,it){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub($,g,j,_e,et,tt,nt,rt,it){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=st)}}function Vb($){var g=$,j=$;if($.alternate)for(;g.return;)g=g.return;else{$=g;do g=$,g.flags&4098&&(j=g.return),$=g.return;while($)}return g.tag===3?j:null}function Wb($){if($.tag===13){var g=$.memoizedState;if(g===null&&($=$.alternate,$!==null&&(g=$.memoizedState)),g!==null)return g.dehydrated}return null}function Xb($){if(Vb($)!==$)throw Error(p$2(188))}function Yb($){var g=$.alternate;if(!g){if(g=Vb($),g===null)throw Error(p$2(188));return g!==$?null:$}for(var j=$,_e=g;;){var et=j.return;if(et===null)break;var tt=et.alternate;if(tt===null){if(_e=et.return,_e!==null){j=_e;continue}break}if(et.child===tt.child){for(tt=et.child;tt;){if(tt===j)return Xb(et),$;if(tt===_e)return Xb(et),g;tt=tt.sibling}throw Error(p$2(188))}if(j.return!==_e.return)j=et,_e=tt;else{for(var nt=!1,rt=et.child;rt;){if(rt===j){nt=!0,j=et,_e=tt;break}if(rt===_e){nt=!0,_e=et,j=tt;break}rt=rt.sibling}if(!nt){for(rt=tt.child;rt;){if(rt===j){nt=!0,j=tt,_e=et;break}if(rt===_e){nt=!0,_e=tt,j=et;break}rt=rt.sibling}if(!nt)throw Error(p$2(189))}}if(j.alternate!==_e)throw Error(p$2(190))}if(j.tag!==3)throw Error(p$2(188));return j.stateNode.current===j?$:g}function Zb($){return $=Yb($),$!==null?$b($):null}function $b($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var g=$b($);if(g!==null)return g;$=$.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc($){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,$,void 0,($.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc($){return $>>>=0,$===0?32:31-(pc($)/qc|0)|0}var rc=64,sc=4194304;function tc($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function uc($,g){var j=$.pendingLanes;if(j===0)return 0;var _e=0,et=$.suspendedLanes,tt=$.pingedLanes,nt=j&268435455;if(nt!==0){var rt=nt&~et;rt!==0?_e=tc(rt):(tt&=nt,tt!==0&&(_e=tc(tt)))}else nt=j&~et,nt!==0?_e=tc(nt):tt!==0&&(_e=tc(tt));if(_e===0)return 0;if(g!==0&&g!==_e&&!(g&et)&&(et=_e&-_e,tt=g&-g,et>=tt||et===16&&(tt&4194240)!==0))return g;if(_e&4&&(_e|=j&16),g=$.entangledLanes,g!==0)for($=$.entanglements,g&=_e;0<g;)j=31-oc(g),et=1<<j,_e|=$[j],g&=~et;return _e}function vc($,g){switch($){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc($,g){for(var j=$.suspendedLanes,_e=$.pingedLanes,et=$.expirationTimes,tt=$.pendingLanes;0<tt;){var nt=31-oc(tt),rt=1<<nt,it=et[nt];it===-1?(!(rt&j)||rt&_e)&&(et[nt]=vc(rt,g)):it<=g&&($.expiredLanes|=rt),tt&=~rt}}function xc($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function yc(){var $=rc;return rc<<=1,!(rc&4194240)&&(rc=64),$}function zc($){for(var g=[],j=0;31>j;j++)g.push($);return g}function Ac($,g,j){$.pendingLanes|=g,g!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,g=31-oc(g),$[g]=j}function Bc($,g){var j=$.pendingLanes&~g;$.pendingLanes=g,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=g,$.mutableReadLanes&=g,$.entangledLanes&=g,g=$.entanglements;var _e=$.eventTimes;for($=$.expirationTimes;0<j;){var et=31-oc(j),tt=1<<et;g[et]=0,_e[et]=-1,$[et]=-1,j&=~tt}}function Cc($,g){var j=$.entangledLanes|=g;for($=$.entanglements;j;){var _e=31-oc(j),et=1<<_e;et&g|$[_e]&g&&($[_e]|=g),j&=~et}}var C$1=0;function Dc($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc($,g){switch($){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc($,g,j,_e,et,tt){return $===null||$.nativeEvent!==tt?($={blockedOn:g,domEventName:j,eventSystemFlags:_e,nativeEvent:tt,targetContainers:[et]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),$):($.eventSystemFlags|=_e,g=$.targetContainers,et!==null&&g.indexOf(et)===-1&&g.push(et),$)}function Uc($,g,j,_e,et){switch(g){case"focusin":return Lc=Tc(Lc,$,g,j,_e,et),!0;case"dragenter":return Mc=Tc(Mc,$,g,j,_e,et),!0;case"mouseover":return Nc=Tc(Nc,$,g,j,_e,et),!0;case"pointerover":var tt=et.pointerId;return Oc.set(tt,Tc(Oc.get(tt)||null,$,g,j,_e,et)),!0;case"gotpointercapture":return tt=et.pointerId,Pc.set(tt,Tc(Pc.get(tt)||null,$,g,j,_e,et)),!0}return!1}function Vc($){var g=Wc($.target);if(g!==null){var j=Vb(g);if(j!==null){if(g=j.tag,g===13){if(g=Wb(j),g!==null){$.blockedOn=g,Ic($.priority,function(){Gc(j)});return}}else if(g===3&&j.stateNode.current.memoizedState.isDehydrated){$.blockedOn=j.tag===3?j.stateNode.containerInfo:null;return}}}$.blockedOn=null}function Xc($){if($.blockedOn!==null)return!1;for(var g=$.targetContainers;0<g.length;){var j=Yc($.domEventName,$.eventSystemFlags,g[0],$.nativeEvent);if(j===null){j=$.nativeEvent;var _e=new j.constructor(j.type,j);wb=_e,j.target.dispatchEvent(_e),wb=null}else return g=Cb(j),g!==null&&Fc(g),$.blockedOn=j,!1;g.shift()}return!0}function Zc($,g,j){Xc($)&&j.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad($,g){$.blockedOn===g&&($.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd($){function g(et){return ad(et,$)}if(0<Kc.length){ad(Kc[0],$);for(var j=1;j<Kc.length;j++){var _e=Kc[j];_e.blockedOn===$&&(_e.blockedOn=null)}}for(Lc!==null&&ad(Lc,$),Mc!==null&&ad(Mc,$),Nc!==null&&ad(Nc,$),Oc.forEach(g),Pc.forEach(g),j=0;j<Qc.length;j++)_e=Qc[j],_e.blockedOn===$&&(_e.blockedOn=null);for(;0<Qc.length&&(j=Qc[0],j.blockedOn===null);)Vc(j),j.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed($,g,j,_e){var et=C$1,tt=cd.transition;cd.transition=null;try{C$1=1,fd($,g,j,_e)}finally{C$1=et,cd.transition=tt}}function gd($,g,j,_e){var et=C$1,tt=cd.transition;cd.transition=null;try{C$1=4,fd($,g,j,_e)}finally{C$1=et,cd.transition=tt}}function fd($,g,j,_e){if(dd){var et=Yc($,g,j,_e);if(et===null)hd($,g,_e,id$2,j),Sc($,_e);else if(Uc(et,$,g,j,_e))_e.stopPropagation();else if(Sc($,_e),g&4&&-1<Rc.indexOf($)){for(;et!==null;){var tt=Cb(et);if(tt!==null&&Ec(tt),tt=Yc($,g,j,_e),tt===null&&hd($,g,_e,id$2,j),tt===et)break;et=tt}et!==null&&_e.stopPropagation()}else hd($,g,_e,null,j)}}var id$2=null;function Yc($,g,j,_e){if(id$2=null,$=xb(_e),$=Wc($),$!==null)if(g=Vb($),g===null)$=null;else if(j=g.tag,j===13){if($=Wb(g),$!==null)return $;$=null}else if(j===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;$=null}else g!==$&&($=null);return id$2=$,null}function jd($){switch($){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var $,g=ld,j=g.length,_e,et="value"in kd?kd.value:kd.textContent,tt=et.length;for($=0;$<j&&g[$]===et[$];$++);var nt=j-$;for(_e=1;_e<=nt&&g[j-_e]===et[tt-_e];_e++);return md=et.slice($,1<_e?1-_e:void 0)}function od($){var g=$.keyCode;return"charCode"in $?($=$.charCode,$===0&&g===13&&($=13)):$=g,$===10&&($=13),32<=$||$===13?$:0}function pd(){return!0}function qd(){return!1}function rd($){function g(j,_e,et,tt,nt){this._reactName=j,this._targetInst=et,this.type=_e,this.nativeEvent=tt,this.target=nt,this.currentTarget=null;for(var rt in $)$.hasOwnProperty(rt)&&(j=$[rt],this[rt]=j?j(tt):tt[rt]);return this.isDefaultPrevented=(tt.defaultPrevented!=null?tt.defaultPrevented:tt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var j=this.nativeEvent;j&&(j.preventDefault?j.preventDefault():typeof j.returnValue!="unknown"&&(j.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var j=this.nativeEvent;j&&(j.stopPropagation?j.stopPropagation():typeof j.cancelBubble!="unknown"&&(j.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function($){return $.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function($){return $.relatedTarget===void 0?$.fromElement===$.srcElement?$.toElement:$.fromElement:$.relatedTarget},movementX:function($){return"movementX"in $?$.movementX:($!==yd&&(yd&&$.type==="mousemove"?(wd=$.screenX-yd.screenX,xd=$.screenY-yd.screenY):xd=wd=0,yd=$),wd)},movementY:function($){return"movementY"in $?$.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function($){return"clipboardData"in $?$.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd($){var g=this.nativeEvent;return g.getModifierState?g.getModifierState($):($=Od[$])?!!g[$]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function($){if($.key){var g=Md[$.key]||$.key;if(g!=="Unidentified")return g}return $.type==="keypress"?($=od($),$===13?"Enter":String.fromCharCode($)):$.type==="keydown"||$.type==="keyup"?Nd[$.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function($){return $.type==="keypress"?od($):0},keyCode:function($){return $.type==="keydown"||$.type==="keyup"?$.keyCode:0},which:function($){return $.type==="keypress"?od($):$.type==="keydown"||$.type==="keyup"?$.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function($){return"deltaX"in $?$.deltaX:"wheelDeltaX"in $?-$.wheelDeltaX:0},deltaY:function($){return"deltaY"in $?$.deltaY:"wheelDeltaY"in $?-$.wheelDeltaY:"wheelDelta"in $?-$.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge($,g){switch($){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he($){return $=$.detail,typeof $=="object"&&"data"in $?$.data:null}var ie$2=!1;function je($,g){switch($){case"compositionend":return he(g);case"keypress":return g.which!==32?null:(fe=!0,ee);case"textInput":return $=g.data,$===ee&&fe?null:$;default:return null}}function ke($,g){if(ie$2)return $==="compositionend"||!ae&&ge($,g)?($=nd(),md=ld=kd=null,ie$2=!1,$):null;switch($){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me($){var g=$&&$.nodeName&&$.nodeName.toLowerCase();return g==="input"?!!le[$.type]:g==="textarea"}function ne($,g,j,_e){Eb(_e),g=oe(g,"onChange"),0<g.length&&(j=new td("onChange","change",null,j,_e),$.push({event:j,listeners:g}))}var pe=null,qe=null;function re($){se($,0)}function te($){var g=ue($);if(Wa(g))return $}function ve($,g){if($==="change")return g}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be($){if($.propertyName==="value"&&te(qe)){var g=[];ne(g,qe,$,xb($)),Jb(re,g)}}function Ce($,g,j){$==="focusin"?(Ae(),pe=g,qe=j,pe.attachEvent("onpropertychange",Be)):$==="focusout"&&Ae()}function De($){if($==="selectionchange"||$==="keyup"||$==="keydown")return te(qe)}function Ee($,g){if($==="click")return te(g)}function Fe($,g){if($==="input"||$==="change")return te(g)}function Ge($,g){return $===g&&($!==0||1/$===1/g)||$!==$&&g!==g}var He=typeof Object.is=="function"?Object.is:Ge;function Ie($,g){if(He($,g))return!0;if(typeof $!="object"||$===null||typeof g!="object"||g===null)return!1;var j=Object.keys($),_e=Object.keys(g);if(j.length!==_e.length)return!1;for(_e=0;_e<j.length;_e++){var et=j[_e];if(!ja.call(g,et)||!He($[et],g[et]))return!1}return!0}function Je($){for(;$&&$.firstChild;)$=$.firstChild;return $}function Ke($,g){var j=Je($);$=0;for(var _e;j;){if(j.nodeType===3){if(_e=$+j.textContent.length,$<=g&&_e>=g)return{node:j,offset:g-$};$=_e}e:{for(;j;){if(j.nextSibling){j=j.nextSibling;break e}j=j.parentNode}j=void 0}j=Je(j)}}function Le($,g){return $&&g?$===g?!0:$&&$.nodeType===3?!1:g&&g.nodeType===3?Le($,g.parentNode):"contains"in $?$.contains(g):$.compareDocumentPosition?!!($.compareDocumentPosition(g)&16):!1:!1}function Me(){for(var $=window,g=Xa();g instanceof $.HTMLIFrameElement;){try{var j=typeof g.contentWindow.location.href=="string"}catch{j=!1}if(j)$=g.contentWindow;else break;g=Xa($.document)}return g}function Ne($){var g=$&&$.nodeName&&$.nodeName.toLowerCase();return g&&(g==="input"&&($.type==="text"||$.type==="search"||$.type==="tel"||$.type==="url"||$.type==="password")||g==="textarea"||$.contentEditable==="true")}function Oe($){var g=Me(),j=$.focusedElem,_e=$.selectionRange;if(g!==j&&j&&j.ownerDocument&&Le(j.ownerDocument.documentElement,j)){if(_e!==null&&Ne(j)){if(g=_e.start,$=_e.end,$===void 0&&($=g),"selectionStart"in j)j.selectionStart=g,j.selectionEnd=Math.min($,j.value.length);else if($=(g=j.ownerDocument||document)&&g.defaultView||window,$.getSelection){$=$.getSelection();var et=j.textContent.length,tt=Math.min(_e.start,et);_e=_e.end===void 0?tt:Math.min(_e.end,et),!$.extend&&tt>_e&&(et=_e,_e=tt,tt=et),et=Ke(j,tt);var nt=Ke(j,_e);et&&nt&&($.rangeCount!==1||$.anchorNode!==et.node||$.anchorOffset!==et.offset||$.focusNode!==nt.node||$.focusOffset!==nt.offset)&&(g=g.createRange(),g.setStart(et.node,et.offset),$.removeAllRanges(),tt>_e?($.addRange(g),$.extend(nt.node,nt.offset)):(g.setEnd(nt.node,nt.offset),$.addRange(g)))}}for(g=[],$=j;$=$.parentNode;)$.nodeType===1&&g.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<g.length;j++)$=g[j],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue($,g,j){var _e=j.window===j?j.document:j.nodeType===9?j:j.ownerDocument;Te||Qe==null||Qe!==Xa(_e)||(_e=Qe,"selectionStart"in _e&&Ne(_e)?_e={start:_e.selectionStart,end:_e.selectionEnd}:(_e=(_e.ownerDocument&&_e.ownerDocument.defaultView||window).getSelection(),_e={anchorNode:_e.anchorNode,anchorOffset:_e.anchorOffset,focusNode:_e.focusNode,focusOffset:_e.focusOffset}),Se&&Ie(Se,_e)||(Se=_e,_e=oe(Re,"onSelect"),0<_e.length&&(g=new td("onSelect","select",null,g,j),$.push({event:g,listeners:_e}),g.target=Qe)))}function Ve($,g){var j={};return j[$.toLowerCase()]=g.toLowerCase(),j["Webkit"+$]="webkit"+g,j["Moz"+$]="moz"+g,j}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze($){if(Xe[$])return Xe[$];if(!We[$])return $;var g=We[$],j;for(j in g)if(g.hasOwnProperty(j)&&j in Ye)return Xe[$]=g[j];return $}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff($,g){df.set($,g),fa(g,[$])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf($,g,j){var _e=$.type||"unknown-event";$.currentTarget=j,Ub(_e,g,void 0,$),$.currentTarget=null}function se($,g){g=(g&4)!==0;for(var j=0;j<$.length;j++){var _e=$[j],et=_e.event;_e=_e.listeners;e:{var tt=void 0;if(g)for(var nt=_e.length-1;0<=nt;nt--){var rt=_e[nt],it=rt.instance,st=rt.currentTarget;if(rt=rt.listener,it!==tt&&et.isPropagationStopped())break e;nf(et,rt,st),tt=it}else for(nt=0;nt<_e.length;nt++){if(rt=_e[nt],it=rt.instance,st=rt.currentTarget,rt=rt.listener,it!==tt&&et.isPropagationStopped())break e;nf(et,rt,st),tt=it}}}if(Qb)throw $=Rb,Qb=!1,Rb=null,$}function D($,g){var j=g[of];j===void 0&&(j=g[of]=new Set);var _e=$+"__bubble";j.has(_e)||(pf(g,$,2,!1),j.add(_e))}function qf($,g,j){var _e=0;g&&(_e|=4),pf(j,$,_e,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf($){if(!$[rf]){$[rf]=!0,da.forEach(function(j){j!=="selectionchange"&&(mf.has(j)||qf(j,!1,$),qf(j,!0,$))});var g=$.nodeType===9?$:$.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf($,g,j,_e){switch(jd(g)){case 1:var et=ed;break;case 4:et=gd;break;default:et=fd}j=et.bind(null,g,j,$),et=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(et=!0),_e?et!==void 0?$.addEventListener(g,j,{capture:!0,passive:et}):$.addEventListener(g,j,!0):et!==void 0?$.addEventListener(g,j,{passive:et}):$.addEventListener(g,j,!1)}function hd($,g,j,_e,et){var tt=_e;if(!(g&1)&&!(g&2)&&_e!==null)e:for(;;){if(_e===null)return;var nt=_e.tag;if(nt===3||nt===4){var rt=_e.stateNode.containerInfo;if(rt===et||rt.nodeType===8&&rt.parentNode===et)break;if(nt===4)for(nt=_e.return;nt!==null;){var it=nt.tag;if((it===3||it===4)&&(it=nt.stateNode.containerInfo,it===et||it.nodeType===8&&it.parentNode===et))return;nt=nt.return}for(;rt!==null;){if(nt=Wc(rt),nt===null)return;if(it=nt.tag,it===5||it===6){_e=tt=nt;continue e}rt=rt.parentNode}}_e=_e.return}Jb(function(){var st=tt,ot=xb(j),at=[];e:{var lt=df.get($);if(lt!==void 0){var ut=td,ht=$;switch($){case"keypress":if(od(j)===0)break e;case"keydown":case"keyup":ut=Rd;break;case"focusin":ht="focus",ut=Fd;break;case"focusout":ht="blur",ut=Fd;break;case"beforeblur":case"afterblur":ut=Fd;break;case"click":if(j.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Vd;break;case $e:case af:case bf:ut=Hd;break;case cf:ut=Xd;break;case"scroll":ut=vd;break;case"wheel":ut=Zd;break;case"copy":case"cut":case"paste":ut=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Td}var ft=(g&4)!==0,gt=!ft&&$==="scroll",dt=ft?lt!==null?lt+"Capture":null:lt;ft=[];for(var mt=st,yt;mt!==null;){yt=mt;var Et=yt.stateNode;if(yt.tag===5&&Et!==null&&(yt=Et,dt!==null&&(Et=Kb(mt,dt),Et!=null&&ft.push(tf(mt,Et,yt)))),gt)break;mt=mt.return}0<ft.length&&(lt=new ut(lt,ht,null,j,ot),at.push({event:lt,listeners:ft}))}}if(!(g&7)){e:{if(lt=$==="mouseover"||$==="pointerover",ut=$==="mouseout"||$==="pointerout",lt&&j!==wb&&(ht=j.relatedTarget||j.fromElement)&&(Wc(ht)||ht[uf]))break e;if((ut||lt)&&(lt=ot.window===ot?ot:(lt=ot.ownerDocument)?lt.defaultView||lt.parentWindow:window,ut?(ht=j.relatedTarget||j.toElement,ut=st,ht=ht?Wc(ht):null,ht!==null&&(gt=Vb(ht),ht!==gt||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(ut=null,ht=st),ut!==ht)){if(ft=Bd,Et="onMouseLeave",dt="onMouseEnter",mt="mouse",($==="pointerout"||$==="pointerover")&&(ft=Td,Et="onPointerLeave",dt="onPointerEnter",mt="pointer"),gt=ut==null?lt:ue(ut),yt=ht==null?lt:ue(ht),lt=new ft(Et,mt+"leave",ut,j,ot),lt.target=gt,lt.relatedTarget=yt,Et=null,Wc(ot)===st&&(ft=new ft(dt,mt+"enter",ht,j,ot),ft.target=yt,ft.relatedTarget=gt,Et=ft),gt=Et,ut&&ht)t:{for(ft=ut,dt=ht,mt=0,yt=ft;yt;yt=vf(yt))mt++;for(yt=0,Et=dt;Et;Et=vf(Et))yt++;for(;0<mt-yt;)ft=vf(ft),mt--;for(;0<yt-mt;)dt=vf(dt),yt--;for(;mt--;){if(ft===dt||dt!==null&&ft===dt.alternate)break t;ft=vf(ft),dt=vf(dt)}ft=null}else ft=null;ut!==null&&wf(at,lt,ut,ft,!1),ht!==null&&gt!==null&&wf(at,gt,ht,ft,!0)}}e:{if(lt=st?ue(st):window,ut=lt.nodeName&&lt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&lt.type==="file")var Ct=ve;else if(me(lt))if(we)Ct=Fe;else{Ct=De;var kt=Ce}else(ut=lt.nodeName)&&ut.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(Ct=Ee);if(Ct&&(Ct=Ct($,st))){ne(at,Ct,j,ot);break e}kt&&kt($,lt,st),$==="focusout"&&(kt=lt._wrapperState)&&kt.controlled&&lt.type==="number"&&cb(lt,"number",lt.value)}switch(kt=st?ue(st):window,$){case"focusin":(me(kt)||kt.contentEditable==="true")&&(Qe=kt,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(at,j,ot);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(at,j,ot)}var St;if(ae)e:{switch($){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ie$2?ge($,j)&&(Pt="onCompositionEnd"):$==="keydown"&&j.keyCode===229&&(Pt="onCompositionStart");Pt&&(de&&j.locale!=="ko"&&(ie$2||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ie$2&&(St=nd()):(kd=ot,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),kt=oe(st,Pt),0<kt.length&&(Pt=new Ld(Pt,$,null,j,ot),at.push({event:Pt,listeners:kt}),St?Pt.data=St:(St=he(j),St!==null&&(Pt.data=St)))),(St=ce?je($,j):ke($,j))&&(st=oe(st,"onBeforeInput"),0<st.length&&(ot=new Ld("onBeforeInput","beforeinput",null,j,ot),at.push({event:ot,listeners:st}),ot.data=St))}se(at,g)})}function tf($,g,j){return{instance:$,listener:g,currentTarget:j}}function oe($,g){for(var j=g+"Capture",_e=[];$!==null;){var et=$,tt=et.stateNode;et.tag===5&&tt!==null&&(et=tt,tt=Kb($,j),tt!=null&&_e.unshift(tf($,tt,et)),tt=Kb($,g),tt!=null&&_e.push(tf($,tt,et))),$=$.return}return _e}function vf($){if($===null)return null;do $=$.return;while($&&$.tag!==5);return $||null}function wf($,g,j,_e,et){for(var tt=g._reactName,nt=[];j!==null&&j!==_e;){var rt=j,it=rt.alternate,st=rt.stateNode;if(it!==null&&it===_e)break;rt.tag===5&&st!==null&&(rt=st,et?(it=Kb(j,tt),it!=null&&nt.unshift(tf(j,it,rt))):et||(it=Kb(j,tt),it!=null&&nt.push(tf(j,it,rt)))),j=j.return}nt.length!==0&&$.push({event:g,listeners:nt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf($){return(typeof $=="string"?$:""+$).replace(xf,`
`).replace(yf,"")}function Af($,g,j){if(g=zf(g),zf($)!==g&&j)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef($,g){return $==="textarea"||$==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function($){return Hf.resolve(null).then($).catch(If)}:Ff;function If($){setTimeout(function(){throw $})}function Kf($,g){var j=g,_e=0;do{var et=j.nextSibling;if($.removeChild(j),et&&et.nodeType===8)if(j=et.data,j==="/$"){if(_e===0){$.removeChild(et),bd(g);return}_e--}else j!=="$"&&j!=="$?"&&j!=="$!"||_e++;j=et}while(j);bd(g)}function Lf($){for(;$!=null;$=$.nextSibling){var g=$.nodeType;if(g===1||g===3)break;if(g===8){if(g=$.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return $}function Mf($){$=$.previousSibling;for(var g=0;$;){if($.nodeType===8){var j=$.data;if(j==="$"||j==="$!"||j==="$?"){if(g===0)return $;g--}else j==="/$"&&g++}$=$.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc($){var g=$[Of];if(g)return g;for(var j=$.parentNode;j;){if(g=j[uf]||j[Of]){if(j=g.alternate,g.child!==null||j!==null&&j.child!==null)for($=Mf($);$!==null;){if(j=$[Of])return j;$=Mf($)}return g}$=j,j=$.parentNode}return null}function Cb($){return $=$[Of]||$[uf],!$||$.tag!==5&&$.tag!==6&&$.tag!==13&&$.tag!==3?null:$}function ue($){if($.tag===5||$.tag===6)return $.stateNode;throw Error(p$2(33))}function Db($){return $[Pf]||null}var Sf=[],Tf=-1;function Uf($){return{current:$}}function E($){0>Tf||($.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G($,g){Tf++,Sf[Tf]=$.current,$.current=g}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf($,g){var j=$.type.contextTypes;if(!j)return Vf;var _e=$.stateNode;if(_e&&_e.__reactInternalMemoizedUnmaskedChildContext===g)return _e.__reactInternalMemoizedMaskedChildContext;var et={},tt;for(tt in j)et[tt]=g[tt];return _e&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=g,$.__reactInternalMemoizedMaskedChildContext=et),et}function Zf($){return $=$.childContextTypes,$!=null}function $f(){E(Wf),E(H)}function ag($,g,j){if(H.current!==Vf)throw Error(p$2(168));G(H,g),G(Wf,j)}function bg($,g,j){var _e=$.stateNode;if(g=g.childContextTypes,typeof _e.getChildContext!="function")return j;_e=_e.getChildContext();for(var et in _e)if(!(et in g))throw Error(p$2(108,Ra($)||"Unknown",et));return A({},j,_e)}function cg($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,$),G(Wf,Wf.current),!0}function dg($,g,j){var _e=$.stateNode;if(!_e)throw Error(p$2(169));j?($=bg($,g,Xf),_e.__reactInternalMemoizedMergedChildContext=$,E(Wf),E(H),G(H,$)):E(Wf),G(Wf,j)}var eg=null,fg=!1,gg=!1;function hg($){eg===null?eg=[$]:eg.push($)}function ig($){fg=!0,hg($)}function jg(){if(!gg&&eg!==null){gg=!0;var $=0,g=C$1;try{var j=eg;for(C$1=1;$<j.length;$++){var _e=j[$];do _e=_e(!0);while(_e!==null)}eg=null,fg=!1}catch(et){throw eg!==null&&(eg=eg.slice($+1)),ac(fc,jg),et}finally{C$1=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg($,g){kg[lg++]=ng,kg[lg++]=mg,mg=$,ng=g}function ug($,g,j){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=$;var _e=rg;$=sg;var et=32-oc(_e)-1;_e&=~(1<<et),j+=1;var tt=32-oc(g)+et;if(30<tt){var nt=et-et%5;tt=(_e&(1<<nt)-1).toString(32),_e>>=nt,et-=nt,rg=1<<32-oc(g)+et|j<<et|_e,sg=tt+$}else rg=1<<tt|j<<et|_e,sg=$}function vg($){$.return!==null&&(tg($,1),ug($,1,0))}function wg($){for(;$===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;$===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag($,g){var j=Bg(5,null,null,0);j.elementType="DELETED",j.stateNode=g,j.return=$,g=$.deletions,g===null?($.deletions=[j],$.flags|=16):g.push(j)}function Cg($,g){switch($.tag){case 5:var j=$.type;return g=g.nodeType!==1||j.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?($.stateNode=g,xg=$,yg=Lf(g.firstChild),!0):!1;case 6:return g=$.pendingProps===""||g.nodeType!==3?null:g,g!==null?($.stateNode=g,xg=$,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(j=qg!==null?{id:rg,overflow:sg}:null,$.memoizedState={dehydrated:g,treeContext:j,retryLane:1073741824},j=Bg(18,null,null,0),j.stateNode=g,j.return=$,$.child=j,xg=$,yg=null,!0):!1;default:return!1}}function Dg($){return($.mode&1)!==0&&($.flags&128)===0}function Eg($){if(I){var g=yg;if(g){var j=g;if(!Cg($,g)){if(Dg($))throw Error(p$2(418));g=Lf(j.nextSibling);var _e=xg;g&&Cg($,g)?Ag(_e,j):($.flags=$.flags&-4097|2,I=!1,xg=$)}}else{if(Dg($))throw Error(p$2(418));$.flags=$.flags&-4097|2,I=!1,xg=$}}}function Fg($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;xg=$}function Gg($){if($!==xg)return!1;if(!I)return Fg($),I=!0,!1;var g;if((g=$.tag!==3)&&!(g=$.tag!==5)&&(g=$.type,g=g!=="head"&&g!=="body"&&!Ef($.type,$.memoizedProps)),g&&(g=yg)){if(Dg($))throw Hg(),Error(p$2(418));for(;g;)Ag($,g),g=Lf(g.nextSibling)}if(Fg($),$.tag===13){if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p$2(317));e:{for($=$.nextSibling,g=0;$;){if($.nodeType===8){var j=$.data;if(j==="/$"){if(g===0){yg=Lf($.nextSibling);break e}g--}else j!=="$"&&j!=="$!"&&j!=="$?"||g++}$=$.nextSibling}yg=null}}else yg=xg?Lf($.stateNode.nextSibling):null;return!0}function Hg(){for(var $=yg;$;)$=Lf($.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg($){zg===null?zg=[$]:zg.push($)}var Kg=ua.ReactCurrentBatchConfig;function Lg($,g){if($&&$.defaultProps){g=A({},g),$=$.defaultProps;for(var j in $)g[j]===void 0&&(g[j]=$[j]);return g}return g}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg($){var g=Mg.current;E(Mg),$._currentValue=g}function Sg($,g,j){for(;$!==null;){var _e=$.alternate;if(($.childLanes&g)!==g?($.childLanes|=g,_e!==null&&(_e.childLanes|=g)):_e!==null&&(_e.childLanes&g)!==g&&(_e.childLanes|=g),$===j)break;$=$.return}}function Tg($,g){Ng=$,Pg=Og=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&g&&(Ug=!0),$.firstContext=null)}function Vg($){var g=$._currentValue;if(Pg!==$)if($={context:$,memoizedValue:g,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=$,Ng.dependencies={lanes:0,firstContext:$}}else Og=Og.next=$;return g}var Wg=null;function Xg($){Wg===null?Wg=[$]:Wg.push($)}function Yg($,g,j,_e){var et=g.interleaved;return et===null?(j.next=j,Xg(g)):(j.next=et.next,et.next=j),g.interleaved=j,Zg($,_e)}function Zg($,g){$.lanes|=g;var j=$.alternate;for(j!==null&&(j.lanes|=g),j=$,$=$.return;$!==null;)$.childLanes|=g,j=$.alternate,j!==null&&(j.childLanes|=g),j=$,$=$.return;return j.tag===3?j.stateNode:null}var $g=!1;function ah($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh($,g){$=$.updateQueue,g.updateQueue===$&&(g.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function ch($,g){return{eventTime:$,lane:g,tag:0,payload:null,callback:null,next:null}}function dh($,g,j){var _e=$.updateQueue;if(_e===null)return null;if(_e=_e.shared,K&2){var et=_e.pending;return et===null?g.next=g:(g.next=et.next,et.next=g),_e.pending=g,Zg($,j)}return et=_e.interleaved,et===null?(g.next=g,Xg(_e)):(g.next=et.next,et.next=g),_e.interleaved=g,Zg($,j)}function eh($,g,j){if(g=g.updateQueue,g!==null&&(g=g.shared,(j&4194240)!==0)){var _e=g.lanes;_e&=$.pendingLanes,j|=_e,g.lanes=j,Cc($,j)}}function fh($,g){var j=$.updateQueue,_e=$.alternate;if(_e!==null&&(_e=_e.updateQueue,j===_e)){var et=null,tt=null;if(j=j.firstBaseUpdate,j!==null){do{var nt={eventTime:j.eventTime,lane:j.lane,tag:j.tag,payload:j.payload,callback:j.callback,next:null};tt===null?et=tt=nt:tt=tt.next=nt,j=j.next}while(j!==null);tt===null?et=tt=g:tt=tt.next=g}else et=tt=g;j={baseState:_e.baseState,firstBaseUpdate:et,lastBaseUpdate:tt,shared:_e.shared,effects:_e.effects},$.updateQueue=j;return}$=j.lastBaseUpdate,$===null?j.firstBaseUpdate=g:$.next=g,j.lastBaseUpdate=g}function gh($,g,j,_e){var et=$.updateQueue;$g=!1;var tt=et.firstBaseUpdate,nt=et.lastBaseUpdate,rt=et.shared.pending;if(rt!==null){et.shared.pending=null;var it=rt,st=it.next;it.next=null,nt===null?tt=st:nt.next=st,nt=it;var ot=$.alternate;ot!==null&&(ot=ot.updateQueue,rt=ot.lastBaseUpdate,rt!==nt&&(rt===null?ot.firstBaseUpdate=st:rt.next=st,ot.lastBaseUpdate=it))}if(tt!==null){var at=et.baseState;nt=0,ot=st=it=null,rt=tt;do{var lt=rt.lane,ut=rt.eventTime;if((_e&lt)===lt){ot!==null&&(ot=ot.next={eventTime:ut,lane:0,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null});e:{var ht=$,ft=rt;switch(lt=g,ut=j,ft.tag){case 1:if(ht=ft.payload,typeof ht=="function"){at=ht.call(ut,at,lt);break e}at=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=ft.payload,lt=typeof ht=="function"?ht.call(ut,at,lt):ht,lt==null)break e;at=A({},at,lt);break e;case 2:$g=!0}}rt.callback!==null&&rt.lane!==0&&($.flags|=64,lt=et.effects,lt===null?et.effects=[rt]:lt.push(rt))}else ut={eventTime:ut,lane:lt,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},ot===null?(st=ot=ut,it=at):ot=ot.next=ut,nt|=lt;if(rt=rt.next,rt===null){if(rt=et.shared.pending,rt===null)break;lt=rt,rt=lt.next,lt.next=null,et.lastBaseUpdate=lt,et.shared.pending=null}}while(1);if(ot===null&&(it=at),et.baseState=it,et.firstBaseUpdate=st,et.lastBaseUpdate=ot,g=et.shared.interleaved,g!==null){et=g;do nt|=et.lane,et=et.next;while(et!==g)}else tt===null&&(et.shared.lanes=0);hh|=nt,$.lanes=nt,$.memoizedState=at}}function ih($,g,j){if($=g.effects,g.effects=null,$!==null)for(g=0;g<$.length;g++){var _e=$[g],et=_e.callback;if(et!==null){if(_e.callback=null,_e=j,typeof et!="function")throw Error(p$2(191,et));et.call(_e)}}}var jh=new aa.Component().refs;function kh($,g,j,_e){g=$.memoizedState,j=j(_e,g),j=j==null?g:A({},g,j),$.memoizedState=j,$.lanes===0&&($.updateQueue.baseState=j)}var nh={isMounted:function($){return($=$._reactInternals)?Vb($)===$:!1},enqueueSetState:function($,g,j){$=$._reactInternals;var _e=L(),et=lh($),tt=ch(_e,et);tt.payload=g,j!=null&&(tt.callback=j),g=dh($,tt,et),g!==null&&(mh(g,$,et,_e),eh(g,$,et))},enqueueReplaceState:function($,g,j){$=$._reactInternals;var _e=L(),et=lh($),tt=ch(_e,et);tt.tag=1,tt.payload=g,j!=null&&(tt.callback=j),g=dh($,tt,et),g!==null&&(mh(g,$,et,_e),eh(g,$,et))},enqueueForceUpdate:function($,g){$=$._reactInternals;var j=L(),_e=lh($),et=ch(j,_e);et.tag=2,g!=null&&(et.callback=g),g=dh($,et,_e),g!==null&&(mh(g,$,_e,j),eh(g,$,_e))}};function oh($,g,j,_e,et,tt,nt){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(_e,tt,nt):g.prototype&&g.prototype.isPureReactComponent?!Ie(j,_e)||!Ie(et,tt):!0}function ph($,g,j){var _e=!1,et=Vf,tt=g.contextType;return typeof tt=="object"&&tt!==null?tt=Vg(tt):(et=Zf(g)?Xf:H.current,_e=g.contextTypes,tt=(_e=_e!=null)?Yf($,et):Vf),g=new g(j,tt),$.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=nh,$.stateNode=g,g._reactInternals=$,_e&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=et,$.__reactInternalMemoizedMaskedChildContext=tt),g}function qh($,g,j,_e){$=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(j,_e),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(j,_e),g.state!==$&&nh.enqueueReplaceState(g,g.state,null)}function rh($,g,j,_e){var et=$.stateNode;et.props=j,et.state=$.memoizedState,et.refs=jh,ah($);var tt=g.contextType;typeof tt=="object"&&tt!==null?et.context=Vg(tt):(tt=Zf(g)?Xf:H.current,et.context=Yf($,tt)),et.state=$.memoizedState,tt=g.getDerivedStateFromProps,typeof tt=="function"&&(kh($,g,tt,j),et.state=$.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof et.getSnapshotBeforeUpdate=="function"||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(g=et.state,typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount(),g!==et.state&&nh.enqueueReplaceState(et,et.state,null),gh($,j,et,_e),et.state=$.memoizedState),typeof et.componentDidMount=="function"&&($.flags|=4194308)}function sh($,g,j){if($=j.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(j._owner){if(j=j._owner,j){if(j.tag!==1)throw Error(p$2(309));var _e=j.stateNode}if(!_e)throw Error(p$2(147,$));var et=_e,tt=""+$;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===tt?g.ref:(g=function(nt){var rt=et.refs;rt===jh&&(rt=et.refs={}),nt===null?delete rt[tt]:rt[tt]=nt},g._stringRef=tt,g)}if(typeof $!="string")throw Error(p$2(284));if(!j._owner)throw Error(p$2(290,$))}return $}function th($,g){throw $=Object.prototype.toString.call(g),Error(p$2(31,$==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":$))}function uh($){var g=$._init;return g($._payload)}function vh($){function g(dt,mt){if($){var yt=dt.deletions;yt===null?(dt.deletions=[mt],dt.flags|=16):yt.push(mt)}}function j(dt,mt){if(!$)return null;for(;mt!==null;)g(dt,mt),mt=mt.sibling;return null}function _e(dt,mt){for(dt=new Map;mt!==null;)mt.key!==null?dt.set(mt.key,mt):dt.set(mt.index,mt),mt=mt.sibling;return dt}function et(dt,mt){return dt=wh(dt,mt),dt.index=0,dt.sibling=null,dt}function tt(dt,mt,yt){return dt.index=yt,$?(yt=dt.alternate,yt!==null?(yt=yt.index,yt<mt?(dt.flags|=2,mt):yt):(dt.flags|=2,mt)):(dt.flags|=1048576,mt)}function nt(dt){return $&&dt.alternate===null&&(dt.flags|=2),dt}function rt(dt,mt,yt,Et){return mt===null||mt.tag!==6?(mt=xh(yt,dt.mode,Et),mt.return=dt,mt):(mt=et(mt,yt),mt.return=dt,mt)}function it(dt,mt,yt,Et){var Ct=yt.type;return Ct===ya?ot(dt,mt,yt.props.children,Et,yt.key):mt!==null&&(mt.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Ha&&uh(Ct)===mt.type)?(Et=et(mt,yt.props),Et.ref=sh(dt,mt,yt),Et.return=dt,Et):(Et=yh(yt.type,yt.key,yt.props,null,dt.mode,Et),Et.ref=sh(dt,mt,yt),Et.return=dt,Et)}function st(dt,mt,yt,Et){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==yt.containerInfo||mt.stateNode.implementation!==yt.implementation?(mt=zh(yt,dt.mode,Et),mt.return=dt,mt):(mt=et(mt,yt.children||[]),mt.return=dt,mt)}function ot(dt,mt,yt,Et,Ct){return mt===null||mt.tag!==7?(mt=Ah(yt,dt.mode,Et,Ct),mt.return=dt,mt):(mt=et(mt,yt),mt.return=dt,mt)}function at(dt,mt,yt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return mt=xh(""+mt,dt.mode,yt),mt.return=dt,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return yt=yh(mt.type,mt.key,mt.props,null,dt.mode,yt),yt.ref=sh(dt,null,mt),yt.return=dt,yt;case wa:return mt=zh(mt,dt.mode,yt),mt.return=dt,mt;case Ha:var Et=mt._init;return at(dt,Et(mt._payload),yt)}if(eb(mt)||Ka(mt))return mt=Ah(mt,dt.mode,yt,null),mt.return=dt,mt;th(dt,mt)}return null}function lt(dt,mt,yt,Et){var Ct=mt!==null?mt.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ct!==null?null:rt(dt,mt,""+yt,Et);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return yt.key===Ct?it(dt,mt,yt,Et):null;case wa:return yt.key===Ct?st(dt,mt,yt,Et):null;case Ha:return Ct=yt._init,lt(dt,mt,Ct(yt._payload),Et)}if(eb(yt)||Ka(yt))return Ct!==null?null:ot(dt,mt,yt,Et,null);th(dt,yt)}return null}function ut(dt,mt,yt,Et,Ct){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return dt=dt.get(yt)||null,rt(mt,dt,""+Et,Ct);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return dt=dt.get(Et.key===null?yt:Et.key)||null,it(mt,dt,Et,Ct);case wa:return dt=dt.get(Et.key===null?yt:Et.key)||null,st(mt,dt,Et,Ct);case Ha:var kt=Et._init;return ut(dt,mt,yt,kt(Et._payload),Ct)}if(eb(Et)||Ka(Et))return dt=dt.get(yt)||null,ot(mt,dt,Et,Ct,null);th(mt,Et)}return null}function ht(dt,mt,yt,Et){for(var Ct=null,kt=null,St=mt,Pt=mt=0,Bt=null;St!==null&&Pt<yt.length;Pt++){St.index>Pt?(Bt=St,St=null):Bt=St.sibling;var xt=lt(dt,St,yt[Pt],Et);if(xt===null){St===null&&(St=Bt);break}$&&St&&xt.alternate===null&&g(dt,St),mt=tt(xt,mt,Pt),kt===null?Ct=xt:kt.sibling=xt,kt=xt,St=Bt}if(Pt===yt.length)return j(dt,St),I&&tg(dt,Pt),Ct;if(St===null){for(;Pt<yt.length;Pt++)St=at(dt,yt[Pt],Et),St!==null&&(mt=tt(St,mt,Pt),kt===null?Ct=St:kt.sibling=St,kt=St);return I&&tg(dt,Pt),Ct}for(St=_e(dt,St);Pt<yt.length;Pt++)Bt=ut(St,dt,Pt,yt[Pt],Et),Bt!==null&&($&&Bt.alternate!==null&&St.delete(Bt.key===null?Pt:Bt.key),mt=tt(Bt,mt,Pt),kt===null?Ct=Bt:kt.sibling=Bt,kt=Bt);return $&&St.forEach(function(bt){return g(dt,bt)}),I&&tg(dt,Pt),Ct}function ft(dt,mt,yt,Et){var Ct=Ka(yt);if(typeof Ct!="function")throw Error(p$2(150));if(yt=Ct.call(yt),yt==null)throw Error(p$2(151));for(var kt=Ct=null,St=mt,Pt=mt=0,Bt=null,xt=yt.next();St!==null&&!xt.done;Pt++,xt=yt.next()){St.index>Pt?(Bt=St,St=null):Bt=St.sibling;var bt=lt(dt,St,xt.value,Et);if(bt===null){St===null&&(St=Bt);break}$&&St&&bt.alternate===null&&g(dt,St),mt=tt(bt,mt,Pt),kt===null?Ct=bt:kt.sibling=bt,kt=bt,St=Bt}if(xt.done)return j(dt,St),I&&tg(dt,Pt),Ct;if(St===null){for(;!xt.done;Pt++,xt=yt.next())xt=at(dt,xt.value,Et),xt!==null&&(mt=tt(xt,mt,Pt),kt===null?Ct=xt:kt.sibling=xt,kt=xt);return I&&tg(dt,Pt),Ct}for(St=_e(dt,St);!xt.done;Pt++,xt=yt.next())xt=ut(St,dt,Pt,xt.value,Et),xt!==null&&($&&xt.alternate!==null&&St.delete(xt.key===null?Pt:xt.key),mt=tt(xt,mt,Pt),kt===null?Ct=xt:kt.sibling=xt,kt=xt);return $&&St.forEach(function($t){return g(dt,$t)}),I&&tg(dt,Pt),Ct}function gt(dt,mt,yt,Et){if(typeof yt=="object"&&yt!==null&&yt.type===ya&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:e:{for(var Ct=yt.key,kt=mt;kt!==null;){if(kt.key===Ct){if(Ct=yt.type,Ct===ya){if(kt.tag===7){j(dt,kt.sibling),mt=et(kt,yt.props.children),mt.return=dt,dt=mt;break e}}else if(kt.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Ha&&uh(Ct)===kt.type){j(dt,kt.sibling),mt=et(kt,yt.props),mt.ref=sh(dt,kt,yt),mt.return=dt,dt=mt;break e}j(dt,kt);break}else g(dt,kt);kt=kt.sibling}yt.type===ya?(mt=Ah(yt.props.children,dt.mode,Et,yt.key),mt.return=dt,dt=mt):(Et=yh(yt.type,yt.key,yt.props,null,dt.mode,Et),Et.ref=sh(dt,mt,yt),Et.return=dt,dt=Et)}return nt(dt);case wa:e:{for(kt=yt.key;mt!==null;){if(mt.key===kt)if(mt.tag===4&&mt.stateNode.containerInfo===yt.containerInfo&&mt.stateNode.implementation===yt.implementation){j(dt,mt.sibling),mt=et(mt,yt.children||[]),mt.return=dt,dt=mt;break e}else{j(dt,mt);break}else g(dt,mt);mt=mt.sibling}mt=zh(yt,dt.mode,Et),mt.return=dt,dt=mt}return nt(dt);case Ha:return kt=yt._init,gt(dt,mt,kt(yt._payload),Et)}if(eb(yt))return ht(dt,mt,yt,Et);if(Ka(yt))return ft(dt,mt,yt,Et);th(dt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,mt!==null&&mt.tag===6?(j(dt,mt.sibling),mt=et(mt,yt),mt.return=dt,dt=mt):(j(dt,mt),mt=xh(yt,dt.mode,Et),mt.return=dt,dt=mt),nt(dt)):j(dt,mt)}return gt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh($){if($===Dh)throw Error(p$2(174));return $}function Ih($,g){switch(G(Gh,g),G(Fh,$),G(Eh,Dh),$=g.nodeType,$){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:$=$===8?g.parentNode:g,g=$.namespaceURI||null,$=$.tagName,g=lb(g,$)}E(Eh),G(Eh,g)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh($){Hh(Gh.current);var g=Hh(Eh.current),j=lb(g,$.type);g!==j&&(G(Fh,$),G(Eh,j))}function Lh($){Fh.current===$&&(E(Eh),E(Fh))}var M=Uf(0);function Mh($){for(var g=$;g!==null;){if(g.tag===13){var j=g.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||j.data==="$?"||j.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===$)break;for(;g.sibling===null;){if(g.return===null||g.return===$)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Nh=[];function Oh(){for(var $=0;$<Nh.length;$++)Nh[$]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$2(321))}function Wh($,g){if(g===null)return!1;for(var j=0;j<g.length&&j<$.length;j++)if(!He($[j],g[j]))return!1;return!0}function Xh($,g,j,_e,et,tt){if(Rh=tt,N$1=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Ph.current=$===null||$.memoizedState===null?Yh:Zh,$=j(_e,et),Th){tt=0;do{if(Th=!1,Uh=0,25<=tt)throw Error(p$2(301));tt+=1,P$1=O$1=null,g.updateQueue=null,Ph.current=$h,$=j(_e,et)}while(Th)}if(Ph.current=ai,g=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,g)throw Error(p$2(300));return $}function bi(){var $=Uh!==0;return Uh=0,$}function ci(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=$:P$1=P$1.next=$,P$1}function di(){if(O$1===null){var $=N$1.alternate;$=$!==null?$.memoizedState:null}else $=O$1.next;var g=P$1===null?N$1.memoizedState:P$1.next;if(g!==null)P$1=g,O$1=$;else{if($===null)throw Error(p$2(310));O$1=$,$={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=$:P$1=P$1.next=$}return P$1}function ei($,g){return typeof g=="function"?g($):g}function fi($){var g=di(),j=g.queue;if(j===null)throw Error(p$2(311));j.lastRenderedReducer=$;var _e=O$1,et=_e.baseQueue,tt=j.pending;if(tt!==null){if(et!==null){var nt=et.next;et.next=tt.next,tt.next=nt}_e.baseQueue=et=tt,j.pending=null}if(et!==null){tt=et.next,_e=_e.baseState;var rt=nt=null,it=null,st=tt;do{var ot=st.lane;if((Rh&ot)===ot)it!==null&&(it=it.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),_e=st.hasEagerState?st.eagerState:$(_e,st.action);else{var at={lane:ot,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};it===null?(rt=it=at,nt=_e):it=it.next=at,N$1.lanes|=ot,hh|=ot}st=st.next}while(st!==null&&st!==tt);it===null?nt=_e:it.next=rt,He(_e,g.memoizedState)||(Ug=!0),g.memoizedState=_e,g.baseState=nt,g.baseQueue=it,j.lastRenderedState=_e}if($=j.interleaved,$!==null){et=$;do tt=et.lane,N$1.lanes|=tt,hh|=tt,et=et.next;while(et!==$)}else et===null&&(j.lanes=0);return[g.memoizedState,j.dispatch]}function gi($){var g=di(),j=g.queue;if(j===null)throw Error(p$2(311));j.lastRenderedReducer=$;var _e=j.dispatch,et=j.pending,tt=g.memoizedState;if(et!==null){j.pending=null;var nt=et=et.next;do tt=$(tt,nt.action),nt=nt.next;while(nt!==et);He(tt,g.memoizedState)||(Ug=!0),g.memoizedState=tt,g.baseQueue===null&&(g.baseState=tt),j.lastRenderedState=tt}return[tt,_e]}function hi(){}function ii($,g){var j=N$1,_e=di(),et=g(),tt=!He(_e.memoizedState,et);if(tt&&(_e.memoizedState=et,Ug=!0),_e=_e.queue,ji(ki.bind(null,j,_e,$),[$]),_e.getSnapshot!==g||tt||P$1!==null&&P$1.memoizedState.tag&1){if(j.flags|=2048,li(9,mi.bind(null,j,_e,et,g),void 0,null),R===null)throw Error(p$2(349));Rh&30||ni(j,g,et)}return et}function ni($,g,j){$.flags|=16384,$={getSnapshot:g,value:j},g=N$1.updateQueue,g===null?(g={lastEffect:null,stores:null},N$1.updateQueue=g,g.stores=[$]):(j=g.stores,j===null?g.stores=[$]:j.push($))}function mi($,g,j,_e){g.value=j,g.getSnapshot=_e,oi(g)&&pi$1($)}function ki($,g,j){return j(function(){oi(g)&&pi$1($)})}function oi($){var g=$.getSnapshot;$=$.value;try{var j=g();return!He($,j)}catch{return!0}}function pi$1($){var g=Zg($,1);g!==null&&mh(g,$,1,-1)}function qi($){var g=ci();return typeof $=="function"&&($=$()),g.memoizedState=g.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:$},g.queue=$,$=$.dispatch=ri.bind(null,N$1,$),[g.memoizedState,$]}function li($,g,j,_e){return $={tag:$,create:g,destroy:j,deps:_e,next:null},g=N$1.updateQueue,g===null?(g={lastEffect:null,stores:null},N$1.updateQueue=g,g.lastEffect=$.next=$):(j=g.lastEffect,j===null?g.lastEffect=$.next=$:(_e=j.next,j.next=$,$.next=_e,g.lastEffect=$)),$}function si(){return di().memoizedState}function ti($,g,j,_e){var et=ci();N$1.flags|=$,et.memoizedState=li(1|g,j,void 0,_e===void 0?null:_e)}function ui($,g,j,_e){var et=di();_e=_e===void 0?null:_e;var tt=void 0;if(O$1!==null){var nt=O$1.memoizedState;if(tt=nt.destroy,_e!==null&&Wh(_e,nt.deps)){et.memoizedState=li(g,j,tt,_e);return}}N$1.flags|=$,et.memoizedState=li(1|g,j,tt,_e)}function vi($,g){return ti(8390656,8,$,g)}function ji($,g){return ui(2048,8,$,g)}function wi($,g){return ui(4,2,$,g)}function xi($,g){return ui(4,4,$,g)}function yi($,g){if(typeof g=="function")return $=$(),g($),function(){g(null)};if(g!=null)return $=$(),g.current=$,function(){g.current=null}}function zi($,g,j){return j=j!=null?j.concat([$]):null,ui(4,4,yi.bind(null,g,$),j)}function Ai(){}function Bi($,g){var j=di();g=g===void 0?null:g;var _e=j.memoizedState;return _e!==null&&g!==null&&Wh(g,_e[1])?_e[0]:(j.memoizedState=[$,g],$)}function Ci($,g){var j=di();g=g===void 0?null:g;var _e=j.memoizedState;return _e!==null&&g!==null&&Wh(g,_e[1])?_e[0]:($=$(),j.memoizedState=[$,g],$)}function Di($,g,j){return Rh&21?(He(j,g)||(j=yc(),N$1.lanes|=j,hh|=j,$.baseState=!0),g):($.baseState&&($.baseState=!1,Ug=!0),$.memoizedState=j)}function Ei($,g){var j=C$1;C$1=j!==0&&4>j?j:4,$(!0);var _e=Qh.transition;Qh.transition={};try{$(!1),g()}finally{C$1=j,Qh.transition=_e}}function Fi(){return di().memoizedState}function Gi($,g,j){var _e=lh($);if(j={lane:_e,action:j,hasEagerState:!1,eagerState:null,next:null},Hi($))Ii(g,j);else if(j=Yg($,g,j,_e),j!==null){var et=L();mh(j,$,_e,et),Ji(j,g,_e)}}function ri($,g,j){var _e=lh($),et={lane:_e,action:j,hasEagerState:!1,eagerState:null,next:null};if(Hi($))Ii(g,et);else{var tt=$.alternate;if($.lanes===0&&(tt===null||tt.lanes===0)&&(tt=g.lastRenderedReducer,tt!==null))try{var nt=g.lastRenderedState,rt=tt(nt,j);if(et.hasEagerState=!0,et.eagerState=rt,He(rt,nt)){var it=g.interleaved;it===null?(et.next=et,Xg(g)):(et.next=it.next,it.next=et),g.interleaved=et;return}}catch{}finally{}j=Yg($,g,et,_e),j!==null&&(et=L(),mh(j,$,_e,et),Ji(j,g,_e))}}function Hi($){var g=$.alternate;return $===N$1||g!==null&&g===N$1}function Ii($,g){Th=Sh=!0;var j=$.pending;j===null?g.next=g:(g.next=j.next,j.next=g),$.pending=g}function Ji($,g,j){if(j&4194240){var _e=g.lanes;_e&=$.pendingLanes,j|=_e,g.lanes=j,Cc($,j)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function($,g){return ci().memoizedState=[$,g===void 0?null:g],$},useContext:Vg,useEffect:vi,useImperativeHandle:function($,g,j){return j=j!=null?j.concat([$]):null,ti(4194308,4,yi.bind(null,g,$),j)},useLayoutEffect:function($,g){return ti(4194308,4,$,g)},useInsertionEffect:function($,g){return ti(4,2,$,g)},useMemo:function($,g){var j=ci();return g=g===void 0?null:g,$=$(),j.memoizedState=[$,g],$},useReducer:function($,g,j){var _e=ci();return g=j!==void 0?j(g):g,_e.memoizedState=_e.baseState=g,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:g},_e.queue=$,$=$.dispatch=Gi.bind(null,N$1,$),[_e.memoizedState,$]},useRef:function($){var g=ci();return $={current:$},g.memoizedState=$},useState:qi,useDebugValue:Ai,useDeferredValue:function($){return ci().memoizedState=$},useTransition:function(){var $=qi(!1),g=$[0];return $=Ei.bind(null,$[1]),ci().memoizedState=$,[g,$]},useMutableSource:function(){},useSyncExternalStore:function($,g,j){var _e=N$1,et=ci();if(I){if(j===void 0)throw Error(p$2(407));j=j()}else{if(j=g(),R===null)throw Error(p$2(349));Rh&30||ni(_e,g,j)}et.memoizedState=j;var tt={value:j,getSnapshot:g};return et.queue=tt,vi(ki.bind(null,_e,tt,$),[$]),_e.flags|=2048,li(9,mi.bind(null,_e,tt,j,g),void 0,null),j},useId:function(){var $=ci(),g=R.identifierPrefix;if(I){var j=sg,_e=rg;j=(_e&~(1<<32-oc(_e)-1)).toString(32)+j,g=":"+g+"R"+j,j=Uh++,0<j&&(g+="H"+j.toString(32)),g+=":"}else j=Vh++,g=":"+g+"r"+j.toString(32)+":";return $.memoizedState=g},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function($){var g=di();return Di(g,O$1.memoizedState,$)},useTransition:function(){var $=fi(ei)[0],g=di().memoizedState;return[$,g]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function($){var g=di();return O$1===null?g.memoizedState=$:Di(g,O$1.memoizedState,$)},useTransition:function(){var $=gi(ei)[0],g=di().memoizedState;return[$,g]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki($,g){try{var j="",_e=g;do j+=Pa(_e),_e=_e.return;while(_e);var et=j}catch(tt){et=`
Error generating stack: `+tt.message+`
`+tt.stack}return{value:$,source:g,stack:et,digest:null}}function Li($,g,j){return{value:$,source:null,stack:j??null,digest:g??null}}function Mi($,g){try{console.error(g.value)}catch(j){setTimeout(function(){throw j})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi($,g,j){j=ch(-1,j),j.tag=3,j.payload={element:null};var _e=g.value;return j.callback=function(){Pi||(Pi=!0,Qi=_e),Mi($,g)},j}function Ri($,g,j){j=ch(-1,j),j.tag=3;var _e=$.type.getDerivedStateFromError;if(typeof _e=="function"){var et=g.value;j.payload=function(){return _e(et)},j.callback=function(){Mi($,g)}}var tt=$.stateNode;return tt!==null&&typeof tt.componentDidCatch=="function"&&(j.callback=function(){Mi($,g),typeof _e!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var nt=g.stack;this.componentDidCatch(g.value,{componentStack:nt!==null?nt:""})}),j}function Ti($,g,j){var _e=$.pingCache;if(_e===null){_e=$.pingCache=new Ni;var et=new Set;_e.set(g,et)}else et=_e.get(g),et===void 0&&(et=new Set,_e.set(g,et));et.has(j)||(et.add(j),$=Ui.bind(null,$,g,j),g.then($,$))}function Vi($){do{var g;if((g=$.tag===13)&&(g=$.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return $;$=$.return}while($!==null);return null}function Wi($,g,j,_e,et){return $.mode&1?($.flags|=65536,$.lanes=et,$):($===g?$.flags|=65536:($.flags|=128,j.flags|=131072,j.flags&=-52805,j.tag===1&&(j.alternate===null?j.tag=17:(g=ch(-1,1),g.tag=2,dh(j,g,1))),j.lanes|=1),$)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi($,g,j,_e){g.child=$===null?Ch(g,null,j,_e):Bh(g,$.child,j,_e)}function Zi($,g,j,_e,et){j=j.render;var tt=g.ref;return Tg(g,et),_e=Xh($,g,j,_e,tt,et),j=bi(),$!==null&&!Ug?(g.updateQueue=$.updateQueue,g.flags&=-2053,$.lanes&=~et,$i($,g,et)):(I&&j&&vg(g),g.flags|=1,Yi($,g,_e,et),g.child)}function aj($,g,j,_e,et){if($===null){var tt=j.type;return typeof tt=="function"&&!bj(tt)&&tt.defaultProps===void 0&&j.compare===null&&j.defaultProps===void 0?(g.tag=15,g.type=tt,cj($,g,tt,_e,et)):($=yh(j.type,null,_e,g,g.mode,et),$.ref=g.ref,$.return=g,g.child=$)}if(tt=$.child,!($.lanes&et)){var nt=tt.memoizedProps;if(j=j.compare,j=j!==null?j:Ie,j(nt,_e)&&$.ref===g.ref)return $i($,g,et)}return g.flags|=1,$=wh(tt,_e),$.ref=g.ref,$.return=g,g.child=$}function cj($,g,j,_e,et){if($!==null){var tt=$.memoizedProps;if(Ie(tt,_e)&&$.ref===g.ref)if(Ug=!1,g.pendingProps=_e=tt,($.lanes&et)!==0)$.flags&131072&&(Ug=!0);else return g.lanes=$.lanes,$i($,g,et)}return dj($,g,j,_e,et)}function ej($,g,j){var _e=g.pendingProps,et=_e.children,tt=$!==null?$.memoizedState:null;if(_e.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=j;else{if(!(j&1073741824))return $=tt!==null?tt.baseLanes|j:j,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:$,cachePool:null,transitions:null},g.updateQueue=null,G(fj,gj),gj|=$,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e=tt!==null?tt.baseLanes:j,G(fj,gj),gj|=_e}else tt!==null?(_e=tt.baseLanes|j,g.memoizedState=null):_e=j,G(fj,gj),gj|=_e;return Yi($,g,et,j),g.child}function hj($,g){var j=g.ref;($===null&&j!==null||$!==null&&$.ref!==j)&&(g.flags|=512,g.flags|=2097152)}function dj($,g,j,_e,et){var tt=Zf(j)?Xf:H.current;return tt=Yf(g,tt),Tg(g,et),j=Xh($,g,j,_e,tt,et),_e=bi(),$!==null&&!Ug?(g.updateQueue=$.updateQueue,g.flags&=-2053,$.lanes&=~et,$i($,g,et)):(I&&_e&&vg(g),g.flags|=1,Yi($,g,j,et),g.child)}function ij($,g,j,_e,et){if(Zf(j)){var tt=!0;cg(g)}else tt=!1;if(Tg(g,et),g.stateNode===null)jj($,g),ph(g,j,_e),rh(g,j,_e,et),_e=!0;else if($===null){var nt=g.stateNode,rt=g.memoizedProps;nt.props=rt;var it=nt.context,st=j.contextType;typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(j)?Xf:H.current,st=Yf(g,st));var ot=j.getDerivedStateFromProps,at=typeof ot=="function"||typeof nt.getSnapshotBeforeUpdate=="function";at||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(rt!==_e||it!==st)&&qh(g,nt,_e,st),$g=!1;var lt=g.memoizedState;nt.state=lt,gh(g,_e,nt,et),it=g.memoizedState,rt!==_e||lt!==it||Wf.current||$g?(typeof ot=="function"&&(kh(g,j,ot,_e),it=g.memoizedState),(rt=$g||oh(g,j,rt,_e,lt,it,st))?(at||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount()),typeof nt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof nt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=_e,g.memoizedState=it),nt.props=_e,nt.state=it,nt.context=st,_e=rt):(typeof nt.componentDidMount=="function"&&(g.flags|=4194308),_e=!1)}else{nt=g.stateNode,bh($,g),rt=g.memoizedProps,st=g.type===g.elementType?rt:Lg(g.type,rt),nt.props=st,at=g.pendingProps,lt=nt.context,it=j.contextType,typeof it=="object"&&it!==null?it=Vg(it):(it=Zf(j)?Xf:H.current,it=Yf(g,it));var ut=j.getDerivedStateFromProps;(ot=typeof ut=="function"||typeof nt.getSnapshotBeforeUpdate=="function")||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(rt!==at||lt!==it)&&qh(g,nt,_e,it),$g=!1,lt=g.memoizedState,nt.state=lt,gh(g,_e,nt,et);var ht=g.memoizedState;rt!==at||lt!==ht||Wf.current||$g?(typeof ut=="function"&&(kh(g,j,ut,_e),ht=g.memoizedState),(st=$g||oh(g,j,st,_e,lt,ht,it)||!1)?(ot||typeof nt.UNSAFE_componentWillUpdate!="function"&&typeof nt.componentWillUpdate!="function"||(typeof nt.componentWillUpdate=="function"&&nt.componentWillUpdate(_e,ht,it),typeof nt.UNSAFE_componentWillUpdate=="function"&&nt.UNSAFE_componentWillUpdate(_e,ht,it)),typeof nt.componentDidUpdate=="function"&&(g.flags|=4),typeof nt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof nt.componentDidUpdate!="function"||rt===$.memoizedProps&&lt===$.memoizedState||(g.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||rt===$.memoizedProps&&lt===$.memoizedState||(g.flags|=1024),g.memoizedProps=_e,g.memoizedState=ht),nt.props=_e,nt.state=ht,nt.context=it,_e=st):(typeof nt.componentDidUpdate!="function"||rt===$.memoizedProps&&lt===$.memoizedState||(g.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||rt===$.memoizedProps&&lt===$.memoizedState||(g.flags|=1024),_e=!1)}return kj($,g,j,_e,tt,et)}function kj($,g,j,_e,et,tt){hj($,g);var nt=(g.flags&128)!==0;if(!_e&&!nt)return et&&dg(g,j,!1),$i($,g,tt);_e=g.stateNode,Xi.current=g;var rt=nt&&typeof j.getDerivedStateFromError!="function"?null:_e.render();return g.flags|=1,$!==null&&nt?(g.child=Bh(g,$.child,null,tt),g.child=Bh(g,null,rt,tt)):Yi($,g,rt,tt),g.memoizedState=_e.state,et&&dg(g,j,!0),g.child}function lj($){var g=$.stateNode;g.pendingContext?ag($,g.pendingContext,g.pendingContext!==g.context):g.context&&ag($,g.context,!1),Ih($,g.containerInfo)}function mj($,g,j,_e,et){return Ig(),Jg(et),g.flags|=256,Yi($,g,j,_e),g.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj($){return{baseLanes:$,cachePool:null,transitions:null}}function pj($,g,j){var _e=g.pendingProps,et=M.current,tt=!1,nt=(g.flags&128)!==0,rt;if((rt=nt)||(rt=$!==null&&$.memoizedState===null?!1:(et&2)!==0),rt?(tt=!0,g.flags&=-129):($===null||$.memoizedState!==null)&&(et|=1),G(M,et&1),$===null)return Eg(g),$=g.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(g.mode&1?$.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(nt=_e.children,$=_e.fallback,tt?(_e=g.mode,tt=g.child,nt={mode:"hidden",children:nt},!(_e&1)&&tt!==null?(tt.childLanes=0,tt.pendingProps=nt):tt=qj(nt,_e,0,null),$=Ah($,_e,j,null),tt.return=g,$.return=g,tt.sibling=$,g.child=tt,g.child.memoizedState=oj(j),g.memoizedState=nj,$):rj(g,nt));if(et=$.memoizedState,et!==null&&(rt=et.dehydrated,rt!==null))return sj($,g,nt,_e,rt,et,j);if(tt){tt=_e.fallback,nt=g.mode,et=$.child,rt=et.sibling;var it={mode:"hidden",children:_e.children};return!(nt&1)&&g.child!==et?(_e=g.child,_e.childLanes=0,_e.pendingProps=it,g.deletions=null):(_e=wh(et,it),_e.subtreeFlags=et.subtreeFlags&14680064),rt!==null?tt=wh(rt,tt):(tt=Ah(tt,nt,j,null),tt.flags|=2),tt.return=g,_e.return=g,_e.sibling=tt,g.child=_e,_e=tt,tt=g.child,nt=$.child.memoizedState,nt=nt===null?oj(j):{baseLanes:nt.baseLanes|j,cachePool:null,transitions:nt.transitions},tt.memoizedState=nt,tt.childLanes=$.childLanes&~j,g.memoizedState=nj,_e}return tt=$.child,$=tt.sibling,_e=wh(tt,{mode:"visible",children:_e.children}),!(g.mode&1)&&(_e.lanes=j),_e.return=g,_e.sibling=null,$!==null&&(j=g.deletions,j===null?(g.deletions=[$],g.flags|=16):j.push($)),g.child=_e,g.memoizedState=null,_e}function rj($,g){return g=qj({mode:"visible",children:g},$.mode,0,null),g.return=$,$.child=g}function tj($,g,j,_e){return _e!==null&&Jg(_e),Bh(g,$.child,null,j),$=rj(g,g.pendingProps.children),$.flags|=2,g.memoizedState=null,$}function sj($,g,j,_e,et,tt,nt){if(j)return g.flags&256?(g.flags&=-257,_e=Li(Error(p$2(422))),tj($,g,nt,_e)):g.memoizedState!==null?(g.child=$.child,g.flags|=128,null):(tt=_e.fallback,et=g.mode,_e=qj({mode:"visible",children:_e.children},et,0,null),tt=Ah(tt,et,nt,null),tt.flags|=2,_e.return=g,tt.return=g,_e.sibling=tt,g.child=_e,g.mode&1&&Bh(g,$.child,null,nt),g.child.memoizedState=oj(nt),g.memoizedState=nj,tt);if(!(g.mode&1))return tj($,g,nt,null);if(et.data==="$!"){if(_e=et.nextSibling&&et.nextSibling.dataset,_e)var rt=_e.dgst;return _e=rt,tt=Error(p$2(419)),_e=Li(tt,_e,void 0),tj($,g,nt,_e)}if(rt=(nt&$.childLanes)!==0,Ug||rt){if(_e=R,_e!==null){switch(nt&-nt){case 4:et=2;break;case 16:et=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:et=32;break;case 536870912:et=268435456;break;default:et=0}et=et&(_e.suspendedLanes|nt)?0:et,et!==0&&et!==tt.retryLane&&(tt.retryLane=et,Zg($,et),mh(_e,$,et,-1))}return uj(),_e=Li(Error(p$2(421))),tj($,g,nt,_e)}return et.data==="$?"?(g.flags|=128,g.child=$.child,g=vj.bind(null,$),et._reactRetry=g,null):($=tt.treeContext,yg=Lf(et.nextSibling),xg=g,I=!0,zg=null,$!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=$.id,sg=$.overflow,qg=g),g=rj(g,_e.children),g.flags|=4096,g)}function wj($,g,j){$.lanes|=g;var _e=$.alternate;_e!==null&&(_e.lanes|=g),Sg($.return,g,j)}function xj($,g,j,_e,et){var tt=$.memoizedState;tt===null?$.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:_e,tail:j,tailMode:et}:(tt.isBackwards=g,tt.rendering=null,tt.renderingStartTime=0,tt.last=_e,tt.tail=j,tt.tailMode=et)}function yj($,g,j){var _e=g.pendingProps,et=_e.revealOrder,tt=_e.tail;if(Yi($,g,_e.children,j),_e=M.current,_e&2)_e=_e&1|2,g.flags|=128;else{if($!==null&&$.flags&128)e:for($=g.child;$!==null;){if($.tag===13)$.memoizedState!==null&&wj($,j,g);else if($.tag===19)wj($,j,g);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===g)break e;for(;$.sibling===null;){if($.return===null||$.return===g)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}_e&=1}if(G(M,_e),!(g.mode&1))g.memoizedState=null;else switch(et){case"forwards":for(j=g.child,et=null;j!==null;)$=j.alternate,$!==null&&Mh($)===null&&(et=j),j=j.sibling;j=et,j===null?(et=g.child,g.child=null):(et=j.sibling,j.sibling=null),xj(g,!1,et,j,tt);break;case"backwards":for(j=null,et=g.child,g.child=null;et!==null;){if($=et.alternate,$!==null&&Mh($)===null){g.child=et;break}$=et.sibling,et.sibling=j,j=et,et=$}xj(g,!0,j,null,tt);break;case"together":xj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function jj($,g){!(g.mode&1)&&$!==null&&($.alternate=null,g.alternate=null,g.flags|=2)}function $i($,g,j){if($!==null&&(g.dependencies=$.dependencies),hh|=g.lanes,!(j&g.childLanes))return null;if($!==null&&g.child!==$.child)throw Error(p$2(153));if(g.child!==null){for($=g.child,j=wh($,$.pendingProps),g.child=j,j.return=g;$.sibling!==null;)$=$.sibling,j=j.sibling=wh($,$.pendingProps),j.return=g;j.sibling=null}return g.child}function zj($,g,j){switch(g.tag){case 3:lj(g),Ig();break;case 5:Kh(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:Ih(g,g.stateNode.containerInfo);break;case 10:var _e=g.type._context,et=g.memoizedProps.value;G(Mg,_e._currentValue),_e._currentValue=et;break;case 13:if(_e=g.memoizedState,_e!==null)return _e.dehydrated!==null?(G(M,M.current&1),g.flags|=128,null):j&g.child.childLanes?pj($,g,j):(G(M,M.current&1),$=$i($,g,j),$!==null?$.sibling:null);G(M,M.current&1);break;case 19:if(_e=(j&g.childLanes)!==0,$.flags&128){if(_e)return yj($,g,j);g.flags|=128}if(et=g.memoizedState,et!==null&&(et.rendering=null,et.tail=null,et.lastEffect=null),G(M,M.current),_e)break;return null;case 22:case 23:return g.lanes=0,ej($,g,j)}return $i($,g,j)}var Aj,Bj,Cj,Dj;Aj=function($,g){for(var j=g.child;j!==null;){if(j.tag===5||j.tag===6)$.appendChild(j.stateNode);else if(j.tag!==4&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===g)break;for(;j.sibling===null;){if(j.return===null||j.return===g)return;j=j.return}j.sibling.return=j.return,j=j.sibling}};Bj=function(){};Cj=function($,g,j,_e){var et=$.memoizedProps;if(et!==_e){$=g.stateNode,Hh(Eh.current);var tt=null;switch(j){case"input":et=Ya($,et),_e=Ya($,_e),tt=[];break;case"select":et=A({},et,{value:void 0}),_e=A({},_e,{value:void 0}),tt=[];break;case"textarea":et=gb($,et),_e=gb($,_e),tt=[];break;default:typeof et.onClick!="function"&&typeof _e.onClick=="function"&&($.onclick=Bf)}ub(j,_e);var nt;j=null;for(st in et)if(!_e.hasOwnProperty(st)&&et.hasOwnProperty(st)&&et[st]!=null)if(st==="style"){var rt=et[st];for(nt in rt)rt.hasOwnProperty(nt)&&(j||(j={}),j[nt]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?tt||(tt=[]):(tt=tt||[]).push(st,null));for(st in _e){var it=_e[st];if(rt=et!=null?et[st]:void 0,_e.hasOwnProperty(st)&&it!==rt&&(it!=null||rt!=null))if(st==="style")if(rt){for(nt in rt)!rt.hasOwnProperty(nt)||it&&it.hasOwnProperty(nt)||(j||(j={}),j[nt]="");for(nt in it)it.hasOwnProperty(nt)&&rt[nt]!==it[nt]&&(j||(j={}),j[nt]=it[nt])}else j||(tt||(tt=[]),tt.push(st,j)),j=it;else st==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,rt=rt?rt.__html:void 0,it!=null&&rt!==it&&(tt=tt||[]).push(st,it)):st==="children"?typeof it!="string"&&typeof it!="number"||(tt=tt||[]).push(st,""+it):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(it!=null&&st==="onScroll"&&D("scroll",$),tt||rt===it||(tt=[])):(tt=tt||[]).push(st,it))}j&&(tt=tt||[]).push("style",j);var st=tt;(g.updateQueue=st)&&(g.flags|=4)}};Dj=function($,g,j,_e){j!==_e&&(g.flags|=4)};function Ej($,g){if(!I)switch($.tailMode){case"hidden":g=$.tail;for(var j=null;g!==null;)g.alternate!==null&&(j=g),g=g.sibling;j===null?$.tail=null:j.sibling=null;break;case"collapsed":j=$.tail;for(var _e=null;j!==null;)j.alternate!==null&&(_e=j),j=j.sibling;_e===null?g||$.tail===null?$.tail=null:$.tail.sibling=null:_e.sibling=null}}function S($){var g=$.alternate!==null&&$.alternate.child===$.child,j=0,_e=0;if(g)for(var et=$.child;et!==null;)j|=et.lanes|et.childLanes,_e|=et.subtreeFlags&14680064,_e|=et.flags&14680064,et.return=$,et=et.sibling;else for(et=$.child;et!==null;)j|=et.lanes|et.childLanes,_e|=et.subtreeFlags,_e|=et.flags,et.return=$,et=et.sibling;return $.subtreeFlags|=_e,$.childLanes=j,g}function Fj($,g,j){var _e=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(g),null;case 1:return Zf(g.type)&&$f(),S(g),null;case 3:return _e=g.stateNode,Jh(),E(Wf),E(H),Oh(),_e.pendingContext&&(_e.context=_e.pendingContext,_e.pendingContext=null),($===null||$.child===null)&&(Gg(g)?g.flags|=4:$===null||$.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj($,g),S(g),null;case 5:Lh(g);var et=Hh(Gh.current);if(j=g.type,$!==null&&g.stateNode!=null)Cj($,g,j,_e,et),$.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!_e){if(g.stateNode===null)throw Error(p$2(166));return S(g),null}if($=Hh(Eh.current),Gg(g)){_e=g.stateNode,j=g.type;var tt=g.memoizedProps;switch(_e[Of]=g,_e[Pf]=tt,$=(g.mode&1)!==0,j){case"dialog":D("cancel",_e),D("close",_e);break;case"iframe":case"object":case"embed":D("load",_e);break;case"video":case"audio":for(et=0;et<lf.length;et++)D(lf[et],_e);break;case"source":D("error",_e);break;case"img":case"image":case"link":D("error",_e),D("load",_e);break;case"details":D("toggle",_e);break;case"input":Za(_e,tt),D("invalid",_e);break;case"select":_e._wrapperState={wasMultiple:!!tt.multiple},D("invalid",_e);break;case"textarea":hb(_e,tt),D("invalid",_e)}ub(j,tt),et=null;for(var nt in tt)if(tt.hasOwnProperty(nt)){var rt=tt[nt];nt==="children"?typeof rt=="string"?_e.textContent!==rt&&(tt.suppressHydrationWarning!==!0&&Af(_e.textContent,rt,$),et=["children",rt]):typeof rt=="number"&&_e.textContent!==""+rt&&(tt.suppressHydrationWarning!==!0&&Af(_e.textContent,rt,$),et=["children",""+rt]):ea.hasOwnProperty(nt)&&rt!=null&&nt==="onScroll"&&D("scroll",_e)}switch(j){case"input":Va(_e),db(_e,tt,!0);break;case"textarea":Va(_e),jb(_e);break;case"select":case"option":break;default:typeof tt.onClick=="function"&&(_e.onclick=Bf)}_e=et,g.updateQueue=_e,_e!==null&&(g.flags|=4)}else{nt=et.nodeType===9?et:et.ownerDocument,$==="http://www.w3.org/1999/xhtml"&&($=kb(j)),$==="http://www.w3.org/1999/xhtml"?j==="script"?($=nt.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild)):typeof _e.is=="string"?$=nt.createElement(j,{is:_e.is}):($=nt.createElement(j),j==="select"&&(nt=$,_e.multiple?nt.multiple=!0:_e.size&&(nt.size=_e.size))):$=nt.createElementNS($,j),$[Of]=g,$[Pf]=_e,Aj($,g,!1,!1),g.stateNode=$;e:{switch(nt=vb(j,_e),j){case"dialog":D("cancel",$),D("close",$),et=_e;break;case"iframe":case"object":case"embed":D("load",$),et=_e;break;case"video":case"audio":for(et=0;et<lf.length;et++)D(lf[et],$);et=_e;break;case"source":D("error",$),et=_e;break;case"img":case"image":case"link":D("error",$),D("load",$),et=_e;break;case"details":D("toggle",$),et=_e;break;case"input":Za($,_e),et=Ya($,_e),D("invalid",$);break;case"option":et=_e;break;case"select":$._wrapperState={wasMultiple:!!_e.multiple},et=A({},_e,{value:void 0}),D("invalid",$);break;case"textarea":hb($,_e),et=gb($,_e),D("invalid",$);break;default:et=_e}ub(j,et),rt=et;for(tt in rt)if(rt.hasOwnProperty(tt)){var it=rt[tt];tt==="style"?sb($,it):tt==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,it!=null&&nb($,it)):tt==="children"?typeof it=="string"?(j!=="textarea"||it!=="")&&ob($,it):typeof it=="number"&&ob($,""+it):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea.hasOwnProperty(tt)?it!=null&&tt==="onScroll"&&D("scroll",$):it!=null&&ta($,tt,it,nt))}switch(j){case"input":Va($),db($,_e,!1);break;case"textarea":Va($),jb($);break;case"option":_e.value!=null&&$.setAttribute("value",""+Sa(_e.value));break;case"select":$.multiple=!!_e.multiple,tt=_e.value,tt!=null?fb($,!!_e.multiple,tt,!1):_e.defaultValue!=null&&fb($,!!_e.multiple,_e.defaultValue,!0);break;default:typeof et.onClick=="function"&&($.onclick=Bf)}switch(j){case"button":case"input":case"select":case"textarea":_e=!!_e.autoFocus;break e;case"img":_e=!0;break e;default:_e=!1}}_e&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S(g),null;case 6:if($&&g.stateNode!=null)Dj($,g,$.memoizedProps,_e);else{if(typeof _e!="string"&&g.stateNode===null)throw Error(p$2(166));if(j=Hh(Gh.current),Hh(Eh.current),Gg(g)){if(_e=g.stateNode,j=g.memoizedProps,_e[Of]=g,(tt=_e.nodeValue!==j)&&($=xg,$!==null))switch($.tag){case 3:Af(_e.nodeValue,j,($.mode&1)!==0);break;case 5:$.memoizedProps.suppressHydrationWarning!==!0&&Af(_e.nodeValue,j,($.mode&1)!==0)}tt&&(g.flags|=4)}else _e=(j.nodeType===9?j:j.ownerDocument).createTextNode(_e),_e[Of]=g,g.stateNode=_e}return S(g),null;case 13:if(E(M),_e=g.memoizedState,$===null||$.memoizedState!==null&&$.memoizedState.dehydrated!==null){if(I&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,tt=!1;else if(tt=Gg(g),_e!==null&&_e.dehydrated!==null){if($===null){if(!tt)throw Error(p$2(318));if(tt=g.memoizedState,tt=tt!==null?tt.dehydrated:null,!tt)throw Error(p$2(317));tt[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S(g),tt=!1}else zg!==null&&(Gj(zg),zg=null),tt=!0;if(!tt)return g.flags&65536?g:null}return g.flags&128?(g.lanes=j,g):(_e=_e!==null,_e!==($!==null&&$.memoizedState!==null)&&_e&&(g.child.flags|=8192,g.mode&1&&($===null||M.current&1?T$1===0&&(T$1=3):uj())),g.updateQueue!==null&&(g.flags|=4),S(g),null);case 4:return Jh(),Bj($,g),$===null&&sf(g.stateNode.containerInfo),S(g),null;case 10:return Rg(g.type._context),S(g),null;case 17:return Zf(g.type)&&$f(),S(g),null;case 19:if(E(M),tt=g.memoizedState,tt===null)return S(g),null;if(_e=(g.flags&128)!==0,nt=tt.rendering,nt===null)if(_e)Ej(tt,!1);else{if(T$1!==0||$!==null&&$.flags&128)for($=g.child;$!==null;){if(nt=Mh($),nt!==null){for(g.flags|=128,Ej(tt,!1),_e=nt.updateQueue,_e!==null&&(g.updateQueue=_e,g.flags|=4),g.subtreeFlags=0,_e=j,j=g.child;j!==null;)tt=j,$=_e,tt.flags&=14680066,nt=tt.alternate,nt===null?(tt.childLanes=0,tt.lanes=$,tt.child=null,tt.subtreeFlags=0,tt.memoizedProps=null,tt.memoizedState=null,tt.updateQueue=null,tt.dependencies=null,tt.stateNode=null):(tt.childLanes=nt.childLanes,tt.lanes=nt.lanes,tt.child=nt.child,tt.subtreeFlags=0,tt.deletions=null,tt.memoizedProps=nt.memoizedProps,tt.memoizedState=nt.memoizedState,tt.updateQueue=nt.updateQueue,tt.type=nt.type,$=nt.dependencies,tt.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),j=j.sibling;return G(M,M.current&1|2),g.child}$=$.sibling}tt.tail!==null&&B()>Hj&&(g.flags|=128,_e=!0,Ej(tt,!1),g.lanes=4194304)}else{if(!_e)if($=Mh(nt),$!==null){if(g.flags|=128,_e=!0,j=$.updateQueue,j!==null&&(g.updateQueue=j,g.flags|=4),Ej(tt,!0),tt.tail===null&&tt.tailMode==="hidden"&&!nt.alternate&&!I)return S(g),null}else 2*B()-tt.renderingStartTime>Hj&&j!==1073741824&&(g.flags|=128,_e=!0,Ej(tt,!1),g.lanes=4194304);tt.isBackwards?(nt.sibling=g.child,g.child=nt):(j=tt.last,j!==null?j.sibling=nt:g.child=nt,tt.last=nt)}return tt.tail!==null?(g=tt.tail,tt.rendering=g,tt.tail=g.sibling,tt.renderingStartTime=B(),g.sibling=null,j=M.current,G(M,_e?j&1|2:j&1),g):(S(g),null);case 22:case 23:return Ij(),_e=g.memoizedState!==null,$!==null&&$.memoizedState!==null!==_e&&(g.flags|=8192),_e&&g.mode&1?gj&1073741824&&(S(g),g.subtreeFlags&6&&(g.flags|=8192)):S(g),null;case 24:return null;case 25:return null}throw Error(p$2(156,g.tag))}function Jj($,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),$=g.flags,$&65536?(g.flags=$&-65537|128,g):null;case 3:return Jh(),E(Wf),E(H),Oh(),$=g.flags,$&65536&&!($&128)?(g.flags=$&-65537|128,g):null;case 5:return Lh(g),null;case 13:if(E(M),$=g.memoizedState,$!==null&&$.dehydrated!==null){if(g.alternate===null)throw Error(p$2(340));Ig()}return $=g.flags,$&65536?(g.flags=$&-65537|128,g):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(g.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj($,g){var j=$.ref;if(j!==null)if(typeof j=="function")try{j(null)}catch(_e){W($,g,_e)}else j.current=null}function Nj($,g,j){try{j()}catch(_e){W($,g,_e)}}var Oj=!1;function Pj($,g){if(Cf=dd,$=Me(),Ne($)){if("selectionStart"in $)var j={start:$.selectionStart,end:$.selectionEnd};else e:{j=(j=$.ownerDocument)&&j.defaultView||window;var _e=j.getSelection&&j.getSelection();if(_e&&_e.rangeCount!==0){j=_e.anchorNode;var et=_e.anchorOffset,tt=_e.focusNode;_e=_e.focusOffset;try{j.nodeType,tt.nodeType}catch{j=null;break e}var nt=0,rt=-1,it=-1,st=0,ot=0,at=$,lt=null;t:for(;;){for(var ut;at!==j||et!==0&&at.nodeType!==3||(rt=nt+et),at!==tt||_e!==0&&at.nodeType!==3||(it=nt+_e),at.nodeType===3&&(nt+=at.nodeValue.length),(ut=at.firstChild)!==null;)lt=at,at=ut;for(;;){if(at===$)break t;if(lt===j&&++st===et&&(rt=nt),lt===tt&&++ot===_e&&(it=nt),(ut=at.nextSibling)!==null)break;at=lt,lt=at.parentNode}at=ut}j=rt===-1||it===-1?null:{start:rt,end:it}}else j=null}j=j||{start:0,end:0}}else j=null;for(Df={focusedElem:$,selectionRange:j},dd=!1,V=g;V!==null;)if(g=V,$=g.child,(g.subtreeFlags&1028)!==0&&$!==null)$.return=g,V=$;else for(;V!==null;){g=V;try{var ht=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var ft=ht.memoizedProps,gt=ht.memoizedState,dt=g.stateNode,mt=dt.getSnapshotBeforeUpdate(g.elementType===g.type?ft:Lg(g.type,ft),gt);dt.__reactInternalSnapshotBeforeUpdate=mt}break;case 3:var yt=g.stateNode.containerInfo;yt.nodeType===1?yt.textContent="":yt.nodeType===9&&yt.documentElement&&yt.removeChild(yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(Et){W(g,g.return,Et)}if($=g.sibling,$!==null){$.return=g.return,V=$;break}V=g.return}return ht=Oj,Oj=!1,ht}function Qj($,g,j){var _e=g.updateQueue;if(_e=_e!==null?_e.lastEffect:null,_e!==null){var et=_e=_e.next;do{if((et.tag&$)===$){var tt=et.destroy;et.destroy=void 0,tt!==void 0&&Nj(g,j,tt)}et=et.next}while(et!==_e)}}function Rj($,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var j=g=g.next;do{if((j.tag&$)===$){var _e=j.create;j.destroy=_e()}j=j.next}while(j!==g)}}function Sj($){var g=$.ref;if(g!==null){var j=$.stateNode;switch($.tag){case 5:$=j;break;default:$=j}typeof g=="function"?g($):g.current=$}}function Tj($){var g=$.alternate;g!==null&&($.alternate=null,Tj(g)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(g=$.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function Uj($){return $.tag===5||$.tag===3||$.tag===4}function Vj($){e:for(;;){for(;$.sibling===null;){if($.return===null||Uj($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function Wj($,g,j){var _e=$.tag;if(_e===5||_e===6)$=$.stateNode,g?j.nodeType===8?j.parentNode.insertBefore($,g):j.insertBefore($,g):(j.nodeType===8?(g=j.parentNode,g.insertBefore($,j)):(g=j,g.appendChild($)),j=j._reactRootContainer,j!=null||g.onclick!==null||(g.onclick=Bf));else if(_e!==4&&($=$.child,$!==null))for(Wj($,g,j),$=$.sibling;$!==null;)Wj($,g,j),$=$.sibling}function Xj($,g,j){var _e=$.tag;if(_e===5||_e===6)$=$.stateNode,g?j.insertBefore($,g):j.appendChild($);else if(_e!==4&&($=$.child,$!==null))for(Xj($,g,j),$=$.sibling;$!==null;)Xj($,g,j),$=$.sibling}var X=null,Yj=!1;function Zj($,g,j){for(j=j.child;j!==null;)ak($,g,j),j=j.sibling}function ak($,g,j){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,j)}catch{}switch(j.tag){case 5:U||Mj(j,g);case 6:var _e=X,et=Yj;X=null,Zj($,g,j),X=_e,Yj=et,X!==null&&(Yj?($=X,j=j.stateNode,$.nodeType===8?$.parentNode.removeChild(j):$.removeChild(j)):X.removeChild(j.stateNode));break;case 18:X!==null&&(Yj?($=X,j=j.stateNode,$.nodeType===8?Kf($.parentNode,j):$.nodeType===1&&Kf($,j),bd($)):Kf(X,j.stateNode));break;case 4:_e=X,et=Yj,X=j.stateNode.containerInfo,Yj=!0,Zj($,g,j),X=_e,Yj=et;break;case 0:case 11:case 14:case 15:if(!U&&(_e=j.updateQueue,_e!==null&&(_e=_e.lastEffect,_e!==null))){et=_e=_e.next;do{var tt=et,nt=tt.destroy;tt=tt.tag,nt!==void 0&&(tt&2||tt&4)&&Nj(j,g,nt),et=et.next}while(et!==_e)}Zj($,g,j);break;case 1:if(!U&&(Mj(j,g),_e=j.stateNode,typeof _e.componentWillUnmount=="function"))try{_e.props=j.memoizedProps,_e.state=j.memoizedState,_e.componentWillUnmount()}catch(rt){W(j,g,rt)}Zj($,g,j);break;case 21:Zj($,g,j);break;case 22:j.mode&1?(U=(_e=U)||j.memoizedState!==null,Zj($,g,j),U=_e):Zj($,g,j);break;default:Zj($,g,j)}}function bk($){var g=$.updateQueue;if(g!==null){$.updateQueue=null;var j=$.stateNode;j===null&&(j=$.stateNode=new Lj),g.forEach(function(_e){var et=ck.bind(null,$,_e);j.has(_e)||(j.add(_e),_e.then(et,et))})}}function dk($,g){var j=g.deletions;if(j!==null)for(var _e=0;_e<j.length;_e++){var et=j[_e];try{var tt=$,nt=g,rt=nt;e:for(;rt!==null;){switch(rt.tag){case 5:X=rt.stateNode,Yj=!1;break e;case 3:X=rt.stateNode.containerInfo,Yj=!0;break e;case 4:X=rt.stateNode.containerInfo,Yj=!0;break e}rt=rt.return}if(X===null)throw Error(p$2(160));ak(tt,nt,et),X=null,Yj=!1;var it=et.alternate;it!==null&&(it.return=null),et.return=null}catch(st){W(et,g,st)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)ek(g,$),g=g.sibling}function ek($,g){var j=$.alternate,_e=$.flags;switch($.tag){case 0:case 11:case 14:case 15:if(dk(g,$),fk($),_e&4){try{Qj(3,$,$.return),Rj(3,$)}catch(ft){W($,$.return,ft)}try{Qj(5,$,$.return)}catch(ft){W($,$.return,ft)}}break;case 1:dk(g,$),fk($),_e&512&&j!==null&&Mj(j,j.return);break;case 5:if(dk(g,$),fk($),_e&512&&j!==null&&Mj(j,j.return),$.flags&32){var et=$.stateNode;try{ob(et,"")}catch(ft){W($,$.return,ft)}}if(_e&4&&(et=$.stateNode,et!=null)){var tt=$.memoizedProps,nt=j!==null?j.memoizedProps:tt,rt=$.type,it=$.updateQueue;if($.updateQueue=null,it!==null)try{rt==="input"&&tt.type==="radio"&&tt.name!=null&&ab(et,tt),vb(rt,nt);var st=vb(rt,tt);for(nt=0;nt<it.length;nt+=2){var ot=it[nt],at=it[nt+1];ot==="style"?sb(et,at):ot==="dangerouslySetInnerHTML"?nb(et,at):ot==="children"?ob(et,at):ta(et,ot,at,st)}switch(rt){case"input":bb(et,tt);break;case"textarea":ib(et,tt);break;case"select":var lt=et._wrapperState.wasMultiple;et._wrapperState.wasMultiple=!!tt.multiple;var ut=tt.value;ut!=null?fb(et,!!tt.multiple,ut,!1):lt!==!!tt.multiple&&(tt.defaultValue!=null?fb(et,!!tt.multiple,tt.defaultValue,!0):fb(et,!!tt.multiple,tt.multiple?[]:"",!1))}et[Pf]=tt}catch(ft){W($,$.return,ft)}}break;case 6:if(dk(g,$),fk($),_e&4){if($.stateNode===null)throw Error(p$2(162));et=$.stateNode,tt=$.memoizedProps;try{et.nodeValue=tt}catch(ft){W($,$.return,ft)}}break;case 3:if(dk(g,$),fk($),_e&4&&j!==null&&j.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(ft){W($,$.return,ft)}break;case 4:dk(g,$),fk($);break;case 13:dk(g,$),fk($),et=$.child,et.flags&8192&&(tt=et.memoizedState!==null,et.stateNode.isHidden=tt,!tt||et.alternate!==null&&et.alternate.memoizedState!==null||(gk=B())),_e&4&&bk($);break;case 22:if(ot=j!==null&&j.memoizedState!==null,$.mode&1?(U=(st=U)||ot,dk(g,$),U=st):dk(g,$),fk($),_e&8192){if(st=$.memoizedState!==null,($.stateNode.isHidden=st)&&!ot&&$.mode&1)for(V=$,ot=$.child;ot!==null;){for(at=V=ot;V!==null;){switch(lt=V,ut=lt.child,lt.tag){case 0:case 11:case 14:case 15:Qj(4,lt,lt.return);break;case 1:Mj(lt,lt.return);var ht=lt.stateNode;if(typeof ht.componentWillUnmount=="function"){_e=lt,j=lt.return;try{g=_e,ht.props=g.memoizedProps,ht.state=g.memoizedState,ht.componentWillUnmount()}catch(ft){W(_e,j,ft)}}break;case 5:Mj(lt,lt.return);break;case 22:if(lt.memoizedState!==null){hk(at);continue}}ut!==null?(ut.return=lt,V=ut):hk(at)}ot=ot.sibling}e:for(ot=null,at=$;;){if(at.tag===5){if(ot===null){ot=at;try{et=at.stateNode,st?(tt=et.style,typeof tt.setProperty=="function"?tt.setProperty("display","none","important"):tt.display="none"):(rt=at.stateNode,it=at.memoizedProps.style,nt=it!=null&&it.hasOwnProperty("display")?it.display:null,rt.style.display=rb("display",nt))}catch(ft){W($,$.return,ft)}}}else if(at.tag===6){if(ot===null)try{at.stateNode.nodeValue=st?"":at.memoizedProps}catch(ft){W($,$.return,ft)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===$)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===$)break e;for(;at.sibling===null;){if(at.return===null||at.return===$)break e;ot===at&&(ot=null),at=at.return}ot===at&&(ot=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:dk(g,$),fk($),_e&4&&bk($);break;case 21:break;default:dk(g,$),fk($)}}function fk($){var g=$.flags;if(g&2){try{e:{for(var j=$.return;j!==null;){if(Uj(j)){var _e=j;break e}j=j.return}throw Error(p$2(160))}switch(_e.tag){case 5:var et=_e.stateNode;_e.flags&32&&(ob(et,""),_e.flags&=-33);var tt=Vj($);Xj($,tt,et);break;case 3:case 4:var nt=_e.stateNode.containerInfo,rt=Vj($);Wj($,rt,nt);break;default:throw Error(p$2(161))}}catch(it){W($,$.return,it)}$.flags&=-3}g&4096&&($.flags&=-4097)}function ik($,g,j){V=$,jk($)}function jk($,g,j){for(var _e=($.mode&1)!==0;V!==null;){var et=V,tt=et.child;if(et.tag===22&&_e){var nt=et.memoizedState!==null||Kj;if(!nt){var rt=et.alternate,it=rt!==null&&rt.memoizedState!==null||U;rt=Kj;var st=U;if(Kj=nt,(U=it)&&!st)for(V=et;V!==null;)nt=V,it=nt.child,nt.tag===22&&nt.memoizedState!==null?kk(et):it!==null?(it.return=nt,V=it):kk(et);for(;tt!==null;)V=tt,jk(tt),tt=tt.sibling;V=et,Kj=rt,U=st}lk($)}else et.subtreeFlags&8772&&tt!==null?(tt.return=et,V=tt):lk($)}}function lk($){for(;V!==null;){var g=V;if(g.flags&8772){var j=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U||Rj(5,g);break;case 1:var _e=g.stateNode;if(g.flags&4&&!U)if(j===null)_e.componentDidMount();else{var et=g.elementType===g.type?j.memoizedProps:Lg(g.type,j.memoizedProps);_e.componentDidUpdate(et,j.memoizedState,_e.__reactInternalSnapshotBeforeUpdate)}var tt=g.updateQueue;tt!==null&&ih(g,tt,_e);break;case 3:var nt=g.updateQueue;if(nt!==null){if(j=null,g.child!==null)switch(g.child.tag){case 5:j=g.child.stateNode;break;case 1:j=g.child.stateNode}ih(g,nt,j)}break;case 5:var rt=g.stateNode;if(j===null&&g.flags&4){j=rt;var it=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":it.autoFocus&&j.focus();break;case"img":it.src&&(j.src=it.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var st=g.alternate;if(st!==null){var ot=st.memoizedState;if(ot!==null){var at=ot.dehydrated;at!==null&&bd(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||g.flags&512&&Sj(g)}catch(lt){W(g,g.return,lt)}}if(g===$){V=null;break}if(j=g.sibling,j!==null){j.return=g.return,V=j;break}V=g.return}}function hk($){for(;V!==null;){var g=V;if(g===$){V=null;break}var j=g.sibling;if(j!==null){j.return=g.return,V=j;break}V=g.return}}function kk($){for(;V!==null;){var g=V;try{switch(g.tag){case 0:case 11:case 15:var j=g.return;try{Rj(4,g)}catch(it){W(g,j,it)}break;case 1:var _e=g.stateNode;if(typeof _e.componentDidMount=="function"){var et=g.return;try{_e.componentDidMount()}catch(it){W(g,et,it)}}var tt=g.return;try{Sj(g)}catch(it){W(g,tt,it)}break;case 5:var nt=g.return;try{Sj(g)}catch(it){W(g,nt,it)}}}catch(it){W(g,g.return,it)}if(g===$){V=null;break}var rt=g.sibling;if(rt!==null){rt.return=g.return,V=rt;break}V=g.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh($){return $.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):($=C$1,$!==0||($=window.event,$=$===void 0?16:jd($.type)),$):1}function mh($,g,j,_e){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac($,j,_e),(!(K&2)||$!==R)&&($===R&&(!(K&2)&&(rk|=j),T$1===4&&Dk($,Z)),Ek($,_e),j===1&&K===0&&!(g.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek($,g){var j=$.callbackNode;wc($,g);var _e=uc($,$===R?Z:0);if(_e===0)j!==null&&bc(j),$.callbackNode=null,$.callbackPriority=0;else if(g=_e&-_e,$.callbackPriority!==g){if(j!=null&&bc(j),g===1)$.tag===0?ig(Fk.bind(null,$)):hg(Fk.bind(null,$)),Jf(function(){!(K&6)&&jg()}),j=null;else{switch(Dc(_e)){case 1:j=fc;break;case 4:j=gc;break;case 16:j=hc;break;case 536870912:j=jc;break;default:j=hc}j=Gk(j,Hk.bind(null,$))}$.callbackPriority=g,$.callbackNode=j}}function Hk($,g){if(Bk=-1,Ck=0,K&6)throw Error(p$2(327));var j=$.callbackNode;if(Ik()&&$.callbackNode!==j)return null;var _e=uc($,$===R?Z:0);if(_e===0)return null;if(_e&30||_e&$.expiredLanes||g)g=Jk($,_e);else{g=_e;var et=K;K|=2;var tt=Kk();(R!==$||Z!==g)&&(vk=null,Hj=B()+500,Lk($,g));do try{Mk();break}catch(rt){Nk($,rt)}while(1);Qg(),nk.current=tt,K=et,Y!==null?g=0:(R=null,Z=0,g=T$1)}if(g!==0){if(g===2&&(et=xc($),et!==0&&(_e=et,g=Ok($,et))),g===1)throw j=qk,Lk($,0),Dk($,_e),Ek($,B()),j;if(g===6)Dk($,_e);else{if(et=$.current.alternate,!(_e&30)&&!Pk(et)&&(g=Jk($,_e),g===2&&(tt=xc($),tt!==0&&(_e=tt,g=Ok($,tt))),g===1))throw j=qk,Lk($,0),Dk($,_e),Ek($,B()),j;switch($.finishedWork=et,$.finishedLanes=_e,g){case 0:case 1:throw Error(p$2(345));case 2:Qk($,uk,vk);break;case 3:if(Dk($,_e),(_e&130023424)===_e&&(g=gk+500-B(),10<g)){if(uc($,0)!==0)break;if(et=$.suspendedLanes,(et&_e)!==_e){L(),$.pingedLanes|=$.suspendedLanes&et;break}$.timeoutHandle=Ff(Qk.bind(null,$,uk,vk),g);break}Qk($,uk,vk);break;case 4:if(Dk($,_e),(_e&4194240)===_e)break;for(g=$.eventTimes,et=-1;0<_e;){var nt=31-oc(_e);tt=1<<nt,nt=g[nt],nt>et&&(et=nt),_e&=~tt}if(_e=et,_e=B()-_e,_e=(120>_e?120:480>_e?480:1080>_e?1080:1920>_e?1920:3e3>_e?3e3:4320>_e?4320:1960*mk(_e/1960))-_e,10<_e){$.timeoutHandle=Ff(Qk.bind(null,$,uk,vk),_e);break}Qk($,uk,vk);break;case 5:Qk($,uk,vk);break;default:throw Error(p$2(329))}}}return Ek($,B()),$.callbackNode===j?Hk.bind(null,$):null}function Ok($,g){var j=tk;return $.current.memoizedState.isDehydrated&&(Lk($,g).flags|=256),$=Jk($,g),$!==2&&(g=uk,uk=j,g!==null&&Gj(g)),$}function Gj($){uk===null?uk=$:uk.push.apply(uk,$)}function Pk($){for(var g=$;;){if(g.flags&16384){var j=g.updateQueue;if(j!==null&&(j=j.stores,j!==null))for(var _e=0;_e<j.length;_e++){var et=j[_e],tt=et.getSnapshot;et=et.value;try{if(!He(tt(),et))return!1}catch{return!1}}}if(j=g.child,g.subtreeFlags&16384&&j!==null)j.return=g,g=j;else{if(g===$)break;for(;g.sibling===null;){if(g.return===null||g.return===$)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Dk($,g){for(g&=~sk,g&=~rk,$.suspendedLanes|=g,$.pingedLanes&=~g,$=$.expirationTimes;0<g;){var j=31-oc(g),_e=1<<j;$[j]=-1,g&=~_e}}function Fk($){if(K&6)throw Error(p$2(327));Ik();var g=uc($,0);if(!(g&1))return Ek($,B()),null;var j=Jk($,g);if($.tag!==0&&j===2){var _e=xc($);_e!==0&&(g=_e,j=Ok($,_e))}if(j===1)throw j=qk,Lk($,0),Dk($,g),Ek($,B()),j;if(j===6)throw Error(p$2(345));return $.finishedWork=$.current.alternate,$.finishedLanes=g,Qk($,uk,vk),Ek($,B()),null}function Rk($,g){var j=K;K|=1;try{return $(g)}finally{K=j,K===0&&(Hj=B()+500,fg&&jg())}}function Sk($){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var g=K;K|=1;var j=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=1,$)return $()}finally{C$1=_e,pk.transition=j,K=g,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk($,g){$.finishedWork=null,$.finishedLanes=0;var j=$.timeoutHandle;if(j!==-1&&($.timeoutHandle=-1,Gf(j)),Y!==null)for(j=Y.return;j!==null;){var _e=j;switch(wg(_e),_e.tag){case 1:_e=_e.type.childContextTypes,_e!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(_e);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(_e.type._context);break;case 22:case 23:Ij()}j=j.return}if(R=$,Y=$=wh($.current,null),Z=gj=g,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(g=0;g<Wg.length;g++)if(j=Wg[g],_e=j.interleaved,_e!==null){j.interleaved=null;var et=_e.next,tt=j.pending;if(tt!==null){var nt=tt.next;tt.next=et,_e.next=nt}j.pending=_e}Wg=null}return $}function Nk($,g){do{var j=Y;try{if(Qg(),Ph.current=ai,Sh){for(var _e=N$1.memoizedState;_e!==null;){var et=_e.queue;et!==null&&(et.pending=null),_e=_e.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,j===null||j.return===null){T$1=1,qk=g,Y=null;break}e:{var tt=$,nt=j.return,rt=j,it=g;if(g=Z,rt.flags|=32768,it!==null&&typeof it=="object"&&typeof it.then=="function"){var st=it,ot=rt,at=ot.tag;if(!(ot.mode&1)&&(at===0||at===11||at===15)){var lt=ot.alternate;lt?(ot.updateQueue=lt.updateQueue,ot.memoizedState=lt.memoizedState,ot.lanes=lt.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var ut=Vi(nt);if(ut!==null){ut.flags&=-257,Wi(ut,nt,rt,tt,g),ut.mode&1&&Ti(tt,st,g),g=ut,it=st;var ht=g.updateQueue;if(ht===null){var ft=new Set;ft.add(it),g.updateQueue=ft}else ht.add(it);break e}else{if(!(g&1)){Ti(tt,st,g),uj();break e}it=Error(p$2(426))}}else if(I&&rt.mode&1){var gt=Vi(nt);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Wi(gt,nt,rt,tt,g),Jg(Ki(it,rt));break e}}tt=it=Ki(it,rt),T$1!==4&&(T$1=2),tk===null?tk=[tt]:tk.push(tt),tt=nt;do{switch(tt.tag){case 3:tt.flags|=65536,g&=-g,tt.lanes|=g;var dt=Oi(tt,it,g);fh(tt,dt);break e;case 1:rt=it;var mt=tt.type,yt=tt.stateNode;if(!(tt.flags&128)&&(typeof mt.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(Si===null||!Si.has(yt)))){tt.flags|=65536,g&=-g,tt.lanes|=g;var Et=Ri(tt,rt,g);fh(tt,Et);break e}}tt=tt.return}while(tt!==null)}Tk(j)}catch(Ct){g=Ct,Y===j&&j!==null&&(Y=j=j.return);continue}break}while(1)}function Kk(){var $=nk.current;return nk.current=ai,$===null?ai:$}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk($,g){var j=K;K|=2;var _e=Kk();(R!==$||Z!==g)&&(vk=null,Lk($,g));do try{Uk();break}catch(et){Nk($,et)}while(1);if(Qg(),K=j,nk.current=_e,Y!==null)throw Error(p$2(261));return R=null,Z=0,T$1}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk($){var g=Wk($.alternate,$,gj);$.memoizedProps=$.pendingProps,g===null?Tk($):Y=g,ok.current=null}function Tk($){var g=$;do{var j=g.alternate;if($=g.return,g.flags&32768){if(j=Jj(j,g),j!==null){j.flags&=32767,Y=j;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{T$1=6,Y=null;return}}else if(j=Fj(j,g,gj),j!==null){Y=j;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=$}while(g!==null);T$1===0&&(T$1=5)}function Qk($,g,j){var _e=C$1,et=pk.transition;try{pk.transition=null,C$1=1,Xk($,g,j,_e)}finally{pk.transition=et,C$1=_e}return null}function Xk($,g,j,_e){do Ik();while(xk!==null);if(K&6)throw Error(p$2(327));j=$.finishedWork;var et=$.finishedLanes;if(j===null)return null;if($.finishedWork=null,$.finishedLanes=0,j===$.current)throw Error(p$2(177));$.callbackNode=null,$.callbackPriority=0;var tt=j.lanes|j.childLanes;if(Bc($,tt),$===R&&(Y=R=null,Z=0),!(j.subtreeFlags&2064)&&!(j.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),tt=(j.flags&15990)!==0,j.subtreeFlags&15990||tt){tt=pk.transition,pk.transition=null;var nt=C$1;C$1=1;var rt=K;K|=4,ok.current=null,Pj($,j),ek(j,$),Oe(Df),dd=!!Cf,Df=Cf=null,$.current=j,ik(j),dc(),K=rt,C$1=nt,pk.transition=tt}else $.current=j;if(wk&&(wk=!1,xk=$,yk=et),tt=$.pendingLanes,tt===0&&(Si=null),mc(j.stateNode),Ek($,B()),g!==null)for(_e=$.onRecoverableError,j=0;j<g.length;j++)et=g[j],_e(et.value,{componentStack:et.stack,digest:et.digest});if(Pi)throw Pi=!1,$=Qi,Qi=null,$;return yk&1&&$.tag!==0&&Ik(),tt=$.pendingLanes,tt&1?$===Ak?zk++:(zk=0,Ak=$):zk=0,jg(),null}function Ik(){if(xk!==null){var $=Dc(yk),g=pk.transition,j=C$1;try{if(pk.transition=null,C$1=16>$?16:$,xk===null)var _e=!1;else{if($=xk,xk=null,yk=0,K&6)throw Error(p$2(331));var et=K;for(K|=4,V=$.current;V!==null;){var tt=V,nt=tt.child;if(V.flags&16){var rt=tt.deletions;if(rt!==null){for(var it=0;it<rt.length;it++){var st=rt[it];for(V=st;V!==null;){var ot=V;switch(ot.tag){case 0:case 11:case 15:Qj(8,ot,tt)}var at=ot.child;if(at!==null)at.return=ot,V=at;else for(;V!==null;){ot=V;var lt=ot.sibling,ut=ot.return;if(Tj(ot),ot===st){V=null;break}if(lt!==null){lt.return=ut,V=lt;break}V=ut}}}var ht=tt.alternate;if(ht!==null){var ft=ht.child;if(ft!==null){ht.child=null;do{var gt=ft.sibling;ft.sibling=null,ft=gt}while(ft!==null)}}V=tt}}if(tt.subtreeFlags&2064&&nt!==null)nt.return=tt,V=nt;else e:for(;V!==null;){if(tt=V,tt.flags&2048)switch(tt.tag){case 0:case 11:case 15:Qj(9,tt,tt.return)}var dt=tt.sibling;if(dt!==null){dt.return=tt.return,V=dt;break e}V=tt.return}}var mt=$.current;for(V=mt;V!==null;){nt=V;var yt=nt.child;if(nt.subtreeFlags&2064&&yt!==null)yt.return=nt,V=yt;else e:for(nt=mt;V!==null;){if(rt=V,rt.flags&2048)try{switch(rt.tag){case 0:case 11:case 15:Rj(9,rt)}}catch(Ct){W(rt,rt.return,Ct)}if(rt===nt){V=null;break e}var Et=rt.sibling;if(Et!==null){Et.return=rt.return,V=Et;break e}V=rt.return}}if(K=et,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,$)}catch{}_e=!0}return _e}finally{C$1=j,pk.transition=g}}return!1}function Yk($,g,j){g=Ki(j,g),g=Oi($,g,1),$=dh($,g,1),g=L(),$!==null&&(Ac($,1,g),Ek($,g))}function W($,g,j){if($.tag===3)Yk($,$,j);else for(;g!==null;){if(g.tag===3){Yk(g,$,j);break}else if(g.tag===1){var _e=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof _e.componentDidCatch=="function"&&(Si===null||!Si.has(_e))){$=Ki(j,$),$=Ri(g,$,1),g=dh(g,$,1),$=L(),g!==null&&(Ac(g,1,$),Ek(g,$));break}}g=g.return}}function Ui($,g,j){var _e=$.pingCache;_e!==null&&_e.delete(g),g=L(),$.pingedLanes|=$.suspendedLanes&j,R===$&&(Z&j)===j&&(T$1===4||T$1===3&&(Z&130023424)===Z&&500>B()-gk?Lk($,0):sk|=j),Ek($,g)}function Zk($,g){g===0&&($.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var j=L();$=Zg($,g),$!==null&&(Ac($,g,j),Ek($,j))}function vj($){var g=$.memoizedState,j=0;g!==null&&(j=g.retryLane),Zk($,j)}function ck($,g){var j=0;switch($.tag){case 13:var _e=$.stateNode,et=$.memoizedState;et!==null&&(j=et.retryLane);break;case 19:_e=$.stateNode;break;default:throw Error(p$2(314))}_e!==null&&_e.delete(g),Zk($,j)}var Wk;Wk=function($,g,j){if($!==null)if($.memoizedProps!==g.pendingProps||Wf.current)Ug=!0;else{if(!($.lanes&j)&&!(g.flags&128))return Ug=!1,zj($,g,j);Ug=!!($.flags&131072)}else Ug=!1,I&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var _e=g.type;jj($,g),$=g.pendingProps;var et=Yf(g,H.current);Tg(g,j),et=Xh(null,g,_e,$,et,j);var tt=bi();return g.flags|=1,typeof et=="object"&&et!==null&&typeof et.render=="function"&&et.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(_e)?(tt=!0,cg(g)):tt=!1,g.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,ah(g),et.updater=nh,g.stateNode=et,et._reactInternals=g,rh(g,_e,$,j),g=kj(null,g,_e,!0,tt,j)):(g.tag=0,I&&tt&&vg(g),Yi(null,g,et,j),g=g.child),g;case 16:_e=g.elementType;e:{switch(jj($,g),$=g.pendingProps,et=_e._init,_e=et(_e._payload),g.type=_e,et=g.tag=$k(_e),$=Lg(_e,$),et){case 0:g=dj(null,g,_e,$,j);break e;case 1:g=ij(null,g,_e,$,j);break e;case 11:g=Zi(null,g,_e,$,j);break e;case 14:g=aj(null,g,_e,Lg(_e.type,$),j);break e}throw Error(p$2(306,_e,""))}return g;case 0:return _e=g.type,et=g.pendingProps,et=g.elementType===_e?et:Lg(_e,et),dj($,g,_e,et,j);case 1:return _e=g.type,et=g.pendingProps,et=g.elementType===_e?et:Lg(_e,et),ij($,g,_e,et,j);case 3:e:{if(lj(g),$===null)throw Error(p$2(387));_e=g.pendingProps,tt=g.memoizedState,et=tt.element,bh($,g),gh(g,_e,null,j);var nt=g.memoizedState;if(_e=nt.element,tt.isDehydrated)if(tt={element:_e,isDehydrated:!1,cache:nt.cache,pendingSuspenseBoundaries:nt.pendingSuspenseBoundaries,transitions:nt.transitions},g.updateQueue.baseState=tt,g.memoizedState=tt,g.flags&256){et=Ki(Error(p$2(423)),g),g=mj($,g,_e,j,et);break e}else if(_e!==et){et=Ki(Error(p$2(424)),g),g=mj($,g,_e,j,et);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I=!0,zg=null,j=Ch(g,null,_e,j),g.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling;else{if(Ig(),_e===et){g=$i($,g,j);break e}Yi($,g,_e,j)}g=g.child}return g;case 5:return Kh(g),$===null&&Eg(g),_e=g.type,et=g.pendingProps,tt=$!==null?$.memoizedProps:null,nt=et.children,Ef(_e,et)?nt=null:tt!==null&&Ef(_e,tt)&&(g.flags|=32),hj($,g),Yi($,g,nt,j),g.child;case 6:return $===null&&Eg(g),null;case 13:return pj($,g,j);case 4:return Ih(g,g.stateNode.containerInfo),_e=g.pendingProps,$===null?g.child=Bh(g,null,_e,j):Yi($,g,_e,j),g.child;case 11:return _e=g.type,et=g.pendingProps,et=g.elementType===_e?et:Lg(_e,et),Zi($,g,_e,et,j);case 7:return Yi($,g,g.pendingProps,j),g.child;case 8:return Yi($,g,g.pendingProps.children,j),g.child;case 12:return Yi($,g,g.pendingProps.children,j),g.child;case 10:e:{if(_e=g.type._context,et=g.pendingProps,tt=g.memoizedProps,nt=et.value,G(Mg,_e._currentValue),_e._currentValue=nt,tt!==null)if(He(tt.value,nt)){if(tt.children===et.children&&!Wf.current){g=$i($,g,j);break e}}else for(tt=g.child,tt!==null&&(tt.return=g);tt!==null;){var rt=tt.dependencies;if(rt!==null){nt=tt.child;for(var it=rt.firstContext;it!==null;){if(it.context===_e){if(tt.tag===1){it=ch(-1,j&-j),it.tag=2;var st=tt.updateQueue;if(st!==null){st=st.shared;var ot=st.pending;ot===null?it.next=it:(it.next=ot.next,ot.next=it),st.pending=it}}tt.lanes|=j,it=tt.alternate,it!==null&&(it.lanes|=j),Sg(tt.return,j,g),rt.lanes|=j;break}it=it.next}}else if(tt.tag===10)nt=tt.type===g.type?null:tt.child;else if(tt.tag===18){if(nt=tt.return,nt===null)throw Error(p$2(341));nt.lanes|=j,rt=nt.alternate,rt!==null&&(rt.lanes|=j),Sg(nt,j,g),nt=tt.sibling}else nt=tt.child;if(nt!==null)nt.return=tt;else for(nt=tt;nt!==null;){if(nt===g){nt=null;break}if(tt=nt.sibling,tt!==null){tt.return=nt.return,nt=tt;break}nt=nt.return}tt=nt}Yi($,g,et.children,j),g=g.child}return g;case 9:return et=g.type,_e=g.pendingProps.children,Tg(g,j),et=Vg(et),_e=_e(et),g.flags|=1,Yi($,g,_e,j),g.child;case 14:return _e=g.type,et=Lg(_e,g.pendingProps),et=Lg(_e.type,et),aj($,g,_e,et,j);case 15:return cj($,g,g.type,g.pendingProps,j);case 17:return _e=g.type,et=g.pendingProps,et=g.elementType===_e?et:Lg(_e,et),jj($,g),g.tag=1,Zf(_e)?($=!0,cg(g)):$=!1,Tg(g,j),ph(g,_e,et),rh(g,_e,et,j),kj(null,g,_e,!0,$,j);case 19:return yj($,g,j);case 22:return ej($,g,j)}throw Error(p$2(156,g.tag))};function Gk($,g){return ac($,g)}function al($,g,j,_e){this.tag=$,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_e,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg($,g,j,_e){return new al($,g,j,_e)}function bj($){return $=$.prototype,!(!$||!$.isReactComponent)}function $k($){if(typeof $=="function")return bj($)?1:0;if($!=null){if($=$.$$typeof,$===Da)return 11;if($===Ga)return 14}return 2}function wh($,g){var j=$.alternate;return j===null?(j=Bg($.tag,g,$.key,$.mode),j.elementType=$.elementType,j.type=$.type,j.stateNode=$.stateNode,j.alternate=$,$.alternate=j):(j.pendingProps=g,j.type=$.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=$.flags&14680064,j.childLanes=$.childLanes,j.lanes=$.lanes,j.child=$.child,j.memoizedProps=$.memoizedProps,j.memoizedState=$.memoizedState,j.updateQueue=$.updateQueue,g=$.dependencies,j.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},j.sibling=$.sibling,j.index=$.index,j.ref=$.ref,j}function yh($,g,j,_e,et,tt){var nt=2;if(_e=$,typeof $=="function")bj($)&&(nt=1);else if(typeof $=="string")nt=5;else e:switch($){case ya:return Ah(j.children,et,tt,g);case za:nt=8,et|=8;break;case Aa:return $=Bg(12,j,g,et|2),$.elementType=Aa,$.lanes=tt,$;case Ea:return $=Bg(13,j,g,et),$.elementType=Ea,$.lanes=tt,$;case Fa:return $=Bg(19,j,g,et),$.elementType=Fa,$.lanes=tt,$;case Ia:return qj(j,et,tt,g);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case Ba:nt=10;break e;case Ca:nt=9;break e;case Da:nt=11;break e;case Ga:nt=14;break e;case Ha:nt=16,_e=null;break e}throw Error(p$2(130,$==null?$:typeof $,""))}return g=Bg(nt,j,g,et),g.elementType=$,g.type=_e,g.lanes=tt,g}function Ah($,g,j,_e){return $=Bg(7,$,_e,g),$.lanes=j,$}function qj($,g,j,_e){return $=Bg(22,$,_e,g),$.elementType=Ia,$.lanes=j,$.stateNode={isHidden:!1},$}function xh($,g,j){return $=Bg(6,$,null,g),$.lanes=j,$}function zh($,g,j){return g=Bg(4,$.children!==null?$.children:[],$.key,g),g.lanes=j,g.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},g}function bl($,g,j,_e,et){this.tag=g,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_e,this.onRecoverableError=et,this.mutableSourceEagerHydrationData=null}function cl($,g,j,_e,et,tt,nt,rt,it){return $=new bl($,g,j,rt,it),g===1?(g=1,tt===!0&&(g|=8)):g=0,tt=Bg(3,null,null,g),$.current=tt,tt.stateNode=$,tt.memoizedState={element:_e,isDehydrated:j,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(tt),$}function dl($,g,j){var _e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_e==null?null:""+_e,children:$,containerInfo:g,implementation:j}}function el($){if(!$)return Vf;$=$._reactInternals;e:{if(Vb($)!==$||$.tag!==1)throw Error(p$2(170));var g=$;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$2(171))}if($.tag===1){var j=$.type;if(Zf(j))return bg($,j,g)}return g}function fl($,g,j,_e,et,tt,nt,rt,it){return $=cl(j,_e,!0,$,et,tt,nt,rt,it),$.context=el(null),j=$.current,_e=L(),et=lh(j),tt=ch(_e,et),tt.callback=g??null,dh(j,tt,et),$.current.lanes=et,Ac($,et,_e),Ek($,_e),$}function gl($,g,j,_e){var et=g.current,tt=L(),nt=lh(et);return j=el(j),g.context===null?g.context=j:g.pendingContext=j,g=ch(tt,nt),g.payload={element:$},_e=_e===void 0?null:_e,_e!==null&&(g.callback=_e),$=dh(et,g,nt),$!==null&&(mh($,et,nt,tt),eh($,et,nt)),nt}function hl($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return $.child.stateNode;default:return $.child.stateNode}}function il($,g){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var j=$.retryLane;$.retryLane=j!==0&&j<g?j:g}}function jl($,g){il($,g),($=$.alternate)&&il($,g)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function($){console.error($)};function ml($){this._internalRoot=$}nl.prototype.render=ml.prototype.render=function($){var g=this._internalRoot;if(g===null)throw Error(p$2(409));gl($,g,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var $=this._internalRoot;if($!==null){this._internalRoot=null;var g=$.containerInfo;Sk(function(){gl(null,$,null,null)}),g[uf]=null}};function nl($){this._internalRoot=$}nl.prototype.unstable_scheduleHydration=function($){if($){var g=Hc();$={blockedOn:null,target:$,priority:g};for(var j=0;j<Qc.length&&g!==0&&g<Qc[j].priority;j++);Qc.splice(j,0,$),j===0&&Vc($)}};function ol($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11)}function pl($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11&&($.nodeType!==8||$.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl($,g,j,_e,et){if(et){if(typeof _e=="function"){var tt=_e;_e=function(){var st=hl(nt);tt.call(st)}}var nt=fl(g,_e,$,0,null,!1,!1,"",ql);return $._reactRootContainer=nt,$[uf]=nt.current,sf($.nodeType===8?$.parentNode:$),Sk(),nt}for(;et=$.lastChild;)$.removeChild(et);if(typeof _e=="function"){var rt=_e;_e=function(){var st=hl(it);rt.call(st)}}var it=cl($,0,!1,null,null,!1,!1,"",ql);return $._reactRootContainer=it,$[uf]=it.current,sf($.nodeType===8?$.parentNode:$),Sk(function(){gl(g,it,j,_e)}),it}function sl($,g,j,_e,et){var tt=j._reactRootContainer;if(tt){var nt=tt;if(typeof et=="function"){var rt=et;et=function(){var it=hl(nt);rt.call(it)}}gl(g,nt,$,et)}else nt=rl(j,g,$,et,_e);return hl(nt)}Ec=function($){switch($.tag){case 3:var g=$.stateNode;if(g.current.memoizedState.isDehydrated){var j=tc(g.pendingLanes);j!==0&&(Cc(g,j|1),Ek(g,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var _e=Zg($,1);if(_e!==null){var et=L();mh(_e,$,1,et)}}),jl($,1)}};Fc=function($){if($.tag===13){var g=Zg($,134217728);if(g!==null){var j=L();mh(g,$,134217728,j)}jl($,134217728)}};Gc=function($){if($.tag===13){var g=lh($),j=Zg($,g);if(j!==null){var _e=L();mh(j,$,g,_e)}jl($,g)}};Hc=function(){return C$1};Ic=function($,g){var j=C$1;try{return C$1=$,g()}finally{C$1=j}};yb=function($,g,j){switch(g){case"input":if(bb($,j),g=j.name,j.type==="radio"&&g!=null){for(j=$;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<j.length;g++){var _e=j[g];if(_e!==$&&_e.form===$.form){var et=Db(_e);if(!et)throw Error(p$2(90));Wa(_e),bb(_e,et)}}}break;case"textarea":ib($,j);break;case"select":g=j.value,g!=null&&fb($,!!j.multiple,g,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function($){return $=Zb($),$===null?null:$.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function($,g){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(g))throw Error(p$2(200));return dl($,g,null,j)};reactDom_production_min.createRoot=function($,g){if(!ol($))throw Error(p$2(299));var j=!1,_e="",et=ll;return g!=null&&(g.unstable_strictMode===!0&&(j=!0),g.identifierPrefix!==void 0&&(_e=g.identifierPrefix),g.onRecoverableError!==void 0&&(et=g.onRecoverableError)),g=cl($,1,!1,null,null,j,!1,_e,et),$[uf]=g.current,sf($.nodeType===8?$.parentNode:$),new ml(g)};reactDom_production_min.findDOMNode=function($){if($==null)return null;if($.nodeType===1)return $;var g=$._reactInternals;if(g===void 0)throw typeof $.render=="function"?Error(p$2(188)):($=Object.keys($).join(","),Error(p$2(268,$)));return $=Zb(g),$=$===null?null:$.stateNode,$};reactDom_production_min.flushSync=function($){return Sk($)};reactDom_production_min.hydrate=function($,g,j){if(!pl(g))throw Error(p$2(200));return sl(null,$,g,!0,j)};reactDom_production_min.hydrateRoot=function($,g,j){if(!ol($))throw Error(p$2(405));var _e=j!=null&&j.hydratedSources||null,et=!1,tt="",nt=ll;if(j!=null&&(j.unstable_strictMode===!0&&(et=!0),j.identifierPrefix!==void 0&&(tt=j.identifierPrefix),j.onRecoverableError!==void 0&&(nt=j.onRecoverableError)),g=fl(g,null,$,1,j??null,et,!1,tt,nt),$[uf]=g.current,sf($),_e)for($=0;$<_e.length;$++)j=_e[$],et=j._getVersion,et=et(j._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[j,et]:g.mutableSourceEagerHydrationData.push(j,et);return new nl(g)};reactDom_production_min.render=function($,g,j){if(!pl(g))throw Error(p$2(200));return sl(null,$,g,!1,j)};reactDom_production_min.unmountComponentAtNode=function($){if(!pl($))throw Error(p$2(40));return $._reactRootContainer?(Sk(function(){sl(null,null,$,!1,function(){$._reactRootContainer=null,$[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function($,g,j,_e){if(!pl(j))throw Error(p$2(200));if($==null||$._reactInternals===void 0)throw Error(p$2(38));return sl($,g,j,!1,_e)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch($){console.error($)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$3=reactDomExports;client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;const App$1="",navLinkClass=({isActive:$,isPending:g})=>$?"active":g?"pending":"";function App(){return jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsxs("div",{className:"flex-row nav",children:[jsxRuntimeExports.jsx("div",{className:"nav-item title",children:jsxRuntimeExports.jsx("span",{children:"TOC-lang"})}),jsxRuntimeExports.jsx("div",{className:"nav-item right",children:jsxRuntimeExports.jsx(NavLink,{className:navLinkClass,to:"about",children:"About"})})]}),jsxRuntimeExports.jsx(Outlet,{})]})}const index$1="";function ErrorPage(){const $=useRouteError();return console.error($),jsxRuntimeExports.jsxs("div",{id:"error-page",children:[jsxRuntimeExports.jsx("h1",{children:"Oops!"}),jsxRuntimeExports.jsx("p",{children:"Sorry, an unexpected error has occurred."}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("i",{children:$.statusText||$.message})})]})}function _extends(){return _extends=Object.assign?Object.assign.bind():function($){for(var g=1;g<arguments.length;g++){var j=arguments[g];for(var _e in j)Object.prototype.hasOwnProperty.call(j,_e)&&($[_e]=j[_e])}return $},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose($,g){if($==null)return{};var j={},_e=Object.keys($),et,tt;for(tt=0;tt<_e.length;tt++)et=_e[tt],!(g.indexOf(et)>=0)&&(j[et]=$[et]);return j}class Text{lineAt(g){if(g<0||g>this.length)throw new RangeError(`Invalid position ${g} in document of length ${this.length}`);return this.lineInner(g,!1,1,0)}line(g){if(g<1||g>this.lines)throw new RangeError(`Invalid line number ${g} in ${this.lines}-line document`);return this.lineInner(g,!0,1,0)}replace(g,j,_e){[g,j]=clip(this,g,j);let et=[];return this.decompose(0,g,et,2),_e.length&&_e.decompose(0,_e.length,et,3),this.decompose(j,this.length,et,1),TextNode$1.from(et,this.length-(j-g)+_e.length)}append(g){return this.replace(this.length,this.length,g)}slice(g,j=this.length){[g,j]=clip(this,g,j);let _e=[];return this.decompose(g,j,_e,0),TextNode$1.from(_e,j-g)}eq(g){if(g==this)return!0;if(g.length!=this.length||g.lines!=this.lines)return!1;let j=this.scanIdentical(g,1),_e=this.length-this.scanIdentical(g,-1),et=new RawTextCursor(this),tt=new RawTextCursor(g);for(let nt=j,rt=j;;){if(et.next(nt),tt.next(nt),nt=0,et.lineBreak!=tt.lineBreak||et.done!=tt.done||et.value!=tt.value)return!1;if(rt+=et.value.length,et.done||rt>=_e)return!0}}iter(g=1){return new RawTextCursor(this,g)}iterRange(g,j=this.length){return new PartialTextCursor(this,g,j)}iterLines(g,j){let _e;if(g==null)_e=this.iter();else{j==null&&(j=this.lines+1);let et=this.line(g).from;_e=this.iterRange(et,Math.max(et,j==this.lines+1?this.length:j<=1?0:this.line(j-1).to))}return new LineCursor(_e)}toString(){return this.sliceString(0)}toJSON(){let g=[];return this.flatten(g),g}constructor(){}static of(g){if(g.length==0)throw new RangeError("A document must have at least one line");return g.length==1&&!g[0]?Text.empty:g.length<=32?new TextLeaf(g):TextNode$1.from(TextLeaf.split(g,[]))}}class TextLeaf extends Text{constructor(g,j=textLength(g)){super(),this.text=g,this.length=j}get lines(){return this.text.length}get children(){return null}lineInner(g,j,_e,et){for(let tt=0;;tt++){let nt=this.text[tt],rt=et+nt.length;if((j?_e:rt)>=g)return new Line(et,rt,_e,nt);et=rt+1,_e++}}decompose(g,j,_e,et){let tt=g<=0&&j>=this.length?this:new TextLeaf(sliceText(this.text,g,j),Math.min(j,this.length)-Math.max(0,g));if(et&1){let nt=_e.pop(),rt=appendText(tt.text,nt.text.slice(),0,tt.length);if(rt.length<=32)_e.push(new TextLeaf(rt,nt.length+tt.length));else{let it=rt.length>>1;_e.push(new TextLeaf(rt.slice(0,it)),new TextLeaf(rt.slice(it)))}}else _e.push(tt)}replace(g,j,_e){if(!(_e instanceof TextLeaf))return super.replace(g,j,_e);[g,j]=clip(this,g,j);let et=appendText(this.text,appendText(_e.text,sliceText(this.text,0,g)),j),tt=this.length+_e.length-(j-g);return et.length<=32?new TextLeaf(et,tt):TextNode$1.from(TextLeaf.split(et,[]),tt)}sliceString(g,j=this.length,_e=`
`){[g,j]=clip(this,g,j);let et="";for(let tt=0,nt=0;tt<=j&&nt<this.text.length;nt++){let rt=this.text[nt],it=tt+rt.length;tt>g&&nt&&(et+=_e),g<it&&j>tt&&(et+=rt.slice(Math.max(0,g-tt),j-tt)),tt=it+1}return et}flatten(g){for(let j of this.text)g.push(j)}scanIdentical(){return 0}static split(g,j){let _e=[],et=-1;for(let tt of g)_e.push(tt),et+=tt.length+1,_e.length==32&&(j.push(new TextLeaf(_e,et)),_e=[],et=-1);return et>-1&&j.push(new TextLeaf(_e,et)),j}}let TextNode$1=class qn extends Text{constructor(g,j){super(),this.children=g,this.length=j,this.lines=0;for(let _e of g)this.lines+=_e.lines}lineInner(g,j,_e,et){for(let tt=0;;tt++){let nt=this.children[tt],rt=et+nt.length,it=_e+nt.lines-1;if((j?it:rt)>=g)return nt.lineInner(g,j,_e,et);et=rt+1,_e=it+1}}decompose(g,j,_e,et){for(let tt=0,nt=0;nt<=j&&tt<this.children.length;tt++){let rt=this.children[tt],it=nt+rt.length;if(g<=it&&j>=nt){let st=et&((nt<=g?1:0)|(it>=j?2:0));nt>=g&&it<=j&&!st?_e.push(rt):rt.decompose(g-nt,j-nt,_e,st)}nt=it+1}}replace(g,j,_e){if([g,j]=clip(this,g,j),_e.lines<this.lines)for(let et=0,tt=0;et<this.children.length;et++){let nt=this.children[et],rt=tt+nt.length;if(g>=tt&&j<=rt){let it=nt.replace(g-tt,j-tt,_e),st=this.lines-nt.lines+it.lines;if(it.lines<st>>5-1&&it.lines>st>>5+1){let ot=this.children.slice();return ot[et]=it,new qn(ot,this.length-(j-g)+_e.length)}return super.replace(tt,rt,it)}tt=rt+1}return super.replace(g,j,_e)}sliceString(g,j=this.length,_e=`
`){[g,j]=clip(this,g,j);let et="";for(let tt=0,nt=0;tt<this.children.length&&nt<=j;tt++){let rt=this.children[tt],it=nt+rt.length;nt>g&&tt&&(et+=_e),g<it&&j>nt&&(et+=rt.sliceString(g-nt,j-nt,_e)),nt=it+1}return et}flatten(g){for(let j of this.children)j.flatten(g)}scanIdentical(g,j){if(!(g instanceof qn))return 0;let _e=0,[et,tt,nt,rt]=j>0?[0,0,this.children.length,g.children.length]:[this.children.length-1,g.children.length-1,-1,-1];for(;;et+=j,tt+=j){if(et==nt||tt==rt)return _e;let it=this.children[et],st=g.children[tt];if(it!=st)return _e+it.scanIdentical(st,j);_e+=it.length+1}}static from(g,j=g.reduce((_e,et)=>_e+et.length+1,-1)){let _e=0;for(let ut of g)_e+=ut.lines;if(_e<32){let ut=[];for(let ht of g)ht.flatten(ut);return new TextLeaf(ut,j)}let et=Math.max(32,_e>>5),tt=et<<1,nt=et>>1,rt=[],it=0,st=-1,ot=[];function at(ut){let ht;if(ut.lines>tt&&ut instanceof qn)for(let ft of ut.children)at(ft);else ut.lines>nt&&(it>nt||!it)?(lt(),rt.push(ut)):ut instanceof TextLeaf&&it&&(ht=ot[ot.length-1])instanceof TextLeaf&&ut.lines+ht.lines<=32?(it+=ut.lines,st+=ut.length+1,ot[ot.length-1]=new TextLeaf(ht.text.concat(ut.text),ht.length+1+ut.length)):(it+ut.lines>et&&lt(),it+=ut.lines,st+=ut.length+1,ot.push(ut))}function lt(){it!=0&&(rt.push(ot.length==1?ot[0]:qn.from(ot,st)),st=-1,it=ot.length=0)}for(let ut of g)at(ut);return lt(),rt.length==1?rt[0]:new qn(rt,j)}};Text.empty=new TextLeaf([""],0);function textLength($){let g=-1;for(let j of $)g+=j.length+1;return g}function appendText($,g,j=0,_e=1e9){for(let et=0,tt=0,nt=!0;tt<$.length&&et<=_e;tt++){let rt=$[tt],it=et+rt.length;it>=j&&(it>_e&&(rt=rt.slice(0,_e-et)),et<j&&(rt=rt.slice(j-et)),nt?(g[g.length-1]+=rt,nt=!1):g.push(rt)),et=it+1}return g}function sliceText($,g,j){return appendText($,[""],g,j)}class RawTextCursor{constructor(g,j=1){this.dir=j,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[g],this.offsets=[j>0?1:(g instanceof TextLeaf?g.text.length:g.children.length)<<1]}nextInner(g,j){for(this.done=this.lineBreak=!1;;){let _e=this.nodes.length-1,et=this.nodes[_e],tt=this.offsets[_e],nt=tt>>1,rt=et instanceof TextLeaf?et.text.length:et.children.length;if(nt==(j>0?rt:0)){if(_e==0)return this.done=!0,this.value="",this;j>0&&this.offsets[_e-1]++,this.nodes.pop(),this.offsets.pop()}else if((tt&1)==(j>0?0:1)){if(this.offsets[_e]+=j,g==0)return this.lineBreak=!0,this.value=`
`,this;g--}else if(et instanceof TextLeaf){let it=et.text[nt+(j<0?-1:0)];if(this.offsets[_e]+=j,it.length>Math.max(0,g))return this.value=g==0?it:j>0?it.slice(g):it.slice(0,it.length-g),this;g-=it.length}else{let it=et.children[nt+(j<0?-1:0)];g>it.length?(g-=it.length,this.offsets[_e]+=j):(j<0&&this.offsets[_e]--,this.nodes.push(it),this.offsets.push(j>0?1:(it instanceof TextLeaf?it.text.length:it.children.length)<<1))}}}next(g=0){return g<0&&(this.nextInner(-g,-this.dir),g=this.value.length),this.nextInner(g,this.dir)}}class PartialTextCursor{constructor(g,j,_e){this.value="",this.done=!1,this.cursor=new RawTextCursor(g,j>_e?-1:1),this.pos=j>_e?g.length:0,this.from=Math.min(j,_e),this.to=Math.max(j,_e)}nextInner(g,j){if(j<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;g+=Math.max(0,j<0?this.pos-this.to:this.from-this.pos);let _e=j<0?this.pos-this.from:this.to-this.pos;g>_e&&(g=_e),_e-=g;let{value:et}=this.cursor.next(g);return this.pos+=(et.length+g)*j,this.value=et.length<=_e?et:j<0?et.slice(et.length-_e):et.slice(0,_e),this.done=!this.value,this}next(g=0){return g<0?g=Math.max(g,this.from-this.pos):g>0&&(g=Math.min(g,this.to-this.pos)),this.nextInner(g,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(g){this.inner=g,this.afterBreak=!0,this.value="",this.done=!1}next(g=0){let{done:j,lineBreak:_e,value:et}=this.inner.next(g);return j&&this.afterBreak?(this.value="",this.afterBreak=!1):j?(this.done=!0,this.value=""):_e?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=et,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(g,j,_e,et){this.from=g,this.to=j,this.number=_e,this.text=et}get length(){return this.to-this.from}}function clip($,g,j){return g=Math.max(0,Math.min($.length,g)),[g,Math.max(g,Math.min($.length,j))]}let extend$1="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map($=>$?parseInt($,36):1);for(let $=1;$<extend$1.length;$++)extend$1[$]+=extend$1[$-1];function isExtendingChar($){for(let g=1;g<extend$1.length;g+=2)if(extend$1[g]>$)return extend$1[g-1]<=$;return!1}function isRegionalIndicator($){return $>=127462&&$<=127487}const ZWJ=8205;function findClusterBreak($,g,j=!0,_e=!0){return(j?nextClusterBreak:prevClusterBreak)($,g,_e)}function nextClusterBreak($,g,j){if(g==$.length)return g;g&&surrogateLow($.charCodeAt(g))&&surrogateHigh($.charCodeAt(g-1))&&g--;let _e=codePointAt($,g);for(g+=codePointSize(_e);g<$.length;){let et=codePointAt($,g);if(_e==ZWJ||et==ZWJ||j&&isExtendingChar(et))g+=codePointSize(et),_e=et;else if(isRegionalIndicator(et)){let tt=0,nt=g-2;for(;nt>=0&&isRegionalIndicator(codePointAt($,nt));)tt++,nt-=2;if(tt%2==0)break;g+=2}else break}return g}function prevClusterBreak($,g,j){for(;g>0;){let _e=nextClusterBreak($,g-2,j);if(_e<g)return _e;g--}return 0}function surrogateLow($){return $>=56320&&$<57344}function surrogateHigh($){return $>=55296&&$<56320}function codePointAt($,g){let j=$.charCodeAt(g);if(!surrogateHigh(j)||g+1==$.length)return j;let _e=$.charCodeAt(g+1);return surrogateLow(_e)?(j-55296<<10)+(_e-56320)+65536:j}function fromCodePoint($){return $<=65535?String.fromCharCode($):($-=65536,String.fromCharCode(($>>10)+55296,($&1023)+56320))}function codePointSize($){return $<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function($){return $[$.Simple=0]="Simple",$[$.TrackDel=1]="TrackDel",$[$.TrackBefore=2]="TrackBefore",$[$.TrackAfter=3]="TrackAfter",$}(MapMode||(MapMode={}));class ChangeDesc{constructor(g){this.sections=g}get length(){let g=0;for(let j=0;j<this.sections.length;j+=2)g+=this.sections[j];return g}get newLength(){let g=0;for(let j=0;j<this.sections.length;j+=2){let _e=this.sections[j+1];g+=_e<0?this.sections[j]:_e}return g}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(g){for(let j=0,_e=0,et=0;j<this.sections.length;){let tt=this.sections[j++],nt=this.sections[j++];nt<0?(g(_e,et,tt),et+=tt):et+=nt,_e+=tt}}iterChangedRanges(g,j=!1){iterChanges(this,g,j)}get invertedDesc(){let g=[];for(let j=0;j<this.sections.length;){let _e=this.sections[j++],et=this.sections[j++];et<0?g.push(_e,et):g.push(et,_e)}return new ChangeDesc(g)}composeDesc(g){return this.empty?g:g.empty?this:composeSets(this,g)}mapDesc(g,j=!1){return g.empty?this:mapSet(this,g,j)}mapPos(g,j=-1,_e=MapMode.Simple){let et=0,tt=0;for(let nt=0;nt<this.sections.length;){let rt=this.sections[nt++],it=this.sections[nt++],st=et+rt;if(it<0){if(st>g)return tt+(g-et);tt+=rt}else{if(_e!=MapMode.Simple&&st>=g&&(_e==MapMode.TrackDel&&et<g&&st>g||_e==MapMode.TrackBefore&&et<g||_e==MapMode.TrackAfter&&st>g))return null;if(st>g||st==g&&j<0&&!rt)return g==et||j<0?tt:tt+it;tt+=it}et=st}if(g>et)throw new RangeError(`Position ${g} is out of range for changeset of length ${et}`);return tt}touchesRange(g,j=g){for(let _e=0,et=0;_e<this.sections.length&&et<=j;){let tt=this.sections[_e++],nt=this.sections[_e++],rt=et+tt;if(nt>=0&&et<=j&&rt>=g)return et<g&&rt>j?"cover":!0;et=rt}return!1}toString(){let g="";for(let j=0;j<this.sections.length;){let _e=this.sections[j++],et=this.sections[j++];g+=(g?" ":"")+_e+(et>=0?":"+et:"")}return g}toJSON(){return this.sections}static fromJSON(g){if(!Array.isArray(g)||g.length%2||g.some(j=>typeof j!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(g)}static create(g){return new ChangeDesc(g)}}class ChangeSet extends ChangeDesc{constructor(g,j){super(g),this.inserted=j}apply(g){if(this.length!=g.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(j,_e,et,tt,nt)=>g=g.replace(et,et+(_e-j),nt),!1),g}mapDesc(g,j=!1){return mapSet(this,g,j,!0)}invert(g){let j=this.sections.slice(),_e=[];for(let et=0,tt=0;et<j.length;et+=2){let nt=j[et],rt=j[et+1];if(rt>=0){j[et]=rt,j[et+1]=nt;let it=et>>1;for(;_e.length<it;)_e.push(Text.empty);_e.push(nt?g.slice(tt,tt+nt):Text.empty)}tt+=nt}return new ChangeSet(j,_e)}compose(g){return this.empty?g:g.empty?this:composeSets(this,g,!0)}map(g,j=!1){return g.empty?this:mapSet(this,g,j,!0)}iterChanges(g,j=!1){iterChanges(this,g,j)}get desc(){return ChangeDesc.create(this.sections)}filter(g){let j=[],_e=[],et=[],tt=new SectionIter(this);e:for(let nt=0,rt=0;;){let it=nt==g.length?1e9:g[nt++];for(;rt<it||rt==it&&tt.len==0;){if(tt.done)break e;let ot=Math.min(tt.len,it-rt);addSection(et,ot,-1);let at=tt.ins==-1?-1:tt.off==0?tt.ins:0;addSection(j,ot,at),at>0&&addInsert(_e,j,tt.text),tt.forward(ot),rt+=ot}let st=g[nt++];for(;rt<st;){if(tt.done)break e;let ot=Math.min(tt.len,st-rt);addSection(j,ot,-1),addSection(et,ot,tt.ins==-1?-1:tt.off==0?tt.ins:0),tt.forward(ot),rt+=ot}}return{changes:new ChangeSet(j,_e),filtered:ChangeDesc.create(et)}}toJSON(){let g=[];for(let j=0;j<this.sections.length;j+=2){let _e=this.sections[j],et=this.sections[j+1];et<0?g.push(_e):et==0?g.push([_e]):g.push([_e].concat(this.inserted[j>>1].toJSON()))}return g}static of(g,j,_e){let et=[],tt=[],nt=0,rt=null;function it(ot=!1){if(!ot&&!et.length)return;nt<j&&addSection(et,j-nt,-1);let at=new ChangeSet(et,tt);rt=rt?rt.compose(at.map(rt)):at,et=[],tt=[],nt=0}function st(ot){if(Array.isArray(ot))for(let at of ot)st(at);else if(ot instanceof ChangeSet){if(ot.length!=j)throw new RangeError(`Mismatched change set length (got ${ot.length}, expected ${j})`);it(),rt=rt?rt.compose(ot.map(rt)):ot}else{let{from:at,to:lt=at,insert:ut}=ot;if(at>lt||at<0||lt>j)throw new RangeError(`Invalid change range ${at} to ${lt} (in doc of length ${j})`);let ht=ut?typeof ut=="string"?Text.of(ut.split(_e||DefaultSplit)):ut:Text.empty,ft=ht.length;if(at==lt&&ft==0)return;at<nt&&it(),at>nt&&addSection(et,at-nt,-1),addSection(et,lt-at,ft),addInsert(tt,et,ht),nt=lt}}return st(g),it(!rt),rt}static empty(g){return new ChangeSet(g?[g,-1]:[],[])}static fromJSON(g){if(!Array.isArray(g))throw new RangeError("Invalid JSON representation of ChangeSet");let j=[],_e=[];for(let et=0;et<g.length;et++){let tt=g[et];if(typeof tt=="number")j.push(tt,-1);else{if(!Array.isArray(tt)||typeof tt[0]!="number"||tt.some((nt,rt)=>rt&&typeof nt!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(tt.length==1)j.push(tt[0],0);else{for(;_e.length<et;)_e.push(Text.empty);_e[et]=Text.of(tt.slice(1)),j.push(tt[0],_e[et].length)}}}return new ChangeSet(j,_e)}static createSet(g,j){return new ChangeSet(g,j)}}function addSection($,g,j,_e=!1){if(g==0&&j<=0)return;let et=$.length-2;et>=0&&j<=0&&j==$[et+1]?$[et]+=g:g==0&&$[et]==0?$[et+1]+=j:_e?($[et]+=g,$[et+1]+=j):$.push(g,j)}function addInsert($,g,j){if(j.length==0)return;let _e=g.length-2>>1;if(_e<$.length)$[$.length-1]=$[$.length-1].append(j);else{for(;$.length<_e;)$.push(Text.empty);$.push(j)}}function iterChanges($,g,j){let _e=$.inserted;for(let et=0,tt=0,nt=0;nt<$.sections.length;){let rt=$.sections[nt++],it=$.sections[nt++];if(it<0)et+=rt,tt+=rt;else{let st=et,ot=tt,at=Text.empty;for(;st+=rt,ot+=it,it&&_e&&(at=at.append(_e[nt-2>>1])),!(j||nt==$.sections.length||$.sections[nt+1]<0);)rt=$.sections[nt++],it=$.sections[nt++];g(et,st,tt,ot,at),et=st,tt=ot}}}function mapSet($,g,j,_e=!1){let et=[],tt=_e?[]:null,nt=new SectionIter($),rt=new SectionIter(g);for(let it=-1;;)if(nt.ins==-1&&rt.ins==-1){let st=Math.min(nt.len,rt.len);addSection(et,st,-1),nt.forward(st),rt.forward(st)}else if(rt.ins>=0&&(nt.ins<0||it==nt.i||nt.off==0&&(rt.len<nt.len||rt.len==nt.len&&!j))){let st=rt.len;for(addSection(et,rt.ins,-1);st;){let ot=Math.min(nt.len,st);nt.ins>=0&&it<nt.i&&nt.len<=ot&&(addSection(et,0,nt.ins),tt&&addInsert(tt,et,nt.text),it=nt.i),nt.forward(ot),st-=ot}rt.next()}else if(nt.ins>=0){let st=0,ot=nt.len;for(;ot;)if(rt.ins==-1){let at=Math.min(ot,rt.len);st+=at,ot-=at,rt.forward(at)}else if(rt.ins==0&&rt.len<ot)ot-=rt.len,rt.next();else break;addSection(et,st,it<nt.i?nt.ins:0),tt&&it<nt.i&&addInsert(tt,et,nt.text),it=nt.i,nt.forward(nt.len-ot)}else{if(nt.done&&rt.done)return tt?ChangeSet.createSet(et,tt):ChangeDesc.create(et);throw new Error("Mismatched change set lengths")}}function composeSets($,g,j=!1){let _e=[],et=j?[]:null,tt=new SectionIter($),nt=new SectionIter(g);for(let rt=!1;;){if(tt.done&&nt.done)return et?ChangeSet.createSet(_e,et):ChangeDesc.create(_e);if(tt.ins==0)addSection(_e,tt.len,0,rt),tt.next();else if(nt.len==0&&!nt.done)addSection(_e,0,nt.ins,rt),et&&addInsert(et,_e,nt.text),nt.next();else{if(tt.done||nt.done)throw new Error("Mismatched change set lengths");{let it=Math.min(tt.len2,nt.len),st=_e.length;if(tt.ins==-1){let ot=nt.ins==-1?-1:nt.off?0:nt.ins;addSection(_e,it,ot,rt),et&&ot&&addInsert(et,_e,nt.text)}else nt.ins==-1?(addSection(_e,tt.off?0:tt.len,it,rt),et&&addInsert(et,_e,tt.textBit(it))):(addSection(_e,tt.off?0:tt.len,nt.off?0:nt.ins,rt),et&&!nt.off&&addInsert(et,_e,nt.text));rt=(tt.ins>it||nt.ins>=0&&nt.len>it)&&(rt||_e.length>st),tt.forward2(it),nt.forward(it)}}}}class SectionIter{constructor(g){this.set=g,this.i=0,this.next()}next(){let{sections:g}=this.set;this.i<g.length?(this.len=g[this.i++],this.ins=g[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:g}=this.set,j=this.i-2>>1;return j>=g.length?Text.empty:g[j]}textBit(g){let{inserted:j}=this.set,_e=this.i-2>>1;return _e>=j.length&&!g?Text.empty:j[_e].slice(this.off,g==null?void 0:this.off+g)}forward(g){g==this.len?this.next():(this.len-=g,this.off+=g)}forward2(g){this.ins==-1?this.forward(g):g==this.ins?this.next():(this.ins-=g,this.off+=g)}}class SelectionRange{constructor(g,j,_e){this.from=g,this.to=j,this.flags=_e}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let g=this.flags&7;return g==7?null:g}get goalColumn(){let g=this.flags>>6;return g==16777215?void 0:g}map(g,j=-1){let _e,et;return this.empty?_e=et=g.mapPos(this.from,j):(_e=g.mapPos(this.from,1),et=g.mapPos(this.to,-1)),_e==this.from&&et==this.to?this:new SelectionRange(_e,et,this.flags)}extend(g,j=g){if(g<=this.anchor&&j>=this.anchor)return EditorSelection.range(g,j);let _e=Math.abs(g-this.anchor)>Math.abs(j-this.anchor)?g:j;return EditorSelection.range(this.anchor,_e)}eq(g,j=!1){return this.anchor==g.anchor&&this.head==g.head&&(!j||!this.empty||this.assoc==g.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(g){if(!g||typeof g.anchor!="number"||typeof g.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(g.anchor,g.head)}static create(g,j,_e){return new SelectionRange(g,j,_e)}}class EditorSelection{constructor(g,j){this.ranges=g,this.mainIndex=j}map(g,j=-1){return g.empty?this:EditorSelection.create(this.ranges.map(_e=>_e.map(g,j)),this.mainIndex)}eq(g,j=!1){if(this.ranges.length!=g.ranges.length||this.mainIndex!=g.mainIndex)return!1;for(let _e=0;_e<this.ranges.length;_e++)if(!this.ranges[_e].eq(g.ranges[_e],j))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(g,j=!0){return EditorSelection.create([g].concat(this.ranges),j?0:this.mainIndex+1)}replaceRange(g,j=this.mainIndex){let _e=this.ranges.slice();return _e[j]=g,EditorSelection.create(_e,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(g=>g.toJSON()),main:this.mainIndex}}static fromJSON(g){if(!g||!Array.isArray(g.ranges)||typeof g.main!="number"||g.main>=g.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(g.ranges.map(j=>SelectionRange.fromJSON(j)),g.main)}static single(g,j=g){return new EditorSelection([EditorSelection.range(g,j)],0)}static create(g,j=0){if(g.length==0)throw new RangeError("A selection needs at least one range");for(let _e=0,et=0;et<g.length;et++){let tt=g[et];if(tt.empty?tt.from<=_e:tt.from<_e)return EditorSelection.normalized(g.slice(),j);_e=tt.to}return new EditorSelection(g,j)}static cursor(g,j=0,_e,et){return SelectionRange.create(g,g,(j==0?0:j<0?8:16)|(_e==null?7:Math.min(6,_e))|(et??16777215)<<6)}static range(g,j,_e,et){let tt=(_e??16777215)<<6|(et==null?7:Math.min(6,et));return j<g?SelectionRange.create(j,g,48|tt):SelectionRange.create(g,j,(j>g?8:0)|tt)}static normalized(g,j=0){let _e=g[j];g.sort((et,tt)=>et.from-tt.from),j=g.indexOf(_e);for(let et=1;et<g.length;et++){let tt=g[et],nt=g[et-1];if(tt.empty?tt.from<=nt.to:tt.from<nt.to){let rt=nt.from,it=Math.max(tt.to,nt.to);et<=j&&j--,g.splice(--et,2,tt.anchor>tt.head?EditorSelection.range(it,rt):EditorSelection.range(rt,it))}}return new EditorSelection(g,j)}}function checkSelection($,g){for(let j of $.ranges)if(j.to>g)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(g,j,_e,et,tt){this.combine=g,this.compareInput=j,this.compare=_e,this.isStatic=et,this.id=nextID++,this.default=g([]),this.extensions=typeof tt=="function"?tt(this):tt}get reader(){return this}static define(g={}){return new Facet(g.combine||(j=>j),g.compareInput||((j,_e)=>j===_e),g.compare||(g.combine?(j,_e)=>j===_e:sameArray$1),!!g.static,g.enables)}of(g){return new FacetProvider([],this,0,g)}compute(g,j){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(g,this,1,j)}computeN(g,j){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(g,this,2,j)}from(g,j){return j||(j=_e=>_e),this.compute([g],_e=>j(_e.field(g)))}}function sameArray$1($,g){return $==g||$.length==g.length&&$.every((j,_e)=>j===g[_e])}class FacetProvider{constructor(g,j,_e,et){this.dependencies=g,this.facet=j,this.type=_e,this.value=et,this.id=nextID++}dynamicSlot(g){var j;let _e=this.value,et=this.facet.compareInput,tt=this.id,nt=g[tt]>>1,rt=this.type==2,it=!1,st=!1,ot=[];for(let at of this.dependencies)at=="doc"?it=!0:at=="selection"?st=!0:((j=g[at.id])!==null&&j!==void 0?j:1)&1||ot.push(g[at.id]);return{create(at){return at.values[nt]=_e(at),1},update(at,lt){if(it&&lt.docChanged||st&&(lt.docChanged||lt.selection)||ensureAll(at,ot)){let ut=_e(at);if(rt?!compareArray(ut,at.values[nt],et):!et(ut,at.values[nt]))return at.values[nt]=ut,1}return 0},reconfigure:(at,lt)=>{let ut,ht=lt.config.address[tt];if(ht!=null){let ft=getAddr(lt,ht);if(this.dependencies.every(gt=>gt instanceof Facet?lt.facet(gt)===at.facet(gt):gt instanceof StateField?lt.field(gt,!1)==at.field(gt,!1):!0)||(rt?compareArray(ut=_e(at),ft,et):et(ut=_e(at),ft)))return at.values[nt]=ft,0}else ut=_e(at);return at.values[nt]=ut,1}}}}function compareArray($,g,j){if($.length!=g.length)return!1;for(let _e=0;_e<$.length;_e++)if(!j($[_e],g[_e]))return!1;return!0}function ensureAll($,g){let j=!1;for(let _e of g)ensureAddr($,_e)&1&&(j=!0);return j}function dynamicFacetSlot($,g,j){let _e=j.map(it=>$[it.id]),et=j.map(it=>it.type),tt=_e.filter(it=>!(it&1)),nt=$[g.id]>>1;function rt(it){let st=[];for(let ot=0;ot<_e.length;ot++){let at=getAddr(it,_e[ot]);if(et[ot]==2)for(let lt of at)st.push(lt);else st.push(at)}return g.combine(st)}return{create(it){for(let st of _e)ensureAddr(it,st);return it.values[nt]=rt(it),1},update(it,st){if(!ensureAll(it,tt))return 0;let ot=rt(it);return g.compare(ot,it.values[nt])?0:(it.values[nt]=ot,1)},reconfigure(it,st){let ot=ensureAll(it,_e),at=st.config.facets[g.id],lt=st.facet(g);if(at&&!ot&&sameArray$1(j,at))return it.values[nt]=lt,0;let ut=rt(it);return g.compare(ut,lt)?(it.values[nt]=lt,0):(it.values[nt]=ut,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(g,j,_e,et,tt){this.id=g,this.createF=j,this.updateF=_e,this.compareF=et,this.spec=tt,this.provides=void 0}static define(g){let j=new StateField(nextID++,g.create,g.update,g.compare||((_e,et)=>_e===et),g);return g.provide&&(j.provides=g.provide(j)),j}create(g){let j=g.facet(initField).find(_e=>_e.field==this);return((j==null?void 0:j.create)||this.createF)(g)}slot(g){let j=g[this.id]>>1;return{create:_e=>(_e.values[j]=this.create(_e),1),update:(_e,et)=>{let tt=_e.values[j],nt=this.updateF(tt,et);return this.compareF(tt,nt)?0:(_e.values[j]=nt,1)},reconfigure:(_e,et)=>et.config.address[this.id]!=null?(_e.values[j]=et.field(this),0):(_e.values[j]=this.create(_e),1)}}init(g){return[this,initField.of({field:this,create:g})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec($){return g=>new PrecExtension(g,$)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(g,j){this.inner=g,this.prec=j}}class Compartment{of(g){return new CompartmentInstance(this,g)}reconfigure(g){return Compartment.reconfigure.of({compartment:this,extension:g})}get(g){return g.config.compartments.get(this)}}class CompartmentInstance{constructor(g,j){this.compartment=g,this.inner=j}}class Configuration{constructor(g,j,_e,et,tt,nt){for(this.base=g,this.compartments=j,this.dynamicSlots=_e,this.address=et,this.staticValues=tt,this.facets=nt,this.statusTemplate=[];this.statusTemplate.length<_e.length;)this.statusTemplate.push(0)}staticFacet(g){let j=this.address[g.id];return j==null?g.default:this.staticValues[j>>1]}static resolve(g,j,_e){let et=[],tt=Object.create(null),nt=new Map;for(let lt of flatten$1(g,j,nt))lt instanceof StateField?et.push(lt):(tt[lt.facet.id]||(tt[lt.facet.id]=[])).push(lt);let rt=Object.create(null),it=[],st=[];for(let lt of et)rt[lt.id]=st.length<<1,st.push(ut=>lt.slot(ut));let ot=_e==null?void 0:_e.config.facets;for(let lt in tt){let ut=tt[lt],ht=ut[0].facet,ft=ot&&ot[lt]||[];if(ut.every(gt=>gt.type==0))if(rt[ht.id]=it.length<<1|1,sameArray$1(ft,ut))it.push(_e.facet(ht));else{let gt=ht.combine(ut.map(dt=>dt.value));it.push(_e&&ht.compare(gt,_e.facet(ht))?_e.facet(ht):gt)}else{for(let gt of ut)gt.type==0?(rt[gt.id]=it.length<<1|1,it.push(gt.value)):(rt[gt.id]=st.length<<1,st.push(dt=>gt.dynamicSlot(dt)));rt[ht.id]=st.length<<1,st.push(gt=>dynamicFacetSlot(gt,ht,ut))}}let at=st.map(lt=>lt(rt));return new Configuration(g,nt,at,rt,it,tt)}}function flatten$1($,g,j){let _e=[[],[],[],[],[]],et=new Map;function tt(nt,rt){let it=et.get(nt);if(it!=null){if(it<=rt)return;let st=_e[it].indexOf(nt);st>-1&&_e[it].splice(st,1),nt instanceof CompartmentInstance&&j.delete(nt.compartment)}if(et.set(nt,rt),Array.isArray(nt))for(let st of nt)tt(st,rt);else if(nt instanceof CompartmentInstance){if(j.has(nt.compartment))throw new RangeError("Duplicate use of compartment in extensions");let st=g.get(nt.compartment)||nt.inner;j.set(nt.compartment,st),tt(st,rt)}else if(nt instanceof PrecExtension)tt(nt.inner,nt.prec);else if(nt instanceof StateField)_e[rt].push(nt),nt.provides&&tt(nt.provides,rt);else if(nt instanceof FacetProvider)_e[rt].push(nt),nt.facet.extensions&&tt(nt.facet.extensions,Prec_.default);else{let st=nt.extension;if(!st)throw new Error(`Unrecognized extension value in extension set (${nt}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);tt(st,rt)}}return tt($,Prec_.default),_e.reduce((nt,rt)=>nt.concat(rt))}function ensureAddr($,g){if(g&1)return 2;let j=g>>1,_e=$.status[j];if(_e==4)throw new Error("Cyclic dependency between fields and/or facets");if(_e&2)return _e;$.status[j]=4;let et=$.computeSlot($,$.config.dynamicSlots[j]);return $.status[j]=2|et}function getAddr($,g){return g&1?$.config.staticValues[g>>1]:$.values[g>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:$=>$.some(g=>g),static:!0}),lineSeparator=Facet.define({combine:$=>$.length?$[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:$=>$.length?$[0]:!1});class Annotation{constructor(g,j){this.type=g,this.value=j}static define(){return new AnnotationType}}class AnnotationType{of(g){return new Annotation(this,g)}}class StateEffectType{constructor(g){this.map=g}of(g){return new StateEffect(this,g)}}class StateEffect{constructor(g,j){this.type=g,this.value=j}map(g){let j=this.type.map(this.value,g);return j===void 0?void 0:j==this.value?this:new StateEffect(this.type,j)}is(g){return this.type==g}static define(g={}){return new StateEffectType(g.map||(j=>j))}static mapEffects(g,j){if(!g.length)return g;let _e=[];for(let et of g){let tt=et.map(j);tt&&_e.push(tt)}return _e}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(g,j,_e,et,tt,nt){this.startState=g,this.changes=j,this.selection=_e,this.effects=et,this.annotations=tt,this.scrollIntoView=nt,this._doc=null,this._state=null,_e&&checkSelection(_e,j.newLength),tt.some(rt=>rt.type==Transaction.time)||(this.annotations=tt.concat(Transaction.time.of(Date.now())))}static create(g,j,_e,et,tt,nt){return new Transaction(g,j,_e,et,tt,nt)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(g){for(let j of this.annotations)if(j.type==g)return j.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(g){let j=this.annotation(Transaction.userEvent);return!!(j&&(j==g||j.length>g.length&&j.slice(0,g.length)==g&&j[g.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges($,g){let j=[];for(let _e=0,et=0;;){let tt,nt;if(_e<$.length&&(et==g.length||g[et]>=$[_e]))tt=$[_e++],nt=$[_e++];else if(et<g.length)tt=g[et++],nt=g[et++];else return j;!j.length||j[j.length-1]<tt?j.push(tt,nt):j[j.length-1]<nt&&(j[j.length-1]=nt)}}function mergeTransaction($,g,j){var _e;let et,tt,nt;return j?(et=g.changes,tt=ChangeSet.empty(g.changes.length),nt=$.changes.compose(g.changes)):(et=g.changes.map($.changes),tt=$.changes.mapDesc(g.changes,!0),nt=$.changes.compose(et)),{changes:nt,selection:g.selection?g.selection.map(tt):(_e=$.selection)===null||_e===void 0?void 0:_e.map(et),effects:StateEffect.mapEffects($.effects,et).concat(StateEffect.mapEffects(g.effects,tt)),annotations:$.annotations.length?$.annotations.concat(g.annotations):g.annotations,scrollIntoView:$.scrollIntoView||g.scrollIntoView}}function resolveTransactionInner($,g,j){let _e=g.selection,et=asArray$1(g.annotations);return g.userEvent&&(et=et.concat(Transaction.userEvent.of(g.userEvent))),{changes:g.changes instanceof ChangeSet?g.changes:ChangeSet.of(g.changes||[],j,$.facet(lineSeparator)),selection:_e&&(_e instanceof EditorSelection?_e:EditorSelection.single(_e.anchor,_e.head)),effects:asArray$1(g.effects),annotations:et,scrollIntoView:!!g.scrollIntoView}}function resolveTransaction($,g,j){let _e=resolveTransactionInner($,g.length?g[0]:{},$.doc.length);g.length&&g[0].filter===!1&&(j=!1);for(let tt=1;tt<g.length;tt++){g[tt].filter===!1&&(j=!1);let nt=!!g[tt].sequential;_e=mergeTransaction(_e,resolveTransactionInner($,g[tt],nt?_e.changes.newLength:$.doc.length),nt)}let et=Transaction.create($,_e.changes,_e.selection,_e.effects,_e.annotations,_e.scrollIntoView);return extendTransaction(j?filterTransaction(et):et)}function filterTransaction($){let g=$.startState,j=!0;for(let et of g.facet(changeFilter)){let tt=et($);if(tt===!1){j=!1;break}Array.isArray(tt)&&(j=j===!0?tt:joinRanges(j,tt))}if(j!==!0){let et,tt;if(j===!1)tt=$.changes.invertedDesc,et=ChangeSet.empty(g.doc.length);else{let nt=$.changes.filter(j);et=nt.changes,tt=nt.filtered.mapDesc(nt.changes).invertedDesc}$=Transaction.create(g,et,$.selection&&$.selection.map(tt),StateEffect.mapEffects($.effects,tt),$.annotations,$.scrollIntoView)}let _e=g.facet(transactionFilter);for(let et=_e.length-1;et>=0;et--){let tt=_e[et]($);tt instanceof Transaction?$=tt:Array.isArray(tt)&&tt.length==1&&tt[0]instanceof Transaction?$=tt[0]:$=resolveTransaction(g,asArray$1(tt),!1)}return $}function extendTransaction($){let g=$.startState,j=g.facet(transactionExtender),_e=$;for(let et=j.length-1;et>=0;et--){let tt=j[et]($);tt&&Object.keys(tt).length&&(_e=mergeTransaction(_e,resolveTransactionInner(g,tt,$.changes.newLength),!0))}return _e==$?$:Transaction.create(g,$.changes,$.selection,_e.effects,_e.annotations,_e.scrollIntoView)}const none$3=[];function asArray$1($){return $==null?none$3:Array.isArray($)?$:[$]}var CharCategory=function($){return $[$.Word=0]="Word",$[$.Space=1]="Space",$[$.Other=2]="Other",$}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hasWordChar($){if(wordChar)return wordChar.test($);for(let g=0;g<$.length;g++){let j=$[g];if(/\w/.test(j)||j>""&&(j.toUpperCase()!=j.toLowerCase()||nonASCIISingleCaseWordChar.test(j)))return!0}return!1}function makeCategorizer($){return g=>{if(!/\S/.test(g))return CharCategory.Space;if(hasWordChar(g))return CharCategory.Word;for(let j=0;j<$.length;j++)if(g.indexOf($[j])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(g,j,_e,et,tt,nt){this.config=g,this.doc=j,this.selection=_e,this.values=et,this.status=g.statusTemplate.slice(),this.computeSlot=tt,nt&&(nt._state=this);for(let rt=0;rt<this.config.dynamicSlots.length;rt++)ensureAddr(this,rt<<1);this.computeSlot=null}field(g,j=!0){let _e=this.config.address[g.id];if(_e==null){if(j)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,_e),getAddr(this,_e)}update(...g){return resolveTransaction(this,g,!0)}applyTransaction(g){let j=this.config,{base:_e,compartments:et}=j;for(let rt of g.effects)rt.is(Compartment.reconfigure)?(j&&(et=new Map,j.compartments.forEach((it,st)=>et.set(st,it)),j=null),et.set(rt.value.compartment,rt.value.extension)):rt.is(StateEffect.reconfigure)?(j=null,_e=rt.value):rt.is(StateEffect.appendConfig)&&(j=null,_e=asArray$1(_e).concat(rt.value));let tt;j?tt=g.startState.values.slice():(j=Configuration.resolve(_e,et,this),tt=new EditorState(j,this.doc,this.selection,j.dynamicSlots.map(()=>null),(it,st)=>st.reconfigure(it,this),null).values);let nt=g.startState.facet(allowMultipleSelections)?g.newSelection:g.newSelection.asSingle();new EditorState(j,g.newDoc,nt,tt,(rt,it)=>it.update(rt,g),g)}replaceSelection(g){return typeof g=="string"&&(g=this.toText(g)),this.changeByRange(j=>({changes:{from:j.from,to:j.to,insert:g},range:EditorSelection.cursor(j.from+g.length)}))}changeByRange(g){let j=this.selection,_e=g(j.ranges[0]),et=this.changes(_e.changes),tt=[_e.range],nt=asArray$1(_e.effects);for(let rt=1;rt<j.ranges.length;rt++){let it=g(j.ranges[rt]),st=this.changes(it.changes),ot=st.map(et);for(let lt=0;lt<rt;lt++)tt[lt]=tt[lt].map(ot);let at=et.mapDesc(st,!0);tt.push(it.range.map(at)),et=et.compose(ot),nt=StateEffect.mapEffects(nt,ot).concat(StateEffect.mapEffects(asArray$1(it.effects),at))}return{changes:et,selection:EditorSelection.create(tt,j.mainIndex),effects:nt}}changes(g=[]){return g instanceof ChangeSet?g:ChangeSet.of(g,this.doc.length,this.facet(EditorState.lineSeparator))}toText(g){return Text.of(g.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(g=0,j=this.doc.length){return this.doc.sliceString(g,j,this.lineBreak)}facet(g){let j=this.config.address[g.id];return j==null?g.default:(ensureAddr(this,j),getAddr(this,j))}toJSON(g){let j={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(g)for(let _e in g){let et=g[_e];et instanceof StateField&&this.config.address[et.id]!=null&&(j[_e]=et.spec.toJSON(this.field(g[_e]),this))}return j}static fromJSON(g,j={},_e){if(!g||typeof g.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let et=[];if(_e){for(let tt in _e)if(Object.prototype.hasOwnProperty.call(g,tt)){let nt=_e[tt],rt=g[tt];et.push(nt.init(it=>nt.spec.fromJSON(rt,it)))}}return EditorState.create({doc:g.doc,selection:EditorSelection.fromJSON(g.selection),extensions:j.extensions?et.concat([j.extensions]):et})}static create(g={}){let j=Configuration.resolve(g.extensions||[],new Map),_e=g.doc instanceof Text?g.doc:Text.of((g.doc||"").split(j.staticFacet(EditorState.lineSeparator)||DefaultSplit)),et=g.selection?g.selection instanceof EditorSelection?g.selection:EditorSelection.single(g.selection.anchor,g.selection.head):EditorSelection.single(0);return checkSelection(et,_e.length),j.staticFacet(allowMultipleSelections)||(et=et.asSingle()),new EditorState(j,_e,et,j.dynamicSlots.map(()=>null),(tt,nt)=>nt.create(tt),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(g,...j){for(let _e of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(_e,g)){g=_e[g];break}return j.length&&(g=g.replace(/\$(\$|\d*)/g,(_e,et)=>{if(et=="$")return"$";let tt=+(et||1);return!tt||tt>j.length?_e:j[tt-1]})),g}languageDataAt(g,j,_e=-1){let et=[];for(let tt of this.facet(languageData))for(let nt of tt(this,j,_e))Object.prototype.hasOwnProperty.call(nt,g)&&et.push(nt[g]);return et}charCategorizer(g){return makeCategorizer(this.languageDataAt("wordChars",g).join(""))}wordAt(g){let{text:j,from:_e,length:et}=this.doc.lineAt(g),tt=this.charCategorizer(g),nt=g-_e,rt=g-_e;for(;nt>0;){let it=findClusterBreak(j,nt,!1);if(tt(j.slice(it,nt))!=CharCategory.Word)break;nt=it}for(;rt<et;){let it=findClusterBreak(j,rt);if(tt(j.slice(rt,it))!=CharCategory.Word)break;rt=it}return nt==rt?null:EditorSelection.range(nt+_e,rt+_e)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:$=>$.length?$[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare($,g){let j=Object.keys($),_e=Object.keys(g);return j.length==_e.length&&j.every(et=>$[et]==g[et])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig($,g,j={}){let _e={};for(let et of $)for(let tt of Object.keys(et)){let nt=et[tt],rt=_e[tt];if(rt===void 0)_e[tt]=nt;else if(!(rt===nt||nt===void 0))if(Object.hasOwnProperty.call(j,tt))_e[tt]=j[tt](rt,nt);else throw new Error("Config merge conflict for field "+tt)}for(let et in g)_e[et]===void 0&&(_e[et]=g[et]);return _e}class RangeValue{eq(g){return this==g}range(g,j=g){return Range$1.create(g,j,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class _i{constructor(g,j,_e){this.from=g,this.to=j,this.value=_e}static create(g,j,_e){return new _i(g,j,_e)}};function cmpRange($,g){return $.from-g.from||$.value.startSide-g.value.startSide}class Chunk{constructor(g,j,_e,et){this.from=g,this.to=j,this.value=_e,this.maxPoint=et}get length(){return this.to[this.to.length-1]}findIndex(g,j,_e,et=0){let tt=_e?this.to:this.from;for(let nt=et,rt=tt.length;;){if(nt==rt)return nt;let it=nt+rt>>1,st=tt[it]-g||(_e?this.value[it].endSide:this.value[it].startSide)-j;if(it==nt)return st>=0?nt:rt;st>=0?rt=it:nt=it+1}}between(g,j,_e,et){for(let tt=this.findIndex(j,-1e9,!0),nt=this.findIndex(_e,1e9,!1,tt);tt<nt;tt++)if(et(this.from[tt]+g,this.to[tt]+g,this.value[tt])===!1)return!1}map(g,j){let _e=[],et=[],tt=[],nt=-1,rt=-1;for(let it=0;it<this.value.length;it++){let st=this.value[it],ot=this.from[it]+g,at=this.to[it]+g,lt,ut;if(ot==at){let ht=j.mapPos(ot,st.startSide,st.mapMode);if(ht==null||(lt=ut=ht,st.startSide!=st.endSide&&(ut=j.mapPos(ot,st.endSide),ut<lt)))continue}else if(lt=j.mapPos(ot,st.startSide),ut=j.mapPos(at,st.endSide),lt>ut||lt==ut&&st.startSide>0&&st.endSide<=0)continue;(ut-lt||st.endSide-st.startSide)<0||(nt<0&&(nt=lt),st.point&&(rt=Math.max(rt,ut-lt)),_e.push(st),et.push(lt-nt),tt.push(ut-nt))}return{mapped:_e.length?new Chunk(et,tt,_e,rt):null,pos:nt}}}class RangeSet{constructor(g,j,_e,et){this.chunkPos=g,this.chunk=j,this.nextLayer=_e,this.maxPoint=et}static create(g,j,_e,et){return new RangeSet(g,j,_e,et)}get length(){let g=this.chunk.length-1;return g<0?0:Math.max(this.chunkEnd(g),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let g=this.nextLayer.size;for(let j of this.chunk)g+=j.value.length;return g}chunkEnd(g){return this.chunkPos[g]+this.chunk[g].length}update(g){let{add:j=[],sort:_e=!1,filterFrom:et=0,filterTo:tt=this.length}=g,nt=g.filter;if(j.length==0&&!nt)return this;if(_e&&(j=j.slice().sort(cmpRange)),this.isEmpty)return j.length?RangeSet.of(j):this;let rt=new LayerCursor(this,null,-1).goto(0),it=0,st=[],ot=new RangeSetBuilder;for(;rt.value||it<j.length;)if(it<j.length&&(rt.from-j[it].from||rt.startSide-j[it].value.startSide)>=0){let at=j[it++];ot.addInner(at.from,at.to,at.value)||st.push(at)}else rt.rangeIndex==1&&rt.chunkIndex<this.chunk.length&&(it==j.length||this.chunkEnd(rt.chunkIndex)<j[it].from)&&(!nt||et>this.chunkEnd(rt.chunkIndex)||tt<this.chunkPos[rt.chunkIndex])&&ot.addChunk(this.chunkPos[rt.chunkIndex],this.chunk[rt.chunkIndex])?rt.nextChunk():((!nt||et>rt.to||tt<rt.from||nt(rt.from,rt.to,rt.value))&&(ot.addInner(rt.from,rt.to,rt.value)||st.push(Range$1.create(rt.from,rt.to,rt.value))),rt.next());return ot.finishInner(this.nextLayer.isEmpty&&!st.length?RangeSet.empty:this.nextLayer.update({add:st,filter:nt,filterFrom:et,filterTo:tt}))}map(g){if(g.empty||this.isEmpty)return this;let j=[],_e=[],et=-1;for(let nt=0;nt<this.chunk.length;nt++){let rt=this.chunkPos[nt],it=this.chunk[nt],st=g.touchesRange(rt,rt+it.length);if(st===!1)et=Math.max(et,it.maxPoint),j.push(it),_e.push(g.mapPos(rt));else if(st===!0){let{mapped:ot,pos:at}=it.map(rt,g);ot&&(et=Math.max(et,ot.maxPoint),j.push(ot),_e.push(at))}}let tt=this.nextLayer.map(g);return j.length==0?tt:new RangeSet(_e,j,tt||RangeSet.empty,et)}between(g,j,_e){if(!this.isEmpty){for(let et=0;et<this.chunk.length;et++){let tt=this.chunkPos[et],nt=this.chunk[et];if(j>=tt&&g<=tt+nt.length&&nt.between(tt,g-tt,j-tt,_e)===!1)return}this.nextLayer.between(g,j,_e)}}iter(g=0){return HeapCursor.from([this]).goto(g)}get isEmpty(){return this.nextLayer==this}static iter(g,j=0){return HeapCursor.from(g).goto(j)}static compare(g,j,_e,et,tt=-1){let nt=g.filter(at=>at.maxPoint>0||!at.isEmpty&&at.maxPoint>=tt),rt=j.filter(at=>at.maxPoint>0||!at.isEmpty&&at.maxPoint>=tt),it=findSharedChunks(nt,rt,_e),st=new SpanCursor(nt,it,tt),ot=new SpanCursor(rt,it,tt);_e.iterGaps((at,lt,ut)=>compare(st,at,ot,lt,ut,et)),_e.empty&&_e.length==0&&compare(st,0,ot,0,0,et)}static eq(g,j,_e=0,et){et==null&&(et=1e9-1);let tt=g.filter(ot=>!ot.isEmpty&&j.indexOf(ot)<0),nt=j.filter(ot=>!ot.isEmpty&&g.indexOf(ot)<0);if(tt.length!=nt.length)return!1;if(!tt.length)return!0;let rt=findSharedChunks(tt,nt),it=new SpanCursor(tt,rt,0).goto(_e),st=new SpanCursor(nt,rt,0).goto(_e);for(;;){if(it.to!=st.to||!sameValues(it.active,st.active)||it.point&&(!st.point||!it.point.eq(st.point)))return!1;if(it.to>et)return!0;it.next(),st.next()}}static spans(g,j,_e,et,tt=-1){let nt=new SpanCursor(g,null,tt).goto(j),rt=j,it=nt.openStart;for(;;){let st=Math.min(nt.to,_e);if(nt.point){let ot=nt.activeForPoint(nt.to),at=nt.pointFrom<j?ot.length+1:Math.min(ot.length,it);et.point(rt,st,nt.point,ot,at,nt.pointRank),it=Math.min(nt.openEnd(st),ot.length)}else st>rt&&(et.span(rt,st,nt.active,it),it=nt.openEnd(st));if(nt.to>_e)return it+(nt.point&&nt.to>_e?1:0);rt=nt.to,nt.next()}}static of(g,j=!1){let _e=new RangeSetBuilder;for(let et of g instanceof Range$1?[g]:j?lazySort(g):g)_e.add(et.from,et.to,et.value);return _e.finish()}static join(g){if(!g.length)return RangeSet.empty;let j=g[g.length-1];for(let _e=g.length-2;_e>=0;_e--)for(let et=g[_e];et!=RangeSet.empty;et=et.nextLayer)j=new RangeSet(et.chunkPos,et.chunk,j,Math.max(et.maxPoint,j.maxPoint));return j}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort($){if($.length>1)for(let g=$[0],j=1;j<$.length;j++){let _e=$[j];if(cmpRange(g,_e)>0)return $.slice().sort(cmpRange);g=_e}return $}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(g){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,g&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(g,j,_e){this.addInner(g,j,_e)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(g,j,_e)}addInner(g,j,_e){let et=g-this.lastTo||_e.startSide-this.last.endSide;if(et<=0&&(g-this.lastFrom||_e.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return et<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=g),this.from.push(g-this.chunkStart),this.to.push(j-this.chunkStart),this.last=_e,this.lastFrom=g,this.lastTo=j,this.value.push(_e),_e.point&&(this.maxPoint=Math.max(this.maxPoint,j-g)),!0)}addChunk(g,j){if((g-this.lastTo||j.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,j.maxPoint),this.chunks.push(j),this.chunkPos.push(g);let _e=j.value.length-1;return this.last=j.value[_e],this.lastFrom=j.from[_e]+g,this.lastTo=j.to[_e]+g,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(g){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return g;let j=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(g):g,this.setMaxPoint);return this.from=null,j}}function findSharedChunks($,g,j){let _e=new Map;for(let tt of $)for(let nt=0;nt<tt.chunk.length;nt++)tt.chunk[nt].maxPoint<=0&&_e.set(tt.chunk[nt],tt.chunkPos[nt]);let et=new Set;for(let tt of g)for(let nt=0;nt<tt.chunk.length;nt++){let rt=_e.get(tt.chunk[nt]);rt!=null&&(j?j.mapPos(rt):rt)==tt.chunkPos[nt]&&!(j!=null&&j.touchesRange(rt,rt+tt.chunk[nt].length))&&et.add(tt.chunk[nt])}return et}class LayerCursor{constructor(g,j,_e,et=0){this.layer=g,this.skip=j,this.minPoint=_e,this.rank=et}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(g,j=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(g,j,!1),this}gotoInner(g,j,_e){for(;this.chunkIndex<this.layer.chunk.length;){let et=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(et)||this.layer.chunkEnd(this.chunkIndex)<g||et.maxPoint<this.minPoint))break;this.chunkIndex++,_e=!1}if(this.chunkIndex<this.layer.chunk.length){let et=this.layer.chunk[this.chunkIndex].findIndex(g-this.layer.chunkPos[this.chunkIndex],j,!0);(!_e||this.rangeIndex<et)&&this.setRangeIndex(et)}this.next()}forward(g,j){(this.to-g||this.endSide-j)<0&&this.gotoInner(g,j,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let g=this.layer.chunkPos[this.chunkIndex],j=this.layer.chunk[this.chunkIndex],_e=g+j.from[this.rangeIndex];if(this.from=_e,this.to=g+j.to[this.rangeIndex],this.value=j.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(g){if(g==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=g}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(g){return this.from-g.from||this.startSide-g.startSide||this.rank-g.rank||this.to-g.to||this.endSide-g.endSide}}class HeapCursor{constructor(g){this.heap=g}static from(g,j=null,_e=-1){let et=[];for(let tt=0;tt<g.length;tt++)for(let nt=g[tt];!nt.isEmpty;nt=nt.nextLayer)nt.maxPoint>=_e&&et.push(new LayerCursor(nt,j,_e,tt));return et.length==1?et[0]:new HeapCursor(et)}get startSide(){return this.value?this.value.startSide:0}goto(g,j=-1e9){for(let _e of this.heap)_e.goto(g,j);for(let _e=this.heap.length>>1;_e>=0;_e--)heapBubble(this.heap,_e);return this.next(),this}forward(g,j){for(let _e of this.heap)_e.forward(g,j);for(let _e=this.heap.length>>1;_e>=0;_e--)heapBubble(this.heap,_e);(this.to-g||this.value.endSide-j)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let g=this.heap[0];this.from=g.from,this.to=g.to,this.value=g.value,this.rank=g.rank,g.value&&g.next(),heapBubble(this.heap,0)}}}function heapBubble($,g){for(let j=$[g];;){let _e=(g<<1)+1;if(_e>=$.length)break;let et=$[_e];if(_e+1<$.length&&et.compare($[_e+1])>=0&&(et=$[_e+1],_e++),j.compare(et)<0)break;$[_e]=j,$[g]=et,g=_e}}class SpanCursor{constructor(g,j,_e){this.minPoint=_e,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(g,j,_e)}goto(g,j=-1e9){return this.cursor.goto(g,j),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=g,this.endSide=j,this.openStart=-1,this.next(),this}forward(g,j){for(;this.minActive>-1&&(this.activeTo[this.minActive]-g||this.active[this.minActive].endSide-j)<0;)this.removeActive(this.minActive);this.cursor.forward(g,j)}removeActive(g){remove$1(this.active,g),remove$1(this.activeTo,g),remove$1(this.activeRank,g),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(g){let j=0,{value:_e,to:et,rank:tt}=this.cursor;for(;j<this.activeRank.length&&(tt-this.activeRank[j]||et-this.activeTo[j])>0;)j++;insert(this.active,j,_e),insert(this.activeTo,j,et),insert(this.activeRank,j,tt),g&&insert(g,j,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let g=this.to,j=this.point;this.point=null;let _e=this.openStart<0?[]:null;for(;;){let et=this.minActive;if(et>-1&&(this.activeTo[et]-this.cursor.from||this.active[et].endSide-this.cursor.startSide)<0){if(this.activeTo[et]>g){this.to=this.activeTo[et],this.endSide=this.active[et].endSide;break}this.removeActive(et),_e&&remove$1(_e,et)}else if(this.cursor.value)if(this.cursor.from>g){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let tt=this.cursor.value;if(!tt.point)this.addActive(_e),this.cursor.next();else if(j&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=tt,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=tt.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(_e){this.openStart=0;for(let et=_e.length-1;et>=0&&_e[et]<g;et--)this.openStart++}}activeForPoint(g){if(!this.active.length)return this.active;let j=[];for(let _e=this.active.length-1;_e>=0&&!(this.activeRank[_e]<this.pointRank);_e--)(this.activeTo[_e]>g||this.activeTo[_e]==g&&this.active[_e].endSide>=this.point.endSide)&&j.push(this.active[_e]);return j.reverse()}openEnd(g){let j=0;for(let _e=this.activeTo.length-1;_e>=0&&this.activeTo[_e]>g;_e--)j++;return j}}function compare($,g,j,_e,et,tt){$.goto(g),j.goto(_e);let nt=_e+et,rt=_e,it=_e-g;for(;;){let st=$.to+it-j.to||$.endSide-j.endSide,ot=st<0?$.to+it:j.to,at=Math.min(ot,nt);if($.point||j.point?$.point&&j.point&&($.point==j.point||$.point.eq(j.point))&&sameValues($.activeForPoint($.to),j.activeForPoint(j.to))||tt.comparePoint(rt,at,$.point,j.point):at>rt&&!sameValues($.active,j.active)&&tt.compareRange(rt,at,$.active,j.active),ot>nt)break;rt=ot,st<=0&&$.next(),st>=0&&j.next()}}function sameValues($,g){if($.length!=g.length)return!1;for(let j=0;j<$.length;j++)if($[j]!=g[j]&&!$[j].eq(g[j]))return!1;return!0}function remove$1($,g){for(let j=g,_e=$.length-1;j<_e;j++)$[j]=$[j+1];$.pop()}function insert($,g,j){for(let _e=$.length-1;_e>=g;_e--)$[_e+1]=$[_e];$[g]=j}function findMinIndex($,g){let j=-1,_e=1e9;for(let et=0;et<g.length;et++)(g[et]-_e||$[et].endSide-$[j].endSide)<0&&(j=et,_e=g[et]);return j}function countColumn($,g,j=$.length){let _e=0;for(let et=0;et<j;)$.charCodeAt(et)==9?(_e+=g-_e%g,et++):(_e++,et=findClusterBreak($,et));return _e}function findColumn($,g,j,_e){for(let et=0,tt=0;;){if(tt>=g)return et;if(et==$.length)break;tt+=$.charCodeAt(et)==9?j-tt%j:1,et=findClusterBreak($,et)}return _e===!0?-1:$.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(g,j){this.rules=[];let{finish:_e}=j||{};function et(nt){return/^@/.test(nt)?[nt]:nt.split(/,\s*/)}function tt(nt,rt,it,st){let ot=[],at=/^@(\w+)\b/.exec(nt[0]),lt=at&&at[1]=="keyframes";if(at&&rt==null)return it.push(nt[0]+";");for(let ut in rt){let ht=rt[ut];if(/&/.test(ut))tt(ut.split(/,\s*/).map(ft=>nt.map(gt=>ft.replace(/&/,gt))).reduce((ft,gt)=>ft.concat(gt)),ht,it);else if(ht&&typeof ht=="object"){if(!at)throw new RangeError("The value of a property ("+ut+") should be a primitive value.");tt(et(ut),ht,ot,lt)}else ht!=null&&ot.push(ut.replace(/_.*/,"").replace(/[A-Z]/g,ft=>"-"+ft.toLowerCase())+": "+ht+";")}(ot.length||lt)&&it.push((_e&&!at&&!st?nt.map(_e):nt).join(", ")+" {"+ot.join(" ")+"}")}for(let nt in g)tt(et(nt),g[nt],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let g=top$1[COUNT]||1;return top$1[COUNT]=g+1,C+g.toString(36)}static mount(g,j,_e){let et=g[SET],tt=_e&&_e.nonce;et?tt&&et.setNonce(tt):et=new StyleSet(g,tt),et.mount(Array.isArray(j)?j:[j])}}let adoptedSet=new Map;class StyleSet{constructor(g,j){let _e=g.ownerDocument||g,et=_e.defaultView;if(!g.head&&g.adoptedStyleSheets&&et.CSSStyleSheet){let tt=adoptedSet.get(_e);if(tt)return g.adoptedStyleSheets=[tt.sheet,...g.adoptedStyleSheets],g[SET]=tt;this.sheet=new et.CSSStyleSheet,g.adoptedStyleSheets=[this.sheet,...g.adoptedStyleSheets],adoptedSet.set(_e,this)}else{this.styleTag=_e.createElement("style"),j&&this.styleTag.setAttribute("nonce",j);let tt=g.head||g;tt.insertBefore(this.styleTag,tt.firstChild)}this.modules=[],g[SET]=this}mount(g){let j=this.sheet,_e=0,et=0;for(let tt=0;tt<g.length;tt++){let nt=g[tt],rt=this.modules.indexOf(nt);if(rt<et&&rt>-1&&(this.modules.splice(rt,1),et--,rt=-1),rt==-1){if(this.modules.splice(et++,0,nt),j)for(let it=0;it<nt.rules.length;it++)j.insertRule(nt.rules[it],_e++)}else{for(;et<rt;)_e+=this.modules[et++].rules.length;_e+=nt.rules.length,et++}}if(!j){let tt="";for(let nt=0;nt<this.modules.length;nt++)tt+=this.modules[nt].getRules()+`
`;this.styleTag.textContent=tt}}setNonce(g){this.styleTag&&this.styleTag.getAttribute("nonce")!=g&&this.styleTag.setAttribute("nonce",g)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$2=0;i$2<10;i$2++)base[48+i$2]=base[96+i$2]=String(i$2);for(var i$2=1;i$2<=24;i$2++)base[i$2+111]="F"+i$2;for(var i$2=65;i$2<=90;i$2++)base[i$2]=String.fromCharCode(i$2+32),shift[i$2]=String.fromCharCode(i$2);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName($){var g=mac&&$.metaKey&&$.shiftKey&&!$.ctrlKey&&!$.altKey||ie$1&&$.shiftKey&&$.key&&$.key.length==1||$.key=="Unidentified",j=!g&&$.key||($.shiftKey?shift:base)[$.keyCode]||$.key||"Unidentified";return j=="Esc"&&(j="Escape"),j=="Del"&&(j="Delete"),j=="Left"&&(j="ArrowLeft"),j=="Up"&&(j="ArrowUp"),j=="Right"&&(j="ArrowRight"),j=="Down"&&(j="ArrowDown"),j}function getSelection($){let g;return $.nodeType==11?g=$.getSelection?$:$.ownerDocument:g=$,g.getSelection()}function contains($,g){return g?$==g||$.contains(g.nodeType!=1?g.parentNode:g):!1}function deepActiveElement($){let g=$.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function hasSelection($,g){if(!g.anchorNode)return!1;try{return contains($,g.anchorNode)}catch{return!1}}function clientRectsFor($){return $.nodeType==3?textRange($,0,$.nodeValue.length).getClientRects():$.nodeType==1?$.getClientRects():[]}function isEquivalentPosition($,g,j,_e){return j?scanFor($,g,j,_e,-1)||scanFor($,g,j,_e,1):!1}function domIndex($){for(var g=0;;g++)if($=$.previousSibling,!$)return g}function scanFor($,g,j,_e,et){for(;;){if($==j&&g==_e)return!0;if(g==(et<0?0:maxOffset($))){if($.nodeName=="DIV")return!1;let tt=$.parentNode;if(!tt||tt.nodeType!=1)return!1;g=domIndex($)+(et<0?0:1),$=tt}else if($.nodeType==1){if($=$.childNodes[g+(et<0?-1:0)],$.nodeType==1&&$.contentEditable=="false")return!1;g=et<0?maxOffset($):0}else return!1}}function maxOffset($){return $.nodeType==3?$.nodeValue.length:$.childNodes.length}function flattenRect($,g){let j=g?$.left:$.right;return{left:j,right:j,top:$.top,bottom:$.bottom}}function windowRect($){return{left:0,right:$.innerWidth,top:0,bottom:$.innerHeight}}function getScale($,g){let j=g.width/$.offsetWidth,_e=g.height/$.offsetHeight;return(j>.995&&j<1.005||!isFinite(j)||Math.abs(g.width-$.offsetWidth)<1)&&(j=1),(_e>.995&&_e<1.005||!isFinite(_e)||Math.abs(g.height-$.offsetHeight)<1)&&(_e=1),{scaleX:j,scaleY:_e}}function scrollRectIntoView($,g,j,_e,et,tt,nt,rt){let it=$.ownerDocument,st=it.defaultView||window;for(let ot=$,at=!1;ot&&!at;)if(ot.nodeType==1){let lt,ut=ot==it.body,ht=1,ft=1;if(ut)lt=windowRect(st);else{if(/^(fixed|sticky)$/.test(getComputedStyle(ot).position)&&(at=!0),ot.scrollHeight<=ot.clientHeight&&ot.scrollWidth<=ot.clientWidth){ot=ot.assignedSlot||ot.parentNode;continue}let mt=ot.getBoundingClientRect();({scaleX:ht,scaleY:ft}=getScale(ot,mt)),lt={left:mt.left,right:mt.left+ot.clientWidth*ht,top:mt.top,bottom:mt.top+ot.clientHeight*ft}}let gt=0,dt=0;if(et=="nearest")g.top<lt.top?(dt=-(lt.top-g.top+nt),j>0&&g.bottom>lt.bottom+dt&&(dt=g.bottom-lt.bottom+dt+nt)):g.bottom>lt.bottom&&(dt=g.bottom-lt.bottom+nt,j<0&&g.top-dt<lt.top&&(dt=-(lt.top+dt-g.top+nt)));else{let mt=g.bottom-g.top,yt=lt.bottom-lt.top;dt=(et=="center"&&mt<=yt?g.top+mt/2-yt/2:et=="start"||et=="center"&&j<0?g.top-nt:g.bottom-yt+nt)-lt.top}if(_e=="nearest"?g.left<lt.left?(gt=-(lt.left-g.left+tt),j>0&&g.right>lt.right+gt&&(gt=g.right-lt.right+gt+tt)):g.right>lt.right&&(gt=g.right-lt.right+tt,j<0&&g.left<lt.left+gt&&(gt=-(lt.left+gt-g.left+tt))):gt=(_e=="center"?g.left+(g.right-g.left)/2-(lt.right-lt.left)/2:_e=="start"==rt?g.left-tt:g.right-(lt.right-lt.left)+tt)-lt.left,gt||dt)if(ut)st.scrollBy(gt,dt);else{let mt=0,yt=0;if(dt){let Et=ot.scrollTop;ot.scrollTop+=dt/ft,yt=(ot.scrollTop-Et)*ft}if(gt){let Et=ot.scrollLeft;ot.scrollLeft+=gt/ht,mt=(ot.scrollLeft-Et)*ht}g={left:g.left-mt,top:g.top-yt,right:g.right-mt,bottom:g.bottom-yt},mt&&Math.abs(mt-gt)<1&&(_e="nearest"),yt&&Math.abs(yt-dt)<1&&(et="nearest")}if(ut)break;ot=ot.assignedSlot||ot.parentNode}else if(ot.nodeType==11)ot=ot.host;else break}function scrollableParent($){let g=$.ownerDocument;for(let j=$.parentNode;j&&j!=g.body;)if(j.nodeType==1){if(j.scrollHeight>j.clientHeight||j.scrollWidth>j.clientWidth)return j;j=j.assignedSlot||j.parentNode}else if(j.nodeType==11)j=j.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(g){return this.anchorNode==g.anchorNode&&this.anchorOffset==g.anchorOffset&&this.focusNode==g.focusNode&&this.focusOffset==g.focusOffset}setRange(g){let{anchorNode:j,focusNode:_e}=g;this.set(j,Math.min(g.anchorOffset,j?maxOffset(j):0),_e,Math.min(g.focusOffset,_e?maxOffset(_e):0))}set(g,j,_e,et){this.anchorNode=g,this.anchorOffset=j,this.focusNode=_e,this.focusOffset=et}}let preventScrollSupported=null;function focusPreventScroll($){if($.setActive)return $.setActive();if(preventScrollSupported)return $.focus(preventScrollSupported);let g=[];for(let j=$;j&&(g.push(j,j.scrollTop,j.scrollLeft),j!=j.ownerDocument);j=j.parentNode);if($.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let j=0;j<g.length;){let _e=g[j++],et=g[j++],tt=g[j++];_e.scrollTop!=et&&(_e.scrollTop=et),_e.scrollLeft!=tt&&(_e.scrollLeft=tt)}}}let scratchRange;function textRange($,g,j=g){let _e=scratchRange||(scratchRange=document.createRange());return _e.setEnd($,j),_e.setStart($,g),_e}function dispatchKey($,g,j){let _e={key:g,code:g,keyCode:j,which:j,cancelable:!0},et=new KeyboardEvent("keydown",_e);et.synthetic=!0,$.dispatchEvent(et);let tt=new KeyboardEvent("keyup",_e);return tt.synthetic=!0,$.dispatchEvent(tt),et.defaultPrevented||tt.defaultPrevented}function getRoot($){for(;$;){if($&&($.nodeType==9||$.nodeType==11&&$.host))return $;$=$.assignedSlot||$.parentNode}return null}function clearAttributes($){for(;$.attributes.length;)$.removeAttributeNode($.attributes[0])}function atElementStart($,g){let j=g.focusNode,_e=g.focusOffset;if(!j||g.anchorNode!=j||g.anchorOffset!=_e)return!1;for(_e=Math.min(_e,maxOffset(j));;)if(_e){if(j.nodeType!=1)return!1;let et=j.childNodes[_e-1];et.contentEditable=="false"?_e--:(j=et,_e=maxOffset(j))}else{if(j==$)return!0;_e=domIndex(j),j=j.parentNode}}function isScrolledToBottom($){return $.scrollTop>Math.max(1,$.scrollHeight-$.clientHeight-4)}class DOMPos{constructor(g,j,_e=!0){this.node=g,this.offset=j,this.precise=_e}static before(g,j){return new DOMPos(g.parentNode,domIndex(g),j)}static after(g,j){return new DOMPos(g.parentNode,domIndex(g)+1,j)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(g){let j=this.posAtStart;for(let _e of this.children){if(_e==g)return j;j+=_e.length+_e.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(g){return this.posBefore(g)+g.length}sync(g,j){if(this.flags&2){let _e=this.dom,et=null,tt;for(let nt of this.children){if(nt.flags&7){if(!nt.dom&&(tt=et?et.nextSibling:_e.firstChild)){let rt=ContentView.get(tt);(!rt||!rt.parent&&rt.canReuseDOM(nt))&&nt.reuseDOM(tt)}nt.sync(g,j),nt.flags&=-8}if(tt=et?et.nextSibling:_e.firstChild,j&&!j.written&&j.node==_e&&tt!=nt.dom&&(j.written=!0),nt.dom.parentNode==_e)for(;tt&&tt!=nt.dom;)tt=rm$1(tt);else _e.insertBefore(nt.dom,tt);et=nt.dom}for(tt=et?et.nextSibling:_e.firstChild,tt&&j&&j.node==_e&&(j.written=!0);tt;)tt=rm$1(tt)}else if(this.flags&1)for(let _e of this.children)_e.flags&7&&(_e.sync(g,j),_e.flags&=-8)}reuseDOM(g){}localPosFromDOM(g,j){let _e;if(g==this.dom)_e=this.dom.childNodes[j];else{let et=maxOffset(g)==0?0:j==0?-1:1;for(;;){let tt=g.parentNode;if(tt==this.dom)break;et==0&&tt.firstChild!=tt.lastChild&&(g==tt.firstChild?et=-1:et=1),g=tt}et<0?_e=g:_e=g.nextSibling}if(_e==this.dom.firstChild)return 0;for(;_e&&!ContentView.get(_e);)_e=_e.nextSibling;if(!_e)return this.length;for(let et=0,tt=0;;et++){let nt=this.children[et];if(nt.dom==_e)return tt;tt+=nt.length+nt.breakAfter}}domBoundsAround(g,j,_e=0){let et=-1,tt=-1,nt=-1,rt=-1;for(let it=0,st=_e,ot=_e;it<this.children.length;it++){let at=this.children[it],lt=st+at.length;if(st<g&&lt>j)return at.domBoundsAround(g,j,st);if(lt>=g&&et==-1&&(et=it,tt=st),st>j&&at.dom.parentNode==this.dom){nt=it,rt=ot;break}ot=lt,st=lt+at.breakAfter}return{from:tt,to:rt<0?_e+this.length:rt,startDOM:(et?this.children[et-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:nt<this.children.length&&nt>=0?this.children[nt].dom:null}}markDirty(g=!1){this.flags|=2,this.markParentsDirty(g)}markParentsDirty(g){for(let j=this.parent;j;j=j.parent){if(g&&(j.flags|=2),j.flags&1)return;j.flags|=1,g=!1}}setParent(g){this.parent!=g&&(this.parent=g,this.flags&7&&this.markParentsDirty(!0))}setDOM(g){this.dom!=g&&(this.dom&&(this.dom.cmView=null),this.dom=g,g.cmView=this)}get rootView(){for(let g=this;;){let j=g.parent;if(!j)return g;g=j}}replaceChildren(g,j,_e=noChildren){this.markDirty();for(let et=g;et<j;et++){let tt=this.children[et];tt.parent==this&&_e.indexOf(tt)<0&&tt.destroy()}this.children.splice(g,j-g,..._e);for(let et=0;et<_e.length;et++)_e[et].setParent(this)}ignoreMutation(g){return!1}ignoreEvent(g){return!1}childCursor(g=this.length){return new ChildCursor(this.children,g,this.children.length)}childPos(g,j=1){return this.childCursor().findPos(g,j)}toString(){let g=this.constructor.name.replace("View","");return g+(this.children.length?"("+this.children.join()+")":this.length?"["+(g=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(g){return g.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(g,j,_e,et,tt,nt){return!1}become(g){return!1}canReuseDOM(g){return g.constructor==this.constructor&&!((this.flags|g.flags)&8)}getSide(){return 0}destroy(){for(let g of this.children)g.parent==this&&g.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1($){let g=$.nextSibling;return $.parentNode.removeChild($),g}class ChildCursor{constructor(g,j,_e){this.children=g,this.pos=j,this.i=_e,this.off=0}findPos(g,j=1){for(;;){if(g>this.pos||g==this.pos&&(j>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=g-this.pos,this;let _e=this.children[--this.i];this.pos-=_e.length+_e.breakAfter}}}function replaceRange($,g,j,_e,et,tt,nt,rt,it){let{children:st}=$,ot=st.length?st[g]:null,at=tt.length?tt[tt.length-1]:null,lt=at?at.breakAfter:nt;if(!(g==_e&&ot&&!nt&&!lt&&tt.length<2&&ot.merge(j,et,tt.length?at:null,j==0,rt,it))){if(_e<st.length){let ut=st[_e];ut&&(et<ut.length||ut.breakAfter&&(at!=null&&at.breakAfter))?(g==_e&&(ut=ut.split(et),et=0),!lt&&at&&ut.merge(0,et,at,!0,0,it)?tt[tt.length-1]=ut:((et||ut.children.length&&!ut.children[0].length)&&ut.merge(0,et,null,!1,0,it),tt.push(ut))):ut!=null&&ut.breakAfter&&(at?at.breakAfter=1:nt=1),_e++}for(ot&&(ot.breakAfter=nt,j>0&&(!nt&&tt.length&&ot.merge(j,ot.length,tt[0],!1,rt,0)?ot.breakAfter=tt.shift().breakAfter:(j<ot.length||ot.children.length&&ot.children[ot.children.length-1].length==0)&&ot.merge(j,ot.length,null,!1,rt,0),g++));g<_e&&tt.length;)if(st[_e-1].become(tt[tt.length-1]))_e--,tt.pop(),it=tt.length?0:rt;else if(st[g].become(tt[0]))g++,tt.shift(),rt=tt.length?0:it;else break;!tt.length&&g&&_e<st.length&&!st[g-1].breakAfter&&st[_e].merge(0,0,st[g-1],!1,rt,it)&&g--,(g<_e||tt.length)&&$.replaceChildren(g,_e,tt)}}function mergeChildrenInto($,g,j,_e,et,tt){let nt=$.childCursor(),{i:rt,off:it}=nt.findPos(j,1),{i:st,off:ot}=nt.findPos(g,-1),at=g-j;for(let lt of _e)at+=lt.length;$.length+=at,replaceRange($,st,ot,rt,it,_e,0,et,tt)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(g){super(),this.text=g}get length(){return this.text.length}createDOM(g){this.setDOM(g||document.createTextNode(this.text))}sync(g,j){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(j&&j.node==this.dom&&(j.written=!0),this.dom.nodeValue=this.text)}reuseDOM(g){g.nodeType==3&&this.createDOM(g)}merge(g,j,_e){return this.flags&8||_e&&(!(_e instanceof TextView)||this.length-(j-g)+_e.length>MaxJoinLen||_e.flags&8)?!1:(this.text=this.text.slice(0,g)+(_e?_e.text:"")+this.text.slice(j),this.markDirty(),!0)}split(g){let j=new TextView(this.text.slice(g));return this.text=this.text.slice(0,g),this.markDirty(),j.flags|=this.flags&8,j}localPosFromDOM(g,j){return g==this.dom?j:j?this.text.length:0}domAtPos(g){return new DOMPos(this.dom,g)}domBoundsAround(g,j,_e){return{from:_e,to:_e+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(g,j){return textCoords(this.dom,g,j)}}class MarkView extends ContentView{constructor(g,j=[],_e=0){super(),this.mark=g,this.children=j,this.length=_e;for(let et of j)et.setParent(this)}setAttrs(g){if(clearAttributes(g),this.mark.class&&(g.className=this.mark.class),this.mark.attrs)for(let j in this.mark.attrs)g.setAttribute(j,this.mark.attrs[j]);return g}canReuseDOM(g){return super.canReuseDOM(g)&&!((this.flags|g.flags)&8)}reuseDOM(g){g.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(g),this.flags|=6)}sync(g,j){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(g,j)}merge(g,j,_e,et,tt,nt){return _e&&(!(_e instanceof MarkView&&_e.mark.eq(this.mark))||g&&tt<=0||j<this.length&&nt<=0)?!1:(mergeChildrenInto(this,g,j,_e?_e.children.slice():[],tt-1,nt-1),this.markDirty(),!0)}split(g){let j=[],_e=0,et=-1,tt=0;for(let rt of this.children){let it=_e+rt.length;it>g&&j.push(_e<g?rt.split(g-_e):rt),et<0&&_e>=g&&(et=tt),_e=it,tt++}let nt=this.length-g;return this.length=g,et>-1&&(this.children.length=et,this.markDirty()),new MarkView(this.mark,j,nt)}domAtPos(g){return inlineDOMAtPos(this,g)}coordsAt(g,j){return coordsInChildren(this,g,j)}}function textCoords($,g,j){let _e=$.nodeValue.length;g>_e&&(g=_e);let et=g,tt=g,nt=0;g==0&&j<0||g==_e&&j>=0?browser.chrome||browser.gecko||(g?(et--,nt=1):tt<_e&&(tt++,nt=-1)):j<0?et--:tt<_e&&tt++;let rt=textRange($,et,tt).getClientRects();if(!rt.length)return null;let it=rt[(nt?nt<0:j>=0)?0:rt.length-1];return browser.safari&&!nt&&it.width==0&&(it=Array.prototype.find.call(rt,st=>st.width)||it),nt?flattenRect(it,nt<0):it||null}class WidgetView extends ContentView{static create(g,j,_e){return new WidgetView(g,j,_e)}constructor(g,j,_e){super(),this.widget=g,this.length=j,this.side=_e,this.prevWidget=null}split(g){let j=WidgetView.create(this.widget,this.length-g,this.side);return this.length-=g,j}sync(g){(!this.dom||!this.widget.updateDOM(this.dom,g))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(g)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(g,j,_e,et,tt,nt){return _e&&(!(_e instanceof WidgetView)||!this.widget.compare(_e.widget)||g>0&&tt<=0||j<this.length&&nt<=0)?!1:(this.length=g+(_e?_e.length:0)+(this.length-j),!0)}become(g){return g instanceof WidgetView&&g.side==this.side&&this.widget.constructor==g.widget.constructor?(this.widget.compare(g.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=g.widget,this.length=g.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(g){return this.widget.ignoreEvent(g)}get overrideDOMText(){if(this.length==0)return Text.empty;let g=this;for(;g.parent;)g=g.parent;let{view:j}=g,_e=j&&j.state.doc,et=this.posAtStart;return _e?_e.slice(et,et+this.length):Text.empty}domAtPos(g){return(this.length?g==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,g==this.length)}domBoundsAround(){return null}coordsAt(g,j){let _e=this.widget.coordsAt(this.dom,g,j);if(_e)return _e;let et=this.dom.getClientRects(),tt=null;if(!et.length)return null;let nt=this.side?this.side<0:g>0;for(let rt=nt?et.length-1:0;tt=et[rt],!(g>0?rt==0:rt==et.length-1||tt.top<tt.bottom);rt+=nt?-1:1);return flattenRect(tt,!nt)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(g){super(),this.side=g}get length(){return 0}merge(){return!1}become(g){return g instanceof WidgetBufferView&&g.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let g=document.createElement("img");g.className="cm-widgetBuffer",g.setAttribute("aria-hidden","true"),this.setDOM(g)}}getSide(){return this.side}domAtPos(g){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(g){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos($,g){let j=$.dom,{children:_e}=$,et=0;for(let tt=0;et<_e.length;et++){let nt=_e[et],rt=tt+nt.length;if(!(rt==tt&&nt.getSide()<=0)){if(g>tt&&g<rt&&nt.dom.parentNode==j)return nt.domAtPos(g-tt);if(g<=tt)break;tt=rt}}for(let tt=et;tt>0;tt--){let nt=_e[tt-1];if(nt.dom.parentNode==j)return nt.domAtPos(nt.length)}for(let tt=et;tt<_e.length;tt++){let nt=_e[tt];if(nt.dom.parentNode==j)return nt.domAtPos(0)}return new DOMPos(j,0)}function joinInlineInto($,g,j){let _e,{children:et}=$;j>0&&g instanceof MarkView&&et.length&&(_e=et[et.length-1])instanceof MarkView&&_e.mark.eq(g.mark)?joinInlineInto(_e,g.children[0],j-1):(et.push(g),g.setParent($)),$.length+=g.length}function coordsInChildren($,g,j){let _e=null,et=-1,tt=null,nt=-1;function rt(st,ot){for(let at=0,lt=0;at<st.children.length&&lt<=ot;at++){let ut=st.children[at],ht=lt+ut.length;ht>=ot&&(ut.children.length?rt(ut,ot-lt):(!tt||tt.isHidden&&j>0)&&(ht>ot||lt==ht&&ut.getSide()>0)?(tt=ut,nt=ot-lt):(lt<ot||lt==ht&&ut.getSide()<0&&!ut.isHidden)&&(_e=ut,et=ot-lt)),lt=ht}}rt($,g);let it=(j<0?_e:tt)||_e||tt;return it?it.coordsAt(Math.max(0,it==_e?et:nt),j):fallbackRect($)}function fallbackRect($){let g=$.dom.lastChild;if(!g)return $.dom.getBoundingClientRect();let j=clientRectsFor(g);return j[j.length-1]||null}function combineAttrs($,g){for(let j in $)j=="class"&&g.class?g.class+=" "+$.class:j=="style"&&g.style?g.style+=";"+$.style:g[j]=$[j];return g}const noAttrs=Object.create(null);function attrsEq($,g,j){if($==g)return!0;$||($=noAttrs),g||(g=noAttrs);let _e=Object.keys($),et=Object.keys(g);if(_e.length-(j&&_e.indexOf(j)>-1?1:0)!=et.length-(j&&et.indexOf(j)>-1?1:0))return!1;for(let tt of _e)if(tt!=j&&(et.indexOf(tt)==-1||$[tt]!==g[tt]))return!1;return!0}function updateAttrs($,g,j){let _e=!1;if(g)for(let et in g)j&&et in j||(_e=!0,et=="style"?$.style.cssText="":$.removeAttribute(et));if(j)for(let et in j)g&&g[et]==j[et]||(_e=!0,et=="style"?$.style.cssText=j[et]:$.setAttribute(et,j[et]));return _e}function getAttrs($){let g=Object.create(null);for(let j=0;j<$.attributes.length;j++){let _e=$.attributes[j];g[_e.name]=_e.value}return g}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(g,j,_e,et,tt,nt){if(_e){if(!(_e instanceof LineView))return!1;this.dom||_e.transferDOM(this)}return et&&this.setDeco(_e?_e.attrs:null),mergeChildrenInto(this,g,j,_e?_e.children.slice():[],tt,nt),!0}split(g){let j=new LineView;if(j.breakAfter=this.breakAfter,this.length==0)return j;let{i:_e,off:et}=this.childPos(g);et&&(j.append(this.children[_e].split(et),0),this.children[_e].merge(et,this.children[_e].length,null,!1,0,0),_e++);for(let tt=_e;tt<this.children.length;tt++)j.append(this.children[tt],0);for(;_e>0&&this.children[_e-1].length==0;)this.children[--_e].destroy();return this.children.length=_e,this.markDirty(),this.length=g,j}transferDOM(g){this.dom&&(this.markDirty(),g.setDOM(this.dom),g.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(g){attrsEq(this.attrs,g)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=g)}append(g,j){joinInlineInto(this,g,j)}addLineDeco(g){let j=g.spec.attributes,_e=g.spec.class;j&&(this.attrs=combineAttrs(j,this.attrs||{})),_e&&(this.attrs=combineAttrs({class:_e},this.attrs||{}))}domAtPos(g){return inlineDOMAtPos(this,g)}reuseDOM(g){g.nodeName=="DIV"&&(this.setDOM(g),this.flags|=6)}sync(g,j){var _e;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(g,j);let et=this.dom.lastChild;for(;et&&ContentView.get(et)instanceof MarkView;)et=et.lastChild;if(!et||!this.length||et.nodeName!="BR"&&((_e=ContentView.get(et))===null||_e===void 0?void 0:_e.isEditable)==!1&&(!browser.ios||!this.children.some(tt=>tt instanceof TextView))){let tt=document.createElement("BR");tt.cmIgnore=!0,this.dom.appendChild(tt)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let g=0,j;for(let _e of this.children){if(!(_e instanceof TextView)||/[^ -~]/.test(_e.text))return null;let et=clientRectsFor(_e.dom);if(et.length!=1)return null;g+=et[0].width,j=et[0].height}return g?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:g/this.length,textHeight:j}:null}coordsAt(g,j){let _e=coordsInChildren(this,g,j);if(!this.children.length&&_e&&this.parent){let{heightOracle:et}=this.parent.view.viewState,tt=_e.bottom-_e.top;if(Math.abs(tt-et.lineHeight)<2&&et.textHeight<tt){let nt=(tt-et.textHeight)/2;return{top:_e.top+nt,bottom:_e.bottom-nt,left:_e.left,right:_e.left}}}return _e}become(g){return!1}covers(){return!0}static find(g,j){for(let _e=0,et=0;_e<g.children.length;_e++){let tt=g.children[_e],nt=et+tt.length;if(nt>=j){if(tt instanceof LineView)return tt;if(nt>j)break}et=nt+tt.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(g,j,_e){super(),this.widget=g,this.length=j,this.deco=_e,this.breakAfter=0,this.prevWidget=null}merge(g,j,_e,et,tt,nt){return _e&&(!(_e instanceof BlockWidgetView)||!this.widget.compare(_e.widget)||g>0&&tt<=0||j<this.length&&nt<=0)?!1:(this.length=g+(_e?_e.length:0)+(this.length-j),!0)}domAtPos(g){return g==0?DOMPos.before(this.dom):DOMPos.after(this.dom,g==this.length)}split(g){let j=this.length-g;this.length=g;let _e=new BlockWidgetView(this.widget,j,this.deco);return _e.breakAfter=this.breakAfter,_e}get children(){return noChildren}sync(g){(!this.dom||!this.widget.updateDOM(this.dom,g))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(g)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(g){return g instanceof BlockWidgetView&&g.widget.constructor==this.widget.constructor?(g.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=g.widget,this.length=g.length,this.deco=g.deco,this.breakAfter=g.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(g){return this.widget.ignoreEvent(g)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(g,j){return this.widget.coordsAt(this.dom,g,j)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(g){let{startSide:j,endSide:_e}=this.deco;return j==_e?!1:g<0?j<0:_e>0}}class WidgetType{eq(g){return!1}updateDOM(g,j){return!1}compare(g){return this==g||this.constructor==g.constructor&&this.eq(g)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(g){return!0}coordsAt(g,j,_e){return null}get isHidden(){return!1}get editable(){return!1}destroy(g){}}var BlockType=function($){return $[$.Text=0]="Text",$[$.WidgetBefore=1]="WidgetBefore",$[$.WidgetAfter=2]="WidgetAfter",$[$.WidgetRange=3]="WidgetRange",$}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(g,j,_e,et){super(),this.startSide=g,this.endSide=j,this.widget=_e,this.spec=et}get heightRelevant(){return!1}static mark(g){return new MarkDecoration(g)}static widget(g){let j=Math.max(-1e4,Math.min(1e4,g.side||0)),_e=!!g.block;return j+=_e&&!g.inlineOrder?j>0?3e8:-4e8:j>0?1e8:-1e8,new PointDecoration(g,j,j,_e,g.widget||null,!1)}static replace(g){let j=!!g.block,_e,et;if(g.isBlockGap)_e=-5e8,et=4e8;else{let{start:tt,end:nt}=getInclusive(g,j);_e=(tt?j?-3e8:-1:5e8)-1,et=(nt?j?2e8:1:-6e8)+1}return new PointDecoration(g,_e,et,j,g.widget||null,!0)}static line(g){return new LineDecoration(g)}static set(g,j=!1){return RangeSet.of(g,j)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(g){let{start:j,end:_e}=getInclusive(g);super(j?-1:5e8,_e?1:-6e8,null,g),this.tagName=g.tagName||"span",this.class=g.class||"",this.attrs=g.attributes||null}eq(g){var j,_e;return this==g||g instanceof MarkDecoration&&this.tagName==g.tagName&&(this.class||((j=this.attrs)===null||j===void 0?void 0:j.class))==(g.class||((_e=g.attrs)===null||_e===void 0?void 0:_e.class))&&attrsEq(this.attrs,g.attrs,"class")}range(g,j=g){if(g>=j)throw new RangeError("Mark decorations may not be empty");return super.range(g,j)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(g){super(-2e8,-2e8,null,g)}eq(g){return g instanceof LineDecoration&&this.spec.class==g.spec.class&&attrsEq(this.spec.attributes,g.spec.attributes)}range(g,j=g){if(j!=g)throw new RangeError("Line decoration ranges must be zero-length");return super.range(g,j)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(g,j,_e,et,tt,nt){super(j,_e,tt,g),this.block=et,this.isReplace=nt,this.mapMode=et?j<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(g){return g instanceof PointDecoration&&widgetsEq(this.widget,g.widget)&&this.block==g.block&&this.startSide==g.startSide&&this.endSide==g.endSide}range(g,j=g){if(this.isReplace&&(g>j||g==j&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&j!=g)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(g,j)}}PointDecoration.prototype.point=!0;function getInclusive($,g=!1){let{inclusiveStart:j,inclusiveEnd:_e}=$;return j==null&&(j=$.inclusive),_e==null&&(_e=$.inclusive),{start:j??g,end:_e??g}}function widgetsEq($,g){return $==g||!!($&&g&&$.compare(g))}function addRange($,g,j,_e=0){let et=j.length-1;et>=0&&j[et]+_e>=$?j[et]=Math.max(j[et],g):j.push($,g)}class ContentBuilder{constructor(g,j,_e,et){this.doc=g,this.pos=j,this.end=_e,this.disallowBlockEffectsFor=et,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=g.iter(),this.skip=j}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let g=this.content[this.content.length-1];return!(g.breakAfter||g instanceof BlockWidgetView&&g.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(g=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),g),g.length),this.pendingBuffer=0)}addBlockWidget(g){this.flushBuffer(),this.curLine=null,this.content.push(g)}finish(g){this.pendingBuffer&&g<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(g&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(g,j,_e){for(;g>0;){if(this.textOff==this.text.length){let{value:tt,lineBreak:nt,done:rt}=this.cursor.next(this.skip);if(this.skip=0,rt)throw new Error("Ran out of text content when drawing inline views");if(nt){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,g--;continue}else this.text=tt,this.textOff=0}let et=Math.min(this.text.length-this.textOff,g,512);this.flushBuffer(j.slice(j.length-_e)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+et)),j),_e),this.atCursorPos=!0,this.textOff+=et,g-=et,_e=0}}span(g,j,_e,et){this.buildText(j-g,_e,et),this.pos=j,this.openStart<0&&(this.openStart=et)}point(g,j,_e,et,tt,nt){if(this.disallowBlockEffectsFor[nt]&&_e instanceof PointDecoration){if(_e.block)throw new RangeError("Block decorations may not be specified via plugins");if(j>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let rt=j-g;if(_e instanceof PointDecoration)if(_e.block)_e.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(_e.widget||new NullWidget("div"),rt,_e));else{let it=WidgetView.create(_e.widget||new NullWidget("span"),rt,rt?0:_e.startSide),st=this.atCursorPos&&!it.isEditable&&tt<=et.length&&(g<j||_e.startSide>0),ot=!it.isEditable&&(g<j||tt>et.length||_e.startSide<=0),at=this.getLine();this.pendingBuffer==2&&!st&&!it.isEditable&&(this.pendingBuffer=0),this.flushBuffer(et),st&&(at.append(wrapMarks(new WidgetBufferView(1),et),tt),tt=et.length+Math.max(0,tt-et.length)),at.append(wrapMarks(it,et),tt),this.atCursorPos=ot,this.pendingBuffer=ot?g<j||tt>et.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=et.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(_e);rt&&(this.textOff+rt<=this.text.length?this.textOff+=rt:(this.skip+=rt-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=j),this.openStart<0&&(this.openStart=tt)}static build(g,j,_e,et,tt){let nt=new ContentBuilder(g,j,_e,tt);return nt.openEnd=RangeSet.spans(et,j,_e,nt),nt.openStart<0&&(nt.openStart=nt.openEnd),nt.finish(nt.openEnd),nt}}function wrapMarks($,g){for(let j of g)$=new MarkView(j,[$],$.length);return $}class NullWidget extends WidgetType{constructor(g){super(),this.tag=g}eq(g){return g.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(g){return g.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Direction=function($){return $[$.LTR=0]="LTR",$[$.RTL=1]="RTL",$}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec($){let g=[];for(let j=0;j<$.length;j++)g.push(1<<+$[j]);return g}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let $ of["()","[]","{}"]){let g=$.charCodeAt(0),j=$.charCodeAt(1);Brackets[g]=j,Brackets[j]=-g}function charType($){return $<=247?LowTypes[$]:1424<=$&&$<=1524?2:1536<=$&&$<=1785?ArabicTypes[$-1536]:1774<=$&&$<=2220?4:8192<=$&&$<=8204?256:64336<=$&&$<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(g,j,_e){this.from=g,this.to=j,this.level=_e}side(g,j){return this.dir==j==g?this.to:this.from}forward(g,j){return g==(this.dir==j)}static find(g,j,_e,et){let tt=-1;for(let nt=0;nt<g.length;nt++){let rt=g[nt];if(rt.from<=j&&rt.to>=j){if(rt.level==_e)return nt;(tt<0||(et!=0?et<0?rt.from<j:rt.to>j:g[tt].level>rt.level))&&(tt=nt)}}if(tt<0)throw new RangeError("Index out of range");return tt}}function isolatesEq($,g){if($.length!=g.length)return!1;for(let j=0;j<$.length;j++){let _e=$[j],et=g[j];if(_e.from!=et.from||_e.to!=et.to||_e.direction!=et.direction||!isolatesEq(_e.inner,et.inner))return!1}return!0}const types=[];function computeCharTypes($,g,j,_e,et){for(let tt=0;tt<=_e.length;tt++){let nt=tt?_e[tt-1].to:g,rt=tt<_e.length?_e[tt].from:j,it=tt?256:et;for(let st=nt,ot=it,at=it;st<rt;st++){let lt=charType($.charCodeAt(st));lt==512?lt=ot:lt==8&&at==4&&(lt=16),types[st]=lt==4?2:lt,lt&7&&(at=lt),ot=lt}for(let st=nt,ot=it,at=it;st<rt;st++){let lt=types[st];if(lt==128)st<rt-1&&ot==types[st+1]&&ot&24?lt=types[st]=ot:types[st]=256;else if(lt==64){let ut=st+1;for(;ut<rt&&types[ut]==64;)ut++;let ht=st&&ot==8||ut<j&&types[ut]==8?at==1?1:8:256;for(let ft=st;ft<ut;ft++)types[ft]=ht;st=ut-1}else lt==8&&at==1&&(types[st]=1);ot=lt,lt&7&&(at=lt)}}}function processBracketPairs($,g,j,_e,et){let tt=et==1?2:1;for(let nt=0,rt=0,it=0;nt<=_e.length;nt++){let st=nt?_e[nt-1].to:g,ot=nt<_e.length?_e[nt].from:j;for(let at=st,lt,ut,ht;at<ot;at++)if(ut=Brackets[lt=$.charCodeAt(at)])if(ut<0){for(let ft=rt-3;ft>=0;ft-=3)if(BracketStack[ft+1]==-ut){let gt=BracketStack[ft+2],dt=gt&2?et:gt&4?gt&1?tt:et:0;dt&&(types[at]=types[BracketStack[ft]]=dt),rt=ft;break}}else{if(BracketStack.length==189)break;BracketStack[rt++]=at,BracketStack[rt++]=lt,BracketStack[rt++]=it}else if((ht=types[at])==2||ht==1){let ft=ht==et;it=ft?0:1;for(let gt=rt-3;gt>=0;gt-=3){let dt=BracketStack[gt+2];if(dt&2)break;if(ft)BracketStack[gt+2]|=2;else{if(dt&4)break;BracketStack[gt+2]|=4}}}}}function processNeutrals($,g,j,_e){for(let et=0,tt=_e;et<=j.length;et++){let nt=et?j[et-1].to:$,rt=et<j.length?j[et].from:g;for(let it=nt;it<rt;){let st=types[it];if(st==256){let ot=it+1;for(;;)if(ot==rt){if(et==j.length)break;ot=j[et++].to,rt=et<j.length?j[et].from:g}else if(types[ot]==256)ot++;else break;let at=tt==1,lt=(ot<g?types[ot]:_e)==1,ut=at==lt?at?1:2:_e;for(let ht=ot,ft=et,gt=ft?j[ft-1].to:$;ht>it;)ht==gt&&(ht=j[--ft].from,gt=ft?j[ft-1].to:$),types[--ht]=ut;it=ot}else tt=st,it++}}}function emitSpans($,g,j,_e,et,tt,nt){let rt=_e%2?2:1;if(_e%2==et%2)for(let it=g,st=0;it<j;){let ot=!0,at=!1;if(st==tt.length||it<tt[st].from){let ft=types[it];ft!=rt&&(ot=!1,at=ft==16)}let lt=!ot&&rt==1?[]:null,ut=ot?_e:_e+1,ht=it;e:for(;;)if(st<tt.length&&ht==tt[st].from){if(at)break e;let ft=tt[st];if(!ot)for(let gt=ft.to,dt=st+1;;){if(gt==j)break e;if(dt<tt.length&&tt[dt].from==gt)gt=tt[dt++].to;else{if(types[gt]==rt)break e;break}}if(st++,lt)lt.push(ft);else{ft.from>it&&nt.push(new BidiSpan(it,ft.from,ut));let gt=ft.direction==LTR!=!(ut%2);computeSectionOrder($,gt?_e+1:_e,et,ft.inner,ft.from,ft.to,nt),it=ft.to}ht=ft.to}else{if(ht==j||(ot?types[ht]!=rt:types[ht]==rt))break;ht++}lt?emitSpans($,it,ht,_e+1,et,lt,nt):it<ht&&nt.push(new BidiSpan(it,ht,ut)),it=ht}else for(let it=j,st=tt.length;it>g;){let ot=!0,at=!1;if(!st||it>tt[st-1].to){let ft=types[it-1];ft!=rt&&(ot=!1,at=ft==16)}let lt=!ot&&rt==1?[]:null,ut=ot?_e:_e+1,ht=it;e:for(;;)if(st&&ht==tt[st-1].to){if(at)break e;let ft=tt[--st];if(!ot)for(let gt=ft.from,dt=st;;){if(gt==g)break e;if(dt&&tt[dt-1].to==gt)gt=tt[--dt].from;else{if(types[gt-1]==rt)break e;break}}if(lt)lt.push(ft);else{ft.to<it&&nt.push(new BidiSpan(ft.to,it,ut));let gt=ft.direction==LTR!=!(ut%2);computeSectionOrder($,gt?_e+1:_e,et,ft.inner,ft.from,ft.to,nt),it=ft.from}ht=ft.from}else{if(ht==g||(ot?types[ht-1]!=rt:types[ht-1]==rt))break;ht--}lt?emitSpans($,ht,it,_e+1,et,lt,nt):ht<it&&nt.push(new BidiSpan(ht,it,ut)),it=ht}}function computeSectionOrder($,g,j,_e,et,tt,nt){let rt=g%2?2:1;computeCharTypes($,et,tt,_e,rt),processBracketPairs($,et,tt,_e,rt),processNeutrals(et,tt,_e,rt),emitSpans($,et,tt,g,j,_e,nt)}function computeOrder($,g,j){if(!$)return[new BidiSpan(0,0,g==RTL?1:0)];if(g==LTR&&!j.length&&!BidiRE.test($))return trivialOrder($.length);if(j.length)for(;$.length>types.length;)types[types.length]=256;let _e=[],et=g==LTR?0:1;return computeSectionOrder($,et,et,j,0,$.length,_e),_e}function trivialOrder($){return[new BidiSpan(0,$,0)]}let movedOver="";function moveVisually($,g,j,_e,et){var tt;let nt=_e.head-$.from,rt=BidiSpan.find(g,nt,(tt=_e.bidiLevel)!==null&&tt!==void 0?tt:-1,_e.assoc),it=g[rt],st=it.side(et,j);if(nt==st){let lt=rt+=et?1:-1;if(lt<0||lt>=g.length)return null;it=g[rt=lt],nt=it.side(!et,j),st=it.side(et,j)}let ot=findClusterBreak($.text,nt,it.forward(et,j));(ot<it.from||ot>it.to)&&(ot=st),movedOver=$.text.slice(Math.min(nt,ot),Math.max(nt,ot));let at=rt==(et?g.length-1:0)?null:g[rt+(et?1:-1)];return at&&ot==st&&at.level+(et?0:1)<it.level?EditorSelection.cursor(at.side(!et,j)+$.from,at.forward(et,j)?1:-1,at.level):EditorSelection.cursor(ot+$.from,it.forward(et,j)?-1:1,it.level)}function autoDirection($,g,j){for(let _e=g;_e<j;_e++){let et=charType($.charCodeAt(_e));if(et==1)return LTR;if(et==2||et==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:$=>$.some(g=>g)}),nativeSelectionHidden=Facet.define({combine:$=>$.some(g=>g)});class ScrollTarget{constructor(g,j="nearest",_e="nearest",et=5,tt=5,nt=!1){this.range=g,this.y=j,this.x=_e,this.yMargin=et,this.xMargin=tt,this.isSnapshot=nt}map(g){return g.empty?this:new ScrollTarget(this.range.map(g),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(g){return this.range.to<=g.doc.length?this:new ScrollTarget(EditorSelection.cursor(g.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:($,g)=>$.map(g)});function logException($,g,j){let _e=$.facet(exceptionSink);_e.length?_e[0](g):window.onerror?window.onerror(String(g),j,void 0,void 0,g):j?console.error(j+":",g):console.error(g)}const editable=Facet.define({combine:$=>$.length?$[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(g,j,_e,et,tt){this.id=g,this.create=j,this.domEventHandlers=_e,this.domEventObservers=et,this.extension=tt(this)}static define(g,j){const{eventHandlers:_e,eventObservers:et,provide:tt,decorations:nt}=j||{};return new ViewPlugin(nextPluginID++,g,_e,et,rt=>{let it=[viewPlugin.of(rt)];return nt&&it.push(decorations.of(st=>{let ot=st.plugin(rt);return ot?nt(ot):Decoration.none})),tt&&it.push(tt(rt)),it})}static fromClass(g,j){return ViewPlugin.define(_e=>new g(_e),j)}}class PluginInstance{constructor(g){this.spec=g,this.mustUpdate=null,this.value=null}update(g){if(this.value){if(this.mustUpdate){let j=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(j)}catch(_e){if(logException(j.state,_e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(g)}catch(j){logException(g.state,j,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(g){var j;if(!((j=this.value)===null||j===void 0)&&j.destroy)try{this.value.destroy()}catch(_e){logException(g.state,_e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges($,g){let j=$.state.facet(bidiIsolatedRanges);if(!j.length)return j;let _e=j.map(tt=>tt instanceof Function?tt($):tt),et=[];return RangeSet.spans(_e,g.from,g.to,{point(){},span(tt,nt,rt,it){let st=tt-g.from,ot=nt-g.from,at=et;for(let lt=rt.length-1;lt>=0;lt--,it--){let ut=rt[lt].spec.bidiIsolate,ht;if(ut==null&&(ut=autoDirection(g.text,st,ot)),it>0&&at.length&&(ht=at[at.length-1]).to==st&&ht.direction==ut)ht.to=ot,at=ht.inner;else{let ft={from:st,to:ot,direction:ut,inner:[]};at.push(ft),at=ft.inner}}}}),et}const scrollMargins=Facet.define();function getScrollMargins($){let g=0,j=0,_e=0,et=0;for(let tt of $.state.facet(scrollMargins)){let nt=tt($);nt&&(nt.left!=null&&(g=Math.max(g,nt.left)),nt.right!=null&&(j=Math.max(j,nt.right)),nt.top!=null&&(_e=Math.max(_e,nt.top)),nt.bottom!=null&&(et=Math.max(et,nt.bottom)))}return{left:g,right:j,top:_e,bottom:et}}const styleModule=Facet.define();class ChangedRange{constructor(g,j,_e,et){this.fromA=g,this.toA=j,this.fromB=_e,this.toB=et}join(g){return new ChangedRange(Math.min(this.fromA,g.fromA),Math.max(this.toA,g.toA),Math.min(this.fromB,g.fromB),Math.max(this.toB,g.toB))}addToSet(g){let j=g.length,_e=this;for(;j>0;j--){let et=g[j-1];if(!(et.fromA>_e.toA)){if(et.toA<_e.fromA)break;_e=_e.join(et),g.splice(j-1,1)}}return g.splice(j,0,_e),g}static extendWithRanges(g,j){if(j.length==0)return g;let _e=[];for(let et=0,tt=0,nt=0,rt=0;;et++){let it=et==g.length?null:g[et],st=nt-rt,ot=it?it.fromB:1e9;for(;tt<j.length&&j[tt]<ot;){let at=j[tt],lt=j[tt+1],ut=Math.max(rt,at),ht=Math.min(ot,lt);if(ut<=ht&&new ChangedRange(ut+st,ht+st,ut,ht).addToSet(_e),lt>ot)break;tt+=2}if(!it)return _e;new ChangedRange(it.fromA,it.toA,it.fromB,it.toB).addToSet(_e),nt=it.toA,rt=it.toB}}}class ViewUpdate{constructor(g,j,_e){this.view=g,this.state=j,this.transactions=_e,this.flags=0,this.startState=g.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let tt of _e)this.changes=this.changes.compose(tt.changes);let et=[];this.changes.iterChangedRanges((tt,nt,rt,it)=>et.push(new ChangedRange(tt,nt,rt,it))),this.changedRanges=et}static create(g,j,_e){return new ViewUpdate(g,j,_e)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(g=>g.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(g){super(),this.view=g,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(g.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,g.state.doc.length)],0,null)}update(g){var j;let _e=g.changedRanges;this.minWidth>0&&_e.length&&(_e.every(({fromA:st,toA:ot})=>ot<this.minWidthFrom||st>this.minWidthTo)?(this.minWidthFrom=g.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=g.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let et=-1;this.view.inputState.composing>=0&&(!((j=this.domChanged)===null||j===void 0)&&j.newSel?et=this.domChanged.newSel.head:!touchesComposition(g.changes,this.hasComposition)&&!g.selectionSet&&(et=g.state.selection.main.head));let tt=et>-1?findCompositionRange(this.view,g.changes,et):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:st,to:ot}=this.hasComposition;_e=new ChangedRange(st,ot,g.changes.mapPos(st,-1),g.changes.mapPos(ot,1)).addToSet(_e.slice())}this.hasComposition=tt?{from:tt.range.fromB,to:tt.range.toB}:null,(browser.ie||browser.chrome)&&!tt&&g&&g.state.doc.lines!=g.startState.doc.lines&&(this.forceSelection=!0);let nt=this.decorations,rt=this.updateDeco(),it=findChangedDeco(nt,rt,g.changes);return _e=ChangedRange.extendWithRanges(_e,it),!(this.flags&7)&&_e.length==0?!1:(this.updateInner(_e,g.startState.doc.length,tt),g.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(g,j,_e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(g,j,_e);let{observer:et}=this.view;et.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let nt=browser.chrome||browser.ios?{node:et.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,nt),this.flags&=-8,nt&&(nt.written||et.selectionRange.focusNode!=nt.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(nt=>nt.flags&=-9);let tt=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let nt of this.children)nt instanceof BlockWidgetView&&nt.widget instanceof BlockGapWidget&&tt.push(nt.dom);et.updateGaps(tt)}updateChildren(g,j,_e){let et=_e?_e.range.addToSet(g.slice()):g,tt=this.childCursor(j);for(let nt=et.length-1;;nt--){let rt=nt>=0?et[nt]:null;if(!rt)break;let{fromA:it,toA:st,fromB:ot,toB:at}=rt,lt,ut,ht,ft;if(_e&&_e.range.fromB<at&&_e.range.toB>ot){let Et=ContentBuilder.build(this.view.state.doc,ot,_e.range.fromB,this.decorations,this.dynamicDecorationMap),Ct=ContentBuilder.build(this.view.state.doc,_e.range.toB,at,this.decorations,this.dynamicDecorationMap);ut=Et.breakAtStart,ht=Et.openStart,ft=Ct.openEnd;let kt=this.compositionView(_e);Ct.breakAtStart?kt.breakAfter=1:Ct.content.length&&kt.merge(kt.length,kt.length,Ct.content[0],!1,Ct.openStart,0)&&(kt.breakAfter=Ct.content[0].breakAfter,Ct.content.shift()),Et.content.length&&kt.merge(0,0,Et.content[Et.content.length-1],!0,0,Et.openEnd)&&Et.content.pop(),lt=Et.content.concat(kt).concat(Ct.content)}else({content:lt,breakAtStart:ut,openStart:ht,openEnd:ft}=ContentBuilder.build(this.view.state.doc,ot,at,this.decorations,this.dynamicDecorationMap));let{i:gt,off:dt}=tt.findPos(st,1),{i:mt,off:yt}=tt.findPos(it,-1);replaceRange(this,mt,yt,gt,dt,lt,ut,ht,ft)}_e&&this.fixCompositionDOM(_e)}compositionView(g){let j=new TextView(g.text.nodeValue);j.flags|=8;for(let{deco:et}of g.marks)j=new MarkView(et,[j],j.length);let _e=new LineView;return _e.append(j,0),_e}fixCompositionDOM(g){let j=(tt,nt)=>{nt.flags|=8|(nt.children.some(it=>it.flags&7)?1:0),this.markedForComposition.add(nt);let rt=ContentView.get(tt);rt&&rt!=nt&&(rt.dom=null),nt.setDOM(tt)},_e=this.childPos(g.range.fromB,1),et=this.children[_e.i];j(g.line,et);for(let tt=g.marks.length-1;tt>=-1;tt--)_e=et.childPos(_e.off,1),et=et.children[_e.i],j(tt>=0?g.marks[tt].node:g.text,et)}updateSelection(g=!1,j=!1){(g||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let _e=this.view.root.activeElement,et=_e==this.dom,tt=!et&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(_e&&this.dom.contains(_e));if(!(et||j||tt))return;let nt=this.forceSelection;this.forceSelection=!1;let rt=this.view.state.selection.main,it=this.moveToLine(this.domAtPos(rt.anchor)),st=rt.empty?it:this.moveToLine(this.domAtPos(rt.head));if(browser.gecko&&rt.empty&&!this.hasComposition&&betweenUneditable(it)){let at=document.createTextNode("");this.view.observer.ignore(()=>it.node.insertBefore(at,it.node.childNodes[it.offset]||null)),it=st=new DOMPos(at,0),nt=!0}let ot=this.view.observer.selectionRange;(nt||!ot.focusNode||(!isEquivalentPosition(it.node,it.offset,ot.anchorNode,ot.anchorOffset)||!isEquivalentPosition(st.node,st.offset,ot.focusNode,ot.focusOffset))&&!this.suppressWidgetCursorChange(ot,rt))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(ot.focusNode)&&inUneditable(ot.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let at=getSelection(this.view.root);if(at)if(rt.empty){if(browser.gecko){let lt=nextToUneditable(it.node,it.offset);if(lt&&lt!=3){let ut=nearbyTextNode(it.node,it.offset,lt==1?1:-1);ut&&(it=new DOMPos(ut.node,ut.offset))}}at.collapse(it.node,it.offset),rt.bidiLevel!=null&&at.caretBidiLevel!==void 0&&(at.caretBidiLevel=rt.bidiLevel)}else if(at.extend){at.collapse(it.node,it.offset);try{at.extend(st.node,st.offset)}catch{}}else{let lt=document.createRange();rt.anchor>rt.head&&([it,st]=[st,it]),lt.setEnd(st.node,st.offset),lt.setStart(it.node,it.offset),at.removeAllRanges(),at.addRange(lt)}tt&&this.view.root.activeElement==this.dom&&(this.dom.blur(),_e&&_e.focus())}),this.view.observer.setSelectionRange(it,st)),this.impreciseAnchor=it.precise?null:new DOMPos(ot.anchorNode,ot.anchorOffset),this.impreciseHead=st.precise?null:new DOMPos(ot.focusNode,ot.focusOffset)}suppressWidgetCursorChange(g,j){return this.hasComposition&&j.empty&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset)&&this.posFromDOM(g.focusNode,g.focusOffset)==j.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:g}=this,j=g.state.selection.main,_e=getSelection(g.root),{anchorNode:et,anchorOffset:tt}=g.observer.selectionRange;if(!_e||!j.empty||!j.assoc||!_e.modify)return;let nt=LineView.find(this,j.head);if(!nt)return;let rt=nt.posAtStart;if(j.head==rt||j.head==rt+nt.length)return;let it=this.coordsAt(j.head,-1),st=this.coordsAt(j.head,1);if(!it||!st||it.bottom>st.top)return;let ot=this.domAtPos(j.head+j.assoc);_e.collapse(ot.node,ot.offset),_e.modify("move",j.assoc<0?"forward":"backward","lineboundary"),g.observer.readSelectionRange();let at=g.observer.selectionRange;g.docView.posFromDOM(at.anchorNode,at.anchorOffset)!=j.from&&_e.collapse(et,tt)}moveToLine(g){let j=this.dom,_e;if(g.node!=j)return g;for(let et=g.offset;!_e&&et<j.childNodes.length;et++){let tt=ContentView.get(j.childNodes[et]);tt instanceof LineView&&(_e=tt.domAtPos(0))}for(let et=g.offset-1;!_e&&et>=0;et--){let tt=ContentView.get(j.childNodes[et]);tt instanceof LineView&&(_e=tt.domAtPos(tt.length))}return _e?new DOMPos(_e.node,_e.offset,!0):g}nearest(g){for(let j=g;j;){let _e=ContentView.get(j);if(_e&&_e.rootView==this)return _e;j=j.parentNode}return null}posFromDOM(g,j){let _e=this.nearest(g);if(!_e)throw new RangeError("Trying to find position for a DOM position outside of the document");return _e.localPosFromDOM(g,j)+_e.posAtStart}domAtPos(g){let{i:j,off:_e}=this.childCursor().findPos(g,-1);for(;j<this.children.length-1;){let et=this.children[j];if(_e<et.length||et instanceof LineView)break;j++,_e=0}return this.children[j].domAtPos(_e)}coordsAt(g,j){let _e=null,et=0;for(let tt=this.length,nt=this.children.length-1;nt>=0;nt--){let rt=this.children[nt],it=tt-rt.breakAfter,st=it-rt.length;if(it<g)break;st<=g&&(st<g||rt.covers(-1))&&(it>g||rt.covers(1))&&(!_e||rt instanceof LineView&&!(_e instanceof LineView&&j>=0))&&(_e=rt,et=st),tt=st}return _e?_e.coordsAt(g-et,j):null}coordsForChar(g){let{i:j,off:_e}=this.childPos(g,1),et=this.children[j];if(!(et instanceof LineView))return null;for(;et.children.length;){let{i:rt,off:it}=et.childPos(_e,1);for(;;rt++){if(rt==et.children.length)return null;if((et=et.children[rt]).length)break}_e=it}if(!(et instanceof TextView))return null;let tt=findClusterBreak(et.text,_e);if(tt==_e)return null;let nt=textRange(et.dom,_e,tt).getClientRects();for(let rt=0;rt<nt.length;rt++){let it=nt[rt];if(rt==nt.length-1||it.top<it.bottom&&it.left<it.right)return it}return null}measureVisibleLineHeights(g){let j=[],{from:_e,to:et}=g,tt=this.view.contentDOM.clientWidth,nt=tt>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,rt=-1,it=this.view.textDirection==Direction.LTR;for(let st=0,ot=0;ot<this.children.length;ot++){let at=this.children[ot],lt=st+at.length;if(lt>et)break;if(st>=_e){let ut=at.dom.getBoundingClientRect();if(j.push(ut.height),nt){let ht=at.dom.lastChild,ft=ht?clientRectsFor(ht):[];if(ft.length){let gt=ft[ft.length-1],dt=it?gt.right-ut.left:ut.right-gt.left;dt>rt&&(rt=dt,this.minWidth=tt,this.minWidthFrom=st,this.minWidthTo=lt)}}}st=lt+at.breakAfter}return j}textDirectionAt(g){let{i:j}=this.childPos(g,1);return getComputedStyle(this.children[j].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let tt of this.children)if(tt instanceof LineView){let nt=tt.measureTextSize();if(nt)return nt}let g=document.createElement("div"),j,_e,et;return g.className="cm-line",g.style.width="99999px",g.style.position="absolute",g.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(g);let tt=clientRectsFor(g.firstChild)[0];j=g.getBoundingClientRect().height,_e=tt?tt.width/27:7,et=tt?tt.height:j,g.remove()}),{lineHeight:j,charWidth:_e,textHeight:et}}childCursor(g=this.length){let j=this.children.length;return j&&(g-=this.children[--j].length),new ChildCursor(this.children,g,j)}computeBlockGapDeco(){let g=[],j=this.view.viewState;for(let _e=0,et=0;;et++){let tt=et==j.viewports.length?null:j.viewports[et],nt=tt?tt.from-1:this.length;if(nt>_e){let rt=(j.lineBlockAt(nt).bottom-j.lineBlockAt(_e).top)/this.view.scaleY;g.push(Decoration.replace({widget:new BlockGapWidget(rt),block:!0,inclusive:!0,isBlockGap:!0}).range(_e,nt))}if(!tt)break;_e=tt.to+1}return Decoration.set(g)}updateDeco(){let g=this.view.state.facet(decorations).map((et,tt)=>(this.dynamicDecorationMap[tt]=typeof et=="function")?et(this.view):et),j=!1,_e=this.view.state.facet(outerDecorations).map((et,tt)=>{let nt=typeof et=="function";return nt&&(j=!0),nt?et(this.view):et});_e.length&&(this.dynamicDecorationMap[g.length]=j,g.push(RangeSet.join(_e)));for(let et=g.length;et<g.length+3;et++)this.dynamicDecorationMap[et]=!1;return this.decorations=[...g,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(g){if(g.isSnapshot){let st=this.view.viewState.lineBlockAt(g.range.head);this.view.scrollDOM.scrollTop=st.top-g.yMargin,this.view.scrollDOM.scrollLeft=g.xMargin;return}let{range:j}=g,_e=this.coordsAt(j.head,j.empty?j.assoc:j.head>j.anchor?-1:1),et;if(!_e)return;!j.empty&&(et=this.coordsAt(j.anchor,j.anchor>j.head?-1:1))&&(_e={left:Math.min(_e.left,et.left),top:Math.min(_e.top,et.top),right:Math.max(_e.right,et.right),bottom:Math.max(_e.bottom,et.bottom)});let tt=getScrollMargins(this.view),nt={left:_e.left-tt.left,top:_e.top-tt.top,right:_e.right+tt.right,bottom:_e.bottom+tt.bottom},{offsetWidth:rt,offsetHeight:it}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,nt,j.head<j.anchor?-1:1,g.x,g.y,Math.max(Math.min(g.xMargin,rt),-rt),Math.max(Math.min(g.yMargin,it),-it),this.view.textDirection==Direction.LTR)}}function betweenUneditable($){return $.node.nodeType==1&&$.node.firstChild&&($.offset==0||$.node.childNodes[$.offset-1].contentEditable=="false")&&($.offset==$.node.childNodes.length||$.node.childNodes[$.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(g){super(),this.height=g}toDOM(){let g=document.createElement("div");return g.className="cm-gap",this.updateDOM(g),g}eq(g){return g.height==this.height}updateDOM(g){return g.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function findCompositionNode($,g){let j=$.observer.selectionRange,_e=j.focusNode&&nearbyTextNode(j.focusNode,j.focusOffset,0);if(!_e)return null;let et=g-_e.offset;return{from:et,to:et+_e.node.nodeValue.length,node:_e.node}}function findCompositionRange($,g,j){let _e=findCompositionNode($,j);if(!_e)return null;let{node:et,from:tt,to:nt}=_e,rt=et.nodeValue;if(/[\n\r]/.test(rt)||$.state.doc.sliceString(_e.from,_e.to)!=rt)return null;let it=g.invertedDesc,st=new ChangedRange(it.mapPos(tt),it.mapPos(nt),tt,nt),ot=[];for(let at=et.parentNode;;at=at.parentNode){let lt=ContentView.get(at);if(lt instanceof MarkView)ot.push({node:at,deco:lt.mark});else{if(lt instanceof LineView||at.nodeName=="DIV"&&at.parentNode==$.contentDOM)return{range:st,text:et,marks:ot,line:at};if(at!=$.contentDOM)ot.push({node:at,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(at),tagName:at.tagName.toLowerCase()})});else return null}}}function nearbyTextNode($,g,j){if(j<=0)for(let _e=$,et=g;;){if(_e.nodeType==3)return{node:_e,offset:et};if(_e.nodeType==1&&et>0)_e=_e.childNodes[et-1],et=maxOffset(_e);else break}if(j>=0)for(let _e=$,et=g;;){if(_e.nodeType==3)return{node:_e,offset:et};if(_e.nodeType==1&&et<_e.childNodes.length&&j>=0)_e=_e.childNodes[et],et=0;else break}return null}function nextToUneditable($,g){return $.nodeType!=1?0:(g&&$.childNodes[g-1].contentEditable=="false"?1:0)|(g<$.childNodes.length&&$.childNodes[g].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(g,j){addRange(g,j,this.changes)}comparePoint(g,j){addRange(g,j,this.changes)}};function findChangedDeco($,g,j){let _e=new DecorationComparator$1;return RangeSet.compare($,g,j,_e),_e.changes}function inUneditable($,g){for(let j=$;j&&j!=g;j=j.assignedSlot||j.parentNode)if(j.nodeType==1&&j.contentEditable=="false")return!0;return!1}function touchesComposition($,g){let j=!1;return g&&$.iterChangedRanges((_e,et)=>{_e<g.to&&et>g.from&&(j=!0)}),j}function groupAt($,g,j=1){let _e=$.charCategorizer(g),et=$.doc.lineAt(g),tt=g-et.from;if(et.length==0)return EditorSelection.cursor(g);tt==0?j=1:tt==et.length&&(j=-1);let nt=tt,rt=tt;j<0?nt=findClusterBreak(et.text,tt,!1):rt=findClusterBreak(et.text,tt);let it=_e(et.text.slice(nt,rt));for(;nt>0;){let st=findClusterBreak(et.text,nt,!1);if(_e(et.text.slice(st,nt))!=it)break;nt=st}for(;rt<et.length;){let st=findClusterBreak(et.text,rt);if(_e(et.text.slice(rt,st))!=it)break;rt=st}return EditorSelection.range(nt+et.from,rt+et.from)}function getdx($,g){return g.left>$?g.left-$:Math.max(0,$-g.right)}function getdy($,g){return g.top>$?g.top-$:Math.max(0,$-g.bottom)}function yOverlap($,g){return $.top<g.bottom-1&&$.bottom>g.top+1}function upTop($,g){return g<$.top?{top:g,left:$.left,right:$.right,bottom:$.bottom}:$}function upBot($,g){return g>$.bottom?{top:$.top,left:$.left,right:$.right,bottom:g}:$}function domPosAtCoords($,g,j){let _e,et,tt,nt,rt=!1,it,st,ot,at;for(let ht=$.firstChild;ht;ht=ht.nextSibling){let ft=clientRectsFor(ht);for(let gt=0;gt<ft.length;gt++){let dt=ft[gt];et&&yOverlap(et,dt)&&(dt=upTop(upBot(dt,et.bottom),et.top));let mt=getdx(g,dt),yt=getdy(j,dt);if(mt==0&&yt==0)return ht.nodeType==3?domPosInText(ht,g,j):domPosAtCoords(ht,g,j);if(!_e||nt>yt||nt==yt&&tt>mt){_e=ht,et=dt,tt=mt,nt=yt;let Et=yt?j<dt.top?-1:1:mt?g<dt.left?-1:1:0;rt=!Et||(Et>0?gt<ft.length-1:gt>0)}mt==0?j>dt.bottom&&(!ot||ot.bottom<dt.bottom)?(it=ht,ot=dt):j<dt.top&&(!at||at.top>dt.top)&&(st=ht,at=dt):ot&&yOverlap(ot,dt)?ot=upBot(ot,dt.bottom):at&&yOverlap(at,dt)&&(at=upTop(at,dt.top))}}if(ot&&ot.bottom>=j?(_e=it,et=ot):at&&at.top<=j&&(_e=st,et=at),!_e)return{node:$,offset:0};let lt=Math.max(et.left,Math.min(et.right,g));if(_e.nodeType==3)return domPosInText(_e,lt,j);if(rt&&_e.contentEditable!="false")return domPosAtCoords(_e,lt,j);let ut=Array.prototype.indexOf.call($.childNodes,_e)+(g>=(et.left+et.right)/2?1:0);return{node:$,offset:ut}}function domPosInText($,g,j){let _e=$.nodeValue.length,et=-1,tt=1e9,nt=0;for(let rt=0;rt<_e;rt++){let it=textRange($,rt,rt+1).getClientRects();for(let st=0;st<it.length;st++){let ot=it[st];if(ot.top==ot.bottom)continue;nt||(nt=g-ot.left);let at=(ot.top>j?ot.top-j:j-ot.bottom)-1;if(ot.left-1<=g&&ot.right+1>=g&&at<tt){let lt=g>=(ot.left+ot.right)/2,ut=lt;if((browser.chrome||browser.gecko)&&textRange($,rt).getBoundingClientRect().left==ot.right&&(ut=!lt),at<=0)return{node:$,offset:rt+(ut?1:0)};et=rt+(ut?1:0),tt=at}}}return{node:$,offset:et>-1?et:nt>0?$.nodeValue.length:0}}function posAtCoords($,g,j,_e=-1){var et,tt;let nt=$.contentDOM.getBoundingClientRect(),rt=nt.top+$.viewState.paddingTop,it,{docHeight:st}=$.viewState,{x:ot,y:at}=g,lt=at-rt;if(lt<0)return 0;if(lt>st)return $.state.doc.length;for(let Et=$.viewState.heightOracle.textHeight/2,Ct=!1;it=$.elementAtHeight(lt),it.type!=BlockType.Text;)for(;lt=_e>0?it.bottom+Et:it.top-Et,!(lt>=0&&lt<=st);){if(Ct)return j?null:0;Ct=!0,_e=-_e}at=rt+lt;let ut=it.from;if(ut<$.viewport.from)return $.viewport.from==0?0:j?null:posAtCoordsImprecise($,nt,it,ot,at);if(ut>$.viewport.to)return $.viewport.to==$.state.doc.length?$.state.doc.length:j?null:posAtCoordsImprecise($,nt,it,ot,at);let ht=$.dom.ownerDocument,ft=$.root.elementFromPoint?$.root:ht,gt=ft.elementFromPoint(ot,at);gt&&!$.contentDOM.contains(gt)&&(gt=null),gt||(ot=Math.max(nt.left+1,Math.min(nt.right-1,ot)),gt=ft.elementFromPoint(ot,at),gt&&!$.contentDOM.contains(gt)&&(gt=null));let dt,mt=-1;if(gt&&((et=$.docView.nearest(gt))===null||et===void 0?void 0:et.isEditable)!=!1){if(ht.caretPositionFromPoint){let Et=ht.caretPositionFromPoint(ot,at);Et&&({offsetNode:dt,offset:mt}=Et)}else if(ht.caretRangeFromPoint){let Et=ht.caretRangeFromPoint(ot,at);Et&&({startContainer:dt,startOffset:mt}=Et,(!$.contentDOM.contains(dt)||browser.safari&&isSuspiciousSafariCaretResult(dt,mt,ot)||browser.chrome&&isSuspiciousChromeCaretResult(dt,mt,ot))&&(dt=void 0))}}if(!dt||!$.docView.dom.contains(dt)){let Et=LineView.find($.docView,ut);if(!Et)return lt>it.top+it.height/2?it.to:it.from;({node:dt,offset:mt}=domPosAtCoords(Et.dom,ot,at))}let yt=$.docView.nearest(dt);if(!yt)return null;if(yt.isWidget&&((tt=yt.dom)===null||tt===void 0?void 0:tt.nodeType)==1){let Et=yt.dom.getBoundingClientRect();return g.y<Et.top||g.y<=Et.bottom&&g.x<=(Et.left+Et.right)/2?yt.posAtStart:yt.posAtEnd}else return yt.localPosFromDOM(dt,mt)+yt.posAtStart}function posAtCoordsImprecise($,g,j,_e,et){let tt=Math.round((_e-g.left)*$.defaultCharacterWidth);if($.lineWrapping&&j.height>$.defaultLineHeight*1.5){let rt=$.viewState.heightOracle.textHeight,it=Math.floor((et-j.top-($.defaultLineHeight-rt)*.5)/rt);tt+=it*$.viewState.heightOracle.lineLength}let nt=$.state.sliceDoc(j.from,j.to);return j.from+findColumn(nt,tt,$.state.tabSize)}function isSuspiciousSafariCaretResult($,g,j){let _e;if($.nodeType!=3||g!=(_e=$.nodeValue.length))return!1;for(let et=$.nextSibling;et;et=et.nextSibling)if(et.nodeType!=1||et.nodeName!="BR")return!1;return textRange($,_e-1,_e).getBoundingClientRect().left>j}function isSuspiciousChromeCaretResult($,g,j){if(g!=0)return!1;for(let et=$;;){let tt=et.parentNode;if(!tt||tt.nodeType!=1||tt.firstChild!=et)return!1;if(tt.classList.contains("cm-line"))break;et=tt}let _e=$.nodeType==1?$.getBoundingClientRect():textRange($,0,Math.max($.nodeValue.length,1)).getBoundingClientRect();return j-_e.left>5}function blockAt($,g){let j=$.lineBlockAt(g);if(Array.isArray(j.type)){for(let _e of j.type)if(_e.to>g||_e.to==g&&(_e.to==j.to||_e.type==BlockType.Text))return _e}return j}function moveToLineBoundary($,g,j,_e){let et=blockAt($,g.head),tt=!_e||et.type!=BlockType.Text||!($.lineWrapping||et.widgetLineBreaks)?null:$.coordsAtPos(g.assoc<0&&g.head>et.from?g.head-1:g.head);if(tt){let nt=$.dom.getBoundingClientRect(),rt=$.textDirectionAt(et.from),it=$.posAtCoords({x:j==(rt==Direction.LTR)?nt.right-1:nt.left+1,y:(tt.top+tt.bottom)/2});if(it!=null)return EditorSelection.cursor(it,j?-1:1)}return EditorSelection.cursor(j?et.to:et.from,j?-1:1)}function moveByChar($,g,j,_e){let et=$.state.doc.lineAt(g.head),tt=$.bidiSpans(et),nt=$.textDirectionAt(et.from);for(let rt=g,it=null;;){let st=moveVisually(et,tt,nt,rt,j),ot=movedOver;if(!st){if(et.number==(j?$.state.doc.lines:1))return rt;ot=`
`,et=$.state.doc.line(et.number+(j?1:-1)),tt=$.bidiSpans(et),st=$.visualLineSide(et,!j)}if(it){if(!it(ot))return rt}else{if(!_e)return st;it=_e(ot)}rt=st}}function byGroup($,g,j){let _e=$.state.charCategorizer(g),et=_e(j);return tt=>{let nt=_e(tt);return et==CharCategory.Space&&(et=nt),et==nt}}function moveVertically($,g,j,_e){let et=g.head,tt=j?1:-1;if(et==(j?$.state.doc.length:0))return EditorSelection.cursor(et,g.assoc);let nt=g.goalColumn,rt,it=$.contentDOM.getBoundingClientRect(),st=$.coordsAtPos(et,g.assoc||-1),ot=$.documentTop;if(st)nt==null&&(nt=st.left-it.left),rt=tt<0?st.top:st.bottom;else{let ut=$.viewState.lineBlockAt(et);nt==null&&(nt=Math.min(it.right-it.left,$.defaultCharacterWidth*(et-ut.from))),rt=(tt<0?ut.top:ut.bottom)+ot}let at=it.left+nt,lt=_e??$.viewState.heightOracle.textHeight>>1;for(let ut=0;;ut+=10){let ht=rt+(lt+ut)*tt,ft=posAtCoords($,{x:at,y:ht},!1,tt);if(ht<it.top||ht>it.bottom||(tt<0?ft<et:ft>et)){let gt=$.docView.coordsForChar(ft),dt=!gt||ht<gt.top?-1:1;return EditorSelection.cursor(ft,dt,void 0,nt)}}}function skipAtomicRanges($,g,j){for(;;){let _e=0;for(let et of $)et.between(g-1,g+1,(tt,nt,rt)=>{if(g>tt&&g<nt){let it=_e||j||(g-tt<nt-g?-1:1);g=it<0?tt:nt,_e=it}});if(!_e)return g}}function skipAtoms($,g,j){let _e=skipAtomicRanges($.state.facet(atomicRanges).map(et=>et($)),j.from,g.head>j.from?-1:1);return _e==j.from?j:EditorSelection.cursor(_e,_e<j.from?1:-1)}class InputState{setSelectionOrigin(g){this.lastSelectionOrigin=g,this.lastSelectionTime=Date.now()}constructor(g){this.view=g,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=g.hasFocus,browser.safari&&g.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(g.contentDOM.ownerDocument)}handleEvent(g){!eventBelongsToEditor(this.view,g)||this.ignoreDuringComposition(g)||g.type=="keydown"&&this.keydown(g)||this.runHandlers(g.type,g)}runHandlers(g,j){let _e=this.handlers[g];if(_e){for(let et of _e.observers)et(this.view,j);for(let et of _e.handlers){if(j.defaultPrevented)break;if(et(this.view,j)){j.preventDefault();break}}}}ensureHandlers(g){let j=computeHandlers(g),_e=this.handlers,et=this.view.contentDOM;for(let tt in j)if(tt!="scroll"){let nt=!j[tt].handlers.length,rt=_e[tt];rt&&nt!=!rt.handlers.length&&(et.removeEventListener(tt,this.handleEvent),rt=null),rt||et.addEventListener(tt,this.handleEvent,{passive:nt})}for(let tt in _e)tt!="scroll"&&!j[tt]&&et.removeEventListener(tt,this.handleEvent);this.handlers=j}keydown(g){if(this.lastKeyCode=g.keyCode,this.lastKeyTime=Date.now(),g.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(g.keyCode!=27&&modifierCodes.indexOf(g.keyCode)<0&&(this.view.inputState.lastEscPress=0),browser.android&&browser.chrome&&!g.synthetic&&(g.keyCode==13||g.keyCode==8))return this.view.observer.delayAndroidKey(g.key,g.keyCode),!0;let j;return browser.ios&&!g.synthetic&&!g.altKey&&!g.metaKey&&((j=PendingKeys.find(_e=>_e.keyCode==g.keyCode))&&!g.ctrlKey||EmacsyPendingKeys.indexOf(g.key)>-1&&g.ctrlKey&&!g.shiftKey)?(this.pendingIOSKey=j||g,setTimeout(()=>this.flushIOSKey(),250),!0):(g.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let g=this.pendingIOSKey;return g?(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,g.key,g.keyCode)):!1}ignoreDuringComposition(g){return/^key/.test(g.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(g){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=g}update(g){this.mouseSelection&&this.mouseSelection.update(g),this.draggedContent&&g.docChanged&&(this.draggedContent=this.draggedContent.map(g.changes)),g.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler($,g){return(j,_e)=>{try{return g.call($,_e,j)}catch(et){logException(j.state,et)}}}function computeHandlers($){let g=Object.create(null);function j(_e){return g[_e]||(g[_e]={observers:[],handlers:[]})}for(let _e of $){let et=_e.spec;if(et&&et.domEventHandlers)for(let tt in et.domEventHandlers){let nt=et.domEventHandlers[tt];nt&&j(tt).handlers.push(bindHandler(_e.value,nt))}if(et&&et.domEventObservers)for(let tt in et.domEventObservers){let nt=et.domEventObservers[tt];nt&&j(tt).observers.push(bindHandler(_e.value,nt))}}for(let _e in handlers)j(_e).handlers.push(handlers[_e]);for(let _e in observers)j(_e).observers.push(observers[_e]);return g}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed($){return Math.max(0,$)*.7+8}function dist($,g){return Math.max(Math.abs($.clientX-g.clientX),Math.abs($.clientY-g.clientY))}class MouseSelection{constructor(g,j,_e,et){this.view=g,this.startEvent=j,this.style=_e,this.mustSelect=et,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=j,this.scrollParent=scrollableParent(g.contentDOM),this.atoms=g.state.facet(atomicRanges).map(nt=>nt(g));let tt=g.contentDOM.ownerDocument;tt.addEventListener("mousemove",this.move=this.move.bind(this)),tt.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=j.shiftKey,this.multiple=g.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(g,j),this.dragging=isInPrimarySelection(g,j)&&getClickType(j)==1?null:!1}start(g){this.dragging===!1&&this.select(g)}move(g){var j;if(g.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,g)<10)return;this.select(this.lastEvent=g);let _e=0,et=0,tt=((j=this.scrollParent)===null||j===void 0?void 0:j.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},nt=getScrollMargins(this.view);g.clientX-nt.left<=tt.left+dragScrollMargin?_e=-dragScrollSpeed(tt.left-g.clientX):g.clientX+nt.right>=tt.right-dragScrollMargin&&(_e=dragScrollSpeed(g.clientX-tt.right)),g.clientY-nt.top<=tt.top+dragScrollMargin?et=-dragScrollSpeed(tt.top-g.clientY):g.clientY+nt.bottom>=tt.bottom-dragScrollMargin&&(et=dragScrollSpeed(g.clientY-tt.bottom)),this.setScrollSpeed(_e,et)}up(g){this.dragging==null&&this.select(this.lastEvent),this.dragging||g.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let g=this.view.contentDOM.ownerDocument;g.removeEventListener("mousemove",this.move),g.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(g,j){this.scrollSpeed={x:g,y:j},g||j?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(g){let j=null;for(let _e=0;_e<g.ranges.length;_e++){let et=g.ranges[_e],tt=null;if(et.empty){let nt=skipAtomicRanges(this.atoms,et.from,0);nt!=et.from&&(tt=EditorSelection.cursor(nt,-1))}else{let nt=skipAtomicRanges(this.atoms,et.from,-1),rt=skipAtomicRanges(this.atoms,et.to,1);(nt!=et.from||rt!=et.to)&&(tt=EditorSelection.range(et.from==et.anchor?nt:rt,et.from==et.head?nt:rt))}tt&&(j||(j=g.ranges.slice()),j[_e]=tt)}return j?EditorSelection.create(j,g.mainIndex):g}select(g){let{view:j}=this,_e=this.skipAtoms(this.style.get(g,this.extend,this.multiple));(this.mustSelect||!_e.eq(j.state.selection,this.dragging===!1))&&this.view.dispatch({selection:_e,userEvent:"select.pointer"}),this.mustSelect=!1}update(g){this.style.update(g)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange($,g){let j=$.state.facet(clickAddsSelectionRange);return j.length?j[0](g):browser.mac?g.metaKey:g.ctrlKey}function dragMovesSelection($,g){let j=$.state.facet(dragMovesSelection$1);return j.length?j[0](g):browser.mac?!g.altKey:!g.ctrlKey}function isInPrimarySelection($,g){let{main:j}=$.state.selection;if(j.empty)return!1;let _e=getSelection($.root);if(!_e||_e.rangeCount==0)return!0;let et=_e.getRangeAt(0).getClientRects();for(let tt=0;tt<et.length;tt++){let nt=et[tt];if(nt.left<=g.clientX&&nt.right>=g.clientX&&nt.top<=g.clientY&&nt.bottom>=g.clientY)return!0}return!1}function eventBelongsToEditor($,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let j=g.target,_e;j!=$.contentDOM;j=j.parentNode)if(!j||j.nodeType==11||(_e=ContentView.get(j))&&_e.ignoreEvent(g))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste($){let g=$.dom.parentNode;if(!g)return;let j=g.appendChild(document.createElement("textarea"));j.style.cssText="position: fixed; left: -10000px; top: 10px",j.focus(),setTimeout(()=>{$.focus(),j.remove(),doPaste($,j.value)},50)}function doPaste($,g){let{state:j}=$,_e,et=1,tt=j.toText(g),nt=tt.lines==j.selection.ranges.length;if(lastLinewiseCopy!=null&&j.selection.ranges.every(it=>it.empty)&&lastLinewiseCopy==tt.toString()){let it=-1;_e=j.changeByRange(st=>{let ot=j.doc.lineAt(st.from);if(ot.from==it)return{range:st};it=ot.from;let at=j.toText((nt?tt.line(et++).text:g)+j.lineBreak);return{changes:{from:ot.from,insert:at},range:EditorSelection.cursor(st.from+at.length)}})}else nt?_e=j.changeByRange(it=>{let st=tt.line(et++);return{changes:{from:it.from,to:it.to,insert:st.text},range:EditorSelection.cursor(it.from+st.length)}}):_e=j.replaceSelection(tt);$.dispatch(_e,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=$=>{$.inputState.lastScrollTop=$.scrollDOM.scrollTop,$.inputState.lastScrollLeft=$.scrollDOM.scrollLeft};handlers.keydown=($,g)=>($.inputState.setSelectionOrigin("select"),g.keyCode==27&&($.inputState.lastEscPress=Date.now()),!1);observers.touchstart=($,g)=>{$.inputState.lastTouchTime=Date.now(),$.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=$=>{$.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=($,g)=>{if($.observer.flush(),$.inputState.lastTouchTime>Date.now()-2e3)return!1;let j=null;for(let _e of $.state.facet(mouseSelectionStyle))if(j=_e($,g),j)break;if(!j&&g.button==0&&(j=basicMouseSelection($,g)),j){let _e=!$.hasFocus;$.inputState.startMouseSelection(new MouseSelection($,g,j,_e)),_e&&$.observer.ignore(()=>focusPreventScroll($.contentDOM));let et=$.inputState.mouseSelection;if(et)return et.start(g),et.dragging===!1}return!1};function rangeForClick($,g,j,_e){if(_e==1)return EditorSelection.cursor(g,j);if(_e==2)return groupAt($.state,g,j);{let et=LineView.find($.docView,g),tt=$.state.doc.lineAt(et?et.posAtEnd:g),nt=et?et.posAtStart:tt.from,rt=et?et.posAtEnd:tt.to;return rt<$.state.doc.length&&rt==tt.to&&rt++,EditorSelection.range(nt,rt)}}let insideY=($,g)=>$>=g.top&&$<=g.bottom,inside=($,g,j)=>insideY(g,j)&&$>=j.left&&$<=j.right;function findPositionSide($,g,j,_e){let et=LineView.find($.docView,g);if(!et)return 1;let tt=g-et.posAtStart;if(tt==0)return 1;if(tt==et.length)return-1;let nt=et.coordsAt(tt,-1);if(nt&&inside(j,_e,nt))return-1;let rt=et.coordsAt(tt,1);return rt&&inside(j,_e,rt)?1:nt&&insideY(_e,nt)?-1:1}function queryPos($,g){let j=$.posAtCoords({x:g.clientX,y:g.clientY},!1);return{pos:j,bias:findPositionSide($,j,g.clientX,g.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType($){if(!BadMouseDetail)return $.detail;let g=lastMouseDown,j=lastMouseDownTime;return lastMouseDown=$,lastMouseDownTime=Date.now(),lastMouseDownCount=!g||j>Date.now()-400&&Math.abs(g.clientX-$.clientX)<2&&Math.abs(g.clientY-$.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection($,g){let j=queryPos($,g),_e=getClickType(g),et=$.state.selection;return{update(tt){tt.docChanged&&(j.pos=tt.changes.mapPos(j.pos),et=et.map(tt.changes))},get(tt,nt,rt){let it=queryPos($,tt),st,ot=rangeForClick($,it.pos,it.bias,_e);if(j.pos!=it.pos&&!nt){let at=rangeForClick($,j.pos,j.bias,_e),lt=Math.min(at.from,ot.from),ut=Math.max(at.to,ot.to);ot=lt<ot.from?EditorSelection.range(lt,ut):EditorSelection.range(ut,lt)}return nt?et.replaceRange(et.main.extend(ot.from,ot.to)):rt&&_e==1&&et.ranges.length>1&&(st=removeRangeAround(et,it.pos))?st:rt?et.addRange(ot):EditorSelection.create([ot])}}}function removeRangeAround($,g){for(let j=0;j<$.ranges.length;j++){let{from:_e,to:et}=$.ranges[j];if(_e<=g&&et>=g)return EditorSelection.create($.ranges.slice(0,j).concat($.ranges.slice(j+1)),$.mainIndex==j?0:$.mainIndex-($.mainIndex>j?1:0))}return null}handlers.dragstart=($,g)=>{let{selection:{main:j}}=$.state;if(g.target.draggable){let et=$.docView.nearest(g.target);if(et&&et.isWidget){let tt=et.posAtStart,nt=tt+et.length;(tt>=j.to||nt<=j.from)&&(j=EditorSelection.range(tt,nt))}}let{inputState:_e}=$;return _e.mouseSelection&&(_e.mouseSelection.dragging=!0),_e.draggedContent=j,g.dataTransfer&&(g.dataTransfer.setData("Text",$.state.sliceDoc(j.from,j.to)),g.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=$=>($.inputState.draggedContent=null,!1);function dropText($,g,j,_e){if(!j)return;let et=$.posAtCoords({x:g.clientX,y:g.clientY},!1),{draggedContent:tt}=$.inputState,nt=_e&&tt&&dragMovesSelection($,g)?{from:tt.from,to:tt.to}:null,rt={from:et,insert:j},it=$.state.changes(nt?[nt,rt]:rt);$.focus(),$.dispatch({changes:it,selection:{anchor:it.mapPos(et,-1),head:it.mapPos(et,1)},userEvent:nt?"move.drop":"input.drop"}),$.inputState.draggedContent=null}handlers.drop=($,g)=>{if(!g.dataTransfer)return!1;if($.state.readOnly)return!0;let j=g.dataTransfer.files;if(j&&j.length){let _e=Array(j.length),et=0,tt=()=>{++et==j.length&&dropText($,g,_e.filter(nt=>nt!=null).join($.state.lineBreak),!1)};for(let nt=0;nt<j.length;nt++){let rt=new FileReader;rt.onerror=tt,rt.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(rt.result)||(_e[nt]=rt.result),tt()},rt.readAsText(j[nt])}return!0}else{let _e=g.dataTransfer.getData("Text");if(_e)return dropText($,g,_e,!0),!0}return!1};handlers.paste=($,g)=>{if($.state.readOnly)return!0;$.observer.flush();let j=brokenClipboardAPI?null:g.clipboardData;return j?(doPaste($,j.getData("text/plain")||j.getData("text/uri-text")),!0):(capturePaste($),!1)};function captureCopy($,g){let j=$.dom.parentNode;if(!j)return;let _e=j.appendChild(document.createElement("textarea"));_e.style.cssText="position: fixed; left: -10000px; top: 10px",_e.value=g,_e.focus(),_e.selectionEnd=g.length,_e.selectionStart=0,setTimeout(()=>{_e.remove(),$.focus()},50)}function copiedRange($){let g=[],j=[],_e=!1;for(let et of $.selection.ranges)et.empty||(g.push($.sliceDoc(et.from,et.to)),j.push(et));if(!g.length){let et=-1;for(let{from:tt}of $.selection.ranges){let nt=$.doc.lineAt(tt);nt.number>et&&(g.push(nt.text),j.push({from:nt.from,to:Math.min($.doc.length,nt.to+1)})),et=nt.number}_e=!0}return{text:g.join($.lineBreak),ranges:j,linewise:_e}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=($,g)=>{let{text:j,ranges:_e,linewise:et}=copiedRange($.state);if(!j&&!et)return!1;lastLinewiseCopy=et?j:null,g.type=="cut"&&!$.state.readOnly&&$.dispatch({changes:_e,scrollIntoView:!0,userEvent:"delete.cut"});let tt=brokenClipboardAPI?null:g.clipboardData;return tt?(tt.clearData(),tt.setData("text/plain",j),!0):(captureCopy($,j),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction($,g){let j=[];for(let _e of $.facet(focusChangeEffect)){let et=_e($,g);et&&j.push(et)}return j?$.update({effects:j,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange($){setTimeout(()=>{let g=$.hasFocus;if(g!=$.inputState.notifiedFocused){let j=focusChangeTransaction($.state,g);j?$.dispatch(j):$.update([])}},10)}observers.focus=$=>{$.inputState.lastFocusTime=Date.now(),!$.scrollDOM.scrollTop&&($.inputState.lastScrollTop||$.inputState.lastScrollLeft)&&($.scrollDOM.scrollTop=$.inputState.lastScrollTop,$.scrollDOM.scrollLeft=$.inputState.lastScrollLeft),updateForFocusChange($)};observers.blur=$=>{$.observer.clearSelectionRange(),updateForFocusChange($)};observers.compositionstart=observers.compositionupdate=$=>{$.inputState.compositionFirstChange==null&&($.inputState.compositionFirstChange=!0),$.inputState.composing<0&&($.inputState.composing=0)};observers.compositionend=$=>{$.inputState.composing=-1,$.inputState.compositionEndedAt=Date.now(),$.inputState.compositionPendingKey=!0,$.inputState.compositionPendingChange=$.observer.pendingRecords().length>0,$.inputState.compositionFirstChange=null,browser.chrome&&browser.android?$.observer.flushSoon():$.inputState.compositionPendingChange?Promise.resolve().then(()=>$.observer.flush()):setTimeout(()=>{$.inputState.composing<0&&$.docView.hasComposition&&$.update([])},50)};observers.contextmenu=$=>{$.inputState.lastContextMenu=Date.now()};handlers.beforeinput=($,g)=>{var j;let _e;if(browser.chrome&&browser.android&&(_e=PendingKeys.find(et=>et.inputType==g.inputType))&&($.observer.delayAndroidKey(_e.key,_e.keyCode),_e.key=="Backspace"||_e.key=="Delete")){let et=((j=window.visualViewport)===null||j===void 0?void 0:j.height)||0;setTimeout(()=>{var tt;(((tt=window.visualViewport)===null||tt===void 0?void 0:tt.height)||0)>et+10&&$.hasFocus&&($.contentDOM.blur(),$.focus())},100)}return!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack($){appliedFirefoxHack.has($)||(appliedFirefoxHack.add($),$.addEventListener("copy",()=>{}),$.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(g){this.lineWrapping=g,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(g,j){let _e=this.doc.lineAt(j).number-this.doc.lineAt(g).number+1;return this.lineWrapping&&(_e+=Math.max(0,Math.ceil((j-g-_e*this.lineLength*.5)/this.lineLength))),this.lineHeight*_e}heightForLine(g){return this.lineWrapping?(1+Math.max(0,Math.ceil((g-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(g){return this.doc=g,this}mustRefreshForWrapping(g){return wrappingWhiteSpace.indexOf(g)>-1!=this.lineWrapping}mustRefreshForHeights(g){let j=!1;for(let _e=0;_e<g.length;_e++){let et=g[_e];et<0?_e++:this.heightSamples[Math.floor(et*10)]||(j=!0,this.heightSamples[Math.floor(et*10)]=!0)}return j}refresh(g,j,_e,et,tt,nt){let rt=wrappingWhiteSpace.indexOf(g)>-1,it=Math.round(j)!=Math.round(this.lineHeight)||this.lineWrapping!=rt;if(this.lineWrapping=rt,this.lineHeight=j,this.charWidth=_e,this.textHeight=et,this.lineLength=tt,it){this.heightSamples={};for(let st=0;st<nt.length;st++){let ot=nt[st];ot<0?st++:this.heightSamples[Math.floor(ot*10)]=!0}}return it}}class MeasuredHeights{constructor(g,j){this.from=g,this.heights=j,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(g,j,_e,et,tt){this.from=g,this.length=j,this.top=_e,this.height=et,this._content=tt}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(g){let j=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(g._content)?g._content:[g]);return new BlockInfo(this.from,this.length+g.length,this.top,this.height+g.height,j)}}var QueryType$1=function($){return $[$.ByPos=0]="ByPos",$[$.ByHeight=1]="ByHeight",$[$.ByPosNoHeight=2]="ByPosNoHeight",$}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(g,j,_e=2){this.length=g,this.height=j,this.flags=_e}get outdated(){return(this.flags&2)>0}set outdated(g){this.flags=(g?2:0)|this.flags&-3}setHeight(g,j){this.height!=j&&(Math.abs(this.height-j)>Epsilon&&(g.heightChanged=!0),this.height=j)}replace(g,j,_e){return HeightMap.of(_e)}decomposeLeft(g,j){j.push(this)}decomposeRight(g,j){j.push(this)}applyChanges(g,j,_e,et){let tt=this,nt=_e.doc;for(let rt=et.length-1;rt>=0;rt--){let{fromA:it,toA:st,fromB:ot,toB:at}=et[rt],lt=tt.lineAt(it,QueryType$1.ByPosNoHeight,_e.setDoc(j),0,0),ut=lt.to>=st?lt:tt.lineAt(st,QueryType$1.ByPosNoHeight,_e,0,0);for(at+=ut.to-st,st=ut.to;rt>0&&lt.from<=et[rt-1].toA;)it=et[rt-1].fromA,ot=et[rt-1].fromB,rt--,it<lt.from&&(lt=tt.lineAt(it,QueryType$1.ByPosNoHeight,_e,0,0));ot+=lt.from-it,it=lt.from;let ht=NodeBuilder.build(_e.setDoc(nt),g,ot,at);tt=tt.replace(it,st,ht)}return tt.updateHeight(_e,0)}static empty(){return new HeightMapText(0,0)}static of(g){if(g.length==1)return g[0];let j=0,_e=g.length,et=0,tt=0;for(;;)if(j==_e)if(et>tt*2){let rt=g[j-1];rt.break?g.splice(--j,1,rt.left,null,rt.right):g.splice(--j,1,rt.left,rt.right),_e+=1+rt.break,et-=rt.size}else if(tt>et*2){let rt=g[_e];rt.break?g.splice(_e,1,rt.left,null,rt.right):g.splice(_e,1,rt.left,rt.right),_e+=2+rt.break,tt-=rt.size}else break;else if(et<tt){let rt=g[j++];rt&&(et+=rt.size)}else{let rt=g[--_e];rt&&(tt+=rt.size)}let nt=0;return g[j-1]==null?(nt=1,j--):g[j]==null&&(nt=1,_e++),new HeightMapBranch(HeightMap.of(g.slice(0,j)),nt,HeightMap.of(g.slice(_e)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(g,j,_e){super(g,j),this.deco=_e}blockAt(g,j,_e,et){return new BlockInfo(et,this.length,_e,this.height,this.deco||0)}lineAt(g,j,_e,et,tt){return this.blockAt(0,_e,et,tt)}forEachLine(g,j,_e,et,tt,nt){g<=tt+this.length&&j>=tt&&nt(this.blockAt(0,_e,et,tt))}updateHeight(g,j=0,_e=!1,et){return et&&et.from<=j&&et.more&&this.setHeight(g,et.heights[et.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(g,j){super(g,j,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(g,j,_e,et){return new BlockInfo(et,this.length,_e,this.height,this.breaks)}replace(g,j,_e){let et=_e[0];return _e.length==1&&(et instanceof HeightMapText||et instanceof HeightMapGap&&et.flags&4)&&Math.abs(this.length-et.length)<10?(et instanceof HeightMapGap?et=new HeightMapText(et.length,this.height):et.height=this.height,this.outdated||(et.outdated=!1),et):HeightMap.of(_e)}updateHeight(g,j=0,_e=!1,et){return et&&et.from<=j&&et.more?this.setHeight(g,et.heights[et.index++]):(_e||this.outdated)&&this.setHeight(g,Math.max(this.widgetHeight,g.heightForLine(this.length-this.collapsed))+this.breaks*g.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(g){super(g,0)}heightMetrics(g,j){let _e=g.doc.lineAt(j).number,et=g.doc.lineAt(j+this.length).number,tt=et-_e+1,nt,rt=0;if(g.lineWrapping){let it=Math.min(this.height,g.lineHeight*tt);nt=it/tt,this.length>tt+1&&(rt=(this.height-it)/(this.length-tt-1))}else nt=this.height/tt;return{firstLine:_e,lastLine:et,perLine:nt,perChar:rt}}blockAt(g,j,_e,et){let{firstLine:tt,lastLine:nt,perLine:rt,perChar:it}=this.heightMetrics(j,et);if(j.lineWrapping){let st=et+Math.round(Math.max(0,Math.min(1,(g-_e)/this.height))*this.length),ot=j.doc.lineAt(st),at=rt+ot.length*it,lt=Math.max(_e,g-at/2);return new BlockInfo(ot.from,ot.length,lt,at,0)}else{let st=Math.max(0,Math.min(nt-tt,Math.floor((g-_e)/rt))),{from:ot,length:at}=j.doc.line(tt+st);return new BlockInfo(ot,at,_e+rt*st,rt,0)}}lineAt(g,j,_e,et,tt){if(j==QueryType$1.ByHeight)return this.blockAt(g,_e,et,tt);if(j==QueryType$1.ByPosNoHeight){let{from:ut,to:ht}=_e.doc.lineAt(g);return new BlockInfo(ut,ht-ut,0,0,0)}let{firstLine:nt,perLine:rt,perChar:it}=this.heightMetrics(_e,tt),st=_e.doc.lineAt(g),ot=rt+st.length*it,at=st.number-nt,lt=et+rt*at+it*(st.from-tt-at);return new BlockInfo(st.from,st.length,Math.max(et,Math.min(lt,et+this.height-ot)),ot,0)}forEachLine(g,j,_e,et,tt,nt){g=Math.max(g,tt),j=Math.min(j,tt+this.length);let{firstLine:rt,perLine:it,perChar:st}=this.heightMetrics(_e,tt);for(let ot=g,at=et;ot<=j;){let lt=_e.doc.lineAt(ot);if(ot==g){let ht=lt.number-rt;at+=it*ht+st*(g-tt-ht)}let ut=it+st*lt.length;nt(new BlockInfo(lt.from,lt.length,at,ut,0)),at+=ut,ot=lt.to+1}}replace(g,j,_e){let et=this.length-j;if(et>0){let tt=_e[_e.length-1];tt instanceof HeightMapGap?_e[_e.length-1]=new HeightMapGap(tt.length+et):_e.push(null,new HeightMapGap(et-1))}if(g>0){let tt=_e[0];tt instanceof HeightMapGap?_e[0]=new HeightMapGap(g+tt.length):_e.unshift(new HeightMapGap(g-1),null)}return HeightMap.of(_e)}decomposeLeft(g,j){j.push(new HeightMapGap(g-1),null)}decomposeRight(g,j){j.push(null,new HeightMapGap(this.length-g-1))}updateHeight(g,j=0,_e=!1,et){let tt=j+this.length;if(et&&et.from<=j+this.length&&et.more){let nt=[],rt=Math.max(j,et.from),it=-1;for(et.from>j&&nt.push(new HeightMapGap(et.from-j-1).updateHeight(g,j));rt<=tt&&et.more;){let ot=g.doc.lineAt(rt).length;nt.length&&nt.push(null);let at=et.heights[et.index++];it==-1?it=at:Math.abs(at-it)>=Epsilon&&(it=-2);let lt=new HeightMapText(ot,at);lt.outdated=!1,nt.push(lt),rt+=ot+1}rt<=tt&&nt.push(null,new HeightMapGap(tt-rt).updateHeight(g,rt));let st=HeightMap.of(nt);return(it<0||Math.abs(st.height-this.height)>=Epsilon||Math.abs(it-this.heightMetrics(g,j).perLine)>=Epsilon)&&(g.heightChanged=!0),st}else(_e||this.outdated)&&(this.setHeight(g,g.heightForGap(j,j+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(g,j,_e){super(g.length+j+_e.length,g.height+_e.height,j|(g.outdated||_e.outdated?2:0)),this.left=g,this.right=_e,this.size=g.size+_e.size}get break(){return this.flags&1}blockAt(g,j,_e,et){let tt=_e+this.left.height;return g<tt?this.left.blockAt(g,j,_e,et):this.right.blockAt(g,j,tt,et+this.left.length+this.break)}lineAt(g,j,_e,et,tt){let nt=et+this.left.height,rt=tt+this.left.length+this.break,it=j==QueryType$1.ByHeight?g<nt:g<rt,st=it?this.left.lineAt(g,j,_e,et,tt):this.right.lineAt(g,j,_e,nt,rt);if(this.break||(it?st.to<rt:st.from>rt))return st;let ot=j==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return it?st.join(this.right.lineAt(rt,ot,_e,nt,rt)):this.left.lineAt(rt,ot,_e,et,tt).join(st)}forEachLine(g,j,_e,et,tt,nt){let rt=et+this.left.height,it=tt+this.left.length+this.break;if(this.break)g<it&&this.left.forEachLine(g,j,_e,et,tt,nt),j>=it&&this.right.forEachLine(g,j,_e,rt,it,nt);else{let st=this.lineAt(it,QueryType$1.ByPos,_e,et,tt);g<st.from&&this.left.forEachLine(g,st.from-1,_e,et,tt,nt),st.to>=g&&st.from<=j&&nt(st),j>st.to&&this.right.forEachLine(st.to+1,j,_e,rt,it,nt)}}replace(g,j,_e){let et=this.left.length+this.break;if(j<et)return this.balanced(this.left.replace(g,j,_e),this.right);if(g>this.left.length)return this.balanced(this.left,this.right.replace(g-et,j-et,_e));let tt=[];g>0&&this.decomposeLeft(g,tt);let nt=tt.length;for(let rt of _e)tt.push(rt);if(g>0&&mergeGaps(tt,nt-1),j<this.length){let rt=tt.length;this.decomposeRight(j,tt),mergeGaps(tt,rt)}return HeightMap.of(tt)}decomposeLeft(g,j){let _e=this.left.length;if(g<=_e)return this.left.decomposeLeft(g,j);j.push(this.left),this.break&&(_e++,g>=_e&&j.push(null)),g>_e&&this.right.decomposeLeft(g-_e,j)}decomposeRight(g,j){let _e=this.left.length,et=_e+this.break;if(g>=et)return this.right.decomposeRight(g-et,j);g<_e&&this.left.decomposeRight(g,j),this.break&&g<et&&j.push(null),j.push(this.right)}balanced(g,j){return g.size>2*j.size||j.size>2*g.size?HeightMap.of(this.break?[g,null,j]:[g,j]):(this.left=g,this.right=j,this.height=g.height+j.height,this.outdated=g.outdated||j.outdated,this.size=g.size+j.size,this.length=g.length+this.break+j.length,this)}updateHeight(g,j=0,_e=!1,et){let{left:tt,right:nt}=this,rt=j+tt.length+this.break,it=null;return et&&et.from<=j+tt.length&&et.more?it=tt=tt.updateHeight(g,j,_e,et):tt.updateHeight(g,j,_e),et&&et.from<=rt+nt.length&&et.more?it=nt=nt.updateHeight(g,rt,_e,et):nt.updateHeight(g,rt,_e),it?this.balanced(tt,nt):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps($,g){let j,_e;$[g]==null&&(j=$[g-1])instanceof HeightMapGap&&(_e=$[g+1])instanceof HeightMapGap&&$.splice(g-1,3,new HeightMapGap(j.length+1+_e.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(g,j){this.pos=g,this.oracle=j,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=g}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(g,j){if(this.lineStart>-1){let _e=Math.min(j,this.lineEnd),et=this.nodes[this.nodes.length-1];et instanceof HeightMapText?et.length+=_e-this.pos:(_e>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(_e-this.pos,-1)),this.writtenTo=_e,j>_e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=j}point(g,j,_e){if(g<j||_e.heightRelevant){let et=_e.widget?_e.widget.estimatedHeight:0,tt=_e.widget?_e.widget.lineBreaks:0;et<0&&(et=this.oracle.lineHeight);let nt=j-g;_e.block?this.addBlock(new HeightMapBlock(nt,et,_e)):(nt||tt||et>=relevantWidgetHeight)&&this.addLineDeco(et,tt,nt)}else j>g&&this.span(g,j);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:g,to:j}=this.oracle.doc.lineAt(this.pos);this.lineStart=g,this.lineEnd=j,this.writtenTo<g&&((this.writtenTo<g-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,g-1)),this.nodes.push(null)),this.pos>g&&this.nodes.push(new HeightMapText(this.pos-g,-1)),this.writtenTo=this.pos}blankContent(g,j){let _e=new HeightMapGap(j-g);return this.oracle.doc.lineAt(g).to==j&&(_e.flags|=4),_e}ensureLine(){this.enterLine();let g=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(g instanceof HeightMapText)return g;let j=new HeightMapText(0,-1);return this.nodes.push(j),j}addBlock(g){this.enterLine();let j=g.deco;j&&j.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(g),this.writtenTo=this.pos=this.pos+g.length,j&&j.endSide>0&&(this.covering=g)}addLineDeco(g,j,_e){let et=this.ensureLine();et.length+=_e,et.collapsed+=_e,et.widgetHeight=Math.max(et.widgetHeight,g),et.breaks+=j,this.writtenTo=this.pos=this.pos+_e}finish(g){let j=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(j instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||j==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let _e=g;for(let et of this.nodes)et instanceof HeightMapText&&et.updateHeight(this.oracle,_e),_e+=et?et.length:1;return this.nodes}static build(g,j,_e,et){let tt=new NodeBuilder(_e,g);return RangeSet.spans(j,_e,et,tt,0),tt.finish(_e)}}function heightRelevantDecoChanges($,g,j){let _e=new DecorationComparator;return RangeSet.compare($,g,j,_e,0),_e.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(g,j,_e,et){(g<j||_e&&_e.heightRelevant||et&&et.heightRelevant)&&addRange(g,j,this.changes,5)}}function visiblePixelRange($,g){let j=$.getBoundingClientRect(),_e=$.ownerDocument,et=_e.defaultView||window,tt=Math.max(0,j.left),nt=Math.min(et.innerWidth,j.right),rt=Math.max(0,j.top),it=Math.min(et.innerHeight,j.bottom);for(let st=$.parentNode;st&&st!=_e.body;)if(st.nodeType==1){let ot=st,at=window.getComputedStyle(ot);if((ot.scrollHeight>ot.clientHeight||ot.scrollWidth>ot.clientWidth)&&at.overflow!="visible"){let lt=ot.getBoundingClientRect();tt=Math.max(tt,lt.left),nt=Math.min(nt,lt.right),rt=Math.max(rt,lt.top),it=st==$.parentNode?lt.bottom:Math.min(it,lt.bottom)}st=at.position=="absolute"||at.position=="fixed"?ot.offsetParent:ot.parentNode}else if(st.nodeType==11)st=st.host;else break;return{left:tt-j.left,right:Math.max(tt,nt)-j.left,top:rt-(j.top+g),bottom:Math.max(rt,it)-(j.top+g)}}function fullPixelRange($,g){let j=$.getBoundingClientRect();return{left:0,right:j.right-j.left,top:g,bottom:j.bottom-(j.top+g)}}class LineGap{constructor(g,j,_e){this.from=g,this.to=j,this.size=_e}static same(g,j){if(g.length!=j.length)return!1;for(let _e=0;_e<g.length;_e++){let et=g[_e],tt=j[_e];if(et.from!=tt.from||et.to!=tt.to||et.size!=tt.size)return!1}return!0}draw(g,j){return Decoration.replace({widget:new LineGapWidget(this.size*(j?g.scaleY:g.scaleX),j)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(g,j){super(),this.size=g,this.vertical=j}eq(g){return g.size==this.size&&g.vertical==this.vertical}toDOM(){let g=document.createElement("div");return this.vertical?g.style.height=this.size+"px":(g.style.width=this.size+"px",g.style.height="2px",g.style.display="inline-block"),g}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(g){this.state=g,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let j=g.facet(contentAttributes).some(_e=>typeof _e!="function"&&_e.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(j),this.stateDeco=g.facet(decorations).filter(_e=>typeof _e!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(g.doc),[new ChangedRange(0,0,0,g.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(_e=>_e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let g=[this.viewport],{main:j}=this.state.selection;for(let _e=0;_e<=1;_e++){let et=_e?j.head:j.anchor;if(!g.some(({from:tt,to:nt})=>et>=tt&&et<=nt)){let{from:tt,to:nt}=this.lineBlockAt(et);g.push(new Viewport(tt,nt))}}this.viewports=g.sort((_e,et)=>_e.from-et.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,g=>{this.viewportLines.push(this.scaler.scale==1?g:scaleBlock(g,this.scaler))})}update(g,j=null){this.state=g.state;let _e=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(ot=>typeof ot!="function");let et=g.changedRanges,tt=ChangedRange.extendWithRanges(et,heightRelevantDecoChanges(_e,this.stateDeco,g?g.changes:ChangeSet.empty(this.state.doc.length))),nt=this.heightMap.height,rt=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,g.startState.doc,this.heightOracle.setDoc(this.state.doc),tt),this.heightMap.height!=nt&&(g.flags|=2),rt?(this.scrollAnchorPos=g.changes.mapPos(rt.from,-1),this.scrollAnchorHeight=rt.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let it=tt.length?this.mapViewport(this.viewport,g.changes):this.viewport;(j&&(j.range.head<it.from||j.range.head>it.to)||!this.viewportIsAppropriate(it))&&(it=this.getViewport(0,j));let st=!g.changes.empty||g.flags&2||it.from!=this.viewport.from||it.to!=this.viewport.to;this.viewport=it,this.updateForViewport(),st&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,g.changes))),g.flags|=this.computeVisibleRanges(),j&&(this.scrollTarget=j),!this.mustEnforceCursorAssoc&&g.selectionSet&&g.view.lineWrapping&&g.state.selection.main.empty&&g.state.selection.main.assoc&&!g.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(g){let j=g.contentDOM,_e=window.getComputedStyle(j),et=this.heightOracle,tt=_e.whiteSpace;this.defaultTextDirection=_e.direction=="rtl"?Direction.RTL:Direction.LTR;let nt=this.heightOracle.mustRefreshForWrapping(tt),rt=j.getBoundingClientRect(),it=nt||this.mustMeasureContent||this.contentDOMHeight!=rt.height;this.contentDOMHeight=rt.height,this.mustMeasureContent=!1;let st=0,ot=0;if(rt.width&&rt.height){let{scaleX:Et,scaleY:Ct}=getScale(j,rt);(this.scaleX!=Et||this.scaleY!=Ct)&&(this.scaleX=Et,this.scaleY=Ct,st|=8,nt=it=!0)}let at=(parseInt(_e.paddingTop)||0)*this.scaleY,lt=(parseInt(_e.paddingBottom)||0)*this.scaleY;(this.paddingTop!=at||this.paddingBottom!=lt)&&(this.paddingTop=at,this.paddingBottom=lt,st|=10),this.editorWidth!=g.scrollDOM.clientWidth&&(et.lineWrapping&&(it=!0),this.editorWidth=g.scrollDOM.clientWidth,st|=8);let ut=g.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=ut&&(this.scrollAnchorHeight=-1,this.scrollTop=ut),this.scrolledToBottom=isScrolledToBottom(g.scrollDOM);let ht=(this.printing?fullPixelRange:visiblePixelRange)(j,this.paddingTop),ft=ht.top-this.pixelViewport.top,gt=ht.bottom-this.pixelViewport.bottom;this.pixelViewport=ht;let dt=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(dt!=this.inView&&(this.inView=dt,dt&&(it=!0)),!this.inView&&!this.scrollTarget)return 0;let mt=rt.width;if((this.contentDOMWidth!=mt||this.editorHeight!=g.scrollDOM.clientHeight)&&(this.contentDOMWidth=rt.width,this.editorHeight=g.scrollDOM.clientHeight,st|=8),it){let Et=g.docView.measureVisibleLineHeights(this.viewport);if(et.mustRefreshForHeights(Et)&&(nt=!0),nt||et.lineWrapping&&Math.abs(mt-this.contentDOMWidth)>et.charWidth){let{lineHeight:Ct,charWidth:kt,textHeight:St}=g.docView.measureTextSize();nt=Ct>0&&et.refresh(tt,Ct,kt,St,mt/kt,Et),nt&&(g.docView.minWidth=0,st|=8)}ft>0&&gt>0?ot=Math.max(ft,gt):ft<0&&gt<0&&(ot=Math.min(ft,gt)),et.heightChanged=!1;for(let Ct of this.viewports){let kt=Ct.from==this.viewport.from?Et:g.docView.measureVisibleLineHeights(Ct);this.heightMap=(nt?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,g.state.doc.length)]):this.heightMap).updateHeight(et,0,nt,new MeasuredHeights(Ct.from,kt))}et.heightChanged&&(st|=2)}let yt=!this.viewportIsAppropriate(this.viewport,ot)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return yt&&(this.viewport=this.getViewport(ot,this.scrollTarget)),this.updateForViewport(),(st&2||yt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(nt?[]:this.lineGaps,g)),st|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,g.docView.enforceCursorAssoc()),st}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(g,j){let _e=.5-Math.max(-.5,Math.min(.5,g/1e3/2)),et=this.heightMap,tt=this.heightOracle,{visibleTop:nt,visibleBottom:rt}=this,it=new Viewport(et.lineAt(nt-_e*1e3,QueryType$1.ByHeight,tt,0,0).from,et.lineAt(rt+(1-_e)*1e3,QueryType$1.ByHeight,tt,0,0).to);if(j){let{head:st}=j.range;if(st<it.from||st>it.to){let ot=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),at=et.lineAt(st,QueryType$1.ByPos,tt,0,0),lt;j.y=="center"?lt=(at.top+at.bottom)/2-ot/2:j.y=="start"||j.y=="nearest"&&st<it.from?lt=at.top:lt=at.bottom-ot,it=new Viewport(et.lineAt(lt-1e3/2,QueryType$1.ByHeight,tt,0,0).from,et.lineAt(lt+ot+1e3/2,QueryType$1.ByHeight,tt,0,0).to)}}return it}mapViewport(g,j){let _e=j.mapPos(g.from,-1),et=j.mapPos(g.to,1);return new Viewport(this.heightMap.lineAt(_e,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(et,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:g,to:j},_e=0){if(!this.inView)return!0;let{top:et}=this.heightMap.lineAt(g,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:tt}=this.heightMap.lineAt(j,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:nt,visibleBottom:rt}=this;return(g==0||et<=nt-Math.max(10,Math.min(-_e,250)))&&(j==this.state.doc.length||tt>=rt+Math.max(10,Math.min(_e,250)))&&et>nt-2*1e3&&tt<rt+2*1e3}mapLineGaps(g,j){if(!g.length||j.empty)return g;let _e=[];for(let et of g)j.touchesRange(et.from,et.to)||_e.push(new LineGap(j.mapPos(et.from),j.mapPos(et.to),et.size));return _e}ensureLineGaps(g,j){let _e=this.heightOracle.lineWrapping,et=_e?1e4:2e3,tt=et>>1,nt=et<<1;if(this.defaultTextDirection!=Direction.LTR&&!_e)return[];let rt=[],it=(st,ot,at,lt)=>{if(ot-st<tt)return;let ut=this.state.selection.main,ht=[ut.from];ut.empty||ht.push(ut.to);for(let gt of ht)if(gt>st&&gt<ot){it(st,gt-10,at,lt),it(gt+10,ot,at,lt);return}let ft=find$3(g,gt=>gt.from>=at.from&&gt.to<=at.to&&Math.abs(gt.from-st)<tt&&Math.abs(gt.to-ot)<tt&&!ht.some(dt=>gt.from<dt&&gt.to>dt));if(!ft){if(ot<at.to&&j&&_e&&j.visibleRanges.some(gt=>gt.from<=ot&&gt.to>=ot)){let gt=j.moveToLineBoundary(EditorSelection.cursor(ot),!1,!0).head;gt>st&&(ot=gt)}ft=new LineGap(st,ot,this.gapSize(at,st,ot,lt))}rt.push(ft)};for(let st of this.viewportLines){if(st.length<nt)continue;let ot=lineStructure(st.from,st.to,this.stateDeco);if(ot.total<nt)continue;let at=this.scrollTarget?this.scrollTarget.range.head:null,lt,ut;if(_e){let ht=et/this.heightOracle.lineLength*this.heightOracle.lineHeight,ft,gt;if(at!=null){let dt=findFraction(ot,at),mt=((this.visibleBottom-this.visibleTop)/2+ht)/st.height;ft=dt-mt,gt=dt+mt}else ft=(this.visibleTop-st.top-ht)/st.height,gt=(this.visibleBottom-st.top+ht)/st.height;lt=findPosition(ot,ft),ut=findPosition(ot,gt)}else{let ht=ot.total*this.heightOracle.charWidth,ft=et*this.heightOracle.charWidth,gt,dt;if(at!=null){let mt=findFraction(ot,at),yt=((this.pixelViewport.right-this.pixelViewport.left)/2+ft)/ht;gt=mt-yt,dt=mt+yt}else gt=(this.pixelViewport.left-ft)/ht,dt=(this.pixelViewport.right+ft)/ht;lt=findPosition(ot,gt),ut=findPosition(ot,dt)}lt>st.from&&it(st.from,lt,st,ot),ut<st.to&&it(ut,st.to,st,ot)}return rt}gapSize(g,j,_e,et){let tt=findFraction(et,_e)-findFraction(et,j);return this.heightOracle.lineWrapping?g.height*tt:et.total*this.heightOracle.charWidth*tt}updateLineGaps(g){LineGap.same(g,this.lineGaps)||(this.lineGaps=g,this.lineGapDeco=Decoration.set(g.map(j=>j.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let g=this.stateDeco;this.lineGaps.length&&(g=g.concat(this.lineGapDeco));let j=[];RangeSet.spans(g,this.viewport.from,this.viewport.to,{span(et,tt){j.push({from:et,to:tt})},point(){}},20);let _e=j.length!=this.visibleRanges.length||this.visibleRanges.some((et,tt)=>et.from!=j[tt].from||et.to!=j[tt].to);return this.visibleRanges=j,_e?4:0}lineBlockAt(g){return g>=this.viewport.from&&g<=this.viewport.to&&this.viewportLines.find(j=>j.from<=g&&j.to>=g)||scaleBlock(this.heightMap.lineAt(g,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(g){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(g),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(g){let j=this.lineBlockAtHeight(g+8);return j.from>=this.viewport.from||this.viewportLines[0].top-g>200?j:this.viewportLines[0]}elementAtHeight(g){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(g),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(g,j){this.from=g,this.to=j}}function lineStructure($,g,j){let _e=[],et=$,tt=0;return RangeSet.spans(j,$,g,{span(){},point(nt,rt){nt>et&&(_e.push({from:et,to:nt}),tt+=nt-et),et=rt}},20),et<g&&(_e.push({from:et,to:g}),tt+=g-et),{total:tt,ranges:_e}}function findPosition({total:$,ranges:g},j){if(j<=0)return g[0].from;if(j>=1)return g[g.length-1].to;let _e=Math.floor($*j);for(let et=0;;et++){let{from:tt,to:nt}=g[et],rt=nt-tt;if(_e<=rt)return tt+_e;_e-=rt}}function findFraction($,g){let j=0;for(let{from:_e,to:et}of $.ranges){if(g<=et){j+=g-_e;break}j+=et-_e}return j/$.total}function find$3($,g){for(let j of $)if(g(j))return j}const IdScaler={toDOM($){return $},fromDOM($){return $},scale:1};class BigScaler{constructor(g,j,_e){let et=0,tt=0,nt=0;this.viewports=_e.map(({from:rt,to:it})=>{let st=j.lineAt(rt,QueryType$1.ByPos,g,0,0).top,ot=j.lineAt(it,QueryType$1.ByPos,g,0,0).bottom;return et+=ot-st,{from:rt,to:it,top:st,bottom:ot,domTop:0,domBottom:0}}),this.scale=(7e6-et)/(j.height-et);for(let rt of this.viewports)rt.domTop=nt+(rt.top-tt)*this.scale,nt=rt.domBottom=rt.domTop+(rt.bottom-rt.top),tt=rt.bottom}toDOM(g){for(let j=0,_e=0,et=0;;j++){let tt=j<this.viewports.length?this.viewports[j]:null;if(!tt||g<tt.top)return et+(g-_e)*this.scale;if(g<=tt.bottom)return tt.domTop+(g-tt.top);_e=tt.bottom,et=tt.domBottom}}fromDOM(g){for(let j=0,_e=0,et=0;;j++){let tt=j<this.viewports.length?this.viewports[j]:null;if(!tt||g<tt.domTop)return _e+(g-et)/this.scale;if(g<=tt.domBottom)return tt.top+(g-tt.domTop);_e=tt.bottom,et=tt.domBottom}}}function scaleBlock($,g){if(g.scale==1)return $;let j=g.toDOM($.top),_e=g.toDOM($.bottom);return new BlockInfo($.from,$.length,j,_e-j,Array.isArray($._content)?$._content.map(et=>scaleBlock(et,g)):$._content)}const theme=Facet.define({combine:$=>$.join(" ")}),darkTheme=Facet.define({combine:$=>$.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme($,g,j){return new StyleModule(g,{finish(_e){return/&/.test(_e)?_e.replace(/&\w*/,et=>{if(et=="&")return $;if(!j||!j[et])throw new RangeError(`Unsupported selector: ${et}`);return j[et]}):$+" "+_e}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="￿";class DOMReader{constructor(g,j){this.points=g,this.text="",this.lineSeparator=j.facet(EditorState.lineSeparator)}append(g){this.text+=g}lineBreak(){this.text+=LineBreakPlaceholder}readRange(g,j){if(!g)return this;let _e=g.parentNode;for(let et=g;;){this.findPointBefore(_e,et);let tt=this.text.length;this.readNode(et);let nt=et.nextSibling;if(nt==j)break;let rt=ContentView.get(et),it=ContentView.get(nt);(rt&&it?rt.breakAfter:(rt?rt.breakAfter:isBlockElement(et))||isBlockElement(nt)&&(et.nodeName!="BR"||et.cmIgnore)&&this.text.length>tt)&&this.lineBreak(),et=nt}return this.findPointBefore(_e,j),this}readTextNode(g){let j=g.nodeValue;for(let _e of this.points)_e.node==g&&(_e.pos=this.text.length+Math.min(_e.offset,j.length));for(let _e=0,et=this.lineSeparator?null:/\r\n?|\n/g;;){let tt=-1,nt=1,rt;if(this.lineSeparator?(tt=j.indexOf(this.lineSeparator,_e),nt=this.lineSeparator.length):(rt=et.exec(j))&&(tt=rt.index,nt=rt[0].length),this.append(j.slice(_e,tt<0?j.length:tt)),tt<0)break;if(this.lineBreak(),nt>1)for(let it of this.points)it.node==g&&it.pos>this.text.length&&(it.pos-=nt-1);_e=tt+nt}}readNode(g){if(g.cmIgnore)return;let j=ContentView.get(g),_e=j&&j.overrideDOMText;if(_e!=null){this.findPointInside(g,_e.length);for(let et=_e.iter();!et.next().done;)et.lineBreak?this.lineBreak():this.append(et.value)}else g.nodeType==3?this.readTextNode(g):g.nodeName=="BR"?g.nextSibling&&this.lineBreak():g.nodeType==1&&this.readRange(g.firstChild,null)}findPointBefore(g,j){for(let _e of this.points)_e.node==g&&g.childNodes[_e.offset]==j&&(_e.pos=this.text.length)}findPointInside(g,j){for(let _e of this.points)(g.nodeType==3?_e.node==g:g.contains(_e.node))&&(_e.pos=this.text.length+(isAtEnd(g,_e.node,_e.offset)?j:0))}}function isAtEnd($,g,j){for(;;){if(!g||j<maxOffset(g))return!1;if(g==$)return!0;j=domIndex(g)+1,g=g.parentNode}}function isBlockElement($){return $.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test($.nodeName)}class DOMPoint{constructor(g,j){this.node=g,this.offset=j,this.pos=-1}}class DOMChange{constructor(g,j,_e,et){this.typeOver=et,this.bounds=null,this.text="";let{impreciseHead:tt,impreciseAnchor:nt}=g.docView;if(g.state.readOnly&&j>-1)this.newSel=null;else if(j>-1&&(this.bounds=g.docView.domBoundsAround(j,_e,0))){let rt=tt||nt?[]:selectionPoints(g),it=new DOMReader(rt,g.state);it.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=it.text,this.newSel=selectionFromPoints(rt,this.bounds.from)}else{let rt=g.observer.selectionRange,it=tt&&tt.node==rt.focusNode&&tt.offset==rt.focusOffset||!contains(g.contentDOM,rt.focusNode)?g.state.selection.main.head:g.docView.posFromDOM(rt.focusNode,rt.focusOffset),st=nt&&nt.node==rt.anchorNode&&nt.offset==rt.anchorOffset||!contains(g.contentDOM,rt.anchorNode)?g.state.selection.main.anchor:g.docView.posFromDOM(rt.anchorNode,rt.anchorOffset),ot=g.viewport;if(browser.ios&&g.state.selection.main.empty&&it!=st&&(ot.from>0||ot.to<g.state.doc.length)){let at=ot.from-Math.min(it,st),lt=ot.to-Math.max(it,st);(at==0||at==1)&&(lt==0||lt==-1)&&(it=0,st=g.state.doc.length)}this.newSel=EditorSelection.single(st,it)}}}function applyDOMChange($,g){let j,{newSel:_e}=g,et=$.state.selection.main,tt=$.inputState.lastKeyTime>Date.now()-100?$.inputState.lastKeyCode:-1;if(g.bounds){let{from:nt,to:rt}=g.bounds,it=et.from,st=null;(tt===8||browser.android&&g.text.length<rt-nt)&&(it=et.to,st="end");let ot=findDiff($.state.doc.sliceString(nt,rt,LineBreakPlaceholder),g.text,it-nt,st);ot&&(browser.chrome&&tt==13&&ot.toB==ot.from+2&&g.text.slice(ot.from,ot.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&ot.toB--,j={from:nt+ot.from,to:nt+ot.toA,insert:Text.of(g.text.slice(ot.from,ot.toB).split(LineBreakPlaceholder))})}else _e&&(!$.hasFocus&&$.state.facet(editable)||_e.main.eq(et))&&(_e=null);if(!j&&!_e)return!1;if(!j&&g.typeOver&&!et.empty&&_e&&_e.main.empty?j={from:et.from,to:et.to,insert:$.state.doc.slice(et.from,et.to)}:j&&j.from>=et.from&&j.to<=et.to&&(j.from!=et.from||j.to!=et.to)&&et.to-et.from-(j.to-j.from)<=4?j={from:et.from,to:et.to,insert:$.state.doc.slice(et.from,j.from).append(j.insert).append($.state.doc.slice(j.to,et.to))}:(browser.mac||browser.android)&&j&&j.from==j.to&&j.from==et.head-1&&/^\. ?$/.test(j.insert.toString())&&$.contentDOM.getAttribute("autocorrect")=="off"?(_e&&j.insert.length==2&&(_e=EditorSelection.single(_e.main.anchor-1,_e.main.head-1)),j={from:et.from,to:et.to,insert:Text.of([" "])}):browser.chrome&&j&&j.from==j.to&&j.from==et.head&&j.insert.toString()==`
 `&&$.lineWrapping&&(_e&&(_e=EditorSelection.single(_e.main.anchor-1,_e.main.head-1)),j={from:et.from,to:et.to,insert:Text.of([" "])}),j){if(browser.ios&&$.inputState.flushIOSKey()||browser.android&&(j.from==et.from&&j.to==et.to&&j.insert.length==1&&j.insert.lines==2&&dispatchKey($.contentDOM,"Enter",13)||(j.from==et.from-1&&j.to==et.to&&j.insert.length==0||tt==8&&j.insert.length<j.to-j.from&&j.to>et.head)&&dispatchKey($.contentDOM,"Backspace",8)||j.from==et.from&&j.to==et.to+1&&j.insert.length==0&&dispatchKey($.contentDOM,"Delete",46)))return!0;let nt=j.insert.toString();$.inputState.composing>=0&&$.inputState.composing++;let rt,it=()=>rt||(rt=applyDefaultInsert($,j,_e));return $.state.facet(inputHandler$1).some(st=>st($,j.from,j.to,nt,it))||$.dispatch(it()),!0}else if(_e&&!_e.main.eq(et)){let nt=!1,rt="select";return $.inputState.lastSelectionTime>Date.now()-50&&($.inputState.lastSelectionOrigin=="select"&&(nt=!0),rt=$.inputState.lastSelectionOrigin),$.dispatch({selection:_e,scrollIntoView:nt,userEvent:rt}),!0}else return!1}function applyDefaultInsert($,g,j){let _e,et=$.state,tt=et.selection.main;if(g.from>=tt.from&&g.to<=tt.to&&g.to-g.from>=(tt.to-tt.from)/3&&(!j||j.main.empty&&j.main.from==g.from+g.insert.length)&&$.inputState.composing<0){let rt=tt.from<g.from?et.sliceDoc(tt.from,g.from):"",it=tt.to>g.to?et.sliceDoc(g.to,tt.to):"";_e=et.replaceSelection($.state.toText(rt+g.insert.sliceString(0,void 0,$.state.lineBreak)+it))}else{let rt=et.changes(g),it=j&&j.main.to<=rt.newLength?j.main:void 0;if(et.selection.ranges.length>1&&$.inputState.composing>=0&&g.to<=tt.to&&g.to>=tt.to-10){let st=$.state.sliceDoc(g.from,g.to),ot,at=j&&findCompositionNode($,j.main.head);if(at){let ht=g.insert.length-(g.to-g.from);ot={from:at.from,to:at.to-ht}}else ot=$.state.doc.lineAt(tt.head);let lt=tt.to-g.to,ut=tt.to-tt.from;_e=et.changeByRange(ht=>{if(ht.from==tt.from&&ht.to==tt.to)return{changes:rt,range:it||ht.map(rt)};let ft=ht.to-lt,gt=ft-st.length;if(ht.to-ht.from!=ut||$.state.sliceDoc(gt,ft)!=st||ht.to>=ot.from&&ht.from<=ot.to)return{range:ht};let dt=et.changes({from:gt,to:ft,insert:g.insert}),mt=ht.to-tt.to;return{changes:dt,range:it?EditorSelection.range(Math.max(0,it.anchor+mt),Math.max(0,it.head+mt)):ht.map(dt)}})}else _e={changes:rt,selection:it&&et.selection.replaceRange(it)}}let nt="input.type";return($.composing||$.inputState.compositionPendingChange&&$.inputState.compositionEndedAt>Date.now()-50)&&($.inputState.compositionPendingChange=!1,nt+=".compose",$.inputState.compositionFirstChange&&(nt+=".start",$.inputState.compositionFirstChange=!1)),et.update(_e,{userEvent:nt,scrollIntoView:!0})}function findDiff($,g,j,_e){let et=Math.min($.length,g.length),tt=0;for(;tt<et&&$.charCodeAt(tt)==g.charCodeAt(tt);)tt++;if(tt==et&&$.length==g.length)return null;let nt=$.length,rt=g.length;for(;nt>0&&rt>0&&$.charCodeAt(nt-1)==g.charCodeAt(rt-1);)nt--,rt--;if(_e=="end"){let it=Math.max(0,tt-Math.min(nt,rt));j-=nt+it-tt}if(nt<tt&&$.length<g.length){let it=j<=tt&&j>=nt?tt-j:0;tt-=it,rt=tt+(rt-nt),nt=tt}else if(rt<tt){let it=j<=tt&&j>=rt?tt-j:0;tt-=it,nt=tt+(nt-rt),rt=tt}return{from:tt,toA:nt,toB:rt}}function selectionPoints($){let g=[];if($.root.activeElement!=$.contentDOM)return g;let{anchorNode:j,anchorOffset:_e,focusNode:et,focusOffset:tt}=$.observer.selectionRange;return j&&(g.push(new DOMPoint(j,_e)),(et!=j||tt!=_e)&&g.push(new DOMPoint(et,tt))),g}function selectionFromPoints($,g){if($.length==0)return null;let j=$[0].pos,_e=$.length==2?$[1].pos:j;return j>-1&&_e>-1?EditorSelection.single(j+g,_e+g):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(g){this.view=g,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=g.contentDOM,this.observer=new MutationObserver(j=>{for(let _e of j)this.queue.push(_e);(browser.ie&&browser.ie_version<=11||browser.ios&&g.composing)&&j.some(_e=>_e.type=="childList"&&_e.removedNodes.length||_e.type=="characterData"&&_e.oldValue.length>_e.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=j=>{this.queue.push({target:j.target,type:"characterData",oldValue:j.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var j;((j=this.view.docView)===null||j===void 0?void 0:j.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(g.scrollDOM)),this.addWindowListeners(this.win=g.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(j=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),j.length>0&&j[j.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(j=>{j.length>0&&j[j.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(g){this.view.inputState.runHandlers("scroll",g),this.intersecting&&this.view.measure()}onScroll(g){this.intersecting&&this.flush(!1),this.onScrollChanged(g)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(g){if(this.gapIntersection&&(g.length!=this.gaps.length||this.gaps.some((j,_e)=>j!=g[_e]))){this.gapIntersection.disconnect();for(let j of g)this.gapIntersection.observe(j);this.gaps=g}}onSelectionChange(g){let j=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:_e}=this,et=this.selectionRange;if(_e.state.facet(editable)?_e.root.activeElement!=this.dom:!hasSelection(_e.dom,et))return;let tt=et.anchorNode&&_e.docView.nearest(et.anchorNode);if(tt&&tt.ignoreEvent(g)){j||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!_e.state.selection.main.empty&&et.focusNode&&isEquivalentPosition(et.focusNode,et.focusOffset,et.anchorNode,et.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:g}=this,j=browser.safari&&g.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(g.root);if(!j||this.selectionRange.eq(j))return!1;let _e=hasSelection(this.dom,j);return _e&&!this.selectionChanged&&g.inputState.lastFocusTime>Date.now()-200&&g.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,j)?(this.view.inputState.lastFocusTime=0,g.docView.updateSelection(),!1):(this.selectionRange.setRange(j),_e&&(this.selectionChanged=!0),!0)}setSelectionRange(g,j){this.selectionRange.set(g.node,g.offset,j.node,j.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let g=0,j=null;for(let _e=this.dom;_e;)if(_e.nodeType==1)!j&&g<this.scrollTargets.length&&this.scrollTargets[g]==_e?g++:j||(j=this.scrollTargets.slice(0,g)),j&&j.push(_e),_e=_e.assignedSlot||_e.parentNode;else if(_e.nodeType==11)_e=_e.host;else break;if(g<this.scrollTargets.length&&!j&&(j=this.scrollTargets.slice(0,g)),j){for(let _e of this.scrollTargets)_e.removeEventListener("scroll",this.onScroll);for(let _e of this.scrollTargets=j)_e.addEventListener("scroll",this.onScroll)}}ignore(g){if(!this.active)return g();try{return this.stop(),g()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(g,j){var _e;if(!this.delayedAndroidKey){let et=()=>{let tt=this.delayedAndroidKey;tt&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=tt.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&tt.force&&dispatchKey(this.dom,tt.key,tt.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(et)}(!this.delayedAndroidKey||g=="Enter")&&(this.delayedAndroidKey={key:g,keyCode:j,force:this.lastChange<Date.now()-50||!!(!((_e=this.delayedAndroidKey)===null||_e===void 0)&&_e.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}processRecords(){let g=this.pendingRecords();g.length&&(this.queue=[]);let j=-1,_e=-1,et=!1;for(let tt of g){let nt=this.readMutation(tt);nt&&(nt.typeOver&&(et=!0),j==-1?{from:j,to:_e}=nt:(j=Math.min(nt.from,j),_e=Math.max(nt.to,_e)))}return{from:j,to:_e,typeOver:et}}readChange(){let{from:g,to:j,typeOver:_e}=this.processRecords(),et=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(g<0&&!et)return null;g>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let tt=new DOMChange(this.view,g,j,_e);return this.view.docView.domChanged={newSel:tt.newSel?tt.newSel.main:null},tt}flush(g=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;g&&this.readSelectionRange();let j=this.readChange();if(!j)return this.view.requestMeasure(),!1;let _e=this.view.state,et=applyDOMChange(this.view,j);return this.view.state==_e&&this.view.update([]),et}readMutation(g){let j=this.view.docView.nearest(g.target);if(!j||j.ignoreMutation(g))return null;if(j.markDirty(g.type=="attributes"),g.type=="attributes"&&(j.flags|=4),g.type=="childList"){let _e=findChild(j,g.previousSibling||g.target.previousSibling,-1),et=findChild(j,g.nextSibling||g.target.nextSibling,1);return{from:_e?j.posAfter(_e):j.posAtStart,to:et?j.posBefore(et):j.posAtEnd,typeOver:!1}}else return g.type=="characterData"?{from:j.posAtStart,to:j.posAtEnd,typeOver:g.target.nodeValue==g.oldValue}:null}setWindow(g){g!=this.win&&(this.removeWindowListeners(this.win),this.win=g,this.addWindowListeners(this.win))}addWindowListeners(g){g.addEventListener("resize",this.onResize),g.addEventListener("beforeprint",this.onPrint),g.addEventListener("scroll",this.onScroll),g.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(g){g.removeEventListener("scroll",this.onScroll),g.removeEventListener("resize",this.onResize),g.removeEventListener("beforeprint",this.onPrint),g.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var g,j,_e;this.stop(),(g=this.intersection)===null||g===void 0||g.disconnect(),(j=this.gapIntersection)===null||j===void 0||j.disconnect(),(_e=this.resizeScroll)===null||_e===void 0||_e.disconnect();for(let et of this.scrollTargets)et.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild($,g,j){for(;g;){let _e=ContentView.get(g);if(_e&&_e.parent==$)return _e;let et=g.parentNode;g=et!=$.dom?et:j>0?g.nextSibling:g.previousSibling}return null}function safariSelectionRangeHack($){let g=null;function j(it){it.preventDefault(),it.stopImmediatePropagation(),g=it.getTargetRanges()[0]}if($.contentDOM.addEventListener("beforeinput",j,!0),$.dom.ownerDocument.execCommand("indent"),$.contentDOM.removeEventListener("beforeinput",j,!0),!g)return null;let _e=g.startContainer,et=g.startOffset,tt=g.endContainer,nt=g.endOffset,rt=$.docView.domAtPos($.state.selection.main.anchor);return isEquivalentPosition(rt.node,rt.offset,tt,nt)&&([_e,et,tt,nt]=[tt,nt,_e,et]),{anchorNode:_e,anchorOffset:et,focusNode:tt,focusOffset:nt}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(g={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),g.parent&&g.parent.appendChild(this.dom);let{dispatch:j}=g;this.dispatchTransactions=g.dispatchTransactions||j&&(_e=>_e.forEach(et=>j(et,this)))||(_e=>this.update(_e)),this.dispatch=this.dispatch.bind(this),this._root=g.root||getRoot(g.parent)||document,this.viewState=new ViewState(g.state||EditorState.create(g)),g.scrollTo&&g.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=g.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(_e=>new PluginInstance(_e));for(let _e of this.plugins)_e.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...g){let j=g.length==1&&g[0]instanceof Transaction?g:g.length==1&&Array.isArray(g[0])?g[0]:[this.state.update(...g)];this.dispatchTransactions(j,this)}update(g){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let j=!1,_e=!1,et,tt=this.state;for(let lt of g){if(lt.startState!=tt)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");tt=lt.state}if(this.destroyed){this.viewState.state=tt;return}let nt=this.hasFocus,rt=0,it=null;g.some(lt=>lt.annotation(isFocusChange))?(this.inputState.notifiedFocused=nt,rt=1):nt!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=nt,it=focusChangeTransaction(tt,nt),it||(rt=1));let st=this.observer.delayedAndroidKey,ot=null;if(st?(this.observer.clearDelayedAndroidKey(),ot=this.observer.readChange(),(ot&&!this.state.doc.eq(tt.doc)||!this.state.selection.eq(tt.selection))&&(ot=null)):this.observer.clear(),tt.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(tt);et=ViewUpdate.create(this,tt,g),et.flags|=rt;let at=this.viewState.scrollTarget;try{this.updateState=2;for(let lt of g){if(at&&(at=at.map(lt.changes)),lt.scrollIntoView){let{main:ut}=lt.state.selection;at=new ScrollTarget(ut.empty?ut:EditorSelection.cursor(ut.head,ut.head>ut.anchor?-1:1))}for(let ut of lt.effects)ut.is(scrollIntoView$1)&&(at=ut.value.clip(this.state))}this.viewState.update(et,at),this.bidiCache=CachedOrder.update(this.bidiCache,et.changes),et.empty||(this.updatePlugins(et),this.inputState.update(et)),j=this.docView.update(et),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),_e=this.updateAttrs(),this.showAnnouncements(g),this.docView.updateSelection(j,g.some(lt=>lt.isUserEvent("select.pointer")))}finally{this.updateState=0}if(et.startState.facet(theme)!=et.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(j||_e||at||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!et.empty)for(let lt of this.state.facet(updateListener))try{lt(et)}catch(ut){logException(this.state,ut,"update listener")}(it||ot)&&Promise.resolve().then(()=>{it&&this.state==it.startState&&this.dispatch(it),ot&&!applyDOMChange(this,ot)&&st.force&&dispatchKey(this.contentDOM,st.key,st.keyCode)})}setState(g){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=g;return}this.updateState=2;let j=this.hasFocus;try{for(let _e of this.plugins)_e.destroy(this);this.viewState=new ViewState(g),this.plugins=g.facet(viewPlugin).map(_e=>new PluginInstance(_e)),this.pluginMap.clear();for(let _e of this.plugins)_e.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}j&&this.focus(),this.requestMeasure()}updatePlugins(g){let j=g.startState.facet(viewPlugin),_e=g.state.facet(viewPlugin);if(j!=_e){let et=[];for(let tt of _e){let nt=j.indexOf(tt);if(nt<0)et.push(new PluginInstance(tt));else{let rt=this.plugins[nt];rt.mustUpdate=g,et.push(rt)}}for(let tt of this.plugins)tt.mustUpdate!=g&&tt.destroy(this);this.plugins=et,this.pluginMap.clear()}else for(let et of this.plugins)et.mustUpdate=g;for(let et=0;et<this.plugins.length;et++)this.plugins[et].update(this);j!=_e&&this.inputState.ensureHandlers(this.plugins)}measure(g=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,g&&this.observer.forceFlush();let j=null,_e=this.scrollDOM,et=_e.scrollTop*this.scaleY,{scrollAnchorPos:tt,scrollAnchorHeight:nt}=this.viewState;Math.abs(et-this.viewState.scrollTop)>1&&(nt=-1),this.viewState.scrollAnchorHeight=-1;try{for(let rt=0;;rt++){if(nt<0)if(isScrolledToBottom(_e))tt=-1,nt=this.viewState.heightMap.height;else{let ut=this.viewState.scrollAnchorAt(et);tt=ut.from,nt=ut.top}this.updateState=1;let it=this.viewState.measure(this);if(!it&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(rt>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let st=[];it&4||([this.measureRequests,st]=[st,this.measureRequests]);let ot=st.map(ut=>{try{return ut.read(this)}catch(ht){return logException(this.state,ht),BadMeasure}}),at=ViewUpdate.create(this,this.state,[]),lt=!1;at.flags|=it,j?j.flags|=it:j=at,this.updateState=2,at.empty||(this.updatePlugins(at),this.inputState.update(at),this.updateAttrs(),lt=this.docView.update(at));for(let ut=0;ut<st.length;ut++)if(ot[ut]!=BadMeasure)try{let ht=st[ut];ht.write&&ht.write(ot[ut],this)}catch(ht){logException(this.state,ht)}if(lt&&this.docView.updateSelection(!0),!at.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,nt=-1;continue}else{let ht=(tt<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(tt).top)-nt;if(ht>1||ht<-1){et=et+ht,_e.scrollTop=et/this.scaleY,nt=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(j&&!j.empty)for(let rt of this.state.facet(updateListener))rt(j)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let g=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),j={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(j["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,j);let _e=this.observer.ignore(()=>{let et=updateAttrs(this.contentDOM,this.contentAttrs,j),tt=updateAttrs(this.dom,this.editorAttrs,g);return et||tt});return this.editorAttrs=g,this.contentAttrs=j,_e}showAnnouncements(g){let j=!0;for(let _e of g)for(let et of _e.effects)if(et.is(EditorView.announce)){j&&(this.announceDOM.textContent=""),j=!1;let tt=this.announceDOM.appendChild(document.createElement("div"));tt.textContent=et.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let g=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),g?{nonce:g}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(g){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),g){if(this.measureRequests.indexOf(g)>-1)return;if(g.key!=null){for(let j=0;j<this.measureRequests.length;j++)if(this.measureRequests[j].key===g.key){this.measureRequests[j]=g;return}}this.measureRequests.push(g)}}plugin(g){let j=this.pluginMap.get(g);return(j===void 0||j&&j.spec!=g)&&this.pluginMap.set(g,j=this.plugins.find(_e=>_e.spec==g)||null),j&&j.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(g){return this.readMeasured(),this.viewState.elementAtHeight(g)}lineBlockAtHeight(g){return this.readMeasured(),this.viewState.lineBlockAtHeight(g)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(g){return this.viewState.lineBlockAt(g)}get contentHeight(){return this.viewState.contentHeight}moveByChar(g,j,_e){return skipAtoms(this,g,moveByChar(this,g,j,_e))}moveByGroup(g,j){return skipAtoms(this,g,moveByChar(this,g,j,_e=>byGroup(this,g.head,_e)))}visualLineSide(g,j){let _e=this.bidiSpans(g),et=this.textDirectionAt(g.from),tt=_e[j?_e.length-1:0];return EditorSelection.cursor(tt.side(j,et)+g.from,tt.forward(!j,et)?1:-1)}moveToLineBoundary(g,j,_e=!0){return moveToLineBoundary(this,g,j,_e)}moveVertically(g,j,_e){return skipAtoms(this,g,moveVertically(this,g,j,_e))}domAtPos(g){return this.docView.domAtPos(g)}posAtDOM(g,j=0){return this.docView.posFromDOM(g,j)}posAtCoords(g,j=!0){return this.readMeasured(),posAtCoords(this,g,j)}coordsAtPos(g,j=1){this.readMeasured();let _e=this.docView.coordsAt(g,j);if(!_e||_e.left==_e.right)return _e;let et=this.state.doc.lineAt(g),tt=this.bidiSpans(et),nt=tt[BidiSpan.find(tt,g-et.from,-1,j)];return flattenRect(_e,nt.dir==Direction.LTR==j>0)}coordsForChar(g){return this.readMeasured(),this.docView.coordsForChar(g)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(g){return!this.state.facet(perLineTextDirection)||g<this.viewport.from||g>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(g))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(g){if(g.length>MaxBidiLine)return trivialOrder(g.length);let j=this.textDirectionAt(g.from),_e;for(let tt of this.bidiCache)if(tt.from==g.from&&tt.dir==j&&(tt.fresh||isolatesEq(tt.isolates,_e=getIsolatedRanges(this,g))))return tt.order;_e||(_e=getIsolatedRanges(this,g));let et=computeOrder(g.text,j,_e);return this.bidiCache.push(new CachedOrder(g.from,g.to,j,_e,!0,et)),et}get hasFocus(){var g;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((g=this.inputState)===null||g===void 0?void 0:g.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(g){this._root!=g&&(this._root=g,this.observer.setWindow((g.nodeType==9?g:g.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let g of this.plugins)g.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(g,j={}){return scrollIntoView$1.of(new ScrollTarget(typeof g=="number"?EditorSelection.cursor(g):g,j.y,j.x,j.yMargin,j.xMargin))}scrollSnapshot(){let{scrollTop:g,scrollLeft:j}=this.scrollDOM,_e=this.viewState.scrollAnchorAt(g);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(_e.from),"start","start",_e.top-g,j,!0))}static domEventHandlers(g){return ViewPlugin.define(()=>({}),{eventHandlers:g})}static domEventObservers(g){return ViewPlugin.define(()=>({}),{eventObservers:g})}static theme(g,j){let _e=StyleModule.newName(),et=[theme.of(_e),styleModule.of(buildTheme(`.${_e}`,g))];return j&&j.dark&&et.push(darkTheme.of(!0)),et}static baseTheme(g){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,g,lightDarkIDs)))}static findFromDOM(g){var j;let _e=g.querySelector(".cm-content"),et=_e&&ContentView.get(_e)||ContentView.get(g);return((j=et==null?void 0:et.rootView)===null||j===void 0?void 0:j.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:$=>$.length?$[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(g,j,_e,et,tt,nt){this.from=g,this.to=j,this.dir=_e,this.isolates=et,this.fresh=tt,this.order=nt}static update(g,j){if(j.empty&&!g.some(tt=>tt.fresh))return g;let _e=[],et=g.length?g[g.length-1].dir:Direction.LTR;for(let tt=Math.max(0,g.length-10);tt<g.length;tt++){let nt=g[tt];nt.dir==et&&!j.touchesRange(nt.from,nt.to)&&_e.push(new CachedOrder(j.mapPos(nt.from,1),j.mapPos(nt.to,-1),nt.dir,nt.isolates,!1,nt.order))}return _e}}function attrsFromFacet($,g,j){for(let _e=$.state.facet(g),et=_e.length-1;et>=0;et--){let tt=_e[et],nt=typeof tt=="function"?tt($):tt;nt&&combineAttrs(nt,j)}return j}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName($,g){const j=$.split(/-(?!$)/);let _e=j[j.length-1];_e=="Space"&&(_e=" ");let et,tt,nt,rt;for(let it=0;it<j.length-1;++it){const st=j[it];if(/^(cmd|meta|m)$/i.test(st))rt=!0;else if(/^a(lt)?$/i.test(st))et=!0;else if(/^(c|ctrl|control)$/i.test(st))tt=!0;else if(/^s(hift)?$/i.test(st))nt=!0;else if(/^mod$/i.test(st))g=="mac"?rt=!0:tt=!0;else throw new Error("Unrecognized modifier name: "+st)}return et&&(_e="Alt-"+_e),tt&&(_e="Ctrl-"+_e),rt&&(_e="Meta-"+_e),nt&&(_e="Shift-"+_e),_e}function modifiers($,g,j){return g.altKey&&($="Alt-"+$),g.ctrlKey&&($="Ctrl-"+$),g.metaKey&&($="Meta-"+$),j!==!1&&g.shiftKey&&($="Shift-"+$),$}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown($,g){return runHandlers(getKeymap(g.state),$,g,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap($){let g=$.facet(keymap),j=Keymaps.get(g);return j||Keymaps.set(g,j=buildKeymap(g.reduce((_e,et)=>_e.concat(et),[]))),j}function runScopeHandlers($,g,j){return runHandlers(getKeymap($.state),g,$,j)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap($,g=currentPlatform){let j=Object.create(null),_e=Object.create(null),et=(nt,rt)=>{let it=_e[nt];if(it==null)_e[nt]=rt;else if(it!=rt)throw new Error("Key binding "+nt+" is used both as a regular binding and as a multi-stroke prefix")},tt=(nt,rt,it,st,ot)=>{var at,lt;let ut=j[nt]||(j[nt]=Object.create(null)),ht=rt.split(/ (?!$)/).map(dt=>normalizeKeyName(dt,g));for(let dt=1;dt<ht.length;dt++){let mt=ht.slice(0,dt).join(" ");et(mt,!0),ut[mt]||(ut[mt]={preventDefault:!0,stopPropagation:!1,run:[yt=>{let Et=storedPrefix={view:yt,prefix:mt,scope:nt};return setTimeout(()=>{storedPrefix==Et&&(storedPrefix=null)},PrefixTimeout),!0}]})}let ft=ht.join(" ");et(ft,!1);let gt=ut[ft]||(ut[ft]={preventDefault:!1,stopPropagation:!1,run:((lt=(at=ut._any)===null||at===void 0?void 0:at.run)===null||lt===void 0?void 0:lt.slice())||[]});it&&gt.run.push(it),st&&(gt.preventDefault=!0),ot&&(gt.stopPropagation=!0)};for(let nt of $){let rt=nt.scope?nt.scope.split(" "):["editor"];if(nt.any)for(let st of rt){let ot=j[st]||(j[st]=Object.create(null));ot._any||(ot._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let at in ot)ot[at].run.push(nt.any)}let it=nt[g]||nt.key;if(it)for(let st of rt)tt(st,it,nt.run,nt.preventDefault,nt.stopPropagation),nt.shift&&tt(st,"Shift-"+it,nt.shift,nt.preventDefault,nt.stopPropagation)}return j}function runHandlers($,g,j,_e){let et=keyName(g),tt=codePointAt(et,0),nt=codePointSize(tt)==et.length&&et!=" ",rt="",it=!1,st=!1,ot=!1;storedPrefix&&storedPrefix.view==j&&storedPrefix.scope==_e&&(rt=storedPrefix.prefix+" ",modifierCodes.indexOf(g.keyCode)<0&&(st=!0,storedPrefix=null));let at=new Set,lt=gt=>{if(gt){for(let dt of gt.run)if(!at.has(dt)&&(at.add(dt),dt(j,g)))return gt.stopPropagation&&(ot=!0),!0;gt.preventDefault&&(gt.stopPropagation&&(ot=!0),st=!0)}return!1},ut=$[_e],ht,ft;return ut&&(lt(ut[rt+modifiers(et,g,!nt)])?it=!0:nt&&(g.altKey||g.metaKey||g.ctrlKey)&&!(browser.windows&&g.ctrlKey&&g.altKey)&&(ht=base[g.keyCode])&&ht!=et?(lt(ut[rt+modifiers(ht,g,!0)])||g.shiftKey&&(ft=shift[g.keyCode])!=et&&ft!=ht&&lt(ut[rt+modifiers(ft,g,!1)]))&&(it=!0):nt&&g.shiftKey&&lt(ut[rt+modifiers(et,g,!0)])&&(it=!0),!it&&lt(ut._any)&&(it=!0)),st&&(it=!0),it&&ot&&g.stopPropagation(),it}class RectangleMarker{constructor(g,j,_e,et,tt){this.className=g,this.left=j,this.top=_e,this.width=et,this.height=tt}draw(){let g=document.createElement("div");return g.className=this.className,this.adjust(g),g}update(g,j){return j.className!=this.className?!1:(this.adjust(g),!0)}adjust(g){g.style.left=this.left+"px",g.style.top=this.top+"px",this.width!=null&&(g.style.width=this.width+"px"),g.style.height=this.height+"px"}eq(g){return this.left==g.left&&this.top==g.top&&this.width==g.width&&this.height==g.height&&this.className==g.className}static forRange(g,j,_e){if(_e.empty){let et=g.coordsAtPos(_e.head,_e.assoc||1);if(!et)return[];let tt=getBase(g);return[new RectangleMarker(j,et.left-tt.left,et.top-tt.top,null,et.bottom-et.top)]}else return rectanglesForRange(g,j,_e)}}function getBase($){let g=$.scrollDOM.getBoundingClientRect();return{left:($.textDirection==Direction.LTR?g.left:g.right-$.scrollDOM.clientWidth*$.scaleX)-$.scrollDOM.scrollLeft*$.scaleX,top:g.top-$.scrollDOM.scrollTop*$.scaleY}}function wrappedLine($,g,j){let _e=EditorSelection.cursor(g);return{from:Math.max(j.from,$.moveToLineBoundary(_e,!1,!0).from),to:Math.min(j.to,$.moveToLineBoundary(_e,!0,!0).from),type:BlockType.Text}}function rectanglesForRange($,g,j){if(j.to<=$.viewport.from||j.from>=$.viewport.to)return[];let _e=Math.max(j.from,$.viewport.from),et=Math.min(j.to,$.viewport.to),tt=$.textDirection==Direction.LTR,nt=$.contentDOM,rt=nt.getBoundingClientRect(),it=getBase($),st=nt.querySelector(".cm-line"),ot=st&&window.getComputedStyle(st),at=rt.left+(ot?parseInt(ot.paddingLeft)+Math.min(0,parseInt(ot.textIndent)):0),lt=rt.right-(ot?parseInt(ot.paddingRight):0),ut=blockAt($,_e),ht=blockAt($,et),ft=ut.type==BlockType.Text?ut:null,gt=ht.type==BlockType.Text?ht:null;if(ft&&($.lineWrapping||ut.widgetLineBreaks)&&(ft=wrappedLine($,_e,ft)),gt&&($.lineWrapping||ht.widgetLineBreaks)&&(gt=wrappedLine($,et,gt)),ft&&gt&&ft.from==gt.from)return mt(yt(j.from,j.to,ft));{let Ct=ft?yt(j.from,null,ft):Et(ut,!1),kt=gt?yt(null,j.to,gt):Et(ht,!0),St=[];return(ft||ut).to<(gt||ht).from-(ft&&gt?1:0)||ut.widgetLineBreaks>1&&Ct.bottom+$.defaultLineHeight/2<kt.top?St.push(dt(at,Ct.bottom,lt,kt.top)):Ct.bottom<kt.top&&$.elementAtHeight((Ct.bottom+kt.top)/2).type==BlockType.Text&&(Ct.bottom=kt.top=(Ct.bottom+kt.top)/2),mt(Ct).concat(St).concat(mt(kt))}function dt(Ct,kt,St,Pt){return new RectangleMarker(g,Ct-it.left,kt-it.top-.01,St-Ct,Pt-kt+.01)}function mt({top:Ct,bottom:kt,horizontal:St}){let Pt=[];for(let Bt=0;Bt<St.length;Bt+=2)Pt.push(dt(St[Bt],Ct,St[Bt+1],kt));return Pt}function yt(Ct,kt,St){let Pt=1e9,Bt=-1e9,xt=[];function bt(Ot,jt,Yt,Ut,Nt){let It=$.coordsAtPos(Ot,Ot==St.to?-2:2),Ht=$.coordsAtPos(Yt,Yt==St.from?2:-2);!It||!Ht||(Pt=Math.min(It.top,Ht.top,Pt),Bt=Math.max(It.bottom,Ht.bottom,Bt),Nt==Direction.LTR?xt.push(tt&&jt?at:It.left,tt&&Ut?lt:Ht.right):xt.push(!tt&&Ut?at:Ht.left,!tt&&jt?lt:It.right))}let $t=Ct??St.from,Mt=kt??St.to;for(let Ot of $.visibleRanges)if(Ot.to>$t&&Ot.from<Mt)for(let jt=Math.max(Ot.from,$t),Yt=Math.min(Ot.to,Mt);;){let Ut=$.state.doc.lineAt(jt);for(let Nt of $.bidiSpans(Ut)){let It=Nt.from+Ut.from,Ht=Nt.to+Ut.from;if(It>=Yt)break;Ht>jt&&bt(Math.max(It,jt),Ct==null&&It<=$t,Math.min(Ht,Yt),kt==null&&Ht>=Mt,Nt.dir)}if(jt=Ut.to+1,jt>=Yt)break}return xt.length==0&&bt($t,Ct==null,Mt,kt==null,$.textDirection),{top:Pt,bottom:Bt,horizontal:xt}}function Et(Ct,kt){let St=rt.top+(kt?Ct.top:Ct.bottom);return{top:St,bottom:St,horizontal:[]}}}function sameMarker($,g){return $.constructor==g.constructor&&$.eq(g)}class LayerView{constructor(g,j){this.view=g,this.layer=j,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=g.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),j.above&&this.dom.classList.add("cm-layer-above"),j.class&&this.dom.classList.add(j.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(g.state),g.requestMeasure(this.measureReq),j.mount&&j.mount(this.dom,g)}update(g){g.startState.facet(layerOrder)!=g.state.facet(layerOrder)&&this.setOrder(g.state),(this.layer.update(g,this.dom)||g.geometryChanged)&&(this.scale(),g.view.requestMeasure(this.measureReq))}setOrder(g){let j=0,_e=g.facet(layerOrder);for(;j<_e.length&&_e[j]!=this.layer;)j++;this.dom.style.zIndex=String((this.layer.above?150:-1)-j)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:g,scaleY:j}=this.view;(g!=this.scaleX||j!=this.scaleY)&&(this.scaleX=g,this.scaleY=j,this.dom.style.transform=`scale(${1/g}, ${1/j})`)}draw(g){if(g.length!=this.drawn.length||g.some((j,_e)=>!sameMarker(j,this.drawn[_e]))){let j=this.dom.firstChild,_e=0;for(let et of g)et.update&&j&&et.constructor&&this.drawn[_e].constructor&&et.update(j,this.drawn[_e])?(j=j.nextSibling,_e++):this.dom.insertBefore(et.draw(),j);for(;j;){let et=j.nextSibling;j.remove(),j=et}this.drawn=g}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer($){return[ViewPlugin.define(g=>new LayerView(g,$)),layerOrder.of($)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine($){return combineConfig($,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(g,j)=>Math.min(g,j),drawRangeCursor:(g,j)=>g||j})}});function drawSelection($={}){return[selectionConfig.of($),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged($){return $.startState.facet(selectionConfig)!=$.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers($){let{state:g}=$,j=g.facet(selectionConfig),_e=[];for(let et of g.selection.ranges){let tt=et==g.selection.main;if(et.empty?!tt||CanHidePrimary:j.drawRangeCursor){let nt=tt?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",rt=et.empty?et:EditorSelection.cursor(et.head,et.head>et.anchor?-1:1);for(let it of RectangleMarker.forRange($,nt,rt))_e.push(it)}}return _e},update($,g){$.transactions.some(_e=>_e.selection)&&(g.style.animationName=g.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let j=configChanged($);return j&&setBlinkRate($.state,g),$.docChanged||$.selectionSet||j},mount($,g){setBlinkRate(g.state,$)},class:"cm-cursorLayer"});function setBlinkRate($,g){g.style.animationDuration=$.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers($){return $.state.selection.ranges.map(g=>g.empty?[]:RectangleMarker.forRange($,"cm-selectionBackground",g)).reduce((g,j)=>g.concat(j))},update($,g){return $.docChanged||$.selectionSet||$.viewportChanged||configChanged($)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important",themeSpec[".cm-content"]={caretColor:"transparent !important"});const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map($,g){return $==null?null:g.mapPos($)}}),dropCursorPos=StateField.define({create(){return null},update($,g){return $!=null&&($=g.changes.mapPos($)),g.effects.reduce((j,_e)=>_e.is(setDropCursorPos)?_e.value:j,$)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor($){this.view=$,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update($){var g;let j=$.state.field(dropCursorPos);j==null?this.cursor!=null&&((g=this.cursor)===null||g===void 0||g.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),($.startState.field(dropCursorPos)!=j||$.docChanged||$.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:$}=this,g=$.state.field(dropCursorPos),j=g!=null&&$.coordsAtPos(g);if(!j)return null;let _e=$.scrollDOM.getBoundingClientRect();return{left:j.left-_e.left+$.scrollDOM.scrollLeft*$.scaleX,top:j.top-_e.top+$.scrollDOM.scrollTop*$.scaleY,height:j.bottom-j.top}}drawCursor($){if(this.cursor){let{scaleX:g,scaleY:j}=this.view;$?(this.cursor.style.left=$.left/g+"px",this.cursor.style.top=$.top/j+"px",this.cursor.style.height=$.height/j+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos($){this.view.state.field(dropCursorPos)!=$&&this.view.dispatch({effects:setDropCursorPos.of($)})}},{eventObservers:{dragover($){this.setDropPos(this.view.posAtCoords({x:$.clientX,y:$.clientY}))},dragleave($){($.target==this.view.contentDOM||!this.view.contentDOM.contains($.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches($,g,j,_e,et){g.lastIndex=0;for(let tt=$.iterRange(j,_e),nt=j,rt;!tt.next().done;nt+=tt.value.length)if(!tt.lineBreak)for(;rt=g.exec(tt.value);)et(nt+rt.index,rt)}function matchRanges($,g){let j=$.visibleRanges;if(j.length==1&&j[0].from==$.viewport.from&&j[0].to==$.viewport.to)return j;let _e=[];for(let{from:et,to:tt}of j)et=Math.max($.state.doc.lineAt(et).from,et-g),tt=Math.min($.state.doc.lineAt(tt).to,tt+g),_e.length&&_e[_e.length-1].to>=et?_e[_e.length-1].to=tt:_e.push({from:et,to:tt});return _e}class MatchDecorator{constructor(g){const{regexp:j,decoration:_e,decorate:et,boundary:tt,maxLength:nt=1e3}=g;if(!j.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=j,et)this.addMatch=(rt,it,st,ot)=>et(ot,st,st+rt[0].length,rt,it);else if(typeof _e=="function")this.addMatch=(rt,it,st,ot)=>{let at=_e(rt,it,st);at&&ot(st,st+rt[0].length,at)};else if(_e)this.addMatch=(rt,it,st,ot)=>ot(st,st+rt[0].length,_e);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=tt,this.maxLength=nt}createDeco(g){let j=new RangeSetBuilder,_e=j.add.bind(j);for(let{from:et,to:tt}of matchRanges(g,this.maxLength))iterMatches(g.state.doc,this.regexp,et,tt,(nt,rt)=>this.addMatch(rt,g,nt,_e));return j.finish()}updateDeco(g,j){let _e=1e9,et=-1;return g.docChanged&&g.changes.iterChanges((tt,nt,rt,it)=>{it>g.view.viewport.from&&rt<g.view.viewport.to&&(_e=Math.min(rt,_e),et=Math.max(it,et))}),g.viewportChanged||et-_e>1e3?this.createDeco(g.view):et>-1?this.updateRange(g.view,j.map(g.changes),_e,et):j}updateRange(g,j,_e,et){for(let tt of g.visibleRanges){let nt=Math.max(tt.from,_e),rt=Math.min(tt.to,et);if(rt>nt){let it=g.state.doc.lineAt(nt),st=it.to<rt?g.state.doc.lineAt(rt):it,ot=Math.max(tt.from,it.from),at=Math.min(tt.to,st.to);if(this.boundary){for(;nt>it.from;nt--)if(this.boundary.test(it.text[nt-1-it.from])){ot=nt;break}for(;rt<st.to;rt++)if(this.boundary.test(st.text[rt-st.from])){at=rt;break}}let lt=[],ut,ht=(ft,gt,dt)=>lt.push(dt.range(ft,gt));if(it==st)for(this.regexp.lastIndex=ot-it.from;(ut=this.regexp.exec(it.text))&&ut.index<at-it.from;)this.addMatch(ut,g,ut.index+it.from,ht);else iterMatches(g.state.doc,this.regexp,ot,at,(ft,gt)=>this.addMatch(gt,g,ft,ht));j=j.update({filterFrom:ot,filterTo:at,filter:(ft,gt)=>ft<ot||gt>at,add:lt})}}return j}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var $;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let g=document.body.style;_supportsTabSize=(($=g.tabSize)!==null&&$!==void 0?$:g.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine($){let g=combineConfig($,{render:null,specialChars:Specials,addSpecialChars:null});return(g.replaceTabs=!supportsTabSize())&&(g.specialChars=new RegExp("	|"+g.specialChars.source,UnicodeRegexpSupport)),g.addSpecialChars&&(g.specialChars=new RegExp(g.specialChars.source+"|"+g.addSpecialChars.source,UnicodeRegexpSupport)),g}});function highlightSpecialChars($={}){return[specialCharConfig.of($),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor($){this.view=$,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator($.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco($)}makeDecorator($){return new MatchDecorator({regexp:$.specialChars,decoration:(g,j,_e)=>{let{doc:et}=j.state,tt=codePointAt(g[0],0);if(tt==9){let nt=et.lineAt(_e),rt=j.state.tabSize,it=countColumn(nt.text,rt,_e-nt.from);return Decoration.replace({widget:new TabWidget((rt-it%rt)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[tt]||(this.decorationCache[tt]=Decoration.replace({widget:new SpecialCharWidget($,tt)}))},boundary:$.replaceTabs?void 0:/[^]/})}update($){let g=$.state.facet(specialCharConfig);$.startState.facet(specialCharConfig)!=g?(this.decorator=this.makeDecorator(g),this.decorations=this.decorator.createDeco($.view)):this.decorations=this.decorator.updateDeco($,this.decorations)}},{decorations:$=>$.decorations}))}const DefaultPlaceholder="•";function placeholder$1($){return $>=32?DefaultPlaceholder:$==10?"␤":String.fromCharCode(9216+$)}class SpecialCharWidget extends WidgetType{constructor(g,j){super(),this.options=g,this.code=j}eq(g){return g.code==this.code}toDOM(g){let j=placeholder$1(this.code),_e=g.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),et=this.options.render&&this.options.render(this.code,_e,j);if(et)return et;let tt=document.createElement("span");return tt.textContent=j,tt.title=_e,tt.setAttribute("aria-label",_e),tt.className="cm-specialChar",tt}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(g){super(),this.width=g}eq(g){return g.width==this.width}toDOM(){let g=document.createElement("span");return g.textContent="	",g.className="cm-tab",g.style.width=this.width+"px",g}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor($){this.decorations=this.getDeco($)}update($){($.docChanged||$.selectionSet)&&(this.decorations=this.getDeco($.view))}getDeco($){let g=-1,j=[];for(let _e of $.state.selection.ranges){let et=$.lineBlockAt(_e.head);et.from>g&&(j.push(lineDeco.range(et.from)),g=et.from)}return Decoration.set(j)}},{decorations:$=>$.decorations});class Placeholder extends WidgetType{constructor(g){super(),this.content=g}toDOM(){let g=document.createElement("span");return g.className="cm-placeholder",g.style.pointerEvents="none",g.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?g.setAttribute("aria-label","placeholder "+this.content):g.setAttribute("aria-hidden","true"),g}coordsAt(g){let j=g.firstChild?clientRectsFor(g.firstChild):[];if(!j.length)return null;let _e=window.getComputedStyle(g.parentNode),et=flattenRect(j[0],_e.direction!="rtl"),tt=parseInt(_e.lineHeight);return et.bottom-et.top>tt*1.5?{left:et.left,right:et.right,top:et.top,bottom:et.top+tt}:et}ignoreEvent(){return!1}}function placeholder($){return ViewPlugin.fromClass(class{constructor(g){this.view=g,this.placeholder=$?Decoration.set([Decoration.widget({widget:new Placeholder($),side:1}).range(0)]):Decoration.none}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:g=>g.decorations})}const MaxOff=2e3;function rectangleFor($,g,j){let _e=Math.min(g.line,j.line),et=Math.max(g.line,j.line),tt=[];if(g.off>MaxOff||j.off>MaxOff||g.col<0||j.col<0){let nt=Math.min(g.off,j.off),rt=Math.max(g.off,j.off);for(let it=_e;it<=et;it++){let st=$.doc.line(it);st.length<=rt&&tt.push(EditorSelection.range(st.from+nt,st.to+rt))}}else{let nt=Math.min(g.col,j.col),rt=Math.max(g.col,j.col);for(let it=_e;it<=et;it++){let st=$.doc.line(it),ot=findColumn(st.text,nt,$.tabSize,!0);if(ot<0)tt.push(EditorSelection.cursor(st.to));else{let at=findColumn(st.text,rt,$.tabSize);tt.push(EditorSelection.range(st.from+ot,st.from+at))}}}return tt}function absoluteColumn($,g){let j=$.coordsAtPos($.viewport.from);return j?Math.round(Math.abs((j.left-g)/$.defaultCharacterWidth)):-1}function getPos($,g){let j=$.posAtCoords({x:g.clientX,y:g.clientY},!1),_e=$.state.doc.lineAt(j),et=j-_e.from,tt=et>MaxOff?-1:et==_e.length?absoluteColumn($,g.clientX):countColumn(_e.text,$.state.tabSize,j-_e.from);return{line:_e.number,col:tt,off:et}}function rectangleSelectionStyle($,g){let j=getPos($,g),_e=$.state.selection;return j?{update(et){if(et.docChanged){let tt=et.changes.mapPos(et.startState.doc.line(j.line).from),nt=et.state.doc.lineAt(tt);j={line:nt.number,col:j.col,off:Math.min(j.off,nt.length)},_e=_e.map(et.changes)}},get(et,tt,nt){let rt=getPos($,et);if(!rt)return _e;let it=rectangleFor($.state,j,rt);return it.length?nt?EditorSelection.create(it.concat(_e.ranges)):EditorSelection.create(it):_e}}:null}function rectangularSelection($){let g=($==null?void 0:$.eventFilter)||(j=>j.altKey&&j.button==0);return EditorView.mouseSelectionStyle.of((j,_e)=>g(_e)?rectangleSelectionStyle(j,_e):null)}const keys$1={Alt:[18,$=>!!$.altKey],Control:[17,$=>!!$.ctrlKey],Shift:[16,$=>!!$.shiftKey],Meta:[91,$=>!!$.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor($={}){let[g,j]=keys$1[$.key||"Alt"],_e=ViewPlugin.fromClass(class{constructor(et){this.view=et,this.isDown=!1}set(et){this.isDown!=et&&(this.isDown=et,this.view.update([]))}},{eventObservers:{keydown(et){this.set(et.keyCode==g||j(et))},keyup(et){(et.keyCode==g||!j(et))&&this.set(!1)},mousemove(et){this.set(j(et))}}});return[_e,EditorView.contentAttributes.of(et=>{var tt;return!((tt=et.plugin(_e))===null||tt===void 0)&&tt.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(g,j,_e){this.facet=j,this.createTooltipView=_e,this.input=g.state.facet(j),this.tooltips=this.input.filter(et=>et),this.tooltipViews=this.tooltips.map(_e)}update(g,j){var _e;let et=g.state.facet(this.facet),tt=et.filter(it=>it);if(et===this.input){for(let it of this.tooltipViews)it.update&&it.update(g);return!1}let nt=[],rt=j?[]:null;for(let it=0;it<tt.length;it++){let st=tt[it],ot=-1;if(st){for(let at=0;at<this.tooltips.length;at++){let lt=this.tooltips[at];lt&&lt.create==st.create&&(ot=at)}if(ot<0)nt[it]=this.createTooltipView(st),rt&&(rt[it]=!!st.above);else{let at=nt[it]=this.tooltipViews[ot];rt&&(rt[it]=j[ot]),at.update&&at.update(g)}}}for(let it of this.tooltipViews)nt.indexOf(it)<0&&(it.dom.remove(),(_e=it.destroy)===null||_e===void 0||_e.call(it));return j&&(rt.forEach((it,st)=>j[st]=it),j.length=rt.length),this.input=et,this.tooltips=tt,this.tooltipViews=nt,!0}}function windowSpace($){let{win:g}=$;return{top:0,left:0,bottom:g.innerHeight,right:g.innerWidth}}const tooltipConfig=Facet.define({combine:$=>{var g,j,_e;return{position:browser.ios?"absolute":((g=$.find(et=>et.position))===null||g===void 0?void 0:g.position)||"fixed",parent:((j=$.find(et=>et.parent))===null||j===void 0?void 0:j.parent)||null,tooltipSpace:((_e=$.find(et=>et.tooltipSpace))===null||_e===void 0?void 0:_e.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor($){this.view=$,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let g=$.state.facet(tooltipConfig);this.position=g.position,this.parent=g.parent,this.classes=$.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager($,showTooltip,j=>this.createTooltip(j)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(j=>{Date.now()>this.lastTransaction-50&&j.length>0&&j[j.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),$.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let $ of this.manager.tooltipViews)this.intersectionObserver.observe($.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update($){$.transactions.length&&(this.lastTransaction=Date.now());let g=this.manager.update($,this.above);g&&this.observeIntersection();let j=g||$.geometryChanged,_e=$.state.facet(tooltipConfig);if(_e.position!=this.position&&!this.madeAbsolute){this.position=_e.position;for(let et of this.manager.tooltipViews)et.dom.style.position=this.position;j=!0}if(_e.parent!=this.parent){this.parent&&this.container.remove(),this.parent=_e.parent,this.createContainer();for(let et of this.manager.tooltipViews)this.container.appendChild(et.dom);j=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);j&&this.maybeMeasure()}createTooltip($){let g=$.create(this.view);if(g.dom.classList.add("cm-tooltip"),$.arrow&&!g.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let j=document.createElement("div");j.className="cm-tooltip-arrow",g.dom.appendChild(j)}return g.dom.style.position=this.position,g.dom.style.top=Outside,g.dom.style.left="0px",this.container.appendChild(g.dom),g.mount&&g.mount(this.view),g}destroy(){var $,g;this.view.win.removeEventListener("resize",this.measureSoon);for(let j of this.manager.tooltipViews)j.dom.remove(),($=j.destroy)===null||$===void 0||$.call(j);this.parent&&this.container.remove(),(g=this.intersectionObserver)===null||g===void 0||g.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let $=this.view.dom.getBoundingClientRect(),g=1,j=1,_e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:et}=this.manager.tooltipViews[0];if(browser.gecko)_e=et.offsetParent!=this.container.ownerDocument.body;else if(et.style.top==Outside&&et.style.left=="0px"){let tt=et.getBoundingClientRect();_e=Math.abs(tt.top+1e4)>1||Math.abs(tt.left)>1}}if(_e||this.position=="absolute")if(this.parent){let et=this.parent.getBoundingClientRect();et.width&&et.height&&(g=et.width/this.parent.offsetWidth,j=et.height/this.parent.offsetHeight)}else({scaleX:g,scaleY:j}=this.view.viewState);return{editor:$,parent:this.parent?this.container.getBoundingClientRect():$,pos:this.manager.tooltips.map((et,tt)=>{let nt=this.manager.tooltipViews[tt];return nt.getCoords?nt.getCoords(et.pos):this.view.coordsAtPos(et.pos)}),size:this.manager.tooltipViews.map(({dom:et})=>et.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:g,scaleY:j,makeAbsolute:_e}}writeMeasure($){var g;if($.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let rt of this.manager.tooltipViews)rt.dom.style.position="absolute"}let{editor:j,space:_e,scaleX:et,scaleY:tt}=$,nt=[];for(let rt=0;rt<this.manager.tooltips.length;rt++){let it=this.manager.tooltips[rt],st=this.manager.tooltipViews[rt],{dom:ot}=st,at=$.pos[rt],lt=$.size[rt];if(!at||at.bottom<=Math.max(j.top,_e.top)||at.top>=Math.min(j.bottom,_e.bottom)||at.right<Math.max(j.left,_e.left)-.1||at.left>Math.min(j.right,_e.right)+.1){ot.style.top=Outside;continue}let ut=it.arrow?st.dom.querySelector(".cm-tooltip-arrow"):null,ht=ut?7:0,ft=lt.right-lt.left,gt=(g=knownHeight.get(st))!==null&&g!==void 0?g:lt.bottom-lt.top,dt=st.offset||noOffset,mt=this.view.textDirection==Direction.LTR,yt=lt.width>_e.right-_e.left?mt?_e.left:_e.right-lt.width:mt?Math.min(at.left-(ut?14:0)+dt.x,_e.right-ft):Math.max(_e.left,at.left-ft+(ut?14:0)-dt.x),Et=this.above[rt];!it.strictSide&&(Et?at.top-(lt.bottom-lt.top)-dt.y<_e.top:at.bottom+(lt.bottom-lt.top)+dt.y>_e.bottom)&&Et==_e.bottom-at.bottom>at.top-_e.top&&(Et=this.above[rt]=!Et);let Ct=(Et?at.top-_e.top:_e.bottom-at.bottom)-ht;if(Ct<gt&&st.resize!==!1){if(Ct<this.view.defaultLineHeight){ot.style.top=Outside;continue}knownHeight.set(st,gt),ot.style.height=(gt=Ct)/tt+"px"}else ot.style.height&&(ot.style.height="");let kt=Et?at.top-gt-ht-dt.y:at.bottom+ht+dt.y,St=yt+ft;if(st.overlap!==!0)for(let Pt of nt)Pt.left<St&&Pt.right>yt&&Pt.top<kt+gt&&Pt.bottom>kt&&(kt=Et?Pt.top-gt-2-ht:Pt.bottom+ht+2);if(this.position=="absolute"?(ot.style.top=(kt-$.parent.top)/tt+"px",ot.style.left=(yt-$.parent.left)/et+"px"):(ot.style.top=kt/tt+"px",ot.style.left=yt/et+"px"),ut){let Pt=at.left+(mt?dt.x:-dt.x)-(yt+14-7);ut.style.left=Pt/et+"px"}st.overlap!==!0&&nt.push({left:yt,top:kt,right:St,bottom:kt+gt}),ot.classList.toggle("cm-tooltip-above",Et),ot.classList.toggle("cm-tooltip-below",!Et),st.positioned&&st.positioned($.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let $ of this.manager.tooltipViews)$.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define();class HoverTooltipHost{static create(g){return new HoverTooltipHost(g)}constructor(g){this.view=g,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(g,showHoverTooltip,j=>this.createHostedView(j))}createHostedView(g){let j=g.create(this.view);return j.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(j.dom),this.mounted&&j.mount&&j.mount(this.view),j}mount(g){for(let j of this.manager.tooltipViews)j.mount&&j.mount(g);this.mounted=!0}positioned(g){for(let j of this.manager.tooltipViews)j.positioned&&j.positioned(g)}update(g){this.manager.update(g)}destroy(){var g;for(let j of this.manager.tooltipViews)(g=j.destroy)===null||g===void 0||g.call(j)}passProp(g){let j;for(let _e of this.manager.tooltipViews){let et=_e[g];if(et!==void 0){if(j===void 0)j=et;else if(j!==et)return}}return j}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],$=>{let g=$.facet(showHoverTooltip).filter(j=>j);return g.length===0?null:{pos:Math.min(...g.map(j=>j.pos)),end:Math.max(...g.map(j=>{var _e;return(_e=j.end)!==null&&_e!==void 0?_e:j.pos})),create:HoverTooltipHost.create,above:g[0].above,arrow:g.some(j=>j.arrow)}});class HoverPlugin{constructor(g,j,_e,et,tt){this.view=g,this.source=j,this.field=_e,this.setHover=et,this.hoverTime=tt,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:g.dom,time:0},this.checkHover=this.checkHover.bind(this),g.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),g.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let g=Date.now()-this.lastMove.time;g<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-g):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:g,lastMove:j}=this,_e=g.docView.nearest(j.target);if(!_e)return;let et,tt=1;if(_e instanceof WidgetView)et=_e.posAtStart;else{if(et=g.posAtCoords(j),et==null)return;let rt=g.coordsAtPos(et);if(!rt||j.y<rt.top||j.y>rt.bottom||j.x<rt.left-g.defaultCharacterWidth||j.x>rt.right+g.defaultCharacterWidth)return;let it=g.bidiSpans(g.state.doc.lineAt(et)).find(ot=>ot.from<=et&&ot.to>=et),st=it&&it.dir==Direction.RTL?-1:1;tt=j.x<rt.left?-st:st}let nt=this.source(g,et,tt);if(nt!=null&&nt.then){let rt=this.pending={pos:et};nt.then(it=>{this.pending==rt&&(this.pending=null,it&&g.dispatch({effects:this.setHover.of(it)}))},it=>logException(g.state,it,"hover tooltip"))}else nt&&g.dispatch({effects:this.setHover.of(nt)})}get tooltip(){let g=this.view.plugin(tooltipPlugin),j=g?g.manager.tooltips.findIndex(_e=>_e.create==HoverTooltipHost.create):-1;return j>-1?g.manager.tooltipViews[j]:null}mousemove(g){var j;this.lastMove={x:g.clientX,y:g.clientY,target:g.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:_e,tooltip:et}=this;if(_e&&et&&!isInTooltip(et.dom,g)||this.pending){let{pos:tt}=_e||this.pending,nt=(j=_e==null?void 0:_e.end)!==null&&j!==void 0?j:tt;(tt==nt?this.view.posAtCoords(this.lastMove)!=tt:!isOverRange(this.view,tt,nt,g.clientX,g.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(g){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:j}=this;if(j){let{tooltip:_e}=this;_e&&_e.dom.contains(g.relatedTarget)?this.watchTooltipLeave(_e.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(g){let j=_e=>{g.removeEventListener("mouseleave",j),this.active&&!this.view.dom.contains(_e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};g.addEventListener("mouseleave",j)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip($,g){let j=$.getBoundingClientRect();return g.clientX>=j.left-tooltipMargin&&g.clientX<=j.right+tooltipMargin&&g.clientY>=j.top-tooltipMargin&&g.clientY<=j.bottom+tooltipMargin}function isOverRange($,g,j,_e,et,tt){let nt=$.scrollDOM.getBoundingClientRect(),rt=$.documentTop+$.documentPadding.top+$.contentHeight;if(nt.left>_e||nt.right<_e||nt.top>et||Math.min(nt.bottom,rt)<et)return!1;let it=$.posAtCoords({x:_e,y:et},!1);return it>=g&&it<=j}function hoverTooltip($,g={}){let j=StateEffect.define(),_e=StateField.define({create(){return null},update(et,tt){if(et&&(g.hideOnChange&&(tt.docChanged||tt.selection)||g.hideOn&&g.hideOn(tt,et)))return null;if(et&&tt.docChanged){let nt=tt.changes.mapPos(et.pos,-1,MapMode.TrackDel);if(nt==null)return null;let rt=Object.assign(Object.create(null),et);rt.pos=nt,et.end!=null&&(rt.end=tt.changes.mapPos(et.end)),et=rt}for(let nt of tt.effects)nt.is(j)&&(et=nt.value),nt.is(closeHoverTooltipEffect)&&(et=null);return et},provide:et=>showHoverTooltip.from(et)});return[_e,ViewPlugin.define(et=>new HoverPlugin(et,$,_e,j,g.hoverTime||300)),showHoverTooltipHost]}function getTooltip($,g){let j=$.plugin(tooltipPlugin);if(!j)return null;let _e=j.manager.tooltips.indexOf(g);return _e<0?null:j.manager.tooltipViews[_e]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine($){let g,j;for(let _e of $)g=g||_e.topContainer,j=j||_e.bottomContainer;return{topContainer:g,bottomContainer:j}}});function getPanel($,g){let j=$.plugin(panelPlugin),_e=j?j.specs.indexOf(g):-1;return _e>-1?j.panels[_e]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor($){this.input=$.state.facet(showPanel),this.specs=this.input.filter(j=>j),this.panels=this.specs.map(j=>j($));let g=$.state.facet(panelConfig);this.top=new PanelGroup($,!0,g.topContainer),this.bottom=new PanelGroup($,!1,g.bottomContainer),this.top.sync(this.panels.filter(j=>j.top)),this.bottom.sync(this.panels.filter(j=>!j.top));for(let j of this.panels)j.dom.classList.add("cm-panel"),j.mount&&j.mount()}update($){let g=$.state.facet(panelConfig);this.top.container!=g.topContainer&&(this.top.sync([]),this.top=new PanelGroup($.view,!0,g.topContainer)),this.bottom.container!=g.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup($.view,!1,g.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let j=$.state.facet(showPanel);if(j!=this.input){let _e=j.filter(it=>it),et=[],tt=[],nt=[],rt=[];for(let it of _e){let st=this.specs.indexOf(it),ot;st<0?(ot=it($.view),rt.push(ot)):(ot=this.panels[st],ot.update&&ot.update($)),et.push(ot),(ot.top?tt:nt).push(ot)}this.specs=_e,this.panels=et,this.top.sync(tt),this.bottom.sync(nt);for(let it of rt)it.dom.classList.add("cm-panel"),it.mount&&it.mount()}else for(let _e of this.panels)_e.update&&_e.update($)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:$=>EditorView.scrollMargins.of(g=>{let j=g.plugin($);return j&&{top:j.top.scrollMargin(),bottom:j.bottom.scrollMargin()}})});class PanelGroup{constructor(g,j,_e){this.view=g,this.top=j,this.container=_e,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(g){for(let j of this.panels)j.destroy&&g.indexOf(j)<0&&j.destroy();this.panels=g,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let j=this.container||this.view.dom;j.insertBefore(this.dom,this.top?j.firstChild:null)}let g=this.dom.firstChild;for(let j of this.panels)if(j.dom.parentNode==this.dom){for(;g!=j.dom;)g=rm(g);g=g.nextSibling}else this.dom.insertBefore(j.dom,g);for(;g;)g=rm(g)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let g of this.classes.split(" "))g&&this.container.classList.remove(g);for(let g of(this.classes=this.view.themeClasses).split(" "))g&&this.container.classList.add(g)}}}function rm($){let g=$.nextSibling;return $.remove(),g}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(g){return this==g||this.constructor==g.constructor&&this.eq(g)}eq(g){return!1}destroy(g){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter($){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$3),$))]}const unfixGutters=Facet.define({combine:$=>$.some(g=>g)});function gutters($){let g=[gutterView];return $&&$.fixed===!1&&g.push(unfixGutters.of(!0)),g}const gutterView=ViewPlugin.fromClass(class{constructor($){this.view=$,this.prevViewport=$.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=$.state.facet(activeGutters).map(g=>new SingleGutterView($,g));for(let g of this.gutters)this.dom.appendChild(g.dom);this.fixed=!$.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),$.scrollDOM.insertBefore(this.dom,$.contentDOM)}update($){if(this.updateGutters($)){let g=this.prevViewport,j=$.view.viewport,_e=Math.min(g.to,j.to)-Math.max(g.from,j.from);this.syncGutters(_e<(j.to-j.from)*.8)}$.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=$.view.viewport}syncGutters($){let g=this.dom.nextSibling;$&&this.dom.remove();let j=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),_e=[],et=this.gutters.map(tt=>new UpdateContext(tt,this.view.viewport,-this.view.documentPadding.top));for(let tt of this.view.viewportLineBlocks)if(_e.length&&(_e=[]),Array.isArray(tt.type)){let nt=!0;for(let rt of tt.type)if(rt.type==BlockType.Text&&nt){advanceCursor(j,_e,rt.from);for(let it of et)it.line(this.view,rt,_e);nt=!1}else if(rt.widget)for(let it of et)it.widget(this.view,rt)}else if(tt.type==BlockType.Text){advanceCursor(j,_e,tt.from);for(let nt of et)nt.line(this.view,tt,_e)}else if(tt.widget)for(let nt of et)nt.widget(this.view,tt);for(let tt of et)tt.finish();$&&this.view.scrollDOM.insertBefore(this.dom,g)}updateGutters($){let g=$.startState.facet(activeGutters),j=$.state.facet(activeGutters),_e=$.docChanged||$.heightChanged||$.viewportChanged||!RangeSet.eq($.startState.facet(gutterLineClass),$.state.facet(gutterLineClass),$.view.viewport.from,$.view.viewport.to);if(g==j)for(let et of this.gutters)et.update($)&&(_e=!0);else{_e=!0;let et=[];for(let tt of j){let nt=g.indexOf(tt);nt<0?et.push(new SingleGutterView(this.view,tt)):(this.gutters[nt].update($),et.push(this.gutters[nt]))}for(let tt of this.gutters)tt.dom.remove(),et.indexOf(tt)<0&&tt.destroy();for(let tt of et)this.dom.appendChild(tt.dom);this.gutters=et}return _e}destroy(){for(let $ of this.gutters)$.destroy();this.dom.remove()}},{provide:$=>EditorView.scrollMargins.of(g=>{let j=g.plugin($);return!j||j.gutters.length==0||!j.fixed?null:g.textDirection==Direction.LTR?{left:j.dom.offsetWidth*g.scaleX}:{right:j.dom.offsetWidth*g.scaleX}})});function asArray($){return Array.isArray($)?$:[$]}function advanceCursor($,g,j){for(;$.value&&$.from<=j;)$.from==j&&g.push($.value),$.next()}class UpdateContext{constructor(g,j,_e){this.gutter=g,this.height=_e,this.i=0,this.cursor=RangeSet.iter(g.markers,j.from)}addElement(g,j,_e){let{gutter:et}=this,tt=(j.top-this.height)/g.scaleY,nt=j.height/g.scaleY;if(this.i==et.elements.length){let rt=new GutterElement(g,nt,tt,_e);et.elements.push(rt),et.dom.appendChild(rt.dom)}else et.elements[this.i].update(g,nt,tt,_e);this.height=j.bottom,this.i++}line(g,j,_e){let et=[];advanceCursor(this.cursor,et,j.from),_e.length&&(et=et.concat(_e));let tt=this.gutter.config.lineMarker(g,j,et);tt&&et.unshift(tt);let nt=this.gutter;et.length==0&&!nt.config.renderEmptyElements||this.addElement(g,j,et)}widget(g,j){let _e=this.gutter.config.widgetMarker(g,j.widget,j);_e&&this.addElement(g,j,[_e])}finish(){let g=this.gutter;for(;g.elements.length>this.i;){let j=g.elements.pop();g.dom.removeChild(j.dom),j.destroy()}}}class SingleGutterView{constructor(g,j){this.view=g,this.config=j,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let _e in j.domEventHandlers)this.dom.addEventListener(_e,et=>{let tt=et.target,nt;if(tt!=this.dom&&this.dom.contains(tt)){for(;tt.parentNode!=this.dom;)tt=tt.parentNode;let it=tt.getBoundingClientRect();nt=(it.top+it.bottom)/2}else nt=et.clientY;let rt=g.lineBlockAtHeight(nt-g.documentTop);j.domEventHandlers[_e](g,rt,et)&&et.preventDefault()});this.markers=asArray(j.markers(g)),j.initialSpacer&&(this.spacer=new GutterElement(g,0,0,[j.initialSpacer(g)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(g){let j=this.markers;if(this.markers=asArray(this.config.markers(g.view)),this.spacer&&this.config.updateSpacer){let et=this.config.updateSpacer(this.spacer.markers[0],g);et!=this.spacer.markers[0]&&this.spacer.update(g.view,0,0,[et])}let _e=g.view.viewport;return!RangeSet.eq(this.markers,j,_e.from,_e.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(g):!1)}destroy(){for(let g of this.elements)g.destroy()}}class GutterElement{constructor(g,j,_e,et){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(g,j,_e,et)}update(g,j,_e,et){this.height!=j&&(this.height=j,this.dom.style.height=j+"px"),this.above!=_e&&(this.dom.style.marginTop=(this.above=_e)?_e+"px":""),sameMarkers(this.markers,et)||this.setMarkers(g,et)}setMarkers(g,j){let _e="cm-gutterElement",et=this.dom.firstChild;for(let tt=0,nt=0;;){let rt=nt,it=tt<j.length?j[tt++]:null,st=!1;if(it){let ot=it.elementClass;ot&&(_e+=" "+ot);for(let at=nt;at<this.markers.length;at++)if(this.markers[at].compare(it)){rt=at,st=!0;break}}else rt=this.markers.length;for(;nt<rt;){let ot=this.markers[nt++];if(ot.toDOM){ot.destroy(et);let at=et.nextSibling;et.remove(),et=at}}if(!it)break;it.toDOM&&(st?et=et.nextSibling:this.dom.insertBefore(it.toDOM(g),et)),st&&nt++}this.dom.className=_e,this.markers=j}destroy(){this.setMarkers(null,[])}}function sameMarkers($,g){if($.length!=g.length)return!1;for(let j=0;j<$.length;j++)if(!$[j].compare(g[j]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine($){return combineConfig($,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(g,j){let _e=Object.assign({},g);for(let et in j){let tt=_e[et],nt=j[et];_e[et]=tt?(rt,it,st)=>tt(rt,it,st)||nt(rt,it,st):nt}return _e}})}});class NumberMarker extends GutterMarker{constructor(g){super(),this.number=g}eq(g){return this.number==g.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber($,g){return $.state.facet(lineNumberConfig).formatNumber(g,$.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],$=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(g){return g.state.facet(lineNumberMarkers)},lineMarker(g,j,_e){return _e.some(et=>et.toDOM)?null:new NumberMarker(formatNumber(g,g.state.doc.lineAt(j.from).number))},widgetMarker:()=>null,lineMarkerChange:g=>g.startState.facet(lineNumberConfig)!=g.state.facet(lineNumberConfig),initialSpacer(g){return new NumberMarker(formatNumber(g,maxLineNumber(g.state.doc.lines)))},updateSpacer(g,j){let _e=formatNumber(j.view,maxLineNumber(j.view.state.doc.lines));return _e==g.number?g:new NumberMarker(_e)},domEventHandlers:$.facet(lineNumberConfig).domEventHandlers}));function lineNumbers($={}){return[lineNumberConfig.of($),gutters(),lineNumberGutter]}function maxLineNumber($){let g=9;for(;g<$;)g=g*10+9;return g}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],$=>{let g=[],j=-1;for(let _e of $.selection.ranges){let et=$.doc.lineAt(_e.head).from;et>j&&(j=et,g.push(activeLineGutterMarker.range(et)))}return RangeSet.of(g)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(g,j){this.from=g,this.to=j}}class NodeProp{constructor(g={}){this.id=nextPropID++,this.perNode=!!g.perNode,this.deserialize=g.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(g){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof g!="function"&&(g=NodeType.match(g)),j=>{let _e=g(j);return _e===void 0?null:[this,_e]}}}NodeProp.closedBy=new NodeProp({deserialize:$=>$.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:$=>$.split(" ")});NodeProp.group=new NodeProp({deserialize:$=>$.split(" ")});NodeProp.isolate=new NodeProp({deserialize:$=>{if($&&$!="rtl"&&$!="ltr"&&$!="auto")throw new RangeError("Invalid value for isolate: "+$);return $||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(g,j,_e){this.tree=g,this.overlay=j,this.parser=_e}static get(g){return g&&g.props&&g.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(g,j,_e,et=0){this.name=g,this.props=j,this.id=_e,this.flags=et}static define(g){let j=g.props&&g.props.length?Object.create(null):noProps,_e=(g.top?1:0)|(g.skipped?2:0)|(g.error?4:0)|(g.name==null?8:0),et=new NodeType(g.name||"",j,g.id,_e);if(g.props){for(let tt of g.props)if(Array.isArray(tt)||(tt=tt(et)),tt){if(tt[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");j[tt[0].id]=tt[1]}}return et}prop(g){return this.props[g.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(g){if(typeof g=="string"){if(this.name==g)return!0;let j=this.prop(NodeProp.group);return j?j.indexOf(g)>-1:!1}return this.id==g}static match(g){let j=Object.create(null);for(let _e in g)for(let et of _e.split(" "))j[et]=g[_e];return _e=>{for(let et=_e.prop(NodeProp.group),tt=-1;tt<(et?et.length:0);tt++){let nt=j[tt<0?_e.name:et[tt]];if(nt)return nt}}}}NodeType.none=new NodeType("",Object.create(null),0,8);const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function($){$[$.ExcludeBuffers=1]="ExcludeBuffers",$[$.IncludeAnonymous=2]="IncludeAnonymous",$[$.IgnoreMounts=4]="IgnoreMounts",$[$.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));let Tree$1=class Pr{constructor(g,j,_e,et,tt){if(this.type=g,this.children=j,this.positions=_e,this.length=et,this.props=null,tt&&tt.length){this.props=Object.create(null);for(let[nt,rt]of tt)this.props[typeof nt=="number"?nt:nt.id]=rt}}toString(){let g=MountedTree.get(this);if(g&&!g.overlay)return g.tree.toString();let j="";for(let _e of this.children){let et=_e.toString();et&&(j&&(j+=","),j+=et)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(j.length?"("+j+")":""):j}cursor(g=0){return new TreeCursor(this.topNode,g)}cursorAt(g,j=0,_e=0){let et=CachedNode.get(this)||this.topNode,tt=new TreeCursor(et);return tt.moveTo(g,j),CachedNode.set(this,tt._tree),tt}get topNode(){return new TreeNode(this,0,0,null)}resolve(g,j=0){let _e=resolveNode(CachedNode.get(this)||this.topNode,g,j,!1);return CachedNode.set(this,_e),_e}resolveInner(g,j=0){let _e=resolveNode(CachedInnerNode.get(this)||this.topNode,g,j,!0);return CachedInnerNode.set(this,_e),_e}resolveStack(g,j=0){return stackIterator(this,g,j)}iterate(g){let{enter:j,leave:_e,from:et=0,to:tt=this.length}=g,nt=g.mode||0,rt=(nt&IterMode.IncludeAnonymous)>0;for(let it=this.cursor(nt|IterMode.IncludeAnonymous);;){let st=!1;if(it.from<=tt&&it.to>=et&&(!rt&&it.type.isAnonymous||j(it)!==!1)){if(it.firstChild())continue;st=!0}for(;st&&_e&&(rt||!it.type.isAnonymous)&&_e(it),!it.nextSibling();){if(!it.parent())return;st=!0}}}prop(g){return g.perNode?this.props?this.props[g.id]:void 0:this.type.prop(g)}get propValues(){let g=[];if(this.props)for(let j in this.props)g.push([+j,this.props[j]]);return g}balance(g={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(j,_e,et)=>new Pr(this.type,j,_e,et,this.propValues),g.makeTree||((j,_e,et)=>new Pr(NodeType.none,j,_e,et)))}static build(g){return buildTree(g)}};Tree$1.empty=new Tree$1(NodeType.none,[],[],0);class FlatBufferCursor{constructor(g,j){this.buffer=g,this.index=j}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(g,j,_e){this.buffer=g,this.length=j,this.set=_e}get type(){return NodeType.none}toString(){let g=[];for(let j=0;j<this.buffer.length;)g.push(this.childString(j)),j=this.buffer[j+3];return g.join(",")}childString(g){let j=this.buffer[g],_e=this.buffer[g+3],et=this.set.types[j],tt=et.name;if(/\W/.test(tt)&&!et.isError&&(tt=JSON.stringify(tt)),g+=4,_e==g)return tt;let nt=[];for(;g<_e;)nt.push(this.childString(g)),g=this.buffer[g+3];return tt+"("+nt.join(",")+")"}findChild(g,j,_e,et,tt){let{buffer:nt}=this,rt=-1;for(let it=g;it!=j&&!(checkSide(tt,et,nt[it+1],nt[it+2])&&(rt=it,_e>0));it=nt[it+3]);return rt}slice(g,j,_e){let et=this.buffer,tt=new Uint16Array(j-g),nt=0;for(let rt=g,it=0;rt<j;){tt[it++]=et[rt++],tt[it++]=et[rt++]-_e;let st=tt[it++]=et[rt++]-_e;tt[it++]=et[rt++]-g,nt=Math.max(nt,st)}return new TreeBuffer(tt,nt,this.set)}}function checkSide($,g,j,_e){switch($){case-2:return j<g;case-1:return _e>=g&&j<g;case 0:return j<g&&_e>g;case 1:return j<=g&&_e>g;case 2:return _e>g;case 4:return!0}}function resolveNode($,g,j,_e){for(var et;$.from==$.to||(j<1?$.from>=g:$.from>g)||(j>-1?$.to<=g:$.to<g);){let nt=!_e&&$ instanceof TreeNode&&$.index<0?null:$.parent;if(!nt)return $;$=nt}let tt=_e?0:IterMode.IgnoreOverlays;if(_e)for(let nt=$,rt=nt.parent;rt;nt=rt,rt=nt.parent)nt instanceof TreeNode&&nt.index<0&&((et=rt.enter(g,j,tt))===null||et===void 0?void 0:et.from)!=nt.from&&($=rt);for(;;){let nt=$.enter(g,j,tt);if(!nt)return $;$=nt}}class BaseNode{cursor(g=0){return new TreeCursor(this,g)}getChild(g,j=null,_e=null){let et=getChildren(this,g,j,_e);return et.length?et[0]:null}getChildren(g,j=null,_e=null){return getChildren(this,g,j,_e)}resolve(g,j=0){return resolveNode(this,g,j,!1)}resolveInner(g,j=0){return resolveNode(this,g,j,!0)}matchContext(g){return matchNodeContext(this,g)}enterUnfinishedNodesBefore(g){let j=this.childBefore(g),_e=this;for(;j;){let et=j.lastChild;if(!et||et.to!=j.to)break;et.type.isError&&et.from==et.to?(_e=j,j=et.prevSibling):j=et}return _e}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(g,j,_e,et){super(),this._tree=g,this.from=j,this.index=_e,this._parent=et}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(g,j,_e,et,tt=0){for(let nt=this;;){for(let{children:rt,positions:it}=nt._tree,st=j>0?rt.length:-1;g!=st;g+=j){let ot=rt[g],at=it[g]+nt.from;if(checkSide(et,_e,at,at+ot.length)){if(ot instanceof TreeBuffer){if(tt&IterMode.ExcludeBuffers)continue;let lt=ot.findChild(0,ot.buffer.length,j,_e-at,et);if(lt>-1)return new BufferNode(new BufferContext(nt,ot,g,at),null,lt)}else if(tt&IterMode.IncludeAnonymous||!ot.type.isAnonymous||hasChild(ot)){let lt;if(!(tt&IterMode.IgnoreMounts)&&(lt=MountedTree.get(ot))&&!lt.overlay)return new TreeNode(lt.tree,at,g,nt);let ut=new TreeNode(ot,at,g,nt);return tt&IterMode.IncludeAnonymous||!ut.type.isAnonymous?ut:ut.nextChild(j<0?ot.children.length-1:0,j,_e,et)}}}if(tt&IterMode.IncludeAnonymous||!nt.type.isAnonymous||(nt.index>=0?g=nt.index+j:g=j<0?-1:nt._parent._tree.children.length,nt=nt._parent,!nt))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(g){return this.nextChild(0,1,g,2)}childBefore(g){return this.nextChild(this._tree.children.length-1,-1,g,-2)}enter(g,j,_e=0){let et;if(!(_e&IterMode.IgnoreOverlays)&&(et=MountedTree.get(this._tree))&&et.overlay){let tt=g-this.from;for(let{from:nt,to:rt}of et.overlay)if((j>0?nt<=tt:nt<tt)&&(j<0?rt>=tt:rt>tt))return new TreeNode(et.tree,et.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,g,j,_e)}nextSignificantParent(){let g=this;for(;g.type.isAnonymous&&g._parent;)g=g._parent;return g}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren($,g,j,_e){let et=$.cursor(),tt=[];if(!et.firstChild())return tt;if(j!=null){for(;!et.type.is(j);)if(!et.nextSibling())return tt}for(;;){if(_e!=null&&et.type.is(_e))return tt;if(et.type.is(g)&&tt.push(et.node),!et.nextSibling())return _e==null?tt:[]}}function matchNodeContext($,g,j=g.length-1){for(let _e=$.parent;j>=0;_e=_e.parent){if(!_e)return!1;if(!_e.type.isAnonymous){if(g[j]&&g[j]!=_e.name)return!1;j--}}return!0}class BufferContext{constructor(g,j,_e,et){this.parent=g,this.buffer=j,this.index=_e,this.start=et}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(g,j,_e){super(),this.context=g,this._parent=j,this.index=_e,this.type=g.buffer.set.types[g.buffer.buffer[_e]]}child(g,j,_e){let{buffer:et}=this.context,tt=et.findChild(this.index+4,et.buffer[this.index+3],g,j-this.context.start,_e);return tt<0?null:new BufferNode(this.context,this,tt)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(g){return this.child(1,g,2)}childBefore(g){return this.child(-1,g,-2)}enter(g,j,_e=0){if(_e&IterMode.ExcludeBuffers)return null;let{buffer:et}=this.context,tt=et.findChild(this.index+4,et.buffer[this.index+3],j>0?1:-1,g-this.context.start,j);return tt<0?null:new BufferNode(this.context,this,tt)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(g){return this._parent?null:this.context.parent.nextChild(this.context.index+g,g,0,4)}get nextSibling(){let{buffer:g}=this.context,j=g.buffer[this.index+3];return j<(this._parent?g.buffer[this._parent.index+3]:g.buffer.length)?new BufferNode(this.context,this._parent,j):this.externalSibling(1)}get prevSibling(){let{buffer:g}=this.context,j=this._parent?this._parent.index+4:0;return this.index==j?this.externalSibling(-1):new BufferNode(this.context,this._parent,g.findChild(j,this.index,-1,0,4))}get tree(){return null}toTree(){let g=[],j=[],{buffer:_e}=this.context,et=this.index+4,tt=_e.buffer[this.index+3];if(tt>et){let nt=_e.buffer[this.index+1];g.push(_e.slice(et,tt,nt)),j.push(0)}return new Tree$1(this.type,g,j,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack($){if(!$.length)return null;let g=0,j=$[0];for(let tt=1;tt<$.length;tt++){let nt=$[tt];(nt.from>j.from||nt.to<j.to)&&(j=nt,g=tt)}let _e=j instanceof TreeNode&&j.index<0?null:j.parent,et=$.slice();return _e?et[g]=_e:et.splice(g,1),new StackIterator(et,j)}class StackIterator{constructor(g,j){this.heads=g,this.node=j}get next(){return iterStack(this.heads)}}function stackIterator($,g,j){let _e=$.resolveInner(g,j),et=null;for(let tt=_e instanceof TreeNode?_e:_e.context.parent;tt;tt=tt.parent)if(tt.index<0){let nt=tt.parent;(et||(et=[_e])).push(nt.resolve(g,j)),tt=nt}else{let nt=MountedTree.get(tt.tree);if(nt&&nt.overlay&&nt.overlay[0].from<=g&&nt.overlay[nt.overlay.length-1].to>=g){let rt=new TreeNode(nt.tree,nt.overlay[0].from+tt.from,-1,tt);(et||(et=[_e])).push(resolveNode(rt,g,j,!1))}}return et?iterStack(et):_e}class TreeCursor{get name(){return this.type.name}constructor(g,j=0){if(this.mode=j,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,g instanceof TreeNode)this.yieldNode(g);else{this._tree=g.context.parent,this.buffer=g.context;for(let _e=g._parent;_e;_e=_e._parent)this.stack.unshift(_e.index);this.bufferNode=g,this.yieldBuf(g.index)}}yieldNode(g){return g?(this._tree=g,this.type=g.type,this.from=g.from,this.to=g.to,!0):!1}yieldBuf(g,j){this.index=g;let{start:_e,buffer:et}=this.buffer;return this.type=j||et.set.types[et.buffer[g]],this.from=_e+et.buffer[g+1],this.to=_e+et.buffer[g+2],!0}yield(g){return g?g instanceof TreeNode?(this.buffer=null,this.yieldNode(g)):(this.buffer=g.context,this.yieldBuf(g.index,g.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(g,j,_e){if(!this.buffer)return this.yield(this._tree.nextChild(g<0?this._tree._tree.children.length-1:0,g,j,_e,this.mode));let{buffer:et}=this.buffer,tt=et.findChild(this.index+4,et.buffer[this.index+3],g,j-this.buffer.start,_e);return tt<0?!1:(this.stack.push(this.index),this.yieldBuf(tt))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(g){return this.enterChild(1,g,2)}childBefore(g){return this.enterChild(-1,g,-2)}enter(g,j,_e=this.mode){return this.buffer?_e&IterMode.ExcludeBuffers?!1:this.enterChild(1,g,j):this.yield(this._tree.enter(g,j,_e))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let g=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(g)}sibling(g){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+g,g,0,4,this.mode)):!1;let{buffer:j}=this.buffer,_e=this.stack.length-1;if(g<0){let et=_e<0?0:this.stack[_e]+4;if(this.index!=et)return this.yieldBuf(j.findChild(et,this.index,-1,0,4))}else{let et=j.buffer[this.index+3];if(et<(_e<0?j.buffer.length:j.buffer[this.stack[_e]+3]))return this.yieldBuf(et)}return _e<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+g,g,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(g){let j,_e,{buffer:et}=this;if(et){if(g>0){if(this.index<et.buffer.buffer.length)return!1}else for(let tt=0;tt<this.index;tt++)if(et.buffer.buffer[tt+3]<this.index)return!1;({index:j,parent:_e}=et)}else({index:j,_parent:_e}=this._tree);for(;_e;{index:j,_parent:_e}=_e)if(j>-1)for(let tt=j+g,nt=g<0?-1:_e._tree.children.length;tt!=nt;tt+=g){let rt=_e._tree.children[tt];if(this.mode&IterMode.IncludeAnonymous||rt instanceof TreeBuffer||!rt.type.isAnonymous||hasChild(rt))return!1}return!0}move(g,j){if(j&&this.enterChild(g,0,4))return!0;for(;;){if(this.sibling(g))return!0;if(this.atLastNode(g)||!this.parent())return!1}}next(g=!0){return this.move(1,g)}prev(g=!0){return this.move(-1,g)}moveTo(g,j=0){for(;(this.from==this.to||(j<1?this.from>=g:this.from>g)||(j>-1?this.to<=g:this.to<g))&&this.parent(););for(;this.enterChild(1,g,j););return this}get node(){if(!this.buffer)return this._tree;let g=this.bufferNode,j=null,_e=0;if(g&&g.context==this.buffer)e:for(let et=this.index,tt=this.stack.length;tt>=0;){for(let nt=g;nt;nt=nt._parent)if(nt.index==et){if(et==this.index)return nt;j=nt,_e=tt+1;break e}et=this.stack[--tt]}for(let et=_e;et<this.stack.length;et++)j=new BufferNode(this.buffer,j,this.stack[et]);return this.bufferNode=new BufferNode(this.buffer,j,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(g,j){for(let _e=0;;){let et=!1;if(this.type.isAnonymous||g(this)!==!1){if(this.firstChild()){_e++;continue}this.type.isAnonymous||(et=!0)}for(;et&&j&&j(this),et=this.type.isAnonymous,!this.nextSibling();){if(!_e)return;this.parent(),_e--,et=!0}}}matchContext(g){if(!this.buffer)return matchNodeContext(this.node,g);let{buffer:j}=this.buffer,{types:_e}=j.set;for(let et=g.length-1,tt=this.stack.length-1;et>=0;tt--){if(tt<0)return matchNodeContext(this.node,g,et);let nt=_e[j.buffer[this.stack[tt]]];if(!nt.isAnonymous){if(g[et]&&g[et]!=nt.name)return!1;et--}}return!0}}function hasChild($){return $.children.some(g=>g instanceof TreeBuffer||!g.type.isAnonymous||hasChild(g))}function buildTree($){var g;let{buffer:j,nodeSet:_e,maxBufferLength:et=DefaultBufferLength,reused:tt=[],minRepeatType:nt=_e.types.length}=$,rt=Array.isArray(j)?new FlatBufferCursor(j,j.length):j,it=_e.types,st=0,ot=0;function at(Ct,kt,St,Pt,Bt,xt){let{id:bt,start:$t,end:Mt,size:Ot}=rt,jt=ot;for(;Ot<0;)if(rt.next(),Ot==-1){let Ht=tt[bt];St.push(Ht),Pt.push($t-Ct);return}else if(Ot==-3){st=bt;return}else if(Ot==-4){ot=bt;return}else throw new RangeError(`Unrecognized record size: ${Ot}`);let Yt=it[bt],Ut,Nt,It=$t-Ct;if(Mt-$t<=et&&(Nt=gt(rt.pos-kt,Bt))){let Ht=new Uint16Array(Nt.size-Nt.skip),Gt=rt.pos-Nt.size,Kt=Ht.length;for(;rt.pos>Gt;)Kt=dt(Nt.start,Ht,Kt);Ut=new TreeBuffer(Ht,Mt-Nt.start,_e),It=Nt.start-Ct}else{let Ht=rt.pos-Ot;rt.next();let Gt=[],Kt=[],rn=bt>=nt?bt:-1,sn=0,cn=Mt;for(;rt.pos>Ht;)rn>=0&&rt.id==rn&&rt.size>=0?(rt.end<=cn-et&&(ht(Gt,Kt,$t,sn,rt.end,cn,rn,jt),sn=Gt.length,cn=rt.end),rt.next()):xt>2500?lt($t,Ht,Gt,Kt):at($t,Ht,Gt,Kt,rn,xt+1);if(rn>=0&&sn>0&&sn<Gt.length&&ht(Gt,Kt,$t,sn,$t,cn,rn,jt),Gt.reverse(),Kt.reverse(),rn>-1&&sn>0){let un=ut(Yt);Ut=balanceRange(Yt,Gt,Kt,0,Gt.length,0,Mt-$t,un,un)}else Ut=ft(Yt,Gt,Kt,Mt-$t,jt-Mt)}St.push(Ut),Pt.push(It)}function lt(Ct,kt,St,Pt){let Bt=[],xt=0,bt=-1;for(;rt.pos>kt;){let{id:$t,start:Mt,end:Ot,size:jt}=rt;if(jt>4)rt.next();else{if(bt>-1&&Mt<bt)break;bt<0&&(bt=Ot-et),Bt.push($t,Mt,Ot),xt++,rt.next()}}if(xt){let $t=new Uint16Array(xt*4),Mt=Bt[Bt.length-2];for(let Ot=Bt.length-3,jt=0;Ot>=0;Ot-=3)$t[jt++]=Bt[Ot],$t[jt++]=Bt[Ot+1]-Mt,$t[jt++]=Bt[Ot+2]-Mt,$t[jt++]=jt;St.push(new TreeBuffer($t,Bt[2]-Mt,_e)),Pt.push(Mt-Ct)}}function ut(Ct){return(kt,St,Pt)=>{let Bt=0,xt=kt.length-1,bt,$t;if(xt>=0&&(bt=kt[xt])instanceof Tree$1){if(!xt&&bt.type==Ct&&bt.length==Pt)return bt;($t=bt.prop(NodeProp.lookAhead))&&(Bt=St[xt]+bt.length+$t)}return ft(Ct,kt,St,Pt,Bt)}}function ht(Ct,kt,St,Pt,Bt,xt,bt,$t){let Mt=[],Ot=[];for(;Ct.length>Pt;)Mt.push(Ct.pop()),Ot.push(kt.pop()+St-Bt);Ct.push(ft(_e.types[bt],Mt,Ot,xt-Bt,$t-xt)),kt.push(Bt-St)}function ft(Ct,kt,St,Pt,Bt=0,xt){if(st){let bt=[NodeProp.contextHash,st];xt=xt?[bt].concat(xt):[bt]}if(Bt>25){let bt=[NodeProp.lookAhead,Bt];xt=xt?[bt].concat(xt):[bt]}return new Tree$1(Ct,kt,St,Pt,xt)}function gt(Ct,kt){let St=rt.fork(),Pt=0,Bt=0,xt=0,bt=St.end-et,$t={size:0,start:0,skip:0};e:for(let Mt=St.pos-Ct;St.pos>Mt;){let Ot=St.size;if(St.id==kt&&Ot>=0){$t.size=Pt,$t.start=Bt,$t.skip=xt,xt+=4,Pt+=4,St.next();continue}let jt=St.pos-Ot;if(Ot<0||jt<Mt||St.start<bt)break;let Yt=St.id>=nt?4:0,Ut=St.start;for(St.next();St.pos>jt;){if(St.size<0)if(St.size==-3)Yt+=4;else break e;else St.id>=nt&&(Yt+=4);St.next()}Bt=Ut,Pt+=Ot,xt+=Yt}return(kt<0||Pt==Ct)&&($t.size=Pt,$t.start=Bt,$t.skip=xt),$t.size>4?$t:void 0}function dt(Ct,kt,St){let{id:Pt,start:Bt,end:xt,size:bt}=rt;if(rt.next(),bt>=0&&Pt<nt){let $t=St;if(bt>4){let Mt=rt.pos-(bt-4);for(;rt.pos>Mt;)St=dt(Ct,kt,St)}kt[--St]=$t,kt[--St]=xt-Ct,kt[--St]=Bt-Ct,kt[--St]=Pt}else bt==-3?st=Pt:bt==-4&&(ot=Pt);return St}let mt=[],yt=[];for(;rt.pos>0;)at($.start||0,$.bufferStart||0,mt,yt,-1,0);let Et=(g=$.length)!==null&&g!==void 0?g:mt.length?yt[0]+mt[0].length:0;return new Tree$1(it[$.topID],mt.reverse(),yt.reverse(),Et)}const nodeSizeCache=new WeakMap;function nodeSize($,g){if(!$.isAnonymous||g instanceof TreeBuffer||g.type!=$)return 1;let j=nodeSizeCache.get(g);if(j==null){j=1;for(let _e of g.children){if(_e.type!=$||!(_e instanceof Tree$1)){j=1;break}j+=nodeSize($,_e)}nodeSizeCache.set(g,j)}return j}function balanceRange($,g,j,_e,et,tt,nt,rt,it){let st=0;for(let ht=_e;ht<et;ht++)st+=nodeSize($,g[ht]);let ot=Math.ceil(st*1.5/8),at=[],lt=[];function ut(ht,ft,gt,dt,mt){for(let yt=gt;yt<dt;){let Et=yt,Ct=ft[yt],kt=nodeSize($,ht[yt]);for(yt++;yt<dt;yt++){let St=nodeSize($,ht[yt]);if(kt+St>=ot)break;kt+=St}if(yt==Et+1){if(kt>ot){let St=ht[Et];ut(St.children,St.positions,0,St.children.length,ft[Et]+mt);continue}at.push(ht[Et])}else{let St=ft[yt-1]+ht[yt-1].length-Ct;at.push(balanceRange($,ht,ft,Et,yt,Ct,St,null,it))}lt.push(Ct+mt-tt)}}return ut(g,j,_e,et,0),(rt||it)(at,lt,nt)}class TreeFragment{constructor(g,j,_e,et,tt=!1,nt=!1){this.from=g,this.to=j,this.tree=_e,this.offset=et,this.open=(tt?1:0)|(nt?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(g,j=[],_e=!1){let et=[new TreeFragment(0,g.length,g,0,!1,_e)];for(let tt of j)tt.to>g.length&&et.push(tt);return et}static applyChanges(g,j,_e=128){if(!j.length)return g;let et=[],tt=1,nt=g.length?g[0]:null;for(let rt=0,it=0,st=0;;rt++){let ot=rt<j.length?j[rt]:null,at=ot?ot.fromA:1e9;if(at-it>=_e)for(;nt&&nt.from<at;){let lt=nt;if(it>=lt.from||at<=lt.to||st){let ut=Math.max(lt.from,it)-st,ht=Math.min(lt.to,at)-st;lt=ut>=ht?null:new TreeFragment(ut,ht,lt.tree,lt.offset+st,rt>0,!!ot)}if(lt&&et.push(lt),nt.to>at)break;nt=tt<g.length?g[tt++]:null}if(!ot)break;it=ot.toA,st=ot.toA-ot.toB}return et}}let Parser$1=class{startParse(g,j,_e){return typeof g=="string"&&(g=new StringInput(g)),_e=_e?_e.length?_e.map(et=>new Range(et.from,et.to)):[new Range(0,0)]:[new Range(0,g.length)],this.createParse(g,j||[],_e)}parse(g,j,_e){let et=this.startParse(g,j,_e);for(;;){let tt=et.advance();if(tt)return tt}}};class StringInput{constructor(g){this.string=g}get length(){return this.string.length}chunk(g){return this.string.slice(g)}get lineChunks(){return!1}read(g,j){return this.string.slice(g,j)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(g,j,_e){this.set=g,this.base=j,this.modified=_e,this.id=nextTagID++}static define(g){if(g!=null&&g.base)throw new Error("Can not derive from a modified tag");let j=new Tag([],null,[]);if(j.set.push(j),g)for(let _e of g.set)j.set.push(_e);return j}static defineModifier(){let g=new Modifier;return j=>j.modified.indexOf(g)>-1?j:Modifier.get(j.base||j,j.modified.concat(g).sort((_e,et)=>_e.id-et.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(g,j){if(!j.length)return g;let _e=j[0].instances.find(rt=>rt.base==g&&sameArray(j,rt.modified));if(_e)return _e;let et=[],tt=new Tag(et,g,j);for(let rt of j)rt.instances.push(tt);let nt=powerSet(j);for(let rt of g.set)if(!rt.modified.length)for(let it of nt)et.push(Modifier.get(rt,it));return tt}}function sameArray($,g){return $.length==g.length&&$.every((j,_e)=>j==g[_e])}function powerSet($){let g=[[]];for(let j=0;j<$.length;j++)for(let _e=0,et=g.length;_e<et;_e++)g.push(g[_e].concat($[j]));return g.sort((j,_e)=>_e.length-j.length)}function styleTags($){let g=Object.create(null);for(let j in $){let _e=$[j];Array.isArray(_e)||(_e=[_e]);for(let et of j.split(" "))if(et){let tt=[],nt=2,rt=et;for(let at=0;;){if(rt=="..."&&at>0&&at+3==et.length){nt=1;break}let lt=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(rt);if(!lt)throw new RangeError("Invalid path: "+et);if(tt.push(lt[0]=="*"?"":lt[0][0]=='"'?JSON.parse(lt[0]):lt[0]),at+=lt[0].length,at==et.length)break;let ut=et[at++];if(at==et.length&&ut=="!"){nt=0;break}if(ut!="/")throw new RangeError("Invalid path: "+et);rt=et.slice(at)}let it=tt.length-1,st=tt[it];if(!st)throw new RangeError("Invalid path: "+et);let ot=new Rule(_e,nt,it>0?tt.slice(0,it):null);g[st]=ot.sort(g[st])}}return ruleNodeProp.add(g)}const ruleNodeProp=new NodeProp;class Rule{constructor(g,j,_e,et){this.tags=g,this.mode=j,this.context=_e,this.next=et}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(g){return!g||g.depth<this.depth?(this.next=g,this):(g.next=this.sort(g.next),g)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter($,g){let j=Object.create(null);for(let tt of $)if(!Array.isArray(tt.tag))j[tt.tag.id]=tt.class;else for(let nt of tt.tag)j[nt.id]=tt.class;let{scope:_e,all:et=null}=g||{};return{style:tt=>{let nt=et;for(let rt of tt)for(let it of rt.set){let st=j[it.id];if(st){nt=nt?nt+" "+st:st;break}}return nt},scope:_e}}function highlightTags($,g){let j=null;for(let _e of $){let et=_e.style(g);et&&(j=j?j+" "+et:et)}return j}function highlightTree($,g,j,_e=0,et=$.length){let tt=new HighlightBuilder(_e,Array.isArray(g)?g:[g],j);tt.highlightRange($.cursor(),_e,et,"",tt.highlighters),tt.flush(et)}class HighlightBuilder{constructor(g,j,_e){this.at=g,this.highlighters=j,this.span=_e,this.class=""}startSpan(g,j){j!=this.class&&(this.flush(g),g>this.at&&(this.at=g),this.class=j)}flush(g){g>this.at&&this.class&&this.span(this.at,g,this.class)}highlightRange(g,j,_e,et,tt){let{type:nt,from:rt,to:it}=g;if(rt>=_e||it<=j)return;nt.isTop&&(tt=this.highlighters.filter(ut=>!ut.scope||ut.scope(nt)));let st=et,ot=getStyleTags(g)||Rule.empty,at=highlightTags(tt,ot.tags);if(at&&(st&&(st+=" "),st+=at,ot.mode==1&&(et+=(et?" ":"")+at)),this.startSpan(Math.max(j,rt),st),ot.opaque)return;let lt=g.tree&&g.tree.prop(NodeProp.mounted);if(lt&&lt.overlay){let ut=g.node.enter(lt.overlay[0].from+rt,1),ht=this.highlighters.filter(gt=>!gt.scope||gt.scope(lt.tree.type)),ft=g.firstChild();for(let gt=0,dt=rt;;gt++){let mt=gt<lt.overlay.length?lt.overlay[gt]:null,yt=mt?mt.from+rt:it,Et=Math.max(j,dt),Ct=Math.min(_e,yt);if(Et<Ct&&ft)for(;g.from<Ct&&(this.highlightRange(g,Et,Ct,et,tt),this.startSpan(Math.min(Ct,g.to),st),!(g.to>=yt||!g.nextSibling())););if(!mt||yt>_e)break;dt=mt.to+rt,dt>j&&(this.highlightRange(ut.cursor(),Math.max(j,mt.from+rt),Math.min(_e,dt),"",ht),this.startSpan(Math.min(_e,dt),st))}ft&&g.parent()}else if(g.firstChild()){lt&&(et="");do if(!(g.to<=j)){if(g.from>=_e)break;this.highlightRange(g,j,_e,et,tt),this.startSpan(Math.min(_e,g.to),st)}while(g.nextSibling());g.parent()}}}function getStyleTags($){let g=$.type.prop(ruleNodeProp);for(;g&&g.context&&!$.matchContext(g.context);)g=g.next;return g||null}const t$2=Tag.define,comment=t$2(),name=t$2(),typeName=t$2(name),propertyName=t$2(name),literal=t$2(),string=t$2(literal),number=t$2(literal),content=t$2(),heading=t$2(content),keyword=t$2(),operator=t$2(),punctuation=t$2(),bracket=t$2(punctuation),meta=t$2(),tags={comment,lineComment:t$2(comment),blockComment:t$2(comment),docComment:t$2(comment),name,variableName:t$2(name),typeName,tagName:t$2(typeName),propertyName,attributeName:t$2(propertyName),className:t$2(name),labelName:t$2(name),namespace:t$2(name),macroName:t$2(name),literal,string,docString:t$2(string),character:t$2(string),attributeValue:t$2(string),number,integer:t$2(number),float:t$2(number),bool:t$2(literal),regexp:t$2(literal),escape:t$2(literal),color:t$2(literal),url:t$2(literal),keyword,self:t$2(keyword),null:t$2(keyword),atom:t$2(keyword),unit:t$2(keyword),modifier:t$2(keyword),operatorKeyword:t$2(keyword),controlKeyword:t$2(keyword),definitionKeyword:t$2(keyword),moduleKeyword:t$2(keyword),operator,derefOperator:t$2(operator),arithmeticOperator:t$2(operator),logicOperator:t$2(operator),bitwiseOperator:t$2(operator),compareOperator:t$2(operator),updateOperator:t$2(operator),definitionOperator:t$2(operator),typeOperator:t$2(operator),controlOperator:t$2(operator),punctuation,separator:t$2(punctuation),bracket,angleBracket:t$2(bracket),squareBracket:t$2(bracket),paren:t$2(bracket),brace:t$2(bracket),content,heading,heading1:t$2(heading),heading2:t$2(heading),heading3:t$2(heading),heading4:t$2(heading),heading5:t$2(heading),heading6:t$2(heading),contentSeparator:t$2(content),list:t$2(content),quote:t$2(content),emphasis:t$2(content),strong:t$2(content),link:t$2(content),monospace:t$2(content),strikethrough:t$2(content),inserted:t$2(),deleted:t$2(),changed:t$2(),invalid:t$2(),meta,documentMeta:t$2(meta),annotation:t$2(meta),processingInstruction:t$2(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp,sublanguageProp=new NodeProp;class Language{constructor(g,j,_e=[],et=""){this.data=g,this.name=et,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=j,this.extension=[language.of(this),EditorState.languageData.of((tt,nt,rt)=>{let it=topNodeAt(tt,nt,rt),st=it.type.prop(languageDataProp);if(!st)return[];let ot=tt.facet(st),at=it.type.prop(sublanguageProp);if(at){let lt=it.resolve(nt-it.from,rt);for(let ut of at)if(ut.test(lt,tt)){let ht=tt.facet(ut.facet);return ut.type=="replace"?ht:ht.concat(ot)}}return ot})].concat(_e)}isActiveAt(g,j,_e=-1){return topNodeAt(g,j,_e).type.prop(languageDataProp)==this.data}findRegions(g){let j=g.facet(language);if((j==null?void 0:j.data)==this.data)return[{from:0,to:g.doc.length}];if(!j||!j.allowsNesting)return[];let _e=[],et=(tt,nt)=>{if(tt.prop(languageDataProp)==this.data){_e.push({from:nt,to:nt+tt.length});return}let rt=tt.prop(NodeProp.mounted);if(rt){if(rt.tree.prop(languageDataProp)==this.data){if(rt.overlay)for(let it of rt.overlay)_e.push({from:it.from+nt,to:it.to+nt});else _e.push({from:nt,to:nt+tt.length});return}else if(rt.overlay){let it=_e.length;if(et(rt.tree,rt.overlay[0].from+nt),_e.length>it)return}}for(let it=0;it<tt.children.length;it++){let st=tt.children[it];st instanceof Tree$1&&et(st,tt.positions[it]+nt)}};return et(syntaxTree(g),0),_e}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt($,g,j){let _e=$.facet(language),et=syntaxTree($).topNode;if(!_e||_e.allowsNesting)for(let tt=et;tt;tt=tt.enter(g,j,IterMode.ExcludeBuffers))tt.type.isTop&&(et=tt);return et}function syntaxTree($){let g=$.field(Language.state,!1);return g?g.tree:Tree$1.empty}class DocInput{constructor(g){this.doc=g,this.cursorPos=0,this.string="",this.cursor=g.iter()}get length(){return this.doc.length}syncTo(g){return this.string=this.cursor.next(g-this.cursorPos).value,this.cursorPos=g+this.string.length,this.cursorPos-this.string.length}chunk(g){return this.syncTo(g),this.string}get lineChunks(){return!0}read(g,j){let _e=this.cursorPos-this.string.length;return g<_e||j>=this.cursorPos?this.doc.sliceString(g,j):this.string.slice(g-_e,j-_e)}}let currentContext=null;class ParseContext{constructor(g,j,_e=[],et,tt,nt,rt,it){this.parser=g,this.state=j,this.fragments=_e,this.tree=et,this.treeLen=tt,this.viewport=nt,this.skipped=rt,this.scheduleOn=it,this.parse=null,this.tempSkipped=[]}static create(g,j,_e){return new ParseContext(g,j,[],Tree$1.empty,0,_e,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(g,j){return j!=null&&j>=this.state.doc.length&&(j=void 0),this.tree!=Tree$1.empty&&this.isDone(j??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var _e;if(typeof g=="number"){let et=Date.now()+g;g=()=>Date.now()>et}for(this.parse||(this.parse=this.startParse()),j!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>j)&&j<this.state.doc.length&&this.parse.stopAt(j);;){let et=this.parse.advance();if(et)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(et,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(_e=this.parse.stoppedAt)!==null&&_e!==void 0?_e:this.state.doc.length,this.tree=et,this.parse=null,this.treeLen<(j??this.state.doc.length))this.parse=this.startParse();else return!0;if(g())return!1}})}takeTree(){let g,j;this.parse&&(g=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>g)&&this.parse.stopAt(g),this.withContext(()=>{for(;!(j=this.parse.advance()););}),this.treeLen=g,this.tree=j,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(g){let j=currentContext;currentContext=this;try{return g()}finally{currentContext=j}}withoutTempSkipped(g){for(let j;j=this.tempSkipped.pop();)g=cutFragments(g,j.from,j.to);return g}changes(g,j){let{fragments:_e,tree:et,treeLen:tt,viewport:nt,skipped:rt}=this;if(this.takeTree(),!g.empty){let it=[];if(g.iterChangedRanges((st,ot,at,lt)=>it.push({fromA:st,toA:ot,fromB:at,toB:lt})),_e=TreeFragment.applyChanges(_e,it),et=Tree$1.empty,tt=0,nt={from:g.mapPos(nt.from,-1),to:g.mapPos(nt.to,1)},this.skipped.length){rt=[];for(let st of this.skipped){let ot=g.mapPos(st.from,1),at=g.mapPos(st.to,-1);ot<at&&rt.push({from:ot,to:at})}}}return new ParseContext(this.parser,j,_e,et,tt,nt,rt,this.scheduleOn)}updateViewport(g){if(this.viewport.from==g.from&&this.viewport.to==g.to)return!1;this.viewport=g;let j=this.skipped.length;for(let _e=0;_e<this.skipped.length;_e++){let{from:et,to:tt}=this.skipped[_e];et<g.to&&tt>g.from&&(this.fragments=cutFragments(this.fragments,et,tt),this.skipped.splice(_e--,1))}return this.skipped.length>=j?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(g,j){this.skipped.push({from:g,to:j})}static getSkippingParser(g){return new class extends Parser$1{createParse(j,_e,et){let tt=et[0].from,nt=et[et.length-1].to;return{parsedPos:tt,advance(){let it=currentContext;if(it){for(let st of et)it.tempSkipped.push(st);g&&(it.scheduleOn=it.scheduleOn?Promise.all([it.scheduleOn,g]):g)}return this.parsedPos=nt,new Tree$1(NodeType.none,[],[],nt-tt)},stoppedAt:null,stopAt(){}}}}}isDone(g){g=Math.min(g,this.state.doc.length);let j=this.fragments;return this.treeLen>=g&&j.length&&j[0].from==0&&j[0].to>=g}static get(){return currentContext}}function cutFragments($,g,j){return TreeFragment.applyChanges($,[{fromA:g,toA:j,fromB:g,toB:j}])}class LanguageState{constructor(g){this.context=g,this.tree=g.tree}apply(g){if(!g.docChanged&&this.tree==this.context.tree)return this;let j=this.context.changes(g.changes,g.state),_e=this.context.treeLen==g.startState.doc.length?void 0:Math.max(g.changes.mapPos(this.context.treeLen),j.viewport.to);return j.work(20,_e)||j.takeTree(),new LanguageState(j)}static init(g){let j=Math.min(3e3,g.doc.length),_e=ParseContext.create(g.facet(language).parser,g,{from:0,to:j});return _e.work(20,j)||_e.takeTree(),new LanguageState(_e)}}Language.state=StateField.define({create:LanguageState.init,update($,g){for(let j of g.effects)if(j.is(Language.setState))return j.value;return g.startState.facet(language)!=g.state.facet(language)?LanguageState.init(g.state):$.apply(g)}});let requestIdle=$=>{let g=setTimeout(()=>$(),500);return()=>clearTimeout(g)};typeof requestIdleCallback<"u"&&(requestIdle=$=>{let g=-1,j=setTimeout(()=>{g=requestIdleCallback($,{timeout:500-100})},100);return()=>g<0?clearTimeout(j):cancelIdleCallback(g)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(g){this.view=g,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(g){let j=this.view.state.field(Language.state).context;(j.updateViewport(g.view.viewport)||this.view.viewport.to>j.treeLen)&&this.scheduleWork(),(g.docChanged||g.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(j)}scheduleWork(){if(this.working)return;let{state:g}=this.view,j=g.field(Language.state);(j.tree!=j.context.tree||!j.context.isDone(g.doc.length))&&(this.working=requestIdle(this.work))}work(g){this.working=null;let j=Date.now();if(this.chunkEnd<j&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=j+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:_e,viewport:{to:et}}=this.view,tt=_e.field(Language.state);if(tt.tree==tt.context.tree&&tt.context.isDone(et+1e5))return;let nt=Date.now()+Math.min(this.chunkBudget,100,g&&!isInputPending?Math.max(25,g.timeRemaining()-5):1e9),rt=tt.context.treeLen<et&&_e.doc.length>et+1e3,it=tt.context.work(()=>isInputPending&&isInputPending()||Date.now()>nt,et+(rt?0:1e5));this.chunkBudget-=Date.now()-j,(it||this.chunkBudget<=0)&&(tt.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(tt.context))})),this.chunkBudget>0&&!(it&&!rt)&&this.scheduleWork(),this.checkAsyncSchedule(tt.context)}checkAsyncSchedule(g){g.scheduleOn&&(this.workScheduled++,g.scheduleOn.then(()=>this.scheduleWork()).catch(j=>logException(this.view.state,j)).then(()=>this.workScheduled--),g.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine($){return $.length?$[0]:null},enables:$=>[Language.state,parseWorker,EditorView.contentAttributes.compute([$],g=>{let j=g.facet($);return j&&j.name?{"data-language":j.name}:{}})]}),indentService=Facet.define(),indentUnit=Facet.define({combine:$=>{if(!$.length)return"  ";let g=$[0];if(!g||/\S/.test(g)||Array.from(g).some(j=>j!=g[0]))throw new Error("Invalid indent unit: "+JSON.stringify($[0]));return g}});function getIndentUnit($){let g=$.facet(indentUnit);return g.charCodeAt(0)==9?$.tabSize*g.length:g.length}function indentString($,g){let j="",_e=$.tabSize,et=$.facet(indentUnit)[0];if(et=="	"){for(;g>=_e;)j+="	",g-=_e;et=" "}for(let tt=0;tt<g;tt++)j+=et;return j}function getIndentation($,g){$ instanceof EditorState&&($=new IndentContext($));for(let _e of $.state.facet(indentService)){let et=_e($,g);if(et!==void 0)return et}let j=syntaxTree($.state);return j.length>=g?syntaxIndentation($,j,g):null}class IndentContext{constructor(g,j={}){this.state=g,this.options=j,this.unit=getIndentUnit(g)}lineAt(g,j=1){let _e=this.state.doc.lineAt(g),{simulateBreak:et,simulateDoubleBreak:tt}=this.options;return et!=null&&et>=_e.from&&et<=_e.to?tt&&et==g?{text:"",from:g}:(j<0?et<g:et<=g)?{text:_e.text.slice(et-_e.from),from:et}:{text:_e.text.slice(0,et-_e.from),from:_e.from}:_e}textAfterPos(g,j=1){if(this.options.simulateDoubleBreak&&g==this.options.simulateBreak)return"";let{text:_e,from:et}=this.lineAt(g,j);return _e.slice(g-et,Math.min(_e.length,g+100-et))}column(g,j=1){let{text:_e,from:et}=this.lineAt(g,j),tt=this.countColumn(_e,g-et),nt=this.options.overrideIndentation?this.options.overrideIndentation(et):-1;return nt>-1&&(tt+=nt-this.countColumn(_e,_e.search(/\S|$/))),tt}countColumn(g,j=g.length){return countColumn(g,this.state.tabSize,j)}lineIndent(g,j=1){let{text:_e,from:et}=this.lineAt(g,j),tt=this.options.overrideIndentation;if(tt){let nt=tt(et);if(nt>-1)return nt}return this.countColumn(_e,_e.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation($,g,j){let _e=g.resolveStack(j),et=_e.node.enterUnfinishedNodesBefore(j);if(et!=_e.node){let tt=[];for(let nt=et;nt!=_e.node;nt=nt.parent)tt.push(nt);for(let nt=tt.length-1;nt>=0;nt--)_e={node:tt[nt],next:_e}}return indentFor(_e,$,j)}function indentFor($,g,j){for(let _e=$;_e;_e=_e.next){let et=indentStrategy(_e.node);if(et)return et(TreeIndentContext.create(g,j,_e))}return 0}function ignoreClosed($){return $.pos==$.options.simulateBreak&&$.options.simulateDoubleBreak}function indentStrategy($){let g=$.type.prop(indentNodeProp);if(g)return g;let j=$.firstChild,_e;if(j&&(_e=j.type.prop(NodeProp.closedBy))){let et=$.lastChild,tt=et&&_e.indexOf(et.name)>-1;return nt=>delimitedStrategy(nt,!0,1,void 0,tt&&!ignoreClosed(nt)?et.from:void 0)}return $.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(g,j,_e){super(g.state,g.options),this.base=g,this.pos=j,this.context=_e}get node(){return this.context.node}static create(g,j,_e){return new TreeIndentContext(g,j,_e)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(g){let j=this.state.doc.lineAt(g.from);for(;;){let _e=g.resolve(j.from);for(;_e.parent&&_e.parent.from==_e.from;)_e=_e.parent;if(isParent(_e,g))break;j=this.state.doc.lineAt(_e.from)}return this.lineIndent(j.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent($,g){for(let j=g;j;j=j.parent)if($==j)return!0;return!1}function bracketedAligned($){let g=$.node,j=g.childAfter(g.from),_e=g.lastChild;if(!j)return null;let et=$.options.simulateBreak,tt=$.state.doc.lineAt(j.from),nt=et==null||et<=tt.from?tt.to:Math.min(tt.to,et);for(let rt=j.to;;){let it=g.childAfter(rt);if(!it||it==_e)return null;if(!it.type.isSkipped)return it.from<nt?j:null;rt=it.to}}function delimitedStrategy($,g,j,_e,et){let tt=$.textAfter,nt=tt.match(/^\s*/)[0].length,rt=_e&&tt.slice(nt,nt+_e.length)==_e||et==$.pos+nt,it=g?bracketedAligned($):null;return it?rt?$.column(it.from):$.column(it.to):$.baseIndent+(rt?0:$.unit*j)}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of($=>{if(!$.docChanged||!$.isUserEvent("input.type")&&!$.isUserEvent("input.complete"))return $;let g=$.startState.languageDataAt("indentOnInput",$.startState.selection.main.head);if(!g.length)return $;let j=$.newDoc,{head:_e}=$.newSelection.main,et=j.lineAt(_e);if(_e>et.from+DontIndentBeyond)return $;let tt=j.sliceString(et.from,_e);if(!g.some(st=>st.test(tt)))return $;let{state:nt}=$,rt=-1,it=[];for(let{head:st}of nt.selection.ranges){let ot=nt.doc.lineAt(st);if(ot.from==rt)continue;rt=ot.from;let at=getIndentation(nt,ot.from);if(at==null)continue;let lt=/^\s*/.exec(ot.text)[0],ut=indentString(nt,at);lt!=ut&&it.push({from:ot.from,to:ot.from+lt.length,insert:ut})}return it.length?[$,{changes:it,sequential:!0}]:$})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function syntaxFolding($,g,j){let _e=syntaxTree($);if(_e.length<j)return null;let et=_e.resolveStack(j,1),tt=null;for(let nt=et;nt;nt=nt.next){let rt=nt.node;if(rt.to<=j||rt.from>j)continue;if(tt&&rt.from<g)break;let it=rt.type.prop(foldNodeProp);if(it&&(rt.to<_e.length-50||_e.length==$.doc.length||!isUnfinished(rt))){let st=it(rt,$);st&&st.from<=j&&st.from>=g&&st.to>j&&(tt=st)}}return tt}function isUnfinished($){let g=$.lastChild;return g&&g.to==$.to&&g.type.isError}function foldable($,g,j){for(let _e of $.facet(foldService)){let et=_e($,g,j);if(et)return et}return syntaxFolding($,g,j)}function mapRange($,g){let j=g.mapPos($.from,1),_e=g.mapPos($.to,-1);return j>=_e?void 0:{from:j,to:_e}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines($){let g=[];for(let{head:j}of $.state.selection.ranges)g.some(_e=>_e.from<=j&&_e.to>=j)||g.push($.lineBlockAt(j));return g}const foldState=StateField.define({create(){return Decoration.none},update($,g){$=$.map(g.changes);for(let j of g.effects)if(j.is(foldEffect)&&!foldExists($,j.value.from,j.value.to)){let{preparePlaceholder:_e}=g.state.facet(foldConfig),et=_e?Decoration.replace({widget:new PreparedFoldWidget(_e(g.state,j.value))}):foldWidget;$=$.update({add:[et.range(j.value.from,j.value.to)]})}else j.is(unfoldEffect)&&($=$.update({filter:(_e,et)=>j.value.from!=_e||j.value.to!=et,filterFrom:j.value.from,filterTo:j.value.to}));if(g.selection){let j=!1,{head:_e}=g.selection.main;$.between(_e,_e,(et,tt)=>{et<_e&&tt>_e&&(j=!0)}),j&&($=$.update({filterFrom:_e,filterTo:_e,filter:(et,tt)=>tt<=_e||et>=_e}))}return $},provide:$=>EditorView.decorations.from($),toJSON($,g){let j=[];return $.between(0,g.doc.length,(_e,et)=>{j.push(_e,et)}),j},fromJSON($){if(!Array.isArray($)||$.length%2)throw new RangeError("Invalid JSON for fold state");let g=[];for(let j=0;j<$.length;){let _e=$[j++],et=$[j++];if(typeof _e!="number"||typeof et!="number")throw new RangeError("Invalid JSON for fold state");g.push(foldWidget.range(_e,et))}return Decoration.set(g,!0)}});function findFold($,g,j){var _e;let et=null;return(_e=$.field(foldState,!1))===null||_e===void 0||_e.between(g,j,(tt,nt)=>{(!et||et.from>tt)&&(et={from:tt,to:nt})}),et}function foldExists($,g,j){let _e=!1;return $.between(g,g,(et,tt)=>{et==g&&tt==j&&(_e=!0)}),_e}function maybeEnable($,g){return $.field(foldState,!1)?g:g.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=$=>{for(let g of selectedLines($)){let j=foldable($.state,g.from,g.to);if(j)return $.dispatch({effects:maybeEnable($.state,[foldEffect.of(j),announceFold($,j)])}),!0}return!1},unfoldCode=$=>{if(!$.state.field(foldState,!1))return!1;let g=[];for(let j of selectedLines($)){let _e=findFold($.state,j.from,j.to);_e&&g.push(unfoldEffect.of(_e),announceFold($,_e,!1))}return g.length&&$.dispatch({effects:g}),g.length>0};function announceFold($,g,j=!0){let _e=$.state.doc.lineAt(g.from).number,et=$.state.doc.lineAt(g.to).number;return EditorView.announce.of(`${$.state.phrase(j?"Folded lines":"Unfolded lines")} ${_e} ${$.state.phrase("to")} ${et}.`)}const foldAll=$=>{let{state:g}=$,j=[];for(let _e=0;_e<g.doc.length;){let et=$.lineBlockAt(_e),tt=foldable(g,et.from,et.to);tt&&j.push(foldEffect.of(tt)),_e=(tt?$.lineBlockAt(tt.to):et).to+1}return j.length&&$.dispatch({effects:maybeEnable($.state,j)}),!!j.length},unfoldAll=$=>{let g=$.state.field(foldState,!1);if(!g||!g.size)return!1;let j=[];return g.between(0,$.state.doc.length,(_e,et)=>{j.push(unfoldEffect.of({from:_e,to:et}))}),$.dispatch({effects:j}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine($){return combineConfig($,defaultConfig)}});function codeFolding($){let g=[foldState,baseTheme$1$2];return $&&g.push(foldConfig.of($)),g}function widgetToDOM($,g){let{state:j}=$,_e=j.facet(foldConfig),et=nt=>{let rt=$.lineBlockAt($.posAtDOM(nt.target)),it=findFold($.state,rt.from,rt.to);it&&$.dispatch({effects:unfoldEffect.of(it)}),nt.preventDefault()};if(_e.placeholderDOM)return _e.placeholderDOM($,et,g);let tt=document.createElement("span");return tt.textContent=_e.placeholderText,tt.setAttribute("aria-label",j.phrase("folded code")),tt.title=j.phrase("unfold"),tt.className="cm-foldPlaceholder",tt.onclick=et,tt}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM($){return widgetToDOM($,null)}}});class PreparedFoldWidget extends WidgetType{constructor(g){super(),this.value=g}eq(g){return this.value==g.value}toDOM(g){return widgetToDOM(g,this.value)}}const foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(g,j){super(),this.config=g,this.open=j}eq(g){return this.config==g.config&&this.open==g.open}toDOM(g){if(this.config.markerDOM)return this.config.markerDOM(this.open);let j=document.createElement("span");return j.textContent=this.open?this.config.openText:this.config.closedText,j.title=g.state.phrase(this.open?"Fold line":"Unfold line"),j}}function foldGutter($={}){let g=Object.assign(Object.assign({},foldGutterDefaults),$),j=new FoldMarker(g,!0),_e=new FoldMarker(g,!1),et=ViewPlugin.fromClass(class{constructor(nt){this.from=nt.viewport.from,this.markers=this.buildMarkers(nt)}update(nt){(nt.docChanged||nt.viewportChanged||nt.startState.facet(language)!=nt.state.facet(language)||nt.startState.field(foldState,!1)!=nt.state.field(foldState,!1)||syntaxTree(nt.startState)!=syntaxTree(nt.state)||g.foldingChanged(nt))&&(this.markers=this.buildMarkers(nt.view))}buildMarkers(nt){let rt=new RangeSetBuilder;for(let it of nt.viewportLineBlocks){let st=findFold(nt.state,it.from,it.to)?_e:foldable(nt.state,it.from,it.to)?j:null;st&&rt.add(it.from,it.from,st)}return rt.finish()}}),{domEventHandlers:tt}=g;return[et,gutter({class:"cm-foldGutter",markers(nt){var rt;return((rt=nt.plugin(et))===null||rt===void 0?void 0:rt.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(g,!1)},domEventHandlers:Object.assign(Object.assign({},tt),{click:(nt,rt,it)=>{if(tt.click&&tt.click(nt,rt,it))return!0;let st=findFold(nt.state,rt.from,rt.to);if(st)return nt.dispatch({effects:unfoldEffect.of(st)}),!0;let ot=foldable(nt.state,rt.from,rt.to);return ot?(nt.dispatch({effects:foldEffect.of(ot)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(g,j){this.specs=g;let _e;function et(rt){let it=StyleModule.newName();return(_e||(_e=Object.create(null)))["."+it]=rt,it}const tt=typeof j.all=="string"?j.all:j.all?et(j.all):void 0,nt=j.scope;this.scope=nt instanceof Language?rt=>rt.prop(languageDataProp)==nt.data:nt?rt=>rt==nt:void 0,this.style=tagHighlighter(g.map(rt=>({tag:rt.tag,class:rt.class||et(Object.assign({},rt,{tag:null}))})),{all:tt}).style,this.module=_e?new StyleModule(_e):null,this.themeType=j.themeType}static define(g,j){return new HighlightStyle(g,j||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine($){return $.length?[$[0]]:null}});function getHighlighters($){let g=$.facet(highlighterFacet);return g.length?g:$.facet(fallbackHighlighter)}function syntaxHighlighting($,g){let j=[treeHighlighter],_e;return $ instanceof HighlightStyle&&($.module&&j.push(EditorView.styleModule.of($.module)),_e=$.themeType),g!=null&&g.fallback?j.push(fallbackHighlighter.of($)):_e?j.push(highlighterFacet.computeN([EditorView.darkTheme],et=>et.facet(EditorView.darkTheme)==(_e=="dark")?[$]:[])):j.push(highlighterFacet.of($)),j}class TreeHighlighter{constructor(g){this.markCache=Object.create(null),this.tree=syntaxTree(g.state),this.decorations=this.buildDeco(g,getHighlighters(g.state))}update(g){let j=syntaxTree(g.state),_e=getHighlighters(g.state),et=_e!=getHighlighters(g.startState);j.length<g.view.viewport.to&&!et&&j.type==this.tree.type?this.decorations=this.decorations.map(g.changes):(j!=this.tree||g.viewportChanged||et)&&(this.tree=j,this.decorations=this.buildDeco(g.view,_e))}buildDeco(g,j){if(!j||!this.tree.length)return Decoration.none;let _e=new RangeSetBuilder;for(let{from:et,to:tt}of g.visibleRanges)highlightTree(this.tree,j,(nt,rt,it)=>{_e.add(nt,rt,this.markCache[it]||(this.markCache[it]=Decoration.mark({class:it})))},et,tt);return _e.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:$=>$.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine($){return combineConfig($,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch($){let g=[],j=$.matched?matchingMark:nonmatchingMark;return g.push(j.range($.start.from,$.start.to)),$.end&&g.push(j.range($.end.from,$.end.to)),g}const bracketMatchingState=StateField.define({create(){return Decoration.none},update($,g){if(!g.docChanged&&!g.selection)return $;let j=[],_e=g.state.facet(bracketMatchingConfig);for(let et of g.state.selection.ranges){if(!et.empty)continue;let tt=matchBrackets(g.state,et.head,-1,_e)||et.head>0&&matchBrackets(g.state,et.head-1,1,_e)||_e.afterCursor&&(matchBrackets(g.state,et.head,1,_e)||et.head<g.state.doc.length&&matchBrackets(g.state,et.head+1,-1,_e));tt&&(j=j.concat(_e.renderMatch(tt,g.state)))}return Decoration.set(j,!0)},provide:$=>EditorView.decorations.from($)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching($={}){return[bracketMatchingConfig.of($),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes($,g,j){let _e=$.prop(g<0?NodeProp.openedBy:NodeProp.closedBy);if(_e)return _e;if($.name.length==1){let et=j.indexOf($.name);if(et>-1&&et%2==(g<0?1:0))return[j[et+g]]}return null}function findHandle($){let g=$.type.prop(bracketMatchingHandle);return g?g($.node):$}function matchBrackets($,g,j,_e={}){let et=_e.maxScanDistance||DefaultScanDist,tt=_e.brackets||DefaultBrackets,nt=syntaxTree($),rt=nt.resolveInner(g,j);for(let it=rt;it;it=it.parent){let st=matchingNodes(it.type,j,tt);if(st&&it.from<it.to){let ot=findHandle(it);if(ot&&(j>0?g>=ot.from&&g<ot.to:g>ot.from&&g<=ot.to))return matchMarkedBrackets($,g,j,it,ot,st,tt)}}return matchPlainBrackets($,g,j,nt,rt.type,et,tt)}function matchMarkedBrackets($,g,j,_e,et,tt,nt){let rt=_e.parent,it={from:et.from,to:et.to},st=0,ot=rt==null?void 0:rt.cursor();if(ot&&(j<0?ot.childBefore(_e.from):ot.childAfter(_e.to)))do if(j<0?ot.to<=_e.from:ot.from>=_e.to){if(st==0&&tt.indexOf(ot.type.name)>-1&&ot.from<ot.to){let at=findHandle(ot);return{start:it,end:at?{from:at.from,to:at.to}:void 0,matched:!0}}else if(matchingNodes(ot.type,j,nt))st++;else if(matchingNodes(ot.type,-j,nt)){if(st==0){let at=findHandle(ot);return{start:it,end:at&&at.from<at.to?{from:at.from,to:at.to}:void 0,matched:!1}}st--}}while(j<0?ot.prevSibling():ot.nextSibling());return{start:it,matched:!1}}function matchPlainBrackets($,g,j,_e,et,tt,nt){let rt=j<0?$.sliceDoc(g-1,g):$.sliceDoc(g,g+1),it=nt.indexOf(rt);if(it<0||it%2==0!=j>0)return null;let st={from:j<0?g-1:g,to:j>0?g+1:g},ot=$.doc.iterRange(g,j>0?$.doc.length:0),at=0;for(let lt=0;!ot.next().done&&lt<=tt;){let ut=ot.value;j<0&&(lt+=ut.length);let ht=g+lt*j;for(let ft=j>0?0:ut.length-1,gt=j>0?ut.length:-1;ft!=gt;ft+=j){let dt=nt.indexOf(ut[ft]);if(!(dt<0||_e.resolveInner(ht+ft,1).type!=et))if(dt%2==0==j>0)at++;else{if(at==1)return{start:st,end:{from:ht+ft,to:ht+ft+1},matched:dt>>1==it>>1};at--}}j>0&&(lt+=ut.length)}return ot.done?{start:st,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[$,g]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[$]=createTokenType(noTokens,g);function warnForPart($,g){warned.indexOf($)>-1||(warned.push($),console.warn(g))}function createTokenType($,g){let j=[];for(let rt of g.split(" ")){let it=[];for(let st of rt.split(".")){let ot=$[st]||tags[st];ot?typeof ot=="function"?it.length?it=it.map(ot):warnForPart(st,`Modifier ${st} used at start of tag`):it.length?warnForPart(st,`Tag ${st} used as modifier`):it=Array.isArray(ot)?ot:[ot]:warnForPart(st,`Unknown highlighting tag ${st}`)}for(let st of it)j.push(st)}if(!j.length)return 0;let _e=g.replace(/ /g,"_"),et=_e+" "+j.map(rt=>rt.id),tt=byTag[et];if(tt)return tt.id;let nt=byTag[et]=NodeType.define({id:typeArray.length,name:_e,props:[styleTags({[_e]:j})]});return typeArray.push(nt),nt.id}Direction.RTL,Direction.LTR;const toggleComment=$=>{let{state:g}=$,j=g.doc.lineAt(g.selection.main.from),_e=getConfig($.state,j.from);return _e.line?toggleLineComment($):_e.block?toggleBlockCommentByLine($):!1};function command($,g){return({state:j,dispatch:_e})=>{if(j.readOnly)return!1;let et=$(g,j);return et?(_e(j.update(et)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command(($,g)=>changeBlockComment($,g,selectedLineRanges(g)),0);function getConfig($,g){let j=$.languageDataAt("commentTokens",g);return j.length?j[0]:{}}const SearchMargin=50;function findBlockComment($,{open:g,close:j},_e,et){let tt=$.sliceDoc(_e-SearchMargin,_e),nt=$.sliceDoc(et,et+SearchMargin),rt=/\s*$/.exec(tt)[0].length,it=/^\s*/.exec(nt)[0].length,st=tt.length-rt;if(tt.slice(st-g.length,st)==g&&nt.slice(it,it+j.length)==j)return{open:{pos:_e-rt,margin:rt&&1},close:{pos:et+it,margin:it&&1}};let ot,at;et-_e<=2*SearchMargin?ot=at=$.sliceDoc(_e,et):(ot=$.sliceDoc(_e,_e+SearchMargin),at=$.sliceDoc(et-SearchMargin,et));let lt=/^\s*/.exec(ot)[0].length,ut=/\s*$/.exec(at)[0].length,ht=at.length-ut-j.length;return ot.slice(lt,lt+g.length)==g&&at.slice(ht,ht+j.length)==j?{open:{pos:_e+lt+g.length,margin:/\s/.test(ot.charAt(lt+g.length))?1:0},close:{pos:et-ut-j.length,margin:/\s/.test(at.charAt(ht-1))?1:0}}:null}function selectedLineRanges($){let g=[];for(let j of $.selection.ranges){let _e=$.doc.lineAt(j.from),et=j.to<=_e.to?_e:$.doc.lineAt(j.to),tt=g.length-1;tt>=0&&g[tt].to>_e.from?g[tt].to=et.to:g.push({from:_e.from+/^\s*/.exec(_e.text)[0].length,to:et.to})}return g}function changeBlockComment($,g,j=g.selection.ranges){let _e=j.map(tt=>getConfig(g,tt.from).block);if(!_e.every(tt=>tt))return null;let et=j.map((tt,nt)=>findBlockComment(g,_e[nt],tt.from,tt.to));if($!=2&&!et.every(tt=>tt))return{changes:g.changes(j.map((tt,nt)=>et[nt]?[]:[{from:tt.from,insert:_e[nt].open+" "},{from:tt.to,insert:" "+_e[nt].close}]))};if($!=1&&et.some(tt=>tt)){let tt=[];for(let nt=0,rt;nt<et.length;nt++)if(rt=et[nt]){let it=_e[nt],{open:st,close:ot}=rt;tt.push({from:st.pos-it.open.length,to:st.pos+st.margin},{from:ot.pos-ot.margin,to:ot.pos+it.close.length})}return{changes:tt}}return null}function changeLineComment($,g,j=g.selection.ranges){let _e=[],et=-1;for(let{from:tt,to:nt}of j){let rt=_e.length,it=1e9,st=getConfig(g,tt).line;if(st){for(let ot=tt;ot<=nt;){let at=g.doc.lineAt(ot);if(at.from>et&&(tt==nt||nt>at.from)){et=at.from;let lt=/^\s*/.exec(at.text)[0].length,ut=lt==at.length,ht=at.text.slice(lt,lt+st.length)==st?lt:-1;lt<at.text.length&&lt<it&&(it=lt),_e.push({line:at,comment:ht,token:st,indent:lt,empty:ut,single:!1})}ot=at.to+1}if(it<1e9)for(let ot=rt;ot<_e.length;ot++)_e[ot].indent<_e[ot].line.text.length&&(_e[ot].indent=it);_e.length==rt+1&&(_e[rt].single=!0)}}if($!=2&&_e.some(tt=>tt.comment<0&&(!tt.empty||tt.single))){let tt=[];for(let{line:rt,token:it,indent:st,empty:ot,single:at}of _e)(at||!ot)&&tt.push({from:rt.from+st,insert:it+" "});let nt=g.changes(tt);return{changes:nt,selection:g.selection.map(nt,1)}}else if($!=1&&_e.some(tt=>tt.comment>=0)){let tt=[];for(let{line:nt,comment:rt,token:it}of _e)if(rt>=0){let st=nt.from+rt,ot=st+it.length;nt.text[ot-nt.from]==" "&&ot++,tt.push({from:st,to:ot})}return{changes:tt}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine($){return combineConfig($,{minDepth:100,newGroupDelay:500,joinToEvent:(g,j)=>j},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(g,j)=>(_e,et)=>g(_e,et)||j(_e,et)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update($,g){let j=g.state.facet(historyConfig),_e=g.annotation(fromHistory);if(_e){let it=HistEvent.fromTransaction(g,_e.selection),st=_e.side,ot=st==0?$.undone:$.done;return it?ot=updateBranch(ot,ot.length,j.minDepth,it):ot=addSelection(ot,g.startState.selection),new HistoryState(st==0?_e.rest:ot,st==0?ot:_e.rest)}let et=g.annotation(isolateHistory);if((et=="full"||et=="before")&&($=$.isolate()),g.annotation(Transaction.addToHistory)===!1)return g.changes.empty?$:$.addMapping(g.changes.desc);let tt=HistEvent.fromTransaction(g),nt=g.annotation(Transaction.time),rt=g.annotation(Transaction.userEvent);return tt?$=$.addChanges(tt,nt,rt,j,g):g.selection&&($=$.addSelection(g.startState.selection,nt,rt,j.newGroupDelay)),(et=="full"||et=="after")&&($=$.isolate()),$},toJSON($){return{done:$.done.map(g=>g.toJSON()),undone:$.undone.map(g=>g.toJSON())}},fromJSON($){return new HistoryState($.done.map(HistEvent.fromJSON),$.undone.map(HistEvent.fromJSON))}});function history($={}){return[historyField_,historyConfig.of($),EditorView.domEventHandlers({beforeinput(g,j){let _e=g.inputType=="historyUndo"?undo$3:g.inputType=="historyRedo"?redo:null;return _e?(g.preventDefault(),_e(j)):!1}})]}function cmd($,g){return function({state:j,dispatch:_e}){if(!g&&j.readOnly)return!1;let et=j.field(historyField_,!1);if(!et)return!1;let tt=et.pop($,j,g);return tt?(_e(tt),!0):!1}}const undo$3=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(g,j,_e,et,tt){this.changes=g,this.effects=j,this.mapped=_e,this.startSelection=et,this.selectionsAfter=tt}setSelAfter(g){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,g)}toJSON(){var g,j,_e;return{changes:(g=this.changes)===null||g===void 0?void 0:g.toJSON(),mapped:(j=this.mapped)===null||j===void 0?void 0:j.toJSON(),startSelection:(_e=this.startSelection)===null||_e===void 0?void 0:_e.toJSON(),selectionsAfter:this.selectionsAfter.map(et=>et.toJSON())}}static fromJSON(g){return new HistEvent(g.changes&&ChangeSet.fromJSON(g.changes),[],g.mapped&&ChangeDesc.fromJSON(g.mapped),g.startSelection&&EditorSelection.fromJSON(g.startSelection),g.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(g,j){let _e=none$2;for(let et of g.startState.facet(invertedEffects)){let tt=et(g);tt.length&&(_e=_e.concat(tt))}return!_e.length&&g.changes.empty?null:new HistEvent(g.changes.invert(g.startState.doc),_e,void 0,j||g.startState.selection,none$2)}static selection(g){return new HistEvent(void 0,none$2,void 0,void 0,g)}}function updateBranch($,g,j,_e){let et=g+1>j+20?g-j-1:0,tt=$.slice(et,g);return tt.push(_e),tt}function isAdjacent($,g){let j=[],_e=!1;return $.iterChangedRanges((et,tt)=>j.push(et,tt)),g.iterChangedRanges((et,tt,nt,rt)=>{for(let it=0;it<j.length;){let st=j[it++],ot=j[it++];rt>=st&&nt<=ot&&(_e=!0)}}),_e}function eqSelectionShape($,g){return $.ranges.length==g.ranges.length&&$.ranges.filter((j,_e)=>j.empty!=g.ranges[_e].empty).length===0}function conc($,g){return $.length?g.length?$.concat(g):$:g}const none$2=[],MaxSelectionsPerEvent=200;function addSelection($,g){if($.length){let j=$[$.length-1],_e=j.selectionsAfter.slice(Math.max(0,j.selectionsAfter.length-MaxSelectionsPerEvent));return _e.length&&_e[_e.length-1].eq(g)?$:(_e.push(g),updateBranch($,$.length-1,1e9,j.setSelAfter(_e)))}else return[HistEvent.selection([g])]}function popSelection($){let g=$[$.length-1],j=$.slice();return j[$.length-1]=g.setSelAfter(g.selectionsAfter.slice(0,g.selectionsAfter.length-1)),j}function addMappingToBranch($,g){if(!$.length)return $;let j=$.length,_e=none$2;for(;j;){let et=mapEvent($[j-1],g,_e);if(et.changes&&!et.changes.empty||et.effects.length){let tt=$.slice(0,j);return tt[j-1]=et,tt}else g=et.mapped,j--,_e=et.selectionsAfter}return _e.length?[HistEvent.selection(_e)]:none$2}function mapEvent($,g,j){let _e=conc($.selectionsAfter.length?$.selectionsAfter.map(rt=>rt.map(g)):none$2,j);if(!$.changes)return HistEvent.selection(_e);let et=$.changes.map(g),tt=g.mapDesc($.changes,!0),nt=$.mapped?$.mapped.composeDesc(tt):tt;return new HistEvent(et,StateEffect.mapEffects($.effects,g),nt,$.startSelection.map(tt),_e)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(g,j,_e=0,et=void 0){this.done=g,this.undone=j,this.prevTime=_e,this.prevUserEvent=et}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(g,j,_e,et,tt){let nt=this.done,rt=nt[nt.length-1];return rt&&rt.changes&&!rt.changes.empty&&g.changes&&(!_e||joinableUserEvent.test(_e))&&(!rt.selectionsAfter.length&&j-this.prevTime<et.newGroupDelay&&et.joinToEvent(tt,isAdjacent(rt.changes,g.changes))||_e=="input.type.compose")?nt=updateBranch(nt,nt.length-1,et.minDepth,new HistEvent(g.changes.compose(rt.changes),conc(g.effects,rt.effects),rt.mapped,rt.startSelection,none$2)):nt=updateBranch(nt,nt.length,et.minDepth,g),new HistoryState(nt,none$2,j,_e)}addSelection(g,j,_e,et){let tt=this.done.length?this.done[this.done.length-1].selectionsAfter:none$2;return tt.length>0&&j-this.prevTime<et&&_e==this.prevUserEvent&&_e&&/^select($|\.)/.test(_e)&&eqSelectionShape(tt[tt.length-1],g)?this:new HistoryState(addSelection(this.done,g),this.undone,j,_e)}addMapping(g){return new HistoryState(addMappingToBranch(this.done,g),addMappingToBranch(this.undone,g),this.prevTime,this.prevUserEvent)}pop(g,j,_e){let et=g==0?this.done:this.undone;if(et.length==0)return null;let tt=et[et.length-1],nt=tt.selectionsAfter[0]||j.selection;if(_e&&tt.selectionsAfter.length)return j.update({selection:tt.selectionsAfter[tt.selectionsAfter.length-1],annotations:fromHistory.of({side:g,rest:popSelection(et),selection:nt}),userEvent:g==0?"select.undo":"select.redo",scrollIntoView:!0});if(tt.changes){let rt=et.length==1?none$2:et.slice(0,et.length-1);return tt.mapped&&(rt=addMappingToBranch(rt,tt.mapped)),j.update({changes:tt.changes,selection:tt.startSelection,effects:tt.effects,annotations:fromHistory.of({side:g,rest:rt,selection:nt}),filter:!1,userEvent:g==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$2,none$2);const historyKeymap=[{key:"Mod-z",run:undo$3,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel($,g){return EditorSelection.create($.ranges.map(g),$.mainIndex)}function setSel($,g){return $.update({selection:g,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:$,dispatch:g},j){let _e=updateSel($.selection,j);return _e.eq($.selection,!0)?!1:(g(setSel($,_e)),!0)}function rangeEnd($,g){return EditorSelection.cursor(g?$.to:$.from)}function cursorByChar($,g){return moveSel($,j=>j.empty?$.moveByChar(j,g):rangeEnd(j,g))}function ltrAtCursor($){return $.textDirectionAt($.state.selection.main.head)==Direction.LTR}const cursorCharLeft=$=>cursorByChar($,!ltrAtCursor($)),cursorCharRight=$=>cursorByChar($,ltrAtCursor($));function cursorByGroup($,g){return moveSel($,j=>j.empty?$.moveByGroup(j,g):rangeEnd(j,g))}const cursorGroupLeft=$=>cursorByGroup($,!ltrAtCursor($)),cursorGroupRight=$=>cursorByGroup($,ltrAtCursor($));function interestingNode($,g,j){if(g.type.prop(j))return!0;let _e=g.to-g.from;return _e&&(_e>2||/[^\s,.;:]/.test($.sliceDoc(g.from,g.to)))||g.firstChild}function moveBySyntax($,g,j){let _e=syntaxTree($).resolveInner(g.head),et=j?NodeProp.closedBy:NodeProp.openedBy;for(let it=g.head;;){let st=j?_e.childAfter(it):_e.childBefore(it);if(!st)break;interestingNode($,st,et)?_e=st:it=j?st.to:st.from}let tt=_e.type.prop(et),nt,rt;return tt&&(nt=j?matchBrackets($,_e.from,1):matchBrackets($,_e.to,-1))&&nt.matched?rt=j?nt.end.to:nt.end.from:rt=j?_e.to:_e.from,EditorSelection.cursor(rt,j?-1:1)}const cursorSyntaxLeft=$=>moveSel($,g=>moveBySyntax($.state,g,!ltrAtCursor($))),cursorSyntaxRight=$=>moveSel($,g=>moveBySyntax($.state,g,ltrAtCursor($)));function cursorByLine($,g){return moveSel($,j=>{if(!j.empty)return rangeEnd(j,g);let _e=$.moveVertically(j,g);return _e.head!=j.head?_e:$.moveToLineBoundary(j,g)})}const cursorLineUp=$=>cursorByLine($,!1),cursorLineDown=$=>cursorByLine($,!0);function pageInfo($){let g=$.scrollDOM.clientHeight<$.scrollDOM.scrollHeight-2,j=0,_e=0,et;if(g){for(let tt of $.state.facet(EditorView.scrollMargins)){let nt=tt($);nt!=null&&nt.top&&(j=Math.max(nt==null?void 0:nt.top,j)),nt!=null&&nt.bottom&&(_e=Math.max(nt==null?void 0:nt.bottom,_e))}et=$.scrollDOM.clientHeight-j-_e}else et=($.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:j,marginBottom:_e,selfScroll:g,height:Math.max($.defaultLineHeight,et-5)}}function cursorByPage($,g){let j=pageInfo($),{state:_e}=$,et=updateSel(_e.selection,nt=>nt.empty?$.moveVertically(nt,g,j.height):rangeEnd(nt,g));if(et.eq(_e.selection))return!1;let tt;if(j.selfScroll){let nt=$.coordsAtPos(_e.selection.main.head),rt=$.scrollDOM.getBoundingClientRect(),it=rt.top+j.marginTop,st=rt.bottom-j.marginBottom;nt&&nt.top>it&&nt.bottom<st&&(tt=EditorView.scrollIntoView(et.main.head,{y:"start",yMargin:nt.top-it}))}return $.dispatch(setSel(_e,et),{effects:tt}),!0}const cursorPageUp=$=>cursorByPage($,!1),cursorPageDown=$=>cursorByPage($,!0);function moveByLineBoundary($,g,j){let _e=$.lineBlockAt(g.head),et=$.moveToLineBoundary(g,j);if(et.head==g.head&&et.head!=(j?_e.to:_e.from)&&(et=$.moveToLineBoundary(g,j,!1)),!j&&et.head==_e.from&&_e.length){let tt=/^\s*/.exec($.state.sliceDoc(_e.from,Math.min(_e.from+100,_e.to)))[0].length;tt&&g.head!=_e.from+tt&&(et=EditorSelection.cursor(_e.from+tt))}return et}const cursorLineBoundaryForward=$=>moveSel($,g=>moveByLineBoundary($,g,!0)),cursorLineBoundaryBackward=$=>moveSel($,g=>moveByLineBoundary($,g,!1)),cursorLineBoundaryLeft=$=>moveSel($,g=>moveByLineBoundary($,g,!ltrAtCursor($))),cursorLineBoundaryRight=$=>moveSel($,g=>moveByLineBoundary($,g,ltrAtCursor($))),cursorLineStart=$=>moveSel($,g=>EditorSelection.cursor($.lineBlockAt(g.head).from,1)),cursorLineEnd=$=>moveSel($,g=>EditorSelection.cursor($.lineBlockAt(g.head).to,-1));function toMatchingBracket($,g,j){let _e=!1,et=updateSel($.selection,tt=>{let nt=matchBrackets($,tt.head,-1)||matchBrackets($,tt.head,1)||tt.head>0&&matchBrackets($,tt.head-1,1)||tt.head<$.doc.length&&matchBrackets($,tt.head+1,-1);if(!nt||!nt.end)return tt;_e=!0;let rt=nt.start.from==tt.head?nt.end.to:nt.end.from;return j?EditorSelection.range(tt.anchor,rt):EditorSelection.cursor(rt)});return _e?(g(setSel($,et)),!0):!1}const cursorMatchingBracket=({state:$,dispatch:g})=>toMatchingBracket($,g,!1);function extendSel($,g){let j=updateSel($.state.selection,_e=>{let et=g(_e);return EditorSelection.range(_e.anchor,et.head,et.goalColumn,et.bidiLevel||void 0)});return j.eq($.state.selection)?!1:($.dispatch(setSel($.state,j)),!0)}function selectByChar($,g){return extendSel($,j=>$.moveByChar(j,g))}const selectCharLeft=$=>selectByChar($,!ltrAtCursor($)),selectCharRight=$=>selectByChar($,ltrAtCursor($));function selectByGroup($,g){return extendSel($,j=>$.moveByGroup(j,g))}const selectGroupLeft=$=>selectByGroup($,!ltrAtCursor($)),selectGroupRight=$=>selectByGroup($,ltrAtCursor($)),selectSyntaxLeft=$=>extendSel($,g=>moveBySyntax($.state,g,!ltrAtCursor($))),selectSyntaxRight=$=>extendSel($,g=>moveBySyntax($.state,g,ltrAtCursor($)));function selectByLine($,g){return extendSel($,j=>$.moveVertically(j,g))}const selectLineUp=$=>selectByLine($,!1),selectLineDown=$=>selectByLine($,!0);function selectByPage($,g){return extendSel($,j=>$.moveVertically(j,g,pageInfo($).height))}const selectPageUp=$=>selectByPage($,!1),selectPageDown=$=>selectByPage($,!0),selectLineBoundaryForward=$=>extendSel($,g=>moveByLineBoundary($,g,!0)),selectLineBoundaryBackward=$=>extendSel($,g=>moveByLineBoundary($,g,!1)),selectLineBoundaryLeft=$=>extendSel($,g=>moveByLineBoundary($,g,!ltrAtCursor($))),selectLineBoundaryRight=$=>extendSel($,g=>moveByLineBoundary($,g,ltrAtCursor($))),selectLineStart=$=>extendSel($,g=>EditorSelection.cursor($.lineBlockAt(g.head).from)),selectLineEnd=$=>extendSel($,g=>EditorSelection.cursor($.lineBlockAt(g.head).to)),cursorDocStart=({state:$,dispatch:g})=>(g(setSel($,{anchor:0})),!0),cursorDocEnd=({state:$,dispatch:g})=>(g(setSel($,{anchor:$.doc.length})),!0),selectDocStart=({state:$,dispatch:g})=>(g(setSel($,{anchor:$.selection.main.anchor,head:0})),!0),selectDocEnd=({state:$,dispatch:g})=>(g(setSel($,{anchor:$.selection.main.anchor,head:$.doc.length})),!0),selectAll=({state:$,dispatch:g})=>(g($.update({selection:{anchor:0,head:$.doc.length},userEvent:"select"})),!0),selectLine=({state:$,dispatch:g})=>{let j=selectedLineBlocks($).map(({from:_e,to:et})=>EditorSelection.range(_e,Math.min(et+1,$.doc.length)));return g($.update({selection:EditorSelection.create(j),userEvent:"select"})),!0},selectParentSyntax=({state:$,dispatch:g})=>{let j=updateSel($.selection,_e=>{var et;let tt=syntaxTree($).resolveStack(_e.from,1);for(let nt=tt;nt;nt=nt.next){let{node:rt}=nt;if((rt.from<_e.from&&rt.to>=_e.to||rt.to>_e.to&&rt.from<=_e.from)&&(!((et=rt.parent)===null||et===void 0)&&et.parent))return EditorSelection.range(rt.to,rt.from)}return _e});return g(setSel($,j)),!0},simplifySelection=({state:$,dispatch:g})=>{let j=$.selection,_e=null;return j.ranges.length>1?_e=EditorSelection.create([j.main]):j.main.empty||(_e=EditorSelection.create([EditorSelection.cursor(j.main.head)])),_e?(g(setSel($,_e)),!0):!1};function deleteBy($,g){if($.state.readOnly)return!1;let j="delete.selection",{state:_e}=$,et=_e.changeByRange(tt=>{let{from:nt,to:rt}=tt;if(nt==rt){let it=g(tt);it<nt?(j="delete.backward",it=skipAtomic($,it,!1)):it>nt&&(j="delete.forward",it=skipAtomic($,it,!0)),nt=Math.min(nt,it),rt=Math.max(rt,it)}else nt=skipAtomic($,nt,!1),rt=skipAtomic($,rt,!0);return nt==rt?{range:tt}:{changes:{from:nt,to:rt},range:EditorSelection.cursor(nt,nt<tt.head?-1:1)}});return et.changes.empty?!1:($.dispatch(_e.update(et,{scrollIntoView:!0,userEvent:j,effects:j=="delete.selection"?EditorView.announce.of(_e.phrase("Selection deleted")):void 0})),!0)}function skipAtomic($,g,j){if($ instanceof EditorView)for(let _e of $.state.facet(EditorView.atomicRanges).map(et=>et($)))_e.between(g,g,(et,tt)=>{et<g&&tt>g&&(g=j?tt:et)});return g}const deleteByChar=($,g)=>deleteBy($,j=>{let _e=j.from,{state:et}=$,tt=et.doc.lineAt(_e),nt,rt;if(!g&&_e>tt.from&&_e<tt.from+200&&!/[^ \t]/.test(nt=tt.text.slice(0,_e-tt.from))){if(nt[nt.length-1]=="	")return _e-1;let it=countColumn(nt,et.tabSize),st=it%getIndentUnit(et)||getIndentUnit(et);for(let ot=0;ot<st&&nt[nt.length-1-ot]==" ";ot++)_e--;rt=_e}else rt=findClusterBreak(tt.text,_e-tt.from,g,g)+tt.from,rt==_e&&tt.number!=(g?et.doc.lines:1)?rt+=g?1:-1:!g&&/[\ufe00-\ufe0f]/.test(tt.text.slice(rt-tt.from,_e-tt.from))&&(rt=findClusterBreak(tt.text,rt-tt.from,!1,!1)+tt.from);return rt}),deleteCharBackward=$=>deleteByChar($,!1),deleteCharForward=$=>deleteByChar($,!0),deleteByGroup=($,g)=>deleteBy($,j=>{let _e=j.head,{state:et}=$,tt=et.doc.lineAt(_e),nt=et.charCategorizer(_e);for(let rt=null;;){if(_e==(g?tt.to:tt.from)){_e==j.head&&tt.number!=(g?et.doc.lines:1)&&(_e+=g?1:-1);break}let it=findClusterBreak(tt.text,_e-tt.from,g)+tt.from,st=tt.text.slice(Math.min(_e,it)-tt.from,Math.max(_e,it)-tt.from),ot=nt(st);if(rt!=null&&ot!=rt)break;(st!=" "||_e!=j.head)&&(rt=ot),_e=it}return _e}),deleteGroupBackward=$=>deleteByGroup($,!1),deleteGroupForward=$=>deleteByGroup($,!0),deleteToLineEnd=$=>deleteBy($,g=>{let j=$.lineBlockAt(g.head).to;return g.head<j?j:Math.min($.state.doc.length,g.head+1)}),deleteLineBoundaryBackward=$=>deleteBy($,g=>{let j=$.moveToLineBoundary(g,!1).head;return g.head>j?j:Math.max(0,g.head-1)}),deleteLineBoundaryForward=$=>deleteBy($,g=>{let j=$.moveToLineBoundary(g,!0).head;return g.head<j?j:Math.min($.state.doc.length,g.head+1)}),splitLine=({state:$,dispatch:g})=>{if($.readOnly)return!1;let j=$.changeByRange(_e=>({changes:{from:_e.from,to:_e.to,insert:Text.of(["",""])},range:EditorSelection.cursor(_e.from)}));return g($.update(j,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:$,dispatch:g})=>{if($.readOnly)return!1;let j=$.changeByRange(_e=>{if(!_e.empty||_e.from==0||_e.from==$.doc.length)return{range:_e};let et=_e.from,tt=$.doc.lineAt(et),nt=et==tt.from?et-1:findClusterBreak(tt.text,et-tt.from,!1)+tt.from,rt=et==tt.to?et+1:findClusterBreak(tt.text,et-tt.from,!0)+tt.from;return{changes:{from:nt,to:rt,insert:$.doc.slice(et,rt).append($.doc.slice(nt,et))},range:EditorSelection.cursor(rt)}});return j.changes.empty?!1:(g($.update(j,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks($){let g=[],j=-1;for(let _e of $.selection.ranges){let et=$.doc.lineAt(_e.from),tt=$.doc.lineAt(_e.to);if(!_e.empty&&_e.to==tt.from&&(tt=$.doc.lineAt(_e.to-1)),j>=et.number){let nt=g[g.length-1];nt.to=tt.to,nt.ranges.push(_e)}else g.push({from:et.from,to:tt.to,ranges:[_e]});j=tt.number+1}return g}function moveLine($,g,j){if($.readOnly)return!1;let _e=[],et=[];for(let tt of selectedLineBlocks($)){if(j?tt.to==$.doc.length:tt.from==0)continue;let nt=$.doc.lineAt(j?tt.to+1:tt.from-1),rt=nt.length+1;if(j){_e.push({from:tt.to,to:nt.to},{from:tt.from,insert:nt.text+$.lineBreak});for(let it of tt.ranges)et.push(EditorSelection.range(Math.min($.doc.length,it.anchor+rt),Math.min($.doc.length,it.head+rt)))}else{_e.push({from:nt.from,to:tt.from},{from:tt.to,insert:$.lineBreak+nt.text});for(let it of tt.ranges)et.push(EditorSelection.range(it.anchor-rt,it.head-rt))}}return _e.length?(g($.update({changes:_e,scrollIntoView:!0,selection:EditorSelection.create(et,$.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:$,dispatch:g})=>moveLine($,g,!1),moveLineDown=({state:$,dispatch:g})=>moveLine($,g,!0);function copyLine($,g,j){if($.readOnly)return!1;let _e=[];for(let et of selectedLineBlocks($))j?_e.push({from:et.from,insert:$.doc.slice(et.from,et.to)+$.lineBreak}):_e.push({from:et.to,insert:$.lineBreak+$.doc.slice(et.from,et.to)});return g($.update({changes:_e,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:$,dispatch:g})=>copyLine($,g,!1),copyLineDown=({state:$,dispatch:g})=>copyLine($,g,!0),deleteLine=$=>{if($.state.readOnly)return!1;let{state:g}=$,j=g.changes(selectedLineBlocks(g).map(({from:et,to:tt})=>(et>0?et--:tt<g.doc.length&&tt++,{from:et,to:tt}))),_e=updateSel(g.selection,et=>$.moveVertically(et,!0)).map(j);return $.dispatch({changes:j,selection:_e,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets($,g){if(/\(\)|\[\]|\{\}/.test($.sliceDoc(g-1,g+1)))return{from:g,to:g};let j=syntaxTree($).resolveInner(g),_e=j.childBefore(g),et=j.childAfter(g),tt;return _e&&et&&_e.to<=g&&et.from>=g&&(tt=_e.type.prop(NodeProp.closedBy))&&tt.indexOf(et.name)>-1&&$.doc.lineAt(_e.to).from==$.doc.lineAt(et.from).from&&!/\S/.test($.sliceDoc(_e.to,et.from))?{from:_e.to,to:et.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent($){return({state:g,dispatch:j})=>{if(g.readOnly)return!1;let _e=g.changeByRange(et=>{let{from:tt,to:nt}=et,rt=g.doc.lineAt(tt),it=!$&&tt==nt&&isBetweenBrackets(g,tt);$&&(tt=nt=(nt<=rt.to?rt:g.doc.lineAt(nt)).to);let st=new IndentContext(g,{simulateBreak:tt,simulateDoubleBreak:!!it}),ot=getIndentation(st,tt);for(ot==null&&(ot=countColumn(/^\s*/.exec(g.doc.lineAt(tt).text)[0],g.tabSize));nt<rt.to&&/\s/.test(rt.text[nt-rt.from]);)nt++;it?{from:tt,to:nt}=it:tt>rt.from&&tt<rt.from+100&&!/\S/.test(rt.text.slice(0,tt))&&(tt=rt.from);let at=["",indentString(g,ot)];return it&&at.push(indentString(g,st.lineIndent(rt.from,-1))),{changes:{from:tt,to:nt,insert:Text.of(at)},range:EditorSelection.cursor(tt+1+at[1].length)}});return j(g.update(_e,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine($,g){let j=-1;return $.changeByRange(_e=>{let et=[];for(let nt=_e.from;nt<=_e.to;){let rt=$.doc.lineAt(nt);rt.number>j&&(_e.empty||_e.to>rt.from)&&(g(rt,et,_e),j=rt.number),nt=rt.to+1}let tt=$.changes(et);return{changes:et,range:EditorSelection.range(tt.mapPos(_e.anchor,1),tt.mapPos(_e.head,1))}})}const indentSelection=({state:$,dispatch:g})=>{if($.readOnly)return!1;let j=Object.create(null),_e=new IndentContext($,{overrideIndentation:tt=>{let nt=j[tt];return nt??-1}}),et=changeBySelectedLine($,(tt,nt,rt)=>{let it=getIndentation(_e,tt.from);if(it==null)return;/\S/.test(tt.text)||(it=0);let st=/^\s*/.exec(tt.text)[0],ot=indentString($,it);(st!=ot||rt.from<tt.from+st.length)&&(j[tt.from]=it,nt.push({from:tt.from,to:tt.from+st.length,insert:ot}))});return et.changes.empty||g($.update(et,{userEvent:"indent"})),!0},indentMore=({state:$,dispatch:g})=>$.readOnly?!1:(g($.update(changeBySelectedLine($,(j,_e)=>{_e.push({from:j.from,insert:$.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:$,dispatch:g})=>$.readOnly?!1:(g($.update(changeBySelectedLine($,(j,_e)=>{let et=/^\s*/.exec(j.text)[0];if(!et)return;let tt=countColumn(et,$.tabSize),nt=0,rt=indentString($,Math.max(0,tt-getIndentUnit($)));for(;nt<et.length&&nt<rt.length&&et.charCodeAt(nt)==rt.charCodeAt(nt);)nt++;_e.push({from:j.from+nt,to:j.from+et.length,insert:rt.slice(nt)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map($=>({mac:$.key,run:$.run,shift:$.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var $=arguments[0];typeof $=="string"&&($=document.createElement($));var g=1,j=arguments[1];if(j&&typeof j=="object"&&j.nodeType==null&&!Array.isArray(j)){for(var _e in j)if(Object.prototype.hasOwnProperty.call(j,_e)){var et=j[_e];typeof et=="string"?$.setAttribute(_e,et):et!=null&&($[_e]=et)}g++}for(;g<arguments.length;g++)add($,arguments[g]);return $}function add($,g){if(typeof g=="string")$.appendChild(document.createTextNode(g));else if(g!=null)if(g.nodeType!=null)$.appendChild(g);else if(Array.isArray(g))for(var j=0;j<g.length;j++)add($,g[j]);else throw new RangeError("Unsupported child node: "+g)}const basicNormalize=typeof String.prototype.normalize=="function"?$=>$.normalize("NFKD"):$=>$;class SearchCursor{constructor(g,j,_e=0,et=g.length,tt,nt){this.test=nt,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=g.iterRange(_e,et),this.bufferStart=_e,this.normalize=tt?rt=>tt(basicNormalize(rt)):basicNormalize,this.query=this.normalize(j)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let g=this.peek();if(g<0)return this.done=!0,this;let j=fromCodePoint(g),_e=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(g);let et=this.normalize(j);for(let tt=0,nt=_e;;tt++){let rt=et.charCodeAt(tt),it=this.match(rt,nt);if(tt==et.length-1){if(it)return this.value=it,this;break}nt==_e&&tt<j.length&&j.charCodeAt(tt)==rt&&nt++}}}match(g,j){let _e=null;for(let et=0;et<this.matches.length;et+=2){let tt=this.matches[et],nt=!1;this.query.charCodeAt(tt)==g&&(tt==this.query.length-1?_e={from:this.matches[et+1],to:j+1}:(this.matches[et]++,nt=!0)),nt||(this.matches.splice(et,2),et-=2)}return this.query.charCodeAt(0)==g&&(this.query.length==1?_e={from:j,to:j+1}:this.matches.push(1,j)),_e&&this.test&&!this.test(_e.from,_e.to,this.buffer,this.bufferStart)&&(_e=null),_e}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty$1={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(g,j,_e,et=0,tt=g.length){if(this.text=g,this.to=tt,this.curLine="",this.done=!1,this.value=empty$1,/\\[sWDnr]|\n|\r|\[\^/.test(j))return new MultilineRegExpCursor(g,j,_e,et,tt);this.re=new RegExp(j,baseFlags+(_e!=null&&_e.ignoreCase?"i":"")),this.test=_e==null?void 0:_e.test,this.iter=g.iter();let nt=g.lineAt(et);this.curLineStart=nt.from,this.matchPos=toCharEnd(g,et),this.getLine(this.curLineStart)}getLine(g){this.iter.next(g),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let g=this.matchPos-this.curLineStart;;){this.re.lastIndex=g;let j=this.matchPos<=this.to&&this.re.exec(this.curLine);if(j){let _e=this.curLineStart+j.index,et=_e+j[0].length;if(this.matchPos=toCharEnd(this.text,et+(_e==et?1:0)),_e==this.curLineStart+this.curLine.length&&this.nextLine(),(_e<et||_e>this.value.to)&&(!this.test||this.test(_e,et,j)))return this.value={from:_e,to:et,match:j},this;g=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),g=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(g,j){this.from=g,this.text=j}get to(){return this.from+this.text.length}static get(g,j,_e){let et=flattened.get(g);if(!et||et.from>=_e||et.to<=j){let rt=new FlattenedDoc(j,g.sliceString(j,_e));return flattened.set(g,rt),rt}if(et.from==j&&et.to==_e)return et;let{text:tt,from:nt}=et;return nt>j&&(tt=g.sliceString(j,nt)+tt,nt=j),et.to<_e&&(tt+=g.sliceString(et.to,_e)),flattened.set(g,new FlattenedDoc(nt,tt)),new FlattenedDoc(j,tt.slice(j-nt,_e-nt))}}class MultilineRegExpCursor{constructor(g,j,_e,et,tt){this.text=g,this.to=tt,this.done=!1,this.value=empty$1,this.matchPos=toCharEnd(g,et),this.re=new RegExp(j,baseFlags+(_e!=null&&_e.ignoreCase?"i":"")),this.test=_e==null?void 0:_e.test,this.flat=FlattenedDoc.get(g,et,this.chunkEnd(et+5e3))}chunkEnd(g){return g>=this.to?this.to:this.text.lineAt(g).to}next(){for(;;){let g=this.re.lastIndex=this.matchPos-this.flat.from,j=this.re.exec(this.flat.text);if(j&&!j[0]&&j.index==g&&(this.re.lastIndex=g+1,j=this.re.exec(this.flat.text)),j){let _e=this.flat.from+j.index,et=_e+j[0].length;if((this.flat.to>=this.to||j.index+j[0].length<=this.flat.text.length-10)&&(!this.test||this.test(_e,et,j)))return this.value={from:_e,to:et,match:j},this.matchPos=toCharEnd(this.text,et+(_e==et?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp($){try{return new RegExp($,baseFlags),!0}catch{return!1}}function toCharEnd($,g){if(g>=$.length)return g;let j=$.lineAt(g),_e;for(;g<j.to&&(_e=j.text.charCodeAt(g-j.from))>=56320&&_e<57344;)g++;return g}function createLineDialog($){let g=String($.state.doc.lineAt($.state.selection.main.head).number),j=crelt("input",{class:"cm-textfield",name:"line",value:g}),_e=crelt("form",{class:"cm-gotoLine",onkeydown:tt=>{tt.keyCode==27?(tt.preventDefault(),$.dispatch({effects:dialogEffect.of(!1)}),$.focus()):tt.keyCode==13&&(tt.preventDefault(),et())},onsubmit:tt=>{tt.preventDefault(),et()}},crelt("label",$.state.phrase("Go to line"),": ",j)," ",crelt("button",{class:"cm-button",type:"submit"},$.state.phrase("go")));function et(){let tt=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(j.value);if(!tt)return;let{state:nt}=$,rt=nt.doc.lineAt(nt.selection.main.head),[,it,st,ot,at]=tt,lt=ot?+ot.slice(1):0,ut=st?+st:rt.number;if(st&&at){let gt=ut/100;it&&(gt=gt*(it=="-"?-1:1)+rt.number/nt.doc.lines),ut=Math.round(nt.doc.lines*gt)}else st&&it&&(ut=ut*(it=="-"?-1:1)+rt.number);let ht=nt.doc.line(Math.max(1,Math.min(nt.doc.lines,ut))),ft=EditorSelection.cursor(ht.from+Math.max(0,Math.min(lt,ht.length)));$.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(ft.from,{y:"center"})],selection:ft}),$.focus()}return{dom:_e}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update($,g){for(let j of g.effects)j.is(dialogEffect)&&($=j.value);return $},provide:$=>showPanel.from($,g=>g?createLineDialog:null)}),gotoLine=$=>{let g=getPanel($,createLineDialog);if(!g){let j=[dialogEffect.of(!0)];$.state.field(dialogField,!1)==null&&j.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),$.dispatch({effects:j}),g=getPanel($,createLineDialog)}return g&&g.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine($){return combineConfig($,defaultHighlightOptions,{highlightWordAroundCursor:(g,j)=>g||j,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches($){let g=[defaultTheme,matchHighlighter];return $&&g.push(highlightConfig.of($)),g}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries($,g,j,_e){return(j==0||$(g.sliceDoc(j-1,j))!=CharCategory.Word)&&(_e==g.doc.length||$(g.sliceDoc(_e,_e+1))!=CharCategory.Word)}function insideWord($,g,j,_e){return $(g.sliceDoc(j,j+1))==CharCategory.Word&&$(g.sliceDoc(_e-1,_e))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor($){this.decorations=this.getDeco($)}update($){($.selectionSet||$.docChanged||$.viewportChanged)&&(this.decorations=this.getDeco($.view))}getDeco($){let g=$.state.facet(highlightConfig),{state:j}=$,_e=j.selection;if(_e.ranges.length>1)return Decoration.none;let et=_e.main,tt,nt=null;if(et.empty){if(!g.highlightWordAroundCursor)return Decoration.none;let it=j.wordAt(et.head);if(!it)return Decoration.none;nt=j.charCategorizer(et.head),tt=j.sliceDoc(it.from,it.to)}else{let it=et.to-et.from;if(it<g.minSelectionLength||it>200)return Decoration.none;if(g.wholeWords){if(tt=j.sliceDoc(et.from,et.to),nt=j.charCategorizer(et.head),!(insideWordBoundaries(nt,j,et.from,et.to)&&insideWord(nt,j,et.from,et.to)))return Decoration.none}else if(tt=j.sliceDoc(et.from,et.to).trim(),!tt)return Decoration.none}let rt=[];for(let it of $.visibleRanges){let st=new SearchCursor(j.doc,tt,it.from,it.to);for(;!st.next().done;){let{from:ot,to:at}=st.value;if((!nt||insideWordBoundaries(nt,j,ot,at))&&(et.empty&&ot<=et.from&&at>=et.to?rt.push(mainMatchDeco.range(ot,at)):(ot>=et.to||at<=et.from)&&rt.push(matchDeco.range(ot,at)),rt.length>g.maxMatches))return Decoration.none}}return Decoration.set(rt)}},{decorations:$=>$.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:$,dispatch:g})=>{let{selection:j}=$,_e=EditorSelection.create(j.ranges.map(et=>$.wordAt(et.head)||EditorSelection.cursor(et.head)),j.mainIndex);return _e.eq(j)?!1:(g($.update({selection:_e})),!0)};function findNextOccurrence($,g){let{main:j,ranges:_e}=$.selection,et=$.wordAt(j.head),tt=et&&et.from==j.from&&et.to==j.to;for(let nt=!1,rt=new SearchCursor($.doc,g,_e[_e.length-1].to);;)if(rt.next(),rt.done){if(nt)return null;rt=new SearchCursor($.doc,g,0,Math.max(0,_e[_e.length-1].from-1)),nt=!0}else{if(nt&&_e.some(it=>it.from==rt.value.from))continue;if(tt){let it=$.wordAt(rt.value.from);if(!it||it.from!=rt.value.from||it.to!=rt.value.to)continue}return rt.value}}const selectNextOccurrence=({state:$,dispatch:g})=>{let{ranges:j}=$.selection;if(j.some(tt=>tt.from===tt.to))return selectWord({state:$,dispatch:g});let _e=$.sliceDoc(j[0].from,j[0].to);if($.selection.ranges.some(tt=>$.sliceDoc(tt.from,tt.to)!=_e))return!1;let et=findNextOccurrence($,_e);return et?(g($.update({selection:$.selection.addRange(EditorSelection.range(et.from,et.to),!1),effects:EditorView.scrollIntoView(et.to)})),!0):!1},searchConfigFacet=Facet.define({combine($){return combineConfig($,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:g=>new SearchPanel(g),scrollToMatch:g=>EditorView.scrollIntoView(g)})}});class SearchQuery{constructor(g){this.search=g.search,this.caseSensitive=!!g.caseSensitive,this.literal=!!g.literal,this.regexp=!!g.regexp,this.replace=g.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!g.wholeWord}unquote(g){return this.literal?g:g.replace(/\\([nrt\\])/g,(j,_e)=>_e=="n"?`
`:_e=="r"?"\r":_e=="t"?"	":"\\")}eq(g){return this.search==g.search&&this.replace==g.replace&&this.caseSensitive==g.caseSensitive&&this.regexp==g.regexp&&this.wholeWord==g.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(g,j=0,_e){let et=g.doc?g:EditorState.create({doc:g});return _e==null&&(_e=et.doc.length),this.regexp?regexpCursor(this,et,j,_e):stringCursor(this,et,j,_e)}}class QueryType{constructor(g){this.spec=g}}function stringCursor($,g,j,_e){return new SearchCursor(g.doc,$.unquoted,j,_e,$.caseSensitive?void 0:et=>et.toLowerCase(),$.wholeWord?stringWordTest(g.doc,g.charCategorizer(g.selection.main.head)):void 0)}function stringWordTest($,g){return(j,_e,et,tt)=>((tt>j||tt+et.length<_e)&&(tt=Math.max(0,j-2),et=$.sliceString(tt,Math.min($.length,_e+2))),(g(charBefore(et,j-tt))!=CharCategory.Word||g(charAfter(et,j-tt))!=CharCategory.Word)&&(g(charAfter(et,_e-tt))!=CharCategory.Word||g(charBefore(et,_e-tt))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(g){super(g)}nextMatch(g,j,_e){let et=stringCursor(this.spec,g,_e,g.doc.length).nextOverlapping();return et.done&&(et=stringCursor(this.spec,g,0,j).nextOverlapping()),et.done?null:et.value}prevMatchInRange(g,j,_e){for(let et=_e;;){let tt=Math.max(j,et-1e4-this.spec.unquoted.length),nt=stringCursor(this.spec,g,tt,et),rt=null;for(;!nt.nextOverlapping().done;)rt=nt.value;if(rt)return rt;if(tt==j)return null;et-=1e4}}prevMatch(g,j,_e){return this.prevMatchInRange(g,0,j)||this.prevMatchInRange(g,_e,g.doc.length)}getReplacement(g){return this.spec.unquote(this.spec.replace)}matchAll(g,j){let _e=stringCursor(this.spec,g,0,g.doc.length),et=[];for(;!_e.next().done;){if(et.length>=j)return null;et.push(_e.value)}return et}highlight(g,j,_e,et){let tt=stringCursor(this.spec,g,Math.max(0,j-this.spec.unquoted.length),Math.min(_e+this.spec.unquoted.length,g.doc.length));for(;!tt.next().done;)et(tt.value.from,tt.value.to)}}function regexpCursor($,g,j,_e){return new RegExpCursor(g.doc,$.search,{ignoreCase:!$.caseSensitive,test:$.wholeWord?regexpWordTest(g.charCategorizer(g.selection.main.head)):void 0},j,_e)}function charBefore($,g){return $.slice(findClusterBreak($,g,!1),g)}function charAfter($,g){return $.slice(g,findClusterBreak($,g))}function regexpWordTest($){return(g,j,_e)=>!_e[0].length||($(charBefore(_e.input,_e.index))!=CharCategory.Word||$(charAfter(_e.input,_e.index))!=CharCategory.Word)&&($(charAfter(_e.input,_e.index+_e[0].length))!=CharCategory.Word||$(charBefore(_e.input,_e.index+_e[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(g,j,_e){let et=regexpCursor(this.spec,g,_e,g.doc.length).next();return et.done&&(et=regexpCursor(this.spec,g,0,j).next()),et.done?null:et.value}prevMatchInRange(g,j,_e){for(let et=1;;et++){let tt=Math.max(j,_e-et*1e4),nt=regexpCursor(this.spec,g,tt,_e),rt=null;for(;!nt.next().done;)rt=nt.value;if(rt&&(tt==j||rt.from>tt+10))return rt;if(tt==j)return null}}prevMatch(g,j,_e){return this.prevMatchInRange(g,0,j)||this.prevMatchInRange(g,_e,g.doc.length)}getReplacement(g){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(j,_e)=>_e=="$"?"$":_e=="&"?g.match[0]:_e!="0"&&+_e<g.match.length?g.match[_e]:j)}matchAll(g,j){let _e=regexpCursor(this.spec,g,0,g.doc.length),et=[];for(;!_e.next().done;){if(et.length>=j)return null;et.push(_e.value)}return et}highlight(g,j,_e,et){let tt=regexpCursor(this.spec,g,Math.max(0,j-250),Math.min(_e+250,g.doc.length));for(;!tt.next().done;)et(tt.value.from,tt.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create($){return new SearchState(defaultQuery($).create(),null)},update($,g){for(let j of g.effects)j.is(setSearchQuery)?$=new SearchState(j.value.create(),$.panel):j.is(togglePanel$1)&&($=new SearchState($.query,j.value?createSearchPanel:null));return $},provide:$=>showPanel.from($,g=>g.panel)});class SearchState{constructor(g,j){this.query=g,this.panel=j}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor($){this.view=$,this.decorations=this.highlight($.state.field(searchState))}update($){let g=$.state.field(searchState);(g!=$.startState.field(searchState)||$.docChanged||$.selectionSet||$.viewportChanged)&&(this.decorations=this.highlight(g))}highlight({query:$,panel:g}){if(!g||!$.spec.valid)return Decoration.none;let{view:j}=this,_e=new RangeSetBuilder;for(let et=0,tt=j.visibleRanges,nt=tt.length;et<nt;et++){let{from:rt,to:it}=tt[et];for(;et<nt-1&&it>tt[et+1].from-2*250;)it=tt[++et].to;$.highlight(j.state,rt,it,(st,ot)=>{let at=j.state.selection.ranges.some(lt=>lt.from==st&&lt.to==ot);_e.add(st,ot,at?selectedMatchMark:matchMark)})}return _e.finish()}},{decorations:$=>$.decorations});function searchCommand($){return g=>{let j=g.state.field(searchState,!1);return j&&j.query.spec.valid?$(g,j):openSearchPanel(g)}}const findNext=searchCommand(($,{query:g})=>{let{to:j}=$.state.selection.main,_e=g.nextMatch($.state,j,j);if(!_e)return!1;let et=EditorSelection.single(_e.from,_e.to),tt=$.state.facet(searchConfigFacet);return $.dispatch({selection:et,effects:[announceMatch($,_e),tt.scrollToMatch(et.main,$)],userEvent:"select.search"}),selectSearchInput($),!0}),findPrevious=searchCommand(($,{query:g})=>{let{state:j}=$,{from:_e}=j.selection.main,et=g.prevMatch(j,_e,_e);if(!et)return!1;let tt=EditorSelection.single(et.from,et.to),nt=$.state.facet(searchConfigFacet);return $.dispatch({selection:tt,effects:[announceMatch($,et),nt.scrollToMatch(tt.main,$)],userEvent:"select.search"}),selectSearchInput($),!0}),selectMatches=searchCommand(($,{query:g})=>{let j=g.matchAll($.state,1e3);return!j||!j.length?!1:($.dispatch({selection:EditorSelection.create(j.map(_e=>EditorSelection.range(_e.from,_e.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:$,dispatch:g})=>{let j=$.selection;if(j.ranges.length>1||j.main.empty)return!1;let{from:_e,to:et}=j.main,tt=[],nt=0;for(let rt=new SearchCursor($.doc,$.sliceDoc(_e,et));!rt.next().done;){if(tt.length>1e3)return!1;rt.value.from==_e&&(nt=tt.length),tt.push(EditorSelection.range(rt.value.from,rt.value.to))}return g($.update({selection:EditorSelection.create(tt,nt),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand(($,{query:g})=>{let{state:j}=$,{from:_e,to:et}=j.selection.main;if(j.readOnly)return!1;let tt=g.nextMatch(j,_e,_e);if(!tt)return!1;let nt=[],rt,it,st=[];if(tt.from==_e&&tt.to==et&&(it=j.toText(g.getReplacement(tt)),nt.push({from:tt.from,to:tt.to,insert:it}),tt=g.nextMatch(j,tt.from,tt.to),st.push(EditorView.announce.of(j.phrase("replaced match on line $",j.doc.lineAt(_e).number)+"."))),tt){let ot=nt.length==0||nt[0].from>=tt.to?0:tt.to-tt.from-it.length;rt=EditorSelection.single(tt.from-ot,tt.to-ot),st.push(announceMatch($,tt)),st.push(j.facet(searchConfigFacet).scrollToMatch(rt.main,$))}return $.dispatch({changes:nt,selection:rt,effects:st,userEvent:"input.replace"}),!0}),replaceAll=searchCommand(($,{query:g})=>{if($.state.readOnly)return!1;let j=g.matchAll($.state,1e9).map(et=>{let{from:tt,to:nt}=et;return{from:tt,to:nt,insert:g.getReplacement(et)}});if(!j.length)return!1;let _e=$.state.phrase("replaced $ matches",j.length)+".";return $.dispatch({changes:j,effects:EditorView.announce.of(_e),userEvent:"input.replace.all"}),!0});function createSearchPanel($){return $.state.facet(searchConfigFacet).createPanel($)}function defaultQuery($,g){var j,_e,et,tt,nt;let rt=$.selection.main,it=rt.empty||rt.to>rt.from+100?"":$.sliceDoc(rt.from,rt.to);if(g&&!it)return g;let st=$.facet(searchConfigFacet);return new SearchQuery({search:((j=g==null?void 0:g.literal)!==null&&j!==void 0?j:st.literal)?it:it.replace(/\n/g,"\\n"),caseSensitive:(_e=g==null?void 0:g.caseSensitive)!==null&&_e!==void 0?_e:st.caseSensitive,literal:(et=g==null?void 0:g.literal)!==null&&et!==void 0?et:st.literal,regexp:(tt=g==null?void 0:g.regexp)!==null&&tt!==void 0?tt:st.regexp,wholeWord:(nt=g==null?void 0:g.wholeWord)!==null&&nt!==void 0?nt:st.wholeWord})}function getSearchInput($){let g=getPanel($,createSearchPanel);return g&&g.dom.querySelector("[main-field]")}function selectSearchInput($){let g=getSearchInput($);g&&g==$.root.activeElement&&g.select()}const openSearchPanel=$=>{let g=$.state.field(searchState,!1);if(g&&g.panel){let j=getSearchInput($);if(j&&j!=$.root.activeElement){let _e=defaultQuery($.state,g.query.spec);_e.valid&&$.dispatch({effects:setSearchQuery.of(_e)}),j.focus(),j.select()}}else $.dispatch({effects:[togglePanel$1.of(!0),g?setSearchQuery.of(defaultQuery($.state,g.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=$=>{let g=$.state.field(searchState,!1);if(!g||!g.panel)return!1;let j=getPanel($,createSearchPanel);return j&&j.dom.contains($.root.activeElement)&&$.focus(),$.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(g){this.view=g;let j=this.query=g.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:j.search,placeholder:phrase(g,"Find"),"aria-label":phrase(g,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:j.replace,placeholder:phrase(g,"Replace"),"aria-label":phrase(g,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:j.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:j.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:j.wholeWord,onchange:this.commit});function _e(et,tt,nt){return crelt("button",{class:"cm-button",name:et,onclick:tt,type:"button"},nt)}this.dom=crelt("div",{onkeydown:et=>this.keydown(et),class:"cm-search"},[this.searchField,_e("next",()=>findNext(g),[phrase(g,"next")]),_e("prev",()=>findPrevious(g),[phrase(g,"previous")]),_e("select",()=>selectMatches(g),[phrase(g,"all")]),crelt("label",null,[this.caseField,phrase(g,"match case")]),crelt("label",null,[this.reField,phrase(g,"regexp")]),crelt("label",null,[this.wordField,phrase(g,"by word")]),...g.state.readOnly?[]:[crelt("br"),this.replaceField,_e("replace",()=>replaceNext(g),[phrase(g,"replace")]),_e("replaceAll",()=>replaceAll(g),[phrase(g,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(g),"aria-label":phrase(g,"close"),type:"button"},["×"])])}commit(){let g=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});g.eq(this.query)||(this.query=g,this.view.dispatch({effects:setSearchQuery.of(g)}))}keydown(g){runScopeHandlers(this.view,g,"search-panel")?g.preventDefault():g.keyCode==13&&g.target==this.searchField?(g.preventDefault(),(g.shiftKey?findPrevious:findNext)(this.view)):g.keyCode==13&&g.target==this.replaceField&&(g.preventDefault(),replaceNext(this.view))}update(g){for(let j of g.transactions)for(let _e of j.effects)_e.is(setSearchQuery)&&!_e.value.eq(this.query)&&this.setQuery(_e.value)}setQuery(g){this.query=g,this.searchField.value=g.search,this.replaceField.value=g.replace,this.caseField.checked=g.caseSensitive,this.reField.checked=g.regexp,this.wordField.checked=g.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase($,g){return $.state.phrase(g)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch($,{from:g,to:j}){let _e=$.state.doc.lineAt(g),et=$.state.doc.lineAt(j).to,tt=Math.max(_e.from,g-AnnounceMargin),nt=Math.min(et,j+AnnounceMargin),rt=$.state.sliceDoc(tt,nt);if(tt!=_e.from){for(let it=0;it<AnnounceMargin;it++)if(!Break.test(rt[it+1])&&Break.test(rt[it])){rt=rt.slice(it);break}}if(nt!=et){for(let it=rt.length-1;it>rt.length-AnnounceMargin;it--)if(!Break.test(rt[it-1])&&Break.test(rt[it])){rt=rt.slice(0,it);break}}return EditorView.announce.of(`${$.state.phrase("current match")}. ${rt} ${$.state.phrase("on line")} ${_e.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(g,j,_e){this.state=g,this.pos=j,this.explicit=_e,this.abortListeners=[]}tokenBefore(g){let j=syntaxTree(this.state).resolveInner(this.pos,-1);for(;j&&g.indexOf(j.name)<0;)j=j.parent;return j?{from:j.from,to:this.pos,text:this.state.sliceDoc(j.from,this.pos),type:j.type}:null}matchBefore(g){let j=this.state.doc.lineAt(this.pos),_e=Math.max(j.from,this.pos-250),et=j.text.slice(_e-j.from,this.pos-j.from),tt=et.search(ensureAnchor(g,!1));return tt<0?null:{from:_e+tt,to:this.pos,text:et.slice(tt)}}get aborted(){return this.abortListeners==null}addEventListener(g,j){g=="abort"&&this.abortListeners&&this.abortListeners.push(j)}}function toSet($){let g=Object.keys($).join(""),j=/\w/.test(g);return j&&(g=g.replace(/\w/g,"")),`[${j?"\\w":""}${g.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch($){let g=Object.create(null),j=Object.create(null);for(let{label:et}of $){g[et[0]]=!0;for(let tt=1;tt<et.length;tt++)j[et[tt]]=!0}let _e=toSet(g)+toSet(j)+"*$";return[new RegExp("^"+_e),new RegExp(_e)]}function completeFromList($){let g=$.map(et=>typeof et=="string"?{label:et}:et),[j,_e]=g.every(et=>/^\w+$/.test(et.label))?[/\w*$/,/\w+$/]:prefixMatch(g);return et=>{let tt=et.matchBefore(_e);return tt||et.explicit?{from:tt?tt.from:et.pos,options:g,validFor:j}:null}}class Option{constructor(g,j,_e,et){this.completion=g,this.source=j,this.match=_e,this.score=et}}function cur($){return $.selection.main.from}function ensureAnchor($,g){var j;let{source:_e}=$,et=g&&_e[0]!="^",tt=_e[_e.length-1]!="$";return!et&&!tt?$:new RegExp(`${et?"^":""}(?:${_e})${tt?"$":""}`,(j=$.flags)!==null&&j!==void 0?j:$.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText($,g,j,_e){let{main:et}=$.selection,tt=j-et.from,nt=_e-et.from;return Object.assign(Object.assign({},$.changeByRange(rt=>rt!=et&&j!=_e&&$.sliceDoc(rt.from+tt,rt.from+nt)!=$.sliceDoc(j,_e)?{range:rt}:{changes:{from:rt.from+tt,to:_e==et.from?rt.to:rt.from+nt,insert:g},range:EditorSelection.cursor(rt.from+tt+g.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource($){if(!Array.isArray($))return $;let g=SourceCache.get($);return g||SourceCache.set($,g=completeFromList($)),g}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(g){this.pattern=g,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let j=0;j<g.length;){let _e=codePointAt(g,j),et=codePointSize(_e);this.chars.push(_e);let tt=g.slice(j,j+et),nt=tt.toUpperCase();this.folded.push(codePointAt(nt==tt?tt.toLowerCase():nt,0)),j+=et}this.astral=g.length!=this.chars.length}ret(g,j){return this.score=g,this.matched=j,!0}match(g){if(this.pattern.length==0)return this.ret(-100,[]);if(g.length<this.pattern.length)return!1;let{chars:j,folded:_e,any:et,precise:tt,byWord:nt}=this;if(j.length==1){let mt=codePointAt(g,0),yt=codePointSize(mt),Et=yt==g.length?0:-100;if(mt!=j[0])if(mt==_e[0])Et+=-200;else return!1;return this.ret(Et,[0,yt])}let rt=g.indexOf(this.pattern);if(rt==0)return this.ret(g.length==this.pattern.length?0:-100,[0,this.pattern.length]);let it=j.length,st=0;if(rt<0){for(let mt=0,yt=Math.min(g.length,200);mt<yt&&st<it;){let Et=codePointAt(g,mt);(Et==j[st]||Et==_e[st])&&(et[st++]=mt),mt+=codePointSize(Et)}if(st<it)return!1}let ot=0,at=0,lt=!1,ut=0,ht=-1,ft=-1,gt=/[a-z]/.test(g),dt=!0;for(let mt=0,yt=Math.min(g.length,200),Et=0;mt<yt&&at<it;){let Ct=codePointAt(g,mt);rt<0&&(ot<it&&Ct==j[ot]&&(tt[ot++]=mt),ut<it&&(Ct==j[ut]||Ct==_e[ut]?(ut==0&&(ht=mt),ft=mt+1,ut++):ut=0));let kt,St=Ct<255?Ct>=48&&Ct<=57||Ct>=97&&Ct<=122?2:Ct>=65&&Ct<=90?1:0:(kt=fromCodePoint(Ct))!=kt.toLowerCase()?1:kt!=kt.toUpperCase()?2:0;(!mt||St==1&&gt||Et==0&&St!=0)&&(j[at]==Ct||_e[at]==Ct&&(lt=!0)?nt[at++]=mt:nt.length&&(dt=!1)),Et=St,mt+=codePointSize(Ct)}return at==it&&nt[0]==0&&dt?this.result(-100+(lt?-200:0),nt,g):ut==it&&ht==0?this.ret(-200-g.length+(ft==g.length?0:-100),[0,ft]):rt>-1?this.ret(-700-g.length,[rt,rt+this.pattern.length]):ut==it?this.ret(-200+-700-g.length,[ht,ft]):at==it?this.result(-100+(lt?-200:0)+-700+(dt?0:-1100),nt,g):j.length==2?!1:this.result((et[0]?-700:0)+-200+-1100,et,g)}result(g,j,_e){let et=[],tt=0;for(let nt of j){let rt=nt+(this.astral?codePointSize(codePointAt(_e,nt)):1);tt&&et[tt-1]==nt?et[tt-1]=rt:(et[tt++]=nt,et[tt++]=rt)}return this.ret(g-_e.length,et)}}const completionConfig=Facet.define({combine($){return combineConfig($,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(g,j)=>g.label.localeCompare(j.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(g,j)=>g&&j,closeOnBlur:(g,j)=>g&&j,icons:(g,j)=>g&&j,tooltipClass:(g,j)=>_e=>joinClass(g(_e),j(_e)),optionClass:(g,j)=>_e=>joinClass(g(_e),j(_e)),addToOptions:(g,j)=>g.concat(j)})}});function joinClass($,g){return $?g?$+" "+g:$:g}function defaultPositionInfo($,g,j,_e,et,tt){let nt=$.textDirection==Direction.RTL,rt=nt,it=!1,st="top",ot,at,lt=g.left-et.left,ut=et.right-g.right,ht=_e.right-_e.left,ft=_e.bottom-_e.top;if(rt&&lt<Math.min(ht,ut)?rt=!1:!rt&&ut<Math.min(ht,lt)&&(rt=!0),ht<=(rt?lt:ut))ot=Math.max(et.top,Math.min(j.top,et.bottom-ft))-g.top,at=Math.min(400,rt?lt:ut);else{it=!0,at=Math.min(400,(nt?g.right:et.right-g.left)-30);let mt=et.bottom-g.bottom;mt>=ft||mt>g.top?ot=j.bottom-g.top:(st="bottom",ot=g.bottom-j.top)}let gt=(g.bottom-g.top)/tt.offsetHeight,dt=(g.right-g.left)/tt.offsetWidth;return{style:`${st}: ${ot/gt}px; max-width: ${at/dt}px`,class:"cm-completionInfo-"+(it?nt?"left-narrow":"right-narrow":rt?"left":"right")}}function optionContent($){let g=$.addToOptions.slice();return $.icons&&g.push({render(j){let _e=document.createElement("div");return _e.classList.add("cm-completionIcon"),j.type&&_e.classList.add(...j.type.split(/\s+/g).map(et=>"cm-completionIcon-"+et)),_e.setAttribute("aria-hidden","true"),_e},position:20}),g.push({render(j,_e,et,tt){let nt=document.createElement("span");nt.className="cm-completionLabel";let rt=j.displayLabel||j.label,it=0;for(let st=0;st<tt.length;){let ot=tt[st++],at=tt[st++];ot>it&&nt.appendChild(document.createTextNode(rt.slice(it,ot)));let lt=nt.appendChild(document.createElement("span"));lt.appendChild(document.createTextNode(rt.slice(ot,at))),lt.className="cm-completionMatchedText",it=at}return it<rt.length&&nt.appendChild(document.createTextNode(rt.slice(it))),nt},position:50},{render(j){if(!j.detail)return null;let _e=document.createElement("span");return _e.className="cm-completionDetail",_e.textContent=j.detail,_e},position:80}),g.sort((j,_e)=>j.position-_e.position).map(j=>j.render)}function rangeAroundSelected($,g,j){if($<=j)return{from:0,to:$};if(g<0&&(g=0),g<=$>>1){let et=Math.floor(g/j);return{from:et*j,to:(et+1)*j}}let _e=Math.floor(($-g)/j);return{from:$-(_e+1)*j,to:$-_e*j}}class CompletionTooltip{constructor(g,j,_e){this.view=g,this.stateField=j,this.applyCompletion=_e,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:it=>this.placeInfo(it),key:this},this.space=null,this.currentClass="";let et=g.state.field(j),{options:tt,selected:nt}=et.open,rt=g.state.facet(completionConfig);this.optionContent=optionContent(rt),this.optionClass=rt.optionClass,this.tooltipClass=rt.tooltipClass,this.range=rangeAroundSelected(tt.length,nt,rt.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(g.state),this.dom.addEventListener("mousedown",it=>{let{options:st}=g.state.field(j).open;for(let ot=it.target,at;ot&&ot!=this.dom;ot=ot.parentNode)if(ot.nodeName=="LI"&&(at=/-(\d+)$/.exec(ot.id))&&+at[1]<st.length){this.applyCompletion(g,st[+at[1]]),it.preventDefault();return}}),this.dom.addEventListener("focusout",it=>{let st=g.state.field(this.stateField,!1);st&&st.tooltip&&g.state.facet(completionConfig).closeOnBlur&&it.relatedTarget!=g.contentDOM&&g.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(tt,et.id)}mount(){this.updateSel()}showOptions(g,j){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(g,j,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(g){var j;let _e=g.state.field(this.stateField),et=g.startState.field(this.stateField);if(this.updateTooltipClass(g.state),_e!=et){let{options:tt,selected:nt,disabled:rt}=_e.open;(!et.open||et.open.options!=tt)&&(this.range=rangeAroundSelected(tt.length,nt,g.state.facet(completionConfig).maxRenderedOptions),this.showOptions(tt,_e.id)),this.updateSel(),rt!=((j=et.open)===null||j===void 0?void 0:j.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!rt)}}updateTooltipClass(g){let j=this.tooltipClass(g);if(j!=this.currentClass){for(let _e of this.currentClass.split(" "))_e&&this.dom.classList.remove(_e);for(let _e of j.split(" "))_e&&this.dom.classList.add(_e);this.currentClass=j}}positioned(g){this.space=g,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let g=this.view.state.field(this.stateField),j=g.open;if((j.selected>-1&&j.selected<this.range.from||j.selected>=this.range.to)&&(this.range=rangeAroundSelected(j.options.length,j.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(j.options,g.id)),this.updateSelectedOption(j.selected)){this.destroyInfo();let{completion:_e}=j.options[j.selected],{info:et}=_e;if(!et)return;let tt=typeof et=="string"?document.createTextNode(et):et(_e);if(!tt)return;"then"in tt?tt.then(nt=>{nt&&this.view.state.field(this.stateField,!1)==g&&this.addInfoPane(nt,_e)}).catch(nt=>logException(this.view.state,nt,"completion info")):this.addInfoPane(tt,_e)}}addInfoPane(g,j){this.destroyInfo();let _e=this.info=document.createElement("div");if(_e.className="cm-tooltip cm-completionInfo",g.nodeType!=null)_e.appendChild(g),this.infoDestroy=null;else{let{dom:et,destroy:tt}=g;_e.appendChild(et),this.infoDestroy=tt||null}this.dom.appendChild(_e),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(g){let j=null;for(let _e=this.list.firstChild,et=this.range.from;_e;_e=_e.nextSibling,et++)_e.nodeName!="LI"||!_e.id?et--:et==g?_e.hasAttribute("aria-selected")||(_e.setAttribute("aria-selected","true"),j=_e):_e.hasAttribute("aria-selected")&&_e.removeAttribute("aria-selected");return j&&scrollIntoView(this.list,j),j}measureInfo(){let g=this.dom.querySelector("[aria-selected]");if(!g||!this.info)return null;let j=this.dom.getBoundingClientRect(),_e=this.info.getBoundingClientRect(),et=g.getBoundingClientRect(),tt=this.space;if(!tt){let nt=this.dom.ownerDocument.defaultView||window;tt={left:0,top:0,right:nt.innerWidth,bottom:nt.innerHeight}}return et.top>Math.min(tt.bottom,j.bottom)-10||et.bottom<Math.max(tt.top,j.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,j,et,_e,tt,this.dom)}placeInfo(g){this.info&&(g?(g.style&&(this.info.style.cssText=g.style),this.info.className="cm-tooltip cm-completionInfo "+(g.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(g,j,_e){const et=document.createElement("ul");et.id=j,et.setAttribute("role","listbox"),et.setAttribute("aria-expanded","true"),et.setAttribute("aria-label",this.view.state.phrase("Completions"));let tt=null;for(let nt=_e.from;nt<_e.to;nt++){let{completion:rt,match:it}=g[nt],{section:st}=rt;if(st){let lt=typeof st=="string"?st:st.name;if(lt!=tt&&(nt>_e.from||_e.from==0))if(tt=lt,typeof st!="string"&&st.header)et.appendChild(st.header(st));else{let ut=et.appendChild(document.createElement("completion-section"));ut.textContent=lt}}const ot=et.appendChild(document.createElement("li"));ot.id=j+"-"+nt,ot.setAttribute("role","option");let at=this.optionClass(rt);at&&(ot.className=at);for(let lt of this.optionContent){let ut=lt(rt,this.view.state,this.view,it);ut&&ot.appendChild(ut)}}return _e.from&&et.classList.add("cm-completionListIncompleteTop"),_e.to<g.length&&et.classList.add("cm-completionListIncompleteBottom"),et}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip($,g){return j=>new CompletionTooltip(j,$,g)}function scrollIntoView($,g){let j=$.getBoundingClientRect(),_e=g.getBoundingClientRect(),et=j.height/$.offsetHeight;_e.top<j.top?$.scrollTop-=(j.top-_e.top)/et:_e.bottom>j.bottom&&($.scrollTop+=(_e.bottom-j.bottom)/et)}function score($){return($.boost||0)*100+($.apply?10:0)+($.info?5:0)+($.type?1:0)}function sortOptions($,g){let j=[],_e=null,et=it=>{j.push(it);let{section:st}=it.completion;if(st){_e||(_e=[]);let ot=typeof st=="string"?st:st.name;_e.some(at=>at.name==ot)||_e.push(typeof st=="string"?{name:ot}:st)}};for(let it of $)if(it.hasResult()){let st=it.result.getMatch;if(it.result.filter===!1)for(let ot of it.result.options)et(new Option(ot,it.source,st?st(ot):[],1e9-j.length));else{let ot=new FuzzyMatcher(g.sliceDoc(it.from,it.to));for(let at of it.result.options)if(ot.match(at.label)){let lt=at.displayLabel?st?st(at,ot.matched):[]:ot.matched;et(new Option(at,it.source,lt,ot.score+(at.boost||0)))}}}if(_e){let it=Object.create(null),st=0,ot=(at,lt)=>{var ut,ht;return((ut=at.rank)!==null&&ut!==void 0?ut:1e9)-((ht=lt.rank)!==null&&ht!==void 0?ht:1e9)||(at.name<lt.name?-1:1)};for(let at of _e.sort(ot))st-=1e5,it[at.name]=st;for(let at of j){let{section:lt}=at.completion;lt&&(at.score+=it[typeof lt=="string"?lt:lt.name])}}let tt=[],nt=null,rt=g.facet(completionConfig).compareCompletions;for(let it of j.sort((st,ot)=>ot.score-st.score||rt(st.completion,ot.completion))){let st=it.completion;!nt||nt.label!=st.label||nt.detail!=st.detail||nt.type!=null&&st.type!=null&&nt.type!=st.type||nt.apply!=st.apply||nt.boost!=st.boost?tt.push(it):score(it.completion)>score(nt)&&(tt[tt.length-1]=it),nt=it.completion}return tt}class CompletionDialog{constructor(g,j,_e,et,tt,nt){this.options=g,this.attrs=j,this.tooltip=_e,this.timestamp=et,this.selected=tt,this.disabled=nt}setSelected(g,j){return g==this.selected||g>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(j,g),this.tooltip,this.timestamp,g,this.disabled)}static build(g,j,_e,et,tt){let nt=sortOptions(g,j);if(!nt.length)return et&&g.some(it=>it.state==1)?new CompletionDialog(et.options,et.attrs,et.tooltip,et.timestamp,et.selected,!0):null;let rt=j.facet(completionConfig).selectOnOpen?0:-1;if(et&&et.selected!=rt&&et.selected!=-1){let it=et.options[et.selected].completion;for(let st=0;st<nt.length;st++)if(nt[st].completion==it){rt=st;break}}return new CompletionDialog(nt,makeAttrs(_e,rt),{pos:g.reduce((it,st)=>st.hasResult()?Math.min(it,st.from):it,1e8),create:createTooltip,above:tt.aboveCursor},et?et.timestamp:Date.now(),rt,!1)}map(g){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:g.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(g,j,_e){this.active=g,this.id=j,this.open=_e}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(g){let{state:j}=g,_e=j.facet(completionConfig),tt=(_e.override||j.languageDataAt("autocomplete",cur(j)).map(asSource)).map(rt=>(this.active.find(st=>st.source==rt)||new ActiveSource(rt,this.active.some(st=>st.state!=0)?1:0)).update(g,_e));tt.length==this.active.length&&tt.every((rt,it)=>rt==this.active[it])&&(tt=this.active);let nt=this.open;nt&&g.docChanged&&(nt=nt.map(g.changes)),g.selection||tt.some(rt=>rt.hasResult()&&g.changes.touchesRange(rt.from,rt.to))||!sameResults(tt,this.active)?nt=CompletionDialog.build(tt,j,this.id,nt,_e):nt&&nt.disabled&&!tt.some(rt=>rt.state==1)&&(nt=null),!nt&&tt.every(rt=>rt.state!=1)&&tt.some(rt=>rt.hasResult())&&(tt=tt.map(rt=>rt.hasResult()?new ActiveSource(rt.source,0):rt));for(let rt of g.effects)rt.is(setSelectedEffect)&&(nt=nt&&nt.setSelected(rt.value,this.id));return tt==this.active&&nt==this.open?this:new CompletionState(tt,this.id,nt)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults($,g){if($==g)return!0;for(let j=0,_e=0;;){for(;j<$.length&&!$[j].hasResult;)j++;for(;_e<g.length&&!g[_e].hasResult;)_e++;let et=j==$.length,tt=_e==g.length;if(et||tt)return et==tt;if($[j++].result!=g[_e++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs($,g){let j={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":$};return g>-1&&(j["aria-activedescendant"]=$+"-"+g),j}const none$1=[];function getUserEvent($){return $.isUserEvent("input.type")?"input":$.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(g,j,_e=-1){this.source=g,this.state=j,this.explicitPos=_e}hasResult(){return!1}update(g,j){let _e=getUserEvent(g),et=this;_e?et=et.handleUserEvent(g,_e,j):g.docChanged?et=et.handleChange(g):g.selection&&et.state!=0&&(et=new ActiveSource(et.source,0));for(let tt of g.effects)if(tt.is(startCompletionEffect))et=new ActiveSource(et.source,1,tt.value?cur(g.state):-1);else if(tt.is(closeCompletionEffect))et=new ActiveSource(et.source,0);else if(tt.is(setActiveEffect))for(let nt of tt.value)nt.source==et.source&&(et=nt);return et}handleUserEvent(g,j,_e){return j=="delete"||!_e.activateOnTyping?this.map(g.changes):new ActiveSource(this.source,1)}handleChange(g){return g.changes.touchesRange(cur(g.startState))?new ActiveSource(this.source,0):this.map(g.changes)}map(g){return g.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,g.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(g,j,_e,et,tt){super(g,2,j),this.result=_e,this.from=et,this.to=tt}hasResult(){return!0}handleUserEvent(g,j,_e){var et;let tt=g.changes.mapPos(this.from),nt=g.changes.mapPos(this.to,1),rt=cur(g.state);if((this.explicitPos<0?rt<=tt:rt<this.from)||rt>nt||j=="delete"&&cur(g.startState)==this.from)return new ActiveSource(this.source,j=="input"&&_e.activateOnTyping?1:0);let it=this.explicitPos<0?-1:g.changes.mapPos(this.explicitPos),st;return checkValid(this.result.validFor,g.state,tt,nt)?new ActiveResult(this.source,it,this.result,tt,nt):this.result.update&&(st=this.result.update(this.result,tt,nt,new CompletionContext(g.state,rt,it>=0)))?new ActiveResult(this.source,it,st,st.from,(et=st.to)!==null&&et!==void 0?et:cur(g.state)):new ActiveSource(this.source,1,it)}handleChange(g){return g.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(g.changes)}map(g){return g.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:g.mapPos(this.explicitPos),this.result,g.mapPos(this.from),g.mapPos(this.to,1))}}function checkValid($,g,j,_e){if(!$)return!1;let et=g.sliceDoc(j,_e);return typeof $=="function"?$(et,j,_e,g):ensureAnchor($,!0).test(et)}const setActiveEffect=StateEffect.define({map($,g){return $.map(j=>j.map(g))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update($,g){return $.update(g)},provide:$=>[showTooltip.from($,g=>g.tooltip),EditorView.contentAttributes.from($,g=>g.attrs)]});function applyCompletion($,g){const j=g.completion.apply||g.completion.label;let _e=$.state.field(completionState).active.find(et=>et.source==g.source);return _e instanceof ActiveResult?(typeof j=="string"?$.dispatch(Object.assign(Object.assign({},insertCompletionText($.state,j,_e.from,_e.to)),{annotations:pickedCompletion.of(g.completion)})):j($,g.completion,_e.from,_e.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection($,g="option"){return j=>{let _e=j.state.field(completionState,!1);if(!_e||!_e.open||_e.open.disabled||Date.now()-_e.open.timestamp<j.state.facet(completionConfig).interactionDelay)return!1;let et=1,tt;g=="page"&&(tt=getTooltip(j,_e.open.tooltip))&&(et=Math.max(2,Math.floor(tt.dom.offsetHeight/tt.dom.querySelector("li").offsetHeight)-1));let{length:nt}=_e.open.options,rt=_e.open.selected>-1?_e.open.selected+et*($?1:-1):$?0:nt-1;return rt<0?rt=g=="page"?0:nt-1:rt>=nt&&(rt=g=="page"?nt-1:0),j.dispatch({effects:setSelectedEffect.of(rt)}),!0}}const acceptCompletion=$=>{let g=$.state.field(completionState,!1);return $.state.readOnly||!g||!g.open||g.open.selected<0||g.open.disabled||Date.now()-g.open.timestamp<$.state.facet(completionConfig).interactionDelay?!1:applyCompletion($,g.open.options[g.open.selected])},startCompletion=$=>$.state.field(completionState,!1)?($.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=$=>{let g=$.state.field(completionState,!1);return!g||!g.active.some(j=>j.state!=0)?!1:($.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(g,j){this.active=g,this.context=j,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor($){this.view=$,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let g of $.state.field(completionState).active)g.state==1&&this.startQuery(g)}update($){let g=$.state.field(completionState);if(!$.selectionSet&&!$.docChanged&&$.startState.field(completionState)==g)return;let j=$.transactions.some(_e=>(_e.selection||_e.docChanged)&&!getUserEvent(_e));for(let _e=0;_e<this.running.length;_e++){let et=this.running[_e];if(j||et.updates.length+$.transactions.length>MaxUpdateCount&&Date.now()-et.time>MinAbortTime){for(let tt of et.context.abortListeners)try{tt()}catch(nt){logException(this.view.state,nt)}et.context.abortListeners=null,this.running.splice(_e--,1)}else et.updates.push(...$.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=g.active.some(_e=>_e.state==1&&!this.running.some(et=>et.active.source==_e.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let _e of $.transactions)getUserEvent(_e)=="input"?this.composing=2:this.composing==2&&_e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:$}=this.view,g=$.field(completionState);for(let j of g.active)j.state==1&&!this.running.some(_e=>_e.active.source==j.source)&&this.startQuery(j)}startQuery($){let{state:g}=this.view,j=cur(g),_e=new CompletionContext(g,j,$.explicitPos==j),et=new RunningQuery($,_e);this.running.push(et),Promise.resolve($.source(_e)).then(tt=>{et.context.aborted||(et.done=tt||null,this.scheduleAccept())},tt=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,tt)})}scheduleAccept(){this.running.every($=>$.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var $;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let g=[],j=this.view.state.facet(completionConfig);for(let _e=0;_e<this.running.length;_e++){let et=this.running[_e];if(et.done===void 0)continue;if(this.running.splice(_e--,1),et.done){let nt=new ActiveResult(et.active.source,et.active.explicitPos,et.done,et.done.from,($=et.done.to)!==null&&$!==void 0?$:cur(et.updates.length?et.updates[0].startState:this.view.state));for(let rt of et.updates)nt=nt.update(rt,j);if(nt.hasResult()){g.push(nt);continue}}let tt=this.view.state.field(completionState).active.find(nt=>nt.source==et.active.source);if(tt&&tt.state==1)if(et.done==null){let nt=new ActiveSource(et.active.source,0);for(let rt of et.updates)nt=nt.update(rt,j);nt.state!=1&&g.push(nt)}else this.startQuery(tt)}g.length&&this.view.dispatch({effects:setActiveEffect.of(g)})}},{eventHandlers:{blur($){let g=this.view.state.field(completionState,!1);if(g&&g.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let j=g.open&&getTooltip(this.view,g.open.tooltip);(!j||!j.dom.contains($.relatedTarget))&&this.view.dispatch({effects:closeCompletionEffect.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults$2={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map($,g){let j=g.mapPos($,-1,MapMode.TrackAfter);return j??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update($,g){if($=$.map(g.changes),g.selection){let j=g.state.doc.lineAt(g.selection.main.head);$=$.update({filter:_e=>_e>=j.from&&_e<=j.to})}for(let j of g.effects)j.is(closeBracketEffect)&&($=$.update({add:[closedBracket.range(j.value,j.value+1)]}));return $}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing($){for(let g=0;g<definedClosing.length;g+=2)if(definedClosing.charCodeAt(g)==$)return definedClosing.charAt(g+1);return fromCodePoint($<128?$:$+1)}function config($,g){return $.languageDataAt("closeBrackets",g)[0]||defaults$2}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of(($,g,j,_e)=>{if((android?$.composing:$.compositionStarted)||$.state.readOnly)return!1;let et=$.state.selection.main;if(_e.length>2||_e.length==2&&codePointSize(codePointAt(_e,0))==1||g!=et.from||j!=et.to)return!1;let tt=insertBracket($.state,_e);return tt?($.dispatch(tt),!0):!1}),deleteBracketPair=({state:$,dispatch:g})=>{if($.readOnly)return!1;let _e=config($,$.selection.main.head).brackets||defaults$2.brackets,et=null,tt=$.changeByRange(nt=>{if(nt.empty){let rt=prevChar($.doc,nt.head);for(let it of _e)if(it==rt&&nextChar($.doc,nt.head)==closing(codePointAt(it,0)))return{changes:{from:nt.head-it.length,to:nt.head+it.length},range:EditorSelection.cursor(nt.head-it.length)}}return{range:et=nt}});return et||g($.update(tt,{scrollIntoView:!0,userEvent:"delete.backward"})),!et},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket($,g){let j=config($,$.selection.main.head),_e=j.brackets||defaults$2.brackets;for(let et of _e){let tt=closing(codePointAt(et,0));if(g==et)return tt==et?handleSame($,et,_e.indexOf(et+et+et)>-1,j):handleOpen($,et,tt,j.before||defaults$2.before);if(g==tt&&closedBracketAt($,$.selection.main.from))return handleClose($,et,tt)}return null}function closedBracketAt($,g){let j=!1;return $.field(bracketState).between(0,$.doc.length,_e=>{_e==g&&(j=!0)}),j}function nextChar($,g){let j=$.sliceString(g,g+2);return j.slice(0,codePointSize(codePointAt(j,0)))}function prevChar($,g){let j=$.sliceString(g-2,g);return codePointSize(codePointAt(j,0))==j.length?j:j.slice(1)}function handleOpen($,g,j,_e){let et=null,tt=$.changeByRange(nt=>{if(!nt.empty)return{changes:[{insert:g,from:nt.from},{insert:j,from:nt.to}],effects:closeBracketEffect.of(nt.to+g.length),range:EditorSelection.range(nt.anchor+g.length,nt.head+g.length)};let rt=nextChar($.doc,nt.head);return!rt||/\s/.test(rt)||_e.indexOf(rt)>-1?{changes:{insert:g+j,from:nt.head},effects:closeBracketEffect.of(nt.head+g.length),range:EditorSelection.cursor(nt.head+g.length)}:{range:et=nt}});return et?null:$.update(tt,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose($,g,j){let _e=null,et=$.changeByRange(tt=>tt.empty&&nextChar($.doc,tt.head)==j?{changes:{from:tt.head,to:tt.head+j.length,insert:j},range:EditorSelection.cursor(tt.head+j.length)}:_e={range:tt});return _e?null:$.update(et,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame($,g,j,_e){let et=_e.stringPrefixes||defaults$2.stringPrefixes,tt=null,nt=$.changeByRange(rt=>{if(!rt.empty)return{changes:[{insert:g,from:rt.from},{insert:g,from:rt.to}],effects:closeBracketEffect.of(rt.to+g.length),range:EditorSelection.range(rt.anchor+g.length,rt.head+g.length)};let it=rt.head,st=nextChar($.doc,it),ot;if(st==g){if(nodeStart($,it))return{changes:{insert:g+g,from:it},effects:closeBracketEffect.of(it+g.length),range:EditorSelection.cursor(it+g.length)};if(closedBracketAt($,it)){let lt=j&&$.sliceDoc(it,it+g.length*3)==g+g+g?g+g+g:g;return{changes:{from:it,to:it+lt.length,insert:lt},range:EditorSelection.cursor(it+lt.length)}}}else{if(j&&$.sliceDoc(it-2*g.length,it)==g+g&&(ot=canStartStringAt($,it-2*g.length,et))>-1&&nodeStart($,ot))return{changes:{insert:g+g+g+g,from:it},effects:closeBracketEffect.of(it+g.length),range:EditorSelection.cursor(it+g.length)};if($.charCategorizer(it)(st)!=CharCategory.Word&&canStartStringAt($,it,et)>-1&&!probablyInString($,it,g,et))return{changes:{insert:g+g,from:it},effects:closeBracketEffect.of(it+g.length),range:EditorSelection.cursor(it+g.length)}}return{range:tt=rt}});return tt?null:$.update(nt,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart($,g){let j=syntaxTree($).resolveInner(g+1);return j.parent&&j.from==g}function probablyInString($,g,j,_e){let et=syntaxTree($).resolveInner(g,-1),tt=_e.reduce((nt,rt)=>Math.max(nt,rt.length),0);for(let nt=0;nt<5;nt++){let rt=$.sliceDoc(et.from,Math.min(et.to,et.from+j.length+tt)),it=rt.indexOf(j);if(!it||it>-1&&_e.indexOf(rt.slice(0,it))>-1){let ot=et.firstChild;for(;ot&&ot.from==et.from&&ot.to-ot.from>j.length+it;){if($.sliceDoc(ot.to-j.length,ot.to)==j)return!1;ot=ot.firstChild}return!0}let st=et.to==g&&et.parent;if(!st)break;et=st}return!1}function canStartStringAt($,g,j){let _e=$.charCategorizer(g);if(_e($.sliceDoc(g-1,g))!=CharCategory.Word)return g;for(let et of j){let tt=g-et.length;if($.sliceDoc(tt,g)==et&&_e($.sliceDoc(tt-1,tt))!=CharCategory.Word)return tt}return-1}function autocompletion($={}){return[completionState,completionConfig.of($),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],$=>$.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(g,j,_e){this.from=g,this.to=j,this.diagnostic=_e}}class LintState{constructor(g,j,_e){this.diagnostics=g,this.panel=j,this.selected=_e}static init(g,j,_e){let et=g,tt=_e.facet(lintConfig).markerFilter;tt&&(et=tt(et));let nt=Decoration.set(et.map(rt=>rt.from==rt.to||rt.from==rt.to-1&&_e.doc.lineAt(rt.from).to==rt.from?Decoration.widget({widget:new DiagnosticWidget(rt),diagnostic:rt}).range(rt.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+rt.severity+(rt.markClass?" "+rt.markClass:"")},diagnostic:rt}).range(rt.from,rt.to)),!0);return new LintState(nt,j,findDiagnostic(nt))}}function findDiagnostic($,g=null,j=0){let _e=null;return $.between(j,1e9,(et,tt,{spec:nt})=>{if(!(g&&nt.diagnostic!=g))return _e=new SelectedDiagnostic(et,tt,nt.diagnostic),!1}),_e}function hideTooltip($,g){let j=$.startState.doc.lineAt(g.pos);return!!($.effects.some(_e=>_e.is(setDiagnosticsEffect))||$.changes.touchesRange(j.from,j.to))}function maybeEnableLint($,g){return $.field(lintState,!1)?g:g.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update($,g){if(g.docChanged){let j=$.diagnostics.map(g.changes),_e=null;if($.selected){let et=g.changes.mapPos($.selected.from,1);_e=findDiagnostic(j,$.selected.diagnostic,et)||findDiagnostic(j,null,et)}$=new LintState(j,$.panel,_e)}for(let j of g.effects)j.is(setDiagnosticsEffect)?$=LintState.init(j.value,$.panel,g.state):j.is(togglePanel)?$=new LintState($.diagnostics,j.value?LintPanel.open:null,$.selected):j.is(movePanelSelection)&&($=new LintState($.diagnostics,$.panel,j.value));return $},provide:$=>[showPanel.from($,g=>g.panel),EditorView.decorations.from($,g=>g.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip($,g,j){let{diagnostics:_e}=$.state.field(lintState),et=[],tt=2e8,nt=0;_e.between(g-(j<0?1:0),g+(j>0?1:0),(it,st,{spec:ot})=>{g>=it&&g<=st&&(it==st||(g>it||j>0)&&(g<st||j<0))&&(et.push(ot.diagnostic),tt=Math.min(it,tt),nt=Math.max(st,nt))});let rt=$.state.facet(lintConfig).tooltipFilter;return rt&&(et=rt(et)),et.length?{pos:tt,end:nt,above:$.state.doc.lineAt(tt).to<nt,create(){return{dom:diagnosticsTooltip($,et)}}}:null}function diagnosticsTooltip($,g){return crelt("ul",{class:"cm-tooltip-lint"},g.map(j=>renderDiagnostic($,j,!1)))}const openLintPanel=$=>{let g=$.state.field(lintState,!1);(!g||!g.panel)&&$.dispatch({effects:maybeEnableLint($.state,[togglePanel.of(!0)])});let j=getPanel($,LintPanel.open);return j&&j.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=$=>{let g=$.state.field(lintState,!1);return!g||!g.panel?!1:($.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=$=>{let g=$.state.field(lintState,!1);if(!g)return!1;let j=$.state.selection.main,_e=g.diagnostics.iter(j.to+1);return!_e.value&&(_e=g.diagnostics.iter(0),!_e.value||_e.from==j.from&&_e.to==j.to)?!1:($.dispatch({selection:{anchor:_e.from,head:_e.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine($){return Object.assign({sources:$.map(g=>g.source)},combineConfig($.map(g=>g.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(g,j)=>g?j?_e=>g(_e)||j(_e):g:j}))}});function assignKeys($){let g=[];if($)e:for(let{name:j}of $){for(let _e=0;_e<j.length;_e++){let et=j[_e];if(/[a-zA-Z]/.test(et)&&!g.some(tt=>tt.toLowerCase()==et.toLowerCase())){g.push(et);continue e}}g.push("")}return g}function renderDiagnostic($,g,j){var _e;let et=j?assignKeys(g.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+g.severity},crelt("span",{class:"cm-diagnosticText"},g.renderMessage?g.renderMessage():g.message),(_e=g.actions)===null||_e===void 0?void 0:_e.map((tt,nt)=>{let rt=!1,it=lt=>{if(lt.preventDefault(),rt)return;rt=!0;let ut=findDiagnostic($.state.field(lintState).diagnostics,g);ut&&tt.apply($,ut.from,ut.to)},{name:st}=tt,ot=et[nt]?st.indexOf(et[nt]):-1,at=ot<0?st:[st.slice(0,ot),crelt("u",st.slice(ot,ot+1)),st.slice(ot+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:it,onmousedown:it,"aria-label":` Action: ${st}${ot<0?"":` (access key "${et[nt]})"`}.`},at)}),g.source&&crelt("div",{class:"cm-diagnosticSource"},g.source))}class DiagnosticWidget extends WidgetType{constructor(g){super(),this.diagnostic=g}eq(g){return g.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(g,j){this.diagnostic=j,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(g,j,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(g){this.view=g,this.items=[];let j=et=>{if(et.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(et.keyCode==38||et.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(et.keyCode==40||et.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(et.keyCode==36)this.moveSelection(0);else if(et.keyCode==35)this.moveSelection(this.items.length-1);else if(et.keyCode==13)this.view.focus();else if(et.keyCode>=65&&et.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:tt}=this.items[this.selectedIndex],nt=assignKeys(tt.actions);for(let rt=0;rt<nt.length;rt++)if(nt[rt].toUpperCase().charCodeAt(0)==et.keyCode){let it=findDiagnostic(this.view.state.field(lintState).diagnostics,tt);it&&tt.actions[rt].apply(g,it.from,it.to)}}else return;et.preventDefault()},_e=et=>{for(let tt=0;tt<this.items.length;tt++)this.items[tt].dom.contains(et.target)&&this.moveSelection(tt)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:j,onclick:_e}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let g=this.view.state.field(lintState).selected;if(!g)return-1;for(let j=0;j<this.items.length;j++)if(this.items[j].diagnostic==g.diagnostic)return j;return-1}update(){let{diagnostics:g,selected:j}=this.view.state.field(lintState),_e=0,et=!1,tt=null;for(g.between(0,this.view.state.doc.length,(nt,rt,{spec:it})=>{let st=-1,ot;for(let at=_e;at<this.items.length;at++)if(this.items[at].diagnostic==it.diagnostic){st=at;break}st<0?(ot=new PanelItem(this.view,it.diagnostic),this.items.splice(_e,0,ot),et=!0):(ot=this.items[st],st>_e&&(this.items.splice(_e,st-_e),et=!0)),j&&ot.diagnostic==j.diagnostic?ot.dom.hasAttribute("aria-selected")||(ot.dom.setAttribute("aria-selected","true"),tt=ot):ot.dom.hasAttribute("aria-selected")&&ot.dom.removeAttribute("aria-selected"),_e++});_e<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)et=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),et=!0),tt?(this.list.setAttribute("aria-activedescendant",tt.id),this.view.requestMeasure({key:this,read:()=>({sel:tt.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:nt,panel:rt})=>{let it=rt.height/this.list.offsetHeight;nt.top<rt.top?this.list.scrollTop-=(rt.top-nt.top)/it:nt.bottom>rt.bottom&&(this.list.scrollTop+=(nt.bottom-rt.bottom)/it)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),et&&this.sync()}sync(){let g=this.list.firstChild;function j(){let _e=g;g=_e.nextSibling,_e.remove()}for(let _e of this.items)if(_e.dom.parentNode==this.list){for(;g!=_e.dom;)j();g=_e.dom.nextSibling}else this.list.insertBefore(_e.dom,g);for(;g;)j()}moveSelection(g){if(this.selectedIndex<0)return;let j=this.view.state.field(lintState),_e=findDiagnostic(j.diagnostics,this.items[g].diagnostic);_e&&this.view.dispatch({selection:{anchor:_e.from,head:_e.to},scrollIntoView:!0,effects:movePanelSelection.of(_e)})}static open(g){return new LintPanel(g)}}function svg$1($,g='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${g}>${encodeURIComponent($)}</svg>')`}function underline($){return svg$1(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${$}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],$=>{let{selected:g,panel:j}=$.field(lintState);return!g||!j||g.from==g.to?Decoration.none:Decoration.set([activeMark.range(g.from,g.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme];var basicSetup=function(g){g===void 0&&(g={});var{crosshairCursor:j=!1}=g,_e=[];g.closeBracketsKeymap!==!1&&(_e=_e.concat(closeBracketsKeymap)),g.defaultKeymap!==!1&&(_e=_e.concat(defaultKeymap)),g.searchKeymap!==!1&&(_e=_e.concat(searchKeymap)),g.historyKeymap!==!1&&(_e=_e.concat(historyKeymap)),g.foldKeymap!==!1&&(_e=_e.concat(foldKeymap)),g.completionKeymap!==!1&&(_e=_e.concat(completionKeymap)),g.lintKeymap!==!1&&(_e=_e.concat(lintKeymap));var et=[];return g.lineNumbers!==!1&&et.push(lineNumbers()),g.highlightActiveLineGutter!==!1&&et.push(highlightActiveLineGutter()),g.highlightSpecialChars!==!1&&et.push(highlightSpecialChars()),g.history!==!1&&et.push(history()),g.foldGutter!==!1&&et.push(foldGutter()),g.drawSelection!==!1&&et.push(drawSelection()),g.dropCursor!==!1&&et.push(dropCursor()),g.allowMultipleSelections!==!1&&et.push(EditorState.allowMultipleSelections.of(!0)),g.indentOnInput!==!1&&et.push(indentOnInput()),g.syntaxHighlighting!==!1&&et.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),g.bracketMatching!==!1&&et.push(bracketMatching()),g.closeBrackets!==!1&&et.push(closeBrackets()),g.autocompletion!==!1&&et.push(autocompletion()),g.rectangularSelection!==!1&&et.push(rectangularSelection()),j!==!1&&et.push(crosshairCursor()),g.highlightActiveLine!==!1&&et.push(highlightActiveLine()),g.highlightSelectionMatches!==!1&&et.push(highlightSelectionMatches()),g.tabSize&&typeof g.tabSize=="number"&&et.push(indentUnit.of(" ".repeat(g.tabSize))),et.concat([keymap.of(_e.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection$1="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection$1},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var defaultLightThemeOption=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),getDefaultExtensions=function(g){g===void 0&&(g={});var{indentWithTab:j=!0,editable:_e=!0,readOnly:et=!1,theme:tt="light",placeholder:nt="",basicSetup:rt=!0}=g,it=[];switch(j&&it.unshift(keymap.of([indentWithTab])),rt&&(typeof rt=="boolean"?it.unshift(basicSetup()):it.unshift(basicSetup(rt))),nt&&it.unshift(placeholder(nt)),tt){case"light":it.push(defaultLightThemeOption);break;case"dark":it.push(oneDark);break;case"none":break;default:it.push(tt);break}return _e===!1&&it.push(EditorView.editable.of(!1)),et&&it.push(EditorState.readOnly.of(!0)),[...it]},getStatistics=$=>({line:$.state.doc.lineAt($.state.selection.main.from),lineCount:$.state.doc.lines,lineBreak:$.state.lineBreak,length:$.state.doc.length,readOnly:$.state.readOnly,tabSize:$.state.tabSize,selection:$.state.selection,selectionAsSingle:$.state.selection.asSingle().main,ranges:$.state.selection.ranges,selectionCode:$.state.sliceDoc($.state.selection.main.from,$.state.selection.main.to),selections:$.state.selection.ranges.map(g=>$.state.sliceDoc(g.from,g.to)),selectedText:$.state.selection.ranges.some(g=>!g.empty)}),External=Annotation.define(),emptyExtensions=[];function useCodeMirror($){var{value:g,selection:j,onChange:_e,onStatistics:et,onCreateEditor:tt,onUpdate:nt,extensions:rt=emptyExtensions,autoFocus:it,theme:st="light",height:ot=null,minHeight:at=null,maxHeight:lt=null,width:ut=null,minWidth:ht=null,maxWidth:ft=null,placeholder:gt="",editable:dt=!0,readOnly:mt=!1,indentWithTab:yt=!0,basicSetup:Et=!0,root:Ct,initialState:kt}=$,[St,Pt]=reactExports.useState(),[Bt,xt]=reactExports.useState(),[bt,$t]=reactExports.useState(),Mt=EditorView.theme({"&":{height:ot,minHeight:at,maxHeight:lt,width:ut,minWidth:ht,maxWidth:ft},"& .cm-scroller":{height:"100% !important"}}),Ot=EditorView.updateListener.of(Ut=>{if(Ut.docChanged&&typeof _e=="function"&&!Ut.transactions.some(Ht=>Ht.annotation(External))){var Nt=Ut.state.doc,It=Nt.toString();_e(It,Ut)}et&&et(getStatistics(Ut))}),jt=getDefaultExtensions({theme:st,editable:dt,readOnly:mt,placeholder:gt,indentWithTab:yt,basicSetup:Et}),Yt=[Ot,Mt,...jt];return nt&&typeof nt=="function"&&Yt.push(EditorView.updateListener.of(nt)),Yt=Yt.concat(rt),reactExports.useEffect(()=>{if(St&&!bt){var Ut={doc:g,selection:j,extensions:Yt},Nt=kt?EditorState.fromJSON(kt.json,Ut,kt.fields):EditorState.create(Ut);if($t(Nt),!Bt){var It=new EditorView({state:Nt,parent:St,root:Ct});xt(It),tt&&tt(It,Nt)}}return()=>{Bt&&($t(void 0),xt(void 0))}},[St,bt]),reactExports.useEffect(()=>Pt($.container),[$.container]),reactExports.useEffect(()=>()=>{Bt&&(Bt.destroy(),xt(void 0))},[Bt]),reactExports.useEffect(()=>{it&&Bt&&Bt.focus()},[it,Bt]),reactExports.useEffect(()=>{Bt&&Bt.dispatch({effects:StateEffect.reconfigure.of(Yt)})},[st,rt,ot,at,lt,ut,ht,ft,gt,dt,mt,yt,Et,_e,nt]),reactExports.useEffect(()=>{if(g!==void 0){var Ut=Bt?Bt.state.doc.toString():"";Bt&&g!==Ut&&Bt.dispatch({changes:{from:0,to:Ut.length,insert:g||""},annotations:[External.of(!0)]})}},[g,Bt]),{state:bt,setState:$t,view:Bt,setView:xt,container:St,setContainer:Pt}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef(($,g)=>{var{className:j,value:_e="",selection:et,extensions:tt=[],onChange:nt,onStatistics:rt,onCreateEditor:it,onUpdate:st,autoFocus:ot,theme:at="light",height:lt,minHeight:ut,maxHeight:ht,width:ft,minWidth:gt,maxWidth:dt,basicSetup:mt,placeholder:yt,indentWithTab:Et,editable:Ct,readOnly:kt,root:St,initialState:Pt}=$,Bt=_objectWithoutPropertiesLoose($,_excluded),xt=reactExports.useRef(null),{state:bt,view:$t,container:Mt}=useCodeMirror({container:xt.current,root:St,value:_e,autoFocus:ot,theme:at,height:lt,minHeight:ut,maxHeight:ht,width:ft,minWidth:gt,maxWidth:dt,basicSetup:mt,placeholder:yt,indentWithTab:Et,editable:Ct,readOnly:kt,selection:et,onChange:nt,onStatistics:rt,onCreateEditor:it,onUpdate:st,extensions:tt,initialState:Pt});if(reactExports.useImperativeHandle(g,()=>({editor:xt.current,state:bt,view:$t}),[xt,Mt,bt,$t]),typeof _e!="string")throw new Error("value must be typeof string but got "+typeof _e);var Ot=typeof at=="string"?"cm-theme-"+at:"cm-theme";return jsxRuntimeExports.jsx("div",_extends({ref:xt,className:""+Ot+(j?" "+j:"")},Bt))});ReactCodeMirror.displayName="CodeMirror";const e$1=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),t$1=e$1?Promise.resolve().then(function(){return l$1}):Promise.resolve().then(function(){return v$1});async function n$1(...$){return(await t$1).default(...$)}e$1?Promise.resolve().then(function(){return y$2}):Promise.resolve().then(function(){return b});const a$1=e$1?Promise.resolve().then(function(){return m$2}):Promise.resolve().then(function(){return k});async function o$1(...$){return(await a$1).default(...$)}const s$1=async $=>{const g=await $.getFile();return g.handle=$,g};var c$2=async($=[{}])=>{Array.isArray($)||($=[$]);const g=[];$.forEach((et,tt)=>{g[tt]={description:et.description||"Files",accept:{}},et.mimeTypes?et.mimeTypes.map(nt=>{g[tt].accept[nt]=et.extensions||[]}):g[tt].accept["*/*"]=et.extensions||[]});const j=await window.showOpenFilePicker({id:$[0].id,startIn:$[0].startIn,types:g,multiple:$[0].multiple||!1,excludeAcceptAllOption:$[0].excludeAcceptAllOption||!1}),_e=await Promise.all(j.map(s$1));return $[0].multiple?_e:_e[0]},l$1={__proto__:null,default:c$2};function u$1($){function g(j){if(Object(j)!==j)return Promise.reject(new TypeError(j+" is not an object."));var _e=j.done;return Promise.resolve(j.value).then(function(et){return{value:et,done:_e}})}return u$1=function(j){this.s=j,this.n=j.next},u$1.prototype={s:null,n:null,next:function(){return g(this.n.apply(this.s,arguments))},return:function(j){var _e=this.s.return;return _e===void 0?Promise.resolve({value:j,done:!0}):g(_e.apply(this.s,arguments))},throw:function(j){var _e=this.s.return;return _e===void 0?Promise.reject(j):g(_e.apply(this.s,arguments))}},new u$1($)}const p$1=async($,g,j=$.name,_e)=>{const et=[],tt=[];var nt,rt=!1,it=!1;try{for(var st,ot=function(at){var lt,ut,ht,ft=2;for(typeof Symbol<"u"&&(ut=Symbol.asyncIterator,ht=Symbol.iterator);ft--;){if(ut&&(lt=at[ut])!=null)return lt.call(at);if(ht&&(lt=at[ht])!=null)return new u$1(lt.call(at));ut="@@asyncIterator",ht="@@iterator"}throw new TypeError("Object is not async iterable")}($.values());rt=!(st=await ot.next()).done;rt=!1){const at=st.value,lt=`${j}/${at.name}`;at.kind==="file"?tt.push(at.getFile().then(ut=>(ut.directoryHandle=$,ut.handle=at,Object.defineProperty(ut,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>lt})))):at.kind!=="directory"||!g||_e&&_e(at)||et.push(p$1(at,g,lt,_e))}}catch(at){it=!0,nt=at}finally{try{rt&&ot.return!=null&&await ot.return()}finally{if(it)throw nt}}return[...(await Promise.all(et)).flat(),...await Promise.all(tt)]};var d=async($={})=>{$.recursive=$.recursive||!1,$.mode=$.mode||"read";const g=await window.showDirectoryPicker({id:$.id,startIn:$.startIn,mode:$.mode});return(await(await g.values()).next()).done?[g]:p$1(g,$.recursive,void 0,$.skipDirectory)},y$2={__proto__:null,default:d},f$1=async($,g=[{}],j=null,_e=!1,et=null)=>{Array.isArray(g)||(g=[g]),g[0].fileName=g[0].fileName||"Untitled";const tt=[];let nt=null;if($ instanceof Blob&&$.type?nt=$.type:$.headers&&$.headers.get("content-type")&&(nt=$.headers.get("content-type")),g.forEach((st,ot)=>{tt[ot]={description:st.description||"Files",accept:{}},st.mimeTypes?(ot===0&&nt&&st.mimeTypes.push(nt),st.mimeTypes.map(at=>{tt[ot].accept[at]=st.extensions||[]})):nt?tt[ot].accept[nt]=st.extensions||[]:tt[ot].accept["*/*"]=st.extensions||[]}),j)try{await j.getFile()}catch(st){if(j=null,_e)throw st}const rt=j||await window.showSaveFilePicker({suggestedName:g[0].fileName,id:g[0].id,startIn:g[0].startIn,types:tt,excludeAcceptAllOption:g[0].excludeAcceptAllOption||!1});!j&&et&&et(rt);const it=await rt.createWritable();return"stream"in $?(await $.stream().pipeTo(it),rt):"body"in $?(await $.body.pipeTo(it),rt):(await it.write(await $),await it.close(),rt)},m$2={__proto__:null,default:f$1},w=async($=[{}])=>(Array.isArray($)||($=[$]),new Promise((g,j)=>{const _e=document.createElement("input");_e.type="file";const et=[...$.map(it=>it.mimeTypes||[]),...$.map(it=>it.extensions||[])].join();_e.multiple=$[0].multiple||!1,_e.accept=et||"",_e.style.display="none",document.body.append(_e);const tt=it=>{typeof nt=="function"&&nt(),g(it)},nt=$[0].legacySetup&&$[0].legacySetup(tt,()=>nt(j),_e),rt=()=>{window.removeEventListener("focus",rt),_e.remove()};_e.addEventListener("click",()=>{window.addEventListener("focus",rt)}),_e.addEventListener("change",()=>{window.removeEventListener("focus",rt),_e.remove(),tt(_e.multiple?Array.from(_e.files):_e.files[0])}),"showPicker"in HTMLInputElement.prototype?_e.showPicker():_e.click()})),v$1={__proto__:null,default:w},h$1=async($=[{}])=>(Array.isArray($)||($=[$]),$[0].recursive=$[0].recursive||!1,new Promise((g,j)=>{const _e=document.createElement("input");_e.type="file",_e.webkitdirectory=!0;const et=nt=>{typeof tt=="function"&&tt(),g(nt)},tt=$[0].legacySetup&&$[0].legacySetup(et,()=>tt(j),_e);_e.addEventListener("change",()=>{let nt=Array.from(_e.files);$[0].recursive?$[0].recursive&&$[0].skipDirectory&&(nt=nt.filter(rt=>rt.webkitRelativePath.split("/").every(it=>!$[0].skipDirectory({name:it,kind:"directory"})))):nt=nt.filter(rt=>rt.webkitRelativePath.split("/").length===2),et(nt)}),"showPicker"in HTMLInputElement.prototype?_e.showPicker():_e.click()})),b={__proto__:null,default:h$1},P=async($,g={})=>{Array.isArray(g)&&(g=g[0]);const j=document.createElement("a");let _e=$;"body"in $&&(_e=await async function(nt,rt){const it=nt.getReader(),st=new ReadableStream({start:lt=>async function ut(){return it.read().then(({done:ht,value:ft})=>{if(!ht)return lt.enqueue(ft),ut();lt.close()})}()}),ot=new Response(st),at=await ot.blob();return it.releaseLock(),new Blob([at],{type:rt})}($.body,$.headers.get("content-type"))),j.download=g.fileName||"Untitled",j.href=URL.createObjectURL(await _e);const et=()=>{typeof tt=="function"&&tt()},tt=g.legacySetup&&g.legacySetup(et,()=>tt(),j);return j.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(j.href),3e4),et()}),j.click(),null},k={__proto__:null,default:P};const FileControls=({onLoad:$,onSave:g,onSelectExample:j})=>jsxRuntimeExports.jsxs("div",{className:"file-controls",children:[jsxRuntimeExports.jsx("button",{className:"load",onClick:$,children:"Load"}),jsxRuntimeExports.jsx("button",{className:"save",onClick:g,children:"Save"}),jsxRuntimeExports.jsxs("select",{onChange:_e=>{j(_e.target.value)},children:[jsxRuntimeExports.jsx("option",{value:"",children:"Examples"}),jsxRuntimeExports.jsx("option",{value:"goal",children:"Goal Tree"}),jsxRuntimeExports.jsx("option",{value:"problem",children:"Problem Tree"}),jsxRuntimeExports.jsx("option",{value:"conflict",children:"Conflict Cloud"})]})]}),exampleGoalTreeText=`
type: goal
Goal: "Make money now and in the future"

revUp: "Generate more revenue" {
    class: CSF
}
costsDown: "Control costs" {
    class: CSF
}

Goal <- revUp
Goal <- costsDown

keepCust: "Protect relationship with existing customers"
newCust: "Acquire new customers"

reduceInfra: "Reduce infrastructure spending"
retain: "Retain employees"
marketSalary: "Keep up with market salaries"

morale: "Maintain employee morale"
features: "Develop new features"

newCust <- features

# This is probably the wrong place for 'retain'
features <- retain

revUp <- newCust
revUp <- keepCust
costsDown <- reduceInfra
retain <- marketSalary
retain <- morale
`,exampleEvaporatingCloudText=`
type: conflict
A: Maximize business performance

B: Subordinate all decisions to the financial goal

C: Ensure people are in a state of optimal performance

D: Subordinate people's needs to the financial goal

B <- D: *inject* Psychological flow triggers

D': Attend to people's needs (& let people work)
`,exampleProblemTreeText=`
type: problem
bad: "Bad user experience" {
    class: UDE
}
cluttered: "Cluttered interface" {
    class: UDE
}
bad <- cluttered
ux: "Low investment in UX design"
features: "Many features added"
cluttered <- ux && features
`,EditorContainer=({onChange:$,placeholder:g="",rows:j=20,disabled:_e=!1,autoFocus:et=!1,text:tt,setText:nt,error:rt})=>{React.useEffect(()=>{$(tt)},[tt]);function it(ut,ht){console.log("here is the current model value:",ut),nt(ut),$(ut)}async function st(){const ht=await(await n$1()).text();nt(ht),$(ht)}async function ot(){await o$1(new Blob([tt],{type:"text/plain"}),{fileName:"document.txt",extensions:[".txt"]})}const at={conflict:exampleEvaporatingCloudText,goal:exampleGoalTreeText,problem:exampleProblemTreeText};async function lt(ut){ut in at&&it(at[ut])}return jsxRuntimeExports.jsxs("div",{className:"editor",children:[jsxRuntimeExports.jsx(FileControls,{onLoad:st,onSave:ot,onSelectExample:lt}),jsxRuntimeExports.jsx(ReactCodeMirror,{value:tt,height:"80vh",extensions:[],onChange:it}),jsxRuntimeExports.jsx("p",{className:`edit-result ${rt?"error":""}`,children:rt})]})},wrapLines=($,g)=>{const j=$.split(" "),_e=[];let et="";return j.forEach((tt,nt)=>{et.length+tt.length>g&&(_e.push(et),et=""),et+=tt+" ",nt===j.length-1&&_e.push(et)}),_e};function computeResizeTransform($,g,j,_e){const et=$.getBBox({stroke:!0,fill:!0,markers:!0}),tt=et.width+j,nt=et.height+_e;console.log("bounding h w: ",nt,tt);const rt=g.clientWidth,it=g.clientHeight;console.log("container h w: ",it,rt);const st=Math.min(100/tt,100/nt);return console.log("zoomScale: ",st),`scale(${st},${st})`}function saveSvgUrl($){const g=$.outerHTML,j=`<?xml version="1.0" standalone="no"?>\r
`,_e=new Blob([j,g],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(_e)}const intermediatePoint=($,g,j)=>{const _e=g.x-$.x,et=g.y-$.y,tt=Math.sqrt(_e*_e+et*et),nt=j/tt;return{x:$.x+_e*nt,y:$.y+et*nt}};function midPoint($,g){return{x:($.x+g.x)/2,y:($.y+g.y)/2}}const Injection=({text:$,edge:g,dx:j,dy:_e})=>{if(!$)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const et=wrapLines($,35),tt=midPoint(g.start,g.end),nt=16,rt=tt.x+j,it=rt-75,st=tt.y+_e,ot=_e/Math.abs(_e),at=st+et.length*nt+7,ut=ot===1?st:at,ht=rt;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("text",{x:it,y:st,children:et.map((ft,gt)=>jsxRuntimeExports.jsx("tspan",{x:it,dy:nt,children:ft},gt))}),jsxRuntimeExports.jsx("line",{x1:ht,y1:ut,x2:tt.x,y2:tt.y,stroke:"#000",strokeDasharray:"4 5",strokeWidth:"2"})]})},CloudEdge=({edge:$})=>jsxRuntimeExports.jsx("line",{x1:$.adjStart.x,y1:$.adjStart.y,x2:$.end.x,y2:$.end.y,stroke:"#000",strokeWidth:"3",markerStart:"url(#startarrow)"}),CloudNode=({text:$,x:g,y:j,width:_e,height:et,annotation:tt})=>{const nt=wrapLines($,20),rt=16,it=12,st=nt.length*rt,ot=j+et/2-st/2-4,at=g+it;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("rect",{x:g,y:j,rx:"10",ry:"10",width:_e,height:et}),jsxRuntimeExports.jsx("text",{x:at,y:ot,children:nt.map((lt,ut)=>jsxRuntimeExports.jsx("tspan",{x:at,dy:rt,children:lt},ut))}),jsxRuntimeExports.jsx("circle",{cx:g,cy:j,r:"10",style:{fill:"white",stroke:"black",strokeWidth:"2px"}}),jsxRuntimeExports.jsx("text",{x:g-4,y:j+4,children:tt})]})},drawCloud=$=>{const g={A:"",B:"",C:"",D:"","D'":""},j=new Map;$.statements.filter(bt=>bt.type==="node").forEach(bt=>{g[bt.id]=bt.text}),$.statements.forEach(bt=>{if(bt.type==="edge"){const $t=bt.fromIds[0],Mt=bt.toId,Ot=$t<Mt?`${$t}-${Mt}`:`${Mt}-${$t}`;j[Ot]=bt.text}});const _e=25,et=250,tt=500,nt=50,rt=300,it=(nt+rt)/2,st=150,ot=75,at={x:_e,y:it,w:st,h:ot},lt={x:et,y:nt,w:st,h:ot},ut={x:et,y:rt,w:st,h:ot},ht={x:tt,y:nt,w:st,h:ot},ft={x:tt,y:rt,w:st,h:ot},gt=createEdge(at,lt),dt=createEdge(at,ut),mt=createEdge(lt,ht),yt=createEdge(ut,ft),Et=nodeBottomCenterPont(ht),Ct=nodeTopCenterPont(ft),kt=midPoint(Et,Ct),St=[displacePoint(Et,0,16),displacePoint(kt,-15,5),displacePoint(kt,15,-5),displacePoint(Ct,0,-16)],Pt={start:St[0],end:St[3]},Bt=St.map(bt=>`${bt.x},${bt.y}`).join(" "),xt=`
  svg {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-size: 13px;
  }
  svg text {
    fill: black;
  }
  svg text.annotation {
    font-weight: bold;
  }
  svg rect {
    fill: white;
    stroke: black;
    stroke-width: 2;
  }
  `;return jsxRuntimeExports.jsxs("svg",{id:"cloudSvg",width:"100%",height:"100%",version:"1.1",preserveAspectRatio:"xMinYMin",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("style",{children:xt}),jsxRuntimeExports.jsxs("g",{id:"cloudSvgInner",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"1.75",orient:"auto",children:jsxRuntimeExports.jsx("polygon",{points:"0 0, 10 3.5, 0 7",transform:"scale(0.5 0.5)"})}),jsxRuntimeExports.jsx("marker",{id:"startarrow",markerWidth:"10",markerHeight:"7",refX:"5",refY:"1.75",orient:"auto",children:jsxRuntimeExports.jsx("polygon",{points:"10 0, 10 7, 0 3.5",fill:"",transform:"scale(0.5 0.5)"})}),jsxRuntimeExports.jsx("marker",{id:"endarrow",markerWidth:"10",markerHeight:"7",refX:"0",refY:"1.75",orient:"auto",markerUnits:"strokeWidth",children:jsxRuntimeExports.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"",transform:"scale(0.5 0.5)"})})]}),jsxRuntimeExports.jsx(CloudNode,{annotation:"A",text:g.A,x:at.x,y:at.y,width:st,height:ot}),jsxRuntimeExports.jsx(CloudNode,{annotation:"B",text:g.B,x:lt.x,y:lt.y,width:st,height:ot}),jsxRuntimeExports.jsx(CloudNode,{annotation:"C",text:g.C,x:ut.x,y:ut.y,width:st,height:ot}),jsxRuntimeExports.jsx(CloudNode,{annotation:"D",text:g.D,x:ht.x,y:ht.y,width:st,height:ot}),jsxRuntimeExports.jsx(CloudNode,{annotation:"D'",text:g["D'"],x:ft.x,y:ft.y,width:st,height:ot}),jsxRuntimeExports.jsx(CloudEdge,{edge:gt}),jsxRuntimeExports.jsx(CloudEdge,{edge:dt}),jsxRuntimeExports.jsx(CloudEdge,{edge:mt}),jsxRuntimeExports.jsx(CloudEdge,{edge:yt}),jsxRuntimeExports.jsx(Injection,{text:j["A-B"],edge:gt,dx:-100,dy:-125}),jsxRuntimeExports.jsx(Injection,{text:j["A-C"],edge:dt,dx:-100,dy:125}),jsxRuntimeExports.jsx(Injection,{text:j["B-D"],edge:mt,dx:0,dy:-75}),jsxRuntimeExports.jsx(Injection,{text:j["C-D'"],edge:yt,dx:0,dy:75}),jsxRuntimeExports.jsx(Injection,{text:j["D-D'"],edge:Pt,dx:120,dy:20}),jsxRuntimeExports.jsx("polyline",{points:Bt,markerStart:"url(#startarrow)",markerEnd:"url(#endarrow)",style:{fill:"none",stroke:"black",strokeWidth:3}})]})]})};function createEdge($,g){const j={start:{x:$.x+$.w,y:$.y+$.h/2},adjStart:{x:0,y:0},end:{x:g.x,y:g.y+g.h/2}};return j.adjStart=intermediatePoint(j.start,j.end,16),j}function nodeBottomCenterPont($){return{x:$.x+$.w/2,y:$.y+$.h}}function nodeTopCenterPont($){return{x:$.x+$.w/2,y:$.y}}function displacePoint($,g,j){return{x:$.x+g,y:$.y+j}}function Cloud({ast:$,setSvgElem:g}){return $&&React.useEffect(()=>{const j=document.getElementById("cloudSvgInner"),_e=document.getElementById("cloudSvgContainer");j==null||j.setAttribute("transform",computeResizeTransform(j,_e,10,0)+", translate(-10, 0)"),g(document.getElementById("cloudSvg"))},[$]),jsxRuntimeExports.jsxs("div",{id:"cloudSvgContainer",style:{width:"100%",height:"500"},children:[$&&drawCloud($),";"]})}var noop$2={value:()=>{}};function dispatch(){for(var $=0,g=arguments.length,j={},_e;$<g;++$){if(!(_e=arguments[$]+"")||_e in j||/[\s.]/.test(_e))throw new Error("illegal type: "+_e);j[_e]=[]}return new Dispatch(j)}function Dispatch($){this._=$}function parseTypenames$1($,g){return $.trim().split(/^|\s+/).map(function(j){var _e="",et=j.indexOf(".");if(et>=0&&(_e=j.slice(et+1),j=j.slice(0,et)),j&&!g.hasOwnProperty(j))throw new Error("unknown type: "+j);return{type:j,name:_e}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function($,g){var j=this._,_e=parseTypenames$1($+"",j),et,tt=-1,nt=_e.length;if(arguments.length<2){for(;++tt<nt;)if((et=($=_e[tt]).type)&&(et=get$2(j[et],$.name)))return et;return}if(g!=null&&typeof g!="function")throw new Error("invalid callback: "+g);for(;++tt<nt;)if(et=($=_e[tt]).type)j[et]=set$1(j[et],$.name,g);else if(g==null)for(et in j)j[et]=set$1(j[et],$.name,null);return this},copy:function(){var $={},g=this._;for(var j in g)$[j]=g[j].slice();return new Dispatch($)},call:function($,g){if((et=arguments.length-2)>0)for(var j=new Array(et),_e=0,et,tt;_e<et;++_e)j[_e]=arguments[_e+2];if(!this._.hasOwnProperty($))throw new Error("unknown type: "+$);for(tt=this._[$],_e=0,et=tt.length;_e<et;++_e)tt[_e].value.apply(g,j)},apply:function($,g,j){if(!this._.hasOwnProperty($))throw new Error("unknown type: "+$);for(var _e=this._[$],et=0,tt=_e.length;et<tt;++et)_e[et].value.apply(g,j)}};function get$2($,g){for(var j=0,_e=$.length,et;j<_e;++j)if((et=$[j]).name===g)return et.value}function set$1($,g,j){for(var _e=0,et=$.length;_e<et;++_e)if($[_e].name===g){$[_e]=noop$2,$=$.slice(0,_e).concat($.slice(_e+1));break}return j!=null&&$.push({name:g,value:j}),$}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace($){var g=$+="",j=g.indexOf(":");return j>=0&&(g=$.slice(0,j))!=="xmlns"&&($=$.slice(j+1)),namespaces.hasOwnProperty(g)?{space:namespaces[g],local:$}:$}function creatorInherit($){return function(){var g=this.ownerDocument,j=this.namespaceURI;return j===xhtml&&g.documentElement.namespaceURI===xhtml?g.createElement($):g.createElementNS(j,$)}}function creatorFixed($){return function(){return this.ownerDocument.createElementNS($.space,$.local)}}function creator($){var g=namespace($);return(g.local?creatorFixed:creatorInherit)(g)}function none(){}function selector($){return $==null?none:function(){return this.querySelector($)}}function selection_select($){typeof $!="function"&&($=selector($));for(var g=this._groups,j=g.length,_e=new Array(j),et=0;et<j;++et)for(var tt=g[et],nt=tt.length,rt=_e[et]=new Array(nt),it,st,ot=0;ot<nt;++ot)(it=tt[ot])&&(st=$.call(it,it.__data__,ot,tt))&&("__data__"in it&&(st.__data__=it.__data__),rt[ot]=st);return new Selection$1(_e,this._parents)}function array$1($){return $==null?[]:Array.isArray($)?$:Array.from($)}function empty(){return[]}function selectorAll($){return $==null?empty:function(){return this.querySelectorAll($)}}function arrayAll($){return function(){return array$1($.apply(this,arguments))}}function selection_selectAll($){typeof $=="function"?$=arrayAll($):$=selectorAll($);for(var g=this._groups,j=g.length,_e=[],et=[],tt=0;tt<j;++tt)for(var nt=g[tt],rt=nt.length,it,st=0;st<rt;++st)(it=nt[st])&&(_e.push($.call(it,it.__data__,st,nt)),et.push(it));return new Selection$1(_e,et)}function matcher($){return function(){return this.matches($)}}function childMatcher($){return function(g){return g.matches($)}}var find$2=Array.prototype.find;function childFind($){return function(){return find$2.call(this.children,$)}}function childFirst(){return this.firstElementChild}function selection_selectChild($){return this.select($==null?childFirst:childFind(typeof $=="function"?$:childMatcher($)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter($){return function(){return filter$1.call(this.children,$)}}function selection_selectChildren($){return this.selectAll($==null?children:childrenFilter(typeof $=="function"?$:childMatcher($)))}function selection_filter($){typeof $!="function"&&($=matcher($));for(var g=this._groups,j=g.length,_e=new Array(j),et=0;et<j;++et)for(var tt=g[et],nt=tt.length,rt=_e[et]=[],it,st=0;st<nt;++st)(it=tt[st])&&$.call(it,it.__data__,st,tt)&&rt.push(it);return new Selection$1(_e,this._parents)}function sparse($){return new Array($.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode($,g){this.ownerDocument=$.ownerDocument,this.namespaceURI=$.namespaceURI,this._next=null,this._parent=$,this.__data__=g}EnterNode.prototype={constructor:EnterNode,appendChild:function($){return this._parent.insertBefore($,this._next)},insertBefore:function($,g){return this._parent.insertBefore($,g)},querySelector:function($){return this._parent.querySelector($)},querySelectorAll:function($){return this._parent.querySelectorAll($)}};function constant$3($){return function(){return $}}function bindIndex($,g,j,_e,et,tt){for(var nt=0,rt,it=g.length,st=tt.length;nt<st;++nt)(rt=g[nt])?(rt.__data__=tt[nt],_e[nt]=rt):j[nt]=new EnterNode($,tt[nt]);for(;nt<it;++nt)(rt=g[nt])&&(et[nt]=rt)}function bindKey($,g,j,_e,et,tt,nt){var rt,it,st=new Map,ot=g.length,at=tt.length,lt=new Array(ot),ut;for(rt=0;rt<ot;++rt)(it=g[rt])&&(lt[rt]=ut=nt.call(it,it.__data__,rt,g)+"",st.has(ut)?et[rt]=it:st.set(ut,it));for(rt=0;rt<at;++rt)ut=nt.call($,tt[rt],rt,tt)+"",(it=st.get(ut))?(_e[rt]=it,it.__data__=tt[rt],st.delete(ut)):j[rt]=new EnterNode($,tt[rt]);for(rt=0;rt<ot;++rt)(it=g[rt])&&st.get(lt[rt])===it&&(et[rt]=it)}function datum($){return $.__data__}function selection_data($,g){if(!arguments.length)return Array.from(this,datum);var j=g?bindKey:bindIndex,_e=this._parents,et=this._groups;typeof $!="function"&&($=constant$3($));for(var tt=et.length,nt=new Array(tt),rt=new Array(tt),it=new Array(tt),st=0;st<tt;++st){var ot=_e[st],at=et[st],lt=at.length,ut=arraylike($.call(ot,ot&&ot.__data__,st,_e)),ht=ut.length,ft=rt[st]=new Array(ht),gt=nt[st]=new Array(ht),dt=it[st]=new Array(lt);j(ot,at,ft,gt,dt,ut,g);for(var mt=0,yt=0,Et,Ct;mt<ht;++mt)if(Et=ft[mt]){for(mt>=yt&&(yt=mt+1);!(Ct=gt[yt])&&++yt<ht;);Et._next=Ct||null}}return nt=new Selection$1(nt,_e),nt._enter=rt,nt._exit=it,nt}function arraylike($){return typeof $=="object"&&"length"in $?$:Array.from($)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join($,g,j){var _e=this.enter(),et=this,tt=this.exit();return typeof $=="function"?(_e=$(_e),_e&&(_e=_e.selection())):_e=_e.append($+""),g!=null&&(et=g(et),et&&(et=et.selection())),j==null?tt.remove():j(tt),_e&&et?_e.merge(et).order():et}function selection_merge($){for(var g=$.selection?$.selection():$,j=this._groups,_e=g._groups,et=j.length,tt=_e.length,nt=Math.min(et,tt),rt=new Array(et),it=0;it<nt;++it)for(var st=j[it],ot=_e[it],at=st.length,lt=rt[it]=new Array(at),ut,ht=0;ht<at;++ht)(ut=st[ht]||ot[ht])&&(lt[ht]=ut);for(;it<et;++it)rt[it]=j[it];return new Selection$1(rt,this._parents)}function selection_order(){for(var $=this._groups,g=-1,j=$.length;++g<j;)for(var _e=$[g],et=_e.length-1,tt=_e[et],nt;--et>=0;)(nt=_e[et])&&(tt&&nt.compareDocumentPosition(tt)^4&&tt.parentNode.insertBefore(nt,tt),tt=nt);return this}function selection_sort($){$||($=ascending);function g(at,lt){return at&&lt?$(at.__data__,lt.__data__):!at-!lt}for(var j=this._groups,_e=j.length,et=new Array(_e),tt=0;tt<_e;++tt){for(var nt=j[tt],rt=nt.length,it=et[tt]=new Array(rt),st,ot=0;ot<rt;++ot)(st=nt[ot])&&(it[ot]=st);it.sort(g)}return new Selection$1(et,this._parents).order()}function ascending($,g){return $<g?-1:$>g?1:$>=g?0:NaN}function selection_call(){var $=arguments[0];return arguments[0]=this,$.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var $=this._groups,g=0,j=$.length;g<j;++g)for(var _e=$[g],et=0,tt=_e.length;et<tt;++et){var nt=_e[et];if(nt)return nt}return null}function selection_size(){let $=0;for(const g of this)++$;return $}function selection_empty(){return!this.node()}function selection_each($){for(var g=this._groups,j=0,_e=g.length;j<_e;++j)for(var et=g[j],tt=0,nt=et.length,rt;tt<nt;++tt)(rt=et[tt])&&$.call(rt,rt.__data__,tt,et);return this}function attrRemove$1($){return function(){this.removeAttribute($)}}function attrRemoveNS$1($){return function(){this.removeAttributeNS($.space,$.local)}}function attrConstant$1($,g){return function(){this.setAttribute($,g)}}function attrConstantNS$1($,g){return function(){this.setAttributeNS($.space,$.local,g)}}function attrFunction$1($,g){return function(){var j=g.apply(this,arguments);j==null?this.removeAttribute($):this.setAttribute($,j)}}function attrFunctionNS$1($,g){return function(){var j=g.apply(this,arguments);j==null?this.removeAttributeNS($.space,$.local):this.setAttributeNS($.space,$.local,j)}}function selection_attr($,g){var j=namespace($);if(arguments.length<2){var _e=this.node();return j.local?_e.getAttributeNS(j.space,j.local):_e.getAttribute(j)}return this.each((g==null?j.local?attrRemoveNS$1:attrRemove$1:typeof g=="function"?j.local?attrFunctionNS$1:attrFunction$1:j.local?attrConstantNS$1:attrConstant$1)(j,g))}function defaultView($){return $.ownerDocument&&$.ownerDocument.defaultView||$.document&&$||$.defaultView}function styleRemove$1($){return function(){this.style.removeProperty($)}}function styleConstant$1($,g,j){return function(){this.style.setProperty($,g,j)}}function styleFunction$1($,g,j){return function(){var _e=g.apply(this,arguments);_e==null?this.style.removeProperty($):this.style.setProperty($,_e,j)}}function selection_style($,g,j){return arguments.length>1?this.each((g==null?styleRemove$1:typeof g=="function"?styleFunction$1:styleConstant$1)($,g,j??"")):styleValue(this.node(),$)}function styleValue($,g){return $.style.getPropertyValue(g)||defaultView($).getComputedStyle($,null).getPropertyValue(g)}function propertyRemove($){return function(){delete this[$]}}function propertyConstant($,g){return function(){this[$]=g}}function propertyFunction($,g){return function(){var j=g.apply(this,arguments);j==null?delete this[$]:this[$]=j}}function selection_property($,g){return arguments.length>1?this.each((g==null?propertyRemove:typeof g=="function"?propertyFunction:propertyConstant)($,g)):this.node()[$]}function classArray($){return $.trim().split(/^|\s+/)}function classList($){return $.classList||new ClassList($)}function ClassList($){this._node=$,this._names=classArray($.getAttribute("class")||"")}ClassList.prototype={add:function($){var g=this._names.indexOf($);g<0&&(this._names.push($),this._node.setAttribute("class",this._names.join(" ")))},remove:function($){var g=this._names.indexOf($);g>=0&&(this._names.splice(g,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function($){return this._names.indexOf($)>=0}};function classedAdd($,g){for(var j=classList($),_e=-1,et=g.length;++_e<et;)j.add(g[_e])}function classedRemove($,g){for(var j=classList($),_e=-1,et=g.length;++_e<et;)j.remove(g[_e])}function classedTrue($){return function(){classedAdd(this,$)}}function classedFalse($){return function(){classedRemove(this,$)}}function classedFunction($,g){return function(){(g.apply(this,arguments)?classedAdd:classedRemove)(this,$)}}function selection_classed($,g){var j=classArray($+"");if(arguments.length<2){for(var _e=classList(this.node()),et=-1,tt=j.length;++et<tt;)if(!_e.contains(j[et]))return!1;return!0}return this.each((typeof g=="function"?classedFunction:g?classedTrue:classedFalse)(j,g))}function textRemove(){this.textContent=""}function textConstant$1($){return function(){this.textContent=$}}function textFunction$1($){return function(){var g=$.apply(this,arguments);this.textContent=g??""}}function selection_text($){return arguments.length?this.each($==null?textRemove:(typeof $=="function"?textFunction$1:textConstant$1)($)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant($){return function(){this.innerHTML=$}}function htmlFunction($){return function(){var g=$.apply(this,arguments);this.innerHTML=g??""}}function selection_html($){return arguments.length?this.each($==null?htmlRemove:(typeof $=="function"?htmlFunction:htmlConstant)($)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append($){var g=typeof $=="function"?$:creator($);return this.select(function(){return this.appendChild(g.apply(this,arguments))})}function constantNull(){return null}function selection_insert($,g){var j=typeof $=="function"?$:creator($),_e=g==null?constantNull:typeof g=="function"?g:selector(g);return this.select(function(){return this.insertBefore(j.apply(this,arguments),_e.apply(this,arguments)||null)})}function remove(){var $=this.parentNode;$&&$.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var $=this.cloneNode(!1),g=this.parentNode;return g?g.insertBefore($,this.nextSibling):$}function selection_cloneDeep(){var $=this.cloneNode(!0),g=this.parentNode;return g?g.insertBefore($,this.nextSibling):$}function selection_clone($){return this.select($?selection_cloneDeep:selection_cloneShallow)}function selection_datum($){return arguments.length?this.property("__data__",$):this.node().__data__}function contextListener($){return function(g){$.call(this,g,this.__data__)}}function parseTypenames($){return $.trim().split(/^|\s+/).map(function(g){var j="",_e=g.indexOf(".");return _e>=0&&(j=g.slice(_e+1),g=g.slice(0,_e)),{type:g,name:j}})}function onRemove($){return function(){var g=this.__on;if(g){for(var j=0,_e=-1,et=g.length,tt;j<et;++j)tt=g[j],(!$.type||tt.type===$.type)&&tt.name===$.name?this.removeEventListener(tt.type,tt.listener,tt.options):g[++_e]=tt;++_e?g.length=_e:delete this.__on}}}function onAdd($,g,j){return function(){var _e=this.__on,et,tt=contextListener(g);if(_e){for(var nt=0,rt=_e.length;nt<rt;++nt)if((et=_e[nt]).type===$.type&&et.name===$.name){this.removeEventListener(et.type,et.listener,et.options),this.addEventListener(et.type,et.listener=tt,et.options=j),et.value=g;return}}this.addEventListener($.type,tt,j),et={type:$.type,name:$.name,value:g,listener:tt,options:j},_e?_e.push(et):this.__on=[et]}}function selection_on($,g,j){var _e=parseTypenames($+""),et,tt=_e.length,nt;if(arguments.length<2){var rt=this.node().__on;if(rt){for(var it=0,st=rt.length,ot;it<st;++it)for(et=0,ot=rt[it];et<tt;++et)if((nt=_e[et]).type===ot.type&&nt.name===ot.name)return ot.value}return}for(rt=g?onAdd:onRemove,et=0;et<tt;++et)this.each(rt(_e[et],g,j));return this}function dispatchEvent($,g,j){var _e=defaultView($),et=_e.CustomEvent;typeof et=="function"?et=new et(g,j):(et=_e.document.createEvent("Event"),j?(et.initEvent(g,j.bubbles,j.cancelable),et.detail=j.detail):et.initEvent(g,!1,!1)),$.dispatchEvent(et)}function dispatchConstant($,g){return function(){return dispatchEvent(this,$,g)}}function dispatchFunction($,g){return function(){return dispatchEvent(this,$,g.apply(this,arguments))}}function selection_dispatch($,g){return this.each((typeof g=="function"?dispatchFunction:dispatchConstant)($,g))}function*selection_iterator(){for(var $=this._groups,g=0,j=$.length;g<j;++g)for(var _e=$[g],et=0,tt=_e.length,nt;et<tt;++et)(nt=_e[et])&&(yield nt)}var root$3=[null];function Selection$1($,g){this._groups=$,this._parents=g}function selection(){return new Selection$1([[document.documentElement]],root$3)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select($){return typeof $=="string"?new Selection$1([[document.querySelector($)]],[document.documentElement]):new Selection$1([[$]],root$3)}function define($,g,j){$.prototype=g.prototype=j,j.constructor=$}function extend($,g){var j=Object.create($.prototype);for(var _e in g)j[_e]=g[_e];return j}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy($){return Object.assign(new this.constructor,this,$)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color($){var g,j;return $=($+"").trim().toLowerCase(),(g=reHex.exec($))?(j=g[1].length,g=parseInt(g[1],16),j===6?rgbn(g):j===3?new Rgb(g>>8&15|g>>4&240,g>>4&15|g&240,(g&15)<<4|g&15,1):j===8?rgba(g>>24&255,g>>16&255,g>>8&255,(g&255)/255):j===4?rgba(g>>12&15|g>>8&240,g>>8&15|g>>4&240,g>>4&15|g&240,((g&15)<<4|g&15)/255):null):(g=reRgbInteger.exec($))?new Rgb(g[1],g[2],g[3],1):(g=reRgbPercent.exec($))?new Rgb(g[1]*255/100,g[2]*255/100,g[3]*255/100,1):(g=reRgbaInteger.exec($))?rgba(g[1],g[2],g[3],g[4]):(g=reRgbaPercent.exec($))?rgba(g[1]*255/100,g[2]*255/100,g[3]*255/100,g[4]):(g=reHslPercent.exec($))?hsla(g[1],g[2]/100,g[3]/100,1):(g=reHslaPercent.exec($))?hsla(g[1],g[2]/100,g[3]/100,g[4]):named.hasOwnProperty($)?rgbn(named[$]):$==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn($){return new Rgb($>>16&255,$>>8&255,$&255,1)}function rgba($,g,j,_e){return _e<=0&&($=g=j=NaN),new Rgb($,g,j,_e)}function rgbConvert($){return $ instanceof Color||($=color($)),$?($=$.rgb(),new Rgb($.r,$.g,$.b,$.opacity)):new Rgb}function rgb($,g,j,_e){return arguments.length===1?rgbConvert($):new Rgb($,g,j,_e??1)}function Rgb($,g,j,_e){this.r=+$,this.g=+g,this.b=+j,this.opacity=+_e}define(Rgb,rgb,extend(Color,{brighter($){return $=$==null?brighter:Math.pow(brighter,$),new Rgb(this.r*$,this.g*$,this.b*$,this.opacity)},darker($){return $=$==null?darker:Math.pow(darker,$),new Rgb(this.r*$,this.g*$,this.b*$,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const $=clampa(this.opacity);return`${$===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${$===1?")":`, ${$})`}`}function clampa($){return isNaN($)?1:Math.max(0,Math.min(1,$))}function clampi($){return Math.max(0,Math.min(255,Math.round($)||0))}function hex$1($){return $=clampi($),($<16?"0":"")+$.toString(16)}function hsla($,g,j,_e){return _e<=0?$=g=j=NaN:j<=0||j>=1?$=g=NaN:g<=0&&($=NaN),new Hsl($,g,j,_e)}function hslConvert($){if($ instanceof Hsl)return new Hsl($.h,$.s,$.l,$.opacity);if($ instanceof Color||($=color($)),!$)return new Hsl;if($ instanceof Hsl)return $;$=$.rgb();var g=$.r/255,j=$.g/255,_e=$.b/255,et=Math.min(g,j,_e),tt=Math.max(g,j,_e),nt=NaN,rt=tt-et,it=(tt+et)/2;return rt?(g===tt?nt=(j-_e)/rt+(j<_e)*6:j===tt?nt=(_e-g)/rt+2:nt=(g-j)/rt+4,rt/=it<.5?tt+et:2-tt-et,nt*=60):rt=it>0&&it<1?0:nt,new Hsl(nt,rt,it,$.opacity)}function hsl($,g,j,_e){return arguments.length===1?hslConvert($):new Hsl($,g,j,_e??1)}function Hsl($,g,j,_e){this.h=+$,this.s=+g,this.l=+j,this.opacity=+_e}define(Hsl,hsl,extend(Color,{brighter($){return $=$==null?brighter:Math.pow(brighter,$),new Hsl(this.h,this.s,this.l*$,this.opacity)},darker($){return $=$==null?darker:Math.pow(darker,$),new Hsl(this.h,this.s,this.l*$,this.opacity)},rgb(){var $=this.h%360+(this.h<0)*360,g=isNaN($)||isNaN(this.s)?0:this.s,j=this.l,_e=j+(j<.5?j:1-j)*g,et=2*j-_e;return new Rgb(hsl2rgb($>=240?$-240:$+120,et,_e),hsl2rgb($,et,_e),hsl2rgb($<120?$+240:$-120,et,_e),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const $=clampa(this.opacity);return`${$===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${$===1?")":`, ${$})`}`}}));function clamph($){return $=($||0)%360,$<0?$+360:$}function clampt($){return Math.max(0,Math.min(1,$||0))}function hsl2rgb($,g,j){return($<60?g+(j-g)*$/60:$<180?j:$<240?g+(j-g)*(240-$)/60:g)*255}const constant$2=$=>()=>$;function linear($,g){return function(j){return $+j*g}}function exponential($,g,j){return $=Math.pow($,j),g=Math.pow(g,j)-$,j=1/j,function(_e){return Math.pow($+_e*g,j)}}function gamma($){return($=+$)==1?nogamma:function(g,j){return j-g?exponential(g,j,$):constant$2(isNaN(g)?j:g)}}function nogamma($,g){var j=g-$;return j?linear($,j):constant$2(isNaN($)?g:$)}const interpolateRgb=function $(g){var j=gamma(g);function _e(et,tt){var nt=j((et=rgb(et)).r,(tt=rgb(tt)).r),rt=j(et.g,tt.g),it=j(et.b,tt.b),st=nogamma(et.opacity,tt.opacity);return function(ot){return et.r=nt(ot),et.g=rt(ot),et.b=it(ot),et.opacity=st(ot),et+""}}return _e.gamma=$,_e}(1);function interpolateNumber($,g){return $=+$,g=+g,function(j){return $*(1-j)+g*j}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero($){return function(){return $}}function one($){return function(g){return $(g)+""}}function interpolateString($,g){var j=reA.lastIndex=reB.lastIndex=0,_e,et,tt,nt=-1,rt=[],it=[];for($=$+"",g=g+"";(_e=reA.exec($))&&(et=reB.exec(g));)(tt=et.index)>j&&(tt=g.slice(j,tt),rt[nt]?rt[nt]+=tt:rt[++nt]=tt),(_e=_e[0])===(et=et[0])?rt[nt]?rt[nt]+=et:rt[++nt]=et:(rt[++nt]=null,it.push({i:nt,x:interpolateNumber(_e,et)})),j=reB.lastIndex;return j<g.length&&(tt=g.slice(j),rt[nt]?rt[nt]+=tt:rt[++nt]=tt),rt.length<2?it[0]?one(it[0].x):zero(g):(g=it.length,function(st){for(var ot=0,at;ot<g;++ot)rt[(at=it[ot]).i]=at.x(st);return rt.join("")})}var degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose($,g,j,_e,et,tt){var nt,rt,it;return(nt=Math.sqrt($*$+g*g))&&($/=nt,g/=nt),(it=$*j+g*_e)&&(j-=$*it,_e-=g*it),(rt=Math.sqrt(j*j+_e*_e))&&(j/=rt,_e/=rt,it/=rt),$*_e<g*j&&($=-$,g=-g,it=-it,nt=-nt),{translateX:et,translateY:tt,rotate:Math.atan2(g,$)*degrees,skewX:Math.atan(it)*degrees,scaleX:nt,scaleY:rt}}var svgNode;function parseCss($){const g=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)($+"");return g.isIdentity?identity$2:decompose(g.a,g.b,g.c,g.d,g.e,g.f)}function parseSvg($){return $==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",$),!($=svgNode.transform.baseVal.consolidate()))?identity$2:($=$.matrix,decompose($.a,$.b,$.c,$.d,$.e,$.f))}function interpolateTransform($,g,j,_e){function et(st){return st.length?st.pop()+" ":""}function tt(st,ot,at,lt,ut,ht){if(st!==at||ot!==lt){var ft=ut.push("translate(",null,g,null,j);ht.push({i:ft-4,x:interpolateNumber(st,at)},{i:ft-2,x:interpolateNumber(ot,lt)})}else(at||lt)&&ut.push("translate("+at+g+lt+j)}function nt(st,ot,at,lt){st!==ot?(st-ot>180?ot+=360:ot-st>180&&(st+=360),lt.push({i:at.push(et(at)+"rotate(",null,_e)-2,x:interpolateNumber(st,ot)})):ot&&at.push(et(at)+"rotate("+ot+_e)}function rt(st,ot,at,lt){st!==ot?lt.push({i:at.push(et(at)+"skewX(",null,_e)-2,x:interpolateNumber(st,ot)}):ot&&at.push(et(at)+"skewX("+ot+_e)}function it(st,ot,at,lt,ut,ht){if(st!==at||ot!==lt){var ft=ut.push(et(ut)+"scale(",null,",",null,")");ht.push({i:ft-4,x:interpolateNumber(st,at)},{i:ft-2,x:interpolateNumber(ot,lt)})}else(at!==1||lt!==1)&&ut.push(et(ut)+"scale("+at+","+lt+")")}return function(st,ot){var at=[],lt=[];return st=$(st),ot=$(ot),tt(st.translateX,st.translateY,ot.translateX,ot.translateY,at,lt),nt(st.rotate,ot.rotate,at,lt),rt(st.skewX,ot.skewX,at,lt),it(st.scaleX,st.scaleY,ot.scaleX,ot.scaleY,at,lt),st=ot=null,function(ut){for(var ht=-1,ft=lt.length,gt;++ht<ft;)at[(gt=lt[ht]).i]=gt.x(ut);return at.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function($){setTimeout($,17)};function now$3(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function($,g,j){if(typeof $!="function")throw new TypeError("callback is not a function");j=(j==null?now$3():+j)+(g==null?0:+g),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=$,this._time=j,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer($,g,j){var _e=new Timer;return _e.restart($,g,j),_e}function timerFlush(){now$3(),++frame;for(var $=taskHead,g;$;)(g=clockNow-$._time)>=0&&$._call.call(void 0,g),$=$._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var $=clock.now(),g=$-clockLast;g>pokeDelay&&(clockSkew-=g,clockLast=$)}function nap(){for(var $,g=taskHead,j,_e=1/0;g;)g._call?(_e>g._time&&(_e=g._time),$=g,g=g._next):(j=g._next,g._next=null,g=$?$._next=j:taskHead=j);taskTail=$,sleep(_e)}function sleep($){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var g=$-clockNow;g>24?($<1/0&&(timeout$1=setTimeout(wake,$-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout($,g,j){var _e=new Timer;return g=g==null?0:+g,_e.restart(et=>{_e.stop(),$(et+g)},g,j),_e}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule($,g,j,_e,et,tt){var nt=$.__transition;if(!nt)$.__transition={};else if(j in nt)return;create($,j,{name:g,index:_e,group:et,on:emptyOn,tween:emptyTween,time:tt.time,delay:tt.delay,duration:tt.duration,ease:tt.ease,timer:null,state:CREATED})}function init($,g){var j=get$1($,g);if(j.state>CREATED)throw new Error("too late; already scheduled");return j}function set($,g){var j=get$1($,g);if(j.state>STARTED)throw new Error("too late; already running");return j}function get$1($,g){var j=$.__transition;if(!j||!(j=j[g]))throw new Error("transition not found");return j}function create($,g,j){var _e=$.__transition,et;_e[g]=j,j.timer=timer(tt,0,j.time);function tt(st){j.state=SCHEDULED,j.timer.restart(nt,j.delay,j.time),j.delay<=st&&nt(st-j.delay)}function nt(st){var ot,at,lt,ut;if(j.state!==SCHEDULED)return it();for(ot in _e)if(ut=_e[ot],ut.name===j.name){if(ut.state===STARTED)return timeout(nt);ut.state===RUNNING?(ut.state=ENDED,ut.timer.stop(),ut.on.call("interrupt",$,$.__data__,ut.index,ut.group),delete _e[ot]):+ot<g&&(ut.state=ENDED,ut.timer.stop(),ut.on.call("cancel",$,$.__data__,ut.index,ut.group),delete _e[ot])}if(timeout(function(){j.state===STARTED&&(j.state=RUNNING,j.timer.restart(rt,j.delay,j.time),rt(st))}),j.state=STARTING,j.on.call("start",$,$.__data__,j.index,j.group),j.state===STARTING){for(j.state=STARTED,et=new Array(lt=j.tween.length),ot=0,at=-1;ot<lt;++ot)(ut=j.tween[ot].value.call($,$.__data__,j.index,j.group))&&(et[++at]=ut);et.length=at+1}}function rt(st){for(var ot=st<j.duration?j.ease.call(null,st/j.duration):(j.timer.restart(it),j.state=ENDING,1),at=-1,lt=et.length;++at<lt;)et[at].call($,ot);j.state===ENDING&&(j.on.call("end",$,$.__data__,j.index,j.group),it())}function it(){j.state=ENDED,j.timer.stop(),delete _e[g];for(var st in _e)return;delete $.__transition}}function interrupt($,g){var j=$.__transition,_e,et,tt=!0,nt;if(j){g=g==null?null:g+"";for(nt in j){if((_e=j[nt]).name!==g){tt=!1;continue}et=_e.state>STARTING&&_e.state<ENDING,_e.state=ENDED,_e.timer.stop(),_e.on.call(et?"interrupt":"cancel",$,$.__data__,_e.index,_e.group),delete j[nt]}tt&&delete $.__transition}}function selection_interrupt($){return this.each(function(){interrupt(this,$)})}function tweenRemove($,g){var j,_e;return function(){var et=set(this,$),tt=et.tween;if(tt!==j){_e=j=tt;for(var nt=0,rt=_e.length;nt<rt;++nt)if(_e[nt].name===g){_e=_e.slice(),_e.splice(nt,1);break}}et.tween=_e}}function tweenFunction($,g,j){var _e,et;if(typeof j!="function")throw new Error;return function(){var tt=set(this,$),nt=tt.tween;if(nt!==_e){et=(_e=nt).slice();for(var rt={name:g,value:j},it=0,st=et.length;it<st;++it)if(et[it].name===g){et[it]=rt;break}it===st&&et.push(rt)}tt.tween=et}}function transition_tween($,g){var j=this._id;if($+="",arguments.length<2){for(var _e=get$1(this.node(),j).tween,et=0,tt=_e.length,nt;et<tt;++et)if((nt=_e[et]).name===$)return nt.value;return null}return this.each((g==null?tweenRemove:tweenFunction)(j,$,g))}function tweenValue($,g,j){var _e=$._id;return $.each(function(){var et=set(this,_e);(et.value||(et.value={}))[g]=j.apply(this,arguments)}),function(et){return get$1(et,_e).value[g]}}function interpolate($,g){var j;return(typeof g=="number"?interpolateNumber:g instanceof color?interpolateRgb:(j=color(g))?(g=j,interpolateRgb):interpolateString)($,g)}function attrRemove($){return function(){this.removeAttribute($)}}function attrRemoveNS($){return function(){this.removeAttributeNS($.space,$.local)}}function attrConstant($,g,j){var _e,et=j+"",tt;return function(){var nt=this.getAttribute($);return nt===et?null:nt===_e?tt:tt=g(_e=nt,j)}}function attrConstantNS($,g,j){var _e,et=j+"",tt;return function(){var nt=this.getAttributeNS($.space,$.local);return nt===et?null:nt===_e?tt:tt=g(_e=nt,j)}}function attrFunction($,g,j){var _e,et,tt;return function(){var nt,rt=j(this),it;return rt==null?void this.removeAttribute($):(nt=this.getAttribute($),it=rt+"",nt===it?null:nt===_e&&it===et?tt:(et=it,tt=g(_e=nt,rt)))}}function attrFunctionNS($,g,j){var _e,et,tt;return function(){var nt,rt=j(this),it;return rt==null?void this.removeAttributeNS($.space,$.local):(nt=this.getAttributeNS($.space,$.local),it=rt+"",nt===it?null:nt===_e&&it===et?tt:(et=it,tt=g(_e=nt,rt)))}}function transition_attr($,g){var j=namespace($),_e=j==="transform"?interpolateTransformSvg:interpolate;return this.attrTween($,typeof g=="function"?(j.local?attrFunctionNS:attrFunction)(j,_e,tweenValue(this,"attr."+$,g)):g==null?(j.local?attrRemoveNS:attrRemove)(j):(j.local?attrConstantNS:attrConstant)(j,_e,g))}function attrInterpolate($,g){return function(j){this.setAttribute($,g.call(this,j))}}function attrInterpolateNS($,g){return function(j){this.setAttributeNS($.space,$.local,g.call(this,j))}}function attrTweenNS($,g){var j,_e;function et(){var tt=g.apply(this,arguments);return tt!==_e&&(j=(_e=tt)&&attrInterpolateNS($,tt)),j}return et._value=g,et}function attrTween($,g){var j,_e;function et(){var tt=g.apply(this,arguments);return tt!==_e&&(j=(_e=tt)&&attrInterpolate($,tt)),j}return et._value=g,et}function transition_attrTween($,g){var j="attr."+$;if(arguments.length<2)return(j=this.tween(j))&&j._value;if(g==null)return this.tween(j,null);if(typeof g!="function")throw new Error;var _e=namespace($);return this.tween(j,(_e.local?attrTweenNS:attrTween)(_e,g))}function delayFunction($,g){return function(){init(this,$).delay=+g.apply(this,arguments)}}function delayConstant($,g){return g=+g,function(){init(this,$).delay=g}}function transition_delay($){var g=this._id;return arguments.length?this.each((typeof $=="function"?delayFunction:delayConstant)(g,$)):get$1(this.node(),g).delay}function durationFunction($,g){return function(){set(this,$).duration=+g.apply(this,arguments)}}function durationConstant($,g){return g=+g,function(){set(this,$).duration=g}}function transition_duration($){var g=this._id;return arguments.length?this.each((typeof $=="function"?durationFunction:durationConstant)(g,$)):get$1(this.node(),g).duration}function easeConstant($,g){if(typeof g!="function")throw new Error;return function(){set(this,$).ease=g}}function transition_ease($){var g=this._id;return arguments.length?this.each(easeConstant(g,$)):get$1(this.node(),g).ease}function easeVarying($,g){return function(){var j=g.apply(this,arguments);if(typeof j!="function")throw new Error;set(this,$).ease=j}}function transition_easeVarying($){if(typeof $!="function")throw new Error;return this.each(easeVarying(this._id,$))}function transition_filter($){typeof $!="function"&&($=matcher($));for(var g=this._groups,j=g.length,_e=new Array(j),et=0;et<j;++et)for(var tt=g[et],nt=tt.length,rt=_e[et]=[],it,st=0;st<nt;++st)(it=tt[st])&&$.call(it,it.__data__,st,tt)&&rt.push(it);return new Transition(_e,this._parents,this._name,this._id)}function transition_merge($){if($._id!==this._id)throw new Error;for(var g=this._groups,j=$._groups,_e=g.length,et=j.length,tt=Math.min(_e,et),nt=new Array(_e),rt=0;rt<tt;++rt)for(var it=g[rt],st=j[rt],ot=it.length,at=nt[rt]=new Array(ot),lt,ut=0;ut<ot;++ut)(lt=it[ut]||st[ut])&&(at[ut]=lt);for(;rt<_e;++rt)nt[rt]=g[rt];return new Transition(nt,this._parents,this._name,this._id)}function start($){return($+"").trim().split(/^|\s+/).every(function(g){var j=g.indexOf(".");return j>=0&&(g=g.slice(0,j)),!g||g==="start"})}function onFunction($,g,j){var _e,et,tt=start(g)?init:set;return function(){var nt=tt(this,$),rt=nt.on;rt!==_e&&(et=(_e=rt).copy()).on(g,j),nt.on=et}}function transition_on($,g){var j=this._id;return arguments.length<2?get$1(this.node(),j).on.on($):this.each(onFunction(j,$,g))}function removeFunction($){return function(){var g=this.parentNode;for(var j in this.__transition)if(+j!==$)return;g&&g.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select($){var g=this._name,j=this._id;typeof $!="function"&&($=selector($));for(var _e=this._groups,et=_e.length,tt=new Array(et),nt=0;nt<et;++nt)for(var rt=_e[nt],it=rt.length,st=tt[nt]=new Array(it),ot,at,lt=0;lt<it;++lt)(ot=rt[lt])&&(at=$.call(ot,ot.__data__,lt,rt))&&("__data__"in ot&&(at.__data__=ot.__data__),st[lt]=at,schedule(st[lt],g,j,lt,st,get$1(ot,j)));return new Transition(tt,this._parents,g,j)}function transition_selectAll($){var g=this._name,j=this._id;typeof $!="function"&&($=selectorAll($));for(var _e=this._groups,et=_e.length,tt=[],nt=[],rt=0;rt<et;++rt)for(var it=_e[rt],st=it.length,ot,at=0;at<st;++at)if(ot=it[at]){for(var lt=$.call(ot,ot.__data__,at,it),ut,ht=get$1(ot,j),ft=0,gt=lt.length;ft<gt;++ft)(ut=lt[ft])&&schedule(ut,g,j,ft,lt,ht);tt.push(lt),nt.push(ot)}return new Transition(tt,nt,g,j)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull($,g){var j,_e,et;return function(){var tt=styleValue(this,$),nt=(this.style.removeProperty($),styleValue(this,$));return tt===nt?null:tt===j&&nt===_e?et:et=g(j=tt,_e=nt)}}function styleRemove($){return function(){this.style.removeProperty($)}}function styleConstant($,g,j){var _e,et=j+"",tt;return function(){var nt=styleValue(this,$);return nt===et?null:nt===_e?tt:tt=g(_e=nt,j)}}function styleFunction($,g,j){var _e,et,tt;return function(){var nt=styleValue(this,$),rt=j(this),it=rt+"";return rt==null&&(it=rt=(this.style.removeProperty($),styleValue(this,$))),nt===it?null:nt===_e&&it===et?tt:(et=it,tt=g(_e=nt,rt))}}function styleMaybeRemove($,g){var j,_e,et,tt="style."+g,nt="end."+tt,rt;return function(){var it=set(this,$),st=it.on,ot=it.value[tt]==null?rt||(rt=styleRemove(g)):void 0;(st!==j||et!==ot)&&(_e=(j=st).copy()).on(nt,et=ot),it.on=_e}}function transition_style($,g,j){var _e=($+="")=="transform"?interpolateTransformCss:interpolate;return g==null?this.styleTween($,styleNull($,_e)).on("end.style."+$,styleRemove($)):typeof g=="function"?this.styleTween($,styleFunction($,_e,tweenValue(this,"style."+$,g))).each(styleMaybeRemove(this._id,$)):this.styleTween($,styleConstant($,_e,g),j).on("end.style."+$,null)}function styleInterpolate($,g,j){return function(_e){this.style.setProperty($,g.call(this,_e),j)}}function styleTween($,g,j){var _e,et;function tt(){var nt=g.apply(this,arguments);return nt!==et&&(_e=(et=nt)&&styleInterpolate($,nt,j)),_e}return tt._value=g,tt}function transition_styleTween($,g,j){var _e="style."+($+="");if(arguments.length<2)return(_e=this.tween(_e))&&_e._value;if(g==null)return this.tween(_e,null);if(typeof g!="function")throw new Error;return this.tween(_e,styleTween($,g,j??""))}function textConstant($){return function(){this.textContent=$}}function textFunction($){return function(){var g=$(this);this.textContent=g??""}}function transition_text($){return this.tween("text",typeof $=="function"?textFunction(tweenValue(this,"text",$)):textConstant($==null?"":$+""))}function textInterpolate($){return function(g){this.textContent=$.call(this,g)}}function textTween($){var g,j;function _e(){var et=$.apply(this,arguments);return et!==j&&(g=(j=et)&&textInterpolate(et)),g}return _e._value=$,_e}function transition_textTween($){var g="text";if(arguments.length<1)return(g=this.tween(g))&&g._value;if($==null)return this.tween(g,null);if(typeof $!="function")throw new Error;return this.tween(g,textTween($))}function transition_transition(){for(var $=this._name,g=this._id,j=newId(),_e=this._groups,et=_e.length,tt=0;tt<et;++tt)for(var nt=_e[tt],rt=nt.length,it,st=0;st<rt;++st)if(it=nt[st]){var ot=get$1(it,g);schedule(it,$,j,st,nt,{time:ot.time+ot.delay+ot.duration,delay:0,duration:ot.duration,ease:ot.ease})}return new Transition(_e,this._parents,$,j)}function transition_end(){var $,g,j=this,_e=j._id,et=j.size();return new Promise(function(tt,nt){var rt={value:nt},it={value:function(){--et===0&&tt()}};j.each(function(){var st=set(this,_e),ot=st.on;ot!==$&&(g=($=ot).copy(),g._.cancel.push(rt),g._.interrupt.push(rt),g._.end.push(it)),st.on=g}),et===0&&tt()})}var id$1=0;function Transition($,g,j,_e){this._groups=$,this._parents=g,this._name=j,this._id=_e}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut($){return(($*=2)<=1?$*$*$:($-=2)*$*$+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit($,g){for(var j;!(j=$.__transition)||!(j=j[g]);)if(!($=$.parentNode))throw new Error(`transition ${g} not found`);return j}function selection_transition($){var g,j;$ instanceof Transition?(g=$._id,$=$._name):(g=newId(),(j=defaultTiming).time=now$3(),$=$==null?null:$+"");for(var _e=this._groups,et=_e.length,tt=0;tt<et;++tt)for(var nt=_e[tt],rt=nt.length,it,st=0;st<rt;++st)(it=nt[st])&&schedule(it,$,g,st,nt,j||inherit(it,g));return new Transition(_e,this._parents,$,g)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append($){this._+=$[0];for(let g=1,j=$.length;g<j;++g)this._+=arguments[g]+$[g]}function appendRound($){let g=Math.floor($);if(!(g>=0))throw new Error(`invalid digits: ${$}`);if(g>15)return append;const j=10**g;return function(_e){this._+=_e[0];for(let et=1,tt=_e.length;et<tt;++et)this._+=Math.round(arguments[et]*j)/j+_e[et]}}class Path{constructor(g){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=g==null?append:appendRound(g)}moveTo(g,j){this._append`M${this._x0=this._x1=+g},${this._y0=this._y1=+j}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(g,j){this._append`L${this._x1=+g},${this._y1=+j}`}quadraticCurveTo(g,j,_e,et){this._append`Q${+g},${+j},${this._x1=+_e},${this._y1=+et}`}bezierCurveTo(g,j,_e,et,tt,nt){this._append`C${+g},${+j},${+_e},${+et},${this._x1=+tt},${this._y1=+nt}`}arcTo(g,j,_e,et,tt){if(g=+g,j=+j,_e=+_e,et=+et,tt=+tt,tt<0)throw new Error(`negative radius: ${tt}`);let nt=this._x1,rt=this._y1,it=_e-g,st=et-j,ot=nt-g,at=rt-j,lt=ot*ot+at*at;if(this._x1===null)this._append`M${this._x1=g},${this._y1=j}`;else if(lt>epsilon)if(!(Math.abs(at*it-st*ot)>epsilon)||!tt)this._append`L${this._x1=g},${this._y1=j}`;else{let ut=_e-nt,ht=et-rt,ft=it*it+st*st,gt=ut*ut+ht*ht,dt=Math.sqrt(ft),mt=Math.sqrt(lt),yt=tt*Math.tan((pi-Math.acos((ft+lt-gt)/(2*dt*mt)))/2),Et=yt/mt,Ct=yt/dt;Math.abs(Et-1)>epsilon&&this._append`L${g+Et*ot},${j+Et*at}`,this._append`A${tt},${tt},0,0,${+(at*ut>ot*ht)},${this._x1=g+Ct*it},${this._y1=j+Ct*st}`}}arc(g,j,_e,et,tt,nt){if(g=+g,j=+j,_e=+_e,nt=!!nt,_e<0)throw new Error(`negative radius: ${_e}`);let rt=_e*Math.cos(et),it=_e*Math.sin(et),st=g+rt,ot=j+it,at=1^nt,lt=nt?et-tt:tt-et;this._x1===null?this._append`M${st},${ot}`:(Math.abs(this._x1-st)>epsilon||Math.abs(this._y1-ot)>epsilon)&&this._append`L${st},${ot}`,_e&&(lt<0&&(lt=lt%tau+tau),lt>tauEpsilon?this._append`A${_e},${_e},0,1,${at},${g-rt},${j-it}A${_e},${_e},0,1,${at},${this._x1=st},${this._y1=ot}`:lt>epsilon&&this._append`A${_e},${_e},0,${+(lt>=pi)},${at},${this._x1=g+_e*Math.cos(tt)},${this._y1=j+_e*Math.sin(tt)}`)}rect(g,j,_e,et){this._append`M${this._x0=this._x1=+g},${this._y0=this._y1=+j}h${_e=+_e}v${+et}h${-_e}Z`}toString(){return this._}}function responseText($){if(!$.ok)throw new Error($.status+" "+$.statusText);return $.text()}function text($,g){return fetch($,g).then(responseText)}function parser$2($){return(g,j)=>text(g,j).then(_e=>new DOMParser().parseFromString(_e,$))}var svg=parser$2("image/svg+xml");function constant$1($){return function(){return $}}function withPath($){let g=3;return $.digits=function(j){if(!arguments.length)return g;if(j==null)g=null;else{const _e=Math.floor(j);if(!(_e>=0))throw new RangeError(`invalid digits: ${j}`);g=_e}return $},()=>new Path(g)}function array($){return typeof $=="object"&&"length"in $?$:Array.from($)}function Linear($){this._context=$}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function($,g){switch($=+$,g=+g,this._point){case 0:this._point=1,this._line?this._context.lineTo($,g):this._context.moveTo($,g);break;case 1:this._point=2;default:this._context.lineTo($,g);break}}};function curveLinear($){return new Linear($)}function x($){return $[0]}function y$1($){return $[1]}function line($,g){var j=constant$1(!0),_e=null,et=curveLinear,tt=null,nt=withPath(rt);$=typeof $=="function"?$:$===void 0?x:constant$1($),g=typeof g=="function"?g:g===void 0?y$1:constant$1(g);function rt(it){var st,ot=(it=array(it)).length,at,lt=!1,ut;for(_e==null&&(tt=et(ut=nt())),st=0;st<=ot;++st)!(st<ot&&j(at=it[st],st,it))===lt&&((lt=!lt)?tt.lineStart():tt.lineEnd()),lt&&tt.point(+$(at,st,it),+g(at,st,it));if(ut)return tt=null,ut+""||null}return rt.x=function(it){return arguments.length?($=typeof it=="function"?it:constant$1(+it),rt):$},rt.y=function(it){return arguments.length?(g=typeof it=="function"?it:constant$1(+it),rt):g},rt.defined=function(it){return arguments.length?(j=typeof it=="function"?it:constant$1(!!it),rt):j},rt.curve=function(it){return arguments.length?(et=it,_e!=null&&(tt=et(_e)),rt):et},rt.context=function(it){return arguments.length?(it==null?_e=tt=null:tt=et(_e=it),rt):_e},rt}function point($,g,j){$._context.bezierCurveTo((2*$._x0+$._x1)/3,(2*$._y0+$._y1)/3,($._x0+2*$._x1)/3,($._y0+2*$._y1)/3,($._x0+4*$._x1+g)/6,($._y0+4*$._y1+j)/6)}function Basis($){this._context=$}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function($,g){switch($=+$,g=+g,this._point){case 0:this._point=1,this._line?this._context.lineTo($,g):this._context.moveTo($,g);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,$,g);break}this._x0=this._x1,this._x1=$,this._y0=this._y1,this._y1=g}};function basis($){return new Basis($)}function Transform$1($,g,j){this.k=$,this.x=g,this.y=j}Transform$1.prototype={constructor:Transform$1,scale:function($){return $===1?this:new Transform$1(this.k*$,this.x,this.y)},translate:function($,g){return $===0&g===0?this:new Transform$1(this.k,this.x+this.k*$,this.y+this.k*g)},apply:function($){return[$[0]*this.k+this.x,$[1]*this.k+this.y]},applyX:function($){return $*this.k+this.x},applyY:function($){return $*this.k+this.y},invert:function($){return[($[0]-this.x)/this.k,($[1]-this.y)/this.k]},invertX:function($){return($-this.x)/this.k},invertY:function($){return($-this.y)/this.k},rescaleX:function($){return $.copy().domain($.range().map(this.invertX,this).map($.invert,$))},rescaleY:function($){return $.copy().domain($.range().map(this.invertY,this).map($.invert,$))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform$1.prototype;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf||Function("return this")();const root$2=root$1;var Symbol$1=root$2.Symbol;const Symbol$2=Symbol$1;var objectProto$i=Object.prototype,hasOwnProperty$f=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag($){var g=hasOwnProperty$f.call($,symToStringTag$1),j=$[symToStringTag$1];try{$[symToStringTag$1]=void 0;var _e=!0}catch{}var et=nativeObjectToString$1.call($);return _e&&(g?$[symToStringTag$1]=j:delete $[symToStringTag$1]),et}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString($){return nativeObjectToString.call($)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag($){return $==null?$===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object($)?getRawTag($):objectToString($)}function isObjectLike($){return $!=null&&typeof $=="object"}var symbolTag$3="[object Symbol]";function isSymbol($){return typeof $=="symbol"||isObjectLike($)&&baseGetTag($)==symbolTag$3}function arrayMap($,g){for(var j=-1,_e=$==null?0:$.length,et=Array(_e);++j<_e;)et[j]=g($[j],j,$);return et}var isArray=Array.isArray;const isArray$1=isArray;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString($){if(typeof $=="string")return $;if(isArray$1($))return arrayMap($,baseToString)+"";if(isSymbol($))return symbolToString?symbolToString.call($):"";var g=$+"";return g=="0"&&1/$==-INFINITY$3?"-0":g}var reWhitespace=/\s/;function trimmedEndIndex($){for(var g=$.length;g--&&reWhitespace.test($.charAt(g)););return g}var reTrimStart=/^\s+/;function baseTrim($){return $&&$.slice(0,trimmedEndIndex($)+1).replace(reTrimStart,"")}function isObject($){var g=typeof $;return $!=null&&(g=="object"||g=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber($){if(typeof $=="number")return $;if(isSymbol($))return NAN;if(isObject($)){var g=typeof $.valueOf=="function"?$.valueOf():$;$=isObject(g)?g+"":g}if(typeof $!="string")return $===0?$:+$;$=baseTrim($);var j=reIsBinary.test($);return j||reIsOctal.test($)?freeParseInt($.slice(2),j?2:8):reIsBadHex.test($)?NAN:+$}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite($){if(!$)return $===0?$:0;if($=toNumber($),$===INFINITY$2||$===-INFINITY$2){var g=$<0?-1:1;return g*MAX_INTEGER}return $===$?$:0}function toInteger($){var g=toFinite($),j=g%1;return g===g?j?g-j:g:0}function identity$1($){return $}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction($){if(!isObject($))return!1;var g=baseGetTag($);return g==funcTag$2||g==genTag$1||g==asyncTag||g==proxyTag}var coreJsData=root$2["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var $=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}();function isMasked($){return!!maskSrcKey&&maskSrcKey in $}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource($){if($!=null){try{return funcToString$2.call($)}catch{}try{return $+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$e=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative($){if(!isObject($)||isMasked($))return!1;var g=isFunction($)?reIsNative:reIsHostCtor;return g.test(toSource($))}function getValue($,g){return $==null?void 0:$[g]}function getNative($,g){var j=getValue($,g);return baseIsNative(j)?j:void 0}var WeakMap$1=getNative(root$2,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function $(){}return function(g){if(!isObject(g))return{};if(objectCreate)return objectCreate(g);$.prototype=g;var j=new $;return $.prototype=void 0,j}}();const baseCreate$1=baseCreate;function apply($,g,j){switch(j.length){case 0:return $.call(g);case 1:return $.call(g,j[0]);case 2:return $.call(g,j[0],j[1]);case 3:return $.call(g,j[0],j[1],j[2])}return $.apply(g,j)}function noop$1(){}function copyArray($,g){var j=-1,_e=$.length;for(g||(g=Array(_e));++j<_e;)g[j]=$[j];return g}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut($){var g=0,j=0;return function(){var _e=nativeNow(),et=HOT_SPAN-(_e-j);if(j=_e,et>0){if(++g>=HOT_COUNT)return arguments[0]}else g=0;return $.apply(void 0,arguments)}}function constant($){return function(){return $}}var defineProperty=function(){try{var $=getNative(Object,"defineProperty");return $({},"",{}),$}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function($,g){return defineProperty$1($,"toString",{configurable:!0,enumerable:!1,value:constant(g),writable:!0})}:identity$1;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach($,g){for(var j=-1,_e=$==null?0:$.length;++j<_e&&g($[j],j,$)!==!1;);return $}function baseFindIndex($,g,j,_e){for(var et=$.length,tt=j+(_e?1:-1);_e?tt--:++tt<et;)if(g($[tt],tt,$))return tt;return-1}function baseIsNaN($){return $!==$}function strictIndexOf($,g,j){for(var _e=j-1,et=$.length;++_e<et;)if($[_e]===g)return _e;return-1}function baseIndexOf($,g,j){return g===g?strictIndexOf($,g,j):baseFindIndex($,baseIsNaN,j)}function arrayIncludes($,g){var j=$==null?0:$.length;return!!j&&baseIndexOf($,g,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex($,g){var j=typeof $;return g=g??MAX_SAFE_INTEGER$1,!!g&&(j=="number"||j!="symbol"&&reIsUint.test($))&&$>-1&&$%1==0&&$<g}function baseAssignValue($,g,j){g=="__proto__"&&defineProperty$1?defineProperty$1($,g,{configurable:!0,enumerable:!0,value:j,writable:!0}):$[g]=j}function eq($,g){return $===g||$!==$&&g!==g}var objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty;function assignValue($,g,j){var _e=$[g];(!(hasOwnProperty$d.call($,g)&&eq(_e,j))||j===void 0&&!(g in $))&&baseAssignValue($,g,j)}function copyObject($,g,j,_e){var et=!j;j||(j={});for(var tt=-1,nt=g.length;++tt<nt;){var rt=g[tt],it=_e?_e(j[rt],$[rt],rt,j,$):void 0;it===void 0&&(it=$[rt]),et?baseAssignValue(j,rt,it):assignValue(j,rt,it)}return j}var nativeMax$2=Math.max;function overRest($,g,j){return g=nativeMax$2(g===void 0?$.length-1:g,0),function(){for(var _e=arguments,et=-1,tt=nativeMax$2(_e.length-g,0),nt=Array(tt);++et<tt;)nt[et]=_e[g+et];et=-1;for(var rt=Array(g+1);++et<g;)rt[et]=_e[et];return rt[g]=j(nt),apply($,this,rt)}}function baseRest($,g){return setToString$1(overRest($,g,identity$1),$+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength($){return typeof $=="number"&&$>-1&&$%1==0&&$<=MAX_SAFE_INTEGER}function isArrayLike($){return $!=null&&isLength($.length)&&!isFunction($)}function isIterateeCall($,g,j){if(!isObject(j))return!1;var _e=typeof g;return(_e=="number"?isArrayLike(j)&&isIndex(g,j.length):_e=="string"&&g in j)?eq(j[g],$):!1}function createAssigner($){return baseRest(function(g,j){var _e=-1,et=j.length,tt=et>1?j[et-1]:void 0,nt=et>2?j[2]:void 0;for(tt=$.length>3&&typeof tt=="function"?(et--,tt):void 0,nt&&isIterateeCall(j[0],j[1],nt)&&(tt=et<3?void 0:tt,et=1),g=Object(g);++_e<et;){var rt=j[_e];rt&&$(g,rt,_e,tt)}return g})}var objectProto$e=Object.prototype;function isPrototype($){var g=$&&$.constructor,j=typeof g=="function"&&g.prototype||objectProto$e;return $===j}function baseTimes($,g){for(var j=-1,_e=Array($);++j<$;)_e[j]=g(j);return _e}var argsTag$3="[object Arguments]";function baseIsArguments($){return isObjectLike($)&&baseGetTag($)==argsTag$3}var objectProto$d=Object.prototype,hasOwnProperty$c=objectProto$d.hasOwnProperty,propertyIsEnumerable$1=objectProto$d.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function($){return isObjectLike($)&&hasOwnProperty$c.call($,"callee")&&!propertyIsEnumerable$1.call($,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$2.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray($){return isObjectLike($)&&isLength($.length)&&!!typedArrayTags[baseGetTag($)]}function baseUnary($){return function(g){return $(g)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var $=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return $||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function arrayLikeKeys($,g){var j=isArray$1($),_e=!j&&isArguments$1($),et=!j&&!_e&&isBuffer$1($),tt=!j&&!_e&&!et&&isTypedArray$1($),nt=j||_e||et||tt,rt=nt?baseTimes($.length,String):[],it=rt.length;for(var st in $)(g||hasOwnProperty$b.call($,st))&&!(nt&&(st=="length"||et&&(st=="offset"||st=="parent")||tt&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||isIndex(st,it)))&&rt.push(st);return rt}function overArg($,g){return function(j){return $(g(j))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty;function baseKeys($){if(!isPrototype($))return nativeKeys$1($);var g=[];for(var j in Object($))hasOwnProperty$a.call($,j)&&j!="constructor"&&g.push(j);return g}function keys($){return isArrayLike($)?arrayLikeKeys($):baseKeys($)}function nativeKeysIn($){var g=[];if($!=null)for(var j in Object($))g.push(j);return g}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function baseKeysIn($){if(!isObject($))return nativeKeysIn($);var g=isPrototype($),j=[];for(var _e in $)_e=="constructor"&&(g||!hasOwnProperty$9.call($,_e))||j.push(_e);return j}function keysIn($){return isArrayLike($)?arrayLikeKeys($,!0):baseKeysIn($)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey($,g){if(isArray$1($))return!1;var j=typeof $;return j=="number"||j=="symbol"||j=="boolean"||$==null||isSymbol($)?!0:reIsPlainProp.test($)||!reIsDeepProp.test($)||g!=null&&$ in Object(g)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete($){var g=this.has($)&&delete this.__data__[$];return this.size-=g?1:0,g}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet($){var g=this.__data__;if(nativeCreate$1){var j=g[$];return j===HASH_UNDEFINED$2?void 0:j}return hasOwnProperty$8.call(g,$)?g[$]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas($){var g=this.__data__;return nativeCreate$1?g[$]!==void 0:hasOwnProperty$7.call(g,$)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet($,g){var j=this.__data__;return this.size+=this.has($)?0:1,j[$]=nativeCreate$1&&g===void 0?HASH_UNDEFINED$1:g,this}function Hash($){var g=-1,j=$==null?0:$.length;for(this.clear();++g<j;){var _e=$[g];this.set(_e[0],_e[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf($,g){for(var j=$.length;j--;)if(eq($[j][0],g))return j;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete($){var g=this.__data__,j=assocIndexOf(g,$);if(j<0)return!1;var _e=g.length-1;return j==_e?g.pop():splice.call(g,j,1),--this.size,!0}function listCacheGet($){var g=this.__data__,j=assocIndexOf(g,$);return j<0?void 0:g[j][1]}function listCacheHas($){return assocIndexOf(this.__data__,$)>-1}function listCacheSet($,g){var j=this.__data__,_e=assocIndexOf(j,$);return _e<0?(++this.size,j.push([$,g])):j[_e][1]=g,this}function ListCache($){var g=-1,j=$==null?0:$.length;for(this.clear();++g<j;){var _e=$[g];this.set(_e[0],_e[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$2,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable($){var g=typeof $;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?$!=="__proto__":$===null}function getMapData($,g){var j=$.__data__;return isKeyable(g)?j[typeof g=="string"?"string":"hash"]:j.map}function mapCacheDelete($){var g=getMapData(this,$).delete($);return this.size-=g?1:0,g}function mapCacheGet($){return getMapData(this,$).get($)}function mapCacheHas($){return getMapData(this,$).has($)}function mapCacheSet($,g){var j=getMapData(this,$),_e=j.size;return j.set($,g),this.size+=j.size==_e?0:1,this}function MapCache($){var g=-1,j=$==null?0:$.length;for(this.clear();++g<j;){var _e=$[g];this.set(_e[0],_e[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize($,g){if(typeof $!="function"||g!=null&&typeof g!="function")throw new TypeError(FUNC_ERROR_TEXT);var j=function(){var _e=arguments,et=g?g.apply(this,_e):_e[0],tt=j.cache;if(tt.has(et))return tt.get(et);var nt=$.apply(this,_e);return j.cache=tt.set(et,nt)||tt,nt};return j.cache=new(memoize.Cache||MapCache),j}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped($){var g=memoize($,function(_e){return j.size===MAX_MEMOIZE_SIZE&&j.clear(),_e}),j=g.cache;return g}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function($){var g=[];return $.charCodeAt(0)===46&&g.push(""),$.replace(rePropName,function(j,_e,et,tt){g.push(et?tt.replace(reEscapeChar,"$1"):_e||j)}),g});const stringToPath$1=stringToPath;function toString($){return $==null?"":baseToString($)}function castPath($,g){return isArray$1($)?$:isKey($,g)?[$]:stringToPath$1(toString($))}var INFINITY$1=1/0;function toKey($){if(typeof $=="string"||isSymbol($))return $;var g=$+"";return g=="0"&&1/$==-INFINITY$1?"-0":g}function baseGet($,g){g=castPath(g,$);for(var j=0,_e=g.length;$!=null&&j<_e;)$=$[toKey(g[j++])];return j&&j==_e?$:void 0}function get($,g,j){var _e=$==null?void 0:baseGet($,g);return _e===void 0?j:_e}function arrayPush($,g){for(var j=-1,_e=g.length,et=$.length;++j<_e;)$[et+j]=g[j];return $}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable($){return isArray$1($)||isArguments$1($)||!!(spreadableSymbol&&$&&$[spreadableSymbol])}function baseFlatten($,g,j,_e,et){var tt=-1,nt=$.length;for(j||(j=isFlattenable),et||(et=[]);++tt<nt;){var rt=$[tt];g>0&&j(rt)?g>1?baseFlatten(rt,g-1,j,_e,et):arrayPush(et,rt):_e||(et[et.length]=rt)}return et}function flatten($){var g=$==null?0:$.length;return g?baseFlatten($,1):[]}function flatRest($){return setToString$1(overRest($,void 0,flatten),$+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject($){if(!isObjectLike($)||baseGetTag($)!=objectTag$3)return!1;var g=getPrototype$1($);if(g===null)return!0;var j=hasOwnProperty$6.call(g,"constructor")&&g.constructor;return typeof j=="function"&&j instanceof j&&funcToString.call(j)==objectCtorString}function arrayReduce($,g,j,_e){var et=-1,tt=$==null?0:$.length;for(_e&&tt&&(j=$[++et]);++et<tt;)j=g(j,$[et],et,$);return j}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete($){var g=this.__data__,j=g.delete($);return this.size=g.size,j}function stackGet($){return this.__data__.get($)}function stackHas($){return this.__data__.has($)}var LARGE_ARRAY_SIZE$1=200;function stackSet($,g){var j=this.__data__;if(j instanceof ListCache){var _e=j.__data__;if(!Map$2||_e.length<LARGE_ARRAY_SIZE$1-1)return _e.push([$,g]),this.size=++j.size,this;j=this.__data__=new MapCache(_e)}return j.set($,g),this.size=j.size,this}function Stack$2($){var g=this.__data__=new ListCache($);this.size=g.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;function baseAssign($,g){return $&&copyObject(g,keys(g),$)}function baseAssignIn($,g){return $&&copyObject(g,keysIn(g),$)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$2.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer($,g){if(g)return $.slice();var j=$.length,_e=allocUnsafe?allocUnsafe(j):new $.constructor(j);return $.copy(_e),_e}function arrayFilter($,g){for(var j=-1,_e=$==null?0:$.length,et=0,tt=[];++j<_e;){var nt=$[j];g(nt,j,$)&&(tt[et++]=nt)}return tt}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function($){return $==null?[]:($=Object($),arrayFilter(nativeGetSymbols$1($),function(g){return propertyIsEnumerable.call($,g)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols($,g){return copyObject($,getSymbols$1($),g)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function($){for(var g=[];$;)arrayPush(g,getSymbols$1($)),$=getPrototype$1($);return g}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn($,g){return copyObject($,getSymbolsIn$1($),g)}function baseGetAllKeys($,g,j){var _e=g($);return isArray$1($)?_e:arrayPush(_e,j($))}function getAllKeys($){return baseGetAllKeys($,keys,getSymbols$1)}function getAllKeysIn($){return baseGetAllKeys($,keysIn,getSymbolsIn$1)}var DataView=getNative(root$2,"DataView");const DataView$1=DataView;var Promise$1=getNative(root$2,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$2,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function($){var g=baseGetTag($),j=g==objectTag$2?$.constructor:void 0,_e=j?toSource(j):"";if(_e)switch(_e){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return g});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function initCloneArray($){var g=$.length,j=new $.constructor(g);return g&&typeof $[0]=="string"&&hasOwnProperty$5.call($,"index")&&(j.index=$.index,j.input=$.input),j}var Uint8Array=root$2.Uint8Array;const Uint8Array$1=Uint8Array;function cloneArrayBuffer($){var g=new $.constructor($.byteLength);return new Uint8Array$1(g).set(new Uint8Array$1($)),g}function cloneDataView($,g){var j=g?cloneArrayBuffer($.buffer):$.buffer;return new $.constructor(j,$.byteOffset,$.byteLength)}var reFlags=/\w*$/;function cloneRegExp($){var g=new $.constructor($.source,reFlags.exec($));return g.lastIndex=$.lastIndex,g}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol($){return symbolValueOf$1?Object(symbolValueOf$1.call($)):{}}function cloneTypedArray($,g){var j=g?cloneArrayBuffer($.buffer):$.buffer;return new $.constructor(j,$.byteOffset,$.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag($,g,j){var _e=$.constructor;switch(g){case arrayBufferTag$2:return cloneArrayBuffer($);case boolTag$2:case dateTag$2:return new _e(+$);case dataViewTag$2:return cloneDataView($,j);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray($,j);case mapTag$4:return new _e;case numberTag$2:case stringTag$2:return new _e($);case regexpTag$2:return cloneRegExp($);case setTag$4:return new _e;case symbolTag$2:return cloneSymbol($)}}function initCloneObject($){return typeof $.constructor=="function"&&!isPrototype($)?baseCreate$1(getPrototype$1($)):{}}var mapTag$3="[object Map]";function baseIsMap($){return isObjectLike($)&&getTag$1($)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet($){return isObjectLike($)&&getTag$1($)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone($,g,j,_e,et,tt){var nt,rt=g&CLONE_DEEP_FLAG$1,it=g&CLONE_FLAT_FLAG,st=g&CLONE_SYMBOLS_FLAG$1;if(j&&(nt=et?j($,_e,et,tt):j($)),nt!==void 0)return nt;if(!isObject($))return $;var ot=isArray$1($);if(ot){if(nt=initCloneArray($),!rt)return copyArray($,nt)}else{var at=getTag$1($),lt=at==funcTag||at==genTag;if(isBuffer$1($))return cloneBuffer($,rt);if(at==objectTag$1||at==argsTag$1||lt&&!et){if(nt=it||lt?{}:initCloneObject($),!rt)return it?copySymbolsIn($,baseAssignIn(nt,$)):copySymbols($,baseAssign(nt,$))}else{if(!cloneableTags[at])return et?$:{};nt=initCloneByTag($,at,rt)}}tt||(tt=new Stack$2);var ut=tt.get($);if(ut)return ut;tt.set($,nt),isSet$1($)?$.forEach(function(gt){nt.add(baseClone(gt,g,j,gt,$,tt))}):isMap$1($)&&$.forEach(function(gt,dt){nt.set(dt,baseClone(gt,g,j,dt,$,tt))});var ht=st?it?getAllKeysIn:getAllKeys:it?keysIn:keys,ft=ot?void 0:ht($);return arrayEach(ft||$,function(gt,dt){ft&&(dt=gt,gt=$[dt]),assignValue(nt,dt,baseClone(gt,g,j,dt,$,tt))}),nt}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep($){return baseClone($,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd($){return this.__data__.set($,HASH_UNDEFINED),this}function setCacheHas($){return this.__data__.has($)}function SetCache($){var g=-1,j=$==null?0:$.length;for(this.__data__=new MapCache;++g<j;)this.add($[g])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome($,g){for(var j=-1,_e=$==null?0:$.length;++j<_e;)if(g($[j],j,$))return!0;return!1}function cacheHas($,g){return $.has(g)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays($,g,j,_e,et,tt){var nt=j&COMPARE_PARTIAL_FLAG$5,rt=$.length,it=g.length;if(rt!=it&&!(nt&&it>rt))return!1;var st=tt.get($),ot=tt.get(g);if(st&&ot)return st==g&&ot==$;var at=-1,lt=!0,ut=j&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(tt.set($,g),tt.set(g,$);++at<rt;){var ht=$[at],ft=g[at];if(_e)var gt=nt?_e(ft,ht,at,g,$,tt):_e(ht,ft,at,$,g,tt);if(gt!==void 0){if(gt)continue;lt=!1;break}if(ut){if(!arraySome(g,function(dt,mt){if(!cacheHas(ut,mt)&&(ht===dt||et(ht,dt,j,_e,tt)))return ut.push(mt)})){lt=!1;break}}else if(!(ht===ft||et(ht,ft,j,_e,tt))){lt=!1;break}}return tt.delete($),tt.delete(g),lt}function mapToArray($){var g=-1,j=Array($.size);return $.forEach(function(_e,et){j[++g]=[et,_e]}),j}function setToArray($){var g=-1,j=Array($.size);return $.forEach(function(_e){j[++g]=_e}),j}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag($,g,j,_e,et,tt,nt){switch(j){case dataViewTag:if($.byteLength!=g.byteLength||$.byteOffset!=g.byteOffset)return!1;$=$.buffer,g=g.buffer;case arrayBufferTag:return!($.byteLength!=g.byteLength||!tt(new Uint8Array$1($),new Uint8Array$1(g)));case boolTag:case dateTag:case numberTag:return eq(+$,+g);case errorTag:return $.name==g.name&&$.message==g.message;case regexpTag:case stringTag:return $==g+"";case mapTag$1:var rt=mapToArray;case setTag$1:var it=_e&COMPARE_PARTIAL_FLAG$4;if(rt||(rt=setToArray),$.size!=g.size&&!it)return!1;var st=nt.get($);if(st)return st==g;_e|=COMPARE_UNORDERED_FLAG$2,nt.set($,g);var ot=equalArrays(rt($),rt(g),_e,et,tt,nt);return nt.delete($),ot;case symbolTag:if(symbolValueOf)return symbolValueOf.call($)==symbolValueOf.call(g)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function equalObjects($,g,j,_e,et,tt){var nt=j&COMPARE_PARTIAL_FLAG$3,rt=getAllKeys($),it=rt.length,st=getAllKeys(g),ot=st.length;if(it!=ot&&!nt)return!1;for(var at=it;at--;){var lt=rt[at];if(!(nt?lt in g:hasOwnProperty$4.call(g,lt)))return!1}var ut=tt.get($),ht=tt.get(g);if(ut&&ht)return ut==g&&ht==$;var ft=!0;tt.set($,g),tt.set(g,$);for(var gt=nt;++at<it;){lt=rt[at];var dt=$[lt],mt=g[lt];if(_e)var yt=nt?_e(mt,dt,lt,g,$,tt):_e(dt,mt,lt,$,g,tt);if(!(yt===void 0?dt===mt||et(dt,mt,j,_e,tt):yt)){ft=!1;break}gt||(gt=lt=="constructor")}if(ft&&!gt){var Et=$.constructor,Ct=g.constructor;Et!=Ct&&"constructor"in $&&"constructor"in g&&!(typeof Et=="function"&&Et instanceof Et&&typeof Ct=="function"&&Ct instanceof Ct)&&(ft=!1)}return tt.delete($),tt.delete(g),ft}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseIsEqualDeep($,g,j,_e,et,tt){var nt=isArray$1($),rt=isArray$1(g),it=nt?arrayTag:getTag$1($),st=rt?arrayTag:getTag$1(g);it=it==argsTag?objectTag:it,st=st==argsTag?objectTag:st;var ot=it==objectTag,at=st==objectTag,lt=it==st;if(lt&&isBuffer$1($)){if(!isBuffer$1(g))return!1;nt=!0,ot=!1}if(lt&&!ot)return tt||(tt=new Stack$2),nt||isTypedArray$1($)?equalArrays($,g,j,_e,et,tt):equalByTag($,g,it,j,_e,et,tt);if(!(j&COMPARE_PARTIAL_FLAG$2)){var ut=ot&&hasOwnProperty$3.call($,"__wrapped__"),ht=at&&hasOwnProperty$3.call(g,"__wrapped__");if(ut||ht){var ft=ut?$.value():$,gt=ht?g.value():g;return tt||(tt=new Stack$2),et(ft,gt,j,_e,tt)}}return lt?(tt||(tt=new Stack$2),equalObjects($,g,j,_e,et,tt)):!1}function baseIsEqual($,g,j,_e,et){return $===g?!0:$==null||g==null||!isObjectLike($)&&!isObjectLike(g)?$!==$&&g!==g:baseIsEqualDeep($,g,j,_e,baseIsEqual,et)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch($,g,j,_e){var et=j.length,tt=et,nt=!_e;if($==null)return!tt;for($=Object($);et--;){var rt=j[et];if(nt&&rt[2]?rt[1]!==$[rt[0]]:!(rt[0]in $))return!1}for(;++et<tt;){rt=j[et];var it=rt[0],st=$[it],ot=rt[1];if(nt&&rt[2]){if(st===void 0&&!(it in $))return!1}else{var at=new Stack$2;if(_e)var lt=_e(st,ot,it,$,g,at);if(!(lt===void 0?baseIsEqual(ot,st,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,_e,at):lt))return!1}}return!0}function isStrictComparable($){return $===$&&!isObject($)}function getMatchData($){for(var g=keys($),j=g.length;j--;){var _e=g[j],et=$[_e];g[j]=[_e,et,isStrictComparable(et)]}return g}function matchesStrictComparable($,g){return function(j){return j==null?!1:j[$]===g&&(g!==void 0||$ in Object(j))}}function baseMatches($){var g=getMatchData($);return g.length==1&&g[0][2]?matchesStrictComparable(g[0][0],g[0][1]):function(j){return j===$||baseIsMatch(j,$,g)}}function baseHasIn($,g){return $!=null&&g in Object($)}function hasPath($,g,j){g=castPath(g,$);for(var _e=-1,et=g.length,tt=!1;++_e<et;){var nt=toKey(g[_e]);if(!(tt=$!=null&&j($,nt)))break;$=$[nt]}return tt||++_e!=et?tt:(et=$==null?0:$.length,!!et&&isLength(et)&&isIndex(nt,et)&&(isArray$1($)||isArguments$1($)))}function hasIn($,g){return $!=null&&hasPath($,g,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty($,g){return isKey($)&&isStrictComparable(g)?matchesStrictComparable(toKey($),g):function(j){var _e=get(j,$);return _e===void 0&&_e===g?hasIn(j,$):baseIsEqual(g,_e,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty($){return function(g){return g==null?void 0:g[$]}}function basePropertyDeep($){return function(g){return baseGet(g,$)}}function property($){return isKey($)?baseProperty(toKey($)):basePropertyDeep($)}function baseIteratee($){return typeof $=="function"?$:$==null?identity$1:typeof $=="object"?isArray$1($)?baseMatchesProperty($[0],$[1]):baseMatches($):property($)}function createBaseFor($){return function(g,j,_e){for(var et=-1,tt=Object(g),nt=_e(g),rt=nt.length;rt--;){var it=nt[$?rt:++et];if(j(tt[it],it,tt)===!1)break}return g}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn($,g){return $&&baseFor$1($,g,keys)}function createBaseEach($,g){return function(j,_e){if(j==null)return j;if(!isArrayLike(j))return $(j,_e);for(var et=j.length,tt=g?et:-1,nt=Object(j);(g?tt--:++tt<et)&&_e(nt[tt],tt,nt)!==!1;);return j}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;var now$1=function(){return root$2.Date.now()};const now$2=now$1;var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,defaults=baseRest(function($,g){$=Object($);var j=-1,_e=g.length,et=_e>2?g[2]:void 0;for(et&&isIterateeCall(g[0],g[1],et)&&(_e=1);++j<_e;)for(var tt=g[j],nt=keysIn(tt),rt=-1,it=nt.length;++rt<it;){var st=nt[rt],ot=$[st];(ot===void 0||eq(ot,objectProto$2[st])&&!hasOwnProperty$2.call($,st))&&($[st]=tt[st])}return $});const defaults$1=defaults;function assignMergeValue($,g,j){(j!==void 0&&!eq($[g],j)||j===void 0&&!(g in $))&&baseAssignValue($,g,j)}function isArrayLikeObject($){return isObjectLike($)&&isArrayLike($)}function safeGet($,g){if(!(g==="constructor"&&typeof $[g]=="function")&&g!="__proto__")return $[g]}function toPlainObject($){return copyObject($,keysIn($))}function baseMergeDeep($,g,j,_e,et,tt,nt){var rt=safeGet($,j),it=safeGet(g,j),st=nt.get(it);if(st){assignMergeValue($,j,st);return}var ot=tt?tt(rt,it,j+"",$,g,nt):void 0,at=ot===void 0;if(at){var lt=isArray$1(it),ut=!lt&&isBuffer$1(it),ht=!lt&&!ut&&isTypedArray$1(it);ot=it,lt||ut||ht?isArray$1(rt)?ot=rt:isArrayLikeObject(rt)?ot=copyArray(rt):ut?(at=!1,ot=cloneBuffer(it,!0)):ht?(at=!1,ot=cloneTypedArray(it,!0)):ot=[]:isPlainObject(it)||isArguments$1(it)?(ot=rt,isArguments$1(rt)?ot=toPlainObject(rt):(!isObject(rt)||isFunction(rt))&&(ot=initCloneObject(it))):at=!1}at&&(nt.set(it,ot),et(ot,it,_e,tt,nt),nt.delete(it)),assignMergeValue($,j,ot)}function baseMerge($,g,j,_e,et){$!==g&&baseFor$1(g,function(tt,nt){if(et||(et=new Stack$2),isObject(tt))baseMergeDeep($,g,nt,j,baseMerge,_e,et);else{var rt=_e?_e(safeGet($,nt),tt,nt+"",$,g,et):void 0;rt===void 0&&(rt=tt),assignMergeValue($,nt,rt)}},keysIn)}function arrayIncludesWith($,g,j){for(var _e=-1,et=$==null?0:$.length;++_e<et;)if(j(g,$[_e]))return!0;return!1}function last$1($){var g=$==null?0:$.length;return g?$[g-1]:void 0}function castFunction($){return typeof $=="function"?$:identity$1}function forEach($,g){var j=isArray$1($)?arrayEach:baseEach$1;return j($,castFunction(g))}function baseFilter($,g){var j=[];return baseEach$1($,function(_e,et,tt){g(_e,et,tt)&&j.push(_e)}),j}function filter($,g){var j=isArray$1($)?arrayFilter:baseFilter;return j($,baseIteratee(g))}function createFind($){return function(g,j,_e){var et=Object(g);if(!isArrayLike(g)){var tt=baseIteratee(j);g=keys(g),j=function(rt){return tt(et[rt],rt,et)}}var nt=$(g,j,_e);return nt>-1?et[tt?g[nt]:nt]:void 0}}var nativeMax$1=Math.max;function findIndex($,g,j){var _e=$==null?0:$.length;if(!_e)return-1;var et=j==null?0:toInteger(j);return et<0&&(et=nativeMax$1(_e+et,0)),baseFindIndex($,baseIteratee(g),et)}var find=createFind(findIndex);const find$1=find;function baseMap($,g){var j=-1,_e=isArrayLike($)?Array($.length):[];return baseEach$1($,function(et,tt,nt){_e[++j]=g(et,tt,nt)}),_e}function map($,g){var j=isArray$1($)?arrayMap:baseMap;return j($,baseIteratee(g))}function forIn($,g){return $==null?$:baseFor$1($,castFunction(g),keysIn)}function forOwn($,g){return $&&baseForOwn($,castFunction(g))}function baseGt($,g){return $>g}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas($,g){return $!=null&&hasOwnProperty$1.call($,g)}function has($,g){return $!=null&&hasPath($,g,baseHas)}function baseValues($,g){return arrayMap(g,function(j){return $[j]})}function values($){return $==null?[]:baseValues($,keys($))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty($){if($==null)return!0;if(isArrayLike($)&&(isArray$1($)||typeof $=="string"||typeof $.splice=="function"||isBuffer$1($)||isTypedArray$1($)||isArguments$1($)))return!$.length;var g=getTag$1($);if(g==mapTag||g==setTag)return!$.size;if(isPrototype($))return!baseKeys($).length;for(var j in $)if(hasOwnProperty.call($,j))return!1;return!0}function isUndefined($){return $===void 0}function baseLt($,g){return $<g}function mapValues($,g){var j={};return g=baseIteratee(g),baseForOwn($,function(_e,et,tt){baseAssignValue(j,et,g(_e,et,tt))}),j}function baseExtremum($,g,j){for(var _e=-1,et=$.length;++_e<et;){var tt=$[_e],nt=g(tt);if(nt!=null&&(rt===void 0?nt===nt&&!isSymbol(nt):j(nt,rt)))var rt=nt,it=tt}return it}function max($){return $&&$.length?baseExtremum($,identity$1,baseGt):void 0}var merge=createAssigner(function($,g,j){baseMerge($,g,j)});const merge$1=merge;function min($){return $&&$.length?baseExtremum($,identity$1,baseLt):void 0}function minBy($,g){return $&&$.length?baseExtremum($,baseIteratee(g),baseLt):void 0}function baseSet($,g,j,_e){if(!isObject($))return $;g=castPath(g,$);for(var et=-1,tt=g.length,nt=tt-1,rt=$;rt!=null&&++et<tt;){var it=toKey(g[et]),st=j;if(it==="__proto__"||it==="constructor"||it==="prototype")return $;if(et!=nt){var ot=rt[it];st=_e?_e(ot,it,rt):void 0,st===void 0&&(st=isObject(ot)?ot:isIndex(g[et+1])?[]:{})}assignValue(rt,it,st),rt=rt[it]}return $}function basePickBy($,g,j){for(var _e=-1,et=g.length,tt={};++_e<et;){var nt=g[_e],rt=baseGet($,nt);j(rt,nt)&&baseSet(tt,castPath(nt,$),rt)}return tt}function baseSortBy($,g){var j=$.length;for($.sort(g);j--;)$[j]=$[j].value;return $}function compareAscending($,g){if($!==g){var j=$!==void 0,_e=$===null,et=$===$,tt=isSymbol($),nt=g!==void 0,rt=g===null,it=g===g,st=isSymbol(g);if(!rt&&!st&&!tt&&$>g||tt&&nt&&it&&!rt&&!st||_e&&nt&&it||!j&&it||!et)return 1;if(!_e&&!tt&&!st&&$<g||st&&j&&et&&!_e&&!tt||rt&&j&&et||!nt&&et||!it)return-1}return 0}function compareMultiple($,g,j){for(var _e=-1,et=$.criteria,tt=g.criteria,nt=et.length,rt=j.length;++_e<nt;){var it=compareAscending(et[_e],tt[_e]);if(it){if(_e>=rt)return it;var st=j[_e];return it*(st=="desc"?-1:1)}}return $.index-g.index}function baseOrderBy($,g,j){g.length?g=arrayMap(g,function(tt){return isArray$1(tt)?function(nt){return baseGet(nt,tt.length===1?tt[0]:tt)}:tt}):g=[identity$1];var _e=-1;g=arrayMap(g,baseUnary(baseIteratee));var et=baseMap($,function(tt,nt,rt){var it=arrayMap(g,function(st){return st(tt)});return{criteria:it,index:++_e,value:tt}});return baseSortBy(et,function(tt,nt){return compareMultiple(tt,nt,j)})}function basePick($,g){return basePickBy($,g,function(j,_e){return hasIn($,_e)})}var pick=flatRest(function($,g){return $==null?{}:basePick($,g)});const pick$1=pick;var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange($,g,j,_e){for(var et=-1,tt=nativeMax(nativeCeil((g-$)/(j||1)),0),nt=Array(tt);tt--;)nt[_e?tt:++et]=$,$+=j;return nt}function createRange($){return function(g,j,_e){return _e&&typeof _e!="number"&&isIterateeCall(g,j,_e)&&(j=_e=void 0),g=toFinite(g),j===void 0?(j=g,g=0):j=toFinite(j),_e=_e===void 0?g<j?1:-1:toFinite(_e),baseRange(g,j,_e,$)}}var range=createRange();const range$1=range;function baseReduce($,g,j,_e,et){return et($,function(tt,nt,rt){j=_e?(_e=!1,tt):g(j,tt,nt,rt)}),j}function reduce($,g,j){var _e=isArray$1($)?arrayReduce:baseReduce,et=arguments.length<3;return _e($,baseIteratee(g),j,et,baseEach$1)}var sortBy=baseRest(function($,g){if($==null)return[];var j=g.length;return j>1&&isIterateeCall($,g[0],g[1])?g=[]:j>2&&isIterateeCall(g[0],g[1],g[2])&&(g=[g[0]]),baseOrderBy($,baseFlatten(g,1),[])});const sortBy$1=sortBy;var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function($){return new Set$2($)}:noop$1;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq($,g,j){var _e=-1,et=arrayIncludes,tt=$.length,nt=!0,rt=[],it=rt;if(j)nt=!1,et=arrayIncludesWith;else if(tt>=LARGE_ARRAY_SIZE){var st=g?null:createSet$1($);if(st)return setToArray(st);nt=!1,et=cacheHas,it=new SetCache}else it=g?[]:rt;e:for(;++_e<tt;){var ot=$[_e],at=g?g(ot):ot;if(ot=j||ot!==0?ot:0,nt&&at===at){for(var lt=it.length;lt--;)if(it[lt]===at)continue e;g&&it.push(at),rt.push(ot)}else et(it,at,j)||(it!==rt&&it.push(at),rt.push(ot))}return rt}var union=baseRest(function($){return baseUniq(baseFlatten($,1,isArrayLikeObject,!0))});const union$1=union;var idCounter=0;function uniqueId($){var g=++idCounter;return toString($)+g}function baseZipObject($,g,j){for(var _e=-1,et=$.length,tt=g.length,nt={};++_e<et;){var rt=_e<tt?g[_e]:void 0;j(nt,$[_e],rt)}return nt}function zipObject($,g){return baseZipObject($||[],g||[],assignValue)}var DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";class Graph{constructor(g={}){this._isDirected=has(g,"directed")?g.directed:!0,this._isMultigraph=has(g,"multigraph")?g.multigraph:!1,this._isCompound=has(g,"compound")?g.compound:!1,this._label=void 0,this._defaultNodeLabelFn=constant(void 0),this._defaultEdgeLabelFn=constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(g){return this._label=g,this}graph(){return this._label}setDefaultNodeLabel(g){return isFunction(g)||(g=constant(g)),this._defaultNodeLabelFn=g,this}nodeCount(){return this._nodeCount}nodes(){return keys(this._nodes)}sources(){var g=this;return filter(this.nodes(),function(j){return isEmpty(g._in[j])})}sinks(){var g=this;return filter(this.nodes(),function(j){return isEmpty(g._out[j])})}setNodes(g,j){var _e=arguments,et=this;return forEach(g,function(tt){_e.length>1?et.setNode(tt,j):et.setNode(tt)}),this}setNode(g,j){return has(this._nodes,g)?(arguments.length>1&&(this._nodes[g]=j),this):(this._nodes[g]=arguments.length>1?j:this._defaultNodeLabelFn(g),this._isCompound&&(this._parent[g]=GRAPH_NODE,this._children[g]={},this._children[GRAPH_NODE][g]=!0),this._in[g]={},this._preds[g]={},this._out[g]={},this._sucs[g]={},++this._nodeCount,this)}node(g){return this._nodes[g]}hasNode(g){return has(this._nodes,g)}removeNode(g){var j=this;if(has(this._nodes,g)){var _e=function(et){j.removeEdge(j._edgeObjs[et])};delete this._nodes[g],this._isCompound&&(this._removeFromParentsChildList(g),delete this._parent[g],forEach(this.children(g),function(et){j.setParent(et)}),delete this._children[g]),forEach(keys(this._in[g]),_e),delete this._in[g],delete this._preds[g],forEach(keys(this._out[g]),_e),delete this._out[g],delete this._sucs[g],--this._nodeCount}return this}setParent(g,j){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(isUndefined(j))j=GRAPH_NODE;else{j+="";for(var _e=j;!isUndefined(_e);_e=this.parent(_e))if(_e===g)throw new Error("Setting "+j+" as parent of "+g+" would create a cycle");this.setNode(j)}return this.setNode(g),this._removeFromParentsChildList(g),this._parent[g]=j,this._children[j][g]=!0,this}_removeFromParentsChildList(g){delete this._children[this._parent[g]][g]}parent(g){if(this._isCompound){var j=this._parent[g];if(j!==GRAPH_NODE)return j}}children(g){if(isUndefined(g)&&(g=GRAPH_NODE),this._isCompound){var j=this._children[g];if(j)return keys(j)}else{if(g===GRAPH_NODE)return this.nodes();if(this.hasNode(g))return[]}}predecessors(g){var j=this._preds[g];if(j)return keys(j)}successors(g){var j=this._sucs[g];if(j)return keys(j)}neighbors(g){var j=this.predecessors(g);if(j)return union$1(j,this.successors(g))}isLeaf(g){var j;return this.isDirected()?j=this.successors(g):j=this.neighbors(g),j.length===0}filterNodes(g){var j=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});j.setGraph(this.graph());var _e=this;forEach(this._nodes,function(nt,rt){g(rt)&&j.setNode(rt,nt)}),forEach(this._edgeObjs,function(nt){j.hasNode(nt.v)&&j.hasNode(nt.w)&&j.setEdge(nt,_e.edge(nt))});var et={};function tt(nt){var rt=_e.parent(nt);return rt===void 0||j.hasNode(rt)?(et[nt]=rt,rt):rt in et?et[rt]:tt(rt)}return this._isCompound&&forEach(j.nodes(),function(nt){j.setParent(nt,tt(nt))}),j}setDefaultEdgeLabel(g){return isFunction(g)||(g=constant(g)),this._defaultEdgeLabelFn=g,this}edgeCount(){return this._edgeCount}edges(){return values(this._edgeObjs)}setPath(g,j){var _e=this,et=arguments;return reduce(g,function(tt,nt){return et.length>1?_e.setEdge(tt,nt,j):_e.setEdge(tt,nt),nt}),this}setEdge(){var g,j,_e,et,tt=!1,nt=arguments[0];typeof nt=="object"&&nt!==null&&"v"in nt?(g=nt.v,j=nt.w,_e=nt.name,arguments.length===2&&(et=arguments[1],tt=!0)):(g=nt,j=arguments[1],_e=arguments[3],arguments.length>2&&(et=arguments[2],tt=!0)),g=""+g,j=""+j,isUndefined(_e)||(_e=""+_e);var rt=edgeArgsToId(this._isDirected,g,j,_e);if(has(this._edgeLabels,rt))return tt&&(this._edgeLabels[rt]=et),this;if(!isUndefined(_e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(j),this._edgeLabels[rt]=tt?et:this._defaultEdgeLabelFn(g,j,_e);var it=edgeArgsToObj(this._isDirected,g,j,_e);return g=it.v,j=it.w,Object.freeze(it),this._edgeObjs[rt]=it,incrementOrInitEntry(this._preds[j],g),incrementOrInitEntry(this._sucs[g],j),this._in[j][rt]=it,this._out[g][rt]=it,this._edgeCount++,this}edge(g,j,_e){var et=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,g,j,_e);return this._edgeLabels[et]}hasEdge(g,j,_e){var et=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,g,j,_e);return has(this._edgeLabels,et)}removeEdge(g,j,_e){var et=arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,g,j,_e),tt=this._edgeObjs[et];return tt&&(g=tt.v,j=tt.w,delete this._edgeLabels[et],delete this._edgeObjs[et],decrementOrRemoveEntry(this._preds[j],g),decrementOrRemoveEntry(this._sucs[g],j),delete this._in[j][et],delete this._out[g][et],this._edgeCount--),this}inEdges(g,j){var _e=this._in[g];if(_e){var et=values(_e);return j?filter(et,function(tt){return tt.v===j}):et}}outEdges(g,j){var _e=this._out[g];if(_e){var et=values(_e);return j?filter(et,function(tt){return tt.w===j}):et}}nodeEdges(g,j){var _e=this.inEdges(g,j);if(_e)return _e.concat(this.outEdges(g,j))}}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;function incrementOrInitEntry($,g){$[g]?$[g]++:$[g]=1}function decrementOrRemoveEntry($,g){--$[g]||delete $[g]}function edgeArgsToId($,g,j,_e){var et=""+g,tt=""+j;if(!$&&et>tt){var nt=et;et=tt,tt=nt}return et+EDGE_KEY_DELIM+tt+EDGE_KEY_DELIM+(isUndefined(_e)?DEFAULT_EDGE_NAME:_e)}function edgeArgsToObj($,g,j,_e){var et=""+g,tt=""+j;if(!$&&et>tt){var nt=et;et=tt,tt=nt}var rt={v:et,w:tt};return _e&&(rt.name=_e),rt}function edgeObjToId($,g){return edgeArgsToId($,g.v,g.w,g.name)}class List{constructor(){var g={};g._next=g._prev=g,this._sentinel=g}dequeue(){var g=this._sentinel,j=g._prev;if(j!==g)return unlink(j),j}enqueue(g){var j=this._sentinel;g._prev&&g._next&&unlink(g),g._next=j._next,j._next._prev=g,j._next=g,g._prev=j}toString(){for(var g=[],j=this._sentinel,_e=j._prev;_e!==j;)g.push(JSON.stringify(_e,filterOutLinks)),_e=_e._prev;return"["+g.join(", ")+"]"}}function unlink($){$._prev._next=$._next,$._next._prev=$._prev,delete $._next,delete $._prev}function filterOutLinks($,g){if($!=="_next"&&$!=="_prev")return g}var DEFAULT_WEIGHT_FN=constant(1);function greedyFAS($,g){if($.nodeCount()<=1)return[];var j=buildState($,g||DEFAULT_WEIGHT_FN),_e=doGreedyFAS(j.graph,j.buckets,j.zeroIdx);return flatten(map(_e,function(et){return $.outEdges(et.v,et.w)}))}function doGreedyFAS($,g,j){for(var _e=[],et=g[g.length-1],tt=g[0],nt;$.nodeCount();){for(;nt=tt.dequeue();)removeNode($,g,j,nt);for(;nt=et.dequeue();)removeNode($,g,j,nt);if($.nodeCount()){for(var rt=g.length-2;rt>0;--rt)if(nt=g[rt].dequeue(),nt){_e=_e.concat(removeNode($,g,j,nt,!0));break}}}return _e}function removeNode($,g,j,_e,et){var tt=et?[]:void 0;return forEach($.inEdges(_e.v),function(nt){var rt=$.edge(nt),it=$.node(nt.v);et&&tt.push({v:nt.v,w:nt.w}),it.out-=rt,assignBucket(g,j,it)}),forEach($.outEdges(_e.v),function(nt){var rt=$.edge(nt),it=nt.w,st=$.node(it);st.in-=rt,assignBucket(g,j,st)}),$.removeNode(_e.v),tt}function buildState($,g){var j=new Graph,_e=0,et=0;forEach($.nodes(),function(rt){j.setNode(rt,{v:rt,in:0,out:0})}),forEach($.edges(),function(rt){var it=j.edge(rt.v,rt.w)||0,st=g(rt),ot=it+st;j.setEdge(rt.v,rt.w,ot),et=Math.max(et,j.node(rt.v).out+=st),_e=Math.max(_e,j.node(rt.w).in+=st)});var tt=range$1(et+_e+3).map(function(){return new List}),nt=_e+1;return forEach(j.nodes(),function(rt){assignBucket(tt,nt,j.node(rt))}),{graph:j,buckets:tt,zeroIdx:nt}}function assignBucket($,g,j){j.out?j.in?$[j.out-j.in+g].enqueue(j):$[$.length-1].enqueue(j):$[0].enqueue(j)}function run$2($){var g=$.graph().acyclicer==="greedy"?greedyFAS($,j($)):dfsFAS($);forEach(g,function(_e){var et=$.edge(_e);$.removeEdge(_e),et.forwardName=_e.name,et.reversed=!0,$.setEdge(_e.w,_e.v,et,uniqueId("rev"))});function j(_e){return function(et){return _e.edge(et).weight}}}function dfsFAS($){var g=[],j={},_e={};function et(tt){has(_e,tt)||(_e[tt]=!0,j[tt]=!0,forEach($.outEdges(tt),function(nt){has(j,nt.w)?g.push(nt):et(nt.w)}),delete j[tt])}return forEach($.nodes(),et),g}function undo$2($){forEach($.edges(),function(g){var j=$.edge(g);if(j.reversed){$.removeEdge(g);var _e=j.forwardName;delete j.reversed,delete j.forwardName,$.setEdge(g.w,g.v,j,_e)}})}function addDummyNode($,g,j,_e){var et;do et=uniqueId(_e);while($.hasNode(et));return j.dummy=g,$.setNode(et,j),et}function simplify($){var g=new Graph().setGraph($.graph());return forEach($.nodes(),function(j){g.setNode(j,$.node(j))}),forEach($.edges(),function(j){var _e=g.edge(j.v,j.w)||{weight:0,minlen:1},et=$.edge(j);g.setEdge(j.v,j.w,{weight:_e.weight+et.weight,minlen:Math.max(_e.minlen,et.minlen)})}),g}function asNonCompoundGraph($){var g=new Graph({multigraph:$.isMultigraph()}).setGraph($.graph());return forEach($.nodes(),function(j){$.children(j).length||g.setNode(j,$.node(j))}),forEach($.edges(),function(j){g.setEdge(j,$.edge(j))}),g}function intersectRect$1($,g){var j=$.x,_e=$.y,et=g.x-j,tt=g.y-_e,nt=$.width/2,rt=$.height/2;if(!et&&!tt)throw new Error("Not possible to find intersection inside of the rectangle");var it,st;return Math.abs(tt)*nt>Math.abs(et)*rt?(tt<0&&(rt=-rt),it=rt*et/tt,st=rt):(et<0&&(nt=-nt),it=nt,st=nt*tt/et),{x:j+it,y:_e+st}}function buildLayerMatrix($){var g=map(range$1(maxRank($)+1),function(){return[]});return forEach($.nodes(),function(j){var _e=$.node(j),et=_e.rank;isUndefined(et)||(g[et][_e.order]=j)}),g}function normalizeRanks($){var g=min(map($.nodes(),function(j){return $.node(j).rank}));forEach($.nodes(),function(j){var _e=$.node(j);has(_e,"rank")&&(_e.rank-=g)})}function removeEmptyRanks($){var g=min(map($.nodes(),function(tt){return $.node(tt).rank})),j=[];forEach($.nodes(),function(tt){var nt=$.node(tt).rank-g;j[nt]||(j[nt]=[]),j[nt].push(tt)});var _e=0,et=$.graph().nodeRankFactor;forEach(j,function(tt,nt){isUndefined(tt)&&nt%et!==0?--_e:_e&&forEach(tt,function(rt){$.node(rt).rank+=_e})})}function addBorderNode$1($,g,j,_e){var et={width:0,height:0};return arguments.length>=4&&(et.rank=j,et.order=_e),addDummyNode($,"border",et,g)}function maxRank($){return max(map($.nodes(),function(g){var j=$.node(g).rank;if(!isUndefined(j))return j}))}function partition($,g){var j={lhs:[],rhs:[]};return forEach($,function(_e){g(_e)?j.lhs.push(_e):j.rhs.push(_e)}),j}function time($,g){var j=now$2();try{return g()}finally{console.log($+" time: "+(now$2()-j)+"ms")}}function notime($,g){return g()}function addBorderSegments($){function g(j){var _e=$.children(j),et=$.node(j);if(_e.length&&forEach(_e,g),has(et,"minRank")){et.borderLeft=[],et.borderRight=[];for(var tt=et.minRank,nt=et.maxRank+1;tt<nt;++tt)addBorderNode($,"borderLeft","_bl",j,et,tt),addBorderNode($,"borderRight","_br",j,et,tt)}}forEach($.children(),g)}function addBorderNode($,g,j,_e,et,tt){var nt={width:0,height:0,rank:tt,borderType:g},rt=et[g][tt-1],it=addDummyNode($,"border",nt,j);et[g][tt]=it,$.setParent(it,_e),rt&&$.setEdge(rt,it,{weight:1})}function adjust($){var g=$.graph().rankdir.toLowerCase();(g==="lr"||g==="rl")&&swapWidthHeight($)}function undo$1($){var g=$.graph().rankdir.toLowerCase();(g==="bt"||g==="rl")&&reverseY($),(g==="lr"||g==="rl")&&(swapXY($),swapWidthHeight($))}function swapWidthHeight($){forEach($.nodes(),function(g){swapWidthHeightOne($.node(g))}),forEach($.edges(),function(g){swapWidthHeightOne($.edge(g))})}function swapWidthHeightOne($){var g=$.width;$.width=$.height,$.height=g}function reverseY($){forEach($.nodes(),function(g){reverseYOne($.node(g))}),forEach($.edges(),function(g){var j=$.edge(g);forEach(j.points,reverseYOne),has(j,"y")&&reverseYOne(j)})}function reverseYOne($){$.y=-$.y}function swapXY($){forEach($.nodes(),function(g){swapXYOne($.node(g))}),forEach($.edges(),function(g){var j=$.edge(g);forEach(j.points,swapXYOne),has(j,"x")&&swapXYOne(j)})}function swapXYOne($){var g=$.x;$.x=$.y,$.y=g}function run$1($){$.graph().dummyChains=[],forEach($.edges(),function(g){normalizeEdge($,g)})}function normalizeEdge($,g){var j=g.v,_e=$.node(j).rank,et=g.w,tt=$.node(et).rank,nt=g.name,rt=$.edge(g),it=rt.labelRank;if(tt!==_e+1){$.removeEdge(g);var st,ot,at;for(at=0,++_e;_e<tt;++at,++_e)rt.points=[],ot={width:0,height:0,edgeLabel:rt,edgeObj:g,rank:_e},st=addDummyNode($,"edge",ot,"_d"),_e===it&&(ot.width=rt.width,ot.height=rt.height,ot.dummy="edge-label",ot.labelpos=rt.labelpos),$.setEdge(j,st,{weight:rt.weight},nt),at===0&&$.graph().dummyChains.push(st),j=st;$.setEdge(j,et,{weight:rt.weight},nt)}}function undo($){forEach($.graph().dummyChains,function(g){var j=$.node(g),_e=j.edgeLabel,et;for($.setEdge(j.edgeObj,_e);j.dummy;)et=$.successors(g)[0],$.removeNode(g),_e.points.push({x:j.x,y:j.y}),j.dummy==="edge-label"&&(_e.x=j.x,_e.y=j.y,_e.width=j.width,_e.height=j.height),g=et,j=$.node(g)})}function longestPath($){var g={};function j(_e){var et=$.node(_e);if(has(g,_e))return et.rank;g[_e]=!0;var tt=min(map($.outEdges(_e),function(nt){return j(nt.w)-$.edge(nt).minlen}));return(tt===Number.POSITIVE_INFINITY||tt===void 0||tt===null)&&(tt=0),et.rank=tt}forEach($.sources(),j)}function slack($,g){return $.node(g.w).rank-$.node(g.v).rank-$.edge(g).minlen}function feasibleTree($){var g=new Graph({directed:!1}),j=$.nodes()[0],_e=$.nodeCount();g.setNode(j,{});for(var et,tt;tightTree(g,$)<_e;)et=findMinSlackEdge(g,$),tt=g.hasNode(et.v)?slack($,et):-slack($,et),shiftRanks(g,$,tt);return g}function tightTree($,g){function j(_e){forEach(g.nodeEdges(_e),function(et){var tt=et.v,nt=_e===tt?et.w:tt;!$.hasNode(nt)&&!slack(g,et)&&($.setNode(nt,{}),$.setEdge(_e,nt,{}),j(nt))})}return forEach($.nodes(),j),$.nodeCount()}function findMinSlackEdge($,g){return minBy(g.edges(),function(j){if($.hasNode(j.v)!==$.hasNode(j.w))return slack(g,j)})}function shiftRanks($,g,j){forEach($.nodes(),function(_e){g.node(_e).rank+=j})}function CycleException(){}CycleException.prototype=new Error;function dfs$1($,g,j){isArray$1(g)||(g=[g]);var _e=($.isDirected()?$.successors:$.neighbors).bind($),et=[],tt={};return forEach(g,function(nt){if(!$.hasNode(nt))throw new Error("Graph does not have node: "+nt);doDfs($,nt,j==="post",tt,_e,et)}),et}function doDfs($,g,j,_e,et,tt){has(_e,g)||(_e[g]=!0,j||tt.push(g),forEach(et(g),function(nt){doDfs($,nt,j,_e,et,tt)}),j&&tt.push(g))}function postorder$1($,g){return dfs$1($,g,"post")}function preorder($,g){return dfs$1($,g,"pre")}networkSimplex.initLowLimValues=initLowLimValues;networkSimplex.initCutValues=initCutValues;networkSimplex.calcCutValue=calcCutValue;networkSimplex.leaveEdge=leaveEdge;networkSimplex.enterEdge=enterEdge;networkSimplex.exchangeEdges=exchangeEdges;function networkSimplex($){$=simplify($),longestPath($);var g=feasibleTree($);initLowLimValues(g),initCutValues(g,$);for(var j,_e;j=leaveEdge(g);)_e=enterEdge(g,$,j),exchangeEdges(g,$,j,_e)}function initCutValues($,g){var j=postorder$1($,$.nodes());j=j.slice(0,j.length-1),forEach(j,function(_e){assignCutValue($,g,_e)})}function assignCutValue($,g,j){var _e=$.node(j),et=_e.parent;$.edge(j,et).cutvalue=calcCutValue($,g,j)}function calcCutValue($,g,j){var _e=$.node(j),et=_e.parent,tt=!0,nt=g.edge(j,et),rt=0;return nt||(tt=!1,nt=g.edge(et,j)),rt=nt.weight,forEach(g.nodeEdges(j),function(it){var st=it.v===j,ot=st?it.w:it.v;if(ot!==et){var at=st===tt,lt=g.edge(it).weight;if(rt+=at?lt:-lt,isTreeEdge($,j,ot)){var ut=$.edge(j,ot).cutvalue;rt+=at?-ut:ut}}}),rt}function initLowLimValues($,g){arguments.length<2&&(g=$.nodes()[0]),dfsAssignLowLim($,{},1,g)}function dfsAssignLowLim($,g,j,_e,et){var tt=j,nt=$.node(_e);return g[_e]=!0,forEach($.neighbors(_e),function(rt){has(g,rt)||(j=dfsAssignLowLim($,g,j,rt,_e))}),nt.low=tt,nt.lim=j++,et?nt.parent=et:delete nt.parent,j}function leaveEdge($){return find$1($.edges(),function(g){return $.edge(g).cutvalue<0})}function enterEdge($,g,j){var _e=j.v,et=j.w;g.hasEdge(_e,et)||(_e=j.w,et=j.v);var tt=$.node(_e),nt=$.node(et),rt=tt,it=!1;tt.lim>nt.lim&&(rt=nt,it=!0);var st=filter(g.edges(),function(ot){return it===isDescendant($,$.node(ot.v),rt)&&it!==isDescendant($,$.node(ot.w),rt)});return minBy(st,function(ot){return slack(g,ot)})}function exchangeEdges($,g,j,_e){var et=j.v,tt=j.w;$.removeEdge(et,tt),$.setEdge(_e.v,_e.w,{}),initLowLimValues($),initCutValues($,g),updateRanks($,g)}function updateRanks($,g){var j=find$1($.nodes(),function(et){return!g.node(et).parent}),_e=preorder($,j);_e=_e.slice(1),forEach(_e,function(et){var tt=$.node(et).parent,nt=g.edge(et,tt),rt=!1;nt||(nt=g.edge(tt,et),rt=!0),g.node(et).rank=g.node(tt).rank+(rt?nt.minlen:-nt.minlen)})}function isTreeEdge($,g,j){return $.hasEdge(g,j)}function isDescendant($,g,j){return j.low<=g.lim&&g.lim<=j.lim}function rank($){switch($.graph().ranker){case"network-simplex":networkSimplexRanker($);break;case"tight-tree":tightTreeRanker($);break;case"longest-path":longestPathRanker($);break;default:networkSimplexRanker($)}}var longestPathRanker=longestPath;function tightTreeRanker($){longestPath($),feasibleTree($)}function networkSimplexRanker($){networkSimplex($)}function run($){var g=addDummyNode($,"root",{},"_root"),j=treeDepths($),_e=max(values(j))-1,et=2*_e+1;$.graph().nestingRoot=g,forEach($.edges(),function(nt){$.edge(nt).minlen*=et});var tt=sumWeights($)+1;forEach($.children(),function(nt){dfs($,g,et,tt,_e,j,nt)}),$.graph().nodeRankFactor=et}function dfs($,g,j,_e,et,tt,nt){var rt=$.children(nt);if(!rt.length){nt!==g&&$.setEdge(g,nt,{weight:0,minlen:j});return}var it=addBorderNode$1($,"_bt"),st=addBorderNode$1($,"_bb"),ot=$.node(nt);$.setParent(it,nt),ot.borderTop=it,$.setParent(st,nt),ot.borderBottom=st,forEach(rt,function(at){dfs($,g,j,_e,et,tt,at);var lt=$.node(at),ut=lt.borderTop?lt.borderTop:at,ht=lt.borderBottom?lt.borderBottom:at,ft=lt.borderTop?_e:2*_e,gt=ut!==ht?1:et-tt[nt]+1;$.setEdge(it,ut,{weight:ft,minlen:gt,nestingEdge:!0}),$.setEdge(ht,st,{weight:ft,minlen:gt,nestingEdge:!0})}),$.parent(nt)||$.setEdge(g,it,{weight:0,minlen:et+tt[nt]})}function treeDepths($){var g={};function j(_e,et){var tt=$.children(_e);tt&&tt.length&&forEach(tt,function(nt){j(nt,et+1)}),g[_e]=et}return forEach($.children(),function(_e){j(_e,1)}),g}function sumWeights($){return reduce($.edges(),function(g,j){return g+$.edge(j).weight},0)}function cleanup($){var g=$.graph();$.removeNode(g.nestingRoot),delete g.nestingRoot,forEach($.edges(),function(j){var _e=$.edge(j);_e.nestingEdge&&$.removeEdge(j)})}function addSubgraphConstraints($,g,j){var _e={},et;forEach(j,function(tt){for(var nt=$.parent(tt),rt,it;nt;){if(rt=$.parent(nt),rt?(it=_e[rt],_e[rt]=nt):(it=et,et=nt),it&&it!==nt){g.setEdge(it,nt);return}nt=rt}})}function buildLayerGraph($,g,j){var _e=createRootNode($),et=new Graph({compound:!0}).setGraph({root:_e}).setDefaultNodeLabel(function(tt){return $.node(tt)});return forEach($.nodes(),function(tt){var nt=$.node(tt),rt=$.parent(tt);(nt.rank===g||nt.minRank<=g&&g<=nt.maxRank)&&(et.setNode(tt),et.setParent(tt,rt||_e),forEach($[j](tt),function(it){var st=it.v===tt?it.w:it.v,ot=et.edge(st,tt),at=isUndefined(ot)?0:ot.weight;et.setEdge(st,tt,{weight:$.edge(it).weight+at})}),has(nt,"minRank")&&et.setNode(tt,{borderLeft:nt.borderLeft[g],borderRight:nt.borderRight[g]}))}),et}function createRootNode($){for(var g;$.hasNode(g=uniqueId("_root")););return g}function crossCount($,g){for(var j=0,_e=1;_e<g.length;++_e)j+=twoLayerCrossCount($,g[_e-1],g[_e]);return j}function twoLayerCrossCount($,g,j){for(var _e=zipObject(j,map(j,function(st,ot){return ot})),et=flatten(map(g,function(st){return sortBy$1(map($.outEdges(st),function(ot){return{pos:_e[ot.w],weight:$.edge(ot).weight}}),"pos")})),tt=1;tt<j.length;)tt<<=1;var nt=2*tt-1;tt-=1;var rt=map(new Array(nt),function(){return 0}),it=0;return forEach(et.forEach(function(st){var ot=st.pos+tt;rt[ot]+=st.weight;for(var at=0;ot>0;)ot%2&&(at+=rt[ot+1]),ot=ot-1>>1,rt[ot]+=st.weight;it+=st.weight*at})),it}function initOrder($){var g={},j=filter($.nodes(),function(rt){return!$.children(rt).length}),_e=max(map(j,function(rt){return $.node(rt).rank})),et=map(range$1(_e+1),function(){return[]});function tt(rt){if(!has(g,rt)){g[rt]=!0;var it=$.node(rt);et[it.rank].push(rt),forEach($.successors(rt),tt)}}var nt=sortBy$1(j,function(rt){return $.node(rt).rank});return forEach(nt,tt),et}function barycenter($,g){return map(g,function(j){var _e=$.inEdges(j);if(_e.length){var et=reduce(_e,function(tt,nt){var rt=$.edge(nt),it=$.node(nt.v);return{sum:tt.sum+rt.weight*it.order,weight:tt.weight+rt.weight}},{sum:0,weight:0});return{v:j,barycenter:et.sum/et.weight,weight:et.weight}}else return{v:j}})}function resolveConflicts($,g){var j={};forEach($,function(et,tt){var nt=j[et.v]={indegree:0,in:[],out:[],vs:[et.v],i:tt};isUndefined(et.barycenter)||(nt.barycenter=et.barycenter,nt.weight=et.weight)}),forEach(g.edges(),function(et){var tt=j[et.v],nt=j[et.w];!isUndefined(tt)&&!isUndefined(nt)&&(nt.indegree++,tt.out.push(j[et.w]))});var _e=filter(j,function(et){return!et.indegree});return doResolveConflicts(_e)}function doResolveConflicts($){var g=[];function j(tt){return function(nt){nt.merged||(isUndefined(nt.barycenter)||isUndefined(tt.barycenter)||nt.barycenter>=tt.barycenter)&&mergeEntries(tt,nt)}}function _e(tt){return function(nt){nt.in.push(tt),--nt.indegree===0&&$.push(nt)}}for(;$.length;){var et=$.pop();g.push(et),forEach(et.in.reverse(),j(et)),forEach(et.out,_e(et))}return map(filter(g,function(tt){return!tt.merged}),function(tt){return pick$1(tt,["vs","i","barycenter","weight"])})}function mergeEntries($,g){var j=0,_e=0;$.weight&&(j+=$.barycenter*$.weight,_e+=$.weight),g.weight&&(j+=g.barycenter*g.weight,_e+=g.weight),$.vs=g.vs.concat($.vs),$.barycenter=j/_e,$.weight=_e,$.i=Math.min(g.i,$.i),g.merged=!0}function sort($,g){var j=partition($,function(ot){return has(ot,"barycenter")}),_e=j.lhs,et=sortBy$1(j.rhs,function(ot){return-ot.i}),tt=[],nt=0,rt=0,it=0;_e.sort(compareWithBias(!!g)),it=consumeUnsortable(tt,et,it),forEach(_e,function(ot){it+=ot.vs.length,tt.push(ot.vs),nt+=ot.barycenter*ot.weight,rt+=ot.weight,it=consumeUnsortable(tt,et,it)});var st={vs:flatten(tt)};return rt&&(st.barycenter=nt/rt,st.weight=rt),st}function consumeUnsortable($,g,j){for(var _e;g.length&&(_e=last$1(g)).i<=j;)g.pop(),$.push(_e.vs),j++;return j}function compareWithBias($){return function(g,j){return g.barycenter<j.barycenter?-1:g.barycenter>j.barycenter?1:$?j.i-g.i:g.i-j.i}}function sortSubgraph($,g,j,_e){var et=$.children(g),tt=$.node(g),nt=tt?tt.borderLeft:void 0,rt=tt?tt.borderRight:void 0,it={};nt&&(et=filter(et,function(ht){return ht!==nt&&ht!==rt}));var st=barycenter($,et);forEach(st,function(ht){if($.children(ht.v).length){var ft=sortSubgraph($,ht.v,j,_e);it[ht.v]=ft,has(ft,"barycenter")&&mergeBarycenters(ht,ft)}});var ot=resolveConflicts(st,j);expandSubgraphs(ot,it);var at=sort(ot,_e);if(nt&&(at.vs=flatten([nt,at.vs,rt]),$.predecessors(nt).length)){var lt=$.node($.predecessors(nt)[0]),ut=$.node($.predecessors(rt)[0]);has(at,"barycenter")||(at.barycenter=0,at.weight=0),at.barycenter=(at.barycenter*at.weight+lt.order+ut.order)/(at.weight+2),at.weight+=2}return at}function expandSubgraphs($,g){forEach($,function(j){j.vs=flatten(j.vs.map(function(_e){return g[_e]?g[_e].vs:_e}))})}function mergeBarycenters($,g){isUndefined($.barycenter)?($.barycenter=g.barycenter,$.weight=g.weight):($.barycenter=($.barycenter*$.weight+g.barycenter*g.weight)/($.weight+g.weight),$.weight+=g.weight)}function order($){var g=maxRank($),j=buildLayerGraphs($,range$1(1,g+1),"inEdges"),_e=buildLayerGraphs($,range$1(g-1,-1,-1),"outEdges"),et=initOrder($);assignOrder($,et);for(var tt=Number.POSITIVE_INFINITY,nt,rt=0,it=0;it<4;++rt,++it){sweepLayerGraphs(rt%2?j:_e,rt%4>=2),et=buildLayerMatrix($);var st=crossCount($,et);st<tt&&(it=0,nt=cloneDeep(et),tt=st)}assignOrder($,nt)}function buildLayerGraphs($,g,j){return map(g,function(_e){return buildLayerGraph($,_e,j)})}function sweepLayerGraphs($,g){var j=new Graph;forEach($,function(_e){var et=_e.graph().root,tt=sortSubgraph(_e,et,j,g);forEach(tt.vs,function(nt,rt){_e.node(nt).order=rt}),addSubgraphConstraints(_e,j,tt.vs)})}function assignOrder($,g){forEach(g,function(j){forEach(j,function(_e,et){$.node(_e).order=et})})}function parentDummyChains($){var g=postorder($);forEach($.graph().dummyChains,function(j){for(var _e=$.node(j),et=_e.edgeObj,tt=findPath($,g,et.v,et.w),nt=tt.path,rt=tt.lca,it=0,st=nt[it],ot=!0;j!==et.w;){if(_e=$.node(j),ot){for(;(st=nt[it])!==rt&&$.node(st).maxRank<_e.rank;)it++;st===rt&&(ot=!1)}if(!ot){for(;it<nt.length-1&&$.node(st=nt[it+1]).minRank<=_e.rank;)it++;st=nt[it]}$.setParent(j,st),j=$.successors(j)[0]}})}function findPath($,g,j,_e){var et=[],tt=[],nt=Math.min(g[j].low,g[_e].low),rt=Math.max(g[j].lim,g[_e].lim),it,st;it=j;do it=$.parent(it),et.push(it);while(it&&(g[it].low>nt||rt>g[it].lim));for(st=it,it=_e;(it=$.parent(it))!==st;)tt.push(it);return{path:et.concat(tt.reverse()),lca:st}}function postorder($){var g={},j=0;function _e(et){var tt=j;forEach($.children(et),_e),g[et]={low:tt,lim:j++}}return forEach($.children(),_e),g}function findType1Conflicts($,g){var j={};function _e(et,tt){var nt=0,rt=0,it=et.length,st=last$1(tt);return forEach(tt,function(ot,at){var lt=findOtherInnerSegmentNode($,ot),ut=lt?$.node(lt).order:it;(lt||ot===st)&&(forEach(tt.slice(rt,at+1),function(ht){forEach($.predecessors(ht),function(ft){var gt=$.node(ft),dt=gt.order;(dt<nt||ut<dt)&&!(gt.dummy&&$.node(ht).dummy)&&addConflict(j,ft,ht)})}),rt=at+1,nt=ut)}),tt}return reduce(g,_e),j}function findType2Conflicts($,g){var j={};function _e(tt,nt,rt,it,st){var ot;forEach(range$1(nt,rt),function(at){ot=tt[at],$.node(ot).dummy&&forEach($.predecessors(ot),function(lt){var ut=$.node(lt);ut.dummy&&(ut.order<it||ut.order>st)&&addConflict(j,lt,ot)})})}function et(tt,nt){var rt=-1,it,st=0;return forEach(nt,function(ot,at){if($.node(ot).dummy==="border"){var lt=$.predecessors(ot);lt.length&&(it=$.node(lt[0]).order,_e(nt,st,at,rt,it),st=at,rt=it)}_e(nt,st,nt.length,it,tt.length)}),nt}return reduce(g,et),j}function findOtherInnerSegmentNode($,g){if($.node(g).dummy)return find$1($.predecessors(g),function(j){return $.node(j).dummy})}function addConflict($,g,j){if(g>j){var _e=g;g=j,j=_e}var et=$[g];et||($[g]=et={}),et[j]=!0}function hasConflict($,g,j){if(g>j){var _e=g;g=j,j=_e}return has($[g],j)}function verticalAlignment($,g,j,_e){var et={},tt={},nt={};return forEach(g,function(rt){forEach(rt,function(it,st){et[it]=it,tt[it]=it,nt[it]=st})}),forEach(g,function(rt){var it=-1;forEach(rt,function(st){var ot=_e(st);if(ot.length){ot=sortBy$1(ot,function(ft){return nt[ft]});for(var at=(ot.length-1)/2,lt=Math.floor(at),ut=Math.ceil(at);lt<=ut;++lt){var ht=ot[lt];tt[st]===st&&it<nt[ht]&&!hasConflict(j,st,ht)&&(tt[ht]=st,tt[st]=et[st]=et[ht],it=nt[ht])}}})}),{root:et,align:tt}}function horizontalCompaction($,g,j,_e,et){var tt={},nt=buildBlockGraph($,g,j,et),rt=et?"borderLeft":"borderRight";function it(at,lt){for(var ut=nt.nodes(),ht=ut.pop(),ft={};ht;)ft[ht]?at(ht):(ft[ht]=!0,ut.push(ht),ut=ut.concat(lt(ht))),ht=ut.pop()}function st(at){tt[at]=nt.inEdges(at).reduce(function(lt,ut){return Math.max(lt,tt[ut.v]+nt.edge(ut))},0)}function ot(at){var lt=nt.outEdges(at).reduce(function(ht,ft){return Math.min(ht,tt[ft.w]-nt.edge(ft))},Number.POSITIVE_INFINITY),ut=$.node(at);lt!==Number.POSITIVE_INFINITY&&ut.borderType!==rt&&(tt[at]=Math.max(tt[at],lt))}return it(st,nt.predecessors.bind(nt)),it(ot,nt.successors.bind(nt)),forEach(_e,function(at){tt[at]=tt[j[at]]}),tt}function buildBlockGraph($,g,j,_e){var et=new Graph,tt=$.graph(),nt=sep(tt.nodesep,tt.edgesep,_e);return forEach(g,function(rt){var it;forEach(rt,function(st){var ot=j[st];if(et.setNode(ot),it){var at=j[it],lt=et.edge(at,ot);et.setEdge(at,ot,Math.max(nt($,st,it),lt||0))}it=st})}),et}function findSmallestWidthAlignment($,g){return minBy(values(g),function(j){var _e=Number.NEGATIVE_INFINITY,et=Number.POSITIVE_INFINITY;return forIn(j,function(tt,nt){var rt=width($,nt)/2;_e=Math.max(tt+rt,_e),et=Math.min(tt-rt,et)}),_e-et})}function alignCoordinates($,g){var j=values(g),_e=min(j),et=max(j);forEach(["u","d"],function(tt){forEach(["l","r"],function(nt){var rt=tt+nt,it=$[rt],st;if(it!==g){var ot=values(it);st=nt==="l"?_e-min(ot):et-max(ot),st&&($[rt]=mapValues(it,function(at){return at+st}))}})})}function balance($,g){return mapValues($.ul,function(j,_e){if(g)return $[g.toLowerCase()][_e];var et=sortBy$1(map($,_e));return(et[1]+et[2])/2})}function positionX($){var g=buildLayerMatrix($),j=merge$1(findType1Conflicts($,g),findType2Conflicts($,g)),_e={},et;forEach(["u","d"],function(nt){et=nt==="u"?g:values(g).reverse(),forEach(["l","r"],function(rt){rt==="r"&&(et=map(et,function(at){return values(at).reverse()}));var it=(nt==="u"?$.predecessors:$.successors).bind($),st=verticalAlignment($,et,j,it),ot=horizontalCompaction($,et,st.root,st.align,rt==="r");rt==="r"&&(ot=mapValues(ot,function(at){return-at})),_e[nt+rt]=ot})});var tt=findSmallestWidthAlignment($,_e);return alignCoordinates(_e,tt),balance(_e,$.graph().align)}function sep($,g,j){return function(_e,et,tt){var nt=_e.node(et),rt=_e.node(tt),it=0,st;if(it+=nt.width/2,has(nt,"labelpos"))switch(nt.labelpos.toLowerCase()){case"l":st=-nt.width/2;break;case"r":st=nt.width/2;break}if(st&&(it+=j?st:-st),st=0,it+=(nt.dummy?g:$)/2,it+=(rt.dummy?g:$)/2,it+=rt.width/2,has(rt,"labelpos"))switch(rt.labelpos.toLowerCase()){case"l":st=rt.width/2;break;case"r":st=-rt.width/2;break}return st&&(it+=j?st:-st),st=0,it}}function width($,g){return $.node(g).width}function position($){$=asNonCompoundGraph($),positionY($),forOwn(positionX($),function(g,j){$.node(j).x=g})}function positionY($){var g=buildLayerMatrix($),j=$.graph().ranksep,_e=0;forEach(g,function(et){var tt=max(map(et,function(nt){return $.node(nt).height}));forEach(et,function(nt){$.node(nt).y=_e+tt/2}),_e+=tt+j})}function layout($,g){var j=g&&g.debugTiming?time:notime;j("layout",function(){var _e=j("  buildLayoutGraph",function(){return buildLayoutGraph($)});j("  runLayout",function(){runLayout(_e,j)}),j("  updateInputGraph",function(){updateInputGraph($,_e)})})}function runLayout($,g){g("    makeSpaceForEdgeLabels",function(){makeSpaceForEdgeLabels($)}),g("    removeSelfEdges",function(){removeSelfEdges($)}),g("    acyclic",function(){run$2($)}),g("    nestingGraph.run",function(){run($)}),g("    rank",function(){rank(asNonCompoundGraph($))}),g("    injectEdgeLabelProxies",function(){injectEdgeLabelProxies($)}),g("    removeEmptyRanks",function(){removeEmptyRanks($)}),g("    nestingGraph.cleanup",function(){cleanup($)}),g("    normalizeRanks",function(){normalizeRanks($)}),g("    assignRankMinMax",function(){assignRankMinMax($)}),g("    removeEdgeLabelProxies",function(){removeEdgeLabelProxies($)}),g("    normalize.run",function(){run$1($)}),g("    parentDummyChains",function(){parentDummyChains($)}),g("    addBorderSegments",function(){addBorderSegments($)}),g("    order",function(){order($)}),g("    insertSelfEdges",function(){insertSelfEdges($)}),g("    adjustCoordinateSystem",function(){adjust($)}),g("    position",function(){position($)}),g("    positionSelfEdges",function(){positionSelfEdges($)}),g("    removeBorderNodes",function(){removeBorderNodes($)}),g("    normalize.undo",function(){undo($)}),g("    fixupEdgeLabelCoords",function(){fixupEdgeLabelCoords($)}),g("    undoCoordinateSystem",function(){undo$1($)}),g("    translateGraph",function(){translateGraph($)}),g("    assignNodeIntersects",function(){assignNodeIntersects($)}),g("    reversePoints",function(){reversePointsForReversedEdges($)}),g("    acyclic.undo",function(){undo$2($)})}function updateInputGraph($,g){forEach($.nodes(),function(j){var _e=$.node(j),et=g.node(j);_e&&(_e.x=et.x,_e.y=et.y,g.children(j).length&&(_e.width=et.width,_e.height=et.height))}),forEach($.edges(),function(j){var _e=$.edge(j),et=g.edge(j);_e.points=et.points,has(et,"x")&&(_e.x=et.x,_e.y=et.y)}),$.graph().width=g.graph().width,$.graph().height=g.graph().height}var graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"];function buildLayoutGraph($){var g=new Graph({multigraph:!0,compound:!0}),j=canonicalize($.graph());return g.setGraph(merge$1({},graphDefaults,selectNumberAttrs(j,graphNumAttrs),pick$1(j,graphAttrs))),forEach($.nodes(),function(_e){var et=canonicalize($.node(_e));g.setNode(_e,defaults$1(selectNumberAttrs(et,nodeNumAttrs),nodeDefaults)),g.setParent(_e,$.parent(_e))}),forEach($.edges(),function(_e){var et=canonicalize($.edge(_e));g.setEdge(_e,merge$1({},edgeDefaults,selectNumberAttrs(et,edgeNumAttrs),pick$1(et,edgeAttrs)))}),g}function makeSpaceForEdgeLabels($){var g=$.graph();g.ranksep/=2,forEach($.edges(),function(j){var _e=$.edge(j);_e.minlen*=2,_e.labelpos.toLowerCase()!=="c"&&(g.rankdir==="TB"||g.rankdir==="BT"?_e.width+=_e.labeloffset:_e.height+=_e.labeloffset)})}function injectEdgeLabelProxies($){forEach($.edges(),function(g){var j=$.edge(g);if(j.width&&j.height){var _e=$.node(g.v),et=$.node(g.w),tt={rank:(et.rank-_e.rank)/2+_e.rank,e:g};addDummyNode($,"edge-proxy",tt,"_ep")}})}function assignRankMinMax($){var g=0;forEach($.nodes(),function(j){var _e=$.node(j);_e.borderTop&&(_e.minRank=$.node(_e.borderTop).rank,_e.maxRank=$.node(_e.borderBottom).rank,g=max(g,_e.maxRank))}),$.graph().maxRank=g}function removeEdgeLabelProxies($){forEach($.nodes(),function(g){var j=$.node(g);j.dummy==="edge-proxy"&&($.edge(j.e).labelRank=j.rank,$.removeNode(g))})}function translateGraph($){var g=Number.POSITIVE_INFINITY,j=0,_e=Number.POSITIVE_INFINITY,et=0,tt=$.graph(),nt=tt.marginx||0,rt=tt.marginy||0;function it(st){var ot=st.x,at=st.y,lt=st.width,ut=st.height;g=Math.min(g,ot-lt/2),j=Math.max(j,ot+lt/2),_e=Math.min(_e,at-ut/2),et=Math.max(et,at+ut/2)}forEach($.nodes(),function(st){it($.node(st))}),forEach($.edges(),function(st){var ot=$.edge(st);has(ot,"x")&&it(ot)}),g-=nt,_e-=rt,forEach($.nodes(),function(st){var ot=$.node(st);ot.x-=g,ot.y-=_e}),forEach($.edges(),function(st){var ot=$.edge(st);forEach(ot.points,function(at){at.x-=g,at.y-=_e}),has(ot,"x")&&(ot.x-=g),has(ot,"y")&&(ot.y-=_e)}),tt.width=j-g+nt,tt.height=et-_e+rt}function assignNodeIntersects($){forEach($.edges(),function(g){var j=$.edge(g),_e=$.node(g.v),et=$.node(g.w),tt,nt;j.points?(tt=j.points[0],nt=j.points[j.points.length-1]):(j.points=[],tt=et,nt=_e),j.points.unshift(intersectRect$1(_e,tt)),j.points.push(intersectRect$1(et,nt))})}function fixupEdgeLabelCoords($){forEach($.edges(),function(g){var j=$.edge(g);if(has(j,"x"))switch((j.labelpos==="l"||j.labelpos==="r")&&(j.width-=j.labeloffset),j.labelpos){case"l":j.x-=j.width/2+j.labeloffset;break;case"r":j.x+=j.width/2+j.labeloffset;break}})}function reversePointsForReversedEdges($){forEach($.edges(),function(g){var j=$.edge(g);j.reversed&&j.points.reverse()})}function removeBorderNodes($){forEach($.nodes(),function(g){if($.children(g).length){var j=$.node(g),_e=$.node(j.borderTop),et=$.node(j.borderBottom),tt=$.node(last$1(j.borderLeft)),nt=$.node(last$1(j.borderRight));j.width=Math.abs(nt.x-tt.x),j.height=Math.abs(et.y-_e.y),j.x=tt.x+j.width/2,j.y=_e.y+j.height/2}}),forEach($.nodes(),function(g){$.node(g).dummy==="border"&&$.removeNode(g)})}function removeSelfEdges($){forEach($.edges(),function(g){if(g.v===g.w){var j=$.node(g.v);j.selfEdges||(j.selfEdges=[]),j.selfEdges.push({e:g,label:$.edge(g)}),$.removeEdge(g)}})}function insertSelfEdges($){var g=buildLayerMatrix($);forEach(g,function(j){var _e=0;forEach(j,function(et,tt){var nt=$.node(et);nt.order=tt+_e,forEach(nt.selfEdges,function(rt){addDummyNode($,"selfedge",{width:rt.label.width,height:rt.label.height,rank:nt.rank,order:tt+ ++_e,e:rt.e,label:rt.label},"_se")}),delete nt.selfEdges})})}function positionSelfEdges($){forEach($.nodes(),function(g){var j=$.node(g);if(j.dummy==="selfedge"){var _e=$.node(j.e.v),et=_e.x+_e.width/2,tt=_e.y,nt=j.x-et,rt=_e.height/2;$.setEdge(j.e,j.label),$.removeNode(g),j.label.points=[{x:et+2*nt/3,y:tt-rt},{x:et+5*nt/6,y:tt-rt},{x:et+nt,y:tt},{x:et+5*nt/6,y:tt+rt},{x:et+2*nt/3,y:tt+rt}],j.label.x=j.x,j.label.y=j.y}})}function selectNumberAttrs($,g){return mapValues(pick$1($,g),Number)}function canonicalize($){var g={};return forEach($,function(j,_e){g[_e.toLowerCase()]=j}),g}function isSubgraph($,g){return!!$.children(g).length}function edgeToId($){return escapeId($.v)+":"+escapeId($.w)+":"+escapeId($.name)}var ID_DELIM=/:/g;function escapeId($){return $?String($).replace(ID_DELIM,"\\:"):""}function applyStyle($,g){g&&$.attr("style",g)}function applyClass($,g,j){g&&$.attr("class",g).attr("class",j+" "+$.attr("class"))}function applyTransition($,g){var j=g.graph();if(isPlainObject(j)){var _e=j.transition;if(isFunction(_e))return _e($)}return $}var arrows={normal,vee,undirected};function setArrows($){arrows=$}function normal($,g,j,_e){var et=$.append("marker").attr("id",g).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),tt=et.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle(tt,j[_e+"Style"]),j[_e+"Class"]&&tt.attr("class",j[_e+"Class"])}function vee($,g,j,_e){var et=$.append("marker").attr("id",g).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),tt=et.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle(tt,j[_e+"Style"]),j[_e+"Class"]&&tt.attr("class",j[_e+"Class"])}function undirected($,g,j,_e){var et=$.append("marker").attr("id",g).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),tt=et.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");applyStyle(tt,j[_e+"Style"]),j[_e+"Class"]&&tt.attr("class",j[_e+"Class"])}function addHtmlLabel($,g){var j=$.append("foreignObject").attr("width","100000"),_e=j.append("xhtml:div");_e.attr("xmlns","http://www.w3.org/1999/xhtml");var et=g.label;switch(typeof et){case"function":_e.insert(et);break;case"object":_e.insert(function(){return et});break;default:_e.html(et)}applyStyle(_e,g.labelStyle),_e.style("display","inline-block"),_e.style("white-space","nowrap");var tt=_e.node().getBoundingClientRect();return j.attr("width",tt.width).attr("height",tt.height),j}function addSVGLabel($,g){var j=$;return j.node().appendChild(g.label),applyStyle(j,g.labelStyle),j}function addTextLabel($,g){for(var j=$.append("text"),_e=processEscapeSequences(g.label).split(`
`),et=0;et<_e.length;et++)j.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(_e[et]);return applyStyle(j,g.labelStyle),j}function processEscapeSequences($){for(var g="",j=!1,_e,et=0;et<$.length;++et)if(_e=$[et],j){switch(_e){case"n":g+=`
`;break;default:g+=_e}j=!1}else _e==="\\"?j=!0:g+=_e;return g}function addLabel($,g,j){var _e=g.label,et=$.append("g");g.labelType==="svg"?addSVGLabel(et,g):typeof _e!="string"||g.labelType==="html"?addHtmlLabel(et,g):addTextLabel(et,g);var tt=et.node().getBBox(),nt;switch(j){case"top":nt=-g.height/2;break;case"bottom":nt=g.height/2-tt.height;break;default:nt=-tt.height/2}return et.attr("transform","translate("+-tt.width/2+","+nt+")"),et}var createClusters=function($,g){var j=g.nodes().filter(function(tt){return isSubgraph(g,tt)}),_e=$.selectAll("g.cluster").data(j,function(tt){return tt});applyTransition(_e.exit(),g).style("opacity",0).remove();var et=_e.enter().append("g").attr("class","cluster").attr("id",function(tt){var nt=g.node(tt);return nt.id}).style("opacity",0).each(function(tt){var nt=g.node(tt),rt=select(this);select(this).append("rect");var it=rt.append("g").attr("class","label");addLabel(it,nt,nt.clusterLabelPos)});return _e=_e.merge(et),_e=applyTransition(_e,g).style("opacity",1),_e.selectAll("rect").each(function(tt){var nt=g.node(tt),rt=select(this);applyStyle(rt,nt.style)}),_e};function setCreateClusters($){createClusters=$}let createEdgeLabels=function($,g){var j=$.selectAll("g.edgeLabel").data(g.edges(),function(et){return edgeToId(et)}).classed("update",!0);j.exit().remove(),j.enter().append("g").classed("edgeLabel",!0).style("opacity",0),j=$.selectAll("g.edgeLabel"),j.each(function(et){var tt=select(this);tt.select(".label").remove();var nt=g.edge(et),rt=addLabel(tt,g.edge(et),0).classed("label",!0),it=rt.node().getBBox();nt.labelId&&rt.attr("id",nt.labelId),has(nt,"width")||(nt.width=it.width),has(nt,"height")||(nt.height=it.height)});var _e;return j.exit?_e=j.exit():_e=j.selectAll(null),applyTransition(_e,g).style("opacity",0).remove(),j};function setCreateEdgeLabels($){createEdgeLabels=$}function intersectNode($,g){return $.intersect(g)}var createEdgePaths=function($,g,j){var _e=$.selectAll("g.edgePath").data(g.edges(),function(nt){return edgeToId(nt)}).classed("update",!0),et=enter(_e,g);exit(_e,g);var tt=_e.merge!==void 0?_e.merge(et):_e;return applyTransition(tt,g).style("opacity",1),tt.each(function(nt){var rt=select(this),it=g.edge(nt);it.elem=this,it.id&&rt.attr("id",it.id),applyClass(rt,it.class,(rt.classed("update")?"update ":"")+"edgePath")}),tt.selectAll("path.path").each(function(nt){var rt=g.edge(nt);rt.arrowheadId=uniqueId("arrowhead");var it=select(this).attr("marker-end",function(){return"url("+makeFragmentRef(location.href,rt.arrowheadId)+")"}).style("fill","none");applyTransition(it,g).attr("d",function(st){return calcPoints(g,st)}),applyStyle(it,rt.style)}),tt.selectAll("defs *").remove(),tt.selectAll("defs").each(function(nt){var rt=g.edge(nt),it=j[rt.arrowhead];it(select(this),rt.arrowheadId,rt,"arrowhead")}),tt};function setCreateEdgePaths($){createEdgePaths=$}function makeFragmentRef($,g){var j=$.split("#")[0];return j+"#"+g}function calcPoints($,g){var j=$.edge(g),_e=$.node(g.v),et=$.node(g.w),tt=j.points.slice(1,j.points.length-1);return tt.unshift(intersectNode(_e,tt[0])),tt.push(intersectNode(et,tt[tt.length-1])),createLine(j,tt)}function createLine($,g){var j=(line||svg.line)().x(function(_e){return _e.x}).y(function(_e){return _e.y});return(j.curve||j.interpolate)($.curve),j(g)}function getCoords($){var g=$.getBBox(),j=$.ownerSVGElement.getScreenCTM().inverse().multiply($.getScreenCTM()).translate(g.width/2,g.height/2);return{x:j.e,y:j.f}}function enter($,g){var j=$.enter().append("g").attr("class","edgePath").style("opacity",0);return j.append("path").attr("class","path").attr("d",function(_e){var et=g.edge(_e),tt=g.node(_e.v).elem,nt=range$1(et.points.length).map(function(){return getCoords(tt)});return createLine(et,nt)}),j.append("defs"),j}function exit($,g){var j=$.exit();applyTransition(j,g).style("opacity",0).remove()}var createNodes=function($,g,j){var _e=g.nodes().filter(function(nt){return!isSubgraph(g,nt)}),et=$.selectAll("g.node").data(_e,function(nt){return nt}).classed("update",!0);et.exit().remove(),et.enter().append("g").attr("class","node").style("opacity",0),et=$.selectAll("g.node"),et.each(function(nt){var rt=g.node(nt),it=select(this);applyClass(it,rt.class,(it.classed("update")?"update ":"")+"node"),it.select("g.label").remove();var st=it.append("g").attr("class","label"),ot=addLabel(st,rt),at=j[rt.shape],lt=pick$1(ot.node().getBBox(),"width","height");rt.elem=this,rt.id&&it.attr("id",rt.id),rt.labelId&&st.attr("id",rt.labelId),has(rt,"width")&&(lt.width=rt.width),has(rt,"height")&&(lt.height=rt.height),lt.width+=rt.paddingLeft+rt.paddingRight,lt.height+=rt.paddingTop+rt.paddingBottom,st.attr("transform","translate("+(rt.paddingLeft-rt.paddingRight)/2+","+(rt.paddingTop-rt.paddingBottom)/2+")");var ut=select(this);ut.select(".label-container").remove();var ht=at(ut,lt,rt).classed("label-container",!0);applyStyle(ht,rt.style);var ft=ht.node().getBBox();rt.width=ft.width,rt.height=ft.height});var tt;return et.exit?tt=et.exit():tt=et.selectAll(null),applyTransition(tt,g).style("opacity",0).remove(),et};function setCreateNodes($){createNodes=$}function positionClusters($,g){var j=$.filter(function(){return!select(this).classed("update")});function _e(et){var tt=g.node(et);return"translate("+tt.x+","+tt.y+")"}j.attr("transform",_e),applyTransition($,g).style("opacity",1).attr("transform",_e),applyTransition(j.selectAll("rect"),g).attr("width",function(et){return g.node(et).width}).attr("height",function(et){return g.node(et).height}).attr("x",function(et){var tt=g.node(et);return-tt.width/2}).attr("y",function(et){var tt=g.node(et);return-tt.height/2})}function positionEdgeLabels($,g){var j=$.filter(function(){return!select(this).classed("update")});function _e(et){var tt=g.edge(et);return has(tt,"x")?"translate("+tt.x+","+tt.y+")":""}j.attr("transform",_e),applyTransition($,g).style("opacity",1).attr("transform",_e)}function positionNodes($,g){var j=$.filter(function(){return!select(this).classed("update")});function _e(et){var tt=g.node(et);return"translate("+tt.x+","+tt.y+")"}j.attr("transform",_e),applyTransition($,g).style("opacity",1).attr("transform",_e)}function intersectEllipse($,g,j,_e){var et=$.x,tt=$.y,nt=et-_e.x,rt=tt-_e.y,it=Math.sqrt(g*g*rt*rt+j*j*nt*nt),st=Math.abs(g*j*nt/it);_e.x<et&&(st=-st);var ot=Math.abs(g*j*rt/it);return _e.y<tt&&(ot=-ot),{x:et+st,y:tt+ot}}function intersectCircle($,g,j){return intersectEllipse($,g,g,j)}function intersectLine($,g,j,_e){var et,tt,nt,rt,it,st,ot,at,lt,ut,ht,ft,gt,dt,mt;if(et=g.y-$.y,nt=$.x-g.x,it=g.x*$.y-$.x*g.y,lt=et*j.x+nt*j.y+it,ut=et*_e.x+nt*_e.y+it,!(lt!==0&&ut!==0&&sameSign(lt,ut))&&(tt=_e.y-j.y,rt=j.x-_e.x,st=_e.x*j.y-j.x*_e.y,ot=tt*$.x+rt*$.y+st,at=tt*g.x+rt*g.y+st,!(ot!==0&&at!==0&&sameSign(ot,at))&&(ht=et*rt-tt*nt,ht!==0)))return ft=Math.abs(ht/2),gt=nt*st-rt*it,dt=gt<0?(gt-ft)/ht:(gt+ft)/ht,gt=tt*it-et*st,mt=gt<0?(gt-ft)/ht:(gt+ft)/ht,{x:dt,y:mt}}function sameSign($,g){return $*g>0}function intersectPolygon($,g,j){var _e=$.x,et=$.y,tt=[],nt=Number.POSITIVE_INFINITY,rt=Number.POSITIVE_INFINITY;g.forEach(function(ht){nt=Math.min(nt,ht.x),rt=Math.min(rt,ht.y)});for(var it=_e-$.width/2-nt,st=et-$.height/2-rt,ot=0;ot<g.length;ot++){var at=g[ot],lt=g[ot<g.length-1?ot+1:0],ut=intersectLine($,j,{x:it+at.x,y:st+at.y},{x:it+lt.x,y:st+lt.y});ut&&tt.push(ut)}return tt.length?(tt.length>1&&tt.sort(function(ht,ft){var gt=ht.x-j.x,dt=ht.y-j.y,mt=Math.sqrt(gt*gt+dt*dt),yt=ft.x-j.x,Et=ft.y-j.y,Ct=Math.sqrt(yt*yt+Et*Et);return mt<Ct?-1:mt===Ct?0:1}),tt[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",$),$)}function intersectRect($,g){var j=$.x,_e=$.y,et=g.x-j,tt=g.y-_e,nt=$.width/2,rt=$.height/2,it,st;return Math.abs(tt)*nt>Math.abs(et)*rt?(tt<0&&(rt=-rt),it=tt===0?0:rt*et/tt,st=rt):(et<0&&(nt=-nt),it=nt,st=et===0?0:nt*tt/et),{x:j+it,y:_e+st}}var shapes={rect,ellipse,circle,diamond};function setShapes($){shapes=$}function rect($,g,j){var _e=$.insert("rect",":first-child").attr("rx",j.rx).attr("ry",j.ry).attr("x",-g.width/2).attr("y",-g.height/2).attr("width",g.width).attr("height",g.height);return j.intersect=function(et){return intersectRect(j,et)},_e}function ellipse($,g,j){var _e=g.width/2,et=g.height/2,tt=$.insert("ellipse",":first-child").attr("x",-g.width/2).attr("y",-g.height/2).attr("rx",_e).attr("ry",et);return j.intersect=function(nt){return intersectEllipse(j,_e,et,nt)},tt}function circle($,g,j){var _e=Math.max(g.width,g.height)/2,et=$.insert("circle",":first-child").attr("x",-g.width/2).attr("y",-g.height/2).attr("r",_e);return j.intersect=function(tt){return intersectCircle(j,_e,tt)},et}function diamond($,g,j){var _e=g.width*Math.SQRT2/2,et=g.height*Math.SQRT2/2,tt=[{x:0,y:-et},{x:-_e,y:0},{x:0,y:et},{x:_e,y:0}],nt=$.insert("polygon",":first-child").attr("points",tt.map(function(rt){return rt.x+","+rt.y}).join(" "));return j.intersect=function(rt){return intersectPolygon(j,tt,rt)},nt}function render(){var $=function(g,j){preProcessGraph(j);var _e=createOrSelectGroup(g,"output"),et=createOrSelectGroup(_e,"clusters"),tt=createOrSelectGroup(_e,"edgePaths"),nt=createEdgeLabels(createOrSelectGroup(_e,"edgeLabels"),j),rt=createNodes(createOrSelectGroup(_e,"nodes"),j,shapes);layout(j),positionNodes(rt,j),positionEdgeLabels(nt,j),createEdgePaths(tt,j,arrows);var it=createClusters(et,j);positionClusters(it,j),postProcessGraph(j)};return $.createNodes=function(g){return arguments.length?(setCreateNodes(g),$):createNodes},$.createClusters=function(g){return arguments.length?(setCreateClusters(g),$):createClusters},$.createEdgeLabels=function(g){return arguments.length?(setCreateEdgeLabels(g),$):createEdgeLabels},$.createEdgePaths=function(g){return arguments.length?(setCreateEdgePaths(g),$):createEdgePaths},$.shapes=function(g){return arguments.length?(setShapes(g),$):shapes},$.arrows=function(g){return arguments.length?(setArrows(g),$):arrows},$}var NODE_DEFAULT_ATTRS={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},EDGE_DEFAULT_ATTRS={arrowhead:"normal",curve:curveLinear};function preProcessGraph($){$.nodes().forEach(function(g){var j=$.node(g);!has(j,"label")&&!$.children(g).length&&(j.label=g),has(j,"paddingX")&&defaults$1(j,{paddingLeft:j.paddingX,paddingRight:j.paddingX}),has(j,"paddingY")&&defaults$1(j,{paddingTop:j.paddingY,paddingBottom:j.paddingY}),has(j,"padding")&&defaults$1(j,{paddingLeft:j.padding,paddingRight:j.padding,paddingTop:j.padding,paddingBottom:j.padding}),defaults$1(j,NODE_DEFAULT_ATTRS),forEach(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(_e){j[_e]=Number(j[_e])}),has(j,"width")&&(j._prevWidth=j.width),has(j,"height")&&(j._prevHeight=j.height)}),$.edges().forEach(function(g){var j=$.edge(g);has(j,"label")||(j.label=""),defaults$1(j,EDGE_DEFAULT_ATTRS)})}function postProcessGraph($){forEach($.nodes(),function(g){var j=$.node(g);has(j,"_prevWidth")?j.width=j._prevWidth:delete j.width,has(j,"_prevHeight")?j.height=j._prevHeight:delete j.height,delete j._prevWidth,delete j._prevHeight})}function createOrSelectGroup($,g){var j=$.select("g."+g);return j.empty()&&(j=$.append("g").attr("class",g)),j}function Tree({semantics:$,setSvgElem:g}){console.log("rendering tree: ",$);const j=new Graph({directed:!0});j.setGraph({}),j.graph().rankdir=($==null?void 0:$.rankdir)??"TB",j.graph().ranksep=15,j.graph().nodesep=20,j.setDefaultEdgeLabel(function(){return{}});const _e=({node:it,statusPercentage:st})=>{const ot='"trebuchet ms",verdana,arial,sans-serif',at=it.intermediate?7:13,lt=it.intermediate?`font: bold ${at}px ${ot};`:`font: 300 ${at}px ${ot};`,ut=it.intermediate?"ellipse":"rect",ht=ut==="rect"?"stroke: black; stroke-width: 1px; rx: 5px; ry: 5px;":"stroke: black; stroke-width: 1px;",ft={label:wrapLines(it.label,20).join(`
`),shape:ut,style:`${ht} fill:#dff8ff;`,labelStyle:lt+"fill: black;"};it.intermediate&&(ft.width=5,ft.height=5,ft.style=`${ht} fill:white;`),st!==void 0&&(st>=70&&(ft.style=`${ht} fill:#95f795;`),st<70&&st>30&&(ft.style=`${ht} fill:#fdfdbe;`),st<=30&&(ft.style=`${ht} fill:#ffb2b2;`)),console.log("creating node ",it.key),j.setNode(it.key,ft)};if(React.useEffect(()=>{const st=select("svg").select("g"),ot=render(),at=select("#tree-svg-container");if(!(at!=null&&at.node())||!(st!=null&&st.node()))return;ot(st,j),st.attr("transform",computeResizeTransform(st.node(),at.node(),13,13)+", translate(13, 13)");const lt=10;st.selectAll("g.node .annotation-circle").remove(),st.selectAll("g.node .annotation-label").remove();const ut=st.selectAll("g.node").filter(function(ft){var gt;return(gt=$==null?void 0:$.nodes.get(ft))==null?void 0:gt.annotation});ut.append("circle").attr("class","annotation-circle").attr("cx",function(){const ft=this.parentNode;console.log("elem",ft);const gt=ft.getElementsByTagName("rect")[0];return gt?-gt.width.baseVal.value/2:0}).attr("cy",function(){const ft=this.parentNode;console.log("elem",ft);const gt=ft.getElementsByTagName("rect")[0];return gt?-gt.height.baseVal.value/2:0}).attr("r",lt).style("fill","white").style("stroke","black").style("stroke-width","1px");const ht=ft=>ft&&ft.length<2?11:8;ut.append("text").attr("class","annotation-label").style("font-size",function(){var ft;return ht((ft=$==null?void 0:$.nodes.get(this.parentNode.__data__))==null?void 0:ft.annotation)+"px"}).attr("x",function(){const ft=this.parentNode;console.log("elem",ft);const gt=ft.getElementsByTagName("rect")[0];return gt?-gt.width.baseVal.value/2:0}).attr("y",function(){const ft=this.parentNode;console.log("elem",ft);const gt=ft.getElementsByTagName("rect")[0];return gt?-gt.height.baseVal.value/2+1.5:0}).attr("r",lt).text(function(){var ft;return(ft=tt.get(this.parentNode.__data__))==null?void 0:ft.annotation}),g(document.getElementById("treeSvg"))},[$]),!$)return jsxRuntimeExports.jsx("div",{children:" No AST "});const et=({from:it,to:st})=>{var at,lt;const ot=((at=$.nodes.get(it))==null?void 0:at.intermediate)||((lt=$.nodes.get(st))==null?void 0:lt.intermediate);j.setEdge(it,st,{curve:basis,style:"stroke: gray; fill:none; stroke-width: 1px;",minlen:ot?1:2})},{nodes:tt,edges:nt}=$;console.log("{nodes, edges}",{nodes:tt,edges:nt});for(const[it,st]of tt)_e({node:st,statusPercentage:st.statusPercentage});for(const it of nt)et({from:it.from,to:it.to});const rt=`
  .annotation-label {
    fill: black;
    text-anchor: middle;
    font-weight: bold;
    alignment-baseline: middle;
  }
  `;return jsxRuntimeExports.jsx("div",{id:"tree-svg-container",style:{width:"100%",height:"500"},children:jsxRuntimeExports.jsxs("svg",{id:"treeSvg",width:"100%",height:"100%",version:"1.1",preserveAspectRatio:"xMinYMin",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("style",{children:rt}),jsxRuntimeExports.jsx("g",{})]})})}var raf$1={exports:{}},performanceNow={exports:{}};(function(){var $,g,j,_e,et,tt;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return($()-et)/1e6},g=process.hrtime,$=function(){var nt;return nt=g(),nt[0]*1e9+nt[1]},_e=$(),tt=process.uptime()*1e9,et=_e-tt):Date.now?(performanceNow.exports=function(){return Date.now()-j},j=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-j},j=new Date().getTime())}).call(commonjsGlobal);var performanceNowExports=performanceNow.exports,now=performanceNowExports,root=typeof window>"u"?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i$1=0;!raf&&i$1<vendors.length;i$1++)raf=root[vendors[i$1]+"Request"+suffix],caf=root[vendors[i$1]+"Cancel"+suffix]||root[vendors[i$1]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function($){if(queue.length===0){var g=now(),j=Math.max(0,frameDuration-(g-last));last=j+g,setTimeout(function(){var _e=queue.slice(0);queue.length=0;for(var et=0;et<_e.length;et++)if(!_e[et].cancelled)try{_e[et].callback(last)}catch(tt){setTimeout(function(){throw tt},0)}},Math.round(j))}return queue.push({handle:++id,callback:$,cancelled:!1}),id},caf=function($){for(var g=0;g<queue.length;g++)queue[g].handle===$&&(queue[g].cancelled=!0)}}raf$1.exports=function($){return raf.call(root,$)};raf$1.exports.cancel=function(){caf.apply(root,arguments)};raf$1.exports.polyfill=function($){$||($=root),$.requestAnimationFrame=raf,$.cancelAnimationFrame=caf};var rafExports=raf$1.exports;const requestAnimationFrame=getDefaultExportFromCjs(rafExports);var rgbcolor=function($){this.ok=!1,this.alpha=1,$.charAt(0)=="#"&&($=$.substr(1,6)),$=$.replace(/ /g,""),$=$.toLowerCase();var g={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};$=g[$]||$;for(var j=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(it){return[parseInt(it[1]),parseInt(it[2]),parseInt(it[3]),parseFloat(it[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(it){return[parseInt(it[1]),parseInt(it[2]),parseInt(it[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(it){return[parseInt(it[1],16),parseInt(it[2],16),parseInt(it[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(it){return[parseInt(it[1]+it[1],16),parseInt(it[2]+it[2],16),parseInt(it[3]+it[3],16)]}}],_e=0;_e<j.length;_e++){var et=j[_e].re,tt=j[_e].process,nt=et.exec($);if(nt){var rt=tt(nt);this.r=rt[0],this.g=rt[1],this.b=rt[2],rt.length>3&&(this.alpha=rt[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var it=this.r.toString(16),st=this.g.toString(16),ot=this.b.toString(16);return it.length==1&&(it="0"+it),st.length==1&&(st="0"+st),ot.length==1&&(ot="0"+ot),"#"+it+st+ot},this.getHelpXML=function(){for(var it=new Array,st=0;st<j.length;st++)for(var ot=j[st].example,at=0;at<ot.length;at++)it[it.length]=ot[at];for(var lt in g)it[it.length]=lt;var ut=document.createElement("ul");ut.setAttribute("id","rgbcolor-examples");for(var st=0;st<it.length;st++)try{var ht=document.createElement("li"),ft=new RGBColor(it[st]),gt=document.createElement("div");gt.style.cssText="margin: 3px; border: 1px solid black; background:"+ft.toHex()+"; color:"+ft.toHex(),gt.appendChild(document.createTextNode("test"));var dt=document.createTextNode(" "+it[st]+" -> "+ft.toRGB()+" -> "+ft.toHex());ht.appendChild(gt),ht.appendChild(dt),ut.appendChild(ht)}catch{}return ut}};const RGBColor$1=getDefaultExportFromCjs(rgbcolor);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function($,g){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,_e){j.__proto__=_e}||function(j,_e){for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(j[et]=_e[et])})($,g)};function r($,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function j(){this.constructor=$}t($,g),$.prototype=g===null?Object.create(g):(j.prototype=g.prototype,new j)}function e($){var g="";Array.isArray($)||($=[$]);for(var j=0;j<$.length;j++){var _e=$[j];if(_e.type===_.CLOSE_PATH)g+="z";else if(_e.type===_.HORIZ_LINE_TO)g+=(_e.relative?"h":"H")+_e.x;else if(_e.type===_.VERT_LINE_TO)g+=(_e.relative?"v":"V")+_e.y;else if(_e.type===_.MOVE_TO)g+=(_e.relative?"m":"M")+_e.x+" "+_e.y;else if(_e.type===_.LINE_TO)g+=(_e.relative?"l":"L")+_e.x+" "+_e.y;else if(_e.type===_.CURVE_TO)g+=(_e.relative?"c":"C")+_e.x1+" "+_e.y1+" "+_e.x2+" "+_e.y2+" "+_e.x+" "+_e.y;else if(_e.type===_.SMOOTH_CURVE_TO)g+=(_e.relative?"s":"S")+_e.x2+" "+_e.y2+" "+_e.x+" "+_e.y;else if(_e.type===_.QUAD_TO)g+=(_e.relative?"q":"Q")+_e.x1+" "+_e.y1+" "+_e.x+" "+_e.y;else if(_e.type===_.SMOOTH_QUAD_TO)g+=(_e.relative?"t":"T")+_e.x+" "+_e.y;else{if(_e.type!==_.ARC)throw new Error('Unexpected command type "'+_e.type+'" at index '+j+".");g+=(_e.relative?"a":"A")+_e.rX+" "+_e.rY+" "+_e.xRot+" "+ +_e.lArcFlag+" "+ +_e.sweepFlag+" "+_e.x+" "+_e.y}}return g}function i($,g){var j=$[0],_e=$[1];return[j*Math.cos(g)-_e*Math.sin(g),j*Math.sin(g)+_e*Math.cos(g)]}function a(){for(var $=[],g=0;g<arguments.length;g++)$[g]=arguments[g];for(var j=0;j<$.length;j++)if(typeof $[j]!="number")throw new Error("assertNumbers arguments["+j+"] is not a number. "+typeof $[j]+" == typeof "+$[j]);return!0}var n=Math.PI;function o($,g,j){$.lArcFlag=$.lArcFlag===0?0:1,$.sweepFlag=$.sweepFlag===0?0:1;var _e=$.rX,et=$.rY,tt=$.x,nt=$.y;_e=Math.abs($.rX),et=Math.abs($.rY);var rt=i([(g-tt)/2,(j-nt)/2],-$.xRot/180*n),it=rt[0],st=rt[1],ot=Math.pow(it,2)/Math.pow(_e,2)+Math.pow(st,2)/Math.pow(et,2);1<ot&&(_e*=Math.sqrt(ot),et*=Math.sqrt(ot)),$.rX=_e,$.rY=et;var at=Math.pow(_e,2)*Math.pow(st,2)+Math.pow(et,2)*Math.pow(it,2),lt=($.lArcFlag!==$.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(_e,2)*Math.pow(et,2)-at)/at)),ut=_e*st/et*lt,ht=-et*it/_e*lt,ft=i([ut,ht],$.xRot/180*n);$.cX=ft[0]+(g+tt)/2,$.cY=ft[1]+(j+nt)/2,$.phi1=Math.atan2((st-ht)/et,(it-ut)/_e),$.phi2=Math.atan2((-st-ht)/et,(-it-ut)/_e),$.sweepFlag===0&&$.phi2>$.phi1&&($.phi2-=2*n),$.sweepFlag===1&&$.phi2<$.phi1&&($.phi2+=2*n),$.phi1*=180/n,$.phi2*=180/n}function s($,g,j){a($,g,j);var _e=$*$+g*g-j*j;if(0>_e)return[];if(_e===0)return[[$*j/($*$+g*g),g*j/($*$+g*g)]];var et=Math.sqrt(_e);return[[($*j+g*et)/($*$+g*g),(g*j-$*et)/($*$+g*g)],[($*j-g*et)/($*$+g*g),(g*j+$*et)/($*$+g*g)]]}var u,h=Math.PI/180;function c$1($,g,j){return(1-j)*$+j*g}function y($,g,j,_e){return $+Math.cos(_e/180*n)*g+Math.sin(_e/180*n)*j}function p($,g,j,_e){var et=1e-6,tt=g-$,nt=j-g,rt=3*tt+3*(_e-j)-6*nt,it=6*(nt-tt),st=3*tt;return Math.abs(rt)<et?[-st/it]:function(ot,at,lt){lt===void 0&&(lt=1e-6);var ut=ot*ot/4-at;if(ut<-lt)return[];if(ut<=lt)return[-ot/2];var ht=Math.sqrt(ut);return[-ot/2-ht,-ot/2+ht]}(it/rt,st/rt,et)}function m$1($,g,j,_e,et){var tt=1-et;return $*(tt*tt*tt)+g*(3*tt*tt*et)+j*(3*tt*et*et)+_e*(et*et*et)}(function($){function g(){return et(function(rt,it,st){return rt.relative&&(rt.x1!==void 0&&(rt.x1+=it),rt.y1!==void 0&&(rt.y1+=st),rt.x2!==void 0&&(rt.x2+=it),rt.y2!==void 0&&(rt.y2+=st),rt.x!==void 0&&(rt.x+=it),rt.y!==void 0&&(rt.y+=st),rt.relative=!1),rt})}function j(){var rt=NaN,it=NaN,st=NaN,ot=NaN;return et(function(at,lt,ut){return at.type&_.SMOOTH_CURVE_TO&&(at.type=_.CURVE_TO,rt=isNaN(rt)?lt:rt,it=isNaN(it)?ut:it,at.x1=at.relative?lt-rt:2*lt-rt,at.y1=at.relative?ut-it:2*ut-it),at.type&_.CURVE_TO?(rt=at.relative?lt+at.x2:at.x2,it=at.relative?ut+at.y2:at.y2):(rt=NaN,it=NaN),at.type&_.SMOOTH_QUAD_TO&&(at.type=_.QUAD_TO,st=isNaN(st)?lt:st,ot=isNaN(ot)?ut:ot,at.x1=at.relative?lt-st:2*lt-st,at.y1=at.relative?ut-ot:2*ut-ot),at.type&_.QUAD_TO?(st=at.relative?lt+at.x1:at.x1,ot=at.relative?ut+at.y1:at.y1):(st=NaN,ot=NaN),at})}function _e(){var rt=NaN,it=NaN;return et(function(st,ot,at){if(st.type&_.SMOOTH_QUAD_TO&&(st.type=_.QUAD_TO,rt=isNaN(rt)?ot:rt,it=isNaN(it)?at:it,st.x1=st.relative?ot-rt:2*ot-rt,st.y1=st.relative?at-it:2*at-it),st.type&_.QUAD_TO){rt=st.relative?ot+st.x1:st.x1,it=st.relative?at+st.y1:st.y1;var lt=st.x1,ut=st.y1;st.type=_.CURVE_TO,st.x1=((st.relative?0:ot)+2*lt)/3,st.y1=((st.relative?0:at)+2*ut)/3,st.x2=(st.x+2*lt)/3,st.y2=(st.y+2*ut)/3}else rt=NaN,it=NaN;return st})}function et(rt){var it=0,st=0,ot=NaN,at=NaN;return function(lt){if(isNaN(ot)&&!(lt.type&_.MOVE_TO))throw new Error("path must start with moveto");var ut=rt(lt,it,st,ot,at);return lt.type&_.CLOSE_PATH&&(it=ot,st=at),lt.x!==void 0&&(it=lt.relative?it+lt.x:lt.x),lt.y!==void 0&&(st=lt.relative?st+lt.y:lt.y),lt.type&_.MOVE_TO&&(ot=it,at=st),ut}}function tt(rt,it,st,ot,at,lt){return a(rt,it,st,ot,at,lt),et(function(ut,ht,ft,gt){var dt=ut.x1,mt=ut.x2,yt=ut.relative&&!isNaN(gt),Et=ut.x!==void 0?ut.x:yt?0:ht,Ct=ut.y!==void 0?ut.y:yt?0:ft;function kt(Kt){return Kt*Kt}ut.type&_.HORIZ_LINE_TO&&it!==0&&(ut.type=_.LINE_TO,ut.y=ut.relative?0:ft),ut.type&_.VERT_LINE_TO&&st!==0&&(ut.type=_.LINE_TO,ut.x=ut.relative?0:ht),ut.x!==void 0&&(ut.x=ut.x*rt+Ct*st+(yt?0:at)),ut.y!==void 0&&(ut.y=Et*it+ut.y*ot+(yt?0:lt)),ut.x1!==void 0&&(ut.x1=ut.x1*rt+ut.y1*st+(yt?0:at)),ut.y1!==void 0&&(ut.y1=dt*it+ut.y1*ot+(yt?0:lt)),ut.x2!==void 0&&(ut.x2=ut.x2*rt+ut.y2*st+(yt?0:at)),ut.y2!==void 0&&(ut.y2=mt*it+ut.y2*ot+(yt?0:lt));var St=rt*ot-it*st;if(ut.xRot!==void 0&&(rt!==1||it!==0||st!==0||ot!==1))if(St===0)delete ut.rX,delete ut.rY,delete ut.xRot,delete ut.lArcFlag,delete ut.sweepFlag,ut.type=_.LINE_TO;else{var Pt=ut.xRot*Math.PI/180,Bt=Math.sin(Pt),xt=Math.cos(Pt),bt=1/kt(ut.rX),$t=1/kt(ut.rY),Mt=kt(xt)*bt+kt(Bt)*$t,Ot=2*Bt*xt*(bt-$t),jt=kt(Bt)*bt+kt(xt)*$t,Yt=Mt*ot*ot-Ot*it*ot+jt*it*it,Ut=Ot*(rt*ot+it*st)-2*(Mt*st*ot+jt*rt*it),Nt=Mt*st*st-Ot*rt*st+jt*rt*rt,It=(Math.atan2(Ut,Yt-Nt)+Math.PI)%Math.PI/2,Ht=Math.sin(It),Gt=Math.cos(It);ut.rX=Math.abs(St)/Math.sqrt(Yt*kt(Gt)+Ut*Ht*Gt+Nt*kt(Ht)),ut.rY=Math.abs(St)/Math.sqrt(Yt*kt(Ht)-Ut*Ht*Gt+Nt*kt(Gt)),ut.xRot=180*It/Math.PI}return ut.sweepFlag!==void 0&&0>St&&(ut.sweepFlag=+!ut.sweepFlag),ut})}function nt(){return function(rt){var it={};for(var st in rt)it[st]=rt[st];return it}}$.ROUND=function(rt){function it(st){return Math.round(st*rt)/rt}return rt===void 0&&(rt=1e13),a(rt),function(st){return st.x1!==void 0&&(st.x1=it(st.x1)),st.y1!==void 0&&(st.y1=it(st.y1)),st.x2!==void 0&&(st.x2=it(st.x2)),st.y2!==void 0&&(st.y2=it(st.y2)),st.x!==void 0&&(st.x=it(st.x)),st.y!==void 0&&(st.y=it(st.y)),st.rX!==void 0&&(st.rX=it(st.rX)),st.rY!==void 0&&(st.rY=it(st.rY)),st}},$.TO_ABS=g,$.TO_REL=function(){return et(function(rt,it,st){return rt.relative||(rt.x1!==void 0&&(rt.x1-=it),rt.y1!==void 0&&(rt.y1-=st),rt.x2!==void 0&&(rt.x2-=it),rt.y2!==void 0&&(rt.y2-=st),rt.x!==void 0&&(rt.x-=it),rt.y!==void 0&&(rt.y-=st),rt.relative=!0),rt})},$.NORMALIZE_HVZ=function(rt,it,st){return rt===void 0&&(rt=!0),it===void 0&&(it=!0),st===void 0&&(st=!0),et(function(ot,at,lt,ut,ht){if(isNaN(ut)&&!(ot.type&_.MOVE_TO))throw new Error("path must start with moveto");return it&&ot.type&_.HORIZ_LINE_TO&&(ot.type=_.LINE_TO,ot.y=ot.relative?0:lt),st&&ot.type&_.VERT_LINE_TO&&(ot.type=_.LINE_TO,ot.x=ot.relative?0:at),rt&&ot.type&_.CLOSE_PATH&&(ot.type=_.LINE_TO,ot.x=ot.relative?ut-at:ut,ot.y=ot.relative?ht-lt:ht),ot.type&_.ARC&&(ot.rX===0||ot.rY===0)&&(ot.type=_.LINE_TO,delete ot.rX,delete ot.rY,delete ot.xRot,delete ot.lArcFlag,delete ot.sweepFlag),ot})},$.NORMALIZE_ST=j,$.QT_TO_C=_e,$.INFO=et,$.SANITIZE=function(rt){rt===void 0&&(rt=0),a(rt);var it=NaN,st=NaN,ot=NaN,at=NaN;return et(function(lt,ut,ht,ft,gt){var dt=Math.abs,mt=!1,yt=0,Et=0;if(lt.type&_.SMOOTH_CURVE_TO&&(yt=isNaN(it)?0:ut-it,Et=isNaN(st)?0:ht-st),lt.type&(_.CURVE_TO|_.SMOOTH_CURVE_TO)?(it=lt.relative?ut+lt.x2:lt.x2,st=lt.relative?ht+lt.y2:lt.y2):(it=NaN,st=NaN),lt.type&_.SMOOTH_QUAD_TO?(ot=isNaN(ot)?ut:2*ut-ot,at=isNaN(at)?ht:2*ht-at):lt.type&_.QUAD_TO?(ot=lt.relative?ut+lt.x1:lt.x1,at=lt.relative?ht+lt.y1:lt.y2):(ot=NaN,at=NaN),lt.type&_.LINE_COMMANDS||lt.type&_.ARC&&(lt.rX===0||lt.rY===0||!lt.lArcFlag)||lt.type&_.CURVE_TO||lt.type&_.SMOOTH_CURVE_TO||lt.type&_.QUAD_TO||lt.type&_.SMOOTH_QUAD_TO){var Ct=lt.x===void 0?0:lt.relative?lt.x:lt.x-ut,kt=lt.y===void 0?0:lt.relative?lt.y:lt.y-ht;yt=isNaN(ot)?lt.x1===void 0?yt:lt.relative?lt.x:lt.x1-ut:ot-ut,Et=isNaN(at)?lt.y1===void 0?Et:lt.relative?lt.y:lt.y1-ht:at-ht;var St=lt.x2===void 0?0:lt.relative?lt.x:lt.x2-ut,Pt=lt.y2===void 0?0:lt.relative?lt.y:lt.y2-ht;dt(Ct)<=rt&&dt(kt)<=rt&&dt(yt)<=rt&&dt(Et)<=rt&&dt(St)<=rt&&dt(Pt)<=rt&&(mt=!0)}return lt.type&_.CLOSE_PATH&&dt(ut-ft)<=rt&&dt(ht-gt)<=rt&&(mt=!0),mt?[]:lt})},$.MATRIX=tt,$.ROTATE=function(rt,it,st){it===void 0&&(it=0),st===void 0&&(st=0),a(rt,it,st);var ot=Math.sin(rt),at=Math.cos(rt);return tt(at,ot,-ot,at,it-it*at+st*ot,st-it*ot-st*at)},$.TRANSLATE=function(rt,it){return it===void 0&&(it=0),a(rt,it),tt(1,0,0,1,rt,it)},$.SCALE=function(rt,it){return it===void 0&&(it=rt),a(rt,it),tt(rt,0,0,it,0,0)},$.SKEW_X=function(rt){return a(rt),tt(1,0,Math.atan(rt),1,0,0)},$.SKEW_Y=function(rt){return a(rt),tt(1,Math.atan(rt),0,1,0,0)},$.X_AXIS_SYMMETRY=function(rt){return rt===void 0&&(rt=0),a(rt),tt(-1,0,0,1,rt,0)},$.Y_AXIS_SYMMETRY=function(rt){return rt===void 0&&(rt=0),a(rt),tt(1,0,0,-1,0,rt)},$.A_TO_C=function(){return et(function(rt,it,st){return _.ARC===rt.type?function(ot,at,lt){var ut,ht,ft,gt;ot.cX||o(ot,at,lt);for(var dt=Math.min(ot.phi1,ot.phi2),mt=Math.max(ot.phi1,ot.phi2)-dt,yt=Math.ceil(mt/90),Et=new Array(yt),Ct=at,kt=lt,St=0;St<yt;St++){var Pt=c$1(ot.phi1,ot.phi2,St/yt),Bt=c$1(ot.phi1,ot.phi2,(St+1)/yt),xt=Bt-Pt,bt=4/3*Math.tan(xt*h/4),$t=[Math.cos(Pt*h)-bt*Math.sin(Pt*h),Math.sin(Pt*h)+bt*Math.cos(Pt*h)],Mt=$t[0],Ot=$t[1],jt=[Math.cos(Bt*h),Math.sin(Bt*h)],Yt=jt[0],Ut=jt[1],Nt=[Yt+bt*Math.sin(Bt*h),Ut-bt*Math.cos(Bt*h)],It=Nt[0],Ht=Nt[1];Et[St]={relative:ot.relative,type:_.CURVE_TO};var Gt=function(Kt,rn){var sn=i([Kt*ot.rX,rn*ot.rY],ot.xRot),cn=sn[0],un=sn[1];return[ot.cX+cn,ot.cY+un]};ut=Gt(Mt,Ot),Et[St].x1=ut[0],Et[St].y1=ut[1],ht=Gt(It,Ht),Et[St].x2=ht[0],Et[St].y2=ht[1],ft=Gt(Yt,Ut),Et[St].x=ft[0],Et[St].y=ft[1],ot.relative&&(Et[St].x1-=Ct,Et[St].y1-=kt,Et[St].x2-=Ct,Et[St].y2-=kt,Et[St].x-=Ct,Et[St].y-=kt),Ct=(gt=[Et[St].x,Et[St].y])[0],kt=gt[1]}return Et}(rt,rt.relative?0:it,rt.relative?0:st):rt})},$.ANNOTATE_ARCS=function(){return et(function(rt,it,st){return rt.relative&&(it=0,st=0),_.ARC===rt.type&&o(rt,it,st),rt})},$.CLONE=nt,$.CALCULATE_BOUNDS=function(){var rt=function(lt){var ut={};for(var ht in lt)ut[ht]=lt[ht];return ut},it=g(),st=_e(),ot=j(),at=et(function(lt,ut,ht){var ft=ot(st(it(rt(lt))));function gt(Ht){Ht>at.maxX&&(at.maxX=Ht),Ht<at.minX&&(at.minX=Ht)}function dt(Ht){Ht>at.maxY&&(at.maxY=Ht),Ht<at.minY&&(at.minY=Ht)}if(ft.type&_.DRAWING_COMMANDS&&(gt(ut),dt(ht)),ft.type&_.HORIZ_LINE_TO&&gt(ft.x),ft.type&_.VERT_LINE_TO&&dt(ft.y),ft.type&_.LINE_TO&&(gt(ft.x),dt(ft.y)),ft.type&_.CURVE_TO){gt(ft.x),dt(ft.y);for(var mt=0,yt=p(ut,ft.x1,ft.x2,ft.x);mt<yt.length;mt++)0<(It=yt[mt])&&1>It&&gt(m$1(ut,ft.x1,ft.x2,ft.x,It));for(var Et=0,Ct=p(ht,ft.y1,ft.y2,ft.y);Et<Ct.length;Et++)0<(It=Ct[Et])&&1>It&&dt(m$1(ht,ft.y1,ft.y2,ft.y,It))}if(ft.type&_.ARC){gt(ft.x),dt(ft.y),o(ft,ut,ht);for(var kt=ft.xRot/180*Math.PI,St=Math.cos(kt)*ft.rX,Pt=Math.sin(kt)*ft.rX,Bt=-Math.sin(kt)*ft.rY,xt=Math.cos(kt)*ft.rY,bt=ft.phi1<ft.phi2?[ft.phi1,ft.phi2]:-180>ft.phi2?[ft.phi2+360,ft.phi1+360]:[ft.phi2,ft.phi1],$t=bt[0],Mt=bt[1],Ot=function(Ht){var Gt=Ht[0],Kt=Ht[1],rn=180*Math.atan2(Kt,Gt)/Math.PI;return rn<$t?rn+360:rn},jt=0,Yt=s(Bt,-St,0).map(Ot);jt<Yt.length;jt++)(It=Yt[jt])>$t&&It<Mt&&gt(y(ft.cX,St,Bt,It));for(var Ut=0,Nt=s(xt,-Pt,0).map(Ot);Ut<Nt.length;Ut++){var It;(It=Nt[Ut])>$t&&It<Mt&&dt(y(ft.cY,Pt,xt,It))}}return lt});return at.minX=1/0,at.maxX=-1/0,at.minY=1/0,at.maxY=-1/0,at}})(u||(u={}));var O,l=function(){function $(){}return $.prototype.round=function(g){return this.transform(u.ROUND(g))},$.prototype.toAbs=function(){return this.transform(u.TO_ABS())},$.prototype.toRel=function(){return this.transform(u.TO_REL())},$.prototype.normalizeHVZ=function(g,j,_e){return this.transform(u.NORMALIZE_HVZ(g,j,_e))},$.prototype.normalizeST=function(){return this.transform(u.NORMALIZE_ST())},$.prototype.qtToC=function(){return this.transform(u.QT_TO_C())},$.prototype.aToC=function(){return this.transform(u.A_TO_C())},$.prototype.sanitize=function(g){return this.transform(u.SANITIZE(g))},$.prototype.translate=function(g,j){return this.transform(u.TRANSLATE(g,j))},$.prototype.scale=function(g,j){return this.transform(u.SCALE(g,j))},$.prototype.rotate=function(g,j,_e){return this.transform(u.ROTATE(g,j,_e))},$.prototype.matrix=function(g,j,_e,et,tt,nt){return this.transform(u.MATRIX(g,j,_e,et,tt,nt))},$.prototype.skewX=function(g){return this.transform(u.SKEW_X(g))},$.prototype.skewY=function(g){return this.transform(u.SKEW_Y(g))},$.prototype.xSymmetry=function(g){return this.transform(u.X_AXIS_SYMMETRY(g))},$.prototype.ySymmetry=function(g){return this.transform(u.Y_AXIS_SYMMETRY(g))},$.prototype.annotateArcs=function(){return this.transform(u.ANNOTATE_ARCS())},$}(),T=function($){return $===" "||$==="	"||$==="\r"||$===`
`},v=function($){return"0".charCodeAt(0)<=$.charCodeAt(0)&&$.charCodeAt(0)<="9".charCodeAt(0)},f=function($){function g(){var j=$.call(this)||this;return j.curNumber="",j.curCommandType=-1,j.curCommandRelative=!1,j.canParseCommandOrComma=!0,j.curNumberHasExp=!1,j.curNumberHasExpDigits=!1,j.curNumberHasDecimal=!1,j.curArgs=[],j}return r(g,$),g.prototype.finish=function(j){if(j===void 0&&(j=[]),this.parse(" ",j),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return j},g.prototype.parse=function(j,_e){var et=this;_e===void 0&&(_e=[]);for(var tt=function(at){_e.push(at),et.curArgs.length=0,et.canParseCommandOrComma=!0},nt=0;nt<j.length;nt++){var rt=j[nt],it=!(this.curCommandType!==_.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),st=v(rt)&&(this.curNumber==="0"&&rt==="0"||it);if(!v(rt)||st)if(rt!=="e"&&rt!=="E")if(rt!=="-"&&rt!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(rt!=="."||this.curNumberHasExp||this.curNumberHasDecimal||it){if(this.curNumber&&this.curCommandType!==-1){var ot=Number(this.curNumber);if(isNaN(ot))throw new SyntaxError("Invalid number ending at "+nt);if(this.curCommandType===_.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>ot)throw new SyntaxError('Expected positive number, got "'+ot+'" at index "'+nt+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+nt+'"')}this.curArgs.push(ot),this.curArgs.length===N[this.curCommandType]&&(_.HORIZ_LINE_TO===this.curCommandType?tt({type:_.HORIZ_LINE_TO,relative:this.curCommandRelative,x:ot}):_.VERT_LINE_TO===this.curCommandType?tt({type:_.VERT_LINE_TO,relative:this.curCommandRelative,y:ot}):this.curCommandType===_.MOVE_TO||this.curCommandType===_.LINE_TO||this.curCommandType===_.SMOOTH_QUAD_TO?(tt({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),_.MOVE_TO===this.curCommandType&&(this.curCommandType=_.LINE_TO)):this.curCommandType===_.CURVE_TO?tt({type:_.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===_.SMOOTH_CURVE_TO?tt({type:_.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.QUAD_TO?tt({type:_.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===_.ARC&&tt({type:_.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!T(rt))if(rt===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(rt!=="+"&&rt!=="-"&&rt!==".")if(st)this.curNumber=rt,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+nt+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+rt+'" at index '+nt+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,rt!=="z"&&rt!=="Z")if(rt==="h"||rt==="H")this.curCommandType=_.HORIZ_LINE_TO,this.curCommandRelative=rt==="h";else if(rt==="v"||rt==="V")this.curCommandType=_.VERT_LINE_TO,this.curCommandRelative=rt==="v";else if(rt==="m"||rt==="M")this.curCommandType=_.MOVE_TO,this.curCommandRelative=rt==="m";else if(rt==="l"||rt==="L")this.curCommandType=_.LINE_TO,this.curCommandRelative=rt==="l";else if(rt==="c"||rt==="C")this.curCommandType=_.CURVE_TO,this.curCommandRelative=rt==="c";else if(rt==="s"||rt==="S")this.curCommandType=_.SMOOTH_CURVE_TO,this.curCommandRelative=rt==="s";else if(rt==="q"||rt==="Q")this.curCommandType=_.QUAD_TO,this.curCommandRelative=rt==="q";else if(rt==="t"||rt==="T")this.curCommandType=_.SMOOTH_QUAD_TO,this.curCommandRelative=rt==="t";else{if(rt!=="a"&&rt!=="A")throw new SyntaxError('Unexpected character "'+rt+'" at index '+nt+".");this.curCommandType=_.ARC,this.curCommandRelative=rt==="a"}else _e.push({type:_.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=rt,this.curNumberHasDecimal=rt==="."}else this.curNumber+=rt,this.curNumberHasDecimal=!0;else this.curNumber+=rt;else this.curNumber+=rt,this.curNumberHasExp=!0;else this.curNumber+=rt,this.curNumberHasExpDigits=this.curNumberHasExp}return _e},g.prototype.transform=function(j){return Object.create(this,{parse:{value:function(_e,et){et===void 0&&(et=[]);for(var tt=0,nt=Object.getPrototypeOf(this).parse.call(this,_e);tt<nt.length;tt++){var rt=nt[tt],it=j(rt);Array.isArray(it)?et.push.apply(et,it):et.push(it)}return et}}})},g}(l),_=function($){function g(j){var _e=$.call(this)||this;return _e.commands=typeof j=="string"?g.parse(j):j,_e}return r(g,$),g.prototype.encode=function(){return g.encode(this.commands)},g.prototype.getBounds=function(){var j=u.CALCULATE_BOUNDS();return this.transform(j),j},g.prototype.transform=function(j){for(var _e=[],et=0,tt=this.commands;et<tt.length;et++){var nt=j(tt[et]);Array.isArray(nt)?_e.push.apply(_e,nt):_e.push(nt)}return this.commands=_e,this},g.encode=function(j){return e(j)},g.parse=function(j){var _e=new f,et=[];return _e.parse(j,et),_e.finish(et),et},g.CLOSE_PATH=1,g.MOVE_TO=2,g.HORIZ_LINE_TO=4,g.VERT_LINE_TO=8,g.LINE_TO=16,g.CURVE_TO=32,g.SMOOTH_CURVE_TO=64,g.QUAD_TO=128,g.SMOOTH_QUAD_TO=256,g.ARC=512,g.LINE_COMMANDS=g.LINE_TO|g.HORIZ_LINE_TO|g.VERT_LINE_TO,g.DRAWING_COMMANDS=g.HORIZ_LINE_TO|g.VERT_LINE_TO|g.LINE_TO|g.CURVE_TO|g.SMOOTH_CURVE_TO|g.QUAD_TO|g.SMOOTH_QUAD_TO|g.ARC,g}(l),N=((O={})[_.MOVE_TO]=2,O[_.LINE_TO]=2,O[_.HORIZ_LINE_TO]=1,O[_.VERT_LINE_TO]=1,O[_.CLOSE_PATH]=0,O[_.QUAD_TO]=4,O[_.SMOOTH_QUAD_TO]=2,O[_.CURVE_TO]=6,O[_.SMOOTH_CURVE_TO]=4,O[_.ARC]=7,O);function _typeof($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(g){return typeof g}:_typeof=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},_typeof($)}function _classCallCheck($,g){if(!($ instanceof g))throw new TypeError("Cannot call a class as a function")}var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shgTable=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function getImageDataFromCanvas($,g,j,_e,et){if(typeof $=="string"&&($=document.getElementById($)),!$||_typeof($)!=="object"||!("getContext"in $))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var tt=$.getContext("2d");try{return tt.getImageData(g,j,_e,et)}catch(nt){throw new Error("unable to access image data: "+nt)}}function processCanvasRGBA($,g,j,_e,et,tt){if(!(isNaN(tt)||tt<1)){tt|=0;var nt=getImageDataFromCanvas($,g,j,_e,et);nt=processImageDataRGBA(nt,g,j,_e,et,tt),$.getContext("2d").putImageData(nt,g,j)}}function processImageDataRGBA($,g,j,_e,et,tt){for(var nt=$.data,rt=2*tt+1,it=_e-1,st=et-1,ot=tt+1,at=ot*(ot+1)/2,lt=new BlurStack,ut=lt,ht,ft=1;ft<rt;ft++)ut=ut.next=new BlurStack,ft===ot&&(ht=ut);ut.next=lt;for(var gt=null,dt=null,mt=0,yt=0,Et=mulTable[tt],Ct=shgTable[tt],kt=0;kt<et;kt++){ut=lt;for(var St=nt[yt],Pt=nt[yt+1],Bt=nt[yt+2],xt=nt[yt+3],bt=0;bt<ot;bt++)ut.r=St,ut.g=Pt,ut.b=Bt,ut.a=xt,ut=ut.next;for(var $t=0,Mt=0,Ot=0,jt=0,Yt=ot*St,Ut=ot*Pt,Nt=ot*Bt,It=ot*xt,Ht=at*St,Gt=at*Pt,Kt=at*Bt,rn=at*xt,sn=1;sn<ot;sn++){var cn=yt+((it<sn?it:sn)<<2),un=nt[cn],En=nt[cn+1],Bn=nt[cn+2],Un=nt[cn+3],Tn=ot-sn;Ht+=(ut.r=un)*Tn,Gt+=(ut.g=En)*Tn,Kt+=(ut.b=Bn)*Tn,rn+=(ut.a=Un)*Tn,$t+=un,Mt+=En,Ot+=Bn,jt+=Un,ut=ut.next}gt=lt,dt=ht;for(var Ln=0;Ln<_e;Ln++){var Nn=rn*Et>>Ct;if(nt[yt+3]=Nn,Nn!==0){var _n=255/Nn;nt[yt]=(Ht*Et>>Ct)*_n,nt[yt+1]=(Gt*Et>>Ct)*_n,nt[yt+2]=(Kt*Et>>Ct)*_n}else nt[yt]=nt[yt+1]=nt[yt+2]=0;Ht-=Yt,Gt-=Ut,Kt-=Nt,rn-=It,Yt-=gt.r,Ut-=gt.g,Nt-=gt.b,It-=gt.a;var wn=Ln+tt+1;wn=mt+(wn<it?wn:it)<<2,$t+=gt.r=nt[wn],Mt+=gt.g=nt[wn+1],Ot+=gt.b=nt[wn+2],jt+=gt.a=nt[wn+3],Ht+=$t,Gt+=Mt,Kt+=Ot,rn+=jt,gt=gt.next;var Vn=dt,zn=Vn.r,Wn=Vn.g,Mn=Vn.b,Fn=Vn.a;Yt+=zn,Ut+=Wn,Nt+=Mn,It+=Fn,$t-=zn,Mt-=Wn,Ot-=Mn,jt-=Fn,dt=dt.next,yt+=4}mt+=_e}for(var Sn=0;Sn<_e;Sn++){yt=Sn<<2;var An=nt[yt],bn=nt[yt+1],Dn=nt[yt+2],dn=nt[yt+3],_t=ot*An,Ft=ot*bn,Vt=ot*Dn,Wt=ot*dn,zt=at*An,Zt=at*bn,Qt=at*Dn,en=at*dn;ut=lt;for(var Xt=0;Xt<ot;Xt++)ut.r=An,ut.g=bn,ut.b=Dn,ut.a=dn,ut=ut.next;for(var hn=_e,tn=0,on=0,gn=0,fn=0,yn=1;yn<=tt;yn++){yt=hn+Sn<<2;var kn=ot-yn;zt+=(ut.r=An=nt[yt])*kn,Zt+=(ut.g=bn=nt[yt+1])*kn,Qt+=(ut.b=Dn=nt[yt+2])*kn,en+=(ut.a=dn=nt[yt+3])*kn,fn+=An,tn+=bn,on+=Dn,gn+=dn,ut=ut.next,yn<st&&(hn+=_e)}yt=Sn,gt=lt,dt=ht;for(var $n=0;$n<et;$n++){var ln=yt<<2;nt[ln+3]=dn=en*Et>>Ct,dn>0?(dn=255/dn,nt[ln]=(zt*Et>>Ct)*dn,nt[ln+1]=(Zt*Et>>Ct)*dn,nt[ln+2]=(Qt*Et>>Ct)*dn):nt[ln]=nt[ln+1]=nt[ln+2]=0,zt-=_t,Zt-=Ft,Qt-=Vt,en-=Wt,_t-=gt.r,Ft-=gt.g,Vt-=gt.b,Wt-=gt.a,ln=Sn+((ln=$n+ot)<st?ln:st)*_e<<2,zt+=fn+=gt.r=nt[ln],Zt+=tn+=gt.g=nt[ln+1],Qt+=on+=gt.b=nt[ln+2],en+=gn+=gt.a=nt[ln+3],gt=gt.next,_t+=An=dt.r,Ft+=bn=dt.g,Vt+=Dn=dt.b,Wt+=dn=dt.a,fn-=An,tn-=bn,on-=Dn,gn-=dn,dt=dt.next,yt+=_e}}return $}var BlurStack=function $(){_classCallCheck(this,$),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function offscreen(){let{DOMParser:$}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const g={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:$,createCanvas(j,_e){return new OffscreenCanvas(j,_e)},async createImage(j){const et=await(await fetch(j)).blob();return await createImageBitmap(et)}};return(typeof globalThis.DOMParser<"u"||typeof $>"u")&&Reflect.deleteProperty(g,"DOMParser"),g}function node($){let{DOMParser:g,canvas:j,fetch:_e}=$;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:g,fetch:_e,createCanvas:j.createCanvas,createImage:j.loadImage}}var index=Object.freeze({__proto__:null,offscreen,node});function compressSpaces($){return $.replace(/(?!\u3000)\s+/gm," ")}function trimLeft($){return $.replace(/^[\n \t]+/,"")}function trimRight($){return $.replace(/[\n \t]+$/,"")}function toNumbers($){const g=$.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return g?g.map(parseFloat):[]}function toMatrixValue($){const g=toNumbers($);return[g[0]||0,g[1]||0,g[2]||0,g[3]||0,g[4]||0,g[5]||0]}const allUppercase=/^[A-Z-]+$/;function normalizeAttributeName($){return allUppercase.test($)?$.toLowerCase():$}function parseExternalUrl($){const g=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec($);return g&&(g[2]||g[3]||g[4])||""}function normalizeColor($){if(!$.startsWith("rgb"))return $;let g=3;return $.replace(/\d+(\.\d+)?/g,(_e,et)=>g--&&et?String(Math.round(parseFloat(_e))):_e)}const attributeRegex=/(\[[^\]]+\])/g,idRegex=/(#[^\s+>~.[:]+)/g,classRegex=/(\.[^\s+>~.[:]+)/g,pseudoElementRegex=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,pseudoClassWithBracketsRegex=/(:[\w-]+\([^)]*\))/gi,pseudoClassRegex=/(:[^\s+>~.[:]+)/g,elementRegex=/([^\s+>~.[:]+)/g;function findSelectorMatch($,g){const j=g.exec($);return j?[$.replace(g," "),j.length]:[$,0]}function getSelectorSpecificity($){const g=[0,0,0];let j=$.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),_e=0;return[j,_e]=findSelectorMatch(j,attributeRegex),g[1]+=_e,[j,_e]=findSelectorMatch(j,idRegex),g[0]+=_e,[j,_e]=findSelectorMatch(j,classRegex),g[1]+=_e,[j,_e]=findSelectorMatch(j,pseudoElementRegex),g[2]+=_e,[j,_e]=findSelectorMatch(j,pseudoClassWithBracketsRegex),g[1]+=_e,[j,_e]=findSelectorMatch(j,pseudoClassRegex),g[1]+=_e,j=j.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[j,_e]=findSelectorMatch(j,elementRegex),g[2]+=_e,g.join("")}const PSEUDO_ZERO=1e-8;function vectorMagnitude($){return Math.sqrt(Math.pow($[0],2)+Math.pow($[1],2))}function vectorsRatio($,g){return($[0]*g[0]+$[1]*g[1])/(vectorMagnitude($)*vectorMagnitude(g))}function vectorsAngle($,g){return($[0]*g[1]<$[1]*g[0]?-1:1)*Math.acos(vectorsRatio($,g))}function CB1($){return $*$*$}function CB2($){return 3*$*$*(1-$)}function CB3($){return 3*$*(1-$)*(1-$)}function CB4($){return(1-$)*(1-$)*(1-$)}function QB1($){return $*$}function QB2($){return 2*$*(1-$)}function QB3($){return(1-$)*(1-$)}class Property{static empty(g){return new Property(g,"EMPTY","")}split(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:j,name:_e}=this;return compressSpaces(this.getString()).trim().split(g).map(et=>new Property(j,_e,et))}hasValue(g){const j=this.value;return j!==null&&j!==""&&(g||j!==0)&&typeof j<"u"}isString(g){const{value:j}=this,_e=typeof j=="string";return!_e||!g?_e:g.test(j)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const g=this.getString();switch(!0){case g.endsWith("px"):case/^[0-9]+$/.test(g):return!0;default:return!1}}setValue(g){return this.value=g,this}getValue(g){return typeof g>"u"||this.hasValue()?this.value:g}getNumber(g){if(!this.hasValue())return typeof g>"u"?0:parseFloat(g);const{value:j}=this;let _e=parseFloat(j);return this.isString(/%$/)&&(_e/=100),_e}getString(g){return typeof g>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(g)}getColor(g){let j=this.getString(g);return this.isNormalizedColor||(this.isNormalizedColor=!0,j=normalizeColor(j),this.value=j),j}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[_e,et]=typeof g=="boolean"?[void 0,g]:[g],{viewPort:tt}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(tt.computeSize("x"),tt.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(tt.computeSize("x"),tt.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*tt.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*tt.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&et):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*tt.computeSize(_e);default:{const nt=this.getNumber();return j&&nt<1?nt*tt.computeSize(_e):nt}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const g=this.getString(),j=/#([^)'"]+)/.exec(g),_e=(j==null?void 0:j[1])||g;return this.document.definitions[_e]}getFillStyleDefinition(g,j){let _e=this.getDefinition();if(!_e)return null;if(typeof _e.createGradient=="function"&&"getBoundingBox"in g)return _e.createGradient(this.document.ctx,g,j);if(typeof _e.createPattern=="function"){if(_e.getHrefAttribute().hasValue()){const et=_e.getAttribute("patternTransform");_e=_e.getHrefAttribute().getDefinition(),_e&&et.hasValue()&&_e.getAttribute("patternTransform",!0).setValue(et.value)}if(_e)return _e.createPattern(this.document.ctx,g,j)}return null}getTextBaseline(){if(!this.hasValue())return null;const g=this.getString();return Property.textBaselineMapping[g]||null}addOpacity(g){let j=this.getColor();const _e=j.length;let et=0;for(let tt=0;tt<_e&&(j[tt]===","&&et++,et!==3);tt++);if(g.hasValue()&&this.isString()&&et!==3){const tt=new RGBColor$1(j);tt.ok&&(tt.alpha=g.getNumber(),j=tt.toRGBA())}return new Property(this.document,this.name,j)}constructor(g,j,_e){this.document=g,this.name=j,this.value=_e,this.isNormalizedColor=!1}}Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ViewPort{clear(){this.viewPorts=[]}setCurrent(g,j){this.viewPorts.push({width:g,height:j})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[g]=this.viewPorts;return g||getDefault()}getCurrent(){const{viewPorts:g}=this,j=g[g.length-1];return j||getDefault()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(g){return typeof g=="number"?g:g==="x"?this.width:g==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}ViewPort.DEFAULT_VIEWPORT_WIDTH=800;ViewPort.DEFAULT_VIEWPORT_HEIGHT=600;function getDefault(){return{width:ViewPort.DEFAULT_VIEWPORT_WIDTH,height:ViewPort.DEFAULT_VIEWPORT_HEIGHT}}class Point{static parse(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[_e=j,et=j]=toNumbers(g);return new Point(_e,et)}static parseScale(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[_e=j,et=_e]=toNumbers(g);return new Point(_e,et)}static parsePath(g){const j=toNumbers(g),_e=j.length,et=[];for(let tt=0;tt<_e;tt+=2)et.push(new Point(j[tt],j[tt+1]));return et}angleTo(g){return Math.atan2(g.y-this.y,g.x-this.x)}applyTransform(g){const{x:j,y:_e}=this,et=j*g[0]+_e*g[2]+g[4],tt=j*g[1]+_e*g[3]+g[5];this.x=et,this.y=tt}constructor(g,j){this.x=g,this.y=j}}class Mouse{isWorking(){return this.working}start(){if(this.working)return;const{screen:g,onClick:j,onMouseMove:_e}=this,et=g.ctx.canvas;et.onclick=j,et.onmousemove=_e,this.working=!0}stop(){if(!this.working)return;const g=this.screen.ctx.canvas;this.working=!1,g.onclick=null,g.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:g,events:j,eventElements:_e}=this,{style:et}=g.ctx.canvas;let tt;et&&(et.cursor=""),j.forEach((nt,rt)=>{let{run:it}=nt;for(tt=_e[rt];tt;)it(tt),tt=tt.parent}),this.events=[],this.eventElements=[]}checkPath(g,j){if(!this.working||!j)return;const{events:_e,eventElements:et}=this;_e.forEach((tt,nt)=>{let{x:rt,y:it}=tt;!et[nt]&&j.isPointInPath&&j.isPointInPath(rt,it)&&(et[nt]=g)})}checkBoundingBox(g,j){if(!this.working||!j)return;const{events:_e,eventElements:et}=this;_e.forEach((tt,nt)=>{let{x:rt,y:it}=tt;!et[nt]&&j.isPointInBox(rt,it)&&(et[nt]=g)})}mapXY(g,j){const{window:_e,ctx:et}=this.screen,tt=new Point(g,j);let nt=et.canvas;for(;nt;)tt.x-=nt.offsetLeft,tt.y-=nt.offsetTop,nt=nt.offsetParent;return _e!=null&&_e.scrollX&&(tt.x+=_e.scrollX),_e!=null&&_e.scrollY&&(tt.y+=_e.scrollY),tt}onClick(g){const{x:j,y:_e}=this.mapXY(g.clientX,g.clientY);this.events.push({type:"onclick",x:j,y:_e,run(et){et.onClick&&et.onClick()}})}onMouseMove(g){const{x:j,y:_e}=this.mapXY(g.clientX,g.clientY);this.events.push({type:"onmousemove",x:j,y:_e,run(et){et.onMouseMove&&et.onMouseMove()}})}constructor(g){this.screen=g,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const defaultWindow=typeof window<"u"?window:null,defaultFetch$1=typeof fetch<"u"?fetch.bind(void 0):void 0;class Screen{wait(g){this.waits.push(g)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const g=this.waits.every(j=>j());return g&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=g,g}setDefaults(g){g.strokeStyle="rgba(0,0,0,0)",g.lineCap="butt",g.lineJoin="miter",g.miterLimit=4}setViewBox(g){let{document:j,ctx:_e,aspectRatio:et,width:tt,desiredWidth:nt,height:rt,desiredHeight:it,minX:st=0,minY:ot=0,refX:at,refY:lt,clip:ut=!1,clipX:ht=0,clipY:ft=0}=g;const gt=compressSpaces(et).replace(/^defer\s/,""),[dt,mt]=gt.split(" "),yt=dt||"xMidYMid",Et=mt||"meet",Ct=tt/nt,kt=rt/it,St=Math.min(Ct,kt),Pt=Math.max(Ct,kt);let Bt=nt,xt=it;Et==="meet"&&(Bt*=St,xt*=St),Et==="slice"&&(Bt*=Pt,xt*=Pt);const bt=new Property(j,"refX",at),$t=new Property(j,"refY",lt),Mt=bt.hasValue()&&$t.hasValue();if(Mt&&_e.translate(-St*bt.getPixels("x"),-St*$t.getPixels("y")),ut){const Ot=St*ht,jt=St*ft;_e.beginPath(),_e.moveTo(Ot,jt),_e.lineTo(tt,jt),_e.lineTo(tt,rt),_e.lineTo(Ot,rt),_e.closePath(),_e.clip()}if(!Mt){const Ot=Et==="meet"&&St===kt,jt=Et==="slice"&&Pt===kt,Yt=Et==="meet"&&St===Ct,Ut=Et==="slice"&&Pt===Ct;yt.startsWith("xMid")&&(Ot||jt)&&_e.translate(tt/2-Bt/2,0),yt.endsWith("YMid")&&(Yt||Ut)&&_e.translate(0,rt/2-xt/2),yt.startsWith("xMax")&&(Ot||jt)&&_e.translate(tt-Bt,0),yt.endsWith("YMax")&&(Yt||Ut)&&_e.translate(0,rt-xt)}switch(!0){case yt==="none":_e.scale(Ct,kt);break;case Et==="meet":_e.scale(St,St);break;case Et==="slice":_e.scale(Pt,Pt);break}_e.translate(-st,-ot)}start(g){let{enableRedraw:j=!1,ignoreMouse:_e=!1,ignoreAnimation:et=!1,ignoreDimensions:tt=!1,ignoreClear:nt=!1,forceRedraw:rt,scaleWidth:it,scaleHeight:st,offsetX:ot,offsetY:at}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:lt}=this,ut=1e3/Screen.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=ut,this.readyPromise=new Promise(mt=>{this.resolveReady=mt}),this.isReady()&&this.render(g,tt,nt,it,st,ot,at),!j)return;let ht=Date.now(),ft=ht,gt=0;const dt=()=>{ht=Date.now(),gt=ht-ft,gt>=ut&&(ft=ht-gt%ut,this.shouldUpdate(et,rt)&&(this.render(g,tt,nt,it,st,ot,at),lt.runEvents())),this.intervalId=requestAnimationFrame(dt)};_e||lt.start(),this.intervalId=requestAnimationFrame(dt)}stop(){this.intervalId&&(requestAnimationFrame.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(g,j){if(!g){const{frameDuration:_e}=this;if(this.animations.reduce((tt,nt)=>nt.update(_e)||tt,!1))return!0}return!!(typeof j=="function"&&j()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(g,j,_e,et,tt,nt,rt){const{viewPort:it,ctx:st,isFirstRender:ot}=this,at=st.canvas;it.clear(),at.width&&at.height&&it.setCurrent(at.width,at.height);const lt=g.getStyle("width"),ut=g.getStyle("height");!j&&(ot||typeof et!="number"&&typeof tt!="number")&&(lt.hasValue()&&(at.width=lt.getPixels("x"),at.style&&(at.style.width="".concat(at.width,"px"))),ut.hasValue()&&(at.height=ut.getPixels("y"),at.style&&(at.style.height="".concat(at.height,"px"))));let ht=at.clientWidth||at.width,ft=at.clientHeight||at.height;if(j&&lt.hasValue()&&ut.hasValue()&&(ht=lt.getPixels("x"),ft=ut.getPixels("y")),it.setCurrent(ht,ft),typeof nt=="number"&&g.getAttribute("x",!0).setValue(nt),typeof rt=="number"&&g.getAttribute("y",!0).setValue(rt),typeof et=="number"||typeof tt=="number"){const gt=toNumbers(g.getAttribute("viewBox").getString());let dt=0,mt=0;if(typeof et=="number"){const Et=g.getStyle("width");Et.hasValue()?dt=Et.getPixels("x")/et:gt[2]&&!isNaN(gt[2])&&(dt=gt[2]/et)}if(typeof tt=="number"){const Et=g.getStyle("height");Et.hasValue()?mt=Et.getPixels("y")/tt:gt[3]&&!isNaN(gt[3])&&(mt=gt[3]/tt)}dt||(dt=mt),mt||(mt=dt),g.getAttribute("width",!0).setValue(et),g.getAttribute("height",!0).setValue(tt);const yt=g.getStyle("transform",!0,!0);yt.setValue("".concat(yt.getString()," scale(").concat(1/dt,", ").concat(1/mt,")"))}_e||st.clearRect(0,0,ht,ft),g.render(st),ot&&(this.isFirstRender=!1)}constructor(g,{fetch:j=defaultFetch$1,window:_e=defaultWindow}={}){if(this.ctx=g,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=_e,!j)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=j}}Screen.defaultWindow=defaultWindow;Screen.defaultFetch=defaultFetch$1;Screen.FRAMERATE=30;Screen.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch}=Screen,DefaultDOMParser=typeof DOMParser<"u"?DOMParser:void 0;class Parser{async parse(g){return g.startsWith("<")?this.parseFromString(g):this.load(g)}parseFromString(g){const j=new this.DOMParser;try{return this.checkDocument(j.parseFromString(g,"image/svg+xml"))}catch{return this.checkDocument(j.parseFromString(g,"text/xml"))}}checkDocument(g){const j=g.getElementsByTagName("parsererror")[0];if(j)throw new Error(j.textContent||"Unknown parse error");return g}async load(g){const _e=await(await this.fetch(g)).text();return this.parseFromString(_e)}constructor({fetch:g=defaultFetch,DOMParser:j=DefaultDOMParser}={}){if(!g)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!j)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=g,this.DOMParser=j}}class Translate{apply(g){const{x:j,y:_e}=this.point;g.translate(j||0,_e||0)}unapply(g){const{x:j,y:_e}=this.point;g.translate(-1*j||0,-1*_e||0)}applyToPoint(g){const{x:j,y:_e}=this.point;g.applyTransform([1,0,0,1,j||0,_e||0])}constructor(g,j){this.type="translate",this.point=Point.parse(j)}}class Rotate{apply(g){const{cx:j,cy:_e,originX:et,originY:tt,angle:nt}=this,rt=j+et.getPixels("x"),it=_e+tt.getPixels("y");g.translate(rt,it),g.rotate(nt.getRadians()),g.translate(-rt,-it)}unapply(g){const{cx:j,cy:_e,originX:et,originY:tt,angle:nt}=this,rt=j+et.getPixels("x"),it=_e+tt.getPixels("y");g.translate(rt,it),g.rotate(-1*nt.getRadians()),g.translate(-rt,-it)}applyToPoint(g){const{cx:j,cy:_e,angle:et}=this,tt=et.getRadians();g.applyTransform([1,0,0,1,j||0,_e||0]),g.applyTransform([Math.cos(tt),Math.sin(tt),-Math.sin(tt),Math.cos(tt),0,0]),g.applyTransform([1,0,0,1,-j||0,-_e||0])}constructor(g,j,_e){this.type="rotate";const et=toNumbers(j);this.angle=new Property(g,"angle",et[0]),this.originX=_e[0],this.originY=_e[1],this.cx=et[1]||0,this.cy=et[2]||0}}class Scale{apply(g){const{scale:{x:j,y:_e},originX:et,originY:tt}=this,nt=et.getPixels("x"),rt=tt.getPixels("y");g.translate(nt,rt),g.scale(j,_e||j),g.translate(-nt,-rt)}unapply(g){const{scale:{x:j,y:_e},originX:et,originY:tt}=this,nt=et.getPixels("x"),rt=tt.getPixels("y");g.translate(nt,rt),g.scale(1/j,1/_e||j),g.translate(-nt,-rt)}applyToPoint(g){const{x:j,y:_e}=this.scale;g.applyTransform([j||0,0,0,_e||0,0,0])}constructor(g,j,_e){this.type="scale";const et=Point.parseScale(j);(et.x===0||et.y===0)&&(et.x=PSEUDO_ZERO,et.y=PSEUDO_ZERO),this.scale=et,this.originX=_e[0],this.originY=_e[1]}}class Matrix{apply(g){const{originX:j,originY:_e,matrix:et}=this,tt=j.getPixels("x"),nt=_e.getPixels("y");g.translate(tt,nt),g.transform(et[0],et[1],et[2],et[3],et[4],et[5]),g.translate(-tt,-nt)}unapply(g){const{originX:j,originY:_e,matrix:et}=this,tt=et[0],nt=et[2],rt=et[4],it=et[1],st=et[3],ot=et[5],at=0,lt=0,ut=1,ht=1/(tt*(st*ut-ot*lt)-nt*(it*ut-ot*at)+rt*(it*lt-st*at)),ft=j.getPixels("x"),gt=_e.getPixels("y");g.translate(ft,gt),g.transform(ht*(st*ut-ot*lt),ht*(ot*at-it*ut),ht*(rt*lt-nt*ut),ht*(tt*ut-rt*at),ht*(nt*ot-rt*st),ht*(rt*it-tt*ot)),g.translate(-ft,-gt)}applyToPoint(g){g.applyTransform(this.matrix)}constructor(g,j,_e){this.type="matrix",this.matrix=toMatrixValue(j),this.originX=_e[0],this.originY=_e[1]}}class Skew extends Matrix{constructor(g,j,_e){super(g,j,_e),this.type="skew",this.angle=new Property(g,"angle",j)}}class SkewX extends Skew{constructor(g,j,_e){super(g,j,_e),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class SkewY extends Skew{constructor(g,j,_e){super(g,j,_e),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function parseTransforms($){return compressSpaces($).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform($){const[g="",j=""]=$.split("(");return[g.trim(),j.trim().replace(")","")]}class Transform{static fromElement(g,j){const _e=j.getStyle("transform",!1,!0);if(_e.hasValue()){const[et,tt=et]=j.getStyle("transform-origin",!1,!0).split();if(et&&tt){const nt=[et,tt];return new Transform(g,_e.getString(),nt)}}return null}apply(g){this.transforms.forEach(j=>j.apply(g))}unapply(g){this.transforms.forEach(j=>j.unapply(g))}applyToPoint(g){this.transforms.forEach(j=>j.applyToPoint(g))}constructor(g,j,_e){this.document=g,this.transforms=[],parseTransforms(j).forEach(tt=>{if(tt==="none")return;const[nt,rt]=parseTransform(tt),it=Transform.transformTypes[nt];it&&this.transforms.push(new it(this.document,rt,_e))})}}Transform.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};class Element{getAttribute(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const _e=this.attributes[g];if(!_e&&j){const et=new Property(this.document,g,"");return this.attributes[g]=et,et}return _e||Property.empty(this.document)}getHrefAttribute(){let g;for(const j in this.attributes)if(j==="href"||j.endsWith(":href")){g=this.attributes[j];break}return g||Property.empty(this.document)}getStyle(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const et=this.styles[g];if(et)return et;const tt=this.getAttribute(g);if(tt.hasValue())return this.styles[g]=tt,tt;if(!_e){const{parent:nt}=this;if(nt){const rt=nt.getStyle(g);if(rt.hasValue())return rt}}if(j){const nt=new Property(this.document,g,"");return this.styles[g]=nt,nt}return Property.empty(this.document)}render(g){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(g.save(),this.getStyle("mask").hasValue()){const j=this.getStyle("mask").getDefinition();j&&(this.applyEffects(g),j.apply(g,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const j=this.getStyle("filter").getDefinition();j&&(this.applyEffects(g),j.apply(g,this))}else this.setContext(g),this.renderChildren(g),this.clearContext(g);g.restore()}}setContext(g){}applyEffects(g){const j=Transform.fromElement(this.document,this);j&&j.apply(g);const _e=this.getStyle("clip-path",!1,!0);if(_e.hasValue()){const et=_e.getDefinition();et&&et.apply(g)}}clearContext(g){}renderChildren(g){this.children.forEach(j=>{j.render(g)})}addChild(g){const j=g instanceof Element?g:this.document.createElement(g);j.parent=this,Element.ignoreChildTypes.includes(j.type)||this.children.push(j)}matchesSelector(g){var j;const{node:_e}=this;if(typeof _e.matches=="function")return _e.matches(g);const et=(j=_e.getAttribute)===null||j===void 0?void 0:j.call(_e,"class");return!et||et===""?!1:et.split(" ").some(tt=>".".concat(tt)===g)}addStylesFromStyleDefinition(){const{styles:g,stylesSpecificity:j}=this.document;let _e;for(const et in g)if(!et.startsWith("@")&&this.matchesSelector(et)){const tt=g[et],nt=j[et];if(tt)for(const rt in tt){let it=this.stylesSpecificity[rt];typeof it>"u"&&(it="000"),nt&&nt>=it&&(_e=tt[rt],_e&&(this.styles[rt]=_e),this.stylesSpecificity[rt]=nt)}}}removeStyles(g,j){return j.reduce((et,tt)=>{const nt=g.getStyle(tt);if(!nt.hasValue())return et;const rt=nt.getString();return nt.setValue(""),[...et,[tt,rt]]},[])}restoreStyles(g,j){j.forEach(_e=>{let[et,tt]=_e;g.getStyle(et,!0).setValue(tt)})}isFirstChild(){var g;return((g=this.parent)===null||g===void 0?void 0:g.children.indexOf(this))===0}constructor(g,j,_e=!1){if(this.document=g,this.node=j,this.captureTextNodes=_e,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!j||j.nodeType!==1)return;Array.from(j.attributes).forEach(nt=>{const rt=normalizeAttributeName(nt.nodeName);this.attributes[rt]=new Property(g,rt,nt.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(rt=>rt.trim()).forEach(rt=>{if(!rt)return;const[it,st]=rt.split(":").map(ot=>ot.trim());it&&(this.styles[it]=new Property(g,it,st))});const{definitions:et}=g,tt=this.getAttribute("id");tt.hasValue()&&(et[tt.getString()]||(et[tt.getString()]=this)),Array.from(j.childNodes).forEach(nt=>{if(nt.nodeType===1)this.addChild(nt);else if(_e&&(nt.nodeType===3||nt.nodeType===4)){const rt=g.createTextNode(nt);rt.getText().length>0&&this.addChild(rt)}})}}Element.ignoreChildTypes=["title"];class UnknownElement extends Element{constructor(g,j,_e){super(g,j,_e)}}function wrapFontFamily($){const g=$.trim();return/^('|")/.test(g)?g:'"'.concat(g,'"')}function prepareFontFamily($){return typeof process>"u"?$:$.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle($){if(!$)return"";const g=$.trim().toLowerCase();switch(g){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return g;default:return/^oblique\s+(-|)\d+deg$/.test(g)?g:""}}function prepareFontWeight($){if(!$)return"";const g=$.trim().toLowerCase();switch(g){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return g;default:return/^[\d.]+$/.test(g)?g:""}}class Font{static parse(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",j=arguments.length>1?arguments[1]:void 0,_e="",et="",tt="",nt="",rt="";const it=compressSpaces(g).trim().split(" "),st={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return it.forEach(ot=>{switch(!0){case(!st.fontStyle&&Font.styles.includes(ot)):ot!=="inherit"&&(_e=ot),st.fontStyle=!0;break;case(!st.fontVariant&&Font.variants.includes(ot)):ot!=="inherit"&&(et=ot),st.fontStyle=!0,st.fontVariant=!0;break;case(!st.fontWeight&&Font.weights.includes(ot)):ot!=="inherit"&&(tt=ot),st.fontStyle=!0,st.fontVariant=!0,st.fontWeight=!0;break;case!st.fontSize:ot!=="inherit"&&(nt=ot.split("/")[0]||""),st.fontStyle=!0,st.fontVariant=!0,st.fontWeight=!0,st.fontSize=!0;break;default:ot!=="inherit"&&(rt+=ot)}}),new Font(_e,et,tt,nt,rt,j)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}constructor(g,j,_e,et,tt,nt){const rt=nt?typeof nt=="string"?Font.parse(nt):nt:{};this.fontFamily=tt||rt.fontFamily,this.fontSize=et||rt.fontSize,this.fontStyle=g||rt.fontStyle,this.fontWeight=_e||rt.fontWeight,this.fontVariant=j||rt.fontVariant}}Font.styles="normal|italic|oblique|inherit";Font.variants="normal|small-caps|inherit";Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class BoundingBox{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(g,j){typeof g<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=g,this.x2=g),g<this.x1&&(this.x1=g),g>this.x2&&(this.x2=g)),typeof j<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=j,this.y2=j),j<this.y1&&(this.y1=j),j>this.y2&&(this.y2=j))}addX(g){this.addPoint(g,0)}addY(g){this.addPoint(0,g)}addBoundingBox(g){if(!g)return;const{x1:j,y1:_e,x2:et,y2:tt}=g;this.addPoint(j,_e),this.addPoint(et,tt)}sumCubic(g,j,_e,et,tt){return Math.pow(1-g,3)*j+3*Math.pow(1-g,2)*g*_e+3*(1-g)*Math.pow(g,2)*et+Math.pow(g,3)*tt}bezierCurveAdd(g,j,_e,et,tt){const nt=6*j-12*_e+6*et,rt=-3*j+9*_e-9*et+3*tt,it=3*_e-3*j;if(rt===0){if(nt===0)return;const lt=-it/nt;0<lt&&lt<1&&(g?this.addX(this.sumCubic(lt,j,_e,et,tt)):this.addY(this.sumCubic(lt,j,_e,et,tt)));return}const st=Math.pow(nt,2)-4*it*rt;if(st<0)return;const ot=(-nt+Math.sqrt(st))/(2*rt);0<ot&&ot<1&&(g?this.addX(this.sumCubic(ot,j,_e,et,tt)):this.addY(this.sumCubic(ot,j,_e,et,tt)));const at=(-nt-Math.sqrt(st))/(2*rt);0<at&&at<1&&(g?this.addX(this.sumCubic(at,j,_e,et,tt)):this.addY(this.sumCubic(at,j,_e,et,tt)))}addBezierCurve(g,j,_e,et,tt,nt,rt,it){this.addPoint(g,j),this.addPoint(rt,it),this.bezierCurveAdd(!0,g,_e,tt,rt),this.bezierCurveAdd(!1,j,et,nt,it)}addQuadraticCurve(g,j,_e,et,tt,nt){const rt=g+.6666666666666666*(_e-g),it=j+2/3*(et-j),st=rt+1/3*(tt-g),ot=it+1/3*(nt-j);this.addBezierCurve(g,j,rt,st,it,ot,tt,nt)}isPointInBox(g,j){const{x1:_e,y1:et,x2:tt,y2:nt}=this;return _e<=g&&g<=tt&&et<=j&&j<=nt}constructor(g=Number.NaN,j=Number.NaN,_e=Number.NaN,et=Number.NaN){this.x1=g,this.y1=j,this.x2=_e,this.y2=et,this.addPoint(g,j),this.addPoint(_e,et)}}class RenderedElement extends Element{calculateOpacity(){let g=1,j=this;for(;j;){const _e=j.getStyle("opacity",!1,!0);_e.hasValue(!0)&&(g*=_e.getNumber()),j=j.parent}return g}setContext(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!j){const _e=this.getStyle("fill"),et=this.getStyle("fill-opacity"),tt=this.getStyle("stroke"),nt=this.getStyle("stroke-opacity");if(_e.isUrlDefinition()){const ut=_e.getFillStyleDefinition(this,et);ut&&(g.fillStyle=ut)}else if(_e.hasValue()){_e.getString()==="currentColor"&&_e.setValue(this.getStyle("color").getColor());const ut=_e.getColor();ut!=="inherit"&&(g.fillStyle=ut==="none"?"rgba(0,0,0,0)":ut)}if(et.hasValue()){const ut=new Property(this.document,"fill",g.fillStyle).addOpacity(et).getColor();g.fillStyle=ut}if(tt.isUrlDefinition()){const ut=tt.getFillStyleDefinition(this,nt);ut&&(g.strokeStyle=ut)}else if(tt.hasValue()){tt.getString()==="currentColor"&&tt.setValue(this.getStyle("color").getColor());const ut=tt.getString();ut!=="inherit"&&(g.strokeStyle=ut==="none"?"rgba(0,0,0,0)":ut)}if(nt.hasValue()){const ut=new Property(this.document,"stroke",g.strokeStyle).addOpacity(nt).getString();g.strokeStyle=ut}const rt=this.getStyle("stroke-width");if(rt.hasValue()){const ut=rt.getPixels();g.lineWidth=ut||PSEUDO_ZERO}const it=this.getStyle("stroke-linecap"),st=this.getStyle("stroke-linejoin"),ot=this.getStyle("stroke-miterlimit"),at=this.getStyle("stroke-dasharray"),lt=this.getStyle("stroke-dashoffset");if(it.hasValue()&&(g.lineCap=it.getString()),st.hasValue()&&(g.lineJoin=st.getString()),ot.hasValue()&&(g.miterLimit=ot.getNumber()),at.hasValue()&&at.getString()!=="none"){const ut=toNumbers(at.getString());typeof g.setLineDash<"u"?g.setLineDash(ut):typeof g.webkitLineDash<"u"?g.webkitLineDash=ut:typeof g.mozDash<"u"&&!(ut.length===1&&ut[0]===0)&&(g.mozDash=ut);const ht=lt.getPixels();typeof g.lineDashOffset<"u"?g.lineDashOffset=ht:typeof g.webkitLineDashOffset<"u"?g.webkitLineDashOffset=ht:typeof g.mozDashOffset<"u"&&(g.mozDashOffset=ht)}}if(this.modifiedEmSizeStack=!1,typeof g.font<"u"){const _e=this.getStyle("font"),et=this.getStyle("font-style"),tt=this.getStyle("font-variant"),nt=this.getStyle("font-weight"),rt=this.getStyle("font-size"),it=this.getStyle("font-family"),st=new Font(et.getString(),tt.getString(),nt.getString(),rt.hasValue()?"".concat(rt.getPixels(!0),"px"):"",it.getString(),Font.parse(_e.getString(),g.font));et.setValue(st.fontStyle),tt.setValue(st.fontVariant),nt.setValue(st.fontWeight),rt.setValue(st.fontSize),it.setValue(st.fontFamily),g.font=st.toString(),rt.isPixels()&&(this.document.emSize=rt.getPixels(),this.modifiedEmSizeStack=!0)}j||(this.applyEffects(g),g.globalAlpha=this.calculateOpacity())}clearContext(g){super.clearContext(g),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...g){super(...g),this.modifiedEmSizeStack=!1}}class TextElement extends RenderedElement{setContext(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(g,j);const _e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();_e&&(g.textBaseline=_e)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(g){if(this.type!=="text")return this.getTElementBoundingBox(g);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(g);let j=null;return this.children.forEach((_e,et)=>{const tt=this.getChildBoundingBox(g,this,this,et);j?j.addBoundingBox(tt):j=tt}),j}getFontSize(){const{document:g,parent:j}=this,_e=Font.parse(g.ctx.font).fontSize;return j.getStyle("font-size").getNumber(_e)}getTElementBoundingBox(g){const j=this.getFontSize();return new BoundingBox(this.x,this.y-j,this.x+this.measureText(g),this.y)}getGlyph(g,j,_e){const et=j[_e];let tt;if(g.isArabic){var nt;const rt=j.length,it=j[_e-1],st=j[_e+1];let ot="isolated";(_e===0||it===" ")&&_e<rt-1&&st!==" "&&(ot="terminal"),_e>0&&it!==" "&&_e<rt-1&&st!==" "&&(ot="medial"),_e>0&&it!==" "&&(_e===rt-1||st===" ")&&(ot="initial"),tt=((nt=g.arabicGlyphs[et])===null||nt===void 0?void 0:nt[ot])||g.glyphs[et]}else tt=g.glyphs[et];return tt||(tt=g.missingGlyph),tt}getText(){return""}getTextFromNode(g){const j=g||this.node,_e=Array.from(j.parentNode.childNodes),et=_e.indexOf(j),tt=_e.length-1;let nt=compressSpaces(j.textContent||"");return et===0&&(nt=trimLeft(nt)),et===tt&&(nt=trimRight(nt)),nt}renderChildren(g){if(this.type!=="text"){this.renderTElementChildren(g);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(g),this.children.forEach((_e,et)=>{this.renderChild(g,this,this,et)});const{mouse:j}=this.document.screen;j.isWorking()&&j.checkBoundingBox(this,this.getBoundingBox(g))}renderTElementChildren(g){const{document:j,parent:_e}=this,et=this.getText(),tt=_e.getStyle("font-family").getDefinition();if(tt){const{unitsPerEm:it}=tt.fontFace,st=Font.parse(j.ctx.font),ot=_e.getStyle("font-size").getNumber(st.fontSize),at=_e.getStyle("font-style").getString(st.fontStyle),lt=ot/it,ut=tt.isRTL?et.split("").reverse().join(""):et,ht=toNumbers(_e.getAttribute("dx").getString()),ft=ut.length;for(let gt=0;gt<ft;gt++){const dt=this.getGlyph(tt,ut,gt);g.translate(this.x,this.y),g.scale(lt,-lt);const mt=g.lineWidth;g.lineWidth=g.lineWidth*it/ot,at==="italic"&&g.transform(1,0,.4,1,0,0),dt.render(g),at==="italic"&&g.transform(1,0,-.4,1,0,0),g.lineWidth=mt,g.scale(1/lt,-1/lt),g.translate(-this.x,-this.y),this.x+=ot*(dt.horizAdvX||tt.horizAdvX)/it,typeof ht[gt]<"u"&&!isNaN(ht[gt])&&(this.x+=ht[gt])}return}const{x:nt,y:rt}=this;g.fillStyle&&g.fillText(et,nt,rt),g.strokeStyle&&g.strokeText(et,nt,rt)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const g=this.leafTexts[this.textChunkStart],j=g.getStyle("text-anchor").getString("start"),_e=!1;let et=0;j==="start"&&!_e||j==="end"&&_e?et=g.x-this.minX:j==="end"&&!_e||j==="start"&&_e?et=g.x-this.maxX:et=g.x-(this.minX+this.maxX)/2;for(let tt=this.textChunkStart;tt<this.leafTexts.length;tt++)this.leafTexts[tt].x+=et;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(g){this.children.forEach((j,_e)=>{this.adjustChildCoordinatesRecursiveCore(g,this,this,_e)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(g,j,_e,et){const tt=_e.children[et];tt.children.length>0?tt.children.forEach((nt,rt)=>{j.adjustChildCoordinatesRecursiveCore(g,j,tt,rt)}):this.adjustChildCoordinates(g,j,_e,et)}adjustChildCoordinates(g,j,_e,et){const tt=_e.children[et];if(typeof tt.measureText!="function")return tt;g.save(),tt.setContext(g,!0);const nt=tt.getAttribute("x"),rt=tt.getAttribute("y"),it=tt.getAttribute("dx"),st=tt.getAttribute("dy"),ot=tt.getStyle("font-family").getDefinition(),at=!!(ot!=null&&ot.isRTL);et===0&&(nt.hasValue()||nt.setValue(tt.getInheritedAttribute("x")),rt.hasValue()||rt.setValue(tt.getInheritedAttribute("y")),it.hasValue()||it.setValue(tt.getInheritedAttribute("dx")),st.hasValue()||st.setValue(tt.getInheritedAttribute("dy")));const lt=tt.measureText(g);return at&&(j.x-=lt),nt.hasValue()?(j.applyAnchoring(),tt.x=nt.getPixels("x"),it.hasValue()&&(tt.x+=it.getPixels("x"))):(it.hasValue()&&(j.x+=it.getPixels("x")),tt.x=j.x),j.x=tt.x,at||(j.x+=lt),rt.hasValue()?(tt.y=rt.getPixels("y"),st.hasValue()&&(tt.y+=st.getPixels("y"))):(st.hasValue()&&(j.y+=st.getPixels("y")),tt.y=j.y),j.y=tt.y,j.leafTexts.push(tt),j.minX=Math.min(j.minX,tt.x,tt.x+lt),j.maxX=Math.max(j.maxX,tt.x,tt.x+lt),tt.clearContext(g),g.restore(),tt}getChildBoundingBox(g,j,_e,et){const tt=_e.children[et];if(typeof tt.getBoundingBox!="function")return null;const nt=tt.getBoundingBox(g);return nt&&tt.children.forEach((rt,it)=>{const st=j.getChildBoundingBox(g,j,tt,it);nt.addBoundingBox(st)}),nt}renderChild(g,j,_e,et){const tt=_e.children[et];tt.render(g),tt.children.forEach((nt,rt)=>{j.renderChild(g,j,tt,rt)})}measureText(g){const{measureCache:j}=this;if(~j)return j;const _e=this.getText(),et=this.measureTargetText(g,_e);return this.measureCache=et,et}measureTargetText(g,j){if(!j.length)return 0;const{parent:_e}=this,et=_e.getStyle("font-family").getDefinition();if(et){const nt=this.getFontSize(),rt=et.isRTL?j.split("").reverse().join(""):j,it=toNumbers(_e.getAttribute("dx").getString()),st=rt.length;let ot=0;for(let at=0;at<st;at++){const lt=this.getGlyph(et,rt,at);ot+=(lt.horizAdvX||et.horizAdvX)*nt/et.fontFace.unitsPerEm,typeof it[at]<"u"&&!isNaN(it[at])&&(ot+=it[at])}return ot}if(!g.measureText)return j.length*10;g.save(),this.setContext(g,!0);const{width:tt}=g.measureText(j);return this.clearContext(g),g.restore(),tt}getInheritedAttribute(g){let j=this;for(;j instanceof TextElement&&j.isFirstChild()&&j.parent;){const _e=j.parent.getAttribute(g);if(_e.hasValue(!0))return _e.getString("0");j=j.parent}return null}constructor(g,j,_e){super(g,j,new.target===TextElement?!0:_e),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class TSpanElement extends TextElement{getText(){return this.text}constructor(g,j,_e){super(g,j,new.target===TSpanElement?!0:_e),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class TextNode extends TSpanElement{constructor(...g){super(...g),this.type="textNode"}}class PathParser extends _{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]}isEnd(){const{i:g,commands:j}=this;return g>=j.length-1}next(){const g=this.commands[++this.i];return this.previousCommand=this.command,this.command=g,g}getPoint(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const _e=new Point(this.command[g],this.command[j]);return this.makeAbsolute(_e)}getAsControlPoint(g,j){const _e=this.getPoint(g,j);return this.control=_e,_e}getAsCurrentPoint(g,j){const _e=this.getPoint(g,j);return this.current=_e,_e}getReflectedControlPoint(){const g=this.previousCommand.type;if(g!==_.CURVE_TO&&g!==_.SMOOTH_CURVE_TO&&g!==_.QUAD_TO&&g!==_.SMOOTH_QUAD_TO)return this.current;const{current:{x:j,y:_e},control:{x:et,y:tt}}=this;return new Point(2*j-et,2*_e-tt)}makeAbsolute(g){if(this.command.relative){const{x:j,y:_e}=this.current;g.x+=j,g.y+=_e}return g}addMarker(g,j,_e){const{points:et,angles:tt}=this;_e&&tt.length>0&&!tt[tt.length-1]&&(tt[tt.length-1]=et[et.length-1].angleTo(_e)),this.addMarkerAngle(g,j?j.angleTo(g):null)}addMarkerAngle(g,j){this.points.push(g),this.angles.push(j)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:g}=this,j=g.length;for(let _e=0;_e<j;_e++)if(!g[_e]){for(let et=_e+1;et<j;et++)if(g[et]){g[_e]=g[et];break}}return g}constructor(g){super(g.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new Point(0,0),this.start=new Point(0,0),this.current=new Point(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class PathElement extends RenderedElement{path(g){const{pathParser:j}=this,_e=new BoundingBox;for(j.reset(),g&&g.beginPath();!j.isEnd();)switch(j.next().type){case PathParser.MOVE_TO:this.pathM(g,_e);break;case PathParser.LINE_TO:this.pathL(g,_e);break;case PathParser.HORIZ_LINE_TO:this.pathH(g,_e);break;case PathParser.VERT_LINE_TO:this.pathV(g,_e);break;case PathParser.CURVE_TO:this.pathC(g,_e);break;case PathParser.SMOOTH_CURVE_TO:this.pathS(g,_e);break;case PathParser.QUAD_TO:this.pathQ(g,_e);break;case PathParser.SMOOTH_QUAD_TO:this.pathT(g,_e);break;case PathParser.ARC:this.pathA(g,_e);break;case PathParser.CLOSE_PATH:this.pathZ(g,_e);break}return _e}getBoundingBox(g){return this.path()}getMarkers(){const{pathParser:g}=this,j=g.getMarkerPoints(),_e=g.getMarkerAngles();return j.map((tt,nt)=>[tt,_e[nt]])}renderChildren(g){this.path(g),this.document.screen.mouse.checkPath(this,g);const j=this.getStyle("fill-rule");g.fillStyle!==""&&(j.getString("inherit")!=="inherit"?g.fill(j.getString()):g.fill()),g.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(g.save(),g.setTransform(1,0,0,1,0,0),g.stroke(),g.restore()):g.stroke());const _e=this.getMarkers();if(_e){const et=_e.length-1,tt=this.getStyle("marker-start"),nt=this.getStyle("marker-mid"),rt=this.getStyle("marker-end");if(tt.isUrlDefinition()){const it=tt.getDefinition(),[st,ot]=_e[0];it.render(g,st,ot)}if(nt.isUrlDefinition()){const it=nt.getDefinition();for(let st=1;st<et;st++){const[ot,at]=_e[st];it.render(g,ot,at)}}if(rt.isUrlDefinition()){const it=rt.getDefinition(),[st,ot]=_e[et];it.render(g,st,ot)}}}static pathM(g){const j=g.getAsCurrentPoint();return g.start=g.current,{point:j}}pathM(g,j){const{pathParser:_e}=this,{point:et}=PathElement.pathM(_e),{x:tt,y:nt}=et;_e.addMarker(et),j.addPoint(tt,nt),g&&g.moveTo(tt,nt)}static pathL(g){const{current:j}=g,_e=g.getAsCurrentPoint();return{current:j,point:_e}}pathL(g,j){const{pathParser:_e}=this,{current:et,point:tt}=PathElement.pathL(_e),{x:nt,y:rt}=tt;_e.addMarker(tt,et),j.addPoint(nt,rt),g&&g.lineTo(nt,rt)}static pathH(g){const{current:j,command:_e}=g,et=new Point((_e.relative?j.x:0)+_e.x,j.y);return g.current=et,{current:j,point:et}}pathH(g,j){const{pathParser:_e}=this,{current:et,point:tt}=PathElement.pathH(_e),{x:nt,y:rt}=tt;_e.addMarker(tt,et),j.addPoint(nt,rt),g&&g.lineTo(nt,rt)}static pathV(g){const{current:j,command:_e}=g,et=new Point(j.x,(_e.relative?j.y:0)+_e.y);return g.current=et,{current:j,point:et}}pathV(g,j){const{pathParser:_e}=this,{current:et,point:tt}=PathElement.pathV(_e),{x:nt,y:rt}=tt;_e.addMarker(tt,et),j.addPoint(nt,rt),g&&g.lineTo(nt,rt)}static pathC(g){const{current:j}=g,_e=g.getPoint("x1","y1"),et=g.getAsControlPoint("x2","y2"),tt=g.getAsCurrentPoint();return{current:j,point:_e,controlPoint:et,currentPoint:tt}}pathC(g,j){const{pathParser:_e}=this,{current:et,point:tt,controlPoint:nt,currentPoint:rt}=PathElement.pathC(_e);_e.addMarker(rt,nt,tt),j.addBezierCurve(et.x,et.y,tt.x,tt.y,nt.x,nt.y,rt.x,rt.y),g&&g.bezierCurveTo(tt.x,tt.y,nt.x,nt.y,rt.x,rt.y)}static pathS(g){const{current:j}=g,_e=g.getReflectedControlPoint(),et=g.getAsControlPoint("x2","y2"),tt=g.getAsCurrentPoint();return{current:j,point:_e,controlPoint:et,currentPoint:tt}}pathS(g,j){const{pathParser:_e}=this,{current:et,point:tt,controlPoint:nt,currentPoint:rt}=PathElement.pathS(_e);_e.addMarker(rt,nt,tt),j.addBezierCurve(et.x,et.y,tt.x,tt.y,nt.x,nt.y,rt.x,rt.y),g&&g.bezierCurveTo(tt.x,tt.y,nt.x,nt.y,rt.x,rt.y)}static pathQ(g){const{current:j}=g,_e=g.getAsControlPoint("x1","y1"),et=g.getAsCurrentPoint();return{current:j,controlPoint:_e,currentPoint:et}}pathQ(g,j){const{pathParser:_e}=this,{current:et,controlPoint:tt,currentPoint:nt}=PathElement.pathQ(_e);_e.addMarker(nt,tt,tt),j.addQuadraticCurve(et.x,et.y,tt.x,tt.y,nt.x,nt.y),g&&g.quadraticCurveTo(tt.x,tt.y,nt.x,nt.y)}static pathT(g){const{current:j}=g,_e=g.getReflectedControlPoint();g.control=_e;const et=g.getAsCurrentPoint();return{current:j,controlPoint:_e,currentPoint:et}}pathT(g,j){const{pathParser:_e}=this,{current:et,controlPoint:tt,currentPoint:nt}=PathElement.pathT(_e);_e.addMarker(nt,tt,tt),j.addQuadraticCurve(et.x,et.y,tt.x,tt.y,nt.x,nt.y),g&&g.quadraticCurveTo(tt.x,tt.y,nt.x,nt.y)}static pathA(g){const{current:j,command:_e}=g;let{rX:et,rY:tt,xRot:nt,lArcFlag:rt,sweepFlag:it}=_e;const st=nt*(Math.PI/180),ot=g.getAsCurrentPoint(),at=new Point(Math.cos(st)*(j.x-ot.x)/2+Math.sin(st)*(j.y-ot.y)/2,-Math.sin(st)*(j.x-ot.x)/2+Math.cos(st)*(j.y-ot.y)/2),lt=Math.pow(at.x,2)/Math.pow(et,2)+Math.pow(at.y,2)/Math.pow(tt,2);lt>1&&(et*=Math.sqrt(lt),tt*=Math.sqrt(lt));let ut=(rt===it?-1:1)*Math.sqrt((Math.pow(et,2)*Math.pow(tt,2)-Math.pow(et,2)*Math.pow(at.y,2)-Math.pow(tt,2)*Math.pow(at.x,2))/(Math.pow(et,2)*Math.pow(at.y,2)+Math.pow(tt,2)*Math.pow(at.x,2)));isNaN(ut)&&(ut=0);const ht=new Point(ut*et*at.y/tt,ut*-tt*at.x/et),ft=new Point((j.x+ot.x)/2+Math.cos(st)*ht.x-Math.sin(st)*ht.y,(j.y+ot.y)/2+Math.sin(st)*ht.x+Math.cos(st)*ht.y),gt=vectorsAngle([1,0],[(at.x-ht.x)/et,(at.y-ht.y)/tt]),dt=[(at.x-ht.x)/et,(at.y-ht.y)/tt],mt=[(-at.x-ht.x)/et,(-at.y-ht.y)/tt];let yt=vectorsAngle(dt,mt);return vectorsRatio(dt,mt)<=-1&&(yt=Math.PI),vectorsRatio(dt,mt)>=1&&(yt=0),{currentPoint:ot,rX:et,rY:tt,sweepFlag:it,xAxisRotation:st,centp:ft,a1:gt,ad:yt}}pathA(g,j){const{pathParser:_e}=this,{currentPoint:et,rX:tt,rY:nt,sweepFlag:rt,xAxisRotation:it,centp:st,a1:ot,ad:at}=PathElement.pathA(_e),lt=1-rt?1:-1,ut=ot+lt*(at/2),ht=new Point(st.x+tt*Math.cos(ut),st.y+nt*Math.sin(ut));if(_e.addMarkerAngle(ht,ut-lt*Math.PI/2),_e.addMarkerAngle(et,ut-lt*Math.PI),j.addPoint(et.x,et.y),g&&!isNaN(ot)&&!isNaN(at)){const ft=tt>nt?tt:nt,gt=tt>nt?1:tt/nt,dt=tt>nt?nt/tt:1;g.translate(st.x,st.y),g.rotate(it),g.scale(gt,dt),g.arc(0,0,ft,ot,ot+at,!!(1-rt)),g.scale(1/gt,1/dt),g.rotate(-it),g.translate(-st.x,-st.y)}}static pathZ(g){g.current=g.start}pathZ(g,j){PathElement.pathZ(this.pathParser),g&&j.x1!==j.x2&&j.y1!==j.y2&&g.closePath()}constructor(g,j,_e){super(g,j,_e),this.type="path",this.pathParser=new PathParser(this.getAttribute("d").getString())}}class SVGElement extends RenderedElement{setContext(g){var j;const{document:_e}=this,{screen:et,window:tt}=_e,nt=g.canvas;if(et.setDefaults(g),"style"in nt&&typeof g.font<"u"&&tt&&typeof tt.getComputedStyle<"u"){g.font=tt.getComputedStyle(nt).getPropertyValue("font");const mt=new Property(_e,"fontSize",Font.parse(g.font).fontSize);mt.hasValue()&&(_e.rootEmSize=mt.getPixels("y"),_e.emSize=_e.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:rt,height:it}=et.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const st=this.getAttribute("refX"),ot=this.getAttribute("refY"),at=this.getAttribute("viewBox"),lt=at.hasValue()?toNumbers(at.getString()):null,ut=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let ht=0,ft=0,gt=0,dt=0;lt&&(ht=lt[0],ft=lt[1]),this.root||(rt=this.getStyle("width").getPixels("x"),it=this.getStyle("height").getPixels("y"),this.type==="marker"&&(gt=ht,dt=ft,ht=0,ft=0)),et.viewPort.setCurrent(rt,it),this.node&&(!this.parent||((j=this.node.parentNode)===null||j===void 0?void 0:j.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(g),g.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),lt&&(rt=lt[2],it=lt[3]),_e.setViewBox({ctx:g,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:et.viewPort.width,desiredWidth:rt,height:et.viewPort.height,desiredHeight:it,minX:ht,minY:ft,refX:st.getValue(),refY:ot.getValue(),clip:ut,clipX:gt,clipY:dt}),lt&&(et.viewPort.removeCurrent(),et.viewPort.setCurrent(rt,it))}clearContext(g){super.clearContext(g),this.document.screen.viewPort.removeCurrent()}resize(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const et=this.getAttribute("width",!0),tt=this.getAttribute("height",!0),nt=this.getAttribute("viewBox"),rt=this.getAttribute("style"),it=et.getNumber(0),st=tt.getNumber(0);if(_e)if(typeof _e=="string")this.getAttribute("preserveAspectRatio",!0).setValue(_e);else{const ot=this.getAttribute("preserveAspectRatio");ot.hasValue()&&ot.setValue(ot.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(et.setValue(g),tt.setValue(j),nt.hasValue()||nt.setValue("0 0 ".concat(it||g," ").concat(st||j)),rt.hasValue()){const ot=this.getStyle("width"),at=this.getStyle("height");ot.hasValue()&&ot.setValue("".concat(g,"px")),at.hasValue()&&at.setValue("".concat(j,"px"))}}constructor(...g){super(...g),this.type="svg",this.root=!1}}class RectElement extends PathElement{path(g){const j=this.getAttribute("x").getPixels("x"),_e=this.getAttribute("y").getPixels("y"),et=this.getStyle("width",!1,!0).getPixels("x"),tt=this.getStyle("height",!1,!0).getPixels("y"),nt=this.getAttribute("rx"),rt=this.getAttribute("ry");let it=nt.getPixels("x"),st=rt.getPixels("y");if(nt.hasValue()&&!rt.hasValue()&&(st=it),rt.hasValue()&&!nt.hasValue()&&(it=st),it=Math.min(it,et/2),st=Math.min(st,tt/2),g){const ot=4*((Math.sqrt(2)-1)/3);g.beginPath(),tt>0&&et>0&&(g.moveTo(j+it,_e),g.lineTo(j+et-it,_e),g.bezierCurveTo(j+et-it+ot*it,_e,j+et,_e+st-ot*st,j+et,_e+st),g.lineTo(j+et,_e+tt-st),g.bezierCurveTo(j+et,_e+tt-st+ot*st,j+et-it+ot*it,_e+tt,j+et-it,_e+tt),g.lineTo(j+it,_e+tt),g.bezierCurveTo(j+it-ot*it,_e+tt,j,_e+tt-st+ot*st,j,_e+tt-st),g.lineTo(j,_e+st),g.bezierCurveTo(j,_e+st-ot*st,j+it-ot*it,_e,j+it,_e),g.closePath())}return new BoundingBox(j,_e,j+et,_e+tt)}getMarkers(){return null}constructor(...g){super(...g),this.type="rect"}}class CircleElement extends PathElement{path(g){const j=this.getAttribute("cx").getPixels("x"),_e=this.getAttribute("cy").getPixels("y"),et=this.getAttribute("r").getPixels();return g&&et>0&&(g.beginPath(),g.arc(j,_e,et,0,Math.PI*2,!1),g.closePath()),new BoundingBox(j-et,_e-et,j+et,_e+et)}getMarkers(){return null}constructor(...g){super(...g),this.type="circle"}}class EllipseElement extends PathElement{path(g){const j=4*((Math.sqrt(2)-1)/3),_e=this.getAttribute("rx").getPixels("x"),et=this.getAttribute("ry").getPixels("y"),tt=this.getAttribute("cx").getPixels("x"),nt=this.getAttribute("cy").getPixels("y");return g&&_e>0&&et>0&&(g.beginPath(),g.moveTo(tt+_e,nt),g.bezierCurveTo(tt+_e,nt+j*et,tt+j*_e,nt+et,tt,nt+et),g.bezierCurveTo(tt-j*_e,nt+et,tt-_e,nt+j*et,tt-_e,nt),g.bezierCurveTo(tt-_e,nt-j*et,tt-j*_e,nt-et,tt,nt-et),g.bezierCurveTo(tt+j*_e,nt-et,tt+_e,nt-j*et,tt+_e,nt),g.closePath()),new BoundingBox(tt-_e,nt-et,tt+_e,nt+et)}getMarkers(){return null}constructor(...g){super(...g),this.type="ellipse"}}class LineElement extends PathElement{getPoints(){return[new Point(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(g){const[{x:j,y:_e},{x:et,y:tt}]=this.getPoints();return g&&(g.beginPath(),g.moveTo(j,_e),g.lineTo(et,tt)),new BoundingBox(j,_e,et,tt)}getMarkers(){const[g,j]=this.getPoints(),_e=g.angleTo(j);return[[g,_e],[j,_e]]}constructor(...g){super(...g),this.type="line"}}class PolylineElement extends PathElement{path(g){const{points:j}=this,[{x:_e,y:et}]=j,tt=new BoundingBox(_e,et);return g&&(g.beginPath(),g.moveTo(_e,et)),j.forEach(nt=>{let{x:rt,y:it}=nt;tt.addPoint(rt,it),g&&g.lineTo(rt,it)}),tt}getMarkers(){const{points:g}=this,j=g.length-1,_e=[];return g.forEach((et,tt)=>{tt!==j&&_e.push([et,et.angleTo(g[tt+1])])}),_e.length>0&&_e.push([g[g.length-1],_e[_e.length-1][1]]),_e}constructor(g,j,_e){super(g,j,_e),this.type="polyline",this.points=[],this.points=Point.parsePath(this.getAttribute("points").getString())}}class PolygonElement extends PolylineElement{path(g){const j=super.path(g),[{x:_e,y:et}]=this.points;return g&&(g.lineTo(_e,et),g.closePath()),j}constructor(...g){super(...g),this.type="polygon"}}class PatternElement extends Element{createPattern(g,j,_e){const et=this.getStyle("width").getPixels("x",!0),tt=this.getStyle("height").getPixels("y",!0),nt=new SVGElement(this.document,null);nt.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),nt.attributes.width=new Property(this.document,"width","".concat(et,"px")),nt.attributes.height=new Property(this.document,"height","".concat(tt,"px")),nt.attributes.transform=new Property(this.document,"transform",this.getAttribute("patternTransform").getValue()),nt.children=this.children;const rt=this.document.createCanvas(et,tt),it=rt.getContext("2d"),st=this.getAttribute("x"),ot=this.getAttribute("y");st.hasValue()&&ot.hasValue()&&it.translate(st.getPixels("x",!0),ot.getPixels("y",!0)),_e.hasValue()?this.styles["fill-opacity"]=_e:Reflect.deleteProperty(this.styles,"fill-opacity");for(let lt=-1;lt<=1;lt++)for(let ut=-1;ut<=1;ut++)it.save(),nt.attributes.x=new Property(this.document,"x",lt*rt.width),nt.attributes.y=new Property(this.document,"y",ut*rt.height),nt.render(it),it.restore();return g.createPattern(rt,"repeat")}constructor(...g){super(...g),this.type="pattern"}}class MarkerElement extends Element{render(g,j,_e){if(!j)return;const{x:et,y:tt}=j,nt=this.getAttribute("orient").getString("auto"),rt=this.getAttribute("markerUnits").getString("strokeWidth");g.translate(et,tt),nt==="auto"&&g.rotate(_e),rt==="strokeWidth"&&g.scale(g.lineWidth,g.lineWidth),g.save();const it=new SVGElement(this.document);it.type=this.type,it.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),it.attributes.refX=new Property(this.document,"refX",this.getAttribute("refX").getValue()),it.attributes.refY=new Property(this.document,"refY",this.getAttribute("refY").getValue()),it.attributes.width=new Property(this.document,"width",this.getAttribute("markerWidth").getValue()),it.attributes.height=new Property(this.document,"height",this.getAttribute("markerHeight").getValue()),it.attributes.overflow=new Property(this.document,"overflow",this.getAttribute("overflow").getValue()),it.attributes.fill=new Property(this.document,"fill",this.getAttribute("fill").getColor("black")),it.attributes.stroke=new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none")),it.children=this.children,it.render(g),g.restore(),rt==="strokeWidth"&&g.scale(1/g.lineWidth,1/g.lineWidth),nt==="auto"&&g.rotate(-_e),g.translate(-et,-tt)}constructor(...g){super(...g),this.type="marker"}}class DefsElement extends Element{render(){}constructor(...g){super(...g),this.type="defs"}}class GElement extends RenderedElement{getBoundingBox(g){const j=new BoundingBox;return this.children.forEach(_e=>{j.addBoundingBox(_e.getBoundingBox(g))}),j}constructor(...g){super(...g),this.type="g"}}class GradientElement extends Element{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(g,j,_e){let et=this;this.getHrefAttribute().hasValue()&&(et=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(et));const{stops:tt}=et,nt=this.getGradient(g,j);if(!nt)return this.addParentOpacity(_e,tt[tt.length-1].color);if(tt.forEach(rt=>{nt.addColorStop(rt.offset,this.addParentOpacity(_e,rt.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:rt}=this,{MAX_VIRTUAL_PIXELS:it}=Screen,{viewPort:st}=rt.screen,ot=st.getRoot(),at=new RectElement(rt);at.attributes.x=new Property(rt,"x",-it/3),at.attributes.y=new Property(rt,"y",-it/3),at.attributes.width=new Property(rt,"width",it),at.attributes.height=new Property(rt,"height",it);const lt=new GElement(rt);lt.attributes.transform=new Property(rt,"transform",this.getAttribute("gradientTransform").getValue()),lt.children=[at];const ut=new SVGElement(rt);ut.attributes.x=new Property(rt,"x",0),ut.attributes.y=new Property(rt,"y",0),ut.attributes.width=new Property(rt,"width",ot.width),ut.attributes.height=new Property(rt,"height",ot.height),ut.children=[lt];const ht=rt.createCanvas(ot.width,ot.height),ft=ht.getContext("2d");return ft.fillStyle=nt,ut.render(ft),ft.createPattern(ht,"no-repeat")}return nt}inheritStopContainer(g){this.attributesToInherit.forEach(j=>{!this.getAttribute(j).hasValue()&&g.getAttribute(j).hasValue()&&this.getAttribute(j,!0).setValue(g.getAttribute(j).getValue())})}addParentOpacity(g,j){return g.hasValue()?new Property(this.document,"color",j).addOpacity(g).getColor():j}constructor(g,j,_e){super(g,j,_e),this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:et,children:tt}=this;tt.forEach(nt=>{nt.type==="stop"&&et.push(nt)})}}class LinearGradientElement extends GradientElement{getGradient(g,j){const _e=this.getGradientUnits()==="objectBoundingBox",et=_e?j.getBoundingBox(g):null;if(_e&&!et)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const tt=_e?et.x+et.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),nt=_e?et.y+et.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),rt=_e?et.x+et.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),it=_e?et.y+et.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return tt===rt&&nt===it?null:g.createLinearGradient(tt,nt,rt,it)}constructor(g,j,_e){super(g,j,_e),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class RadialGradientElement extends GradientElement{getGradient(g,j){const _e=this.getGradientUnits()==="objectBoundingBox",et=j.getBoundingBox(g);if(_e&&!et)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const tt=_e?et.x+et.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),nt=_e?et.y+et.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let rt=tt,it=nt;this.getAttribute("fx").hasValue()&&(rt=_e?et.x+et.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(it=_e?et.y+et.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const st=_e?(et.width+et.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),ot=this.getAttribute("fr").getPixels();return g.createRadialGradient(rt,it,ot,tt,nt,st)}constructor(g,j,_e){super(g,j,_e),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class StopElement extends Element{constructor(g,j,_e){super(g,j,_e),this.type="stop";const et=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),tt=this.getStyle("stop-opacity");let nt=this.getStyle("stop-color",!0);nt.getString()===""&&nt.setValue("#000"),tt.hasValue()&&(nt=nt.addOpacity(tt)),this.offset=et,this.color=nt.getColor()}}class AnimateElement extends Element{getProperty(){const g=this.getAttribute("attributeType").getString(),j=this.getAttribute("attributeName").getString();return g==="CSS"?this.parent.getStyle(j,!0):this.parent.getAttribute(j,!0)}calcValue(){const{initialUnits:g}=this,{progress:j,from:_e,to:et}=this.getProgress();let tt=_e.getNumber()+(et.getNumber()-_e.getNumber())*j;return g==="%"&&(tt*=100),"".concat(tt).concat(g)}update(g){const{parent:j}=this,_e=this.getProperty();if(this.initialValue||(this.initialValue=_e.getString(),this.initialUnits=_e.getUnits()),this.duration>this.maxDuration){const tt=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(tt==="freeze"&&!this.frozen)this.frozen=!0,j&&_e&&(j.animationFrozen=!0,j.animationFrozenValue=_e.getString());else if(tt==="remove"&&!this.removed)return this.removed=!0,j&&_e&&_e.setValue(j.animationFrozen?j.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=g;let et=!1;if(this.begin<this.duration){let tt=this.calcValue();const nt=this.getAttribute("type");if(nt.hasValue()){const rt=nt.getString();tt="".concat(rt,"(").concat(tt,")")}_e.setValue(tt),et=!0}return et}getProgress(){const{document:g,values:j}=this;let _e=(this.duration-this.begin)/(this.maxDuration-this.begin),et,tt;if(j.hasValue()){const nt=_e*(j.getValue().length-1),rt=Math.floor(nt),it=Math.ceil(nt);let st;st=j.getValue()[rt],et=new Property(g,"from",st?parseFloat(st):0),st=j.getValue()[it],tt=new Property(g,"to",st?parseFloat(st):0),_e=(nt-rt)/(it-rt)}else et=this.from,tt=this.to;return{progress:_e,from:et,to:tt}}constructor(g,j,_e){super(g,j,_e),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,g.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property(g,"values",null);const et=this.getAttribute("values");et.hasValue()&&this.values.setValue(et.getString().split(";"))}}class AnimateColorElement extends AnimateElement{calcValue(){const{progress:g,from:j,to:_e}=this.getProgress(),et=new RGBColor$1(j.getColor()),tt=new RGBColor$1(_e.getColor());if(et.ok&&tt.ok){const nt=et.r+(tt.r-et.r)*g,rt=et.g+(tt.g-et.g)*g,it=et.b+(tt.b-et.b)*g;return"rgb(".concat(Math.floor(nt),", ").concat(Math.floor(rt),", ").concat(Math.floor(it),")")}return this.getAttribute("from").getColor()}constructor(...g){super(...g),this.type="animateColor"}}class AnimateTransformElement extends AnimateElement{calcValue(){const{progress:g,from:j,to:_e}=this.getProgress(),et=toNumbers(j.getString()),tt=toNumbers(_e.getString());return et.map((rt,it)=>{const st=tt[it];return rt+(st-rt)*g}).join(" ")}constructor(...g){super(...g),this.type="animateTransform"}}class FontFaceElement extends Element{constructor(g,j,_e){super(g,j,_e),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class GlyphElement extends PathElement{constructor(g,j,_e){super(g,j,_e),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class MissingGlyphElement extends GlyphElement{constructor(...g){super(...g),this.type="missing-glyph",this.horizAdvX=0}}class FontElement extends Element{render(){}constructor(g,j,_e){super(g,j,_e),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:et}=g,{children:tt}=this;for(const nt of tt)if(nt instanceof FontFaceElement){this.fontFace=nt;const rt=nt.getStyle("font-family");rt.hasValue()&&(et[rt.getString()]=this)}else if(nt instanceof MissingGlyphElement)this.missingGlyph=nt;else if(nt instanceof GlyphElement)if(nt.arabicForm){this.isRTL=!0,this.isArabic=!0;const rt=this.arabicGlyphs[nt.unicode];typeof rt>"u"?this.arabicGlyphs[nt.unicode]={[nt.arabicForm]:nt}:rt[nt.arabicForm]=nt}else this.glyphs[nt.unicode]=nt}}class TRefElement extends TextElement{getText(){const g=this.getHrefAttribute().getDefinition();if(g){const j=g.children[0];if(j)return j.getText()}return""}constructor(...g){super(...g),this.type="tref"}}class AElement extends TextElement{getText(){return this.text}renderChildren(g){if(this.hasText){super.renderChildren(g);const{document:j,x:_e,y:et}=this,{mouse:tt}=j.screen,nt=new Property(j,"fontSize",Font.parse(j.ctx.font).fontSize);tt.isWorking()&&tt.checkBoundingBox(this,new BoundingBox(_e,et-nt.getPixels("y"),_e+this.measureText(g),et))}else if(this.children.length>0){const j=new GElement(this.document);j.children=this.children,j.parent=this,j.render(g)}}onClick(){const{window:g}=this.document;g&&g.open(this.getHrefAttribute().getString())}onMouseMove(){const g=this.document.ctx;g.canvas.style.cursor="pointer"}constructor(g,j,_e){super(g,j,_e),this.type="a";const{childNodes:et}=j,tt=et[0],nt=et.length>0&&Array.from(et).every(rt=>rt.nodeType===3);this.hasText=nt,this.text=nt?this.getTextFromNode(tt):""}}class TextPathElement extends TextElement{getText(){return this.text}path(g){const{dataArray:j}=this;g&&g.beginPath(),j.forEach(_e=>{let{type:et,points:tt}=_e;switch(et){case PathParser.LINE_TO:g&&g.lineTo(tt[0],tt[1]);break;case PathParser.MOVE_TO:g&&g.moveTo(tt[0],tt[1]);break;case PathParser.CURVE_TO:g&&g.bezierCurveTo(tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]);break;case PathParser.QUAD_TO:g&&g.quadraticCurveTo(tt[0],tt[1],tt[2],tt[3]);break;case PathParser.ARC:{const[nt,rt,it,st,ot,at,lt,ut]=tt,ht=it>st?it:st,ft=it>st?1:it/st,gt=it>st?st/it:1;g&&(g.translate(nt,rt),g.rotate(lt),g.scale(ft,gt),g.arc(0,0,ht,ot,ot+at,!!(1-ut)),g.scale(1/ft,1/gt),g.rotate(-lt),g.translate(-nt,-rt));break}case PathParser.CLOSE_PATH:g&&g.closePath();break}})}renderChildren(g){this.setTextData(g),g.save();const j=this.parent.getStyle("text-decoration").getString(),_e=this.getFontSize(),{glyphInfo:et}=this,tt=g.fillStyle;j==="underline"&&g.beginPath(),et.forEach((nt,rt)=>{const{p0:it,p1:st,rotation:ot,text:at}=nt;g.save(),g.translate(it.x,it.y),g.rotate(ot),g.fillStyle&&g.fillText(at,0,0),g.strokeStyle&&g.strokeText(at,0,0),g.restore(),j==="underline"&&(rt===0&&g.moveTo(it.x,it.y+_e/8),g.lineTo(st.x,st.y+_e/5))}),j==="underline"&&(g.lineWidth=_e/20,g.strokeStyle=tt,g.stroke(),g.closePath()),g.restore()}getLetterSpacingAt(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[g]||0}findSegmentToFitChar(g,j,_e,et,tt,nt,rt,it,st){let ot=nt,at=this.measureText(g,it);it===" "&&j==="justify"&&_e<et&&(at+=(et-_e)/tt),st>-1&&(ot+=this.getLetterSpacingAt(st));const lt=this.textHeight/20,ut=this.getEquidistantPointOnPath(ot,lt,0),ht=this.getEquidistantPointOnPath(ot+at,lt,0),ft={p0:ut,p1:ht},gt=ut&&ht?Math.atan2(ht.y-ut.y,ht.x-ut.x):0;if(rt){const dt=Math.cos(Math.PI/2+gt)*rt,mt=Math.cos(-gt)*rt;ft.p0={...ut,x:ut.x+dt,y:ut.y+mt},ft.p1={...ht,x:ht.x+dt,y:ht.y+mt}}return ot+=at,{offset:ot,segment:ft,rotation:gt}}measureText(g,j){const{measuresCache:_e}=this,et=j||this.getText();if(_e.has(et))return _e.get(et);const tt=this.measureTargetText(g,et);return _e.set(et,tt),tt}setTextData(g){if(this.glyphInfo)return;const j=this.getText(),_e=j.split(""),et=j.split(" ").length-1,tt=this.parent.getAttribute("dx").split().map(yt=>yt.getPixels("x")),nt=this.parent.getAttribute("dy").getPixels("y"),rt=this.parent.getStyle("text-anchor").getString("start"),it=this.getStyle("letter-spacing"),st=this.parent.getStyle("letter-spacing");let ot=0;!it.hasValue()||it.getValue()==="inherit"?ot=st.getPixels():it.hasValue()&&it.getValue()!=="initial"&&it.getValue()!=="unset"&&(ot=it.getPixels());const at=[],lt=j.length;this.letterSpacingCache=at;for(let yt=0;yt<lt;yt++)at.push(typeof tt[yt]<"u"?tt[yt]:ot);const ut=at.reduce((yt,Et,Ct)=>Ct===0?0:yt+Et||0,0),ht=this.measureText(g),ft=Math.max(ht+ut,0);this.textWidth=ht,this.textHeight=this.getFontSize(),this.glyphInfo=[];const gt=this.getPathLength(),dt=this.getStyle("startOffset").getNumber(0)*gt;let mt=0;(rt==="middle"||rt==="center")&&(mt=-ft/2),(rt==="end"||rt==="right")&&(mt=-ft),mt+=dt,_e.forEach((yt,Et)=>{const{offset:Ct,segment:kt,rotation:St}=this.findSegmentToFitChar(g,rt,ft,gt,et,mt,nt,yt,Et);mt=Ct,!(!kt.p0||!kt.p1)&&this.glyphInfo.push({text:_e[Et],p0:kt.p0,p1:kt.p1,rotation:St})})}parsePathData(g){if(this.pathLength=-1,!g)return[];const j=[],{pathParser:_e}=g;for(_e.reset();!_e.isEnd();){const{current:et}=_e,tt=et?et.x:0,nt=et?et.y:0,rt=_e.next();let it=rt.type,st=[];switch(rt.type){case PathParser.MOVE_TO:this.pathM(_e,st);break;case PathParser.LINE_TO:it=this.pathL(_e,st);break;case PathParser.HORIZ_LINE_TO:it=this.pathH(_e,st);break;case PathParser.VERT_LINE_TO:it=this.pathV(_e,st);break;case PathParser.CURVE_TO:this.pathC(_e,st);break;case PathParser.SMOOTH_CURVE_TO:it=this.pathS(_e,st);break;case PathParser.QUAD_TO:this.pathQ(_e,st);break;case PathParser.SMOOTH_QUAD_TO:it=this.pathT(_e,st);break;case PathParser.ARC:st=this.pathA(_e);break;case PathParser.CLOSE_PATH:PathElement.pathZ(_e);break}rt.type!==PathParser.CLOSE_PATH?j.push({type:it,points:st,start:{x:tt,y:nt},pathLength:this.calcLength(tt,nt,it,st)}):j.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return j}pathM(g,j){const{x:_e,y:et}=PathElement.pathM(g).point;j.push(_e,et)}pathL(g,j){const{x:_e,y:et}=PathElement.pathL(g).point;return j.push(_e,et),PathParser.LINE_TO}pathH(g,j){const{x:_e,y:et}=PathElement.pathH(g).point;return j.push(_e,et),PathParser.LINE_TO}pathV(g,j){const{x:_e,y:et}=PathElement.pathV(g).point;return j.push(_e,et),PathParser.LINE_TO}pathC(g,j){const{point:_e,controlPoint:et,currentPoint:tt}=PathElement.pathC(g);j.push(_e.x,_e.y,et.x,et.y,tt.x,tt.y)}pathS(g,j){const{point:_e,controlPoint:et,currentPoint:tt}=PathElement.pathS(g);return j.push(_e.x,_e.y,et.x,et.y,tt.x,tt.y),PathParser.CURVE_TO}pathQ(g,j){const{controlPoint:_e,currentPoint:et}=PathElement.pathQ(g);j.push(_e.x,_e.y,et.x,et.y)}pathT(g,j){const{controlPoint:_e,currentPoint:et}=PathElement.pathT(g);return j.push(_e.x,_e.y,et.x,et.y),PathParser.QUAD_TO}pathA(g){let{rX:j,rY:_e,sweepFlag:et,xAxisRotation:tt,centp:nt,a1:rt,ad:it}=PathElement.pathA(g);return et===0&&it>0&&(it-=2*Math.PI),et===1&&it<0&&(it+=2*Math.PI),[nt.x,nt.y,j,_e,rt,it,tt,et]}calcLength(g,j,_e,et){let tt=0,nt=null,rt=null,it=0;switch(_e){case PathParser.LINE_TO:return this.getLineLength(g,j,et[0],et[1]);case PathParser.CURVE_TO:for(tt=0,nt=this.getPointOnCubicBezier(0,g,j,et[0],et[1],et[2],et[3],et[4],et[5]),it=.01;it<=1;it+=.01)rt=this.getPointOnCubicBezier(it,g,j,et[0],et[1],et[2],et[3],et[4],et[5]),tt+=this.getLineLength(nt.x,nt.y,rt.x,rt.y),nt=rt;return tt;case PathParser.QUAD_TO:for(tt=0,nt=this.getPointOnQuadraticBezier(0,g,j,et[0],et[1],et[2],et[3]),it=.01;it<=1;it+=.01)rt=this.getPointOnQuadraticBezier(it,g,j,et[0],et[1],et[2],et[3]),tt+=this.getLineLength(nt.x,nt.y,rt.x,rt.y),nt=rt;return tt;case PathParser.ARC:{tt=0;const st=et[4],ot=et[5],at=et[4]+ot;let lt=Math.PI/180;if(Math.abs(st-at)<lt&&(lt=Math.abs(st-at)),nt=this.getPointOnEllipticalArc(et[0],et[1],et[2],et[3],st,0),ot<0)for(it=st-lt;it>at;it-=lt)rt=this.getPointOnEllipticalArc(et[0],et[1],et[2],et[3],it,0),tt+=this.getLineLength(nt.x,nt.y,rt.x,rt.y),nt=rt;else for(it=st+lt;it<at;it+=lt)rt=this.getPointOnEllipticalArc(et[0],et[1],et[2],et[3],it,0),tt+=this.getLineLength(nt.x,nt.y,rt.x,rt.y),nt=rt;return rt=this.getPointOnEllipticalArc(et[0],et[1],et[2],et[3],at,0),tt+=this.getLineLength(nt.x,nt.y,rt.x,rt.y),tt}}return 0}getPointOnLine(g,j,_e,et,tt){let nt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:j,rt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:_e;const it=(tt-_e)/(et-j+PSEUDO_ZERO);let st=Math.sqrt(g*g/(1+it*it));et<j&&(st*=-1);let ot=it*st,at=null;if(et===j)at={x:nt,y:rt+ot};else if((rt-_e)/(nt-j+PSEUDO_ZERO)===it)at={x:nt+st,y:rt+ot};else{let lt=0,ut=0;const ht=this.getLineLength(j,_e,et,tt);if(ht<PSEUDO_ZERO)return null;let ft=(nt-j)*(et-j)+(rt-_e)*(tt-_e);ft/=ht*ht,lt=j+ft*(et-j),ut=_e+ft*(tt-_e);const gt=this.getLineLength(nt,rt,lt,ut),dt=Math.sqrt(g*g-gt*gt);st=Math.sqrt(dt*dt/(1+it*it)),et<j&&(st*=-1),ot=it*st,at={x:lt+st,y:ut+ot}}return at}getPointOnPath(g){const j=this.getPathLength();let _e=0,et=null;if(g<-5e-5||g-5e-5>j)return null;const{dataArray:tt}=this;for(const nt of tt){if(nt&&(nt.pathLength<5e-5||_e+nt.pathLength+5e-5<g)){_e+=nt.pathLength;continue}const rt=g-_e;let it=0;switch(nt.type){case PathParser.LINE_TO:et=this.getPointOnLine(rt,nt.start.x,nt.start.y,nt.points[0],nt.points[1],nt.start.x,nt.start.y);break;case PathParser.ARC:{const st=nt.points[4],ot=nt.points[5],at=nt.points[4]+ot;if(it=st+rt/nt.pathLength*ot,ot<0&&it<at||ot>=0&&it>at)break;et=this.getPointOnEllipticalArc(nt.points[0],nt.points[1],nt.points[2],nt.points[3],it,nt.points[6]);break}case PathParser.CURVE_TO:it=rt/nt.pathLength,it>1&&(it=1),et=this.getPointOnCubicBezier(it,nt.start.x,nt.start.y,nt.points[0],nt.points[1],nt.points[2],nt.points[3],nt.points[4],nt.points[5]);break;case PathParser.QUAD_TO:it=rt/nt.pathLength,it>1&&(it=1),et=this.getPointOnQuadraticBezier(it,nt.start.x,nt.start.y,nt.points[0],nt.points[1],nt.points[2],nt.points[3]);break}if(et)return et;break}return null}getLineLength(g,j,_e,et){return Math.sqrt((_e-g)*(_e-g)+(et-j)*(et-j))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((g,j)=>j.pathLength>0?g+j.pathLength:g,0)),this.pathLength}getPointOnCubicBezier(g,j,_e,et,tt,nt,rt,it,st){const ot=it*CB1(g)+nt*CB2(g)+et*CB3(g)+j*CB4(g),at=st*CB1(g)+rt*CB2(g)+tt*CB3(g)+_e*CB4(g);return{x:ot,y:at}}getPointOnQuadraticBezier(g,j,_e,et,tt,nt,rt){const it=nt*QB1(g)+et*QB2(g)+j*QB3(g),st=rt*QB1(g)+tt*QB2(g)+_e*QB3(g);return{x:it,y:st}}getPointOnEllipticalArc(g,j,_e,et,tt,nt){const rt=Math.cos(nt),it=Math.sin(nt),st={x:_e*Math.cos(tt),y:et*Math.sin(tt)};return{x:g+(st.x*rt-st.y*it),y:j+(st.x*it+st.y*rt)}}buildEquidistantCache(g,j){const _e=this.getPathLength(),et=j||.25,tt=g||_e/100;if(!this.equidistantCache||this.equidistantCache.step!==tt||this.equidistantCache.precision!==et){this.equidistantCache={step:tt,precision:et,points:[]};let nt=0;for(let rt=0;rt<=_e;rt+=et){const it=this.getPointOnPath(rt),st=this.getPointOnPath(rt+et);!it||!st||(nt+=this.getLineLength(it.x,it.y,st.x,st.y),nt>=tt&&(this.equidistantCache.points.push({x:it.x,y:it.y,distance:rt}),nt-=tt))}}}getEquidistantPointOnPath(g,j,_e){if(this.buildEquidistantCache(j,_e),g<0||g-this.getPathLength()>5e-5)return null;const et=Math.round(g/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[et]||null}constructor(g,j,_e){super(g,j,_e),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const et=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(et)}}const dataUriRegex=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class ImageElement extends RenderedElement{async loadImage(g){try{const j=await this.document.createImage(g);this.image=j}catch(j){console.error('Error while loading image "'.concat(g,'":'),j)}this.loaded=!0}async loadSvg(g){const j=dataUriRegex.exec(g);if(j){const _e=j[5];_e&&(j[4]==="base64"?this.image=atob(_e):this.image=decodeURIComponent(_e))}else try{const et=await(await this.document.fetch(g)).text();this.image=et}catch(_e){console.error('Error while loading image "'.concat(g,'":'),_e)}this.loaded=!0}renderChildren(g){const{document:j,image:_e,loaded:et}=this,tt=this.getAttribute("x").getPixels("x"),nt=this.getAttribute("y").getPixels("y"),rt=this.getStyle("width").getPixels("x"),it=this.getStyle("height").getPixels("y");if(!(!et||!_e||!rt||!it)){if(g.save(),g.translate(tt,nt),typeof _e=="string"){const st=j.canvg.forkString(g,_e,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:rt,scaleHeight:it}),{documentElement:ot}=st.document;ot&&(ot.parent=this),st.render()}else j.setViewBox({ctx:g,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:rt,desiredWidth:_e.width,height:it,desiredHeight:_e.height}),this.loaded&&(!("complete"in _e)||_e.complete)&&g.drawImage(_e,0,0);g.restore()}}getBoundingBox(){const g=this.getAttribute("x").getPixels("x"),j=this.getAttribute("y").getPixels("y"),_e=this.getStyle("width").getPixels("x"),et=this.getStyle("height").getPixels("y");return new BoundingBox(g,j,g+_e,j+et)}constructor(g,j,_e){super(g,j,_e),this.type="image",this.loaded=!1;const et=this.getHrefAttribute().getString();if(!et)return;const tt=et.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(et);g.images.push(this),tt?this.loadSvg(et):this.loadImage(et)}}class SymbolElement extends RenderedElement{render(g){}constructor(...g){super(...g),this.type="symbol"}}class SVGFontLoader{async load(g,j){try{const{document:_e}=this,tt=(await _e.canvg.parser.load(j)).getElementsByTagName("font");Array.from(tt).forEach(nt=>{const rt=_e.createElement(nt);_e.definitions[g]=rt})}catch(_e){console.error('Error while loading font "'.concat(j,'":'),_e)}this.loaded=!0}constructor(g){this.document=g,this.loaded=!1,g.fonts.push(this)}}class StyleElement extends Element{constructor(g,j,_e){super(g,j,_e),this.type="style",compressSpaces(Array.from(j.childNodes).map(nt=>nt.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(nt=>{const rt=nt.trim();if(!rt)return;const it=rt.split("{"),st=it[0].split(","),ot=it[1].split(";");st.forEach(at=>{const lt=at.trim();if(!lt)return;const ut=g.styles[lt]||{};if(ot.forEach(ht=>{const ft=ht.indexOf(":"),gt=ht.substr(0,ft).trim(),dt=ht.substr(ft+1,ht.length-ft).trim();gt&&dt&&(ut[gt]=new Property(g,gt,dt))}),g.styles[lt]=ut,g.stylesSpecificity[lt]=getSelectorSpecificity(lt),lt==="@font-face"){const ht=ut["font-family"].getString().replace(/"|'/g,"");ut.src.getString().split(",").forEach(gt=>{if(gt.indexOf('format("svg")')>0){const dt=parseExternalUrl(gt);dt&&new SVGFontLoader(g).load(ht,dt)}})}})})}}StyleElement.parseExternalUrl=parseExternalUrl;class UseElement extends RenderedElement{setContext(g){super.setContext(g);const j=this.getAttribute("x"),_e=this.getAttribute("y");j.hasValue()&&g.translate(j.getPixels("x"),0),_e.hasValue()&&g.translate(0,_e.getPixels("y"))}path(g){const{element:j}=this;j&&j.path(g)}renderChildren(g){const{document:j,element:_e}=this;if(_e){let et=_e;if(_e.type==="symbol"&&(et=new SVGElement(j),et.attributes.viewBox=new Property(j,"viewBox",_e.getAttribute("viewBox").getString()),et.attributes.preserveAspectRatio=new Property(j,"preserveAspectRatio",_e.getAttribute("preserveAspectRatio").getString()),et.attributes.overflow=new Property(j,"overflow",_e.getAttribute("overflow").getString()),et.children=_e.children,_e.styles.opacity=new Property(j,"opacity",this.calculateOpacity())),et.type==="svg"){const nt=this.getStyle("width",!1,!0),rt=this.getStyle("height",!1,!0);nt.hasValue()&&(et.attributes.width=new Property(j,"width",nt.getString())),rt.hasValue()&&(et.attributes.height=new Property(j,"height",rt.getString()))}const tt=et.parent;et.parent=this,et.render(g),et.parent=tt}}getBoundingBox(g){const{element:j}=this;return j?j.getBoundingBox(g):null}elementTransform(){const{document:g,element:j}=this;return j?Transform.fromElement(g,j):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...g){super(...g),this.type="use"}}function imGet($,g,j,_e,et,tt){return $[j*_e*4+g*4+tt]}function imSet($,g,j,_e,et,tt,nt){$[j*_e*4+g*4+tt]=nt}function m($,g,j){return $[g]*j}function c($,g,j,_e){return g+Math.cos($)*j+Math.sin($)*_e}class FeColorMatrixElement extends Element{apply(g,j,_e,et,tt){const{includeOpacity:nt,matrix:rt}=this,it=g.getImageData(0,0,et,tt);for(let st=0;st<tt;st++)for(let ot=0;ot<et;ot++){const at=imGet(it.data,ot,st,et,tt,0),lt=imGet(it.data,ot,st,et,tt,1),ut=imGet(it.data,ot,st,et,tt,2),ht=imGet(it.data,ot,st,et,tt,3);let ft=m(rt,0,at)+m(rt,1,lt)+m(rt,2,ut)+m(rt,3,ht)+m(rt,4,1),gt=m(rt,5,at)+m(rt,6,lt)+m(rt,7,ut)+m(rt,8,ht)+m(rt,9,1),dt=m(rt,10,at)+m(rt,11,lt)+m(rt,12,ut)+m(rt,13,ht)+m(rt,14,1),mt=m(rt,15,at)+m(rt,16,lt)+m(rt,17,ut)+m(rt,18,ht)+m(rt,19,1);nt&&(ft=0,gt=0,dt=0,mt*=ht/255),imSet(it.data,ot,st,et,tt,0,ft),imSet(it.data,ot,st,et,tt,1,gt),imSet(it.data,ot,st,et,tt,2,dt),imSet(it.data,ot,st,et,tt,3,mt)}g.clearRect(0,0,et,tt),g.putImageData(it,0,0)}constructor(g,j,_e){super(g,j,_e),this.type="feColorMatrix";let et=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const tt=et[0];et=[.213+.787*tt,.715-.715*tt,.072-.072*tt,0,0,.213-.213*tt,.715+.285*tt,.072-.072*tt,0,0,.213-.213*tt,.715-.715*tt,.072+.928*tt,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const tt=et[0]*Math.PI/180;et=[c(tt,.213,.787,-.213),c(tt,.715,-.715,-.715),c(tt,.072,-.072,.928),0,0,c(tt,.213,-.213,.143),c(tt,.715,.285,.14),c(tt,.072,-.072,-.283),0,0,c(tt,.213,-.213,-.787),c(tt,.715,-.715,.715),c(tt,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=et,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class MaskElement extends Element{apply(g,j){const{document:_e}=this;let et=this.getAttribute("x").getPixels("x"),tt=this.getAttribute("y").getPixels("y"),nt=this.getStyle("width").getPixels("x"),rt=this.getStyle("height").getPixels("y");if(!nt&&!rt){const ut=new BoundingBox;this.children.forEach(ht=>{ut.addBoundingBox(ht.getBoundingBox(g))}),et=Math.floor(ut.x1),tt=Math.floor(ut.y1),nt=Math.floor(ut.width),rt=Math.floor(ut.height)}const it=this.removeStyles(j,MaskElement.ignoreStyles),st=_e.createCanvas(et+nt,tt+rt),ot=st.getContext("2d");_e.screen.setDefaults(ot),this.renderChildren(ot),new FeColorMatrixElement(_e,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(ot,0,0,et+nt,tt+rt);const at=_e.createCanvas(et+nt,tt+rt),lt=at.getContext("2d");_e.screen.setDefaults(lt),j.render(lt),lt.globalCompositeOperation="destination-in",lt.fillStyle=ot.createPattern(st,"no-repeat"),lt.fillRect(0,0,et+nt,tt+rt),g.fillStyle=lt.createPattern(at,"no-repeat"),g.fillRect(0,0,et+nt,tt+rt),this.restoreStyles(j,it)}render(g){}constructor(...g){super(...g),this.type="mask"}}MaskElement.ignoreStyles=["mask","transform","clip-path"];const noop=()=>{};class ClipPathElement extends Element{apply(g){const{document:j}=this,_e=Reflect.getPrototypeOf(g),{beginPath:et,closePath:tt}=g;_e&&(_e.beginPath=noop,_e.closePath=noop),Reflect.apply(et,g,[]),this.children.forEach(nt=>{if(!("path"in nt))return;let rt="elementTransform"in nt?nt.elementTransform():null;rt||(rt=Transform.fromElement(j,nt)),rt&&rt.apply(g),nt.path(g),_e&&(_e.closePath=tt),rt&&rt.unapply(g)}),Reflect.apply(tt,g,[]),g.clip(),_e&&(_e.beginPath=et,_e.closePath=tt)}render(g){}constructor(...g){super(...g),this.type="clipPath"}}class FilterElement extends Element{apply(g,j){const{document:_e,children:et}=this,tt="getBoundingBox"in j?j.getBoundingBox(g):null;if(!tt)return;let nt=0,rt=0;et.forEach(dt=>{const mt=dt.extraFilterDistance||0;nt=Math.max(nt,mt),rt=Math.max(rt,mt)});const it=Math.floor(tt.width),st=Math.floor(tt.height),ot=it+2*nt,at=st+2*rt;if(ot<1||at<1)return;const lt=Math.floor(tt.x),ut=Math.floor(tt.y),ht=this.removeStyles(j,FilterElement.ignoreStyles),ft=_e.createCanvas(ot,at),gt=ft.getContext("2d");_e.screen.setDefaults(gt),gt.translate(-lt+nt,-ut+rt),j.render(gt),et.forEach(dt=>{typeof dt.apply=="function"&&dt.apply(gt,0,0,ot,at)}),g.drawImage(ft,0,0,ot,at,lt-nt,ut-rt,ot,at),this.restoreStyles(j,ht)}render(g){}constructor(...g){super(...g),this.type="filter"}}FilterElement.ignoreStyles=["filter","transform","clip-path"];class FeDropShadowElement extends Element{apply(g,j,_e,et,tt){}constructor(g,j,_e){super(g,j,_e),this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class FeMorphologyElement extends Element{apply(g,j,_e,et,tt){}constructor(...g){super(...g),this.type="feMorphology"}}class FeCompositeElement extends Element{apply(g,j,_e,et,tt){}constructor(...g){super(...g),this.type="feComposite"}}class FeGaussianBlurElement extends Element{apply(g,j,_e,et,tt){const{document:nt,blurRadius:rt}=this,it=nt.window?nt.window.document.body:null,st=g.canvas;st.id=nt.getUniqueId(),it&&(st.style.display="none",it.appendChild(st)),processCanvasRGBA(st,j,_e,et,tt,rt),it&&it.removeChild(st)}constructor(g,j,_e){super(g,j,_e),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class TitleElement extends Element{constructor(...g){super(...g),this.type="title"}}class DescElement extends Element{constructor(...g){super(...g),this.type="desc"}}const elements={svg:SVGElement,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};function createCanvas($,g){const j=document.createElement("canvas");return j.width=$,j.height=g,j}async function createImage($){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const j=document.createElement("img");return g&&(j.crossOrigin="Anonymous"),new Promise((_e,et)=>{j.onload=()=>{_e(j)},j.onerror=(tt,nt,rt,it,st)=>{et(st)},j.src=$})}const DEFAULT_EM_SIZE=12;class Document{bindCreateImage(g,j){return typeof j=="boolean"?(_e,et)=>g(_e,typeof et=="boolean"?et:j):g}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:g}=this;return g[g.length-1]||DEFAULT_EM_SIZE}set emSize(g){const{emSizeStack:j}=this;j.push(g)}popEmSize(){const{emSizeStack:g}=this;g.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(g=>g.loaded)}isFontsLoaded(){return this.fonts.every(g=>g.loaded)}createDocumentElement(g){const j=this.createElement(g.documentElement);return j.root=!0,j.addStylesFromStyleDefinition(),this.documentElement=j,j}createElement(g){const j=g.nodeName.replace(/^[^:]+:/,""),_e=Document.elementTypes[j];return _e?new _e(this,g):new UnknownElement(this,g)}createTextNode(g){return new TextNode(this,g)}setViewBox(g){this.screen.setViewBox({document:this,...g})}constructor(g,{rootEmSize:j=DEFAULT_EM_SIZE,emSize:_e=DEFAULT_EM_SIZE,createCanvas:et=Document.createCanvas,createImage:tt=Document.createImage,anonymousCrossOrigin:nt}={}){this.canvg=g,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=g.screen,this.rootEmSize=j,this.emSize=_e,this.createCanvas=et,this.createImage=this.bindCreateImage(tt,nt),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}Document.createCanvas=createCanvas;Document.createImage=createImage;Document.elementTypes=elements;class Canvg{static async from(g,j){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const tt=await new Parser(_e).parse(j);return new Canvg(g,tt,_e)}static fromString(g,j){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const tt=new Parser(_e).parseFromString(j);return new Canvg(g,tt,_e)}fork(g,j){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.from(g,j,{...this.options,..._e})}forkString(g,j){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Canvg.fromString(g,j,{...this.options,..._e})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...g}),await this.ready(),this.stop()}start(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:j,screen:_e,options:et}=this;_e.start(j,{enableRedraw:!0,...et,...g})}stop(){this.screen.stop()}resize(g){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(g,j,_e)}constructor(g,j,_e={}){this.parser=new Parser(_e),this.screen=new Screen(g,_e),this.options=_e;const et=new Document(this,_e),tt=et.createDocumentElement(j);this.document=et,this.documentElement=tt}}const preset=index.offscreen();async function toPng($){const{width:g,height:j,svg:_e}=$;console.log("svg",_e);const et=new OffscreenCanvas(g,j),tt=et.getContext("2d");await(await Canvg.from(tt,_e.outerHTML,preset)).render();const rt=await et.convertToBlob();return URL.createObjectURL(rt)}function Diagram({ast:$,semantics:g,diagramType:j}){const[_e,et]=React.useState(null),[tt,nt]=React.useState(null),[rt,it]=React.useState(null),st=async()=>{rt?(et(saveSvgUrl(rt)),nt(await toPng({svg:rt,width:rt.clientWidth*2,height:rt.clientHeight*2}))):(et(null),nt(null))},ot=async at=>{it(at),et(null),nt(null)};return jsxRuntimeExports.jsxs("div",{children:[_e&&tt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx("button",{onClick:st,children:"Export"}),_e&&tt&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("a",{href:_e,download:`${j}.svg`,children:"Download SVG"}),jsxRuntimeExports.jsx("span",{children:" | "}),jsxRuntimeExports.jsx("a",{href:tt,download:`${j}.png`,children:"PNG"})]}),j==="conflict"&&jsxRuntimeExports.jsx(Cloud,{ast:$,setSvgElem:ot}),j==="goal"&&jsxRuntimeExports.jsx(Tree,{semantics:g,setSvgElem:ot}),j==="problem"&&jsxRuntimeExports.jsx(Tree,{semantics:g,setSvgElem:ot})]})}let GrammarLocation$4=class{constructor(g,j){this.source=g,this.start=j}toString(){return String(this.source)}offset(g){return{line:g.line+this.start.line-1,column:g.line===1?g.column+this.start.column-1:g.column,offset:g.offset+this.start.offset}}static offsetStart(g){return g.source&&typeof g.source.offset=="function"?g.source.offset(g.start):g.start}static offsetEnd(g){return g.source&&typeof g.source.offset=="function"?g.source.offset(g.end):g.end}};var grammarLocation=GrammarLocation$4;const GrammarLocation$3=grammarLocation,setProtoOf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,g){$.__proto__=g}||function($,g){for(const j in g)Object.prototype.hasOwnProperty.call(g,j)&&($[j]=g[j])};let GrammarError$3=class es extends Error{constructor(g,j,_e){super(g),setProtoOf(this,es.prototype),this.name="GrammarError",this.location=j,_e===void 0&&(_e=[]),this.diagnostics=_e,this.stage=null,this.problems=[["error",g,j,_e]]}toString(){let g=super.toString();this.location&&(g+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(g+=`${this.location.source}:`),g+=`${this.location.start.line}:${this.location.start.column}`);for(const j of this.diagnostics)g+=`
 from `,j.location.source!==void 0&&j.location.source!==null&&(g+=`${j.location.source}:`),g+=`${j.location.start.line}:${j.location.start.column}: ${j.message}`;return g}format(g){const j=g.map(({source:tt,text:nt})=>({source:tt,text:nt!=null?String(nt).split(/\r\n|\n|\r/g):[]}));function _e(tt,nt,rt=""){let it="";const st=j.find(({source:lt})=>lt===tt.source),ot=tt.start,at=GrammarLocation$3.offsetStart(tt);if(st){const lt=tt.end,ut=st.text[ot.line-1],ft=(ot.line===lt.line?lt.column:ut.length+1)-ot.column||1;rt&&(it+=`
note: ${rt}`),it+=`
 --> ${tt.source}:${at.line}:${at.column}
${"".padEnd(nt)} |
${at.line.toString().padStart(nt)} | ${ut}
${"".padEnd(nt)} | ${"".padEnd(ot.column-1)}${"".padEnd(ft,"^")}`}else it+=`
 at ${tt.source}:${at.line}:${at.column}`,rt&&(it+=`: ${rt}`);return it}function et(tt,nt,rt,it=[]){let st=-1/0;rt?st=it.reduce((at,{location:lt})=>Math.max(at,GrammarLocation$3.offsetStart(lt).line),rt.start.line):st=Math.max.apply(null,it.map(at=>at.location.start.line)),st=st.toString().length;let ot=`${tt}: ${nt}`;rt&&(ot+=_e(rt,st));for(const at of it)ot+=_e(at.location,st,at.message);return ot}return this.problems.filter(tt=>tt[0]!=="info").map(tt=>et(...tt)).join(`

`)}};var grammarError=GrammarError$3;const visitor$b={build($){function g(nt,...rt){return $[nt.type](nt,...rt)}function j(){}function _e(nt,...rt){return g(nt.expression,...rt)}function et(nt){return function(rt,...it){rt[nt].forEach(st=>g(st,...it))}}const tt={grammar(nt,...rt){nt.topLevelInitializer&&g(nt.topLevelInitializer,...rt),nt.initializer&&g(nt.initializer,...rt),nt.rules.forEach(it=>g(it,...rt))},top_level_initializer:j,initializer:j,rule:_e,named:_e,choice:et("alternatives"),action:_e,sequence:et("elements"),labeled:_e,text:_e,simple_and:_e,simple_not:_e,optional:_e,zero_or_more:_e,one_or_more:_e,repeated(nt,...rt){return nt.delimiter&&g(nt.delimiter,...rt),g(nt.expression,...rt)},group:_e,semantic_and:j,semantic_not:j,rule_ref:j,literal:j,class:j,any:j};return Object.keys(tt).forEach(nt=>{Object.prototype.hasOwnProperty.call($,nt)||($[nt]=tt[nt])}),g}};var visitor_1=visitor$b;const visitor$a=visitor_1,asts$7={findRule($,g){for(let j=0;j<$.rules.length;j++)if($.rules[j].name===g)return $.rules[j]},indexOfRule($,g){for(let j=0;j<$.rules.length;j++)if($.rules[j].name===g)return j;return-1},alwaysConsumesOnSuccess($,g){function j(){return!0}function _e(){return!1}const et=visitor$a.build({choice(tt){return tt.alternatives.every(et)},sequence(tt){return tt.elements.some(et)},simple_and:_e,simple_not:_e,optional:_e,zero_or_more:_e,repeated(tt){const nt=tt.min?tt.min:tt.max;return nt.type!=="constant"||nt.value===0?!1:!!(et(tt.expression)||nt.value>1&&tt.delimiter&&et(tt.delimiter))},semantic_and:_e,semantic_not:_e,rule_ref(tt){const nt=asts$7.findRule($,tt.name);return nt?et(nt):void 0},literal(tt){return tt.value!==""},class:j,any:j});return et(g)}};var asts_1=asts$7;const opcodes={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};var opcodes_1=opcodes;const visitor$9=visitor_1,asts$6=asts_1,GrammarError$2=grammarError,ALWAYS_MATCH$1=1,SOMETIMES_MATCH$1=0,NEVER_MATCH$1=-1;function inferenceMatchResult$1($){function g(nt){return nt.match=SOMETIMES_MATCH$1}function j(nt){return tt(nt.expression),nt.match=ALWAYS_MATCH$1}function _e(nt){return nt.match=tt(nt.expression)}function et(nt,rt){const it=nt.length;let st=0,ot=0;for(let at=0;at<it;++at){const lt=tt(nt[at]);lt===ALWAYS_MATCH$1&&++st,lt===NEVER_MATCH$1&&++ot}return st===it?ALWAYS_MATCH$1:rt?ot===it?NEVER_MATCH$1:SOMETIMES_MATCH$1:ot>0?NEVER_MATCH$1:SOMETIMES_MATCH$1}const tt=visitor$9.build({rule(nt){let rt,it=0;if(typeof nt.match>"u"){nt.match=SOMETIMES_MATCH$1;do if(rt=nt.match,nt.match=tt(nt.expression),++it>6)throw new GrammarError$2("Infinity cycle detected when trying to evaluate node match result",nt.location);while(rt!==nt.match)}return nt.match},named:_e,choice(nt){return nt.match=et(nt.alternatives,!0)},action:_e,sequence(nt){return nt.match=et(nt.elements,!1)},labeled:_e,text:_e,simple_and:_e,simple_not(nt){return nt.match=-tt(nt.expression)},optional:j,zero_or_more:j,one_or_more:_e,repeated(nt){const rt=tt(nt.expression),it=nt.delimiter?tt(nt.delimiter):NEVER_MATCH$1,st=nt.min?nt.min:nt.max;return st.type!=="constant"||nt.max.type!=="constant"?nt.match=SOMETIMES_MATCH$1:nt.max.value===0||nt.max.value!==null&&st.value>nt.max.value?nt.match=NEVER_MATCH$1:rt===NEVER_MATCH$1?nt.match=st.value===0?ALWAYS_MATCH$1:NEVER_MATCH$1:rt===ALWAYS_MATCH$1?nt.delimiter&&st.value>=2?nt.match=it:nt.match=ALWAYS_MATCH$1:nt.delimiter&&st.value>=2?nt.match=it===NEVER_MATCH$1?NEVER_MATCH$1:SOMETIMES_MATCH$1:nt.match=st.value===0?ALWAYS_MATCH$1:SOMETIMES_MATCH$1},group:_e,semantic_and:g,semantic_not:g,rule_ref(nt){const rt=asts$6.findRule($,nt.name);return nt.match=tt(rt)},literal(nt){const rt=nt.value.length===0?ALWAYS_MATCH$1:SOMETIMES_MATCH$1;return nt.match=rt},class(nt){const rt=nt.parts.length===0?NEVER_MATCH$1:SOMETIMES_MATCH$1;return nt.match=rt},any:g});tt($)}inferenceMatchResult$1.ALWAYS_MATCH=ALWAYS_MATCH$1;inferenceMatchResult$1.SOMETIMES_MATCH=SOMETIMES_MATCH$1;inferenceMatchResult$1.NEVER_MATCH=NEVER_MATCH$1;var inferenceMatchResult_1=inferenceMatchResult$1;const asts$5=asts_1,op$1=opcodes_1,visitor$8=visitor_1,{ALWAYS_MATCH,SOMETIMES_MATCH,NEVER_MATCH}=inferenceMatchResult_1;function generateBytecode$1($,g){const j=[],_e=[],et=[],tt=[],nt=[];function rt(xt){const bt=j.indexOf(xt);return bt===-1?j.push(xt)-1:bt}function it(xt){const bt={value:xt.parts,inverted:xt.inverted,ignoreCase:xt.ignoreCase},$t=JSON.stringify(bt),Mt=_e.findIndex(Ot=>JSON.stringify(Ot)===$t);return Mt===-1?_e.push(bt)-1:Mt}function st(xt){const bt=JSON.stringify(xt),$t=et.findIndex(Mt=>JSON.stringify(Mt)===bt);return $t===-1?et.push(xt)-1:$t}function ot(xt,bt,$t){const Mt={predicate:xt,params:bt,body:$t.code,location:$t.codeLocation},Ot=JSON.stringify(Mt),jt=tt.findIndex(Yt=>JSON.stringify(Yt)===Ot);return jt===-1?tt.push(Mt)-1:jt}function at(xt){return nt.push(xt)-1}function lt(xt){const bt={};return Object.keys(xt).forEach($t=>{bt[$t]=xt[$t]}),bt}function ut(xt,...bt){return xt.concat(...bt)}function ht(xt,bt,$t,Mt){return xt===ALWAYS_MATCH?$t:xt===NEVER_MATCH?Mt:bt.concat([$t.length,Mt.length],$t,Mt)}function ft(xt,bt){return xt.concat([bt.length],bt)}function gt(xt,bt,$t,Mt){const Ot=Object.keys($t).map(jt=>Mt-$t[jt]);return[op$1.CALL,xt,bt,Ot.length].concat(Ot)}function dt(xt,bt,$t){const Mt=xt.match|0;return ut([op$1.PUSH_CURR_POS],[op$1.SILENT_FAILS_ON],Bt(xt,{sp:$t.sp+1,env:lt($t.env),action:null}),[op$1.SILENT_FAILS_OFF],ht(bt?-Mt:Mt,[bt?op$1.IF_ERROR:op$1.IF_NOT_ERROR],ut([op$1.POP],[bt?op$1.POP:op$1.POP_CURR_POS],[op$1.PUSH_UNDEFINED]),ut([op$1.POP],[bt?op$1.POP_CURR_POS:op$1.POP],[op$1.PUSH_FAILED])))}function mt(xt,bt,$t){const Mt=ot(!0,Object.keys($t.env),xt);return ut([op$1.UPDATE_SAVED_POS],gt(Mt,0,$t.env,$t.sp),ht(xt.match|0,[op$1.IF],ut([op$1.POP],bt?[op$1.PUSH_FAILED]:[op$1.PUSH_UNDEFINED]),ut([op$1.POP],bt?[op$1.PUSH_UNDEFINED]:[op$1.PUSH_FAILED])))}function yt(xt){return ft([op$1.WHILE_NOT_ERROR],ut([op$1.APPEND],xt))}function Et(xt,bt,$t,Mt){switch(xt.type){case"constant":return{pre:[],post:[],sp:$t};case"variable":return xt.sp=Mt+$t-bt[xt.value],{pre:[],post:[],sp:$t};case"function":{xt.sp=Mt;const Ot=ot(!0,Object.keys(bt),{code:xt.value,codeLocation:xt.codeLocation});return{pre:gt(Ot,0,bt,$t),post:[op$1.NIP],sp:$t+1}}default:throw new Error(`Unknown boundary type "${xt.type}" for the "repeated" node`)}}function Ct(xt,bt){if(bt.value!==null){const $t=bt.type==="constant"?[op$1.IF_GE,bt.value]:[op$1.IF_GE_DYNAMIC,bt.sp];return ht(SOMETIMES_MATCH,$t,[op$1.PUSH_FAILED],xt)}return xt}function kt(xt,bt){const $t=bt.type==="constant"?[op$1.IF_LT,bt.value]:[op$1.IF_LT_DYNAMIC,bt.sp];return ut(xt,ht(SOMETIMES_MATCH,$t,[op$1.POP,op$1.POP_CURR_POS,op$1.PUSH_FAILED],[op$1.NIP]))}function St(xt,bt,$t,Mt,Ot){return xt?ut([op$1.PUSH_CURR_POS],Bt(xt,{sp:Mt.sp+Ot+1,env:lt(Mt.env),action:null}),ht(xt.match|0,[op$1.IF_NOT_ERROR],ut([op$1.POP],$t,ht(-bt,[op$1.IF_ERROR],[op$1.POP,op$1.POP_CURR_POS,op$1.PUSH_FAILED],[op$1.NIP])),[op$1.NIP])):$t}function Pt(xt){return g&&g.output==="source-and-map"&&Object.entries(xt).forEach(([bt,$t])=>{xt[bt]=function(Mt,...Ot){const jt=$t(Mt,...Ot);return jt===void 0||!Mt.location?jt:ut([op$1.SOURCE_MAP_PUSH,at(Mt.location)],jt,[op$1.SOURCE_MAP_POP])}}),visitor$8.build(xt)}const Bt=Pt({grammar(xt){xt.rules.forEach(Bt),xt.literals=j,xt.classes=_e,xt.expectations=et,xt.functions=tt,xt.locations=nt},rule(xt){xt.bytecode=Bt(xt.expression,{sp:-1,env:{},pluck:[],action:null})},named(xt,bt){const $t=xt.match|0,Mt=$t===NEVER_MATCH?null:st({type:"rule",value:xt.name});return ut([op$1.SILENT_FAILS_ON],Bt(xt.expression,bt),[op$1.SILENT_FAILS_OFF],ht($t,[op$1.IF_ERROR],[op$1.FAIL,Mt],[]))},choice(xt,bt){function $t(Mt,Ot){const jt=Mt[0].match|0,Yt=Bt(Mt[0],{sp:Ot.sp,env:lt(Ot.env),action:null});return jt===ALWAYS_MATCH?Yt:ut(Yt,Mt.length>1?ht(SOMETIMES_MATCH,[op$1.IF_ERROR],ut([op$1.POP],$t(Mt.slice(1),Ot)),[]):[])}return $t(xt.alternatives,bt)},action(xt,bt){const $t=lt(bt.env),Mt=xt.expression.type!=="sequence"||xt.expression.elements.length===0,Ot=Bt(xt.expression,{sp:bt.sp+(Mt?1:0),env:$t,action:xt}),jt=xt.expression.match|0,Yt=Mt&&jt!==NEVER_MATCH?ot(!1,Object.keys($t),xt):null;return Mt?ut([op$1.PUSH_CURR_POS],Ot,ht(jt,[op$1.IF_NOT_ERROR],ut([op$1.LOAD_SAVED_POS,1],gt(Yt,1,$t,bt.sp+2)),[]),[op$1.NIP]):Ot},sequence(xt,bt){function $t(Mt,Ot){if(Mt.length>0){const jt=xt.elements.length-Mt.length+1;return ut(Bt(Mt[0],{sp:Ot.sp,env:Ot.env,pluck:Ot.pluck,action:null}),ht(Mt[0].match|0,[op$1.IF_NOT_ERROR],$t(Mt.slice(1),{sp:Ot.sp+1,env:Ot.env,pluck:Ot.pluck,action:Ot.action}),ut(jt>1?[op$1.POP_N,jt]:[op$1.POP],[op$1.POP_CURR_POS],[op$1.PUSH_FAILED])))}else{if(Ot.pluck.length>0)return ut([op$1.PLUCK,xt.elements.length+1,Ot.pluck.length],Ot.pluck.map(jt=>Ot.sp-jt));if(Ot.action){const jt=ot(!1,Object.keys(Ot.env),Ot.action);return ut([op$1.LOAD_SAVED_POS,xt.elements.length],gt(jt,xt.elements.length+1,Ot.env,Ot.sp))}else return ut([op$1.WRAP,xt.elements.length],[op$1.NIP])}}return ut([op$1.PUSH_CURR_POS],$t(xt.elements,{sp:bt.sp+1,env:bt.env,pluck:[],action:bt.action}))},labeled(xt,bt){let $t=bt.env;const Mt=xt.label,Ot=bt.sp+1;Mt&&($t=lt(bt.env),bt.env[xt.label]=Ot),xt.pick&&bt.pluck.push(Ot);const jt=Bt(xt.expression,{sp:bt.sp,env:$t,action:null});return Mt&&xt.labelLocation&&g&&g.output==="source-and-map"?ut([op$1.SOURCE_MAP_LABEL_PUSH,Ot,rt(Mt),at(xt.labelLocation)],jt,[op$1.SOURCE_MAP_LABEL_POP,Ot]):jt},text(xt,bt){return ut([op$1.PUSH_CURR_POS],Bt(xt.expression,{sp:bt.sp+1,env:lt(bt.env),action:null}),ht(xt.match|0,[op$1.IF_NOT_ERROR],ut([op$1.POP],[op$1.TEXT]),[op$1.NIP]))},simple_and(xt,bt){return dt(xt.expression,!1,bt)},simple_not(xt,bt){return dt(xt.expression,!0,bt)},optional(xt,bt){return ut(Bt(xt.expression,{sp:bt.sp,env:lt(bt.env),action:null}),ht(-(xt.expression.match|0),[op$1.IF_ERROR],ut([op$1.POP],[op$1.PUSH_NULL]),[]))},zero_or_more(xt,bt){const $t=Bt(xt.expression,{sp:bt.sp+1,env:lt(bt.env),action:null});return ut([op$1.PUSH_EMPTY_ARRAY],$t,yt($t),[op$1.POP])},one_or_more(xt,bt){const $t=Bt(xt.expression,{sp:bt.sp+1,env:lt(bt.env),action:null});return ut([op$1.PUSH_EMPTY_ARRAY],$t,ht(xt.expression.match|0,[op$1.IF_NOT_ERROR],ut(yt($t),[op$1.POP]),ut([op$1.POP],[op$1.POP],[op$1.PUSH_FAILED])))},repeated(xt,bt){const $t=xt.min?xt.min:xt.max,Mt=$t.type!=="constant"||$t.value>0,Ot=xt.max.type!=="constant"&&xt.max.value!==null,jt=Mt?2:1,Yt=xt.min?Et(xt.min,bt.env,bt.sp,2+(xt.max.type==="function"?1:0)):{pre:[],post:[],sp:bt.sp},Ut=Et(xt.max,bt.env,Yt.sp,jt),Nt=Bt(xt.expression,{sp:Ut.sp+jt,env:lt(bt.env),action:null}),It=xt.delimiter!==null?Bt(xt.expression,{sp:Ut.sp+jt+1,env:lt(bt.env),action:null}):Nt,Ht=St(xt.delimiter,xt.expression.match|0,It,bt,jt),Gt=Ct(Ht,xt.max),Kt=Ot?Ct(Nt,xt.max):Nt,rn=ut(Mt?[op$1.PUSH_CURR_POS]:[],[op$1.PUSH_EMPTY_ARRAY],Kt,yt(Gt),[op$1.POP]);return ut(Yt.pre,Ut.pre,Mt?kt(rn,$t):rn,Ut.post,Yt.post)},group(xt,bt){return Bt(xt.expression,{sp:bt.sp,env:lt(bt.env),action:null})},semantic_and(xt,bt){return mt(xt,!1,bt)},semantic_not(xt,bt){return mt(xt,!0,bt)},rule_ref(xt){return[op$1.RULE,asts$5.indexOfRule($,xt.name)]},literal(xt){if(xt.value.length>0){const bt=xt.match|0,Mt=bt===SOMETIMES_MATCH||bt===ALWAYS_MATCH&&!xt.ignoreCase?rt(xt.ignoreCase?xt.value.toLowerCase():xt.value):null,Ot=bt!==ALWAYS_MATCH?st({type:"literal",value:xt.value,ignoreCase:xt.ignoreCase}):null;return ht(bt,xt.ignoreCase?[op$1.MATCH_STRING_IC,Mt]:[op$1.MATCH_STRING,Mt],xt.ignoreCase?[op$1.ACCEPT_N,xt.value.length]:[op$1.ACCEPT_STRING,Mt],[op$1.FAIL,Ot])}return[op$1.PUSH_EMPTY_STRING]},class(xt){const bt=xt.match|0,$t=bt===SOMETIMES_MATCH?it(xt):null,Mt=bt!==ALWAYS_MATCH?st({type:"class",value:xt.parts,inverted:xt.inverted,ignoreCase:xt.ignoreCase}):null;return ht(bt,[op$1.MATCH_CHAR_CLASS,$t],[op$1.ACCEPT_N,1],[op$1.FAIL,Mt])},any(xt){const bt=xt.match|0,$t=bt!==ALWAYS_MATCH?st({type:"any"}):null;return ht(bt,[op$1.MATCH_ANY],[op$1.ACCEPT_N,1],[op$1.FAIL,$t])}});Bt($)}var generateBytecode_1=generateBytecode$1,sourceMap={},sourceMapGenerator={},base64Vlq={},base64$3={};const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");base64$3.encode=function($){if(0<=$&&$<intToCharMap.length)return intToCharMap[$];throw new TypeError("Must be between 0 and 63: "+$)};const base64$2=base64$3,VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned($){return $<0?(-$<<1)+1:($<<1)+0}base64Vlq.encode=function(g){let j="",_e,et=toVLQSigned(g);do _e=et&VLQ_BASE_MASK,et>>>=VLQ_BASE_SHIFT,et>0&&(_e|=VLQ_CONTINUATION_BIT),j+=base64$2.encode(_e);while(et>0);return j};var util$3={};function getArg($,g,j){if(g in $)return $[g];if(arguments.length===3)return j;throw new Error('"'+g+'" is a required argument.')}util$3.getArg=getArg;const supportsNullProto=function(){return!("__proto__"in Object.create(null))}();function identity($){return $}function toSetString($){return isProtoString($)?"$"+$:$}util$3.toSetString=supportsNullProto?identity:toSetString;function fromSetString($){return isProtoString($)?$.slice(1):$}util$3.fromSetString=supportsNullProto?identity:fromSetString;function isProtoString($){if(!$)return!1;const g=$.length;if(g<9||$.charCodeAt(g-1)!==95||$.charCodeAt(g-2)!==95||$.charCodeAt(g-3)!==111||$.charCodeAt(g-4)!==116||$.charCodeAt(g-5)!==111||$.charCodeAt(g-6)!==114||$.charCodeAt(g-7)!==112||$.charCodeAt(g-8)!==95||$.charCodeAt(g-9)!==95)return!1;for(let j=g-10;j>=0;j--)if($.charCodeAt(j)!==36)return!1;return!0}function strcmp($,g){return $===g?0:$===null?1:g===null?-1:$>g?1:-1}function compareByGeneratedPositionsInflated($,g){let j=$.generatedLine-g.generatedLine;return j!==0||(j=$.generatedColumn-g.generatedColumn,j!==0)||(j=strcmp($.source,g.source),j!==0)||(j=$.originalLine-g.originalLine,j!==0)||(j=$.originalColumn-g.originalColumn,j!==0)?j:strcmp($.name,g.name)}util$3.compareByGeneratedPositionsInflated=compareByGeneratedPositionsInflated;const PROTOCOL="http:",PROTOCOL_AND_HOST=`${PROTOCOL}//host`;function createSafeHandler($){return g=>{const j=getURLType(g),_e=buildSafeBase(g),et=new URL(g,_e);$(et);const tt=et.toString();return j==="absolute"?tt:j==="scheme-relative"?tt.slice(PROTOCOL.length):j==="path-absolute"?tt.slice(PROTOCOL_AND_HOST.length):computeRelativeURL(_e,tt)}}function withBase($,g){return new URL($,g).toString()}function buildUniqueSegment($,g){let j=0;do{const _e=$+j++;if(g.indexOf(_e)===-1)return _e}while(!0)}function buildSafeBase($){const g=$.split("..").length-1,j=buildUniqueSegment("p",$);let _e=`${PROTOCOL_AND_HOST}/`;for(let et=0;et<g;et++)_e+=`${j}/`;return _e}const ABSOLUTE_SCHEME=/^[A-Za-z0-9\+\-\.]+:/;function getURLType($){return $[0]==="/"?$[1]==="/"?"scheme-relative":"path-absolute":ABSOLUTE_SCHEME.test($)?"absolute":"path-relative"}function computeRelativeURL($,g){typeof $=="string"&&($=new URL($)),typeof g=="string"&&(g=new URL(g));const j=g.pathname.split("/"),_e=$.pathname.split("/");for(_e.length>0&&!_e[_e.length-1]&&_e.pop();j.length>0&&_e.length>0&&j[0]===_e[0];)j.shift(),_e.shift();return _e.map(()=>"..").concat(j).join("/")+g.search+g.hash}const ensureDirectory=createSafeHandler($=>{$.pathname=$.pathname.replace(/\/?$/,"/")}),normalize=createSafeHandler($=>{});util$3.normalize=normalize;function join($,g){const j=getURLType(g),_e=getURLType($);if($=ensureDirectory($),j==="absolute")return withBase(g,void 0);if(_e==="absolute")return withBase(g,$);if(j==="scheme-relative")return normalize(g);if(_e==="scheme-relative")return withBase(g,withBase($,PROTOCOL_AND_HOST)).slice(PROTOCOL.length);if(j==="path-absolute")return normalize(g);if(_e==="path-absolute")return withBase(g,withBase($,PROTOCOL_AND_HOST)).slice(PROTOCOL_AND_HOST.length);const et=buildSafeBase(g+$),tt=withBase(g,withBase($,et));return computeRelativeURL(et,tt)}util$3.join=join;function relative($,g){const j=relativeIfPossible($,g);return typeof j=="string"?j:normalize(g)}util$3.relative=relative;function relativeIfPossible($,g){if(getURLType($)!==getURLType(g))return null;const _e=buildSafeBase($+g),et=new URL($,_e),tt=new URL(g,_e);try{new URL("",tt.toString())}catch{return null}return tt.protocol!==et.protocol||tt.user!==et.user||tt.password!==et.password||tt.hostname!==et.hostname||tt.port!==et.port?null:computeRelativeURL(et,tt)}var arraySet={};let ArraySet$1=class ts{constructor(){this._array=[],this._set=new Map}static fromArray(g,j){const _e=new ts;for(let et=0,tt=g.length;et<tt;et++)_e.add(g[et],j);return _e}size(){return this._set.size}add(g,j){const _e=this.has(g),et=this._array.length;(!_e||j)&&this._array.push(g),_e||this._set.set(g,et)}has(g){return this._set.has(g)}indexOf(g){const j=this._set.get(g);if(j>=0)return j;throw new Error('"'+g+'" is not in the set.')}at(g){if(g>=0&&g<this._array.length)return this._array[g];throw new Error("No element indexed by "+g)}toArray(){return this._array.slice()}};arraySet.ArraySet=ArraySet$1;var mappingList={};const util$2=util$3;function generatedPositionAfter($,g){const j=$.generatedLine,_e=g.generatedLine,et=$.generatedColumn,tt=g.generatedColumn;return _e>j||_e==j&&tt>=et||util$2.compareByGeneratedPositionsInflated($,g)<=0}let MappingList$1=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(g,j){this._array.forEach(g,j)}add(g){generatedPositionAfter(this._last,g)?(this._last=g,this._array.push(g)):(this._sorted=!1,this._array.push(g))}toArray(){return this._sorted||(this._array.sort(util$2.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};mappingList.MappingList=MappingList$1;const base64VLQ=base64Vlq,util$1=util$3,ArraySet=arraySet.ArraySet,MappingList=mappingList.MappingList;let SourceMapGenerator$1=class ns{constructor(g){g||(g={}),this._file=util$1.getArg(g,"file",null),this._sourceRoot=util$1.getArg(g,"sourceRoot",null),this._skipValidation=util$1.getArg(g,"skipValidation",!1),this._sources=new ArraySet,this._names=new ArraySet,this._mappings=new MappingList,this._sourcesContents=null}static fromSourceMap(g){const j=g.sourceRoot,_e=new ns({file:g.file,sourceRoot:j});return g.eachMapping(function(et){const tt={generated:{line:et.generatedLine,column:et.generatedColumn}};et.source!=null&&(tt.source=et.source,j!=null&&(tt.source=util$1.relative(j,tt.source)),tt.original={line:et.originalLine,column:et.originalColumn},et.name!=null&&(tt.name=et.name)),_e.addMapping(tt)}),g.sources.forEach(function(et){let tt=et;j!=null&&(tt=util$1.relative(j,et)),_e._sources.has(tt)||_e._sources.add(tt);const nt=g.sourceContentFor(et);nt!=null&&_e.setSourceContent(et,nt)}),_e}addMapping(g){const j=util$1.getArg(g,"generated"),_e=util$1.getArg(g,"original",null);let et=util$1.getArg(g,"source",null),tt=util$1.getArg(g,"name",null);this._skipValidation||this._validateMapping(j,_e,et,tt),et!=null&&(et=String(et),this._sources.has(et)||this._sources.add(et)),tt!=null&&(tt=String(tt),this._names.has(tt)||this._names.add(tt)),this._mappings.add({generatedLine:j.line,generatedColumn:j.column,originalLine:_e&&_e.line,originalColumn:_e&&_e.column,source:et,name:tt})}setSourceContent(g,j){let _e=g;this._sourceRoot!=null&&(_e=util$1.relative(this._sourceRoot,_e)),j!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util$1.toSetString(_e)]=j):this._sourcesContents&&(delete this._sourcesContents[util$1.toSetString(_e)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(g,j,_e){let et=j;if(j==null){if(g.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);et=g.file}const tt=this._sourceRoot;tt!=null&&(et=util$1.relative(tt,et));const nt=this._mappings.toArray().length>0?new ArraySet:this._sources,rt=new ArraySet;this._mappings.unsortedForEach(function(it){if(it.source===et&&it.originalLine!=null){const at=g.originalPositionFor({line:it.originalLine,column:it.originalColumn});at.source!=null&&(it.source=at.source,_e!=null&&(it.source=util$1.join(_e,it.source)),tt!=null&&(it.source=util$1.relative(tt,it.source)),it.originalLine=at.line,it.originalColumn=at.column,at.name!=null&&(it.name=at.name))}const st=it.source;st!=null&&!nt.has(st)&&nt.add(st);const ot=it.name;ot!=null&&!rt.has(ot)&&rt.add(ot)},this),this._sources=nt,this._names=rt,g.sources.forEach(function(it){const st=g.sourceContentFor(it);st!=null&&(_e!=null&&(it=util$1.join(_e,it)),tt!=null&&(it=util$1.relative(tt,it)),this.setSourceContent(it,st))},this)}_validateMapping(g,j,_e,et){if(j&&typeof j.line!="number"&&typeof j.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(g&&"line"in g&&"column"in g&&g.line>0&&g.column>=0&&!j&&!_e&&!et)){if(!(g&&"line"in g&&"column"in g&&j&&"line"in j&&"column"in j&&g.line>0&&g.column>=0&&j.line>0&&j.column>=0&&_e))throw new Error("Invalid mapping: "+JSON.stringify({generated:g,source:_e,original:j,name:et}))}}_serializeMappings(){let g=0,j=1,_e=0,et=0,tt=0,nt=0,rt="",it,st,ot,at;const lt=this._mappings.toArray();for(let ut=0,ht=lt.length;ut<ht;ut++){if(st=lt[ut],it="",st.generatedLine!==j)for(g=0;st.generatedLine!==j;)it+=";",j++;else if(ut>0){if(!util$1.compareByGeneratedPositionsInflated(st,lt[ut-1]))continue;it+=","}it+=base64VLQ.encode(st.generatedColumn-g),g=st.generatedColumn,st.source!=null&&(at=this._sources.indexOf(st.source),it+=base64VLQ.encode(at-nt),nt=at,it+=base64VLQ.encode(st.originalLine-1-et),et=st.originalLine-1,it+=base64VLQ.encode(st.originalColumn-_e),_e=st.originalColumn,st.name!=null&&(ot=this._names.indexOf(st.name),it+=base64VLQ.encode(ot-tt),tt=ot)),rt+=it}return rt}_generateSourcesContent(g,j){return g.map(function(_e){if(!this._sourcesContents)return null;j!=null&&(_e=util$1.relative(j,_e));const et=util$1.toSetString(_e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,et)?this._sourcesContents[et]:null},this)}toJSON(){const g={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(g.file=this._file),this._sourceRoot!=null&&(g.sourceRoot=this._sourceRoot),this._sourcesContents&&(g.sourcesContent=this._generateSourcesContent(g.sources,g.sourceRoot)),g}toString(){return JSON.stringify(this.toJSON())}};SourceMapGenerator$1.prototype._version=3;sourceMapGenerator.SourceMapGenerator=SourceMapGenerator$1;var sourceNode={};const SourceMapGenerator=sourceMapGenerator.SourceMapGenerator,util=util$3,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";let SourceNode$2=class Br{constructor(g,j,_e,et,tt){this.children=[],this.sourceContents={},this.line=g??null,this.column=j??null,this.source=_e??null,this.name=tt??null,this[isSourceNode]=!0,et!=null&&this.add(et)}static fromStringWithSourceMap(g,j,_e){const et=new Br,tt=g.split(REGEX_NEWLINE);let nt=0;const rt=function(){const ut=ft(),ht=ft()||"";return ut+ht;function ft(){return nt<tt.length?tt[nt++]:void 0}};let it=1,st=0,ot=null,at;return j.eachMapping(function(ut){if(ot!==null)if(it<ut.generatedLine)lt(ot,rt()),it++,st=0;else{at=tt[nt]||"";const ht=at.substr(0,ut.generatedColumn-st);tt[nt]=at.substr(ut.generatedColumn-st),st=ut.generatedColumn,lt(ot,ht),ot=ut;return}for(;it<ut.generatedLine;)et.add(rt()),it++;st<ut.generatedColumn&&(at=tt[nt]||"",et.add(at.substr(0,ut.generatedColumn)),tt[nt]=at.substr(ut.generatedColumn),st=ut.generatedColumn),ot=ut},this),nt<tt.length&&(ot&&lt(ot,rt()),et.add(tt.splice(nt).join(""))),j.sources.forEach(function(ut){const ht=j.sourceContentFor(ut);ht!=null&&(_e!=null&&(ut=util.join(_e,ut)),et.setSourceContent(ut,ht))}),et;function lt(ut,ht){if(ut===null||ut.source===void 0)et.add(ht);else{const ft=_e?util.join(_e,ut.source):ut.source;et.add(new Br(ut.originalLine,ut.originalColumn,ft,ht,ut.name))}}}add(g){if(Array.isArray(g))g.forEach(function(j){this.add(j)},this);else if(g[isSourceNode]||typeof g=="string")g&&this.children.push(g);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+g);return this}prepend(g){if(Array.isArray(g))for(let j=g.length-1;j>=0;j--)this.prepend(g[j]);else if(g[isSourceNode]||typeof g=="string")this.children.unshift(g);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+g);return this}walk(g){let j;for(let _e=0,et=this.children.length;_e<et;_e++)j=this.children[_e],j[isSourceNode]?j.walk(g):j!==""&&g(j,{source:this.source,line:this.line,column:this.column,name:this.name})}join(g){let j,_e;const et=this.children.length;if(et>0){for(j=[],_e=0;_e<et-1;_e++)j.push(this.children[_e]),j.push(g);j.push(this.children[_e]),this.children=j}return this}replaceRight(g,j){const _e=this.children[this.children.length-1];return _e[isSourceNode]?_e.replaceRight(g,j):typeof _e=="string"?this.children[this.children.length-1]=_e.replace(g,j):this.children.push("".replace(g,j)),this}setSourceContent(g,j){this.sourceContents[util.toSetString(g)]=j}walkSourceContents(g){for(let _e=0,et=this.children.length;_e<et;_e++)this.children[_e][isSourceNode]&&this.children[_e].walkSourceContents(g);const j=Object.keys(this.sourceContents);for(let _e=0,et=j.length;_e<et;_e++)g(util.fromSetString(j[_e]),this.sourceContents[j[_e]])}toString(){let g="";return this.walk(function(j){g+=j}),g}toStringWithSourceMap(g){const j={code:"",line:1,column:0},_e=new SourceMapGenerator(g);let et=!1,tt=null,nt=null,rt=null,it=null;return this.walk(function(st,ot){j.code+=st,ot.source!==null&&ot.line!==null&&ot.column!==null?((tt!==ot.source||nt!==ot.line||rt!==ot.column||it!==ot.name)&&_e.addMapping({source:ot.source,original:{line:ot.line,column:ot.column},generated:{line:j.line,column:j.column},name:ot.name}),tt=ot.source,nt=ot.line,rt=ot.column,it=ot.name,et=!0):et&&(_e.addMapping({generated:{line:j.line,column:j.column}}),tt=null,et=!1);for(let at=0,lt=st.length;at<lt;at++)st.charCodeAt(at)===NEWLINE_CODE?(j.line++,j.column=0,at+1===lt?(tt=null,et=!1):et&&_e.addMapping({source:ot.source,original:{line:ot.line,column:ot.column},generated:{line:j.line,column:j.column},name:ot.name})):j.column++}),this.walkSourceContents(function(st,ot){_e.setSourceContent(st,ot)}),{code:j.code,map:_e}}};sourceNode.SourceNode=SourceNode$2;sourceMap.SourceMapGenerator=sourceMapGenerator.SourceMapGenerator;sourceMap.SourceNode=sourceNode.SourceNode;const{SourceNode:SourceNode$1}=sourceMap,GrammarLocation$2=grammarLocation;let Stack$1=class gr{constructor(g,j,_e,et){this.sp=-1,this.maxSp=-1,this.varName=j,this.ruleName=g,this.type=_e,this.bytecode=et,this.labels={},this.sourceMapStack=[]}name(g){if(g<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${g}.
Bytecode: ${this.bytecode}`);return this.varName+g}static sourceNode(g,j,_e){const et=GrammarLocation$2.offsetStart(g);return new SourceNode$1(et.line,et.column?et.column-1:null,String(g.source),j,_e)}push(g){++this.sp>this.maxSp&&(this.maxSp=this.sp);const j=this.labels[this.sp],_e=[this.name(this.sp)," = ",g,";"];if(j)if(this.sourceMapStack.length){const et=gr.sourceNode(j.location,_e.splice(0,2),j.label),{parts:tt,location:nt}=this.sourceMapPopInternal(),rt=nt.start.offset<j.location.end.offset?{start:j.location.end,end:nt.end,source:nt.source}:nt,it=gr.sourceNode(rt,_e.concat(`
`));return this.sourceMapStack.push([tt,tt.length+1,nt]),new SourceNode$1(null,null,j.location.source,[et,it])}else return gr.sourceNode(j.location,_e.concat(`
`));return _e.join("")}pop(g){return g!==void 0?(this.sp-=g,Array.from({length:g},(j,_e)=>this.name(this.sp+1+_e))):this.name(this.sp--)}top(){return this.name(this.sp)}index(g){if(g<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${g}.
Bytecode: ${this.bytecode}`);return this.name(this.sp-g)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result.
Bytecode: ${this.bytecode}`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(g,j)=>this.name(j)).join(", ")+";"}checkedIf(g,j,_e){const et=this.sp;if(j(),_e){const tt=this.sp;if(this.sp=et,_e(),tt!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+g+": Branches of a condition can't move the stack pointer differently (before: "+et+", after then: "+tt+", after else: "+this.sp+"). Bytecode: "+this.bytecode)}}checkedLoop(g,j){const _e=this.sp;if(j(),_e!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+g+": Body of a loop can't move the stack pointer (before: "+_e+", after: "+this.sp+"). Bytecode: "+this.bytecode)}sourceMapPush(g,j){if(this.sourceMapStack.length){const _e=this.sourceMapStack[this.sourceMapStack.length-1];_e[2].start.offset===j.start.offset&&_e[2].end.offset>j.end.offset&&(_e[2]={start:j.end,end:_e[2].end,source:_e[2].source})}this.sourceMapStack.push([g,g.length,j])}sourceMapPopInternal(){const[g,j,_e]=this.sourceMapStack.pop(),et=g.splice(j).map(tt=>tt instanceof SourceNode$1?tt:tt+`
`);if(et.length){const tt=GrammarLocation$2.offsetStart(_e);g.push(new SourceNode$1(tt.line,tt.column-1,String(_e.source),et))}return{parts:g,location:_e}}sourceMapPop(g){const{location:j}=this.sourceMapPopInternal();if(this.sourceMapStack.length&&j.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){const{parts:_e,location:et}=this.sourceMapPopInternal(),tt=et.start.offset<j.end.offset?{start:j.end,end:et.end,source:et.source}:et;this.sourceMapStack.push([_e,_e.length+(g||0),tt])}}};var stack=Stack$1,version="3.0.2",utils={};function hex($){return $.charCodeAt(0).toString(16).toUpperCase()}utils.hex=hex;function stringEscape$1($){return $.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,g=>"\\x0"+hex(g)).replace(/[\x10-\x1F\x7F-\xFF]/g,g=>"\\x"+hex(g)).replace(/[\u0100-\u0FFF]/g,g=>"\\u0"+hex(g)).replace(/[\u1000-\uFFFF]/g,g=>"\\u"+hex(g))}utils.stringEscape=stringEscape$1;function regexpClassEscape$1($){return $.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,g=>"\\x0"+hex(g)).replace(/[\x10-\x1F\x7F-\xFF]/g,g=>"\\x"+hex(g)).replace(/[\u0100-\u0FFF]/g,g=>"\\u0"+hex(g)).replace(/[\u1000-\uFFFF]/g,g=>"\\u"+hex(g))}utils.regexpClassEscape=regexpClassEscape$1;function base64$1($){const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=$.length%3,_e=$.length-j;let et="";for(let tt=0;tt<_e;tt+=3)et+=g[$[tt]>>2],et+=g[($[tt]&3)<<4|$[tt+1]>>4],et+=g[($[tt+1]&15)<<2|$[tt+2]>>6],et+=g[$[tt+2]&63];return j===1?(et+=g[$[_e]>>2],et+=g[($[_e]&3)<<4],et+="=="):j===2&&(et+=g[$[_e]>>2],et+=g[($[_e]&3)<<4|$[_e+1]>>4],et+=g[($[_e+1]&15)<<2],et+="="),et}utils.base64=base64$1;const asts$4=asts_1,op=opcodes_1,Stack=stack,VERSION$1=version,{stringEscape,regexpClassEscape}=utils,{SourceNode}=sourceMap,GrammarLocation$1=grammarLocation;function toSourceNode($,g,j){const _e=GrammarLocation$1.offsetStart(g),et=_e.line,tt=_e.column-1,nt=$.split(`
`);return nt.length===1?new SourceNode(et,tt,String(g.source),$,j):new SourceNode(null,null,String(g.source),nt.map((rt,it)=>new SourceNode(et+it,it===0?tt:0,String(g.source),it===nt.length-1?rt:[rt,`
`],j)))}function wrapInSourceNode($,g,j,_e,et){if(j){const tt=GrammarLocation$1.offsetEnd(j);return new SourceNode(null,null,String(j.source),[$,toSourceNode(g,j,et),new SourceNode(tt.line,tt.column-1,String(j.source),_e)])}return new SourceNode(null,null,null,[$,g,_e])}function generateJS$1($,g){function j(ft){let gt=!0,dt=0;function mt(yt){return Array.isArray(yt)?yt.map(mt):yt instanceof SourceNode?(dt++,yt.children=mt(yt.children),dt--,yt):(gt?yt=yt.replace(/^(.+)$/gm,"  $1"):yt=yt.replace(/\n(\s*\S)/g,`
  $1`),gt=!dt||yt.endsWith(`
`),yt)}return mt(ft)}function _e(ft){return"peg$c"+ft}function et(ft){return"peg$r"+ft}function tt(ft){return"peg$e"+ft}function nt(ft){return"peg$f"+ft}function rt(ft){return"peg$parse"+ft}function it(){function ft(yt){return'"'+stringEscape(yt)+'"'}function gt(yt){return"/^["+(yt.inverted?"^":"")+yt.value.map(Et=>Array.isArray(Et)?regexpClassEscape(Et[0])+"-"+regexpClassEscape(Et[1]):regexpClassEscape(Et)).join("")+"]/"+(yt.ignoreCase?"i":"")}function dt(yt){switch(yt.type){case"rule":return'peg$otherExpectation("'+stringEscape(yt.value)+'")';case"literal":return'peg$literalExpectation("'+stringEscape(yt.value)+'", '+yt.ignoreCase+")";case"class":return"peg$classExpectation(["+yt.value.map(Ct=>Array.isArray(Ct)?'["'+stringEscape(Ct[0])+'", "'+stringEscape(Ct[1])+'"]':'"'+stringEscape(Ct)+'"').join(", ")+"], "+yt.inverted+", "+yt.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(yt)+")")}}function mt(yt,Et){return wrapInSourceNode(`
  var ${nt(Et)} = function(${yt.params.join(", ")}) {`,yt.body,yt.location,"};")}return new SourceNode(null,null,g.grammarSource,[$.literals.map((yt,Et)=>"  var "+_e(Et)+" = "+ft(yt)+";").concat("",$.classes.map((yt,Et)=>"  var "+et(Et)+" = "+gt(yt)+";")).concat("",$.expectations.map((yt,Et)=>"  var "+tt(Et)+" = "+dt(yt)+";")).concat("").join(`
`),$.functions.map(mt)])}function st(ft,gt){const dt=[];return dt.push(""),g.trace&&dt.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+ft+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),g.cache&&(dt.push("var key = peg$currPos * "+$.rules.length+" + "+gt+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),g.trace&&dt.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ft+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ft+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),dt.push("  return cached.result;","}","")),dt}function ot(ft,gt){const dt=[];return g.cache&&dt.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+gt+" };"),g.trace&&dt.push("","if ("+gt+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+ft+",","    result: "+gt+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+ft+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),dt.push("","return "+gt+";"),dt}function at(ft){const gt=[],dt=new Stack(ft.name,"s","var",ft.bytecode);function mt(Et){let Ct=0;const kt=Et.length,St=[];let Pt;function Bt($t,Mt){const Ot=Mt+3,jt=Et[Ct+Ot-2],Yt=Et[Ct+Ot-1];let Ut,Nt;dt.checkedIf(Ct,()=>{Ct+=Ot,Ut=mt(Et.slice(Ct,Ct+jt)),Ct+=jt},Yt>0?()=>{Nt=mt(Et.slice(Ct,Ct+Yt)),Ct+=Yt}:null),St.push("if ("+$t+") {"),St.push(...j(Ut)),Yt>0&&(St.push("} else {"),St.push(...j(Nt))),St.push("}")}function xt($t){const Ot=Et[Ct+2-1];let jt;dt.checkedLoop(Ct,()=>{Ct+=2,jt=mt(Et.slice(Ct,Ct+Ot)),Ct+=Ot}),St.push("while ("+$t+") {"),St.push(...j(jt)),St.push("}")}function bt($t){const Mt=Et[Ct+$t-1];return nt(Et[Ct+1])+"("+Et.slice(Ct+$t,Ct+$t+Mt).map(Ot=>dt.index(Ot)).join(", ")+")"}for(;Ct<kt;)switch(Et[Ct]){case op.PUSH_EMPTY_STRING:St.push(dt.push("''")),Ct++;break;case op.PUSH_CURR_POS:St.push(dt.push("peg$currPos")),Ct++;break;case op.PUSH_UNDEFINED:St.push(dt.push("undefined")),Ct++;break;case op.PUSH_NULL:St.push(dt.push("null")),Ct++;break;case op.PUSH_FAILED:St.push(dt.push("peg$FAILED")),Ct++;break;case op.PUSH_EMPTY_ARRAY:St.push(dt.push("[]")),Ct++;break;case op.POP:dt.pop(),Ct++;break;case op.POP_CURR_POS:St.push("peg$currPos = "+dt.pop()+";"),Ct++;break;case op.POP_N:dt.pop(Et[Ct+1]),Ct+=2;break;case op.NIP:Pt=dt.pop(),dt.pop(),St.push(dt.push(Pt)),Ct++;break;case op.APPEND:Pt=dt.pop(),St.push(dt.top()+".push("+Pt+");"),Ct++;break;case op.WRAP:St.push(dt.push("["+dt.pop(Et[Ct+1]).join(", ")+"]")),Ct+=2;break;case op.TEXT:St.push(dt.push("input.substring("+dt.pop()+", peg$currPos)")),Ct++;break;case op.PLUCK:{const Mt=Et[Ct+3-1],Ot=3+Mt;Pt=Et.slice(Ct+3,Ct+Ot),Pt=Mt===1?dt.index(Pt[0]):`[ ${Pt.map(jt=>dt.index(jt)).join(", ")} ]`,dt.pop(Et[Ct+1]),St.push(dt.push(Pt)),Ct+=Ot;break}case op.IF:Bt(dt.top(),0);break;case op.IF_ERROR:Bt(dt.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:Bt(dt.top()+" !== peg$FAILED",0);break;case op.IF_LT:Bt(dt.top()+".length < "+Et[Ct+1],1);break;case op.IF_GE:Bt(dt.top()+".length >= "+Et[Ct+1],1);break;case op.IF_LT_DYNAMIC:Bt(dt.top()+".length < ("+dt.index(Et[Ct+1])+"|0)",1);break;case op.IF_GE_DYNAMIC:Bt(dt.top()+".length >= ("+dt.index(Et[Ct+1])+"|0)",1);break;case op.WHILE_NOT_ERROR:xt(dt.top()+" !== peg$FAILED");break;case op.MATCH_ANY:Bt("input.length > peg$currPos",0);break;case op.MATCH_STRING:Bt($.literals[Et[Ct+1]].length>1?"input.substr(peg$currPos, "+$.literals[Et[Ct+1]].length+") === "+_e(Et[Ct+1]):"input.charCodeAt(peg$currPos) === "+$.literals[Et[Ct+1]].charCodeAt(0),1);break;case op.MATCH_STRING_IC:Bt("input.substr(peg$currPos, "+$.literals[Et[Ct+1]].length+").toLowerCase() === "+_e(Et[Ct+1]),1);break;case op.MATCH_CHAR_CLASS:Bt(et(Et[Ct+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:St.push(dt.push(Et[Ct+1]>1?"input.substr(peg$currPos, "+Et[Ct+1]+")":"input.charAt(peg$currPos)")),St.push(Et[Ct+1]>1?"peg$currPos += "+Et[Ct+1]+";":"peg$currPos++;"),Ct+=2;break;case op.ACCEPT_STRING:St.push(dt.push(_e(Et[Ct+1]))),St.push($.literals[Et[Ct+1]].length>1?"peg$currPos += "+$.literals[Et[Ct+1]].length+";":"peg$currPos++;"),Ct+=2;break;case op.FAIL:St.push(dt.push("peg$FAILED")),St.push("if (peg$silentFails === 0) { peg$fail("+tt(Et[Ct+1])+"); }"),Ct+=2;break;case op.LOAD_SAVED_POS:St.push("peg$savedPos = "+dt.index(Et[Ct+1])+";"),Ct+=2;break;case op.UPDATE_SAVED_POS:St.push("peg$savedPos = peg$currPos;"),Ct++;break;case op.CALL:Pt=bt(4),dt.pop(Et[Ct+2]),St.push(dt.push(Pt)),Ct+=4+Et[Ct+3];break;case op.RULE:St.push(dt.push(rt($.rules[Et[Ct+1]].name)+"()")),Ct+=2;break;case op.SILENT_FAILS_ON:St.push("peg$silentFails++;"),Ct++;break;case op.SILENT_FAILS_OFF:St.push("peg$silentFails--;"),Ct++;break;case op.SOURCE_MAP_PUSH:dt.sourceMapPush(St,$.locations[Et[Ct+1]]),Ct+=2;break;case op.SOURCE_MAP_POP:{dt.sourceMapPop(),Ct++;break}case op.SOURCE_MAP_LABEL_PUSH:dt.labels[Et[Ct+1]]={label:$.literals[Et[Ct+2]],location:$.locations[Et[Ct+3]]},Ct+=4;break;case op.SOURCE_MAP_LABEL_POP:delete dt.labels[Et[Ct+1]],Ct+=2;break;default:throw new Error("Invalid opcode: "+Et[Ct]+".",{rule:ft.name,bytecode:Et})}return St}const yt=mt(ft.bytecode);return gt.push(wrapInSourceNode("function ",rt(ft.name),ft.nameLocation,`() {
`,ft.name)),g.trace&&gt.push("  var startPos = peg$currPos;"),gt.push(j(dt.defines())),gt.push(...j(st('"'+stringEscape(ft.name)+'"',asts$4.indexOfRule($,ft.name)))),gt.push(...j(yt)),gt.push(...j(ot('"'+stringEscape(ft.name)+'"',dt.result()))),gt.push("}"),gt}function lt(ft){return ft.codeLocation?toSourceNode(ft.code,ft.codeLocation,"$"+ft.type):ft.code}function ut(){const ft=[];$.topLevelInitializer&&(ft.push(lt($.topLevelInitializer)),ft.push("")),ft.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"      ? this.location.source.offset(s)","      : s;",'    var loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", offset_s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + offset_s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),g.trace&&ft.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");const gt="{ "+g.allowedStartRules.map(mt=>mt+": "+rt(mt)).join(", ")+" }",dt=rt(g.allowedStartRules[0]);return ft.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+gt+";","  var peg$startRuleFunction = "+dt+";","",it(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),g.cache&&ft.push("  var peg$resultsCache = {};",""),g.trace&&ft.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),ft.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    var res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),$.rules.forEach(mt=>{ft.push(...j(at(mt))),ft.push("")}),$.initializer&&(ft.push(lt($.initializer)),ft.push("")),ft.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new SourceNode(null,null,g.grammarSource,ft.map(mt=>mt instanceof SourceNode?mt:mt+`
`))}function ht(ft){function gt(){return[`// Generated by Peggy ${VERSION$1}.`,"//","// https://peggyjs.org/"]}function dt(){return g.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}const yt={bare(){return[...gt(),"(function() {",'  "use strict";',"",ft,"",j("return "+dt()+";"),"})()"]},commonjs(){const Et=Object.keys(g.dependencies),Ct=gt();return Ct.push("",'"use strict";',""),Et.length>0&&(Et.forEach(kt=>{Ct.push("var "+kt+' = require("'+stringEscape(g.dependencies[kt])+'");')}),Ct.push("")),Ct.push(ft,"","module.exports = "+dt()+";"),Ct},es(){const Et=Object.keys(g.dependencies),Ct=gt();return Ct.push(""),Et.length>0&&(Et.forEach(kt=>{Ct.push("import "+kt+' from "'+stringEscape(g.dependencies[kt])+'";')}),Ct.push("")),Ct.push(ft,"","export {","  peg$SyntaxError as SyntaxError,",g.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),Ct},amd(){const Et=Object.keys(g.dependencies),kt="["+Et.map(Pt=>g.dependencies[Pt]).map(Pt=>'"'+stringEscape(Pt)+'"').join(", ")+"]",St=Et.join(", ");return[...gt(),"define("+kt+", function("+St+") {",'  "use strict";',"",ft,"",j("return "+dt()+";"),"});"]},globals(){return[...gt(),"(function(root) {",'  "use strict";',"",ft,"",j("root."+g.exportVar+" = "+dt()+";"),"})(this);"]},umd(){const Et=Object.keys(g.dependencies),Ct=Et.map(xt=>g.dependencies[xt]),kt="["+Ct.map(xt=>'"'+stringEscape(xt)+'"').join(", ")+"]",St=Ct.map(xt=>'require("'+stringEscape(xt)+'")').join(", "),Pt=Et.join(", "),Bt=gt();return Bt.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+kt+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+St+");"),g.exportVar!==null&&Bt.push("  } else {","    root."+g.exportVar+" = factory();"),Bt.push("  }","})(this, function("+Pt+") {",'  "use strict";',"",ft,"",j("return "+dt()+";"),"});"),Bt}}[g.format]();return new SourceNode(null,null,g.grammarSource,yt.map(Et=>Et instanceof SourceNode?Et:Et+`
`))}$.code=ht(ut())}var generateJs=generateJS$1;const asts$3=asts_1,visitor$7=visitor_1;function removeProxyRules$1($,g,j){function _e(nt){return nt.type==="rule"&&nt.expression.type==="rule_ref"}function et(nt,rt,it){visitor$7.build({rule_ref(ot){ot.name===rt&&(ot.name=it,j.info(`Proxy rule "${rt}" replaced by the rule "${it}"`,ot.location,[{message:"This rule will be used",location:asts$3.findRule(nt,it).nameLocation}]))}})(nt)}const tt=[];$.rules.forEach((nt,rt)=>{_e(nt)&&(et($,nt.name,nt.expression.name),g.allowedStartRules.indexOf(nt.name)===-1&&tt.push(rt))}),tt.reverse(),tt.forEach(nt=>{$.rules.splice(nt,1)})}var removeProxyRules_1=removeProxyRules$1;const visitor$6=visitor_1;function reportDuplicateLabels$1($,g,j){function _e(nt){const rt={};return Object.keys(nt).forEach(it=>{rt[it]=nt[it]}),rt}function et(nt,rt){tt(nt.expression,_e(rt))}const tt=visitor$6.build({rule(nt){tt(nt.expression,{})},choice(nt,rt){nt.alternatives.forEach(it=>{tt(it,_e(rt))})},action:et,labeled(nt,rt){const it=nt.label;it&&Object.prototype.hasOwnProperty.call(rt,it)&&j.error(`Label "${nt.label}" is already defined`,nt.labelLocation,[{message:"Original label location",location:rt[it]}]),tt(nt.expression,rt),rt[nt.label]=nt.labelLocation},text:et,simple_and:et,simple_not:et,optional:et,zero_or_more:et,one_or_more:et,repeated(nt,rt){nt.delimiter&&tt(nt.delimiter,_e(rt)),tt(nt.expression,_e(rt))},group:et});tt($)}var reportDuplicateLabels_1=reportDuplicateLabels$1;const visitor$5=visitor_1;function reportDuplicateRules$1($,g,j){const _e={};visitor$5.build({rule(tt){if(Object.prototype.hasOwnProperty.call(_e,tt.name)){j.error(`Rule "${tt.name}" is already defined`,tt.nameLocation,[{message:"Original rule location",location:_e[tt.name]}]);return}_e[tt.name]=tt.nameLocation}})($)}var reportDuplicateRules_1=reportDuplicateRules$1;const asts$2=asts_1,visitor$4=visitor_1;function reportInfiniteRecursion$1($,g,j){const _e=[],et=[],tt=visitor$4.build({rule(nt){_e.push(nt.name),tt(nt.expression),_e.pop()},sequence(nt){nt.elements.every(rt=>(tt(rt),!asts$2.alwaysConsumesOnSuccess($,rt)))},repeated(nt){tt(nt.expression),nt.delimiter&&!asts$2.alwaysConsumesOnSuccess($,nt.expression)&&tt(nt.delimiter)},rule_ref(nt){et.push(nt);const rt=asts$2.findRule($,nt.name);if(_e.indexOf(nt.name)!==-1){_e.push(nt.name),j.error("Possible infinite loop when parsing (left recursion: "+_e.join(" -> ")+")",rt.nameLocation,et.map((it,st,ot)=>({message:st+1!==ot.length?`Step ${st+1}: call of the rule "${it.name}" without input consumption`:`Step ${st+1}: call itself without input consumption - left recursion`,location:it.location})));return}rt&&tt(rt),et.pop()}});tt($)}var reportInfiniteRecursion_1=reportInfiniteRecursion$1;const asts$1=asts_1,visitor$3=visitor_1;function reportInfiniteRepetition$1($,g,j){const _e=visitor$3.build({zero_or_more(et){asts$1.alwaysConsumesOnSuccess($,et.expression)||j.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",et.location)},one_or_more(et){asts$1.alwaysConsumesOnSuccess($,et.expression)||j.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",et.location)},repeated(et){if(et.delimiter&&_e(et.delimiter),!(asts$1.alwaysConsumesOnSuccess($,et.expression)||et.delimiter&&asts$1.alwaysConsumesOnSuccess($,et.delimiter)))if(et.max.value===null)j.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",et.location);else{const tt=et.min?et.min:et.max;j.warning(tt.type==="constant"&&et.max.type==="constant"?`An expression may not consume any input and may always match ${et.max.value} times`:"An expression may not consume any input and may always match with a maximum repetition count",et.location)}}});_e($)}var reportInfiniteRepetition_1=reportInfiniteRepetition$1;const asts=asts_1,visitor$2=visitor_1;function reportUndefinedRules$1($,g,j){visitor$2.build({rule_ref(et){asts.findRule($,et.name)||j.error(`Rule "${et.name}" is not defined`,et.location)}})($)}var reportUndefinedRules_1=reportUndefinedRules$1;const visitor$1=visitor_1;function reportIncorrectPlucking$1($,g,j){const _e=visitor$1.build({action(et){_e(et.expression,et)},labeled(et,tt){et.pick&&tt&&j.error('"@" cannot be used with an action block',et.labelLocation,[{message:"Action block location",location:tt.codeLocation}]),_e(et.expression)}});_e($)}var reportIncorrectPlucking_1=reportIncorrectPlucking$1;const GrammarError$1=grammarError;class Defaults{constructor(g){g=typeof g<"u"?g:{},typeof g.error=="function"&&(this.error=g.error),typeof g.warning=="function"&&(this.warning=g.warning),typeof g.info=="function"&&(this.info=g.info)}error(){}warning(){}info(){}}let Session$1=class{constructor(g){this._callbacks=new Defaults(g),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...g){++this.errors,this._firstError===null&&(this._firstError=new GrammarError$1(...g),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...g]),this._callbacks.error(this.stage,...g)}warning(...g){this.problems.push(["warning",...g]),this._callbacks.warning(this.stage,...g)}info(...g){this.problems.push(["info",...g]),this._callbacks.info(this.stage,...g)}checkErrors(){if(this.errors!==0)throw this._firstError}};var session=Session$1;const generateBytecode=generateBytecode_1,generateJS=generateJs,inferenceMatchResult=inferenceMatchResult_1,removeProxyRules=removeProxyRules_1,reportDuplicateLabels=reportDuplicateLabels_1,reportDuplicateRules=reportDuplicateRules_1,reportInfiniteRecursion=reportInfiniteRecursion_1,reportInfiniteRepetition=reportInfiniteRepetition_1,reportUndefinedRules=reportUndefinedRules_1,reportIncorrectPlucking=reportIncorrectPlucking_1,Session=session,visitor=visitor_1,{base64}=utils;function processOptions($,g){const j={};return Object.keys($).forEach(_e=>{j[_e]=$[_e]}),Object.keys(g).forEach(_e=>{Object.prototype.hasOwnProperty.call(j,_e)||(j[_e]=g[_e])}),j}function isSourceMapCapable($){return typeof $=="string"?$.length>0:$&&typeof $.offset=="function"}const compiler$1={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");const allRules=ast.rules.map($=>$.name);if(options.allowedStartRules.some($=>$==="*"))options.allowedStartRules=allRules;else for(const $ of options.allowedStartRules)if(allRules.indexOf($)===-1)throw new Error(`Unknown start rule "${$}"`);if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");const session=new Session(options);switch(Object.keys(passes).forEach($=>{session.stage=$,session.info(`Process stage ${$}`),passes[$].forEach(g=>{session.info(`Process pass ${$}.${g.name}`),g(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if(typeof TextEncoder>"u")throw new Error("TextEncoder is not supported by this platform");const $=ast.code.toStringWithSourceMap(),g=new TextEncoder,j=base64(g.encode(JSON.stringify($.map.toJSON())));return $.code+`//# sourceMappingURL=data:application/json;charset=utf-8;base64,${j}
`}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};var compiler_1=compiler$1;const OPS_TO_PREFIXED_TYPES={$:"text","&":"simple_and","!":"simple_not"},OPS_TO_SUFFIXED_TYPES={"?":"optional","*":"zero_or_more","+":"one_or_more"},OPS_TO_SEMANTIC_PREDICATE_TYPES={"&":"semantic_and","!":"semantic_not"};function peg$subclass($,g){function j(){this.constructor=$}j.prototype=g.prototype,$.prototype=new j}function peg$SyntaxError($,g,j,_e){var et=Error.call(this,$);return Object.setPrototypeOf&&Object.setPrototypeOf(et,peg$SyntaxError.prototype),et.expected=g,et.found=j,et.location=_e,et.name="SyntaxError",et}peg$subclass(peg$SyntaxError,Error);function peg$padEnd($,g,j){return j=j||" ",$.length>g?$:(g-=$.length,j+=j.repeat(g),$+j.slice(0,g))}peg$SyntaxError.prototype.format=function($){var g="Error: "+this.message;if(this.location){var j=null,_e;for(_e=0;_e<$.length;_e++)if($[_e].source===this.location.source){j=$[_e].text.split(/\r\n|\n|\r/g);break}var et=this.location.start,tt=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(et):et,nt=this.location.source+":"+tt.line+":"+tt.column;if(j){var rt=this.location.end,it=peg$padEnd("",tt.line.toString().length," "),st=j[et.line-1],ot=et.line===rt.line?rt.column:st.length+1,at=ot-et.column||1;g+=`
 --> `+nt+`
`+it+` |
`+tt.line+" | "+st+`
`+it+" | "+peg$padEnd("",et.column-1," ")+peg$padEnd("",at,"^")}else g+=`
 at `+nt}return g};peg$SyntaxError.buildMessage=function($,g){var j={literal:function(st){return'"'+et(st.text)+'"'},class:function(st){var ot=st.parts.map(function(at){return Array.isArray(at)?tt(at[0])+"-"+tt(at[1]):tt(at)});return"["+(st.inverted?"^":"")+ot.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(st){return st.description}};function _e(st){return st.charCodeAt(0).toString(16).toUpperCase()}function et(st){return st.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ot){return"\\x0"+_e(ot)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ot){return"\\x"+_e(ot)})}function tt(st){return st.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ot){return"\\x0"+_e(ot)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ot){return"\\x"+_e(ot)})}function nt(st){return j[st.type](st)}function rt(st){var ot=st.map(nt),at,lt;if(ot.sort(),ot.length>0){for(at=1,lt=1;at<ot.length;at++)ot[at-1]!==ot[at]&&(ot[lt]=ot[at],lt++);ot.length=lt}switch(ot.length){case 1:return ot[0];case 2:return ot[0]+" or "+ot[1];default:return ot.slice(0,-1).join(", ")+", or "+ot[ot.length-1]}}function it(st){return st?'"'+et(st)+'"':"end of input"}return"Expected "+rt($)+" but "+it(g)+" found."};function peg$parse($,g){g=g!==void 0?g:{};var j={},_e=g.grammarSource,et={Grammar:Vr},tt=Vr,nt="{",rt="}",it="=",st="/",ot="@",at=":",lt="$",ut="&",ht="!",ft="?",gt="*",dt="+",mt="|",yt=",",Et="..",Ct="(",kt=")",St="	",Pt="\v",Bt="\f",xt=" ",bt=" ",$t="\uFEFF",Mt=`
`,Ot=`\r
`,jt="\r",Yt="\u2028",Ut="\u2029",Nt="/*",It="*/",Ht="//",Gt="_",Kt="\\",rn="‌",sn="‍",cn="i",un='"',En="'",Bn="[",Un="^",Tn="]",Ln="-",Nn="0",_n="b",wn="f",Vn="n",zn="r",Wn="t",Mn="v",Fn="x",Sn="u",An=".",bn=";",Dn=/^[\n\r\u2028\u2029]/,dn=/^[0-9]/,_t=/^[0-9a-f]/i,Ft=/^[{}]/,Vt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Wt=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,zt=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Zt=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Qt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,en=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,Xt=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,hn=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,tn=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,on=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,gn=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,fn=qt("{",!1),yn=qt("}",!1),kn=qt("=",!1),$n=qt("/",!1),ln=qt("@",!1),Qn=qt(":",!1),pn=qt("$",!1),xn=qt("&",!1),Rn=qt("!",!1),Gn=qt("?",!1),Zn=qt("*",!1),mr=qt("+",!1),tr=qt("|",!1),Pn=qt(",",!1),Jn=qt("..",!1),nr=qt("(",!1),yr=qt(")",!1),_r=Ho(),rs=Hn("whitespace"),ss=qt("	",!1),os=qt("\v",!1),as=qt("\f",!1),ls=qt(" ",!1),us=qt(" ",!1),cs=qt("\uFEFF",!1),hs=vn([`
`,"\r","\u2028","\u2029"],!1,!1),fs=Hn("end of line"),ds=qt(`
`,!1),ps=qt(`\r
`,!1),gs=qt("\r",!1),ms=qt("\u2028",!1),ys=qt("\u2029",!1),vs=Hn("comment"),Mr=qt("/*",!1),Yn=qt("*/",!1),Es=qt("//",!1),Cs=Hn("identifier"),As=qt("_",!1),In=qt("\\",!1),xs=qt("‌",!1),ws=qt("‍",!1),Ss=Hn("literal"),Fr=qt("i",!1),bs=Hn("string"),rr=qt('"',!1),ir=qt("'",!1),ks=Hn("character class"),Ts=qt("[",!1),Ds=qt("^",!1),Rr=qt("]",!1),$s=qt("-",!1),Ps=qt("0",!1),Bs=qt("b",!1),_s=qt("f",!1),Ms=qt("n",!1),Fs=qt("r",!1),Rs=qt("t",!1),Os=qt("v",!1),Or=qt("x",!1),Lr=qt("u",!1),Ls=vn([["0","9"]],!1,!1),Ns=vn([["0","9"],["a","f"]],!1,!0),Is=qt(".",!1),Vs=Hn("code block"),sr=vn(["{","}"],!1,!1),Hs=vn([["a","z"],"µ",["ß","ö"],["ø","ÿ"],"ā","ă","ą","ć","ĉ","ċ","č","ď","đ","ē","ĕ","ė","ę","ě","ĝ","ğ","ġ","ģ","ĥ","ħ","ĩ","ī","ĭ","į","ı","ĳ","ĵ",["ķ","ĸ"],"ĺ","ļ","ľ","ŀ","ł","ń","ņ",["ň","ŉ"],"ŋ","ō","ŏ","ő","œ","ŕ","ŗ","ř","ś","ŝ","ş","š","ţ","ť","ŧ","ũ","ū","ŭ","ů","ű","ų","ŵ","ŷ","ź","ż",["ž","ƀ"],"ƃ","ƅ","ƈ",["ƌ","ƍ"],"ƒ","ƕ",["ƙ","ƛ"],"ƞ","ơ","ƣ","ƥ","ƨ",["ƪ","ƫ"],"ƭ","ư","ƴ","ƶ",["ƹ","ƺ"],["ƽ","ƿ"],"ǆ","ǉ","ǌ","ǎ","ǐ","ǒ","ǔ","ǖ","ǘ","ǚ",["ǜ","ǝ"],"ǟ","ǡ","ǣ","ǥ","ǧ","ǩ","ǫ","ǭ",["ǯ","ǰ"],"ǳ","ǵ","ǹ","ǻ","ǽ","ǿ","ȁ","ȃ","ȅ","ȇ","ȉ","ȋ","ȍ","ȏ","ȑ","ȓ","ȕ","ȗ","ș","ț","ȝ","ȟ","ȡ","ȣ","ȥ","ȧ","ȩ","ȫ","ȭ","ȯ","ȱ",["ȳ","ȹ"],"ȼ",["ȿ","ɀ"],"ɂ","ɇ","ɉ","ɋ","ɍ",["ɏ","ʓ"],["ʕ","ʯ"],"ͱ","ͳ","ͷ",["ͻ","ͽ"],"ΐ",["ά","ώ"],["ϐ","ϑ"],["ϕ","ϗ"],"ϙ","ϛ","ϝ","ϟ","ϡ","ϣ","ϥ","ϧ","ϩ","ϫ","ϭ",["ϯ","ϳ"],"ϵ","ϸ",["ϻ","ϼ"],["а","џ"],"ѡ","ѣ","ѥ","ѧ","ѩ","ѫ","ѭ","ѯ","ѱ","ѳ","ѵ","ѷ","ѹ","ѻ","ѽ","ѿ","ҁ","ҋ","ҍ","ҏ","ґ","ғ","ҕ","җ","ҙ","қ","ҝ","ҟ","ҡ","ң","ҥ","ҧ","ҩ","ҫ","ҭ","ү","ұ","ҳ","ҵ","ҷ","ҹ","һ","ҽ","ҿ","ӂ","ӄ","ӆ","ӈ","ӊ","ӌ",["ӎ","ӏ"],"ӑ","ӓ","ӕ","ӗ","ә","ӛ","ӝ","ӟ","ӡ","ӣ","ӥ","ӧ","ө","ӫ","ӭ","ӯ","ӱ","ӳ","ӵ","ӷ","ӹ","ӻ","ӽ","ӿ","ԁ","ԃ","ԅ","ԇ","ԉ","ԋ","ԍ","ԏ","ԑ","ԓ","ԕ","ԗ","ԙ","ԛ","ԝ","ԟ","ԡ","ԣ","ԥ","ԧ","ԩ","ԫ","ԭ","ԯ",["ա","և"],["ᏸ","ᏽ"],["ᴀ","ᴫ"],["ᵫ","ᵷ"],["ᵹ","ᶚ"],"ḁ","ḃ","ḅ","ḇ","ḉ","ḋ","ḍ","ḏ","ḑ","ḓ","ḕ","ḗ","ḙ","ḛ","ḝ","ḟ","ḡ","ḣ","ḥ","ḧ","ḩ","ḫ","ḭ","ḯ","ḱ","ḳ","ḵ","ḷ","ḹ","ḻ","ḽ","ḿ","ṁ","ṃ","ṅ","ṇ","ṉ","ṋ","ṍ","ṏ","ṑ","ṓ","ṕ","ṗ","ṙ","ṛ","ṝ","ṟ","ṡ","ṣ","ṥ","ṧ","ṩ","ṫ","ṭ","ṯ","ṱ","ṳ","ṵ","ṷ","ṹ","ṻ","ṽ","ṿ","ẁ","ẃ","ẅ","ẇ","ẉ","ẋ","ẍ","ẏ","ẑ","ẓ",["ẕ","ẝ"],"ẟ","ạ","ả","ấ","ầ","ẩ","ẫ","ậ","ắ","ằ","ẳ","ẵ","ặ","ẹ","ẻ","ẽ","ế","ề","ể","ễ","ệ","ỉ","ị","ọ","ỏ","ố","ồ","ổ","ỗ","ộ","ớ","ờ","ở","ỡ","ợ","ụ","ủ","ứ","ừ","ử","ữ","ự","ỳ","ỵ","ỷ","ỹ","ỻ","ỽ",["ỿ","ἇ"],["ἐ","ἕ"],["ἠ","ἧ"],["ἰ","ἷ"],["ὀ","ὅ"],["ὐ","ὗ"],["ὠ","ὧ"],["ὰ","ώ"],["ᾀ","ᾇ"],["ᾐ","ᾗ"],["ᾠ","ᾧ"],["ᾰ","ᾴ"],["ᾶ","ᾷ"],"ι",["ῂ","ῄ"],["ῆ","ῇ"],["ῐ","ΐ"],["ῖ","ῗ"],["ῠ","ῧ"],["ῲ","ῴ"],["ῶ","ῷ"],"ℊ",["ℎ","ℏ"],"ℓ","ℯ","ℴ","ℹ",["ℼ","ℽ"],["ⅆ","ⅉ"],"ⅎ","ↄ",["ⰰ","ⱞ"],"ⱡ",["ⱥ","ⱦ"],"ⱨ","ⱪ","ⱬ","ⱱ",["ⱳ","ⱴ"],["ⱶ","ⱻ"],"ⲁ","ⲃ","ⲅ","ⲇ","ⲉ","ⲋ","ⲍ","ⲏ","ⲑ","ⲓ","ⲕ","ⲗ","ⲙ","ⲛ","ⲝ","ⲟ","ⲡ","ⲣ","ⲥ","ⲧ","ⲩ","ⲫ","ⲭ","ⲯ","ⲱ","ⲳ","ⲵ","ⲷ","ⲹ","ⲻ","ⲽ","ⲿ","ⳁ","ⳃ","ⳅ","ⳇ","ⳉ","ⳋ","ⳍ","ⳏ","ⳑ","ⳓ","ⳕ","ⳗ","ⳙ","ⳛ","ⳝ","ⳟ","ⳡ",["ⳣ","ⳤ"],"ⳬ","ⳮ","ⳳ",["ⴀ","ⴥ"],"ⴧ","ⴭ","ꙁ","ꙃ","ꙅ","ꙇ","ꙉ","ꙋ","ꙍ","ꙏ","ꙑ","ꙓ","ꙕ","ꙗ","ꙙ","ꙛ","ꙝ","ꙟ","ꙡ","ꙣ","ꙥ","ꙧ","ꙩ","ꙫ","ꙭ","ꚁ","ꚃ","ꚅ","ꚇ","ꚉ","ꚋ","ꚍ","ꚏ","ꚑ","ꚓ","ꚕ","ꚗ","ꚙ","ꚛ","ꜣ","ꜥ","ꜧ","ꜩ","ꜫ","ꜭ",["ꜯ","ꜱ"],"ꜳ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ꜿ","ꝁ","ꝃ","ꝅ","ꝇ","ꝉ","ꝋ","ꝍ","ꝏ","ꝑ","ꝓ","ꝕ","ꝗ","ꝙ","ꝛ","ꝝ","ꝟ","ꝡ","ꝣ","ꝥ","ꝧ","ꝩ","ꝫ","ꝭ","ꝯ",["ꝱ","ꝸ"],"ꝺ","ꝼ","ꝿ","ꞁ","ꞃ","ꞅ","ꞇ","ꞌ","ꞎ","ꞑ",["ꞓ","ꞕ"],"ꞗ","ꞙ","ꞛ","ꞝ","ꞟ","ꞡ","ꞣ","ꞥ","ꞧ","ꞩ","ꞵ","ꞷ","ꟺ",["ꬰ","ꭚ"],["ꭠ","ꭥ"],["ꭰ","ꮿ"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],["ａ","ｚ"]],!1,!1),js=vn([["ʰ","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ","ʹ","ͺ","ՙ","ـ",["ۥ","ۦ"],["ߴ","ߵ"],"ߺ","ࠚ","ࠤ","ࠨ","ॱ","ๆ","ໆ","ჼ","ៗ","ᡃ","ᪧ",["ᱸ","ᱽ"],["ᴬ","ᵪ"],"ᵸ",["ᶛ","ᶿ"],"ⁱ","ⁿ",["ₐ","ₜ"],["ⱼ","ⱽ"],"ⵯ","ⸯ","々",["〱","〵"],"〻",["ゝ","ゞ"],["ー","ヾ"],"ꀕ",["ꓸ","ꓽ"],"ꘌ","ꙿ",["ꚜ","ꚝ"],["ꜗ","ꜟ"],"ꝰ","ꞈ",["ꟸ","ꟹ"],"ꧏ","ꧦ","ꩰ","ꫝ",["ꫳ","ꫴ"],["ꭜ","ꭟ"],"ｰ",["ﾞ","ﾟ"]],!1,!1),Us=vn(["ª","º","ƻ",["ǀ","ǃ"],"ʔ",["א","ת"],["װ","ײ"],["ؠ","ؿ"],["ف","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ࠀ","ࠕ"],["ࡀ","ࡘ"],["ࢠ","ࢴ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॲ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๅ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["ა","ჺ"],["ჽ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛱ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៜ",["ᠠ","ᡂ"],["ᡄ","ᡷ"],["ᢀ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱷ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ℵ","ℸ"],["ⴰ","ⵧ"],["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"〆","〼",["ぁ","ゖ"],"ゟ",["ァ","ヺ"],"ヿ",["ㄅ","ㄭ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿕"],["ꀀ","ꀔ"],["ꀖ","ꒌ"],["ꓐ","ꓷ"],["ꔀ","ꘋ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],"ꙮ",["ꚠ","ꛥ"],"ꞏ","ꟷ",["ꟻ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ","ꣽ",["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],["ꧠ","ꧤ"],["ꧧ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩯ"],["ꩱ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫜ"],["ꫠ","ꫪ"],"ꫲ",["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꯀ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["ｦ","ｯ"],["ｱ","ﾝ"],["ﾠ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),zs=vn(["ǅ","ǈ","ǋ","ǲ",["ᾈ","ᾏ"],["ᾘ","ᾟ"],["ᾨ","ᾯ"],"ᾼ","ῌ","ῼ"],!1,!1),Ws=vn([["A","Z"],["À","Ö"],["Ø","Þ"],"Ā","Ă","Ą","Ć","Ĉ","Ċ","Č","Ď","Đ","Ē","Ĕ","Ė","Ę","Ě","Ĝ","Ğ","Ġ","Ģ","Ĥ","Ħ","Ĩ","Ī","Ĭ","Į","İ","Ĳ","Ĵ","Ķ","Ĺ","Ļ","Ľ","Ŀ","Ł","Ń","Ņ","Ň","Ŋ","Ō","Ŏ","Ő","Œ","Ŕ","Ŗ","Ř","Ś","Ŝ","Ş","Š","Ţ","Ť","Ŧ","Ũ","Ū","Ŭ","Ů","Ű","Ų","Ŵ","Ŷ",["Ÿ","Ź"],"Ż","Ž",["Ɓ","Ƃ"],"Ƅ",["Ɔ","Ƈ"],["Ɖ","Ƌ"],["Ǝ","Ƒ"],["Ɠ","Ɣ"],["Ɩ","Ƙ"],["Ɯ","Ɲ"],["Ɵ","Ơ"],"Ƣ","Ƥ",["Ʀ","Ƨ"],"Ʃ","Ƭ",["Ʈ","Ư"],["Ʊ","Ƴ"],"Ƶ",["Ʒ","Ƹ"],"Ƽ","Ǆ","Ǉ","Ǌ","Ǎ","Ǐ","Ǒ","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ǟ","Ǡ","Ǣ","Ǥ","Ǧ","Ǩ","Ǫ","Ǭ","Ǯ","Ǳ","Ǵ",["Ƕ","Ǹ"],"Ǻ","Ǽ","Ǿ","Ȁ","Ȃ","Ȅ","Ȇ","Ȉ","Ȋ","Ȍ","Ȏ","Ȑ","Ȓ","Ȕ","Ȗ","Ș","Ț","Ȝ","Ȟ","Ƞ","Ȣ","Ȥ","Ȧ","Ȩ","Ȫ","Ȭ","Ȯ","Ȱ","Ȳ",["Ⱥ","Ȼ"],["Ƚ","Ⱦ"],"Ɂ",["Ƀ","Ɇ"],"Ɉ","Ɋ","Ɍ","Ɏ","Ͱ","Ͳ","Ͷ","Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ώ"],["Α","Ρ"],["Σ","Ϋ"],"Ϗ",["ϒ","ϔ"],"Ϙ","Ϛ","Ϝ","Ϟ","Ϡ","Ϣ","Ϥ","Ϧ","Ϩ","Ϫ","Ϭ","Ϯ","ϴ","Ϸ",["Ϲ","Ϻ"],["Ͻ","Я"],"Ѡ","Ѣ","Ѥ","Ѧ","Ѩ","Ѫ","Ѭ","Ѯ","Ѱ","Ѳ","Ѵ","Ѷ","Ѹ","Ѻ","Ѽ","Ѿ","Ҁ","Ҋ","Ҍ","Ҏ","Ґ","Ғ","Ҕ","Җ","Ҙ","Қ","Ҝ","Ҟ","Ҡ","Ң","Ҥ","Ҧ","Ҩ","Ҫ","Ҭ","Ү","Ұ","Ҳ","Ҵ","Ҷ","Ҹ","Һ","Ҽ","Ҿ",["Ӏ","Ӂ"],"Ӄ","Ӆ","Ӈ","Ӊ","Ӌ","Ӎ","Ӑ","Ӓ","Ӕ","Ӗ","Ә","Ӛ","Ӝ","Ӟ","Ӡ","Ӣ","Ӥ","Ӧ","Ө","Ӫ","Ӭ","Ӯ","Ӱ","Ӳ","Ӵ","Ӷ","Ӹ","Ӻ","Ӽ","Ӿ","Ԁ","Ԃ","Ԅ","Ԇ","Ԉ","Ԋ","Ԍ","Ԏ","Ԑ","Ԓ","Ԕ","Ԗ","Ԙ","Ԛ","Ԝ","Ԟ","Ԡ","Ԣ","Ԥ","Ԧ","Ԩ","Ԫ","Ԭ","Ԯ",["Ա","Ֆ"],["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["Ꭰ","Ᏽ"],"Ḁ","Ḃ","Ḅ","Ḇ","Ḉ","Ḋ","Ḍ","Ḏ","Ḑ","Ḓ","Ḕ","Ḗ","Ḙ","Ḛ","Ḝ","Ḟ","Ḡ","Ḣ","Ḥ","Ḧ","Ḩ","Ḫ","Ḭ","Ḯ","Ḱ","Ḳ","Ḵ","Ḷ","Ḹ","Ḻ","Ḽ","Ḿ","Ṁ","Ṃ","Ṅ","Ṇ","Ṉ","Ṋ","Ṍ","Ṏ","Ṑ","Ṓ","Ṕ","Ṗ","Ṙ","Ṛ","Ṝ","Ṟ","Ṡ","Ṣ","Ṥ","Ṧ","Ṩ","Ṫ","Ṭ","Ṯ","Ṱ","Ṳ","Ṵ","Ṷ","Ṹ","Ṻ","Ṽ","Ṿ","Ẁ","Ẃ","Ẅ","Ẇ","Ẉ","Ẋ","Ẍ","Ẏ","Ẑ","Ẓ","Ẕ","ẞ","Ạ","Ả","Ấ","Ầ","Ẩ","Ẫ","Ậ","Ắ","Ằ","Ẳ","Ẵ","Ặ","Ẹ","Ẻ","Ẽ","Ế","Ề","Ể","Ễ","Ệ","Ỉ","Ị","Ọ","Ỏ","Ố","Ồ","Ổ","Ỗ","Ộ","Ớ","Ờ","Ở","Ỡ","Ợ","Ụ","Ủ","Ứ","Ừ","Ử","Ữ","Ự","Ỳ","Ỵ","Ỷ","Ỹ","Ỻ","Ỽ","Ỿ",["Ἀ","Ἇ"],["Ἐ","Ἕ"],["Ἠ","Ἧ"],["Ἰ","Ἷ"],["Ὀ","Ὅ"],"Ὑ","Ὓ","Ὕ","Ὗ",["Ὠ","Ὧ"],["Ᾰ","Ά"],["Ὲ","Ή"],["Ῐ","Ί"],["Ῠ","Ῥ"],["Ὸ","Ώ"],"ℂ","ℇ",["ℋ","ℍ"],["ℐ","ℒ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℰ","ℳ"],["ℾ","ℿ"],"ⅅ","Ↄ",["Ⰰ","Ⱞ"],"Ⱡ",["Ɫ","Ɽ"],"Ⱨ","Ⱪ","Ⱬ",["Ɑ","Ɒ"],"Ⱳ","Ⱶ",["Ȿ","Ⲁ"],"Ⲃ","Ⲅ","Ⲇ","Ⲉ","Ⲋ","Ⲍ","Ⲏ","Ⲑ","Ⲓ","Ⲕ","Ⲗ","Ⲙ","Ⲛ","Ⲝ","Ⲟ","Ⲡ","Ⲣ","Ⲥ","Ⲧ","Ⲩ","Ⲫ","Ⲭ","Ⲯ","Ⲱ","Ⲳ","Ⲵ","Ⲷ","Ⲹ","Ⲻ","Ⲽ","Ⲿ","Ⳁ","Ⳃ","Ⳅ","Ⳇ","Ⳉ","Ⳋ","Ⳍ","Ⳏ","Ⳑ","Ⳓ","Ⳕ","Ⳗ","Ⳙ","Ⳛ","Ⳝ","Ⳟ","Ⳡ","Ⳣ","Ⳬ","Ⳮ","Ⳳ","Ꙁ","Ꙃ","Ꙅ","Ꙇ","Ꙉ","Ꙋ","Ꙍ","Ꙏ","Ꙑ","Ꙓ","Ꙕ","Ꙗ","Ꙙ","Ꙛ","Ꙝ","Ꙟ","Ꙡ","Ꙣ","Ꙥ","Ꙧ","Ꙩ","Ꙫ","Ꙭ","Ꚁ","Ꚃ","Ꚅ","Ꚇ","Ꚉ","Ꚋ","Ꚍ","Ꚏ","Ꚑ","Ꚓ","Ꚕ","Ꚗ","Ꚙ","Ꚛ","Ꜣ","Ꜥ","Ꜧ","Ꜩ","Ꜫ","Ꜭ","Ꜯ","Ꜳ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ꜿ","Ꝁ","Ꝃ","Ꝅ","Ꝇ","Ꝉ","Ꝋ","Ꝍ","Ꝏ","Ꝑ","Ꝓ","Ꝕ","Ꝗ","Ꝙ","Ꝛ","Ꝝ","Ꝟ","Ꝡ","Ꝣ","Ꝥ","Ꝧ","Ꝩ","Ꝫ","Ꝭ","Ꝯ","Ꝺ","Ꝼ",["Ᵹ","Ꝿ"],"Ꞁ","Ꞃ","Ꞅ","Ꞇ","Ꞌ","Ɥ","Ꞑ","Ꞓ","Ꞗ","Ꞙ","Ꞛ","Ꞝ","Ꞟ","Ꞡ","Ꞣ","Ꞥ","Ꞧ","Ꞩ",["Ɦ","Ɬ"],["Ʞ","Ꞵ"],"Ꞷ",["Ａ","Ｚ"]],!1,!1),Gs=vn(["ः","ऻ",["ा","ी"],["ॉ","ौ"],["ॎ","ॏ"],["ং","ঃ"],["া","ী"],["ে","ৈ"],["ো","ৌ"],"ৗ","ਃ",["ਾ","ੀ"],"ઃ",["ા","ી"],"ૉ",["ો","ૌ"],["ଂ","ଃ"],"ା","ୀ",["େ","ୈ"],["ୋ","ୌ"],"ୗ",["ா","ி"],["ு","ூ"],["ெ","ை"],["ொ","ௌ"],"ௗ",["ఁ","ః"],["ు","ౄ"],["ಂ","ಃ"],"ಾ",["ೀ","ೄ"],["ೇ","ೈ"],["ೊ","ೋ"],["ೕ","ೖ"],["ം","ഃ"],["ാ","ീ"],["െ","ൈ"],["ൊ","ൌ"],"ൗ",["ං","ඃ"],["ා","ෑ"],["ෘ","ෟ"],["ෲ","ෳ"],["༾","༿"],"ཿ",["ါ","ာ"],"ေ","း",["ျ","ြ"],["ၖ","ၗ"],["ၢ","ၤ"],["ၧ","ၭ"],["ႃ","ႄ"],["ႇ","ႌ"],"ႏ",["ႚ","ႜ"],"ា",["ើ","ៅ"],["ះ","ៈ"],["ᤣ","ᤦ"],["ᤩ","ᤫ"],["ᤰ","ᤱ"],["ᤳ","ᤸ"],["ᨙ","ᨚ"],"ᩕ","ᩗ","ᩡ",["ᩣ","ᩤ"],["ᩭ","ᩲ"],"ᬄ","ᬵ","ᬻ",["ᬽ","ᭁ"],["ᭃ","᭄"],"ᮂ","ᮡ",["ᮦ","ᮧ"],"᮪","ᯧ",["ᯪ","ᯬ"],"ᯮ",["᯲","᯳"],["ᰤ","ᰫ"],["ᰴ","ᰵ"],"᳡",["ᳲ","ᳳ"],["〮","〯"],["ꠣ","ꠤ"],"ꠧ",["ꢀ","ꢁ"],["ꢴ","ꣃ"],["ꥒ","꥓"],"ꦃ",["ꦴ","ꦵ"],["ꦺ","ꦻ"],["ꦽ","꧀"],["ꨯ","ꨰ"],["ꨳ","ꨴ"],"ꩍ","ꩻ","ꩽ","ꫫ",["ꫮ","ꫯ"],"ꫵ",["ꯣ","ꯤ"],["ꯦ","ꯧ"],["ꯩ","ꯪ"],"꯬"],!1,!1),Ys=vn([["̀","ͯ"],["҃","҇"],["֑","ֽ"],"ֿ",["ׁ","ׂ"],["ׄ","ׅ"],"ׇ",["ؐ","ؚ"],["ً","ٟ"],"ٰ",["ۖ","ۜ"],["۟","ۤ"],["ۧ","ۨ"],["۪","ۭ"],"ܑ",["ܰ","݊"],["ަ","ް"],["߫","߳"],["ࠖ","࠙"],["ࠛ","ࠣ"],["ࠥ","ࠧ"],["ࠩ","࠭"],["࡙","࡛"],["ࣣ","ं"],"ऺ","़",["ु","ै"],"्",["॑","ॗ"],["ॢ","ॣ"],"ঁ","়",["ু","ৄ"],"্",["ৢ","ৣ"],["ਁ","ਂ"],"਼",["ੁ","ੂ"],["ੇ","ੈ"],["ੋ","੍"],"ੑ",["ੰ","ੱ"],"ੵ",["ઁ","ં"],"઼",["ુ","ૅ"],["ે","ૈ"],"્",["ૢ","ૣ"],"ଁ","଼","ି",["ୁ","ୄ"],"୍","ୖ",["ୢ","ୣ"],"ஂ","ீ","்","ఀ",["ా","ీ"],["ె","ై"],["ొ","్"],["ౕ","ౖ"],["ౢ","ౣ"],"ಁ","಼","ಿ","ೆ",["ೌ","್"],["ೢ","ೣ"],"ഁ",["ു","ൄ"],"്",["ൢ","ൣ"],"්",["ි","ු"],"ූ","ั",["ิ","ฺ"],["็","๎"],"ັ",["ິ","ູ"],["ົ","ຼ"],["່","ໍ"],["༘","༙"],"༵","༷","༹",["ཱ","ཾ"],["ྀ","྄"],["྆","྇"],["ྍ","ྗ"],["ྙ","ྼ"],"࿆",["ိ","ူ"],["ဲ","့"],["္","်"],["ွ","ှ"],["ၘ","ၙ"],["ၞ","ၠ"],["ၱ","ၴ"],"ႂ",["ႅ","ႆ"],"ႍ","ႝ",["፝","፟"],["ᜒ","᜔"],["ᜲ","᜴"],["ᝒ","ᝓ"],["ᝲ","ᝳ"],["឴","឵"],["ិ","ួ"],"ំ",["៉","៓"],"៝",["᠋","᠍"],"ᢩ",["ᤠ","ᤢ"],["ᤧ","ᤨ"],"ᤲ",["᤹","᤻"],["ᨗ","ᨘ"],"ᨛ","ᩖ",["ᩘ","ᩞ"],"᩠","ᩢ",["ᩥ","ᩬ"],["ᩳ","᩼"],"᩿",["᪰","᪽"],["ᬀ","ᬃ"],"᬴",["ᬶ","ᬺ"],"ᬼ","ᭂ",["᭫","᭳"],["ᮀ","ᮁ"],["ᮢ","ᮥ"],["ᮨ","ᮩ"],["᮫","ᮭ"],"᯦",["ᯨ","ᯩ"],"ᯭ",["ᯯ","ᯱ"],["ᰬ","ᰳ"],["ᰶ","᰷"],["᳐","᳒"],["᳔","᳠"],["᳢","᳨"],"᳭","᳴",["᳸","᳹"],["᷀","᷵"],["᷼","᷿"],["⃐","⃜"],"⃡",["⃥","⃰"],["⳯","⳱"],"⵿",["ⷠ","ⷿ"],["〪","〭"],["゙","゚"],"꙯",["ꙴ","꙽"],["ꚞ","ꚟ"],["꛰","꛱"],"ꠂ","꠆","ꠋ",["ꠥ","ꠦ"],"꣄",["꣠","꣱"],["ꤦ","꤭"],["ꥇ","ꥑ"],["ꦀ","ꦂ"],"꦳",["ꦶ","ꦹ"],"ꦼ","ꧥ",["ꨩ","ꨮ"],["ꨱ","ꨲ"],["ꨵ","ꨶ"],"ꩃ","ꩌ","ꩼ","ꪰ",["ꪲ","ꪴ"],["ꪷ","ꪸ"],["ꪾ","꪿"],"꫁",["ꫬ","ꫭ"],"꫶","ꯥ","ꯨ","꯭","ﬞ",["︀","️"],["︠","︯"]],!1,!1),Ks=vn([["0","9"],["٠","٩"],["۰","۹"],["߀","߉"],["०","९"],["০","৯"],["੦","੯"],["૦","૯"],["୦","୯"],["௦","௯"],["౦","౯"],["೦","೯"],["൦","൯"],["෦","෯"],["๐","๙"],["໐","໙"],["༠","༩"],["၀","၉"],["႐","႙"],["០","៩"],["᠐","᠙"],["᥆","᥏"],["᧐","᧙"],["᪀","᪉"],["᪐","᪙"],["᭐","᭙"],["᮰","᮹"],["᱀","᱉"],["᱐","᱙"],["꘠","꘩"],["꣐","꣙"],["꤀","꤉"],["꧐","꧙"],["꧰","꧹"],["꩐","꩙"],["꯰","꯹"],["０","９"]],!1,!1),Xs=vn([["ᛮ","ᛰ"],["Ⅰ","ↂ"],["ↅ","ↈ"],"〇",["〡","〩"],["〸","〺"],["ꛦ","ꛯ"]],!1,!1),qs=vn(["_",["‿","⁀"],"⁔",["︳","︴"],["﹍","﹏"],"＿"],!1,!1),Qs=vn([" "," "," ",[" "," "]," "," ","　"],!1,!1),Nr=qt(";",!1),Zs=function(ct,vt,wt){return{type:"grammar",topLevelInitializer:ct,initializer:vt,rules:wt,location:an()}},Js=function(ct){return{type:"top_level_initializer",code:ct[0],codeLocation:ct[1],location:an()}},eo=function(ct){return{type:"initializer",code:ct[0],codeLocation:ct[1],location:an()}},to=function(ct,vt,wt){return{type:"rule",name:ct[0],nameLocation:ct[1],expression:vt!==null?{type:"named",name:vt,expression:wt,location:an()}:wt,location:an()}},no=function(ct,vt){return vt.length>0?{type:"choice",alternatives:[ct].concat(vt),location:an()}:ct},ro=function(ct,vt){return vt!==null?{type:"action",expression:ct,code:vt[0],codeLocation:vt[1],location:an()}:ct},io=function(ct,vt){return vt.length>0||ct.type==="labeled"&&ct.pick?{type:"sequence",elements:[ct].concat(vt),location:an()}:ct},so=function(ct,vt,wt){return wt.type.startsWith("semantic_")&&lr('"@" cannot be used on a semantic predicate',ct),{type:"labeled",label:vt!==null?vt[0]:null,labelLocation:vt!==null?vt[1]:ct,pick:!0,expression:wt,location:an()}},oo=function(ct,vt){return{type:"labeled",label:ct[0],labelLocation:ct[1],expression:vt,location:an()}},ao=function(){return an()},lo=function(ct){return zl.indexOf(ct[0])>=0&&lr(`Label can't be a reserved word "${ct[0]}"`,ct[1]),ct},uo=function(ct,vt){return{type:OPS_TO_PREFIXED_TYPES[ct],expression:vt,location:an()}},co=function(ct,vt){return{type:OPS_TO_SUFFIXED_TYPES[vt],expression:ct,location:an()}},ho=function(ct,vt,wt){let At=vt[0],Dt=vt[1];return Dt.type==="constant"&&Dt.value===0&&lr("The maximum count of repetitions of the rule must be > 0",Dt.location),{type:"repeated",min:At,max:Dt,expression:ct,delimiter:wt,location:an()}},fo=function(ct,vt){return[ct!==null?ct:{type:"constant",value:0},vt!==null?vt:{type:"constant",value:null}]},po=function(ct){return[null,ct]},go=function(ct){return{type:"constant",value:ct,location:an()}},mo=function(ct){return{type:"variable",value:ct[0],location:an()}},yo=function(ct){return{type:"function",value:ct[0],codeLocation:ct[1],location:an()}},vo=function(ct){return ct.type==="labeled"||ct.type==="sequence"?{type:"group",expression:ct,location:an()}:ct},Eo=function(ct){return{type:"rule_ref",name:ct[0],location:an()}},Co=function(ct,vt){return{type:OPS_TO_SEMANTIC_PREDICATE_TYPES[ct],code:vt[0],codeLocation:vt[1],location:an()}},Ao=function(ct,vt){return[ct+vt.join(""),an()]},xo=function(ct,vt){return{type:"literal",value:ct,ignoreCase:vt!==null,location:an()}},wo=function(ct){return ct.join("")},So=function(ct){return ct.join("")},bo=function(ct,vt,wt){return{type:"class",parts:vt.filter(At=>At!==""),inverted:ct!==null,ignoreCase:wt!==null,location:an()}},ko=function(ct,vt){return ct.charCodeAt(0)>vt.charCodeAt(0)&&lr("Invalid character range: "+Vo()+"."),[ct,vt]},To=function(){return""},Do=function(){return"\0"},$o=function(){return"\b"},Po=function(){return"\f"},Bo=function(){return`
`},_o=function(){return"\r"},Mo=function(){return"	"},Fo=function(){return"\v"},Ro=function(ct){return String.fromCharCode(parseInt(ct,16))},Oo=function(ct){return String.fromCharCode(parseInt(ct,16))},Lo=function(){return{type:"any",location:an()}},No=function(ct){return[ct,an()]},Io=function(ct){return parseInt(ct,10)},pt=0,Jt=0,or=[{line:1,column:1}],On=0,vr=[],Tt=0,ar;if("startRule"in g){if(!(g.startRule in et))throw new Error(`Can't start parsing from rule "`+g.startRule+'".');tt=et[g.startRule]}function Vo(){return $.substring(Jt,pt)}function an(){return ur(Jt,pt)}function lr(ct,vt){throw vt=vt!==void 0?vt:ur(Jt,pt),Uo(ct,vt)}function qt(ct,vt){return{type:"literal",text:ct,ignoreCase:vt}}function vn(ct,vt,wt){return{type:"class",parts:ct,inverted:vt,ignoreCase:wt}}function Ho(){return{type:"any"}}function jo(){return{type:"end"}}function Hn(ct){return{type:"other",description:ct}}function Ir(ct){var vt=or[ct],wt;if(vt)return vt;for(wt=ct-1;!or[wt];)wt--;for(vt=or[wt],vt={line:vt.line,column:vt.column};wt<ct;)$.charCodeAt(wt)===10?(vt.line++,vt.column=1):vt.column++,wt++;return or[ct]=vt,vt}function ur(ct,vt,wt){var At=Ir(ct),Dt=Ir(vt),Rt={source:_e,start:{offset:ct,line:At.line,column:At.column},end:{offset:vt,line:Dt.line,column:Dt.column}};return wt&&_e&&typeof _e.offset=="function"&&(Rt.start=_e.offset(Rt.start),Rt.end=_e.offset(Rt.end)),Rt}function Lt(ct){pt<On||(pt>On&&(On=pt,vr=[]),vr.push(ct))}function Uo(ct,vt){return new peg$SyntaxError(ct,null,null,vt)}function zo(ct,vt,wt){return new peg$SyntaxError(peg$SyntaxError.buildMessage(ct,vt),ct,vt,wt)}function Vr(){var ct,vt,wt,At,Dt,Rt;if(ct=pt,nn(),vt=pt,wt=Wo(),wt!==j?(At=nn(),vt=wt):(pt=vt,vt=j),vt===j&&(vt=null),wt=pt,At=Go(),At!==j?(Dt=nn(),wt=At):(pt=wt,wt=j),wt===j&&(wt=null),At=[],Dt=pt,Rt=Hr(),Rt!==j?(nn(),Dt=Rt):(pt=Dt,Dt=j),Dt!==j)for(;Dt!==j;)At.push(Dt),Dt=pt,Rt=Hr(),Rt!==j?(nn(),Dt=Rt):(pt=Dt,Dt=j);else At=j;return At!==j?(Jt=ct,ct=Zs(vt,wt,At)):(pt=ct,ct=j),ct}function Wo(){var ct,vt,wt,At,Dt;return ct=pt,$.charCodeAt(pt)===123?(vt=nt,pt++):(vt=j,Tt===0&&Lt(fn)),vt!==j?(wt=er(),wt!==j?($.charCodeAt(pt)===125?(At=rt,pt++):(At=j,Tt===0&&Lt(yn)),At!==j?(Dt=$r(),Dt!==j?(Jt=ct,ct=Js(wt)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function Go(){var ct,vt,wt;return ct=pt,vt=er(),vt!==j?(wt=$r(),wt!==j?(Jt=ct,ct=eo(vt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function Hr(){var ct,vt,wt,At,Dt,Rt;return ct=pt,vt=fr(),vt!==j?(nn(),wt=pt,At=br(),At!==j?(nn(),wt=At):(pt=wt,wt=j),wt===j&&(wt=null),$.charCodeAt(pt)===61?(At=it,pt++):(At=j,Tt===0&&Lt(kn)),At!==j?(nn(),Dt=Er(),Dt!==j?(Rt=$r(),Rt!==j?(Jt=ct,ct=to(vt,wt,Dt)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function Er(){var ct,vt,wt,At,Dt,Rt;if(ct=pt,vt=Cr(),vt!==j){for(wt=[],At=pt,nn(),$.charCodeAt(pt)===47?(Dt=st,pt++):(Dt=j,Tt===0&&Lt($n)),Dt!==j?(nn(),Rt=Cr(),Rt!==j?At=Rt:(pt=At,At=j)):(pt=At,At=j);At!==j;)wt.push(At),At=pt,nn(),$.charCodeAt(pt)===47?(Dt=st,pt++):(Dt=j,Tt===0&&Lt($n)),Dt!==j?(nn(),Rt=Cr(),Rt!==j?At=Rt:(pt=At,At=j)):(pt=At,At=j);Jt=ct,ct=no(vt,wt)}else pt=ct,ct=j;return ct}function Cr(){var ct,vt,wt,At;return ct=pt,vt=Yo(),vt!==j?(wt=pt,nn(),At=er(),At!==j?wt=At:(pt=wt,wt=j),wt===j&&(wt=null),Jt=ct,ct=ro(vt,wt)):(pt=ct,ct=j),ct}function Yo(){var ct,vt,wt,At,Dt;if(ct=pt,vt=Ar(),vt!==j){for(wt=[],At=pt,nn(),Dt=Ar(),Dt!==j?At=Dt:(pt=At,At=j);At!==j;)wt.push(At),At=pt,nn(),Dt=Ar(),Dt!==j?At=Dt:(pt=At,At=j);Jt=ct,ct=io(vt,wt)}else pt=ct,ct=j;return ct}function Ar(){var ct,vt,wt,At;return ct=pt,vt=Ko(),vt!==j?(wt=jr(),wt===j&&(wt=null),At=xr(),At!==j?(Jt=ct,ct=so(vt,wt,At)):(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=pt,vt=jr(),vt!==j?(wt=nn(),At=xr(),At!==j?(Jt=ct,ct=oo(vt,At)):(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=xr())),ct}function Ko(){var ct,vt;return ct=pt,$.charCodeAt(pt)===64?(vt=ot,pt++):(vt=j,Tt===0&&Lt(ln)),vt!==j&&(Jt=ct,vt=ao()),ct=vt,ct}function jr(){var ct,vt,wt;return ct=pt,vt=fr(),vt!==j?(nn(),$.charCodeAt(pt)===58?(wt=at,pt++):(wt=j,Tt===0&&Lt(Qn)),wt!==j?(Jt=ct,ct=lo(vt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function xr(){var ct,vt,wt;return ct=pt,vt=Xo(),vt!==j?(nn(),wt=Ur(),wt!==j?(Jt=ct,ct=uo(vt,wt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=Ur()),ct}function Xo(){var ct;return $.charCodeAt(pt)===36?(ct=lt,pt++):(ct=j,Tt===0&&Lt(pn)),ct===j&&($.charCodeAt(pt)===38?(ct=ut,pt++):(ct=j,Tt===0&&Lt(xn)),ct===j&&($.charCodeAt(pt)===33?(ct=ht,pt++):(ct=j,Tt===0&&Lt(Rn)))),ct}function Ur(){var ct,vt,wt;return ct=pt,vt=Sr(),vt!==j?(nn(),wt=qo(),wt!==j?(Jt=ct,ct=co(vt,wt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=Qo(),ct===j&&(ct=Sr())),ct}function qo(){var ct;return $.charCodeAt(pt)===63?(ct=ft,pt++):(ct=j,Tt===0&&Lt(Gn)),ct===j&&($.charCodeAt(pt)===42?(ct=gt,pt++):(ct=j,Tt===0&&Lt(Zn)),ct===j&&($.charCodeAt(pt)===43?(ct=dt,pt++):(ct=j,Tt===0&&Lt(mr)))),ct}function Qo(){var ct,vt,wt,At,Dt,Rt,mn;return ct=pt,vt=Sr(),vt!==j?(nn(),$.charCodeAt(pt)===124?(wt=mt,pt++):(wt=j,Tt===0&&Lt(tr)),wt!==j?(nn(),At=Zo(),At!==j?(nn(),Dt=pt,$.charCodeAt(pt)===44?(Rt=yt,pt++):(Rt=j,Tt===0&&Lt(Pn)),Rt!==j?(nn(),mn=Er(),mn!==j?(nn(),Dt=mn):(pt=Dt,Dt=j)):(pt=Dt,Dt=j),Dt===j&&(Dt=null),$.charCodeAt(pt)===124?(Rt=mt,pt++):(Rt=j,Tt===0&&Lt(tr)),Rt!==j?(Jt=ct,ct=ho(vt,At,Dt)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function Zo(){var ct,vt,wt,At;return ct=pt,vt=wr(),vt===j&&(vt=null),nn(),$.substr(pt,2)===Et?(wt=Et,pt+=2):(wt=j,Tt===0&&Lt(Jn)),wt!==j?(nn(),At=wr(),At===j&&(At=null),Jt=ct,ct=fo(vt,At)):(pt=ct,ct=j),ct===j&&(ct=pt,vt=wr(),vt!==j&&(Jt=ct,vt=po(vt)),ct=vt),ct}function wr(){var ct,vt;return ct=pt,vt=$l(),vt!==j&&(Jt=ct,vt=go(vt)),ct=vt,ct===j&&(ct=pt,vt=fr(),vt!==j&&(Jt=ct,vt=mo(vt)),ct=vt,ct===j&&(ct=pt,vt=er(),vt!==j&&(Jt=ct,vt=yo(vt)),ct=vt)),ct}function Sr(){var ct,vt,wt,At;return ct=yl(),ct===j&&(ct=El(),ct===j&&(ct=Tl(),ct===j&&(ct=Jo(),ct===j&&(ct=na(),ct===j&&(ct=pt,$.charCodeAt(pt)===40?(vt=Ct,pt++):(vt=j,Tt===0&&Lt(nr)),vt!==j?(nn(),wt=Er(),wt!==j?(nn(),$.charCodeAt(pt)===41?(At=kt,pt++):(At=j,Tt===0&&Lt(yr)),At!==j?(Jt=ct,ct=vo(wt)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j)))))),ct}function Jo(){var ct,vt,wt,At,Dt,Rt,mn,Xn;return ct=pt,vt=fr(),vt!==j?(wt=pt,Tt++,At=pt,Dt=nn(),Rt=pt,mn=br(),mn!==j?(Xn=nn(),mn=[mn,Xn],Rt=mn):(pt=Rt,Rt=j),Rt===j&&(Rt=null),$.charCodeAt(pt)===61?(mn=it,pt++):(mn=j,Tt===0&&Lt(kn)),mn!==j?(Dt=[Dt,Rt,mn],At=Dt):(pt=At,At=j),Tt--,At===j?wt=void 0:(pt=wt,wt=j),wt!==j?(Jt=ct,ct=Eo(vt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function na(){var ct,vt,wt;return ct=pt,vt=ga(),vt!==j?(nn(),wt=er(),wt!==j?(Jt=ct,ct=Co(vt,wt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function ga(){var ct;return $.charCodeAt(pt)===38?(ct=ut,pt++):(ct=j,Tt===0&&Lt(xn)),ct===j&&($.charCodeAt(pt)===33?(ct=ht,pt++):(ct=j,Tt===0&&Lt(Rn))),ct}function Cn(){var ct;return $.length>pt?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(_r)),ct}function cr(){var ct;return Tt++,$.charCodeAt(pt)===9?(ct=St,pt++):(ct=j,Tt===0&&Lt(ss)),ct===j&&($.charCodeAt(pt)===11?(ct=Pt,pt++):(ct=j,Tt===0&&Lt(os)),ct===j&&($.charCodeAt(pt)===12?(ct=Bt,pt++):(ct=j,Tt===0&&Lt(as)),ct===j&&($.charCodeAt(pt)===32?(ct=xt,pt++):(ct=j,Tt===0&&Lt(ls)),ct===j&&($.charCodeAt(pt)===160?(ct=bt,pt++):(ct=j,Tt===0&&Lt(us)),ct===j&&($.charCodeAt(pt)===65279?(ct=$t,pt++):(ct=j,Tt===0&&Lt(cs)),ct===j&&(ct=Vl())))))),Tt--,ct===j&&Tt===0&&Lt(rs),ct}function jn(){var ct;return Dn.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(hs)),ct}function hr(){var ct;return Tt++,$.charCodeAt(pt)===10?(ct=Mt,pt++):(ct=j,Tt===0&&Lt(ds)),ct===j&&($.substr(pt,2)===Ot?(ct=Ot,pt+=2):(ct=j,Tt===0&&Lt(ps)),ct===j&&($.charCodeAt(pt)===13?(ct=jt,pt++):(ct=j,Tt===0&&Lt(gs)),ct===j&&($.charCodeAt(pt)===8232?(ct=Yt,pt++):(ct=j,Tt===0&&Lt(ms)),ct===j&&($.charCodeAt(pt)===8233?(ct=Ut,pt++):(ct=j,Tt===0&&Lt(ys)))))),Tt--,ct===j&&Tt===0&&Lt(fs),ct}function zr(){var ct;return Tt++,ct=xa(),ct===j&&(ct=Gr()),Tt--,ct===j&&Tt===0&&Lt(vs),ct}function xa(){var ct,vt,wt,At,Dt,Rt;if(ct=pt,$.substr(pt,2)===Nt?(vt=Nt,pt+=2):(vt=j,Tt===0&&Lt(Mr)),vt!==j){for(wt=[],At=pt,Dt=pt,Tt++,$.substr(pt,2)===It?(Rt=It,pt+=2):(Rt=j,Tt===0&&Lt(Yn)),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);At!==j;)wt.push(At),At=pt,Dt=pt,Tt++,$.substr(pt,2)===It?(Rt=It,pt+=2):(Rt=j,Tt===0&&Lt(Yn)),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);$.substr(pt,2)===It?(At=It,pt+=2):(At=j,Tt===0&&Lt(Yn)),At!==j?(vt=[vt,wt,At],ct=vt):(pt=ct,ct=j)}else pt=ct,ct=j;return ct}function Wr(){var ct,vt,wt,At,Dt,Rt;if(ct=pt,$.substr(pt,2)===Nt?(vt=Nt,pt+=2):(vt=j,Tt===0&&Lt(Mr)),vt!==j){for(wt=[],At=pt,Dt=pt,Tt++,$.substr(pt,2)===It?(Rt=It,pt+=2):(Rt=j,Tt===0&&Lt(Yn)),Rt===j&&(Rt=jn()),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);At!==j;)wt.push(At),At=pt,Dt=pt,Tt++,$.substr(pt,2)===It?(Rt=It,pt+=2):(Rt=j,Tt===0&&Lt(Yn)),Rt===j&&(Rt=jn()),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);$.substr(pt,2)===It?(At=It,pt+=2):(At=j,Tt===0&&Lt(Yn)),At!==j?(vt=[vt,wt,At],ct=vt):(pt=ct,ct=j)}else pt=ct,ct=j;return ct}function Gr(){var ct,vt,wt,At,Dt,Rt;if(ct=pt,$.substr(pt,2)===Ht?(vt=Ht,pt+=2):(vt=j,Tt===0&&Lt(Es)),vt!==j){for(wt=[],At=pt,Dt=pt,Tt++,Rt=jn(),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);At!==j;)wt.push(At),At=pt,Dt=pt,Tt++,Rt=jn(),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);vt=[vt,wt],ct=vt}else pt=ct,ct=j;return ct}function fr(){var ct,vt,wt,At;if(Tt++,ct=pt,vt=Yr(),vt!==j){for(wt=[],At=Kr();At!==j;)wt.push(At),At=Kr();Jt=ct,ct=Ao(vt,wt)}else pt=ct,ct=j;return Tt--,ct===j&&(vt=j,Tt===0&&Lt(Cs)),ct}function Yr(){var ct,vt,wt;return ct=ba(),ct===j&&($.charCodeAt(pt)===95?(ct=Gt,pt++):(ct=j,Tt===0&&Lt(As)),ct===j&&(ct=pt,$.charCodeAt(pt)===92?(vt=Kt,pt++):(vt=j,Tt===0&&Lt(In)),vt!==j?(wt=Jr(),wt!==j?ct=wt:(pt=ct,ct=j)):(pt=ct,ct=j))),ct}function Kr(){var ct;return ct=Yr(),ct===j&&($.charCodeAt(pt)===36?(ct=lt,pt++):(ct=j,Tt===0&&Lt(pn)),ct===j&&(ct=$a(),ct===j&&(ct=Ll(),ct===j&&(ct=Il(),ct===j&&($.charCodeAt(pt)===8204?(ct=rn,pt++):(ct=j,Tt===0&&Lt(xs)),ct===j&&($.charCodeAt(pt)===8205?(ct=sn,pt++):(ct=j,Tt===0&&Lt(ws)))))))),ct}function ba(){var ct;return ct=Fl(),ct===j&&(ct=Pl(),ct===j&&(ct=Ml(),ct===j&&(ct=Bl(),ct===j&&(ct=_l(),ct===j&&(ct=Nl()))))),ct}function $a(){var ct;return ct=Ol(),ct===j&&(ct=Rl()),ct}function yl(){var ct,vt,wt;return Tt++,ct=pt,vt=br(),vt!==j?($.charCodeAt(pt)===105?(wt=cn,pt++):(wt=j,Tt===0&&Lt(Fr)),wt===j&&(wt=null),Jt=ct,ct=xo(vt,wt)):(pt=ct,ct=j),Tt--,ct===j&&(vt=j,Tt===0&&Lt(Ss)),ct}function br(){var ct,vt,wt,At;if(Tt++,ct=pt,$.charCodeAt(pt)===34?(vt=un,pt++):(vt=j,Tt===0&&Lt(rr)),vt!==j){for(wt=[],At=Xr();At!==j;)wt.push(At),At=Xr();$.charCodeAt(pt)===34?(At=un,pt++):(At=j,Tt===0&&Lt(rr)),At!==j?(Jt=ct,ct=wo(wt)):(pt=ct,ct=j)}else pt=ct,ct=j;if(ct===j)if(ct=pt,$.charCodeAt(pt)===39?(vt=En,pt++):(vt=j,Tt===0&&Lt(ir)),vt!==j){for(wt=[],At=qr();At!==j;)wt.push(At),At=qr();$.charCodeAt(pt)===39?(At=En,pt++):(At=j,Tt===0&&Lt(ir)),At!==j?(Jt=ct,ct=So(wt)):(pt=ct,ct=j)}else pt=ct,ct=j;return Tt--,ct===j&&(vt=j,Tt===0&&Lt(bs)),ct}function Xr(){var ct,vt,wt,At;return ct=pt,vt=pt,wt=pt,Tt++,$.charCodeAt(pt)===34?(At=un,pt++):(At=j,Tt===0&&Lt(rr)),At===j&&($.charCodeAt(pt)===92?(At=Kt,pt++):(At=j,Tt===0&&Lt(In)),At===j&&(At=jn())),Tt--,At===j?wt=void 0:(pt=wt,wt=j),wt!==j?(At=Cn(),At!==j?(wt=[wt,At],vt=wt):(pt=vt,vt=j)):(pt=vt,vt=j),vt!==j?ct=$.substring(ct,pt):ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===92?(vt=Kt,pt++):(vt=j,Tt===0&&Lt(In)),vt!==j?(wt=Tr(),wt!==j?ct=wt:(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=kr())),ct}function qr(){var ct,vt,wt,At;return ct=pt,vt=pt,wt=pt,Tt++,$.charCodeAt(pt)===39?(At=En,pt++):(At=j,Tt===0&&Lt(ir)),At===j&&($.charCodeAt(pt)===92?(At=Kt,pt++):(At=j,Tt===0&&Lt(In)),At===j&&(At=jn())),Tt--,At===j?wt=void 0:(pt=wt,wt=j),wt!==j?(At=Cn(),At!==j?(wt=[wt,At],vt=wt):(pt=vt,vt=j)):(pt=vt,vt=j),vt!==j?ct=$.substring(ct,pt):ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===92?(vt=Kt,pt++):(vt=j,Tt===0&&Lt(In)),vt!==j?(wt=Tr(),wt!==j?ct=wt:(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=kr())),ct}function El(){var ct,vt,wt,At,Dt,Rt;if(Tt++,ct=pt,$.charCodeAt(pt)===91?(vt=Bn,pt++):(vt=j,Tt===0&&Lt(Ts)),vt!==j){for($.charCodeAt(pt)===94?(wt=Un,pt++):(wt=j,Tt===0&&Lt(Ds)),wt===j&&(wt=null),At=[],Dt=Qr(),Dt===j&&(Dt=dr());Dt!==j;)At.push(Dt),Dt=Qr(),Dt===j&&(Dt=dr());$.charCodeAt(pt)===93?(Dt=Tn,pt++):(Dt=j,Tt===0&&Lt(Rr)),Dt!==j?($.charCodeAt(pt)===105?(Rt=cn,pt++):(Rt=j,Tt===0&&Lt(Fr)),Rt===j&&(Rt=null),Jt=ct,ct=bo(wt,At,Rt)):(pt=ct,ct=j)}else pt=ct,ct=j;return Tt--,ct===j&&(vt=j,Tt===0&&Lt(ks)),ct}function Qr(){var ct,vt,wt,At;return ct=pt,vt=dr(),vt!==j?($.charCodeAt(pt)===45?(wt=Ln,pt++):(wt=j,Tt===0&&Lt($s)),wt!==j?(At=dr(),At!==j?(Jt=ct,ct=ko(vt,At)):(pt=ct,ct=j)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function dr(){var ct,vt,wt,At;return ct=pt,vt=pt,wt=pt,Tt++,$.charCodeAt(pt)===93?(At=Tn,pt++):(At=j,Tt===0&&Lt(Rr)),At===j&&($.charCodeAt(pt)===92?(At=Kt,pt++):(At=j,Tt===0&&Lt(In)),At===j&&(At=jn())),Tt--,At===j?wt=void 0:(pt=wt,wt=j),wt!==j?(At=Cn(),At!==j?(wt=[wt,At],vt=wt):(pt=vt,vt=j)):(pt=vt,vt=j),vt!==j?ct=$.substring(ct,pt):ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===92?(vt=Kt,pt++):(vt=j,Tt===0&&Lt(In)),vt!==j?(wt=Tr(),wt!==j?ct=wt:(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=kr())),ct}function kr(){var ct,vt,wt;return ct=pt,$.charCodeAt(pt)===92?(vt=Kt,pt++):(vt=j,Tt===0&&Lt(In)),vt!==j?(wt=hr(),wt!==j?(Jt=ct,ct=To()):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function Tr(){var ct,vt,wt,At;return ct=Cl(),ct===j&&(ct=pt,$.charCodeAt(pt)===48?(vt=Nn,pt++):(vt=j,Tt===0&&Lt(Ps)),vt!==j?(wt=pt,Tt++,At=pr(),Tt--,At===j?wt=void 0:(pt=wt,wt=j),wt!==j?(Jt=ct,ct=Do()):(pt=ct,ct=j)):(pt=ct,ct=j),ct===j&&(ct=Sl(),ct===j&&(ct=Jr()))),ct}function Cl(){var ct;return ct=Zr(),ct===j&&(ct=Al()),ct}function Zr(){var ct,vt;return $.charCodeAt(pt)===39?(ct=En,pt++):(ct=j,Tt===0&&Lt(ir)),ct===j&&($.charCodeAt(pt)===34?(ct=un,pt++):(ct=j,Tt===0&&Lt(rr)),ct===j&&($.charCodeAt(pt)===92?(ct=Kt,pt++):(ct=j,Tt===0&&Lt(In)),ct===j&&(ct=pt,$.charCodeAt(pt)===98?(vt=_n,pt++):(vt=j,Tt===0&&Lt(Bs)),vt!==j&&(Jt=ct,vt=$o()),ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===102?(vt=wn,pt++):(vt=j,Tt===0&&Lt(_s)),vt!==j&&(Jt=ct,vt=Po()),ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===110?(vt=Vn,pt++):(vt=j,Tt===0&&Lt(Ms)),vt!==j&&(Jt=ct,vt=Bo()),ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===114?(vt=zn,pt++):(vt=j,Tt===0&&Lt(Fs)),vt!==j&&(Jt=ct,vt=_o()),ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===116?(vt=Wn,pt++):(vt=j,Tt===0&&Lt(Rs)),vt!==j&&(Jt=ct,vt=Mo()),ct=vt,ct===j&&(ct=pt,$.charCodeAt(pt)===118?(vt=Mn,pt++):(vt=j,Tt===0&&Lt(Os)),vt!==j&&(Jt=ct,vt=Fo()),ct=vt)))))))),ct}function Al(){var ct,vt,wt,At;return ct=pt,vt=pt,wt=pt,Tt++,At=xl(),At===j&&(At=jn()),Tt--,At===j?wt=void 0:(pt=wt,wt=j),wt!==j?(At=Cn(),At!==j?(wt=[wt,At],vt=wt):(pt=vt,vt=j)):(pt=vt,vt=j),vt!==j?ct=$.substring(ct,pt):ct=vt,ct}function xl(){var ct;return ct=Zr(),ct===j&&(ct=pr(),ct===j&&($.charCodeAt(pt)===120?(ct=Fn,pt++):(ct=j,Tt===0&&Lt(Or)),ct===j&&($.charCodeAt(pt)===117?(ct=Sn,pt++):(ct=j,Tt===0&&Lt(Lr))))),ct}function Sl(){var ct,vt,wt,At,Dt,Rt;return ct=pt,$.charCodeAt(pt)===120?(vt=Fn,pt++):(vt=j,Tt===0&&Lt(Or)),vt!==j?(wt=pt,At=pt,Dt=Kn(),Dt!==j?(Rt=Kn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j),At!==j?wt=$.substring(wt,pt):wt=At,wt!==j?(Jt=ct,ct=Ro(wt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function Jr(){var ct,vt,wt,At,Dt,Rt,mn,Xn;return ct=pt,$.charCodeAt(pt)===117?(vt=Sn,pt++):(vt=j,Tt===0&&Lt(Lr)),vt!==j?(wt=pt,At=pt,Dt=Kn(),Dt!==j?(Rt=Kn(),Rt!==j?(mn=Kn(),mn!==j?(Xn=Kn(),Xn!==j?(Dt=[Dt,Rt,mn,Xn],At=Dt):(pt=At,At=j)):(pt=At,At=j)):(pt=At,At=j)):(pt=At,At=j),At!==j?wt=$.substring(wt,pt):wt=At,wt!==j?(Jt=ct,ct=Oo(wt)):(pt=ct,ct=j)):(pt=ct,ct=j),ct}function pr(){var ct;return dn.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Ls)),ct}function Kn(){var ct;return _t.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Ns)),ct}function Tl(){var ct,vt;return ct=pt,$.charCodeAt(pt)===46?(vt=An,pt++):(vt=j,Tt===0&&Lt(Is)),vt!==j&&(Jt=ct,vt=Lo()),ct=vt,ct}function er(){var ct,vt,wt,At;return Tt++,ct=pt,$.charCodeAt(pt)===123?(vt=nt,pt++):(vt=j,Tt===0&&Lt(fn)),vt!==j?(wt=Dl(),$.charCodeAt(pt)===125?(At=rt,pt++):(At=j,Tt===0&&Lt(yn)),At!==j?ct=wt:(pt=ct,ct=j)):(pt=ct,ct=j),Tt--,ct===j&&(vt=j,Tt===0&&Lt(Vs)),ct}function Dl(){var ct,vt;return ct=pt,vt=Dr(),Jt=ct,vt=No(vt),ct=vt,ct}function Dr(){var ct,vt,wt,At,Dt,Rt;if(ct=pt,vt=[],wt=[],At=pt,Dt=pt,Tt++,Ft.test($.charAt(pt))?(Rt=$.charAt(pt),pt++):(Rt=j,Tt===0&&Lt(sr)),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j),At!==j)for(;At!==j;)wt.push(At),At=pt,Dt=pt,Tt++,Ft.test($.charAt(pt))?(Rt=$.charAt(pt),pt++):(Rt=j,Tt===0&&Lt(sr)),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);else wt=j;for(wt===j&&(wt=pt,$.charCodeAt(pt)===123?(At=nt,pt++):(At=j,Tt===0&&Lt(fn)),At!==j?(Dt=Dr(),$.charCodeAt(pt)===125?(Rt=rt,pt++):(Rt=j,Tt===0&&Lt(yn)),Rt!==j?(At=[At,Dt,Rt],wt=At):(pt=wt,wt=j)):(pt=wt,wt=j));wt!==j;){if(vt.push(wt),wt=[],At=pt,Dt=pt,Tt++,Ft.test($.charAt(pt))?(Rt=$.charAt(pt),pt++):(Rt=j,Tt===0&&Lt(sr)),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j),At!==j)for(;At!==j;)wt.push(At),At=pt,Dt=pt,Tt++,Ft.test($.charAt(pt))?(Rt=$.charAt(pt),pt++):(Rt=j,Tt===0&&Lt(sr)),Tt--,Rt===j?Dt=void 0:(pt=Dt,Dt=j),Dt!==j?(Rt=Cn(),Rt!==j?(Dt=[Dt,Rt],At=Dt):(pt=At,At=j)):(pt=At,At=j);else wt=j;wt===j&&(wt=pt,$.charCodeAt(pt)===123?(At=nt,pt++):(At=j,Tt===0&&Lt(fn)),At!==j?(Dt=Dr(),$.charCodeAt(pt)===125?(Rt=rt,pt++):(Rt=j,Tt===0&&Lt(yn)),Rt!==j?(At=[At,Dt,Rt],wt=At):(pt=wt,wt=j)):(pt=wt,wt=j))}return ct=$.substring(ct,pt),ct}function $l(){var ct,vt,wt,At;if(ct=pt,vt=pt,wt=[],At=pr(),At!==j)for(;At!==j;)wt.push(At),At=pr();else wt=j;return wt!==j?vt=$.substring(vt,pt):vt=wt,vt!==j&&(Jt=ct,vt=Io(vt)),ct=vt,ct}function Pl(){var ct;return Vt.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Hs)),ct}function Bl(){var ct;return Wt.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(js)),ct}function _l(){var ct;return zt.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Us)),ct}function Ml(){var ct;return Zt.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(zs)),ct}function Fl(){var ct;return Qt.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Ws)),ct}function Rl(){var ct;return en.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Gs)),ct}function Ol(){var ct;return Xt.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Ys)),ct}function Ll(){var ct;return hn.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Ks)),ct}function Nl(){var ct;return tn.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Xs)),ct}function Il(){var ct;return on.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(qs)),ct}function Vl(){var ct;return gn.test($.charAt(pt))?(ct=$.charAt(pt),pt++):(ct=j,Tt===0&&Lt(Qs)),ct}function nn(){var ct,vt;for(ct=[],vt=cr(),vt===j&&(vt=hr(),vt===j&&(vt=zr()));vt!==j;)ct.push(vt),vt=cr(),vt===j&&(vt=hr(),vt===j&&(vt=zr()));return ct}function Hl(){var ct,vt;for(ct=[],vt=cr(),vt===j&&(vt=Wr());vt!==j;)ct.push(vt),vt=cr(),vt===j&&(vt=Wr());return ct}function $r(){var ct,vt,wt,At;if(ct=[],vt=pt,wt=nn(),$.charCodeAt(pt)===59?(At=bn,pt++):(At=j,Tt===0&&Lt(Nr)),At!==j?(wt=[wt,At],vt=wt):(pt=vt,vt=j),vt!==j)for(;vt!==j;)ct.push(vt),vt=pt,wt=nn(),$.charCodeAt(pt)===59?(At=bn,pt++):(At=j,Tt===0&&Lt(Nr)),At!==j?(wt=[wt,At],vt=wt):(pt=vt,vt=j);else ct=j;return ct===j&&(ct=pt,vt=Hl(),wt=Gr(),wt===j&&(wt=null),At=hr(),At!==j?(vt=[vt,wt,At],ct=vt):(pt=ct,ct=j),ct===j&&(ct=pt,vt=nn(),wt=Ul(),wt!==j?(vt=[vt,wt],ct=vt):(pt=ct,ct=j))),ct}function Ul(){var ct,vt;return ct=pt,Tt++,$.length>pt?(vt=$.charAt(pt),pt++):(vt=j,Tt===0&&Lt(_r)),Tt--,vt===j?ct=void 0:(pt=ct,ct=j),ct}const zl=g.reservedWords||[];if(ar=tt(),ar!==j&&pt===$.length)return ar;throw ar!==j&&pt<$.length&&Lt(jo()),zo(vr,On<$.length?$.charAt(On):null,On<$.length?ur(On,On+1):ur(On,On))}var parser$1={SyntaxError:peg$SyntaxError,parse:peg$parse};const GrammarError=grammarError,GrammarLocation=grammarLocation,compiler=compiler_1,parser=parser$1,VERSION=version,RESERVED_WORDS=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],peg={VERSION,RESERVED_WORDS,GrammarError,GrammarLocation,parser,compiler,generate($,g){g=g!==void 0?g:{};function j(tt){const nt={};return Object.keys(tt).forEach(rt=>{nt[rt]=tt[rt].slice()}),nt}const _e="plugins"in g?g.plugins:[],et={parser:peg.parser,passes:j(peg.compiler.passes),reservedWords:peg.RESERVED_WORDS.slice()};return _e.forEach(tt=>{tt.use(et,g)}),peg.compiler.compile(et.parser.parse($,{grammarSource:g.grammarSource,reservedWords:et.reservedWords}),et.passes,g)}};var peg_1=peg;const peggy=getDefaultExportFromCjs(peg_1),tocLangGrammarUrl="data:application/octet-stream;base64,Ly8gRGVidWcgd2l0aCBQZWdneUpzIHNhbmRib3gKLy8gaHR0cHM6Ly9wZWdneWpzLm9yZy9vbmxpbmUuaHRtbAoKewogIGZ1bmN0aW9uIG1ha2VJbnRlZ2VyKG8pIHsKICAgIHJldHVybiBwYXJzZUludChvLmpvaW4oIiIpLCAxMCk7CiAgfQp9CgpzdGFydAogID0gc3RhdGVtZW50OnN0YXRlbWVudD8gbW9yZVN0YXRlbWVudHM6KEVPTCBfIEBzdGF0ZW1lbnQpKiBFT0w/IF8KewogIGNvbnN0IHN0YXRlbWVudHMgPSBzdGF0ZW1lbnQgPyBbc3RhdGVtZW50LCAuLi5tb3JlU3RhdGVtZW50c10gOiBtb3JlU3RhdGVtZW50czsKICByZXR1cm4gewogICAgc3RhdGVtZW50czogc3RhdGVtZW50cwogIH07Cn0KCnN0YXRlbWVudCA9IGNvbW1lbnRMaW5lIC8gbm9kZVN0YXRlbWVudCAvIGVkZ2VTdGF0ZW1lbnQKCmNvbW1lbnRMaW5lID0gXyAiIyIgdGV4dDooW15cblxyXSopCnsKICByZXR1cm4gewogICAgdHlwZTogImNvbW1lbnQiLAogICAgdGV4dDogdGV4dC5qb2luKCIiKQogIH07Cn0KCm5vZGVTdGF0ZW1lbnQgPSBfIGlkZW50OmlkZW50IF8gbGFiZWw6Y29sb25MYWJlbCBfIHBhcmFtczpwYXJhbUJsb2NrPyBfCiAgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogIm5vZGUiLAogICAgICBpZDogaWRlbnQsCiAgICAgIHRleHQ6IGxhYmVsLAogICAgICBwYXJhbXM6IHBhcmFtcyB8fCB7fQogICAgfTsKICB9Cgpjb2xvbkxhYmVsID0gIjoiIF9fIGxhYmVsOmxhYmVsCiAgewogICAgcmV0dXJuIGxhYmVsCiAgfQoKZWRnZVN0YXRlbWVudCA9IGxlZnRFZGdlU3RhdGVtZW50IC8gcmlnaHRFZGdlU3RhdGVtZW50IC8gYmlEaXJFZGdlU3RhdGVtZW50CgpsZWZ0RWRnZVN0YXRlbWVudCA9IF8gIHRvSWQ6aWRlbnQgXyAiPC0iIF8gZnJvbUlkczppZGVudHwuLiwgXyAiJiYiIF98IF8gbGFiZWw6Y29sb25MYWJlbD8KICB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAiZWRnZSIsCiAgICAgIHRvSWQ6IHRvSWQsCiAgICAgIHRleHQ6IGxhYmVsIHx8IHVuZGVmaW5lZCwKICAgICAgZnJvbUlkczogZnJvbUlkcwogICAgfTsKICB9CgpyaWdodEVkZ2VTdGF0ZW1lbnQgPSBfICBmcm9tSWRzOmlkZW50fC4uLCBfICImJiIgX3wgXyAiLT4iIF8gdG9JZDppZGVudCBfIGxhYmVsOmNvbG9uTGFiZWw/CiAgewogICAgcmV0dXJuIHsKICAgICAgdHlwZTogImVkZ2UiLAogICAgICB0b0lkOiB0b0lkLAogICAgICB0ZXh0OiBsYWJlbCB8fCB1bmRlZmluZWQsCiAgICAgIGZyb21JZHM6IGZyb21JZHMKICAgIH07CiAgfQoKYmlEaXJFZGdlU3RhdGVtZW50ID0gXyAgZnJvbUlkOmlkZW50IF8gIi0tIiBfIHRvSWQ6aWRlbnQgXyBsYWJlbDpjb2xvbkxhYmVsPwogIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICJlZGdlIiwKICAgICAgdG9JZDogdG9JZCwKICAgICAgdGV4dDogbGFiZWwgfHwgdW5kZWZpbmVkLAogICAgICBmcm9tSWRzOiBbZnJvbUlkXSwKICAgICAgYmlEaXJlY3Rpb25hbDogdHJ1ZQogICAgfTsKICB9CgoKcGFyYW1CbG9jayA9ICJ7IiAgXyBFT0w/IF8gcGFyYW1zOnBhcmFtfC4uLCBfICJFT0wiIF98ICJ9IiAKewoJcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhwYXJhbXMpOwp9CgpwYXJhbSA9IGlkZW50OmlkZW50IF8gJzonIF8gZXhwcmVzc2lvbjoobnVtL2xhYmVsKSBfIEVPTD8gXwp7CglyZXR1cm4gW2lkZW50LCBleHByZXNzaW9uXTsKfQoKbnVtID0gIG51bTooWzAtOV0rKQp7IHJldHVybiBtYWtlSW50ZWdlcihudW0pOyB9CgppZGVudCA9IGlkOihbYS16QS1aMC05XyddKykKeyByZXR1cm4gaWQuam9pbigiIik7IH0KCmxhYmVsID0gc3RyOnN0cmluZyAvIHRleHQ6KFtee31cbl0qKQp7IHJldHVybiB0ZXh0LmpvaW4oIiIpLnRyaW0oKTsgfQoKc3RyaW5nID0gIlwiIiB0ZXh0OihbXiJdKikgIlwiIgp7IHJldHVybiB0ZXh0LmpvaW4oIiIpOyB9CgpFT0wKICA9IFsgXHRdKiBbXG5ccl0rCgpfICJvcHRpb25hbCB3aGl0ZXNwYWNlIgogID0gWyBcdF0qCgpfXyAid2hpdGVzcGFjZSIKICA9IFsgXHRdKwo=",loadFile=async $=>await(await fetch($)).text(),tocLangParserPromise=loadFile(tocLangGrammarUrl).then($=>peggy.generate($)),parsersPromise=Promise.all([tocLangParserPromise]).then(([$])=>({conflict:$,goal:$,problem:$})),isGoalNodeStatement=$=>$.type==="node"&&normalizeId($.id)==="goal",normalizeId=$=>$&&$.toLowerCase()==="goal"?"Goal":$,parseGoalTreeSemantics=$=>{const g=new Map;g.set("Goal",{key:"Goal",label:"",annotation:"G"});const j=[],_e=$.statements.find(isGoalNodeStatement);return _e&&(g.get("Goal").label=_e.text),$.statements.filter(et=>et.type==="node").forEach(et=>{const tt={key:et.id,label:et.text};et.params.class&&(tt.annotation=et.params.class),et.id==="Goal"&&(tt.annotation="G"),(et.params.status||et.params.status===0)&&(tt.statusPercentage=et.params.status),g.set(et.id,tt)}),$.statements.filter(et=>et.type==="edge").forEach(et=>{const tt=et.toId;if(!g.has(tt))throw new Error(`Node ${tt} not found`);if(et.fromIds.length!==1)throw new Error("Edges must have exactly one 'from' node in a Goal Tree");const nt=et.fromIds[0];if(!g.has(nt))throw new Error(`Requirement ${nt} not found`);tt==="Goal"&&(g.get(nt).annotation="CSF"),j.push({from:nt,to:tt})}),{nodes:g,edges:j,rankdir:"BT"}},parseProblemTreeSemantics=$=>{const g=new Map,j=[],_e=et=>{var nt,rt,it;const tt=/^(UDE|FOL|DE)/i;if(typeof((nt=et.params)==null?void 0:nt.class)=="string"&&((it=(rt=et.params)==null?void 0:rt.class)!=null&&it.match(tt)))return et.params.class.match(tt)[0].toUpperCase()};return $.statements.filter(et=>et.type==="node").forEach(et=>{g.set(et.id,{annotation:_e(et),key:et.id,label:et.text})}),$.statements.filter(et=>et.type==="edge").forEach(et=>{const tt=et.toId;let nt=tt;if(et.fromIds.length>1){const rt=et.fromIds.join("_")+"_cause_"+tt;nt=rt,g.set(rt,{key:rt,label:"AND",intermediate:!0}),j.push({from:rt,to:tt})}for(const rt of et.fromIds){if(!g.has(rt))throw new Error(`Cause ${rt} not declared`);if(!g.has(tt))throw new Error(`Effect ${tt} not declared`);j.push({from:rt,to:nt})}}),{nodes:g,edges:j,rankdir:"BT"}},normalizeAstIds=$=>{const{statements:g,...j}=$;return{statements:g.map(et=>{const{id:tt,fromIds:nt,toId:rt,...it}=et,st={...it};return tt&&(st.id=normalizeId(tt)),rt&&(st.toId=normalizeId(rt)),nt&&(st.fromIds=nt.map(normalizeId)),st}),...j}},parseTextToAst=async $=>{if(typeof $!="string")throw Error("Code missing");const g=$.match(/\btype:\s*(\w+)\b/);if(!g)throw Error("Type declaration missing");const j=g[1];if(["problem","conflict","goal"].includes(j)){const _e=j,tt=(await parsersPromise)[j].parse($);return{ast:{statements:normalizeAstIds(tt).statements.filter(it=>it.id!=="type")},type:_e}}else throw Error(`Invalid type '${j}'. Must be one of: problem, conflict, goal`)};function Draw(){const[$,g]=React.useState(null),[j,_e]=React.useState(null),[et,tt]=React.useState(""),[nt,rt]=React.useState(),[it,st]=React.useState(),ot=async at=>{try{const{ast:lt,type:ut}=await parseTextToAst(at);console.log("diagramType",ut),ut==="goal"?_e(parseGoalTreeSemantics(lt)):ut==="problem"?_e(parseProblemTreeSemantics(lt)):(_e(null),st(null)),console.log(lt),g(lt),st(ut),tt("")}catch(lt){console.error(lt),tt(lt.toString())}};return jsxRuntimeExports.jsxs("div",{className:"flex-row",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(EditorContainer,{onChange:ot,rows:20,text:nt,setText:rt,error:et})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Diagram,{ast:$,semantics:j,diagramType:it})})]})}function About($){return jsxRuntimeExports.jsxs("div",{id:"about-page",children:[jsxRuntimeExports.jsx("h1",{children:"TOC-Lang"}),jsxRuntimeExports.jsxs("p",{children:["Generate"," ",jsxRuntimeExports.jsx("a",{href:"https://en.wikipedia.org/wiki/Theory_of_constraints",children:"Theory of Constraints"})," ","diagrams from text-based notation. Learn more"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/raymyers/toc-lang/",children:"on GitHub!"})]})]})}const router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(App,{}),errorElement:jsxRuntimeExports.jsx(ErrorPage,{}),children:[{index:!0,loader:async()=>redirect("/draw/goal-tree")},{path:"draw",element:jsxRuntimeExports.jsx(Draw,{})},{path:"draw/:diagramType",loader:async()=>redirect("/draw")},{path:"about",element:jsxRuntimeExports.jsx(About,{})}]}],{basename:"/toc-lang"}),rootResetElt=document.getElementById("root-reset");rootResetElt&&client.createRoot(rootResetElt).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(RouterProvider,{router})}))});export default Gl();
